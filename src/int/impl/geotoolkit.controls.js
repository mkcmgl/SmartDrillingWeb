/* eslint-disable */
import {__decorate as t} from 'tslib';import {Wi,Pi,Es,ki,$g,Qg,fg,$o,xA,_s,Fa,ka,su,il,hl,wr,rh,Gn,ma,tp,lA,NA,mA,oh,bn,qi,dp,Rd,Zi,$n,dA,iu,ke,zn,be,Fo,qa,sI,YC,cE,bC,RA,ph,Au,el,Du,Ns,OA,fA,Ip,WC,ks,fr,jf,je,Mo,mo,No,tn,gu,sa,OC,yu,Dr,yr,Aa,NC,nd,bo,So,Go,ko,Ro,fd,dg,jm,Zm,Eo,iB,ww,lw,ha,nA,Xi,ne,Ea,eE,nh,In,Yu,Bp,_Q,yp,Un,Ss,rA,$i,Fs,ns,_l,TA,QA,zB,Ca,Cm,fm,na,qh,Zs,Bs,Is,ys,ap,tI,JC,sB,rp,ep,Ju,op,lp,Ic,oE,Gs,fe,$Q,Be,de,Sw,Mi,Ie,Ts,Bh,Al,Sc,Ih,ch,TQ,Ew,ta,ie,wc,Ji,xs,Hw,Ys,da,ur,Om,gE,Ki,sE,nE,Hs,Rl,eh,mQ,ge,re,Xy,ee,oe,le,he,gc,ff,df,LA,we,Qe,Ks,ic,ZA,Us,aE,jA,ua,kw,Vm,Rw,wA,Vy,Py,ve,De,Ci} from '@int/impl/geotoolkit.base.js';import {zD,bM,xD,UD,NM,YD,qb,Pb,kb,Vb,yM,PD,VD,vM,KD} from '@int/impl/geotoolkit.data.js';var tD=Ci({Lut_:"Edge",Range:"Range",ne_:"Center"},2,"eyJFZGdlIjoiTHV0XyIsIkNlbnRlciI6Im5lXyJ9");const iD=[tD.Lut_,tD.Range,tD.ne_],sD="#757575",eD="#e0e0e0",AD="12px Roboto",nD=5,hD=["major","edge"];var rD=Ci(function(){var i;let s=i=class t extends Qg{constructor(t){let i=typeof t=="number"?{bins:t}:t;i=Pi(i,{minor:{ticksize:5,tickstyle:{color:eD,pixelsnapmode:{x:!0,y:!0}},labelstyle:{color:eD,baseline:ka.j_,alignment:Fa.ne_,font:AD},tickvisible:!1,labelvisible:!1},major:{labelformat:(new $g).ZU_(2),ticksize:nD,tickstyle:{color:sD,pixelsnapmode:{x:!0,y:!0}},labelstyle:{color:sD,baseline:ka.j_,alignment:Fa.ne_,font:AD}},edge:{ticksize:nD,tickstyle:{color:sD,pixelsnapmode:{x:!0,y:!0}},labelstyle:{color:sD,baseline:ka.j_,alignment:Fa.ne_,font:AD}},rotatelabels:!1,minimumspan:40,labelstrategy:tD.Lut_},!0);super(i);this.Uut_=0;this.Yut_=0;this.Tut_=0;this.Kut_=0;this.Hut_=0;this.qut_=0;this.Jut_=1}dt_(t){if(!(t=Es(t)))return this;super.dt_(t);t["major"]!=null&&t["major"]["labelformat"]!=null&&this.Put_(t["major"]["labelformat"]);t["labelstrategy"]!=null&&this.Vut_(t["labelstrategy"]);t["minimumspan"]!=null&&this.Out_(t["minimumspan"]);t["bins"]!=null&&this.Wut_(t["bins"]);t["rotatelabels"]!=null&&this.zut_(t["rotatelabels"]);return this}N_(){const t=super.N_();this.Xut_()!==tD.Lut_&&(t["labelstrategy"]=this.Xut_());t["minimumspan"]=this.jut_();t["bins"]=this.Zut_;t["rotatelabels"]=this.rU_;return t}Put_(t){this.jF_=t;return this}_ut_(){return this.jF_}Wut_(t){this.Zut_=t;return this}Vut_(t){if(typeof t=="number"){ki("setLabelStrategy(number) is deprecated since 4.0, use LabelStrategy type instead");t=iD[t]}this.$ut_=t;return this}Xut_(){return this.$ut_}Out_(t){this.AU_=t;return this}jut_(){return this.AU_}clone(){return Object.getPrototypeOf(this)!==i.prototype?Wi(this):(new i).b_(this,!0)}b_(t,i){i===!0&&super.b_(t,i);this.Zut_=t.Zut_;this.AU_=t.AU_;this.$ut_=t.$ut_;this.rU_=t.rU_;this.jF_=t.jF_.clone();return this}reset(t,i,s){this.Jut_=(s.vE_()-s.NE_())/this.Zut_;this.Hut_=0;this.Kut_=0;this.rU_?s.c_(Math.PI/2):s.c_(0);return this.eL_(hD)}zut_(t){this.rU_=t;return this}tat_(t,i){const s=t===fg.ux_?i.mE_().BI_():i.mE_().sI_();this.qut_=Math.abs(this.AU_/s)}jx_(t,i,s){const e=s.RE_();s.rB_(this.Vx_(e));this.tat_(i,s);if(this.$ut_===tD.Lut_){if(e==="edge")return 2;if(e==="major"){this.Hut_=s.NE_();return this.Zut_-1}}if(this.$ut_===tD.ne_||this.$ut_===tD.Range){if(e==="edge")return 0;if(e==="major"){this.Hut_=s.NE_();return this.Zut_}}return 0}Xx_(t,i,s){const e=s.RE_();s.g_(this.Rx_(e));this.tat_(i,s);let A;if(this.$ut_===tD.Lut_){if(e==="edge"){A=s.mE_().gI_($o.measureText(this.jF_.format(s.NE_()),s.FE_()).jy_());this.Tut_=i===fg.ux_?this.rU_?A.Ts_():A.Ie_():this.rU_?A.Ie_():A.Ts_();A=s.mE_().gI_($o.measureText(this.jF_.format(s.vE_()),s.FE_()).jy_());this.Yut_=i===fg.ux_?this.rU_?A.Ts_():A.Ie_():this.rU_?A.Ie_():A.Ts_();return 2}if(s.RE_()==="major"){this.Hut_=s.NE_();this.Kut_=s.NE_();this.Uut_=0;return this.Zut_-1}}if(this.$ut_===tD.ne_||this.$ut_===tD.Range){if(e==="edge"){A=s.mE_().gI_($o.measureText(this.jF_.format(s.NE_()),s.FE_()).jy_());this.Tut_=i===fg.ux_?this.rU_?A.Ts_():A.Ie_():this.rU_?A.Ie_():A.Ts_();A=s.mE_().gI_($o.measureText(this.jF_.format(s.vE_()),s.FE_()).jy_());this.Yut_=i===fg.ux_?this.rU_?A.Ts_():A.Ie_():this.rU_?A.Ie_():A.Ts_();return 0}if(s.RE_()==="major"){this.Hut_=s.NE_();this.Kut_=s.NE_();this.Uut_=0;return this.Zut_}}return 0}iat_(t,i,s,e){const A=t+(i+1)*s;if(this.qx_("edge")&&this.Vx_("edge")!=null&&(Math.abs(A-t)<this.qut_||Math.abs(A-e)<this.qut_))return Number.NaN;if(Math.abs(this.Hut_-A)<this.qut_)return Number.NaN;this.Hut_=A;return A}sat_(t,i,s){const e=t+(i+.5)*s;if(this.Hut_===t){if(Math.abs(this.Hut_-e)<this.qut_/2)return Number.NaN}else if(Math.abs(this.Hut_-e)<this.qut_)return Number.NaN;this.Hut_=e;return e}_x_(t,i,s,e){const A=this.Jut_,n=s.RE_(),h=s.NE_(),r=s.vE_();if(this.$ut_===tD.Lut_){if(n==="edge"){const t=new xA(1,1);let A=e===0?r:h;if(i===fg.ax_&&s.mE_().sI_()<0){s.mE_().cI_(t,t);A+=t.Ts_()}if(i===fg.ux_&&s.mE_().BI_()<0){s.mE_().cI_(t,t);A+=t.Ie_()}return A}if(n==="major")return this.iat_(h,e,A,r)}else if((this.$ut_===tD.ne_||this.$ut_===tD.Range)&&n==="major")return this.sat_(h,e,A);return Number.NaN}Zx_(t,i,s,e){const A=this.Jut_,n=s.RE_(),h=s.NE_(),r=s.vE_();let o;if(this.$ut_===tD.Lut_){if(n==="edge")return e===0?h:r;if(n==="major"){o=this.iat_(h,e,A,r);let t=$o.measureText(this.jF_.format(o),s.FE_()).jy_();t=s.mE_().gI_(t);const n=i===fg.ux_?this.rU_?t.Ts_():t.Ie_():this.rU_?t.Ie_():t.Ts_();if(Math.abs(o-h)<this.Tut_+n*.5||Math.abs(o-r)<this.Yut_+n*.5)return Number.NaN;if(Math.abs(this.Kut_-o)<.5*(this.Uut_+n))return Number.NaN;this.Kut_=o;this.Uut_=n;return o}}return this.$ut_!==tD.ne_&&this.$ut_!==tD.Range||n!=="major"?Number.NaN:this.sat_(h,e,A)}Fx_(t,i,s,e,A){const n=this.Tx_();if(this.$ut_===tD.Range){const A=undefined;if(s.RE_()==="major"){const A=s.NE_(),h=A+e*this.Jut_,r=A+(e+1)*this.Jut_;if(n==null){const t=undefined,i=undefined;return this.jF_.format(h)+"-"+this.jF_.format(r)}return n(this,t,i,s,e,h)+"-"+n(this,t,i,s,e,r)}}return n==null?this.jF_.format(A):n(this,t,i,s,e,A)}Nx_(t,i,s,e){if(e<s)return[];const A=[{type:"edge",value:s},{type:"edge",value:e}],n=s+this.Jut_,h=e-this.Jut_;if(h>=n){A.push({type:"major",value:n});A.push({type:"major",value:h})}return A}};s=i=t([_s("geotoolkit.controls.axis.HistogramTickGenerator")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0TWFqb3JMYWJlbEZvcm1hdCI6IlB1dF8iLCJnZXRNYWpvckxhYmVsRm9ybWF0IjoiX3V0XyIsInNldEJpbkNvdW50IjoiV3V0XyIsInNldExhYmVsU3RyYXRlZ3kiOiJWdXRfIiwiZ2V0TGFiZWxTdHJhdGVneSI6Ilh1dF8iLCJzZXRNaW5pbXVtU3BhbiI6Ik91dF8iLCJnZXRNaW5pbXVtU3BhbiI6Imp1dF8iLCJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldFJvdGF0ZUxhYmVscyI6Inp1dF8iLCJyZXNldFRpY2tzIjoianhfIiwicmVzZXRMYWJlbHMiOiJYeF8iLCJuZXh0VGljayI6Il94XyIsIm5leHRMYWJlbCI6Ilp4XyIsImZvcm1hdExhYmVsIjoiRnhfIiwiZ2V0TWF4TGFiZWxzIjoiTnhfIn19fSAg");var oD=Ci(function(){var t;return class{constructor(t,i,s){this.eat_=t;this.Aat_=i;this.tH_=s}nat_(){return this.eat_}hat_(){ki("SerieElementInfo#getSerieId is deprecated since 4.0. Use SeriesElementInfo#getSeriesId instead.");return this.eat_}rat_(){return this.Aat_}OT_(){return this.tH_}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTZXJpZXNJZCI6Im5hdF8iLCJnZXRTZXJpZUlkIjoiaGF0XyIsImdldFNhbXBsZUlkIjoicmF0XyIsImdldE93bmVyIjoiT1RfIn19fSAg");const lD={color:"#000",pixelsnapmode:!0};var uD=Ci(function(){let i=class t extends su{constructor(t){const i=Es(t)||{};i["activefillstyle"]===void 0&&(i["activefillstyle"]="#0f0");i["inactivefillstyle"]===void 0&&(i["inactivefillstyle"]="#fff");i["activelinestyle"]===void 0&&(i["activelinestyle"]=lD);i["inactivelinestyle"]===void 0&&(i["inactivelinestyle"]=lD);i["operationinfo"]===void 0&&(i["operationinfo"]=null);i["shapeadapter"]===void 0&&(i["shapeadapter"]=null);i["active"]===void 0&&(i["active"]=!1);super();this.oat_=il.BD_(i["activefillstyle"]);this.lat_=il.BD_(i["inactivefillstyle"]);this.uat_=hl.Wi_(i["activelinestyle"]);this.aat_=hl.Wi_(i["inactivelinestyle"]);this.gat_=i["operationinfo"];this.cat_=i["shapeadapter"];this.Gi_=i["active"]===!0;this.oat_&&this.tC_(this.oat_,rh.sC_,this.oQ_());this.lat_&&this.tC_(this.lat_,rh.sC_,this.oQ_());this.uat_&&this.tC_(this.uat_,rh.sC_,this.oQ_());this.aat_&&this.tC_(this.aat_,rh.sC_,this.oQ_())}b_(t){this.dt_(t.N_());return this}Iat_(t){this.cat_=t;return this}fat_(){return this.cat_}setActive(t){if(this.Gi_!==t){this.Gi_=t;this.vn_().td_()}return this}isActive(){return this.Gi_}Cat_(){return this.oat_}dat_(t,i){if(this.oat_===t)return this;const s=il.wD_(this,this.oat_,t,i,this.oQ_());this.Bat_(s);this.vn_().td_();return this}Bat_(t){this.oat_=t;return this}wat_(t,i){if(this.uat_===t)return this;const s=hl.jD_(this,this.uat_,t,i,this.oQ_());this.Qat_(s);this.vn_().td_();return this}Qat_(t){this.uat_=t;return this}Eat_(){return this.uat_}pat_(t,i){if(this.aat_===t)return this;const s=hl.jD_(this,this.aat_,t,i,this.oQ_());this.mat_(s);this.vn_().td_();return this}mat_(t){this.aat_=t;return this}yat_(){return this.aat_}Dat_(){return this.lat_}Mat_(t,i){if(this.lat_===t)return this;const s=il.wD_(this,this.lat_,t,i,this.oQ_());this.vat_(s);this.vn_().td_();return this}vat_(t){this.lat_=t;return this}bat_(t){this.gat_=t;return this}Nat_(){return this.gat_}N_(){const t=super.N_();t["activefillstyle"]=this.oat_;t["inactivefillstyle"]=this.lat_;t["activelinestyle"]=this.uat_;t["inactivelinestyle"]=this.aat_;t["operationinfo"]=this.gat_;t["shapeadapter"]=this.cat_;t["active"]=this.Gi_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["activefillstyle"]!==void 0&&this.dat_(t["activefillstyle"],t["activefillstyle"]instanceof wr==!1);t["inactivefillstyle"]!==void 0&&this.Mat_(t["inactivefillstyle"],t["inactivefillstyle"]instanceof wr==!1);t["activelinestyle"]!==void 0&&this.wat_(t["activelinestyle"],t["activelinestyle"]instanceof hl==!1);t["inactivelinestyle"]!==void 0&&this.pat_(t["inactivelinestyle"],t["inactivelinestyle"]instanceof hl==!1);t["operationinfo"]!==void 0&&this.bat_(t["operationinfo"]);t["shapeadapter"]!==void 0&&this.Iat_(t["shapeadapter"]);t["active"]!==void 0&&this.setActive(t["active"]);return this}};i=t([_s("geotoolkit.controls.editing.AbstractHandle")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldEFkYXB0ZXIiOiJJYXRfIiwiZ2V0QWRhcHRlciI6ImZhdF8iLCJnZXRBY3RpdmVGaWxsU3R5bGUiOiJDYXRfIiwic2V0QWN0aXZlRmlsbFN0eWxlIjoiZGF0XyIsInNldEFjdGl2ZUxpbmVTdHlsZSI6IndhdF8iLCJnZXRBY3RpdmVMaW5lU3R5bGUiOiJFYXRfIiwic2V0SW5hY3RpdmVMaW5lU3R5bGUiOiJwYXRfIiwiZ2V0SW5hY3RpdmVMaW5lU3R5bGUiOiJ5YXRfIiwiZ2V0SW5hY3RpdmVGaWxsU3R5bGUiOiJEYXRfIiwic2V0SW5hY3RpdmVGaWxsU3R5bGUiOiJNYXRfIiwic2V0T3BlcmF0aW9uSW5mbyI6ImJhdF8iLCJnZXRPcGVyYXRpb25JbmZvIjoiTmF0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");var aD=Ci(function(){let i=class t extends uD{constructor(t){const i=Es(t)||{};i["ghostlinestyle"]===void 0&&(i["ghostlinestyle"]={color:"rgba(0, 0, 0, 0.4)",pixelsnapmode:!0});i["ghostfillstyle"]===void 0&&(i["ghostfillstyle"]="rgba(0, 0, 0, 0.2)");i["isghost"]===void 0&&(i["isghost"]=!1);super(i);this.Sat_=i["ghostfillstyle"]!=null?il.BD_(i["ghostfillstyle"]):null;this.Gat_=i["ghostlinestyle"]!=null?hl.Wi_(i["ghostlinestyle"]):null;this.Rat_=i["isghost"];this.kat_=null;this.Fat_=null;this.at_(new Gn);this.Sat_&&this.tC_(this.Sat_,rh.sC_,this.oQ_());this.Gat_&&this.tC_(this.Gat_,rh.sC_,this.oQ_())}xat_(){return this.Fat_!==null}Lat_(){this.xat_()&&this.Fat_.dispose();this.Fat_=null;return this}dispose(){this.xat_()&&this.Fat_.dispose();super.dispose()}Uat_(){if(this.Fat_!==null){this.Yat_();return this.Fat_}this.Fat_=this.clone();this.Fat_.dat_(this.Sat_);this.Fat_.Mat_(this.Sat_);this.Fat_.wat_(this.Gat_);this.Fat_.pat_(this.Gat_);this.Fat_.Tat_(!0);this.Fat_.Kat_(this);this.getParent().GY_(this.Fat_);return this.Fat_}Hat_(){return this.Rat_}qat_(){return this.Fat_}Yat_(){if(this.xat_()){this.Fat_.dt_(this.N_());this.Fat_.ut_().fI_();this.Fat_.dat_(this.Sat_);this.Fat_.Mat_(this.Sat_);this.Fat_.wat_(this.Gat_);this.Fat_.pat_(this.Gat_);this.Fat_.Tat_(!0);this.Fat_.vn_()}return this}Tat_(t){this.Rat_=t;return this}Jat_(){return this.kat_}Kat_(t){this.kat_=t;return this}Iat_(t){if(this.Hat_()){this.kat_.Iat_(t);return this}return super.Iat_(t)}Pat_(){return this.Sat_}Vat_(t,i){if(this.Sat_===t)return this;this.Sat_=il.wD_(this,this.Sat_,t,i,this.oQ_());this.vn_().td_();return this}Oat_(){return this.Gat_}Wat_(t,i){if(this.Gat_===t)return this;this.Gat_=hl.jD_(this,this.Gat_,t,i,this.oQ_());this.vn_().td_();return this}fat_(){return this.Hat_()?this.kat_.fat_():super.fat_()}N_(){const t=super.N_();t["ghostfillstyle"]=this.Sat_;t["ghostlinestyle"]=this.Gat_;t["isghost"]=this.Rat_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["ghostfillstyle"]!==void 0&&this.Vat_(t["ghostfillstyle"],t["ghostfillstyle"]instanceof wr==!1);t["ghostlinestyle"]!==void 0&&this.Wat_(t["ghostlinestyle"],t["ghostlinestyle"]instanceof hl==!1);t["isghost"]!==void 0&&this.Tat_(t["isghost"]);return this}nf_(t){this.xat_()&&this.Fat_.nf_(t);super.nf_(t);return this}};i=t([_s("geotoolkit.controls.editing.GhostBearingHandle")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJoYXNHaG9zdCI6InhhdF8iLCJyZW1vdmVHaG9zdCI6IkxhdF8iLCJjcmVhdGVHaG9zdCI6IlVhdF8iLCJpc0dob3N0IjoiSGF0XyIsImdldEdob3N0IjoicWF0XyIsInJlc2V0R2hvc3QiOiJZYXRfIiwic2V0R2hvc3RNb2RlIjoiVGF0XyIsImdldFBhcmVudEhhbmRsZSI6IkphdF8iLCJzZXRQYXJlbnRIYW5kbGUiOiJLYXRfIiwic2V0QWRhcHRlciI6IklhdF8iLCJnZXRHaG9zdEZpbGxTdHlsZSI6IlBhdF8iLCJzZXRHaG9zdEZpbGxTdHlsZSI6IlZhdF8iLCJnZXRHaG9zdExpbmVTdHlsZSI6Ik9hdF8iLCJzZXRHaG9zdExpbmVTdHlsZSI6IldhdF8iLCJnZXRBZGFwdGVyIjoiZmF0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJzZXRWaXNpYmxlIjoibmZfIn19fSAg");const gD=(new ma).yf_(!0),cD=(new ma).gk_(!0).OG_(!0).yf_(!0),ID=(new ma).yf_(!0).iQ_(wr.EQ_);var fD=function(){var i;let s=i=class t{static Ik_(t,s,e,A,n,h){i.zat_(t,gD,s,e,A,n,h)}static Xat_(t,s,e,A,n,h){i.zat_(t,cD,s,e,A,n,h)}static ud_(t,i,s){gD.setSize(i.Ie_(),i.Ts_());gD.gR_(s);return gD.ud_(t)}static zat_(t,i,s,e,A,n,h){if(t.tk_()){ID.gR_(s);ID.rk_(e);ID.setSize(A.Ie_(),A.Ts_());ID.rB_(h);ID.OG_(i.WG_());ID.render(t)}else{i.gR_(s);i.rk_(e);i.setSize(A.Ie_(),A.Ts_());i.rB_(h);i.iQ_(n);i.render(t)}}};s=i=t([_s("geotoolkit.controls.editing.SymbolHandleDriver")],s);return s}();const CD=new Gn;var dD=Ci(function(){let i=class t extends aD{constructor(t,i,s){const e=typeof t=="number"?{x:t}:Es(t)||{};e["x"]===void 0&&(e["x"]=typeof t=="number"?t:0);e["y"]===void 0&&(e["y"]=typeof i=="number"?i:0);e["size"]===void 0&&(e["size"]=s);e["painter"]===void 0&&(e["painter"]=tp);e["isindevicespace"]===void 0&&(e["isindevicespace"]=!0);super(e);this.fk_=this.jat_(e["size"],e["width"],e["height"]);this.Zat_=new xA(8,8);this._at_=new lA(e["x"],e["y"]);this.$at_=e["painter"];this.tgt_=e["isindevicespace"];this.n__=null;this.igt_=new Gn}gR_(t){if(this._at_.bs_(t,NA.Je_))return this;this.td_();this._at_=t;this.vn_().td_();return this}lR_(){return this._at_}sgt_(t){this.td_();this.fk_=this.jat_(t);this.vn_().td_();return this}egt_(){return this.fk_}render(t){const i=this.sd_()==null||this.sd_().isIdentity()?t:t.uS_(this.sd_());this.tgt_||i.Ji_().oI_(this.fk_,this.Zat_);const s=this.tgt_?this.fk_:this.Zat_;let e=null,A=null;if(this.isActive()){e=this.oat_;A=this.uat_}else{e=this.lat_;A=this.aat_}e=this.ct_()||e;A=this.gt_()||A;fD.Xat_(i,this._at_,this.$at_,s,e,A)}vn_(t,i){super.vn_();if(i===oh.BC_)return this;this.n__=null;return this}td_(t,i){t=t||this.getBoundingBox(this.if_());return super.td_(t,i)}ud_(t){let i=t.Ji_();const s=this.sd_();s!=null&&(i=Gn.multiply(i,s,CD));return this.$C_()===!0&&su.gN_(this.getBoundingBox(i),s,t.rS_())}getBoundingBox(t){if(this.fk_==null||this.igt_==null)return null;if(this.n__!=null)return this.n__;t==null?this.igt_.fI_():this.igt_.dI_(t);let i;i=this.tgt_&&!this.igt_.isIdentity()?this.igt_.cI_(this.fk_,this.Zat_):this.fk_;const s=i.Ie_()/2,e=i.Ts_()/2;this.n__=new mA(this._at_.x-s,this._at_.y-e,this._at_.x+s,this._at_.y+e);const A=this.isActive()?this.Eat_():this.yat_();if(A!=null){const t=A.Ie_(),i=bn.$c_(t,0,this.igt_),s=bn.$c_(0,t,this.igt_);this.n__.Le_(i/2,s/2)}return this.n__.lock()}getBounds(){return this.getBoundingBox(this.if_())}jat_(t,i,s){return t instanceof xA?t:typeof t=="number"?new xA(t,t):new xA(i||8,s||8)}N_(){const t=super.N_();t["size"]=this.fk_;t["x"]=this._at_.x;t["y"]=this._at_.y;t["painter"]=this.$at_;t["isindevicespace"]=this.tgt_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(t["size"]!==void 0){this.td_();this.fk_=this.jat_(t["size"],t["width"],t["height"]);this.td_()}t["x"]!==void 0&&(this._at_.x=t["x"]);t["y"]!==void 0&&(this._at_.y=t["y"]);t["painter"]!==void 0&&(this.$at_=t["painter"]);t["isindevicespace"]!==void 0&&(this.tgt_=t["isindevicespace"]);return this}};i=t([_s("geotoolkit.controls.editing.AnchoredHandle")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRBbmNob3IiOiJnUl8iLCJnZXRBbmNob3IiOiJsUl8iLCJzZXRIYW5kbGVTaXplIjoic2d0XyIsImdldEhhbmRsZVNpemUiOiJlZ3RfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJpbnZhbGlkYXRlIjoidGRfIiwiY2hlY2tDb2xsaXNpb24iOiJ1ZF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var BD=Ci(function(){let i=class t extends aD{constructor(t,i,s,e){const A=qi(t,{left:typeof t=="number"?t:0,top:typeof i=="number"?i:0,right:typeof s=="number"?s:0,bottom:typeof e=="number"?e:0,activefillstyle:"rgba(0, 255, 0, 0.1)",inactivefillstyle:"transparent"});super(A);this.Agt_=new dp(A["rect"]!=null?A["rect"]:A)}dt_(t){super.dt_(t);t["rect"]!==void 0&&this.ce_(t["rect"]);return this}td_(t,i){t==null&&this.Agt_!=null&&(t=this.Agt_.getBounds());this.$C_()&&this.zf_(t,i);return this}N_(){const t=super.N_();t["rect"]=this.B1_();return t}ce_(t){this.Agt_.ht_(t);return this}B1_(){return this.Agt_.getBounds()}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.isActive()?this.Agt_.iQ_(this.oat_).rB_(this.uat_):this.Agt_.iQ_(this.lat_).rB_(this.aat_);this.Agt_.render(i)}};i=t([_s("geotoolkit.controls.editing.BoxHandle")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiaW52YWxpZGF0ZSI6InRkXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFJlY3QiOiJjZV8iLCJnZXRSZWN0IjoiQjFfIn19fSAg");var wD=Ci({ngt_:"dragstart",hgt_:"beforedragging",rgt_:"dragging",ogt_:"afterdragging",lgt_:"dragend",q_:"delete",ugt_:"insert",agt_:"move"},2,"eyJEcmFnU3RhcnQiOiJuZ3RfIiwiQmVmb3JlRHJhZ2dpbmciOiJoZ3RfIiwiRHJhZ2dpbmciOiJyZ3RfIiwiQWZ0ZXJEcmFnZ2luZyI6Im9ndF8iLCJEcmFnRW5kIjoibGd0XyIsIkRlbGV0ZSI6InFfIiwiSW5zZXJ0IjoidWd0XyIsIk1vdmUiOiJhZ3RfIn0g");var QD=function(){let i=class t extends dD{};i=t([_s("geotoolkit.controls.editing.Handle")],i);return i}();const ED=(new Rd).yf_(!0),pD=new Gn;var mD=Ci(function(){let i=class t extends aD{constructor(t,i,s,e){const A=typeof t=="number"?{x1:t}:Es(t)||{};A["x1"]===void 0&&(A["x1"]=typeof t=="number"?t:0);A["x2"]===void 0&&(A["x2"]=typeof s=="number"?s:0);A["y1"]===void 0&&(A["y1"]=typeof i=="number"?i:0);A["y2"]===void 0&&(A["y2"]=typeof e=="number"?e:0);A["linewidth"]===void 0&&(A["linewidth"]=1);super(A);this.ggt_=new lA(A["x1"],A["y1"]);this.cgt_=new lA(A["x2"],A["y2"]);this.kD_=A["linewidth"];this.n__=null;this.igt_=new Gn}N_(){const t=super.N_();t["x1"]=this.ggt_.getX();t["y1"]=this.ggt_.getY();t["x2"]=this.cgt_.getX();t["y2"]=this.cgt_.getY();t["linewidth"]=this.kD_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["x1"]!==void 0&&this.ggt_.setX(t["x1"]);t["y1"]!==void 0&&this.ggt_.setY(t["y1"]);t["x2"]!==void 0&&this.cgt_.setX(t["x2"]);t["y2"]!==void 0&&this.cgt_.setY(t["y2"]);t["linewidth"]!==void 0&&(this.kD_=t["linewidth"]);return this}render(t){const i=this.sd_(),s=i==null||i.isIdentity()?t:t.uS_(i);this.isActive()?ED.rB_(this.uat_):ED.rB_(this.aat_);ED.M$_({from:this.ggt_,to:this.cgt_},!0).render(s)}vn_(t,i){super.vn_();if(i===oh.BC_)return this;this.n__=null;return this}td_(t,i){t=t||this.getBoundingBox(this.if_());return super.td_(t,i)}ud_(t){let i=t.Ji_();const s=this.sd_();s!=null&&(i=Gn.multiply(i,s,pD));return this.$C_()===!0&&su.gN_(this.getBoundingBox(i),s,t.rS_())}getBoundingBox(t){if(this.ggt_==null||this.cgt_==null||this.igt_==null)return null;if(this.n__!=null)return this.n__;t==null?this.igt_.fI_():this.igt_.dI_(t);this.isActive()?ED.rB_(this.uat_):ED.rB_(this.aat_);ED.M$_({from:this.ggt_,to:this.cgt_},!0);const i=ED.getBoundingBox(t);this.n__=i!=null?i.clone().lock():null;return this.n__}getBounds(){return this.getBoundingBox(this.if_())}zA_(t,i){let s=null,e=null;if(t instanceof lA)s=t;else if(typeof t=="object"){t["from"]!==void 0&&(s=t["from"]);t["to"]!==void 0&&(e=t["to"])}i instanceof lA&&(e=i);if(this.ggt_!=null&&s!=null&&NA.equals(this.ggt_.x,s.x)&&NA.equals(this.ggt_.y,s.y)&&this.cgt_!=null&&e!=null&&NA.equals(this.cgt_.x,e.x)&&NA.equals(this.ggt_.y,e.y))return this;this.td_();s!=null&&(this.ggt_=s);e!=null&&(this.cgt_=e);this.vn_().td_();return this}OA_(){return this.ggt_}WA_(){return this.cgt_}gR_(t){const i=this.cgt_.x-this.ggt_.x,s=this.cgt_.y-this.ggt_.y;this.zA_(new lA(t.getX()-i/2,t.getY()-s/2),new lA(t.getX()+i/2,t.getY()+s/2));return this}};i=t([_s("geotoolkit.controls.editing.LineBox")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJpbnZhbGlkYXRlIjoidGRfIiwiY2hlY2tDb2xsaXNpb24iOiJ1ZF8iLCJzZXRMaW5lIjoiekFfIiwiZ2V0RnJvbSI6Ik9BXyIsImdldFRvIjoiV0FfIiwic2V0QW5jaG9yIjoiZ1JfIn19fSAg");var yD=Ci({Igt_:"moved",fgt_:"positionChanged",Cgt_:"activeStateChanged"},2,"eyJNb3ZlZCI6IklndF8iLCJQb3NpdGlvbkNoYW5nZWQiOiJmZ3RfIiwiQWN0aXZlU3RhdGVDaGFuZ2VkIjoiQ2d0XyJ9"),DD=Ci(function(){let i=class t extends $n{constructor(){super();this.dgt_=null;this.Jv_=null;this.Bgt_=!1;this.wgt_=null;this.Qgt_=null}Egt_(){return this.Bgt_}reset(){this.Bgt_=!1}initialize(){this.Bgt_=this.pgt_();this.Bgt_&&this.update();return this.Bgt_}iz_(t){this.Jv_=t;return this}Ji_(){return this.Jv_.Ji_()}update(){this.Jv_.update()}mgt_(){return this.Jv_.mgt_()}ygt_(t){this.dgt_=t;return this}e7_(){return this.dgt_}setActive(t){if(this.Gi_!==t){this.Gi_=t;this.Dgt_(t);this.notify(yD.Cgt_,this)}return this}isActive(){return this.Gi_}Mgt_(t){if(this.wgt_===t)return this;this.wgt_!=null&&this.wgt_.setActive(!1).Qd_("active");this.wgt_=t;this.wgt_!=null&&this.wgt_.setActive(!0).Bd_("active");return this}vgt_(){return this.wgt_}setPosition(t,i){this.Qgt_=t==null?null:new lA(t,i);this.notify(yD.fgt_,this,this.getPosition());return this}getPosition(){return this.Qgt_}move(t,i){this.bgt_(t,i);this.setPosition(t,i);this.notify(yD.Igt_,this,this.getPosition());return this}N_(){return{}}dt_(t){return this}};i.prototype.bgt_=Zi;i.prototype.Dgt_=Zi;i.prototype.pgt_=Zi;i.prototype.Ngt_=Zi;i=t([_s("geotoolkit.controls.editing.ShapeAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0luaXRpYWxpemVkIjoiRWd0XyIsInNldFJlZ2lzdHJ5IjoiaXpfIiwiZ2V0VHJhbnNmb3JtYXRpb24iOiJKaV8iLCJnZXRNYW5pcHVsYXRvckxheWVyIjoibWd0XyIsInNldFNoYXBlIjoieWd0XyIsImdldFNoYXBlIjoiZTdfIiwic2V0QWN0aXZlSGFuZGxlIjoiTWd0XyIsImdldEFjdGl2ZUhhbmRsZSI6InZndF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwib25Nb3ZlIjoiYmd0XyIsIm9uQWN0aXZlU3RhdGVDaGFuZ2VkIjoiRGd0XyIsIm9uSW5pdGlhbGl6ZSI6InBndF8iLCJ1cGRhdGVIYW5kbGVzIjoiTmd0XyJ9fX0g");var MD=Ci(function(){let i=class t extends DD{constructor(){super();this.Sgt_=[];this.Ggt_=8}pgt_(){const t=this.e7_();this.Sgt_.push(new mD(t.OA_().x,t.OA_().y,t.WA_().x,t.WA_().y).bat_({x:1,y:1,width:0,height:0}));this.Mgt_(this.Sgt_[0]);this.Sgt_.push(new QD(t.OA_().x,t.OA_().y,new xA(this.Ggt_,this.Ggt_)).qC_("resize").bat_({x:-99}));this.Sgt_.push(new QD(t.WA_().x,t.WA_().y,new xA(this.Ggt_,this.Ggt_)).qC_("resize").bat_({y:-99}));for(let t=0;t<this.Sgt_.length;t++){this.mgt_().GY_(this.Sgt_[t]);this.Sgt_[t].Iat_(this)}return!0}ygt_(t){super.ygt_(t);if(this.Egt_()){this.Ngt_();this.Mgt_(this.Sgt_[0])}else{this.Sgt_=[];this.initialize()}return this}Dgt_(t){this.Ngt_();for(let i=0;i<this.Sgt_.length;i++)this.Sgt_[i].nf_(t)}bgt_(t,i){const s=this.vgt_();if(s==null)return this;const e=this.getPosition();if(e.x===t&&e.y===i)return this;const A=this.e7_();A.td_();const n=A.if_().rI_(),h=new lA(e.x,e.y);n.transformPoint(h,h);const r=new lA(t,i);n.transformPoint(r,r);const o=r.x-h.x,l=r.y-h.y,u=s.Nat_();if(u)if(u.x===-99||u.y===-99){const t=A.OA_(),i=A.WA_();u.x===-99?A.zA_({from:new lA(t.x+o,t.y+l),to:i}):u.y===-99&&A.zA_({from:t,to:new lA(i.x+o,i.y+l)})}else{const t=A.getBounds(),i=t.clone();i.setX(i.getX()+u.x*o);i.setY(i.getY()+u.y*l);const s=Gn.xI_(t,i,!1,!1,!1),e=A.ut_()!=null?A.ut_():new Gn;A.at_(Gn.multiply(e,s))}this.Ngt_();this.setPosition(t,i);A.td_();return this}Ngt_(){if(this.e7_()&&this.mgt_()){const t=this.e7_(),i=Gn.multiply(this.mgt_().if_().rI_(),this.e7_().if_()),s=i.transformPoint(t.OA_()),e=i.transformPoint(t.WA_());this.Sgt_[0].zA_({from:s,to:e});this.Sgt_[1].gR_(s);this.Sgt_[2].gR_(e)}return this}};i=t([_s("geotoolkit.controls.editing.LineShapeAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkluaXRpYWxpemUiOiJwZ3RfIiwic2V0U2hhcGUiOiJ5Z3RfIiwib25BY3RpdmVTdGF0ZUNoYW5nZWQiOiJEZ3RfIiwib25Nb3ZlIjoiYmd0XyIsInVwZGF0ZUhhbmRsZXMiOiJOZ3RfIn19fSAg");var vD=Ci(function(){let i=class t extends DD{constructor(){super();this.Sgt_=[];this.Ggt_=8}pgt_(){const t=this.e7_();let i;const s=t.getBounds();this.Sgt_.push(new mD(s.we_(),s.Ee_(),s.Qe_(),s.pe_()).bat_({x:1,y:1,width:0,height:0}));this.Mgt_(this.Sgt_[0]);const e=t.Bt_(),A=t.wt_();for(i=0;i<e.length;++i){const t=new QD({x:e[i],y:A[i],size:this.Ggt_}).qC_("resize").bat_({index:i});this.Sgt_.push(t);this.mgt_().GY_(t);t.Iat_(this)}return!0}ygt_(t){super.ygt_(t);if(this.Egt_()){this.Ngt_();this.Mgt_(this.Sgt_[0])}else{this.Sgt_=[];this.initialize()}return this}Dgt_(t){this.Ngt_();for(let i=0;i<this.Sgt_.length;i++)this.Sgt_[i].nf_(t)}bgt_(t,i){const s=this.vgt_();if(s==null)return this;const e=this.getPosition();if(e.x===t&&e.y===i)return this;const A=this.e7_();A.td_();const n=A.if_().rI_(),h=new lA(e.x,e.y);n.transformPoint(h,h);const r=new lA(t,i);n.transformPoint(r,r);const o=r.x-h.x,l=r.y-h.y,u=s.Nat_();if(u)if(u.index!=null){const t=A.Bt_(),i=A.wt_();t[u.index]+=o;i[u.index]+=l;A.Qt_(t,i)}else{const t=A.getBounds(),i=t.clone();i.setX(i.getX()+u.x*o);i.setY(i.getY()+u.y*l);const s=Gn.xI_(t,i,!1,!1,!1),e=A.ut_()!=null?A.ut_():new Gn;A.at_(Gn.multiply(e,s))}this.Ngt_();this.setPosition(t,i);A.td_();return this}Ngt_(){const t=this.e7_(),i=this.e7_().getBounds(),s=t.ut_()!=null?t.ut_():new Gn,e=t.if_(),A=this.mgt_().if_().rI_(),n=t.Bt_(),h=t.wt_();for(let t=0;t<this.Sgt_.length;t++){const r=this.Sgt_[t].Nat_();if(r!=null&&r.index!==void 0){const i=e.nI_(n[r.index],h[r.index]);this.Sgt_[t].gR_(A.transform(i))}else{this.Sgt_[t].zA_(new lA(i.we_(),i.Ee_()),new lA(i.Qe_(),i.pe_()));this.Sgt_[t].at_(s)}}return this}};i=t([_s("geotoolkit.controls.editing.PolyLineShapeAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkluaXRpYWxpemUiOiJwZ3RfIiwic2V0U2hhcGUiOiJ5Z3RfIiwib25BY3RpdmVTdGF0ZUNoYW5nZWQiOiJEZ3RfIiwib25Nb3ZlIjoiYmd0XyIsInVwZGF0ZUhhbmRsZXMiOiJOZ3RfIn19fSAg");const bD=function(t,i){if(!t)return null;switch(i){case dA.ne_:return new lA(t.ye_(),t.De_());case dA.ie_:return new QD(t.we_(),t.Ee_()).qC_("resize left-top").bat_({x:1,y:1,width:-1,height:-1});case dA.se_:return new QD(t.we_(),t.pe_()).qC_("resize left-bottom").bat_({x:1,y:0,width:-1,height:+1});case dA.ee_:return new QD(t.Qe_(),t.Ee_()).qC_("resize right-top").bat_({x:0,y:1,width:+1,height:-1});case dA.Ae_:return new QD(t.Qe_(),t.pe_()).qC_("resize right-bottom").bat_({x:0,y:0,width:+1,height:+1});case dA.he_:return new QD(t.we_(),t.De_()).qC_("resize left-center").bat_({x:1,y:0,width:-1,height:0});case dA.le_:return new QD(t.ye_(),t.Ee_()).qC_("resize top-center").bat_({x:0,y:1,width:0,height:-1});case dA.oe_:return new QD(t.Qe_(),t.De_()).qC_("resize right-center").bat_({x:0,y:0,width:1,height:0});case dA.re_:return new QD(t.ye_(),t.pe_()).qC_("resize bottom-center").bat_({x:0,y:0,width:0,height:1})}return null};var ND=Ci(function(){let i=class t extends DD{constructor(t){super();this.UU_=Pi(t,{handlers:[dA.ie_,dA.ee_,dA.Ae_,dA.se_]});this.Rgt_=null;this.Sgt_=[];this.kgt_=[]}setOptions(t){this.UU_=Pi(t,this.UU_);this.Rgt_!=null&&this.Rgt_.dt_({activefillstyle:this.UU_["box"]!=null?il.BD_(this.UU_["box"]["activefillstyle"]):this.Rgt_.Cat_(),inactivefillstyle:this.UU_["box"]!=null?il.BD_(this.UU_["box"]["inactivefillstyle"]):this.Rgt_.Dat_(),activelinestyle:this.UU_["handlestyle"]!=null?hl.Wi_(this.UU_["handlestyle"]["activelinestyle"]):this.Rgt_.Eat_(),inactivelinestyle:this.UU_["handlestyle"]!=null?hl.Wi_(this.UU_["handlestyle"]["inactivelinestyle"]):this.Rgt_.yat_()});if(this.UU_["handlestyle"]!=null)for(let t=1;t<this.Sgt_.length;t++){const i=undefined;this.Sgt_[t].dt_({activefillstyle:il.BD_(this.UU_["handlestyle"]["activefillstyle"]),inactivefillstyle:il.BD_(this.UU_["handlestyle"]["inactivefillstyle"])})}return this}JV_(){return this.UU_}ygt_(t){super.ygt_(t);if(this.Egt_()){this.Ngt_();this.Mgt_(this.Sgt_[0])}else this.initialize();return this}Fgt_(){return this.e7_()?this.e7_().getBounds():null}Dgt_(t){this.Ngt_();for(let i=0;i<this.Sgt_.length;i++)this.Sgt_[i].nf_(t)}xgt_(){return this.Rgt_}pgt_(){this.Sgt_=[];this.kgt_=[];let t,i,s;const e=this.Fgt_();this.Rgt_=new BD(e);this.Rgt_.bat_({x:1,y:1,width:0,height:0});this.Sgt_.push(this.Rgt_);this.Mgt_(this.Sgt_[0]);for(t=0;t<this.UU_["handlers"].length;++t){i=bD(e,this.UU_["handlers"][t]);if(i){s=this.Sgt_.push(i)-1;this.kgt_[s]=this.UU_["handlers"][t]}}for(t=0;t<this.Sgt_.length;t++){this.mgt_().GY_(this.Sgt_[t]);this.Sgt_[t].Iat_(this)}this.setOptions(this.UU_);return!0}move(t,i){this.bgt_(t,i);this.notify(yD.Igt_,this,this.getPosition());return this}bgt_(t,i){const s=this.vgt_();if(s==null)return this;const e=this.e7_();if(!(e instanceof iu))return this;const A=s.Nat_();if(A==null)return this;const n=this.Lgt_(t,i);if(!n){this.setPosition(t,i);return this}const h=e.ut_()!=null?e.ut_():new Gn;if(n.Ugt_.Ts_()<=0){n.Ugt_.Be_(h.sI_()>NA.Je_?1:n.Ygt_.Ts_());n.Ugt_.setY(A.y?n.Ygt_.pe_():n.Ygt_.getY());i=n.Tgt_.y}if(n.Ugt_.Ie_()<=0){n.Ugt_.de_(h.BI_()>NA.Je_?1:n.Ygt_.Ie_());n.Ugt_.setX(A.x?n.Ygt_.Qe_():n.Ygt_.getX());t=n.Tgt_.x}const r=Gn.xI_(n.Ygt_,n.Ugt_,!1,!1,!1);e.at_(Gn.multiply(h,r));this.Ngt_();this.setPosition(t,i);e.td_();return this}Lgt_(t,i){let s=this.getPosition();s||(s=new lA(t,i));if(s.x===t&&s.y===i)return null;const e=this.e7_();e.td_();const A=e.getBounds(),n=A.clone();let h=null;h=e.getParent()?e.ut_()?Gn.multiply(e.getParent().if_(),e.ut_()).rI_():e.getParent().if_().rI_():e.if_().rI_();const r=new lA(s.x,s.y);h.transformPoint(r,r);const o=new lA(t,i);h.transformPoint(o,o);const l=o.x-r.x,u=o.y-r.y,a=undefined,g=this.vgt_().Nat_(),c=g.width,I=g.height;n.setX(A.getX()+g.x*l);n.setY(A.getY()+g.y*u);n.de_(A.Ie_()+c*l);n.Be_(A.Ts_()+I*u);return{Ygt_:A,Ugt_:n,Tgt_:h.uI_(A.Me_())}}setStyle(t){const i=function(t){return t instanceof hl?{linestyle:t.N_()}:{linestyle:t}},s=function(t){return t instanceof wr?{fillstyle:t.N_()}:{fillstyle:t}};let e={};if(t["main"]!==void 0){t["main"]["linestyle"]!==void 0&&(e=qi(e,i(t["main"]["linestyle"])));t["main"]["fillstyle"]!==void 0&&(e=qi(e,s(t["main"]["fillstyle"])));this.Sgt_[0].dt_(e)}let A={};if(t["corners"]!==void 0){t["corners"]["linestyle"]!==void 0&&(A=qi(A,i(t["corners"]["linestyle"])));t["corners"]["fillstyle"]!==void 0&&(A=qi(A,s(t["corners"]["fillstyle"])));for(let t=1;t<this.Sgt_.length;++t)this.Sgt_[t].dt_(A)}return this}Ngt_(){const t=this.Fgt_();let i=null;if(this.e7_().getParent()){i=this.e7_().ut_()?Gn.multiply(this.e7_().getParent().if_(),this.e7_().ut_()):this.e7_().getParent().if_();i=Gn.multiply(this.mgt_().if_().rI_(),i)}else i=this.mgt_().if_().rI_();const s=i.rn_(t);this.Sgt_[0].ce_(s);for(let t=1;t<this.Sgt_.length;++t){const i=this.kgt_[t],e=s.Ye_(i);e&&this.Sgt_[t].gR_(e)}return this}};i=t([_s(null)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwic2V0U2hhcGUiOiJ5Z3RfIiwiZ2V0U2hhcGVCb3VuZHMiOiJGZ3RfIiwib25BY3RpdmVTdGF0ZUNoYW5nZWQiOiJEZ3RfIiwiZ2V0SGFuZGxlIjoieGd0XyIsIm9uSW5pdGlhbGl6ZSI6InBndF8iLCJvbk1vdmUiOiJiZ3RfIiwidXBkYXRlSGFuZGxlcyI6Ik5ndF8ifX19");var SD=Ci(function(){let i=class t extends ND{bgt_(t,i){const s=this.vgt_();if(s==null)return this;const e=this.e7_(),A=s.Nat_();if(A==null||e==null)return this;const n=this.Lgt_(t,i);if(n==null||n.Ugt_==null)return this;if(n.Ugt_.Ts_()<=0){n.Ugt_.Be_(0);n.Ugt_.setY(A.y?n.Ygt_.pe_():n.Ygt_.getY());i=n.Tgt_.y}if(n.Ugt_.Ie_()<=0){n.Ugt_.de_(0);n.Ugt_.setX(A.x?n.Ygt_.Qe_():n.Ygt_.getX());t=n.Tgt_.x}e.td_();e.ht_(n.Ugt_);this.Ngt_();this.setPosition(t,i);e.td_();return this}};i=t([_s("geotoolkit.controls.editing.scaling.GroupAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdmUiOiJiZ3RfIn19fSAg");var GD=Ci({Kgt_:"deactivated",Hgt_:"activated"},2,"eyJEZWFjdGl2YXRlZCI6IktndF8iLCJBY3RpdmF0ZWQiOiJIZ3RfIn0g"),RD=Ci(function(){let i=class t extends $n{constructor(t,i){super();this.E8_=t;this._root=t!=null?t.getRoot():null;this.qgt_=null;this.Jgt_=i;this.Jv_=new Map}update(){this.E8_!=null&&this.E8_.update()}mgt_(){return this.Jgt_}Pgt_(t){this.Jgt_=t;return this}register(t,i){i.iz_(this);this.Jv_.set(t,i);return this}fat_(t){let i;if(typeof t=="string")i=t;else{if(t.D_==null)return null;i=t.D_()}return this.Jv_.has(i)?this.Jv_.get(i):null}Vgt_(){return Array.from(this.Jv_.keys())}dI_(t){this.vQ_=t;return this}Ji_(){return this.vQ_}Ogt_(t){if(this.qgt_===t)return this;if(this.qgt_!=null){this.qgt_.setActive(!1);this.notify(GD.Kgt_,this,this.qgt_)}this.qgt_=t;if(this.qgt_!=null){this.qgt_.setActive(!0);this.notify(GD.Hgt_,this,this.qgt_)}this.E8_&&this.E8_.update();return this}Wgt_(){return this.qgt_}};i=t([_s("geotoolkit.controls.editing.ShapeAdapterRegistry")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRNYW5pcHVsYXRvckxheWVyIjoibWd0XyIsImdldEFkYXB0ZXIiOiJmYXRfIiwiZ2V0UmVnaXN0ZXJlZENsYXNzZXMiOiJWZ3RfIiwic2V0VHJhbnNmb3JtYXRpb24iOiJkSV8iLCJnZXRUcmFuc2Zvcm1hdGlvbiI6IkppXyIsInNldEFjdGl2ZUFkYXB0ZXIiOiJPZ3RfIiwiZ2V0QWN0aXZlQWRhcHRlciI6IldndF8ifX19");var kD=Ci(function(){let i=class t extends DD{constructor(){super();this.zgt_=null;this.Xgt_=!1;this.jgt_=!0;this.Zgt_={}}pgt_(){this.Bgt_=this._gt_();return this.Bgt_}_gt_(){const t=this.e7_();if(t===null||!(t instanceof ma))return!1;this.zgt_=new QD;this.zgt_.Iat_(this);const i=t.lR_(),s=t.if_(),e=this.mgt_().if_().rI_(),A=s.transformPoint(i);e.transformPoint(A,A);const n=t.getSize();if(!t.WG_()){s.oI_(n,n);e.oI_(n,n)}this.zgt_.dt_({size:n,x:A.getX(),y:A.getY(),painter:t.ak_(),isindevicespace:t.WG_()});this.zgt_.dt_(this.Zgt_);this.mgt_().GY_(this.zgt_);return!0}Ngt_(){if(!this.Bgt_){this.pgt_();return this}const t=this.e7_();if(t===null)return this;const i=t.lR_(),s=t.if_(),e=this.mgt_().if_().rI_(),A=s.transformPoint(i);e.transformPoint(A,A);this.zgt_.gR_(A);this.zgt_.ut_().fI_();this.zgt_.Yat_();return this}ygt_(t){super.ygt_(t);this.Ngt_();return this}$gt_(t){this.zgt_!==null&&this.zgt_.nf_(t);return this}Dgt_(t){this.Bgt_||this.pgt_();this.$gt_(t);this.Mgt_(t?this.zgt_:null);this.zgt_.setActive(t)}bgt_(t,i,s){const e=this.vgt_(),A=this.e7_();if(e===null||A===null)return this;const n=this.mgt_().if_().rI_(),h=this.getPosition(),r=A.lR_().clone(),o=this.tct_(h,t,i,n);let l;if(this.Xgt_){e.xat_()||e.Uat_();const t=undefined;e.qat_().translate(o.dx,o.dy);l=this.ict_()}else{e.translate(o.dx,o.dy);l=this.ict_();this.jgt_&&this.e7_().gR_(l.x,l.y)}this.setPosition(t,i);this.notify(wD.rgt_,this,this.sct_(r,l,s));return this}release(t,i,s){const e=this.ict_();if(this.jgt_){this.e7_().gR_(e.x,e.y);this.vgt_().gR_(e).at_(new Gn)}this.vgt_().Yat_();this.notify(wD.lgt_,this,this.ect_(e,s));return this}ict_(){let t;if(this.Xgt_&&this.zgt_.xat_()){const i=this.zgt_.qat_();t=i.if_().transformPoint(i.lR_())}else t=this.zgt_.if_().transformPoint(this.zgt_.lR_());this.e7_().if_().aI_(t,t);return t}Act_(t,i,s){const e=this.ict_();this.notify(wD.ngt_,this,this.nct_(e,s))}ect_(t,i){return{x:t.x,y:t.y,nativeeventargs:i}}nct_(t,i){return{x:t.x,y:t.y,nativeeventargs:i}}sct_(t,i,s){return{oldx:t.getX(),oldy:t.getY(),x:i.getX(),y:i.getY(),nativeeventargs:s}}tct_(t,i,s,e){const A=e.transformPoint(t),n=new lA(i,s);e.transformPoint(n,n);return{dx:n.x-A.x,dy:n.y-A.y}}hct_(t){this.jgt_=t;return this}rct_(){return this.jgt_}oct_(t){this.Xgt_=t;return this}lct_(){return this.Xgt_}vgt_(){return this.wgt_}uct_(t){t["ghostlinestyle"]!==void 0&&(this.Zgt_.act_=hl.Wi_(t["ghostlinestyle"]));t["ghostfillstyle"]!==void 0&&(this.Zgt_.gct_=il.BD_(t["ghostfillstyle"]));t["activefillstyle"]!==void 0&&(this.Zgt_.cct_=il.BD_(t["activefillstyle"]));t["inactivefillstyle"]!==void 0&&(this.Zgt_.Ict_=il.BD_(t["inactivefillstyle"]));t["activelinestyle"]!==void 0&&(this.Zgt_.fct_=hl.Wi_(t["activelinestyle"]));t["inactivelinestyle"]!==void 0&&(this.Zgt_.Cct_=hl.Wi_(t["inactivelinestyle"]));this.Ngt_();return this}update(){this.Jv_.update();this.Ngt_();return this}};i=t([_s("geotoolkit.controls.editing.SymbolAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkluaXRpYWxpemUiOiJwZ3RfIiwidXBkYXRlSGFuZGxlcyI6Ik5ndF8iLCJzZXRTaGFwZSI6InlndF8iLCJzZXRIYW5kbGVzVmlzaWJsZSI6IiRndF8iLCJvbkFjdGl2ZVN0YXRlQ2hhbmdlZCI6IkRndF8iLCJvbk1vdmUiOiJiZ3RfIiwiZW5nYWdlIjoiQWN0XyIsInNldEFsbG93U2hhcGVFZGl0IjoiaGN0XyIsImdldEFsbG93U2hhcGVFZGl0IjoicmN0XyIsInNldFNob3dHaG9zdCI6Im9jdF8iLCJnZXRTaG93R2hvc3QiOiJsY3RfIiwiZ2V0QWN0aXZlSGFuZGxlIjoidmd0XyIsInNldEhhbmRsZVN0eWxlcyI6InVjdF8ifX19");var FD=Ci(function(){let i=class t extends ND{pgt_(){const t=this.Fgt_();this.Sgt_.push(new BD(t).bat_({x:1,y:1,width:0,height:0}));this.Mgt_(this.Sgt_[0]);for(let t=0;t<this.Sgt_.length;t++){this.mgt_().GY_(this.Sgt_[t]);this.Sgt_[t].Iat_(this)}return!0}ygt_(t){super.ygt_(t);if(this.Egt_()){this.Ngt_();this.Mgt_(this.Sgt_[0])}else{this.Sgt_=[];this.initialize()}return this}Dgt_(t){this.Ngt_();for(let i=0;i<this.Sgt_.length;i++)this.Sgt_[i].nf_(t)}Fgt_(){const t=this.e7_();return t!=null?t.BR_(t.if_()):null}Ngt_(){if(this.e7_()&&this.mgt_()){const t=Gn.multiply(this.mgt_().if_().rI_(),this.e7_().if_()),i=this.Fgt_();this.Sgt_[0].ce_(t.rn_(i))}return this}};i=t([_s("geotoolkit.controls.editing.TextShapeAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkluaXRpYWxpemUiOiJwZ3RfIiwic2V0U2hhcGUiOiJ5Z3RfIiwib25BY3RpdmVTdGF0ZUNoYW5nZWQiOiJEZ3RfIiwiZ2V0U2hhcGVCb3VuZHMiOiJGZ3RfIiwidXBkYXRlSGFuZGxlcyI6Ik5ndF8ifX19");var XD=Ci({L$_:"Default",aIt_:"Stacked",gIt_:"Float"},2,"eyJEZWZhdWx0IjoiTCRfIiwiU3RhY2tlZCI6ImFJdF8iLCJGbG9hdCI6ImdJdF8ifSAg"),jD=Ci({cIt_:"Associative",IIt_:"Single"},2,"eyJBc3NvY2lhdGl2ZSI6ImNJdF8iLCJTaW5nbGUiOiJJSXRfIn0g"),ZD=Ci({fIt_:"TopOutside",CIt_:"TopInside",dIt_:"BottomInside",ne_:"Center"},2,"eyJUb3BPdXRzaWRlIjoiZkl0XyIsIlRvcEluc2lkZSI6IkNJdF8iLCJCb3R0b21JbnNpZGUiOiJkSXRfIiwiQ2VudGVyIjoibmVfIn0g"),_D=Ci({JQ_:"Bottom",z_:"Left",Top:"Top",X_:"Right"},2,"eyJCb3R0b20iOiJKUV8iLCJMZWZ0Ijoiel8iLCJSaWdodCI6IlhfIn0g"),$D={BIt_:"fillstyles",wIt_:"linestyles",QIt_:"selected-fillstyles",EIt_:"selected-linestyles"};const tM=function(t){return t[0]},iM=function(t){return t[0]+t[2]},sM=function(t){return t[1]},eM=function(t){return t[1]+t[3]},AM=function(t){return t[2]},nM=function(t){return t[3]},hM=function(t,i){t[0]=i},rM=function(t,i){t[2]=i},oM=function(t,i){t[1]=i},lM=function(t,i){t[3]=i};let uM=null;var aM=function(){var i;let s=i=class t extends be{process(t,i,s,e){s=Array.isArray(s)?s:[];for(let A=0;A<i.length;A++){s[A]=Array.isArray(s[A])?s[A]:[];for(let n=0;n<i[A].length;n++)s[A][n]=e((t[A]||[])[n]||0,i[A][n]||0)}return s}clone(t){return t.map((function(t){return t.slice()}))}static Ai_(){uM==null&&(uM=new i);return uM}};s=i=t([_s(null)],s);return s}();const gM=function(t,i){if(t==null)return null;let s,e;s=RA.cs_(t.getColor());const A=new ph(s);A.tB_(-.2);A.iB_(.2);s=A.zd_();e=RA.cs_(t.getColor());const n=new ph(e);n.tB_(.2);n.iB_(-.2);e=n.zd_();const h=e.Es_(),r=s.Es_(),o=e.Es_(),l=new Fo;l.HQ_();l.LQ_(0,h);l.LQ_(.5,r);l.LQ_(1,o);l.cy_(new lA(0,0));i?l.setEndPoint(new lA(0,1)):l.setEndPoint(new lA(1,0));return l},cM=function(t){return t===null},IM=function(t){let i=null;if(t instanceof hl){i=new hl;i.dt_(t.N_());i.de_(t.Ie_()+3)}else if(t instanceof wr){i=new wr;i.dt_(t.N_())}return i},fM={color:"lightgrey"},CM={color:"darkgrey",width:1},dM={W8_:"regular",Vr_:"total"};var BM=Ci(function(){let i=class t extends sI{constructor(t,i){super(t=Pi(t,{clipping:!0},!0));this.pIt_=[];this.Rf_=null;this.mIt_=!1;this.yIt_=(new dp).rd_(!1);this._q_=(new YC).$I_(NaN).tf_(NaN).sR_(!0).tR_(!0).AR_(!1).hR_(!0).rd_(!1);this.DIt_=new ma;this.MIt_=null;this.vIt_=null;this.UU_={orientation:_D.JQ_,barmode:XD.L$_,barvalues:{totalonly:!1,visible:!1,textstyle:new qa,location:ZD.fIt_,decimalprecision:2,rotationangle:0,margins:{anchorx:0,anchory:0}},barwidth:5,barpad:5,barmaxwidth:null,autogradient:!1,ismissingvalue:cM,createselectedstyle:IM,series:[],symbol:{visible:!1,sizeisindevicespace:!0,width:5,height:5,painter:cE,fillstyle:"black"}};this.bIt_=0;this.NIt_=!1;this.SIt_=[];this.GIt_=[];this.U$_=null;this.RIt_=null;this.kIt_=null;this.FIt_=1;this.kIt_=null;this.rd_(!1);this.setOptions(t);i&&this.setData(i);this.rd_(!0)}setData(t){t["mode"]&&(this.xIt_=t["mode"]);this.xIt_||(this.xIt_=jD.cIt_);let i=t["datasets"];if(i!=null){i instanceof Array||(i=[i]);this.bIt_=i.length;this.LIt_(t?t["series"]:this.UIt_);const s=[];for(let t=0;t<this.bIt_;++t){const i=this.UU_["barstyles"]!=null?this.UU_["barstyles"][t]:null,e=i!=null?i[$D.wIt_]:CM,A=i!=null?i[$D.BIt_]:fM;s.push({[$D.wIt_]:hl.Wi_(e),[$D.BIt_]:il.BD_(A)})}this.YIt_(s)}t["positions"]instanceof zD?this.U$_=t["positions"].toArray():Array.isArray(t["positions"])&&(this.U$_=t["positions"]);this.U$_!=null&&this.U$_.some((function(t){return typeof t!="number"}))&&(this.U$_=null);this.TIt_();this.KIt_();this.HIt_(i,t["append"]);this.mIt_=!0;this.vn_();this.td_();return this}qIt_(){return this.mIt_}JIt_(t){this.td_();this.LIt_(t);this.td_();return this}PIt_(){return this.UIt_}getData(){return{mode:this.xIt_,datasets:this.VIt_,series:this.UIt_}}setOptions(t){t=qi(t,{});Pi(t,this.UU_);this.YIt_(this.UU_["barstyles"]);if(this.UU_["valuelimits"]){this.iIt_=this.UU_["valuelimits"]["minvalue"];this.sIt_=this.UU_["valuelimits"]["maxvalue"]}typeof this.UU_["neatlimits"]=="boolean"&&(this.NIt_=this.UU_["neatlimits"]);this.UU_["barmode"]&&(this.OIt_=this.UU_["barmode"]);if(this.UU_["barvalues"]){this.WIt_=this.UU_["barvalues"]["totalonly"];this.zIt_=this.UU_["barvalues"]["visible"];Array.isArray(this.zIt_)&&this.zIt_.length===0&&(this.zIt_=!1);this.XIt_=this.UU_["barvalues"]["location"];this.jIt_=this.UU_["barvalues"]["decimalprecision"];this.ZIt_=this.UU_["barvalues"]["rotationangle"];this._q_.g_(this.UU_["barvalues"]["textstyle"]);this.UU_["barvalues"]["margins"]&&(this._It_=this.UU_["barvalues"]["margins"])}this.UU_["symbol"]!=null&&this.DIt_.dt_(this.UU_["symbol"]);this.KIt_();this.HIt_();this.td_();return this}JV_(){return this.UU_}$It_(){this.GIt_=[];for(let t=0;t<this.bIt_;++t)this.UIt_!=null&&this.UIt_[t]!=null&&this.UIt_[t]["visible"]!==!0||this.GIt_.push(t);return this}tft_(){this.UIt_==null&&(this.UIt_=[]);this.bIt_>this.UIt_.length&&this.UIt_.splice(this.bIt_);for(let t=0;t<this.bIt_;++t)this.UIt_[t]==null?this.UIt_[t]={visible:!0}:this.UIt_[t]["visible"]===void 0&&(this.UIt_[t]["visible"]=!0);this.$It_()}LIt_(t){if(t){const i=[];let s,e;if(Array.isArray(t)){const A=Math.max(this.bIt_,t.length);for(e=0;e<A;++e){s=t[e]!=null&&t[e]["visible"]===!0;i.push({visible:s})}}else{s=!0;for(e=0;e<this.bIt_;++e)i.push({visible:s})}this.UIt_=i}this.tft_();this.HIt_();return this}KIt_(){if(this.U$_!=null){const t=this.ift_(this.bIt_);if(this.UU_["positionlimits"]!=null){this.RIt_=this.UU_["positionlimits"]["maxvalue"];this.kIt_=this.UU_["positionlimits"]["minvalue"];this.RIt_!=null?this.RIt_+=t:this.RIt_=Math.max.apply(null,this.U$_)+this.FIt_;this.kIt_!=null?this.kIt_-=t:this.kIt_=Math.min.apply(null,this.U$_)-this.FIt_}else{this.RIt_=Math.max.apply(null,this.U$_)+this.FIt_;this.kIt_=Math.min.apply(null,this.U$_)-this.FIt_}}return this}TIt_(){this.FIt_=1;if(Array.isArray(this.U$_)){let t=Number.MAX_VALUE;for(let i=1;i<this.U$_.length;++i){const s=Math.abs(this.U$_[i]-this.U$_[i-1]);if(s<t){t=s;this.FIt_=t}}}return this}sft_(t,i){this.Rf_||(this.Rf_={});const s=t["label"],e=t[i];if(!this.Rf_[s]){if(e===void 0)throw new Error("No styles provided for the property: "+s);this.Rf_[s]={}}const A=this.R__(),n=this.Rf_[s];n[i]=[];const h=n[i];let r,o;if(e instanceof Array){if(e.length<2)throw new Error("Array of "+i+" must contain _TWO_ elements");r=e[0]?.clone();o=e[1]?.clone()}else{r=e?.clone();o=e?.clone()}if(h instanceof Array){h.push(r);h.push(o)}const l=i===$D.wIt_?$D.EIt_:$D.QIt_;n[l]=[];const u=n[l],a=t[l];if(a)if(a instanceof Array){if(a.length<2)throw new Error("Array of "+i+" must contain _TWO_ elements");u.push(a[0].clone());u.push(a[1].clone())}else{u.push(a.clone());u.push(a.clone())}else if(h instanceof Array){u.push(this.UU_["createselectedstyle"](h[0]));u.push(this.UU_["createselectedstyle"](h[1]))}if(i==="fillstyles"&&this.UU_["autogradient"]&&h instanceof Array){h[0]=gM(h[0],A);h[1]=gM(h[1],A);u[0]=gM(u[0],A);u[1]=gM(u[1],A)}}YIt_(t){if(t)for(let i=0;i<t.length;++i){const s=t[i];s["label"]||(s["label"]=i.toString());let e;if(Array.isArray(s["linestyles"]))for(e=0;e<s["linestyles"].length;e++)s["linestyles"][e]=hl.Wi_(s["linestyles"][e]);else s["linestyles"]=hl.Wi_(s["linestyles"]);if(Array.isArray(s["fillstyles"]))for(e=0;e<s["fillstyles"].length;e++)s["fillstyles"][e]=il.BD_(s["fillstyles"][e]);else s["fillstyles"]=il.BD_(s["fillstyles"]);this.sft_(s,$D.wIt_);this.sft_(s,$D.BIt_)}}ift_(t){return this.OIt_===XD.aIt_?this.UU_["barwidth"]:this.UU_["barwidth"]*t}k__(){return this.UU_["orientation"]===_D.Top||this.UU_["orientation"]===_D.JQ_}R__(){return this.UU_["orientation"]===_D.z_||this.UU_["orientation"]===_D.X_}static eft_(t,i){return NA.iA_(t,i,!1,!1).Xs_()}static Aft_(t,i){return NA.iA_(t,i,!1,!1).zs_()}nft_(t){t||(t=this.hft_);if(!t)return[];if(!this.UU_["valuelimits"]&&!this.NIt_)return[t.min,t.max];let i=!1,s=null;if(this.iIt_!=null){s=typeof this.iIt_=="function"?this.iIt_(t.min,t.max):this.iIt_;i=!0}s===null&&(s=t.min);let e=null;if(this.sIt_!=null){e=typeof this.sIt_=="function"?this.sIt_(t.min,t.max):this.sIt_;i=!0}e===null&&(e=t.max);if(e<s){const t=e;e=s;s=t}if(this.NIt_&&!i){const t=NA.iA_(s,e,!1,!1);s=t.Xs_();e=t.zs_()}return[s,e]}HIt_(t,i){if(t)if(this.VIt_&&i)for(let i=0;i<t.length;++i){const s=this.VIt_[i]["values"];this.VIt_[i]["values"]=s.concat(t[i]["values"])}else this.VIt_=t;else{if(!this.VIt_){typeof this.iIt_=="number"&&typeof this.sIt_=="number"&&(this.R__()?this.Lq_(new mA(this.iIt_,0,this.sIt_,this.U$_!=null?this.RIt_:1)):this.Lq_(new mA(0,this.iIt_,this.U$_!=null?this.RIt_:1,this.sIt_)));return}t=this.VIt_;i=!1}const s=this.rft_(t),e=this.nft_(s),A=s.data.length===0?0:s.data[0].oft_.length,n=this.ift_(A);let h=s.data.length,r=0;if(this.hft_&&i){const t=this.nft_(this.hft_);e[0]=Math.min(e[0],t[0]);e[1]=Math.max(e[1],t[1]);const i=this.hft_.data.length;r=i+this.UU_["barpad"]/(n+this.UU_["barpad"]);h+=i}const o=h+this.UU_["barpad"]/(n+this.UU_["barpad"]);this.lft_=this.UU_["barpad"]/(n+this.UU_["barpad"]);this.uft_=this.UU_["barwidth"]/(n+this.UU_["barpad"]);let l=-n/2/(this.UU_["barpad"]+n);if(this.U$_!=null&&this.UU_["barpad"]===0){this.uft_=Math.min(this.UU_["barwidth"],this.FIt_/this.bIt_);this.lft_=0;l=-n/2}this.rd_(!1);const u=l-this.lft_;this.R__()?this.U$_!=null?this.Lq_(new mA(e[0],this.kIt_,e[1],this.RIt_)):this.Lq_(new mA(e[0],u,e[1],o+u)):this.U$_!=null?this.Lq_(new mA(this.kIt_,e[0],this.RIt_,e[1])):this.Lq_(new mA(u,e[0],o+u,e[1]));const a=r===0?l:u+r;this.aft_(s,A,a,i);this.rd_(!0)}rft_(t){let i,s,e,A,n=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const r={};for(i=0;i<t.length;i++)if(!this.UIt_||!this.UIt_[i]||this.UIt_[i]["visible"]!==!1){e=t[i];for(s=0;s<e["values"].length;s++){r.hasOwnProperty(s)||(r[s]={oft_:[]});const t=e["values"][s];if(this.OIt_===XD.gIt_){const i=t;n=Math.min(i[0],i[1],n);h=Math.max(i[0],i[1],h)}else{const i=t;n=Math.min(i,n);h=Math.max(i,h);if(i==null||isNaN(i)){r[s].oft_.push(i);continue}}r[s].oft_.push(t)}}const o=[];for(A in r)if(r.hasOwnProperty(A)){const t=r[A];o.push({gft_:A,oft_:t.oft_});if(this.OIt_===XD.aIt_){let s=0,e=0;for(i=0;i<t.oft_.length;i++)t.oft_[i]>=0?s+=t.oft_[i]:e+=t.oft_[i];h=Math.max(s,h);n=Math.min(e,n)}}n=Math.floor(n);h=Math.ceil(h);this.MIt_=n;this.vIt_=h;return{min:n,max:h,data:o}}cft_(){const t=this.rt_();this.vIt_==null&&this.VIt_!=null&&this.rft_(this.VIt_);if(this.vIt_!=null){const i=this.MIt_<0?this.MIt_:0;return this.R__()?new mA({x:i,y:t.getY(),width:this.vIt_-i,height:t.Ts_()}):new mA({x:t.getX(),y:i,width:t.Ie_(),height:this.vIt_-i})}return new mA({x:t.getX(),y:t.getY(),width:t.Ie_(),height:t.Ts_()})}aft_(t,i,s,e){const A=this.R__(),n=this.OIt_===XD.aIt_,h=this.OIt_===XD.gIt_,r=t.data,o=this.ift_(i);for(let t=0,e=s;t<r.length;t++){const s=r[t];s.LK_=[];let l=0,u=0;for(let r=0;r<i;r++){const a=s.oft_[r],g=undefined;if(this.UU_["ismissingvalue"](a)){n||(e+=this.uft_);s.LK_.push(null);continue}let c=0,I=a,f,C,d,B,w;if(n){const t=r-1;if(t>=0){const i=s.oft_[t];i<0?u+=i:l+=i}c=a<0?u:l}else if(h){c=a[0];I=a[1]-a[0]}if(A){f=c;if(this.U$_==null)C=e;else{w=this.OIt_===XD.aIt_?-1/2:-i/2+r;C=this.U$_[t]+w*this.uft_}d=I;B=this.uft_}else{if(this.U$_==null)f=e;else{w=this.OIt_===XD.aIt_?-1/2:-i/2+r;f=this.U$_[t]+w*this.uft_}C=c;d=this.uft_;B=I}s.LK_.push([f,C,d,B]);n||(e+=this.U$_==null?this.uft_:o)}n&&(e+=this.U$_==null?this.uft_:o);e+=this.lft_}if(e&&this.hft_){this.hft_.data=this.hft_.data.concat(t.data);this.hft_.min=Math.min(this.hft_.min,t.min);this.hft_.max=Math.max(this.hft_.max,t.max)}else this.hft_=t}Ift_(){let t;if(this.R__())switch(this.XIt_){case ZD.fIt_:t=this.ZIt_?dA.le_:dA.he_;break;case ZD.CIt_:t=this.ZIt_?dA.re_:dA.oe_;break;case ZD.dIt_:t=this.ZIt_?dA.le_:dA.he_;break;default:t=dA.ne_;break}else switch(this.XIt_){case ZD.fIt_:t=this.ZIt_?dA.oe_:dA.le_;break;case ZD.CIt_:t=this.ZIt_?dA.he_:dA.re_;break;case ZD.dIt_:t=this.ZIt_?dA.oe_:dA.le_;break;default:t=dA.ne_;break}this._q_.SE_(t)}fft_(t,i,s){const e=this.$X_(t instanceof lA?t:new lA(t,i));if(s){this.pIt_=e.slice(0);this.td_()}return e}$X_(t,i){const s=new bC,e=[],A=this,n=function(t){if(!(t instanceof dp))return;const i=t.zC_();i&&i instanceof oD&&i.OT_()===A&&e.push(i)};if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],e=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];s.iX_(n,this.getRoot(),i,e,!0)}else s.iX_(n,this.getRoot(),t.x,t.y,i||1);return e}Cft_(t,i){const s=this.getData(),e=s["datasets"],A=s["series"];return e[t]==null||A&&A[t]&&A[t]["visible"]!==!0?null:e[t].values[i]}dft_(t,i){t=t.length>0?t.slice(0):[];i?this.pIt_.concat(t):this.pIt_=t;this.td_();return this}Yx_(t){typeof t=="function"&&this.Bft_!==t&&(this.Bft_=t);return this}wft_(t,i,s,e,A){this.yIt_.ce_(i[0],i[1],i[0]+i[2],i[1]+i[3]);if(t.filter(this.yIt_)){if(s){this.yIt_.PC_(new oD(this.GIt_[e],A,this));t.YR_(this.yIt_)}let i=$D.wIt_,n=$D.BIt_;for(let t=0;t<this.pIt_.length;++t){const s=this.pIt_[t];if(s.nat_()===this.GIt_[e]&&s.rat_()===A){i=$D.EIt_;n=$D.QIt_;break}}const h=[];for(const t in this.Rf_)h.push(this.Rf_[t]);const r=undefined,o=h[this.GIt_[e]],l=0;let u=o[i],a=o[n];if(this.xIt_===jD.IIt_){const t=Object.keys(this.Rf_).length,s=A<t?A:t-1;u=this.Rf_[s][i];a=this.Rf_[s][n]}const g=this.OIt_===XD.gIt_||e!==0&&this.OIt_===XD.aIt_;this.Qft_(t,this.yIt_,u[l],a[l],g,e);return!0}return!1}Qft_(t,i,s,e,A,n){i.rB_(s);i.iQ_(e);i.render(t)}Eft_(t,i,s,e){const A=i[0],n=i[1],h=i[2],r=i[3],o=i[4];let l,u,a,g,c,I=1,f=null;if(this.R__()){u=n+r/2;switch(this.XIt_){case ZD.fIt_:l=A+h;I=h<0?-1:1;break;case ZD.CIt_:l=A+h;I=h<0?1:-1;break;case ZD.dIt_:l=A;I=h<0?-1:1;break;default:l=A+h/2;break}g=this._It_["anchorx"];c=this._It_["anchory"]*I;f=this.pft_()?o:h}else{l=A+h/2;switch(this.XIt_){case ZD.fIt_:u=n+r;I=r<0?-1:1;break;case ZD.CIt_:u=n+r;I=r<0?1:-1;break;case ZD.dIt_:u=n;I=r<0?-1:1;break;default:u=n+r/2;break}g=this._It_["anchorx"]*I;c=this._It_["anchory"];f=this.pft_()?o:r}a=String(parseFloat(f.toFixed(this.jIt_)));this.Bft_&&(a=String(this.Bft_(a,s,e,f)));this._q_.a_(a);this.DIt_.$C_()&&this.DIt_.gR_(l,u).render(t);u+=c?I*Math.abs(t.XR_().sI_())*c:0;l+=g?I*Math.abs(t.XR_().BI_())*g:0;this.XIt_!==ZD.ne_&&(this.R__()?l+=h<0?Math.abs(t.XR_().BI_())*I*this._q_.Ie_():0:u+=r<0?Math.abs(t.XR_().sI_())*I*this._q_.Ts_():0);this._q_.gR_(l,u);this.ZIt_&&this._q_.rotate(this.ZIt_,l,u);this._q_.render(t);this.ZIt_&&this._q_.rotate(-this.ZIt_,l,u)}mft_(t,i,s,e,A,n,h,r){const o=i||s||r===1,l=e[h];if(t){oM(this.SIt_,sM(l)+(o?n/2:n+A*h));lM(this.SIt_,A);hM(this.SIt_,tM(l));rM(this.SIt_,AM(l))}else{hM(this.SIt_,tM(e[0])+(o?n/2:n+A*h));rM(this.SIt_,A);oM(this.SIt_,sM(l));lM(this.SIt_,nM(l))}}yft_(t){if(this.hft_&&this.hft_.data.length>0){const i=t.Ji_(),s=this.hft_.data,e=this.R__(),A=this.OIt_===XD.aIt_,n=this.xIt_===jD.IIt_||Array.isArray(this.VIt_)&&this.VIt_.length===1,h=this.zIt_&&!t.tk_();h&&this.Ift_();const r=t.rS_();let o,l;if(e){o=r.Ee_();l=r.pe_()}else{o=r.we_();l=r.Qe_()}const u=s[0].LK_[0],a=s[0].LK_.length;let g=0,c=0;const I=this.UU_["barmaxwidth"],f=a/2;let C,d,B;if(I!=null&&!isNaN(I)){let t;if(e){t=NA.AA_(bn.jc_(0,nM(u),i),2);if(t>I){g=bn.$c_(0,I,i);c=nM(u)-g;if(!A&&!n&&a>1){C=NA.AA_(bn.jc_(0,sM(u)+c,i),2);d=f*I;B=C-d;B>0&&(c=bn.$c_(0,B,i)+c)}}}else{t=NA.AA_(bn.jc_(AM(u),0,i),2);if(t>I){g=bn.$c_(I,0,i);c=AM(u)-g;if(!A&&!n&&a>1){C=NA.AA_(bn.jc_(tM(u)+c,0,i),2);d=f*I;B=C-d;B>0&&(c=bn.$c_(B,0,i)+c)}}}}let w=0,Q=0,E=null,p=null,m=null,y=null;const D=s.reduce(((t,i)=>Math.max(t,i.LK_.length)),0);for(Q=0;Q<D;++Q)for(w=0;w<s.length;++w){E=s[w];p=E.LK_[Q];if(p!=null)if(I!=null&&!isNaN(I)&&c>0){this.mft_(e,A,n,E.LK_,g,c,Q,a);this.wft_(t,this.SIt_,t.tk_(),Q,w)}else this.wft_(t,p,t.tk_(),Q,w)}Q=Math.max(0,--Q);if(h){let i=null,h=0;for(w=0;w<s.length;++w){E=s[w];if(E.LK_.length>0)if(this.pft_()){let s=0;for(let t=0;t<E.oft_.length;t++){const i=E.oft_[t];s+=isNaN(i)||i==null?0:i}if(I!=null&&!isNaN(I)&&c>0){this.mft_(e,A,n,E.LK_,g,c,E.LK_.length-1,a);p=this.SIt_}else p=E.LK_[E.LK_.length-1];if(p!=null){i=e?p[3]:p[2];if(this.Dft_(t,w,null,s,dM.Vr_,i)){if(p===null)continue;p[4]=s;if(e){y=sM(p);m=eM(p);h=this._q_.Ts_()}else{y=tM(p);m=iM(p);h=this._q_.Ie_()}o-h<=m&&l>=y&&this.Eft_(t,p,w,Q)}}}else for(Q=0;Q<E.LK_.length;++Q){const s=E.oft_[Q];if(!isNaN(s)&&s!=null||Array.isArray(s)&&!isNaN(s[0])&&s[0]!=null&&!isNaN(s[1])&&s[1]!=null){if(I!=null&&!isNaN(I)&&c>0){this.mft_(e,A,n,E.LK_,g,c,Q,a);p=this.SIt_}else p=E.LK_[Q];i=e?p[3]:p[2];if(this.Dft_(t,w,Q,s,dM.W8_,i)){if(p===null)continue;if(e){y=sM(p);m=eM(p);h=this._q_.Ts_()}else{y=tM(p);m=iM(p);h=this._q_.Ie_()}o-h<=m&&l>=y&&this.Eft_(t,p,w,Q)}}}}}}}zY_(t){this.Xb_(t);const i=this.qY_();for(let s=0;s<i;s++){const i=this.HY_(s);if(t.filter(i)){t.tk_()&&t.YR_(i);i.render(t)}}this.yft_(t);this.iN_(t)}OY_(t,i){const s=this;this.Xb_(t);Au.fN_(this.YY_(),(function(i,s){if(t.filter(i)){t.YR_(i);i.ad_(t,s)}else s()}),(function(){s.yft_(t);s.iN_(t);i()}))}pft_(){return this.OIt_===XD.aIt_&&this.WIt_===!0}Dft_(t,i,s,e,A,n){if(typeof this.zIt_=="boolean")return this.zIt_;if(typeof this.zIt_=="function"){const h=Math.abs(t.XR_().BI_()),r=Math.abs(t.XR_().sI_()),o=$o.measureText(e.toString(),this._q_.FE_()),l=h*(o.Ie_()+this._It_["anchorx"]),u=r*(o.Ts_()+this._It_["anchory"]),a=this.zIt_(i,s,e,A,l,u,n,e,this.UU_["orientation"]);return a===!0&&a}if(Array.isArray(this.zIt_)){const t=this.zIt_[i];return t===!0||Array.isArray(t)&&t[s]===!0}return!1}N_(){let t=super.N_();t=Pi(this.JV_(),t);return t}dt_(t){if(t==null)return this;super.dt_(t);this.setOptions(t);return this}};i=t([_s("geotoolkit.controls.shapes.BarChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJoYXNEYXRhIjoicUl0XyIsInNldERhdGFTZXJpZXNWaXNpYmxlIjoiSkl0XyIsImdldERhdGFTZXJpZXNWaXNpYmxlIjoiUEl0XyIsImdldE9wdGlvbnMiOiJKVl8iLCJnZXREYXRhTGltaXRzIjoiY2Z0XyIsInNlbGVjdEJhcnNBdCI6ImZmdF8iLCJoaXRUZXN0IjoiJFhfIiwiZ2V0VmFsdWVBdCI6IkNmdF8iLCJoaWdobGlnaHRCYXJzIjoiZGZ0XyIsInNldEZvcm1hdExhYmVsSGFuZGxlciI6Ill4XyIsInJlbmRlclZhbHVlQW5kU3ltYm9sIjoiRWZ0XyIsInJlbmRlckNvbnRlbnQiOiJ6WV8iLCJyZW5kZXJDb250ZW50QXN5bmMiOiJPWV8iLCJpc1Nob3dUb3RhbE9ubHkiOiJwZnRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fSwiZ2V0TmVhdE1pblZhbHVlIjoiZWZ0XyIsImdldE5lYXRNYXhWYWx1ZSI6IkFmdF8ifSAg"),wM=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(aM.Ai_())}bi_(t,i){return t["attributename"]==="datasets"&&i instanceof BM}Yi_(t){const i=t.getData();return i==null||i["datasets"]==null?[[]]:i["datasets"].map((t=>t["values"]))}apply(t){t.setData({datasets:this.Ti_().map((t=>({values:t})))})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(wM);var QM=Ci(function(){let i=class t extends Du{constructor(t){t||(t={});const i=qi(t,{left:typeof t["left"]=="number"?t["left"]:0,width:typeof t["width"]=="number"?t["width"]:1,whiskerswidth:typeof t["whiskerswidth"]=="number"?t["whiskerswidth"]:1,min:typeof t["min"]=="number"?t["min"]:0,max:typeof t["max"]=="number"?t["max"]:1,median:typeof t["median"]=="number"?t["median"]:1,firstquartile:typeof t["firstquartile"]=="number"?t["firstquartile"]:1,thirdquartile:typeof t["thirdquartile"]=="number"?t["thirdquartile"]:1,isoutliersvisible:typeof t["isoutliersvisible"]!="boolean"||t["isoutliersvisible"],ishorizontal:typeof t["ishorizontal"]=="boolean"&&t["ishorizontal"],linestyle:t["linestyle"]instanceof hl?t["linestyle"]:null,connectedlinestyle:new hl({color:"grey",width:1,pixelsnapmode:{x:!0,y:!0},pattern:el.yD_}),primaryfillstyle:t["primaryfillstyle"]instanceof wr?t["primaryfillstyle"]:null},!0);i["primaryfillstyle"]=il.BD_(i["primaryfillstyle"]);i["secondaryfillstyle"]=il.BD_(i["secondaryfillstyle"])||i["primaryfillstyle"];i["connectedlinestyle"]=hl.Wi_(i["connectedlinestyle"]);super(i);this.Mft_=i["left"];this.Jp_=i["width"];i["whiskerswidth"]>i["width"]?this.vft_=i["width"]:this.vft_=i["whiskerswidth"];this.bft_=i["min"];this.Nft_=i["max"];this.Sft_=i["median"];this.Gft_=i["firstquartile"];this.Rft_=i["thirdquartile"];this.kft_=i["ishorizontal"];this.Fft_=i["isoutliersvisible"];this.xft_=i["primaryfillstyle"];this.Lft_=i["secondaryfillstyle"];this.Uft_=i["connectedlinestyle"];this.kft_?this.bf_=new mA(this.bft_,this.Mft_,this.Nft_,this.Mft_+this.Jp_):this.bf_=new mA(this.Mft_,this.bft_,this.Mft_+this.Jp_,this.Nft_)}getBounds(){return this.bf_.lock()}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;i.YR_(this);const s=i.Ji_();let e,A,n,h,r,o,l;const u=7,a=this.getBounds(),g=this.Rft_-this.Gft_,c=this.gt_().IQ_(null);i.rB_(c);this.Xb_(i);if(i.tk_()){i.iQ_(wr.EQ_);i.pR_(a)}if(this.kft_!==!0){e=this.Mft_;A=this.bft_;n=this.Jp_;h=this.vft_;r=(n-h)/2;o=n/u;l=Math.abs(s.Zc_()/s._c_());if(this.Gft_-this.bft_>1.5*g&&this.Fft_){i.iQ_(this.Lft_,a);i.yR_(e+(n-o)/2,A-l*o/2,o,l*o);A=this.Gft_-1.5*g}if(this.Nft_-this.Rft_>1.5*g&&this.Fft_){i.iQ_(this.xft_,a);i.yR_(e+(n-o)/2,this.Nft_-l*o/2,o,l*o);this.Nft_=this.Rft_+1.5*g}i.oB_(e+r,A,e+n-r,A);i.iQ_(this.Lft_,a);i.pR_(e,this.Gft_,n,this.Sft_-this.Gft_);i.iQ_(this.xft_,a);i.pR_(e,this.Sft_,n,this.Rft_-this.Sft_);i.oB_(e,this.Sft_,e+n,this.Sft_);i.oB_(e+r,this.Nft_,e+n-r,this.Nft_);i.rB_(this.Uft_);i.oB_(e+n/2,A,e+n/2,this.Gft_);i.oB_(e+n/2,this.Rft_,e+n/2,this.Nft_)}else{e=this.bft_;A=this.Mft_;n=this.Jp_;h=this.vft_;r=(n-h)/2;o=n/u;l=Math.abs(s._c_()/s.Zc_());if(this.Gft_-this.bft_>1.5*(this.Rft_-this.Gft_)&&this.Fft_){i.iQ_(this.Lft_);i.yR_(e-l*o/2,A+(n-o)/2,l*o,o);e=this.Gft_-1.5*(this.Rft_-this.Gft_)}if(this.Nft_-this.Rft_>1.5*(this.Rft_-this.Gft_)&&this.Fft_){i.iQ_(this.xft_);i.yR_(this.Nft_-l*o/2,A+(n-o)/2,l*o,o);this.Nft_=this.Rft_+1.5*(this.Rft_-this.Gft_)}i.oB_(e,A+r,e,A+n-r);i.iQ_(this.Lft_);i.pR_(this.Gft_,A,this.Sft_-this.Gft_,n);i.iQ_(this.xft_);i.pR_(this.Sft_,A,this.Rft_-this.Sft_,n);i.oB_(this.Sft_,A,this.Sft_,A+n);i.oB_(this.Nft_,A+r,this.Nft_,A+n-r);i.rB_(this.Uft_);i.oB_(e,A+n/2,this.Gft_,A+n/2);i.oB_(this.Rft_,A+n/2,this.Nft_,A+n/2)}this.iN_(i)}setData(t){if(t){this.Mft_=typeof t["left"]=="number"?t["left"]:this.Mft_;this.Jp_=typeof t["width"]=="number"?t["width"]:this.Jp_;this.vft_=typeof t["whiskerswidth"]=="number"?t["whiskerswidth"]:this.vft_;this.vft_>this.Jp_&&(this.vft_=this.Jp_);this.bft_=typeof t["min"]=="number"?t["min"]:this.bft_;this.Nft_=typeof t["max"]=="number"?t["max"]:this.Nft_;this.Gft_=typeof t["firstquartile"]=="number"?t["firstquartile"]:this.Gft_;this.Sft_=typeof t["median"]=="number"?t["median"]:this.Sft_;this.Rft_=typeof t["thirdquartile"]=="number"?t["thirdquartile"]:this.Rft_;this.kft_?this.bf_=new mA(this.bft_,this.Mft_,this.Nft_,this.Mft_+this.Jp_):this.bf_=new mA(this.Mft_,this.bft_,this.Mft_+this.Jp_,this.Nft_);this.vn_()}}getData(){return{left:this.Mft_,width:this.Jp_,whiskerswidth:this.vft_,min:this.bft_,firstquartile:this.Gft_,median:this.Sft_,thirdquartile:this.Rft_,max:this.Nft_}}Yft_(t){this.Fft_=typeof t=="boolean"?t:this.Fft_;this.td_();return this}Tft_(){return this.Fft_}Kft_(t){this.kft_=typeof t=="boolean"?t:this.kft_;this.kft_?this.bf_=new mA(this.bft_,this.Mft_,this.Nft_,this.Mft_+this.Jp_):this.bf_=new mA(this.Mft_,this.bft_,this.Mft_+this.Jp_,this.Nft_);this.td_();return this}R__(){return this.kft_}Hft_(t){if(this.xft_===t)return this;this.xft_!=null&&this.iC_(this.xft_,rh.sC_,this.oQ_());this.xft_=il.BD_(t);this.td_();this.xft_!=null&&this.tC_(this.xft_,rh.sC_,this.oQ_());return this}qft_(){return this.xft_}Jft_(t){if(this.Lft_===t)return this;this.Lft_!=null&&this.iC_(this.Lft_,rh.sC_,this.oQ_());this.Lft_=il.BD_(t);this.Lft_=this.Lft_==null?this.xft_:this.Lft_;this.td_();this.Lft_!=null&&this.tC_(this.Lft_,rh.sC_,this.oQ_());return this}Pft_(){return this.Lft_}Vft_(t,i){if(this.Uft_===t)return this;this.Uft_=hl.jD_(this,this.Uft_,t,i,this.oQ_());this.vn_(null,oh.pC_).td_();return this}Oft_(){return this.Uft_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["primaryfillstyle"]!==void 0&&this.Hft_(t["primaryfillstyle"]);t["secondaryfillstyle"]!==void 0&&this.Jft_(t["secondaryfillstyle"]);t["connectedlinestyle"]!==void 0&&this.Vft_(t["connectedlinestyle"],!(t["connectedlinestyle"]instanceof hl));t["isoutliersvisible"]!==void 0&&this.Yft_(t["isoutliersvisible"]);t["ishorizontal"]!==void 0&&this.Kft_(t["ishorizontal"]);t["left"]!==void 0&&(this.Mft_=t["left"]);t["width"]!==void 0&&(this.Jp_=t["width"]);t["whiskerswidth"]!==void 0&&(t["whiskerswidth"]>t["width"]?this.vft_=t["width"]:this.vft_=t["whiskerswidth"]);t["min"]!==void 0&&(this.bft_=t["min"]);t["max"]!==void 0&&(this.Nft_=t["max"]);t["median"]!==void 0&&(this.Sft_=t["median"]);t["firstquartile"]!==void 0&&(this.Gft_=t["firstquartile"]);t["thirdquartile"]!==void 0&&(this.Rft_=t["thirdquartile"]);return this}N_(){const t=super.N_();t["primaryfillstyle"]=this.xft_;t["secondaryfillstyle"]=this.Lft_;t["connectedlinestyle"]=this.Uft_;t["ishorizontal"]=this.kft_;t["isoutliersvisible"]=this.Fft_;t["left"]=this.Mft_;t["width"]=this.Jp_;t["whiskerswidth"]=this.vft_;t["min"]=this.bft_;t["firstquartile"]=this.Gft_;t["median"]=this.Sft_;t["thirdquartile"]=this.Rft_;t["max"]=this.Nft_;return t}};i=t([_s("geotoolkit.controls.shapes.Box")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var GM=Ci({Raw:"Raw",cIt_:"Associative"},2,"eyJBc3NvY2lhdGl2ZSI6ImNJdF8ifSAg"),RM=Ci({Top:"Top",XCt_:"Below",z_:"Left",X_:"Right"},2,"eyJCZWxvdyI6IlhDdF8iLCJMZWZ0Ijoiel8iLCJSaWdodCI6IlhfIn0g");const kM=function(t){return t===null};var FM=Ci(function(){let i=class t extends Du{constructor(t,i){super(t);this.jCt_=(new QM).rd_(!1);this._q_=(new YC).$I_(NaN).tf_(NaN).sR_(!0).tR_(!0).AR_(!0).hR_(!0).rd_(!1);this.UU_={boxvalues:{visible:!0,suppress:!1,textstyle:new qa,location:null,verticaloffset:0,horizontaloffset:0,decimalprecision:2},boxwidth:1,boxpad:2,whiskerswidth:1,linestyle:new hl({color:"grey",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyles:null,linestyles:null,primaryfillstyle:new wr({color:"lightblue"}),secondaryfillstyle:new wr({color:"lightgreen"}),orientation:fg.ax_,connectedlinestyle:new hl({color:"grey",width:1,pixelsnapmode:{x:!0,y:!0},pattern:el.yD_}),isoutliersvisible:!1,ismissingvalue:kM};this.UU_["whiskerswidth"]==null&&(this.UU_["whiskerswidth"]=this.UU_["boxwidth"]);this.ZCt_=this.UU_["boxvalues"]["visible"];this._Ct_=this.UU_["boxvalues"]["suppress"];this.$Ct_=this.UU_["boxvalues"]["location"];this.tdt_=this.UU_["boxvalues"]["decimalprecision"];this.idt_=this.UU_["boxvalues"]["verticaloffset"];this.sdt_=this.UU_["boxvalues"]["horizontaloffset"];this.edt_=this.UU_["boxwidth"];this.Adt_=this.UU_["boxpad"];this.ndt_=this.UU_["whiskerswidth"];this.iIt_=null;this.sIt_=null;this.xIt_=GM.Raw;this.hdt_=0;this.rdt_=0;this.odt_=[];this.ldt_=[];this.udt_=[];this.hdt_=0;this.WH_=null;this.VIt_=null;this.adt_=0;this.gdt_=!0;this.cdt_=!1;this.Idt_=[];this.rd_(!1);this.setOptions(t);i&&this.setData(i);this.rd_(!0)}getBounds(){return this.WH_}setData(t){t=qi(t,{mode:GM.cIt_,datasets:null});this.xIt_=t["mode"];let i=null;if(t["datasets"]!==null){i=Array.isArray(t["datasets"])?t["datasets"]:[t["datasets"]];this.hdt_=i.length}this.fdt_(i);this.vn_().td_();return this}setOptions(t){if((t=qi(t,{}))["connectedlinepattern"]!=null){t["connectedlinestyle"]=hl.Wi_(this.UU_["linestyle"]).IQ_(t["connectedlinepattern"]);ki("BoxPlot.setOptions property connectedlinepattern is deprecated since 4.0. Use connectedlinestyle property.")}t["linestyle"]!=null&&t["connectedlinestyle"]==null&&(t["connectedlinestyle"]=t["linestyle"]);Pi(t,this.UU_);this.UU_["linestyle"]=hl.Wi_(this.UU_["linestyle"]);if(this.UU_["valuelimits"]){this.iIt_=this.UU_["valuelimits"]["minvalue"];this.sIt_=this.UU_["valuelimits"]["maxvalue"];this.cdt_=this.UU_["valuelimits"]["neatlimits"]}if(this.UU_["boxvalues"]){this.ZCt_=this.UU_["boxvalues"]["visible"];this._Ct_=this.UU_["boxvalues"]["suppress"];this.$Ct_=this.UU_["boxvalues"]["location"];this.tdt_=this.UU_["boxvalues"]["decimalprecision"];this.idt_=this.UU_["boxvalues"]["verticaloffset"];this.sdt_=this.UU_["boxvalues"]["horizontaloffset"];this._q_.g_(this.UU_["boxvalues"]["textstyle"])}this.gdt_=!(t["fixedboxwidth"]||!this.gdt_&&!t["boxwidth"]&&!t["boxpad"]&&!t["whiskerswidth"]);this.fdt_();this.td_();return this}R__(){return this.UU_["orientation"]===fg.ux_}Cdt_(t){let i,s=0;for(i=0;i<t.length;i++){t[i]["values"].length===0||Array.isArray(t[i]["values"][0])||(t[i]["values"]=[t[i]["values"]]);t[i]["values"].length>s&&(s=t[i]["values"].length)}this.rdt_=s}ddt_(t){return(i,s,e)=>{const A=e["mapdata"];let n=null,h=0,r=null,o=0;if(A instanceof Map)A.forEach((i=>{const s=i.length;for(let e=0;e<s;e++){r=i[e]["data"]?i[e]["data"]:i[e]["root"]?i[e]["root"]:i[e]["child"];o=this.udt_[t].length;if(r instanceof zD||r instanceof bM){if(i[e]["event"]===xD.eC_){n=r.toArray(!0);n=this.Bdt_(n);this.udt_[t][o]=r;this.VIt_[t]["values"][o]=n}if(i[e]["event"]===xD.AC_){h=this.udt_[t].indexOf(r);this.udt_[t].splice(h,1);this.VIt_[t]["values"].splice(h,1)}if(i[e]["event"]===UD.pct_&&s===e+1){h=this.udt_[t].indexOf(r);n=r.toArray(!0);n=this.Bdt_(n);this.VIt_[t]["values"][h]=n}}}}));else{r=e["data"]?e["data"]:e["root"]?e["root"]:e["child"];o=this.udt_[t].length;if(!(r instanceof zD||r instanceof bM))return;if(e["event"]===xD.eC_){n=r.toArray(!0);n=this.Bdt_(n);this.udt_[t][o]=r;this.VIt_[t]["values"][o]=n}if(e["event"]===xD.AC_){h=this.udt_[t].indexOf(r);this.udt_[t].splice(h,1);this.VIt_[t]["values"].splice(h,1)}if(e["event"]===UD.pct_){h=this.udt_[t].indexOf(r);n=r.toArray(!0);n=this.Bdt_(n);this.VIt_[t]["values"][h]=n}}this.fdt_();this.td_()}}Bdt_(t){const i=(t=t.filter((t=>t!=null))).length;t.sort((function(t,i){return t-i}));return t=[t[0],t[Math.floor(i/4)],t[Math.floor(i/2)],t[Math.floor(i*3/4)],t[i-1]]}wdt_(t){let i,s,e,A,n;this.ldt_=[];this.udt_=[];for(i=0;i<t.length;i++)if(t[i]["datasource"]){this.udt_[i]=[];this.ldt_[i]=t[i]["datasource"];this.Idt_[i]=this.ddt_(i);this.ldt_[i].on(NM.TCt_,this.Idt_[i]);A=this.ldt_[i].qY_();for(s=0;s<A;s++){n=this.ldt_[i].HY_(s);if(n instanceof zD||n instanceof bM){this.udt_[i][s]=n;e=n.toArray(!0)}if(e&&e.length!==0){e=this.Bdt_(e);t[i]["values"]==null&&(t[i]["values"]=[]);t[i]["values"][s]=e}}}else{t[i]["values"].length===0||Array.isArray(t[i]["values"][0])||(t[i]["values"]=[t[i]["values"]]);for(s=0;s<t[i]["values"].length;s++){e=t[i]["values"][s];if(e!=null){e=this.Bdt_(e);t[i]["values"][s]=e}}}}Lq_(t){this.WH_=t;this.notify(rh.nC_,this);this.td_();return this}rt_(){return this.WH_}Qdt_(){return this.VIt_}fdt_(t){if(t){this.xIt_===GM.Raw&&this.wdt_(t);this.VIt_=t}else{if(!this.VIt_)return;t=this.VIt_}this.Cdt_(t);const i=this.rft_(t);this.Edt_(i);this.rd_(!0)}pdt_(){const t=10;this.edt_=1/(this.hdt_+this.UU_["boxpad"]/this.UU_["boxwidth"]+(this.hdt_-1)/t);this.Adt_=this.edt_*this.UU_["boxpad"]/this.UU_["boxwidth"];this.ndt_=this.edt_*this.UU_["whiskerswidth"]/this.UU_["boxwidth"];this.adt_=this.edt_/t}mdt_(t){const i=t.Ji_();let s;s=this.R__()?i.sI_():i.BI_();const e=OA.Ai_(),A=e.sh_(),n=e.gn_("in");let h;this.UU_["boxwidthunit"]&&(h=e.gn_(this.UU_["boxwidthunit"],null,!0));h||(h=e.gn_("in"));const r=undefined,o=h.wn_(this.UU_["fixedboxwidth"],n)*A;this.edt_=o/Math.abs(s);this.adt_=2/Math.abs(s);this.Adt_=1-(this.edt_*this.hdt_+this.adt_*(this.hdt_-1));this.ndt_=this.edt_}Edt_(t){const i=this.rdt_;this.rd_(!1);const s=-.5;this.R__()?this.Lq_(new mA(t.Xs_(),s,t.zs_(),i+s)):this.Lq_(new mA(s,t.Xs_(),i+s,t.zs_()))}rft_(t){let i,s,e,A=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,h;for(i=0;i<t.length;i++){e=t[i];for(s=0;s<e["values"].length;s++){const t=e["values"][s];if(t!==null){A=Math.min(t[0],A);n=Math.max(t[4],n)}}}A=Math.floor(A);n=Math.ceil(n);if(this.UU_["valuelimits"]){this.iIt_!==null&&this.iIt_<=A&&(A=this.iIt_);this.sIt_!==null&&this.sIt_>=n&&(n=this.sIt_);h=new fA(A,n)}else h=new fA(A,n);this.cdt_&&(h=NA.iA_(A,n));return h}ydt_(t){this.odt_=[];const i=this.VIt_;let s,e,A,n;for(let h=0,r=t;h<this.rdt_;h++){this.odt_[h]=[];for(let t=0;t<this.hdt_;t++){s=null;n=null;e=i[t]["values"][h];A=this.UU_["ismissingvalue"](e);if(A){this.odt_[h][t]=null;r+=this.edt_;t!==this.hdt_-1&&(r+=this.adt_);continue}const o=i[t]["fillstyle"];o&&(s=Array.isArray(o)?o.length===1?o[0]:o[h]:o);let l;this.UU_["linestyles"]!=null&&Array.isArray(this.UU_["linestyles"][t])?l=this.UU_["linestyles"][t]:this.UU_["linestyles"]!=null&&(l=this.UU_["linestyles"]);l&&(n=l.length===1?l[0]:l[h]);this.odt_[h][t]=[r,e,s,n];r+=this.edt_;t!==this.hdt_-1&&(r+=this.adt_)}r+=this.Adt_}}Ddt_(){let t;if(this.R__())switch(this.$Ct_){case RM.X_:t=dA.he_;break;case RM.z_:t=dA.oe_;break;default:t=dA.he_;break}else switch(this.$Ct_){case RM.Top:t=dA.le_;break;case RM.XCt_:t=dA.re_;break;default:t=dA.le_;break}this._q_.SE_(t)}Mdt_(t,i,s,e,A){let n;const h={ishorizontal:this.R__(),isoutliersvisible:this.UU_["isoutliersvisible"],connectedlinestyle:this.UU_["connectedlinestyle"]},r=i[0],o=i[1],l=i[2],u=i[3];if(o!=null){n={left:r,width:this.edt_,whiskerswidth:this.ndt_,min:o[0],firstquartile:o[1],median:o[2],thirdquartile:o[3],max:o[4]};this.jCt_.setData(n);this.jCt_.dt_(h);if(t.filter(this.jCt_)){if(s){this.jCt_.PC_(new oD(A,e,this));t.YR_(this.jCt_)}if(l)if(l instanceof wr){this.jCt_.Hft_(l);this.jCt_.Jft_(l)}else{this.jCt_.Hft_(l["primaryfillstyle"]);this.jCt_.Jft_(l["secondaryfillstyle"])}else{this.jCt_.Hft_(this.UU_["primaryfillstyle"]);this.jCt_.Jft_(this.UU_["secondaryfillstyle"])}u?u instanceof hl&&this.jCt_.rB_(u):this.jCt_.rB_(this.UU_["linestyle"]);this.jCt_.render(t);return!0}}return!1}vdt_(t,i){let s,e,A,n,h=0,r=0;const o=t.Ji_(),l=this.sdt_?this.sdt_/Math.abs(o.BI_()):0,u=this.idt_?this.idt_/Math.abs(o.sI_()):0,a=.2,g=i[0],c=i[1];if(this.R__()!==!0){e=g+this.edt_/2+l;for(s=0;s<c.length;s++){A=c[s]+u;n=String(parseFloat(c[s].toFixed(this.tdt_)));this._q_.a_(n);this._q_.gR_(e,A);if(this._Ct_){if(s>0&&A-r<h)continue;this._q_.render(t);h=this._q_.getBoundingBox(t).height*(1-a);r=c[s]+u}else this._q_.render(t)}}else{A=g+this.edt_/2+u;for(s=0;s<c.length;s++){e=c[s]+l;n=String(parseFloat(c[s].toFixed(this.tdt_)));this._q_.a_(n);this._q_.gR_(e,A);if(this._Ct_){if(s>0&&e-r<h)continue;this._q_.render(t);h=this._q_.getBoundingBox(t).width;r=c[s]+l}else this._q_.render(t)}}}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);if(i.tk_()){i.iQ_(wr.EQ_);i.pR_(this.rt_())}this.gdt_?this.pdt_():this.mdt_(i);const s=-(this.edt_*this.hdt_+(this.hdt_-1)*this.adt_)/2;this.ydt_(s);if(this.odt_&&this.odt_.length>0){this.ZCt_&&this.Ddt_();for(let s=0;s<this.odt_.length;++s)for(let e=0;e<this.odt_[s].length;++e){const A=this.odt_[s][e];A!=null&&(this.Mdt_(i,A,t.tk_(),e,s)&&this.ZCt_&&this.vdt_(i,A))}}this.iN_(t)}$X_(t,i){const s=new bC,e=[],A=function(t){if(!(t instanceof QM))return;const i=t.zC_();i&&i instanceof oD&&i.OT_()===this&&e.push(i)}.bind(this);if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],e=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];s.iX_(A,this.getRoot(),i,e,!0)}else s.iX_(A,this.getRoot(),t.x,t.y,i||1);return e}dispose(){for(let t=0;t<this.ldt_.length;t++)this.ldt_[t].off(NM.TCt_,this.Idt_[t]);this.Idt_=[];super.dispose()}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);return this}N_(){const t=Pi(this.UU_,super.N_());Ns(t,"ismissingvalue");return t}};i=t([_s("geotoolkit.controls.shapes.BoxPlot")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0hvcml6b250YWwiOiJSX18iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldE1vZGVsTGltaXRzIjoicnRfIiwiZ2V0UHJvY2Vzc2VkRGF0YXNldHMiOiJRZHRfIiwiY2FsY3VsYXRlQWJzV2lkdGgiOiJtZHRfIiwiaGl0VGVzdCI6IiRYXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8ifX19"),xM=function(){let i=class t extends be{process(t,i,s,e){s=s||[];for(let A=0;A<t.length;++A){s[A]=s[A]||[];for(let n=0;n<t[A].length;++n){s[A][n]=s[A][n]||[];for(let h=0;h<t[A][n].length;++h)s[A][n][h]=e(t[A][n][h],i[A][n][h])}}return s}clone(t){const i=t.slice();for(let s=0;s<i.length;++s){i[s]=t[s].slice();for(let e=0;e<i[s].length;++e)i[s][e]=t[s][e].slice()}return i}};i=t([_s("geotoolkit.charts.animation.BoxPlotProcessor")],i);return i}(),LM=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(new xM)}bi_(t,i){return t["attributename"]==="values"&&i instanceof FM}Yi_(t){const i=t.Qdt_();if(!i)return null;const s=[];for(let t=0;t<i.length;++t)s[t]=i[t]["values"];return s}apply(t){const i=t.Qdt_(),s=this.Ti_();for(let t=0;t<i.length;++t)i[t]["values"]=s.length!==0?s[t]:[];t.setData({mode:GM.Raw,datasets:i})}};i=t([_s("geotoolkit.charts.animation.BoxPlotChartValuesEffect")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(LM);var UM=function(){let i=class t extends Ip{bdt_(t){let i;const s=this.z9_.length;for(i=0;i<s;i++){const s=undefined;if(this.z9_[i].index===t){this.z9_.splice(i,1);return this}}this.j9_!=null&&this.j9_.bdt_(t);this.Z9_!=null&&this.Z9_.bdt_(t);this._9_!=null&&this._9_.bdt_(t);this.$9_!=null&&this.$9_.bdt_(t);return this}};i=t([_s("geotoolkit.controls.shapes.BubbleChartQuad")],i);return i}();var YM=Ci({Top:"Top",JQ_:"Bottom",ne_:"Center"},2,"eyJCb3R0b20iOiJKUV8iLCJDZW50ZXIiOiJuZV8ifSAg");const TM=new mA,KM=new Gn,HM=je.Xi_()?8192:32767,qM=je.is_()?16777216:268435456;let JM=null;var PM=function(){var i;let s=i=class t extends be{process(t,i,s,e){s=s||[];for(let A=0;A<i.length;A++)s[A]=e(t[A]||0,i[A]);return s}static Ai_(){JM==null&&(JM=new i);return JM}clone(t){return t.slice()}};s=i=t([_s(null)],s);return s}(),VM=Ci(function(){let i=class t extends mA{constructor(t,i,s,e){super(t,i,s,e);this.Ndt_=null}get index(){return this.Ndt_}set index(t){this.Ndt_=t}get Sdt_(){return this.Gdt_}set Sdt_(t){this.Gdt_=t}get Rdt_(){return this.kdt_}set Rdt_(t){this.kdt_=t}};i=t([_s(null)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkYXRheCI6IlNkdF8iLCJkYXRheSI6IlJkdF8ifX19"),OM=Ci(function(){let i=class t extends Du{constructor(t,i){super(t);this.DIt_=new ma;this.Fdt_=[];this.xdt_=[];this.Ldt_=[];this.Udt_=[];this._$_=[];this.Ydt_=!1;this.Tdt_=new qa;this.Kdt_=null;this.Hdt_=0;this.qdt_=null;this.Jdt_=[];this.bf_=new mA(0,0,1,1);this.Pdt_=16;this.$1_=48;this.Vdt_=null;this.Cm_=null;this.Odt_=il.BD_("rgba(128,192,255,1)");this.Wdt_=null;this.zdt_=null;this.Xdt_=null;this.jdt_=null;this.Zdt_=null;this._dt_=!1;this.$dt_=!1;this.tBt_=!1;this.iBt_=!1;this.sBt_=!0;this.eBt_=!0;this.ABt_=!1;this.nBt_=!1;this.hBt_=75;this.rBt_=75;this.oBt_=!1;this.lBt_=!1;this.uBt_=!0;this.aBt_=!0;this.gBt_=null;this.cBt_=null;this.IBt_=null;this.fBt_=null;this.CBt_=null;this.dBt_=null;this.BBt_=null;this.wBt_=null;this.QBt_=null;this.EBt_=null;this.pBt_=null;this.mBt_=null;this.yBt_=null;this.WH_=null;this.bf_=null;this.DBt_=!1;this.MBt_=HM;this.vBt_=HM;this.bBt_=!0;this.NBt_=null;this.SBt_=[];this.GBt_=new lA(0,0);this.RBt_={};this.kBt_={};this.FBt_=5;this.NZ_={x:new WC({orientation:fg.ux_,neatlimits:this.sBt_,preciselimits:this.ABt_,minspan:this.hBt_}),y:new WC({orientation:fg.ax_,neatlimits:this.eBt_,preciselimits:this.nBt_,minspan:this.rBt_})};this._q_=(new YC).$I_(NaN).tf_(NaN).sR_(!0).tR_(!0).AR_(!0).hR_(!0).SE_(dA.ne_).rd_(!1);this.xBt_=()=>{this.LBt_()};this.setData(t);this.Wj_(i)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setData(t);return this}dispose(){if(!this.Df_()){this.Cm_&&this.Cm_.off(mo.sC_,this.xBt_);super.dispose()}}UBt_(t){if(this.Cm_===t)return this;this.Cm_&&this.Cm_.off(mo.sC_,this.xBt_);this.Cm_=t;this.Cm_&&this.Cm_.on(mo.sC_,this.xBt_);return this}setData(t){t==null&&(t={});const i=t["datax"]!=null||t["datay"]!=null||t["dataz"]!=null||t["datas"]!=null,s=t["minsize"]!=null||t["maxsize"]!=null||t["sizebin"]!=null||t["cachewidthlimit"]!=null||t["cacheheightlimit"]!=null||t["colorprovider"]!=null||t["defaultfillstyle"]!=null||t["defaultlinestyle"]!=null||t["symbol"]!=null,e=typeof t["minsize"]=="number"||typeof t["maxsize"]=="number";t=qi(t,{datax:Array.isArray(t["datax"])?t["datax"]:this.Fdt_,autominmaxx:typeof t["autominmaxx"]=="boolean"?t["autominmaxx"]:this.oBt_,neatlimitx:typeof t["neatlimitx"]=="boolean"?t["neatlimitx"]:this.sBt_,preciselimitx:typeof t["preciselimitx"]=="boolean"?t["preciselimitx"]:this.ABt_,minspanx:typeof t["minspanx"]=="number"?t["minspanx"]:this.hBt_,datay:Array.isArray(t["datay"])?t["datay"]:this.xdt_,autominmaxy:typeof t["autominmaxx"]=="boolean"?t["autominmaxx"]:this.lBt_,neatlimity:typeof t["neatlimity"]=="boolean"?t["neatlimity"]:this.eBt_,preciselimity:typeof t["preciselimity"]=="boolean"?t["preciselimity"]:this.nBt_,minspany:typeof t["minspany"]=="number"?t["minspany"]:this.rBt_,dataz:Array.isArray(t["dataz"])?t["dataz"]:this.Ldt_,autominmaxz:typeof t["autominmaxz"]=="boolean"?t["autominmaxz"]:this.uBt_,datas:Array.isArray(t["datas"])?t["datas"]:this.Udt_,autominmaxs:typeof t["autominmaxs"]=="boolean"?t["autominmaxs"]:this.aBt_,labels:Array.isArray(t["labels"])?t["labels"]:this._$_,labelvisible:typeof t["labelvisible"]=="boolean"?t["labelvisible"]:this.Ydt_,labeltextstyle:qa.Wi_(t["labeltextstyle"])||this.Tdt_,labellocation:t["labellocation"]!=null?t["labellocation"]:this.Kdt_,labelpadding:typeof t["labelpadding"]=="number"?t["labelpadding"]:this.Hdt_,secondarylocation:t["secondarylocation"]!=null?t["secondarylocation"]:this.qdt_,validlength:typeof t["validlength"]=="number"?t["validlength"]:null,colorprovider:t["colorprovider"]instanceof Mo?t["colorprovider"]:this.Cm_,defaultfillstyle:il.BD_(t["defaultfillstyle"])||this.Odt_,defaultlinestyle:hl.Wi_(t["defaultlinestyle"])||this.Wdt_,minsize:typeof t["minsize"]=="number"?t["minsize"]:this.Pdt_,maxsize:typeof t["maxsize"]=="number"?t["maxsize"]:this.$1_,sizebin:typeof t["sizebin"]=="number"?t["sizebin"]:this.Vdt_,cachewidthlimit:typeof t["cachewidthlimit"]=="number"&&t["cachewidthlimit"]<=HM?t["cachewidthlimit"]:this.MBt_,cacheheightlimit:typeof t["cacheheightlimit"]=="number"&&t["cacheheightlimit"]<=HM?t["cacheheightlimit"]:this.vBt_,symbol:t["symbol"]!=null?t["symbol"]:cE,selectable:t["selectable"]!=null?t["selectable"]:this.bBt_});e&&(t["sizebin"]=Math.ceil(t["maxsize"]-t["minsize"]));if(t["cachewidthlimit"]*t["cacheheightlimit"]>qM){t["cachewidthlimit"]=Math.min(t["cachewidthlimit"],Math.sqrt(qM));t["cacheheightlimit"]=Math.min(t["cacheheightlimit"],Math.sqrt(qM))}(t["autominmaxx"]||t["neatlimitx"])&&(this._dt_=!1);(t["autominmaxy"]||t["neatlimity"])&&(this.$dt_=!1);t["autominmaxs"]&&(this.tBt_=!1);t["autominmaxz"]&&(this.iBt_=!1);this.hk_=t["symbol"];this.Fdt_=t["datax"]!=null?t["datax"]:[];this.xdt_=t["datay"]!=null?t["datay"]:[];this.Ldt_=t["dataz"]!=null?t["dataz"]:[];this.Udt_=t["datas"]!=null?t["datas"]:[];this._$_=t["labels"]!=null?t["labels"]:[];this.Ydt_=t["labelvisible"];this.Tdt_=qa.Wi_(t["labeltextstyle"]);this.Hdt_=t["labelpadding"];this._q_.g_(this.Tdt_);this.Kdt_=t["labellocation"]?t["labellocation"]:YM.ne_;this.qdt_=t["secondarylocation"];this.oBt_=t["autominmaxx"];this.lBt_=t["autominmaxy"];this.uBt_=t["autominmaxz"];this.aBt_=t["autominmaxs"];this.sBt_=t["neatlimitx"];this.eBt_=t["neatlimity"];this.ABt_=t["preciselimitx"];this.nBt_=t["preciselimity"];this.oBt_===!0&&(this.sBt_=!1);this.lBt_===!0&&(this.eBt_=!1);if(typeof t["minx"]=="number"&&typeof t["maxx"]=="number"){this._dt_=!0;this.oBt_=!1;this.sBt_=!1;this.ABt_=!1;this.Xdt_=t["maxx"];this.zdt_=t["minx"];this.wm_=this.Xdt_;this.dm_=this.zdt_}if(typeof t["miny"]=="number"&&typeof t["maxy"]=="number"){this.$dt_=!0;this.lBt_=!1;this.eBt_=!1;this.nBt_=!1;this.Zdt_=t["maxy"];this.jdt_=t["miny"];this.Qm_=this.Zdt_;this.Bm_=this.jdt_}if(typeof t["mins"]=="number"&&typeof t["maxs"]=="number"){this.tBt_=!0;this.aBt_=!1;this.cBt_=t["maxs"];this.gBt_=t["mins"];this.YBt_=this.cBt_;this.TBt_=this.gBt_}if(typeof t["minz"]=="number"&&typeof t["maxz"]=="number"){this.iBt_=!0;this.uBt_=!1;this.fBt_=t["maxz"];this.IBt_=t["minz"];this.KBt_=this.fBt_;this.HBt_=this.IBt_}this.UBt_(t["colorprovider"]);this.Odt_=il.BD_(t["defaultfillstyle"]);this.Wdt_=hl.Wi_(t["defaultlinestyle"]);this.bBt_=t["selectable"]!=null?t["selectable"]:this.bBt_;this.Pdt_=t["minsize"];this.$1_=t["maxsize"];this.Vdt_=t["sizebin"]?t["sizebin"]:this.$1_-this.Pdt_;this.Vdt_<2&&(this.Vdt_=2);this.MBt_=t["cachewidthlimit"];this.vBt_=t["cacheheightlimit"];t["validlength"]!=null?this.yBt_=t["validlength"]:i&&(this.Cm_==null?this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Udt_.length):this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Ldt_.length,this.Udt_.length));if(s){this.DBt_=!1;this.qBt_=null}this.NZ_["x"].setOptions({orientation:fg.ux_,neatlimits:this.sBt_,preciselimits:this.ABt_,minspan:this.hBt_});this.NZ_["y"].setOptions({orientation:fg.ax_,neatlimits:this.eBt_,preciselimits:this.nBt_,minspan:this.rBt_});this.JBt_();this.Wj_();this.td_()}getData(t,i){const s={datax:this.Fdt_,datay:this.xdt_,dataz:this.Ldt_,datas:this.Udt_,autominmaxx:this.oBt_,autominmaxy:this.lBt_,autominmaxs:this.aBt_,autominmaxz:this.uBt_,neatlimitx:this.sBt_,neatlimity:this.eBt_,labels:this._$_,labeltextstyle:this.Tdt_,labellocation:this.Kdt_,secondarylocation:this.qdt_,labelpadding:this.Hdt_,labelvisible:this.Ydt_,validlength:this.yBt_,minsize:this.Pdt_,maxsize:this.$1_,sizebin:this.Vdt_,colorprovider:this.Cm_,defaultfillstyle:this.Odt_,defaultlinestyle:this.Wdt_,symbol:this.hk_};let e={minx:this.dBt_,maxx:this.CBt_,miny:this.wBt_,maxy:this.BBt_,minz:this.mBt_,maxz:this.pBt_,mins:this.EBt_,maxs:this.QBt_};t?i||(e={minx:this.dm_,maxx:this.wm_,miny:this.Bm_,maxy:this.Qm_,minz:this.HBt_,maxz:this.KBt_,mins:this.TBt_,maxs:this.YBt_}):e={minx:this.zdt_,maxx:this.Xdt_,miny:this.jdt_,maxy:this.Zdt_,minz:this.IBt_,maxz:this.fBt_,mins:this.gBt_,maxs:this.cBt_};return qi(e,s)}JBt_(t,i){let s=!1,e,A;const n=NA.oA_(this.Fdt_),h=NA.oA_(this.xdt_),r=NA.oA_(this.Udt_),o=NA.oA_(this.Ldt_);this.dBt_=n[0];this.CBt_=n[1];this.wBt_=h[0];this.BBt_=h[1];this.EBt_=r[0];this.QBt_=r[1];this.mBt_=o[0];this.pBt_=o[1];if(!t||isNaN(this.dm_)||isNaN(this.Bm_)){if(!this._dt_){this.dm_=n[0];this.wm_=n[1]}if(!this.$dt_){this.Bm_=h[0];this.Qm_=h[1]}}if(!i&&this.bBt_){if(!this.tBt_){e=r[0];A=r[1];e===this.TBt_&&A===this.YBt_||(s=!0);this.TBt_=e;this.YBt_=A}if(!this.iBt_){this.HBt_=o[0];this.KBt_=o[1]}}return s}PBt_(t){this.Ldt_==null||this.Ldt_.length===0?this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Udt_.length):this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Ldt_.length,this.Udt_.length);const i=undefined;this.JBt_(!0)?this.Wj_(null,0,this.yBt_):this.Wj_(null,this.yBt_-t,this.yBt_);this.DBt_=!1}VBt_(t,i){this.Ldt_==null||this.Ldt_.length===0?this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Udt_.length):this.yBt_=Math.min(this.Fdt_.length,this.xdt_.length,this.Ldt_.length,this.Udt_.length);let s;const e=Math.abs(this.OBt_.Qe_()-this.OBt_.we_()),A=Math.abs(this.OBt_.Ee_()-this.OBt_.pe_()),n=e/(this.bf_.Qe_()-this.bf_.we_()),h=A/(this.bf_.Ee_()-this.bf_.pe_());for(s=t;s<t+i;s++)this.WBt_.bdt_(s);for(s=t+i;s<this.yBt_+i;s++)this.SBt_[s].index=this.SBt_[s].index-i;for(s=t;s<t+i;s++){const t=this.Jdt_[s]/2/n,i=Math.abs(n/h),e=this.SBt_[s].Sdt_,A=this.SBt_[s].Rdt_,r=new mA(e-t,A-i*t,e+t,A+i*t);this.td_(r)}this.Jdt_.splice(t,i);this.SBt_.splice(t,i);this.DBt_=!1}zBt_(t){this.OBt_=t;return this}XBt_(){return this.OBt_}ht_(t){if(this.bf_&&this.bf_.Ce_(t))return!1;this.bf_=t;return!0}getBounds(){return this.bf_}vn_(t,i){super.vn_(t,i);if(i===oh.dC_){this.DBt_=!1;this.td_()}return this}Wj_(t,i,s){this.OBt_=t!=null?t:this.OBt_;if(this.OBt_==null)return;i==null&&(i=0);s==null&&(s=this.yBt_);const e=Math.abs(this.OBt_.Qe_()-this.OBt_.we_()),A=Math.abs(this.OBt_.Ee_()-this.OBt_.pe_()),n=new Gn(e/(this.wm_-this.dm_),0,0,A/(this.Qm_-this.Bm_),0,0);let h;const r=[],o=(this.$1_-this.Pdt_)/(this.Vdt_-1);for(h=0;h<this.Vdt_;h++)r[h]=this.Pdt_+h*o;for(h=0;h<this.yBt_;h++){let t=Math.floor((this.Udt_[h]-this.TBt_)*this.Vdt_/(this.YBt_-this.TBt_));t<0&&(t=0);this.Udt_[h]>=this.YBt_&&(t=this.Vdt_-1);this.TBt_===this.YBt_&&(t=Math.floor(this.Vdt_/2));this.Jdt_[h]=r[t]}if(this.oBt_||this.lBt_||this.sBt_||this.eBt_)for(h=i;h<s;h++){if(typeof this.Fdt_[h]!="number"||typeof this.xdt_[h]!="number")continue;const t=this.Jdt_[h]/2;let i=0,s=0;if(this.oBt_||this.sBt_){if(this.Fdt_[h]+t/n.xx>this.wm_){i=(e-t)/(this.Fdt_[h]-this.dm_);this.wm_=Math.ceil(t/i+this.Fdt_[h])}if(this.xdt_[h]+t/n.yy>this.Qm_){s=(A-t)/(this.xdt_[h]-this.Bm_);this.Qm_=Math.ceil(t/s+this.xdt_[h])}}if(this.lBt_||this.eBt_){if(this.Fdt_[h]-t/n.xx<this.dm_){i=(e-t)/(this.wm_-this.Fdt_[h]);this.dm_=Math.floor(this.Fdt_[h]-t/i)}if(this.xdt_[h]-t/n.yy<this.Bm_){s=(A-t)/(this.Qm_-this.xdt_[h]);this.Bm_=Math.floor(this.xdt_[h]-t/s)}}i!==0&&(n.xx=i);s!==0&&(n.yy=s)}this.NZ_["x"].Wj_(this.dm_,this.wm_,n);if(this.sBt_){this.dm_=this.NZ_["x"].nA_();this.wm_=this.NZ_["x"].hA_()}this.NZ_["y"].Wj_(this.Bm_,this.Qm_,n);if(this.eBt_){this.Bm_=this.NZ_["y"].nA_();this.Qm_=this.NZ_["y"].hA_()}const l=new mA(this.dm_,this.Bm_,this.wm_,this.Qm_),u=this.ht_(l);this.Lq_(this.bf_);n.xx=e/(this.bf_.Qe_()-this.bf_.we_());n.yy=A/(this.bf_.Ee_()-this.bf_.pe_());if(this.WBt_==null||u){this.WBt_=new UM(this.bf_,this.FBt_);if(u){i=0;s=this.yBt_;this.td_()}}i===0&&s===this.yBt_&&this.WBt_.clear();for(h=i;h<s;h++){if(typeof this.Fdt_[h]!="number"||typeof this.xdt_[h]!="number")continue;const t=this.Jdt_[h]/2+(this.Wdt_?.Ie_()/4||1),i=new VM(this.Fdt_[h]-t,this.xdt_[h]-t,this.Fdt_[h]+t,this.xdt_[h]+t);i.index=h;i.Sdt_=this.Fdt_[h];i.Rdt_=this.xdt_[h];this.SBt_[h]=i;this.WBt_.GY_(i);if(!u){const t=this.Jdt_[h]/2/n.xx,i=Math.abs(n.xx/n.yy),s=new mA(this.Fdt_[h]-t,this.xdt_[h]-i*t,this.Fdt_[h]+t,this.xdt_[h]+i*t);this.td_(s)}}}jBt_(){return this.NZ_["x"]}ZBt_(){return this.NZ_["y"]}_Bt_(){this.DIt_.OG_(!1);const t=this.Odt_.clone(),i=hl.Wi_(this.Wdt_||{width:2});let s=i.Ie_();this.$Bt_=Math.floor((this.$1_-this.Pdt_)/(this.Vdt_-1));let e=this.Vdt_*this.Pdt_+this.Vdt_*(this.Vdt_-1)*this.$Bt_/2+2*s*this.Vdt_;if(e>this.MBt_){const t=this.$Bt_/2,i=this.Pdt_+2*s-t,A=-this.MBt_,n=Math.floor((Math.sqrt(i*i-4*t*A)-i)/(2*t));e=n*this.Pdt_+n*(n-1)*this.$Bt_/2+2*s*n;this.twt_=n-1}if(this.Cm_){const t=this.Cm_ instanceof No?this.Cm_.pm_()-this.Cm_.Em_():this.KBt_-this.HBt_;this.iwt_=this.Cm_ instanceof No?this.Cm_.iy_():this.yBt_;this.swt_=this.iwt_>1?t/(this.iwt_-1):1}else this.iwt_=1;let A=this.$1_*this.iwt_+2*s*(this.iwt_+1);if(A>this.vBt_){const t=Math.floor((this.vBt_-2*s)/(this.$1_+2*s));A=this.$1_*t+2*s*(t+1);this.ewt_=t-1}this.NBt_={gap:s,hK_:fr.zw_(e,A),image:null};const n=this.NBt_.hK_.tQ_();this.NBt_.scale=n.VR_();for(let e=0;e<this.iwt_;e++){if(this.Cm_!=null){const s=this.Cm_ instanceof No?this.Cm_.Em_()+e*this.swt_:this.Ldt_[e],A=RA.cs_(typeof s=="number"?this.Cm_.getColor(s):this.Odt_.getColor());t.setColor(A);this.Wdt_==null&&i.setColor(A)}this.DIt_.rk_(this.hk_);this.DIt_.iQ_(t);this.DIt_.rB_(i);for(let t=0;t<this.Vdt_;t++){const i=this.Pdt_+t*this.$Bt_;s=this.NBt_.gap;const A=s+t*this.Pdt_+t*(t-1)*this.$Bt_/2+s*2*t,h=s+e*this.$1_+s*2*e;TM.ce_(A,h,A+i,h+i);this.DIt_.ht_(TM);this.DIt_.render(n)}}this.NBt_.hK_.gM_();this.NBt_.image=this.NBt_.hK_.getCanvas();this.DBt_=!0}Awt_(){this.DIt_.OG_(!1);let t=2;this.$Bt_=Math.floor((this.$1_-this.Pdt_)/(this.Vdt_-1));const i=this.Vdt_*this.Pdt_+this.Vdt_*(this.Vdt_-1)*this.$Bt_/2+2*t*this.Vdt_,s=Object.keys(this.RBt_),e=this.$1_*s.length+2*t*(s.length+1);this.qBt_={gap:t,hK_:fr.zw_(i,e),image:null};const A=this.qBt_.hK_.tQ_();this.qBt_.scale=A.VR_();for(let i=0;i<s.length;i++)if(this.kBt_[s[i]]){this.DIt_.rk_(this.hk_);this.DIt_.iQ_(this.kBt_[s[i]]["fillstyle"]);this.DIt_.rB_(this.kBt_[s[i]]["linestyle"]);for(let s=0;s<this.Vdt_;s++){const e=this.Pdt_+s*this.$Bt_;t=this.qBt_.gap;const n=t+s*this.Pdt_+s*(s-1)*this.$Bt_/2+t*2*s,h=t+i*this.$1_+t*2*i;TM.ce_(n,h,n+e,h+e);this.DIt_.ht_(TM);this.DIt_.render(A)}}this.qBt_.hK_.gM_();this.qBt_.image=this.qBt_.hK_.getCanvas()}Lq_(t){this.WH_=t}rt_(){return this.WH_}LBt_(){this.DBt_=!1}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;i.YR_(this);this.Xb_(i);if(i.tk_()){if(this.bBt_){const t=this.nwt_(i.rS_(),i.Ji_(),!0);i.rB_(null);i.iQ_(wr.EQ_);i.pR_(this.getBounds());let s;const e=[];i.QO_((()=>{e.indexOf(t[s])<0&&e.push(t[s])}));const A=i.Ji_()||Gn.JI_;for(s=0;s<t.length;s++){const e=A.gI_(t[s],TM);i.yR_(t[s].ye_()-e.Ie_()/2,t[s].De_()-e.Ts_()/2,e.Ie_(),e.Ts_())}i.EO_();i.mO_(ks({bubblechart:this,indices:e},["bubblechart","indices"]));i.mO_(new jf(this,e))}return}this.DBt_&&this.NBt_.scale===t.VR_()||this._Bt_();this.qBt_||this.Awt_();const s=[],e=this.nwt_(i.rS_(),i.Ji_());for(let t=0;t<e.length;t++)e[t].Sdt_!=null&&e[t].Rdt_!=null&&s.push(e[t].index);s.sort((function(t,i){return t-i}));const A={},n=Object.keys(this.RBt_);for(let t=0;t<s.length;++t){for(let i=0;i<n.length;i++)if(this.kBt_[n[i]]&&(this.RBt_[n[i]].length===0||this.RBt_[n[i]].includes(s[t]))){A[s[t]]=A[s[t]]||[];A[s[t]].push(i)}this.hwt_(s[t],i)}for(const t in A){const s=A[t];for(let e=0;e<s.length;e++)this.hwt_(+t,i,s[e])}this.Ydt_&&this.rwt_(i);this.iN_(i)}hwt_(t,i,s){if(typeof this.Fdt_[t]!="number"||typeof this.xdt_[t]!="number")return;let e=this.TBt_===this.YBt_?Math.floor(this.Vdt_/2):Math.floor((this.Udt_[t]-this.TBt_)*this.Vdt_/(this.YBt_-this.TBt_));if(isNaN(e))return;e<0&&(e=0);this.Udt_[t]>=this.YBt_&&(e=this.Vdt_-1);let A=0;if(s==null){if(this.Cm_ instanceof No){A=Math.floor((this.Ldt_[t]-this.HBt_)*this.iwt_/(this.Cm_.pm_()-this.Cm_.Em_()));A<0&&(A=0);this.Ldt_[t]>=this.KBt_&&this.Ldt_[t]>=this.Cm_.pm_()&&(A=this.iwt_-1)}else this.Cm_!==null&&(A=t);e>this.twt_||A>this.ewt_?this.owt_(t,A,i):this.zat_(t,e,A,i)}else this.lwt_(t,e,s,i)}rwt_(t){const i=t.Ji_(),s=this.Hdt_;let e;for(e=0;e<this._$_.length;e++){if(typeof this.Fdt_[e]!="number"||typeof this.xdt_[e]!="number")continue;let A=0,n=this.Fdt_[e],h=this.Kdt_;this._q_.a_(this._$_[e]+"");const r=Math.abs(i.BI_()/i.sI_()),o=(this.Jdt_[e]+s*2)/i.BI_(),l=$o.measureText(this._$_[e]+"",this.Tdt_);this.Fdt_[e]+l.Ie_()/(i.BI_()*2)>this.wm_&&(A=this.wm_-(this.Fdt_[e]+(l.Ie_()+s*2)/(i.BI_()*2)));this.Fdt_[e]-l.Ie_()/(i.BI_()*2)<this.dm_&&(A=this.dm_-(this.Fdt_[e]-(l.Ie_()+s*2)/(i.BI_()*2)));n+=A;this.qdt_&&(h===YM.Top&&this.xdt_[e]+r*o/2+l.Ts_()/Math.abs(i.sI_())>this.Qm_||h===YM.JQ_&&this.xdt_[e]-r*o/2-l.Ts_()/Math.abs(i.sI_())<this.Bm_)&&(h=this.qdt_);if(h===YM.Top){this._q_.SE_(dA.le_);this._q_.gR_(n,this.xdt_[e]+r*o/2)}else if(h===YM.JQ_){this._q_.SE_(dA.re_);this._q_.gR_(n,this.xdt_[e]-r*o/2)}else{this._q_.SE_(dA.ne_);this._q_.gR_(n,this.xdt_[e])}this._q_.render(t)}}nwt_(t,i,s){this.WBt_==null&&this.Wj_();const e=i instanceof Gn?i:i.Ji_(),A=this.WBt_.J2_(t.getBounds(),e);if(!s)return A;const n=t.getBounds().getCenter();A.sort(((t,i)=>lA.Ss_(n,t.getCenter())-lA.Ss_(n,i.getCenter())));return A}zat_(t,i,s,e){this.GBt_.x=this.Fdt_[t];this.GBt_.y=this.xdt_[t];const A=this.NBt_.scale;e.Ji_().transformPoint(this.GBt_,this.GBt_);const n=e.VR_();Gn.TI_(n/A,n/A,KM).transformPoint(this.GBt_,this.GBt_);const h=this.NBt_.gap,r=this.GBt_.x-this.Jdt_[t]/2-h,o=this.GBt_.y-this.Jdt_[t]/2-h,l=this.Jdt_[t]*A+h*2*n,u=l,a=(i*this.Pdt_+i*(i-1)*this.$Bt_/2+h*2*i)*A,g=(s*this.$1_+h*2*s)*A,c=(this.Pdt_+i*this.$Bt_+h*2)*A,I=c;this.NBt_.hK_.render(e,r,o,l,u,a,g,c,I)}owt_(t,i,s){this.DIt_.OG_(!1);const e=s.Ji_(),A=Math.abs(e.BI_()/e.sI_()),n=this.Jdt_[t]/2/e.BI_(),h=this.Fdt_[t]-n,r=this.xdt_[t]-A*n,o=this.Odt_.clone(),l=hl.Wi_(this.Wdt_||{width:2});TM.ce_(h,r,h+2*n,r+A*2*n);this.DIt_.rk_(this.hk_);this.DIt_.ht_(TM);if(this.Cm_==null){this.DIt_.iQ_(o);this.DIt_.rB_(l)}else{const t=this.Cm_ instanceof No?this.Cm_.Em_()+i*this.swt_:this.Ldt_[i],s=RA.cs_(typeof t=="number"?this.Cm_.getColor(t):this.Odt_.getColor());this.DIt_.iQ_(o.setColor(s));this.DIt_.rB_(this.Wdt_!=null?l:l.setColor(s))}this.DIt_.render(s)}lwt_(t,i,s,e){this.GBt_.x=this.Fdt_[t];this.GBt_.y=this.xdt_[t];const A=this.qBt_.scale;e.Ji_().transformPoint(this.GBt_,this.GBt_);const n=e.VR_();Gn.TI_(n/A,n/A,KM).transformPoint(this.GBt_,this.GBt_);const h=this.qBt_.gap,r=this.GBt_.x-this.Jdt_[t]/2-h,o=this.GBt_.y-this.Jdt_[t]/2-h,l=this.Jdt_[t]*A+h*2*n,u=l,a=(i*this.Pdt_+i*(i-1)*this.$Bt_/2+h*2*i)*A,g=(s*this.$1_+h*2*s)*A,c=(this.Pdt_+i*this.$Bt_+h*2)*A,I=c;this.qBt_.hK_.render(e,r,o,l,u,a,g,c,I)}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}else e=bC.select(this.getRoot(),t.x,t.y,i||10).filter(s);if(e.length===0)return null;const A=e[0].getData()["indices"];return A&&A.length!==0?A:null}uwt_(t){this.RBt_[t.state]=t.samples;t.samples||delete this.RBt_[t.state];this.qBt_=null;this.td_();return this}awt_(t){for(const i in t)t[i]!==void 0&&(this.kBt_[i]=qi(t[i],this.kBt_[i]));this.qBt_=null;this.td_();return this}gwt_(t){if(typeof this.Fdt_[t]!="number"||typeof this.xdt_[t]!="number")return null;const i=this.Odt_.clone(),s=hl.Wi_(this.Wdt_||{width:2});let e=0;if(this.Cm_ instanceof No){e=Math.floor((this.Ldt_[t]-this.HBt_)*this.iwt_/(this.Cm_.pm_()-this.Cm_.Em_()));e<0&&(e=0);this.Ldt_[t]>=this.KBt_&&this.Ldt_[t]>=this.Cm_.pm_()&&(e=this.iwt_-1)}else this.Cm_!==null&&(e=t);const A=this.Jdt_[t];if(this.Cm_==null){this.DIt_.iQ_(i);this.DIt_.rB_(s)}else{const t=this.Cm_ instanceof No?this.Cm_.Em_()+e*this.swt_:this.Ldt_[e],A=RA.cs_(typeof t=="number"?this.Cm_.getColor(t):this.Odt_.getColor());this.DIt_.iQ_(i.clone().setColor(A));this.DIt_.rB_(this.Wdt_!=null?s:s.setColor(A))}this.DIt_.dt_({ax:t<this.Fdt_.length?this.Fdt_[t]:NaN,ay:t<this.xdt_.length?this.xdt_[t]:NaN,width:A,height:A,painter:this.hk_,sizeisindevicespace:!0});return this.DIt_}cwt_(t){this.FBt_=t;return this}};i=t([_s("geotoolkit.controls.shapes.BubbleChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiYWRkRGF0YSI6IlBCdF8iLCJyZW1vdmVEYXRhIjoiVkJ0XyIsInNldFBhcmVudEJvdW5kcyI6InpCdF8iLCJnZXRQYXJlbnRCb3VuZHMiOiJYQnRfIiwic2V0Qm91bmRzIjoiaHRfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJ1cGRhdGVMaW1pdHMiOiJXal8iLCJnZXRBeGlzRGltZW5zaW9uWCI6ImpCdF8iLCJnZXRBeGlzRGltZW5zaW9uWSI6IlpCdF8iLCJpbnZhbGlkYXRlQ2FjaGUiOiJMQnRfIiwiZ2V0SW5kaWNlc0F0Ijoibnd0XyIsImhpdFRlc3QiOiIkWF8iLCJnZXRTeW1ib2xTaGFwZSI6Imd3dF8ifX19"),WM=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(PM.Ai_())}bi_(t,i){return t["attributename"]==="s-data"&&i instanceof OM}Yi_(t){const i=t.getData();return i?i["datas"]:null}apply(t){t.setData({datas:this.Ti_()})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(WM);const zM=1e-9,XM=new tn,jM=new tn,ZM=new Gn,_M=new xA,$M=10,tv=function(t,i,s,e){const A=i-t;return s>=e?[(s+e)/2,(s+e)/2]:e-s<A?[s,e]:t<s?[s,s+A]:i>e?[e-A,e]:[t,i]};var iv=Ci(function(){var i;let s=i=class t extends YC{constructor(t){super(t=Pi(t,{alignment:dA.re_,linestyle:"black",fillstyle:{color:"#f0f8ff",shadow:{enable:!0,color:"rgba(0, 0, 0, 0.5)",offsetx:2,offsety:2}},textstyle:{baseline:ka.mk_},ispointingup:!0,arrowsize:12,radius:3,padding:2},!0));this.Iwt_=t["arrowsize"];this.T2_=new gu;this.fwt_=null;this.Cwt_=!0;this.o6_=null;this.l6_=null;this.cH_=null;this.SE_(this.GE_());t["sizemode"]!=null&&this.PX_(t["sizemode"])}b_(t,i){i===!0&&super.b_(t,i);this.Iwt_=t.Iwt_;this.T2_.pN_(t.T2_.getX(),t.T2_.getY());this.fwt_=t.fwt_?t.fwt_.clone():null;this.Cwt_=t.Cwt_;return this}clone(){return Object.getPrototypeOf(this)!==i.prototype?Wi(this):(new i).b_(this,!0)}render(t){if(!this.tj_()&&this.getParent()){this.vX_();this.VX_(!0)}const i=this.sd_(),s=i!=null?t.uS_(i):t;this.Xb_(s);const e=this.UE_(),A=s.Ji_();this.vW_(s);const n=this.dwt_(),h=A.nI_(n.ye_(),n.De_()).clone();let r=Gn.JI_;if(e!==0){r=Gn.FI_(e,h.getX(),h.getY());Gn.multiply(r,A,ZM);s.dI_(ZM)}(this.ct_()!=null||this.gt_()!=null||s.tk_())&&this.FT_(s,A);if(this.getState()!=null&&this.Bwt_()&&!s.tk_()){this.IR_(A,ZM);const t=ZM.rn_(sa.RS_()).getCenter();ZM.setTranslate(ZM.EI_()+h.getX()-t.getX(),ZM.pI_()+h.getY()-t.getY());ZM.translate(0,1).scale(1/this.ij_(),1/this.sj_());Gn.multiply(r,ZM,ZM);s.dI_(ZM);this.getState().Ik_(s)}t.dI_(A);this.iN_(s)}SE_(t){if(!this.tj_()&&this.getParent()){this.vX_();this.VX_(!0)}const i=this.ej_()>0?this.ej_():this.Ie_(),s=this.Aj_()>0?this.Aj_():this.Ts_();let e=0,A=0;OC.jj_(t)&&(e=i/2);OC.Zj_(t)&&(e=-i/2);OC.zj_(t)&&(A=this.Iwt_+s/2);OC.Xj_(t)&&(A=-this.Iwt_-s/2);t===dA.he_&&(e+=this.Iwt_);t===dA.oe_&&(e-=this.Iwt_);this.T2_.pN_(e,A);return super.SE_(t)}move(t,i){this.td_();this.T2_.pN_(this.T2_.getX()+t,this.T2_.getY()+i);this.vn_().td_();return this}bK_(){return this.T2_.getX()}NK_(){return this.T2_.getY()}d$_(t,i){this.td_();this.T2_.pN_(t,i);this.vn_().td_();return this}translate(t,i){return this.gR_(this.uR_()+t,this.aR_()+i)}FT_(t,i){const s=this.getBounds(),e=this.dwt_(),A=this.lR_();if(isNaN(A.getX())||isNaN(A.getY()))return;const n=t.Ji_();t.iQ_(this.ct_(),s);t.rB_(this.gt_(),s);i.transformPoint(A,A);n.aI_(A,A);XM.rc_(A,e.getCenter());let h,r;const o=new lA,l=[e.we_(),e.Qe_(),e.Qe_(),e.we_()],u=[e.Ee_(),e.Ee_(),e.pe_(),e.pe_()],a=l.length;for(h=0;h<a;h++){r=(h+1)%a;jM.hc_().vs_(l[h],u[h]);jM.nc_().vs_(l[r],u[r]);if(jM.gc_(XM,null,o))break}_M.setSize(this.WX_(),this.WX_());const g=i.cI_(_M,_M),c=Math.min(g.Ie_(),e.Ie_()/2),I=Math.min(g.Ts_(),e.Ts_()/2),f=Math.max(c,bn.$c_($M,0,n)),C=Math.max(I,bn.$c_(0,$M,n));let d,B,w;switch(h){case 0:case 2:const t=bn.$c_(this.Iwt_,0,n)/2,i=tv(o.getX()-t,o.getX()+t,e.getX()+f,e.Qe_()-f);d=[e.getX()+c,i[0],A.getX(),i[1],e.Qe_()-c];B=[o.getY(),o.getY(),A.getY(),o.getY(),o.getY()];h===2&&d.reverse();break;case 1:case 3:const s=bn.$c_(0,this.Iwt_,n)/2,r=tv(o.getY()-s,o.getY()+s,e.getY()+C,e.pe_()-C);d=[o.getX(),o.getX(),A.getX(),o.getX(),o.getX()];B=[e.getY()+I,r[0],A.getY(),r[1],e.pe_()-I];h===3&&B.reverse();break;case 4:d=[e.getX()+c,e.Qe_()-c];B=[e.getY(),e.getY()]}t.beginPath();t.moveTo(d[0],B[0]);for(w=1;w<d.length;w++)t.lineTo(d[w],B[w]);const Q=[0,-1,0,1];for(w=0;w<a;w++){h=(h+1)%a;const i=l[h]+Q[(h+3)%a]*c,s=u[h]+Q[(h+2)%a]*I;t.lineTo(l[h]+Q[h]*c,u[h]+Q[(h+3)%a]*I).bezierCurveTo(l[h],u[h],i,s,i,s)}t.closePath();t.sQ_();t.stroke()}dR_(t){const i=this.ej_()>0?this.ej_():this.Ie_(),s=this.Aj_()>0?this.Aj_():this.Ts_();let e=new mA(0,0,i,s).Le_(this.XX_());this.WG_()&&t!=null&&t.gI_(e,e);e.me_(this.uR_(),this.aR_());let A=t?t.rn_(e,e):e;if(this.WG_()){this.T2_&&A.translate(this.T2_.getX(),this.T2_.getY());e=t?t.gI_(A,A):A}else{e=t?t.gI_(A,A):A;this.T2_&&e.translate(this.T2_.getX(),this.T2_.getY())}this.fwt_=e.clone();if(this.UE_()!==0){A=t?t.rn_(e,e):e;Gn.FI_(this.UE_(),A.ye_(),A.De_(),ZM);ZM.rn_(A,A);e=t?t.gI_(A,A):A}return e.fe_(this.uR_(),this.aR_())}dwt_(){this.fwt_==null&&this.dR_(this.if_());return this.fwt_}sd_(){return this.ut_()}ud_(t){const i=t.Ji_();if(this.cH_!==t.VR_()||this.fwt_==null||Math.abs(this.o6_/i.BI_()-1)>zM||Math.abs(this.l6_/i.sI_()-1)>zM){this.o6_=i.BI_();this.l6_=i.sI_();this.cH_=t.VR_();this.bounds=this.dR_(i)}const s=yu.hS_(t,this.gt_());return this.$C_()===!0&&su.gN_(this.getBounds(),this.ut_(),t.rS_(),s)}wwt_(t){if(this.Cwt_===t)return this;this.Cwt_=t;this.vn_();this.td_();return this}Bwt_(){return this.Cwt_}Qwt_(t){_M.setSize(t.Ie_(),t.Ts_());const i=this.if_()||Gn.JI_;this.WG_()&&this.if_().oI_(_M,_M);_M.Le_(-2*this.XX_());this.setSize(_M.Ie_(),_M.Ts_());const s=t.getCenter();if(this.WG_()){i.transformPoint(s,s);s.translate(-this.T2_.getX(),-this.T2_.getY());i.aI_(s,s)}else s.translate(-this.T2_.getX(),-this.T2_.getY());this.gR_(s);return this}vn_(t,i){this.fwt_=null;return super.vn_(t,i)}N_(){const t=super.N_();t["arrowsize"]=this.Iwt_;t["offset"]={x:this.bK_(),y:this.NK_()};return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["arrowsize"]!=null&&(this.Iwt_=t["arrowsize"]);t["offset"]!==void 0&&this.d$_(t["offset"].x,t["offset"].y);return this}};s=i=t([_s("geotoolkit.controls.shapes.Callout")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldEFuY2hvclR5cGUiOiJTRV8iLCJnZXRPZmZzZXRYIjoiYktfIiwiZ2V0T2Zmc2V0WSI6Ik5LXyIsImdldFRleHRCb3VuZHMiOiJkd3RfIiwiZ2V0V29ybGRUcmFuc2Zvcm0iOiJzZF8iLCJjaGVja0NvbGxpc2lvbiI6InVkXyIsInNldFRleHRWaXNpYmxlIjoid3d0XyIsImdldFRleHRWaXNpYmxlIjoiQnd0XyIsInNldFRleHRCb3VuZHMiOiJRd3RfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var sv=Ci({eG_:"north",AG_:"east",nG_:"south",sG_:"west"},2,"eyJOb3J0aCI6ImVHXyIsIkVhc3QiOiJBR18iLCJTb3V0aCI6Im5HXyIsIldlc3QiOiJzR18ifSAg");var ev=Ci(function(){let i=class t extends sI{constructor(t,i,s,e){super(t=Pi(t,{colorgroup:t instanceof sI?t:null,annotationgroup:i,coloritem:s,annotationitem:e},!0));this.Ewt_=t["colorgroup"];this.pwt_=t["coloritem"];this.mwt_=t["annotationgroup"];this.ywt_=t["annotationitem"];this.GY_([this.Ewt_,this.mwt_])}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(t["annotationgroup"]!==void 0){this.removeChild(this.mwt_);this.mwt_=t["annotationgroup"];this.GY_(this.mwt_)}if(t["colorgroup"]!==void 0){this.removeChild(this.Ewt_);this.Ewt_=t["colorgroup"];this.GY_(this.Ewt_)}t["coloritem"]!==void 0&&(this.pwt_=t["coloritem"]);t["annotationitem"]!==void 0&&(this.ywt_=t["annotationitem"]);return this}N_(){const t=super.N_();t["annotationgroup"]=this.mwt_;t["colorgroup"]=this.Ewt_;t["coloritem"]=this.pwt_;t["annotationitem"]=this.ywt_;return t}Dwt_(){return this.pwt_}Mwt_(t){if(this.ywt_!=null)switch(t){case sv.sG_:this.ywt_.LE_(yr.X_);this.ywt_.KZ_(Dr.X_);this.ywt_.setOrientation(fg.ax_);this.ywt_.Lq_(new mA(0,0,1,1));break;case sv.AG_:this.ywt_.LE_(yr.z_);this.ywt_.KZ_(Dr.z_);this.ywt_.setOrientation(fg.ax_);this.ywt_.Lq_(new mA(0,0,1,1));break;case sv.eG_:this.ywt_.LE_(yr.JQ_);this.ywt_.KZ_(Dr.JQ_);this.ywt_.setOrientation(fg.ux_);this.ywt_.Lq_(new mA(0,0,1,1));break;default:this.ywt_.LE_(yr.Top);this.ywt_.KZ_(Dr.Top);this.ywt_.setOrientation(fg.ux_);this.ywt_.Lq_(new mA(0,0,1,1));break}}getItems(t){return t?[this.Ewt_,this.mwt_]:[this.mwt_,this.Ewt_]}de_(t,i,s){this.ft_(new Aa({width:void 0,height:s}));this.Ewt_.ft_(new Aa({width:t,height:void 0}));this.mwt_.ft_(new Aa({width:i,height:void 0}))}Be_(t,i,s){this.ft_(new Aa({height:void 0,width:s}));this.Ewt_.ft_(new Aa({height:t,width:void 0}));this.mwt_.ft_(new Aa({height:i,width:void 0}))}iQ_(t,i){this.Ewt_.iQ_(t,i);return this}};i=t([_s("geotoolkit.controls.shapes.ColorAnnotation")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwic2V0RmlsbFN0eWxlIjoiaVFfIn19fSAg");var Av=Ci(function(){var i;let s=i=class t extends dp{constructor(t,i,s,e,A){super(0,0,1,1);this.rB_(s);this.Cm_=t;this.vwt_=i;this.bft_=typeof e!="number"||isNaN(e)?t?.Em_()||0:e;this.Nft_=typeof A!="number"||isNaN(A)?t?.pm_()||1:A;this.bwt_()}clone(){return new i(this.Cm_,this.vwt_,this.gt_(),this.bft_,this.Nft_)}Nwt_(){return this.vwt_}Mwt_(t){if(this.vwt_===t)return this;this.vwt_=t;this.bwt_();return this}Swt_(){return this.Cm_}UBt_(t){this.Cm_=t;this.bwt_();return this}Gwt_(t,i){if(this.bft_===t&&this.Nft_===i)return this;this.bft_=t;this.Nft_=i;this.td_();this.bwt_();return this}nA_(){return this.bft_}hA_(){return this.Nft_}bwt_(){let t,i;if(this.Cm_==null)return this;if(this.Nft_===this.bft_){const t=this.Cm_.getColor(this.bft_);t&&this.iQ_(new wr(t.ps_()));return this}const s=isFinite(this.Nft_)&&this.Cm_.getColor(this.Nft_)?this.Cm_.getColor(this.Nft_).ps_():null,e=isFinite(this.bft_)&&this.Cm_.getColor(this.bft_)?this.Cm_.getColor(this.bft_).ps_():null;if(s!=null&&e==null){this.iQ_(new wr(s));return this}if(s==null&&e!=null){this.iQ_(new wr(e));return this}const A=s==null&&e==null,n=1/(this.Nft_-this.bft_),h=A?0:n*(this.Cm_.Em_()-this.bft_),r=A?1:n*(this.Cm_.pm_()-this.bft_);if(this.vwt_===sv.sG_||this.vwt_===sv.AG_){t=new lA(.5,h);i=new lA(.5,r)}else{t=new lA(h,.5);i=new lA(r,.5)}const o=new Fo({startpoint:t,endpoint:i,colorprovider:A?void 0:this.Cm_,startcolor:A?void 0:e,endcolor:A?void 0:s});this.iQ_(o);return this}N_(){const t=super.N_();t["colorprovider"]=this.Cm_;t["colorbarlocation"]=this.vwt_;t["min"]=this.bft_;t["max"]=this.Nft_;return t}dt_(t){if((t=Es(t))==null)return this;t["colorprovider"]!==void 0&&(this.Cm_=t["colorprovider"]);t["colorbarlocation"]!==void 0&&(this.vwt_=t["colorbarlocation"]);t["min"]!==void 0&&(this.bft_=t["min"]);t["max"]!==void 0&&(this.Nft_=t["max"]);this.bwt_();return this}};s=i=t([_s("geotoolkit.controls.shapes.ColorBox")],s);return s}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const nv={NegativeInfinity:"-∞",PositiveInfinity:"+∞"},hv=new YC,rv="...",ov=function(t,i,s,e,A,n){const h=i.dn_();if(h==="∞"){if(A!==1)return null}else if(h==="+∞"){if(n!==1)return null}else if(A!==0)return null;const r=e.mE_().rn_(e.dE_()),o=hv.mX_(!0).pX_(r.Ie_(),r.Ts_()).PX_(NC.hX_).a_(h).JW_();return o!==rv?o:null},lv=function(t){const i={},s=undefined;["min","max","flip","title","axis","colorbox","range","namedcolors","componentsizes","titletext","titletextstyle","location","linestyle","colorprovider","tickgenerator","preciselimits"].forEach((s=>{t.hasOwnProperty(s)&&(i[s]=t[s])}));return i};var uv=Ci({Rwt_:"LocationChanged"},2,"eyJMb2NhdGlvbkNoYW5nZWQiOiJSd3RfIn0g"),av=Ci(function(){var i;let s=i=class t extends sI{constructor(t){(t=t||{})["clipping"]=!0;super(t);this.UU_=null;this.kwt_=null;this.Fwt_=null;this.pZ_=null;this.xwt_=null;this.NZ_=new WC({preciselimits:t["preciselimits"]||!1});this.Lwt_=null;this.Uwt_=null;this.Ewt_=null;this.Ywt_=null;this.Twt_="33%";this.Kwt_="50%";this.Hwt_="50%";this.qwt_="8%";this.Jwt_={};this.yb_=null;this.Pwt_=null;this.Vwt_=null;this.yx_=null;this.Owt_=null;this.Wwt_=null;this.setOptions(t)}clone(){const t=Pi(this.JV_(),{});t["axis"]&&t["axis"]["item"]&&(t["axis"]["item"]=t["axis"]["item"].clone());return new i(t).ft_(this.NS_())}setOptions(t){if((t=lv(t))["min"]>t["max"]){const i=t["min"];t["min"]=t["max"];t["max"]=i;t["flip"]===void 0&&(t["flip"]=this.JV_()==null||this.JV_()["flip"])}else t["flip"]===void 0&&(t["flip"]=this.JV_()!=null&&this.JV_()["flip"]);this.UU_!=null&&(t=Pi(t,this.UU_));if((t=qi(t,{title:{},axis:{},colorbox:{},range:{},namedcolors:{}}))["componentsizes"]!=null){t["componentsizes"]["title"]!=null&&(t["title"]["size"]=t["componentsizes"]["title"]);t["componentsizes"]["colorbox"]!=null&&(t["colorbox"]["size"]=t["componentsizes"]["colorbox"]);t["componentsizes"]["axis"]!=null&&(t["axis"]["size"]=t["componentsizes"]["axis"]);t["componentsizes"]["namedcolors"]!=null&&(t["namedcolors"]["size"]=t["componentsizes"]["namedcolors"])}t["min"]!=null&&(t["range"]["min"]=t["min"]);t["max"]!=null&&(t["range"]["max"]=t["max"]);t["titletext"]!=null&&(t["title"]!=null?t["title"]["text"]=t["titletext"]:t["title"]={text:t["titletext"]});t["titletextstyle"]!=null&&(t["title"]!=null?t["title"]["textstyle"]=t["titletextstyle"]:t["title"]={textstyle:t["titletextstyle"]});let i=t["title"];if(i!=null){i=qi(i,{size:void 0,visible:!0,item:new YC("",.5,.5,void 0,void 0,new qa,!0)});i["text"]&&i["item"].a_(i["text"]);i["textstyle"]&&i["item"].g_(i["textstyle"]);i["item"].sR_(!0);i["item"].OG_(!1);i["item"].mX_(!0)}let s=t["axis"];s=qi(s,{visible:!0,size:void 0,item:this.Fwt_||new nd,autolabelrotation:!1,visiblebaseline:!0});const e=qi(t["colorbox"],{visible:!0,size:void 0,linestyle:null,independentrange:!1});(t=qi(t,{location:sv.AG_,flip:!1,linestyle:null}))["colorprovider"]=t["colorprovider"]||new bo;t["axis"]=s;t["title"]=i;t["colorbox"]=e;this.UU_=t;this.kwt_||(this.kwt_=(new dp).KC_(!1));this.kwt_.rB_(t["linestyle"]);t["range"]["min"]==null&&(t["range"]["min"]=t["colorprovider"].Em_());t["range"]["max"]==null&&(t["range"]["max"]=t["colorprovider"].pm_());let A=t["range"]["min"],n=t["range"]["max"];this.zwt_(t["axis"]["item"]);t["axis"]["visible"]!==void 0&&this.Lwt_.nf_(t["axis"]["visible"]);t["axis"]["autolabelrotation"]!==void 0&&this.Fwt_.Y__(t["axis"]["autolabelrotation"]);t["axis"]["autolabelrotationangle"]!=null&&this.Fwt_.U__(t["axis"]["autolabelrotationangle"]);t["axis"]["title"]!=null&&this.Fwt_.E__(t["axis"]["title"]);if(t["axis"]["baseline"]!==void 0){const i={};t["axis"]["baseline"]["visible"]!==void 0&&(i["visiblebaseline"]=t["axis"]["baseline"]["visible"]);t["axis"]["baseline"]["linestyle"]!==void 0&&(i["baselinestyle"]=t["axis"]["baseline"]["linestyle"]);this.Fwt_.dt_(i)}if(t["axis"]["tickgenerator"]!==void 0){const i={tickgenerator:t["axis"]["tickgenerator"]};this.Fwt_.dt_(i)}let h=t["colorprovider"],r;(h instanceof Go||h instanceof ko)&&(h.oy_()!==So.Ay_&&h.oy_()!==Ro.Ay_||this.Fwt_.ZZ_()instanceof fd||this.jZ_(new fd));t["tickgenerator"]!=null&&t["tickgenerator"]instanceof Qg&&this.jZ_(t["tickgenerator"]);if(h instanceof Zm&&h.oy_()===jm.mlt_){const i=h.N_(),s=i["values"],e=i["colors"];A=0;n=s.length;const o=[],l=[],u=[];for(r=0;r<n;r+=1){if(r===0){const t=s[0].Xs_();l.push(t!==-1/0?t:"");u.push(r)}const t=s[r].zs_();l.push(t!==1/0?t:"");u.push(r+1);o.push(new fA(r,r+1))}h=new Zm({values:o,colors:e}).ym_(Eo.NaN,h.Mm_(Eo.NaN)).ym_(Eo.im_,h.Mm_(Eo.im_)).ym_(Eo.sm_,h.Mm_(Eo.sm_));t["colorprovider"]=h;const a=new iB({labels:l,positions:u}).wY_("major",null).wY_("minor",null).wY_("edge",null);this.jZ_(a)}t["axis"]["labelrotation"]!=null&&this.Fwt_.ZZ_().Wx_("edge",t["axis"]["labelrotation"]).Wx_("major",t["axis"]["labelrotation"]);t["axis"]["size"]!==void 0&&(this.Kwt_=t["axis"]["size"]);t["axis"]["hideoverlappedtext"]!=null&&this.Fwt_.a__(t["axis"]["hideoverlappedtext"]);this.pZ_=t["title"]["item"];if(this.Xwt_)this.Xwt_.JY_(0,this.pZ_);else{this.Xwt_=(new sI).cq_(new ww);this.Xwt_.GY_(this.pZ_)}t["title"]["visible"]!==void 0&&this.Xwt_.nf_(t["title"]["visible"]);t["title"]["size"]!==void 0&&(this.Twt_=t["title"]["size"]);this.xwt_==null&&(this.xwt_=new Av(t["colorprovider"],t["location"],t["colorbox"]["linestyle"],A,n).ce_(0,0,1,1));t["colorbox"]["visible"]!=null&&this.xwt_.nf_(t["colorbox"]["visible"]);const o=t["colorprovider"];o!==void 0&&this.xwt_.UBt_(o);t["location"]!==void 0&&this.xwt_.Mwt_(t["location"]);t["colorbox"]["linestyle"]!==void 0&&this.xwt_.rB_(t["colorbox"]["linestyle"]);e["independentrange"]===!0&&o!=null?this.xwt_.Gwt_(o.Em_(),o.pm_()):this.xwt_.Gwt_(A,n);if(t["preciselimits"]!==void 0){this.Fwt_.KE_(this.NZ_);this.NZ_.setOptions(t);A=this.xwt_.nA_();n=this.xwt_.hA_();this.Fwt_.V__(A,n)}if(!this.Uwt_){this.Uwt_=new sI;this.Uwt_.Lq_(new mA(0,0,1,1));this.Uwt_.GY_(this.xwt_)}this.Ewt_||(this.Ewt_=new ev(this.Uwt_,this.Lwt_));if(!this.Ywt_){this.Ywt_=new sI;this.Ywt_.GY_(this.Ewt_)}t["colorbox"]["size"]!==void 0&&(this.Hwt_=t["colorbox"]["size"]);t["namedcolors"]["size"]!==void 0&&(this.qwt_=t["namedcolors"]["size"]);this.jwt_=t["namedcolors"]["visible"];if(this.qY_()<1){const t=[this.Ywt_,this.Xwt_,this.kwt_];this.GY_(t)}if(o!=null&&this.jwt_){const i=o.vm_();let s;for(r=0;r<i.length;r++){s=i[r];s["name"]!==Eo.NaN&&s["name"]!==Eo.im_&&s["name"]!==Eo.sm_||this.Zwt_(s,t["colorbox"]["linestyle"])}}this.Mwt_(t["location"]);this.Wwt_!==t["flip"]&&this._wt_(t["flip"]);return this}Zwt_(t,i){let s=null,e=this.Jwt_[t["name"]],A=t["value"];const n=t["name"];let h=nv[n]!=null?nv[n]:n;if(A!=null&&A.hasOwnProperty("value")){A["title"]!==void 0&&(h=A["title"]);A=A["value"]}if(e!=null){s=e.Dwt_();if(s!=null){s.rB_(i).iQ_(A);return e}}s=new dp(0,0,1,1,void 0,void 0,!0,i,A);const r=(new sI).Lq_(new mA(0,0,1,1)).GY_(s),o=(new nd).HC_(h);o.ZZ_().Hx_("major",!1).Hx_("minor",!1).Yx_(ov);const l=(new sI).Lq_(new mA(0,0,1,1)).GY_(o);e=new ev(r,l,s,o);this.Ywt_.xY_(0,e);this.Jwt_[t["name"]]=e;return e}JV_(){return this.UU_}wq_(t){this.vG_(!1);const i=this.bG_();if(!i)return this;const s=this.rt_();if(!s)return this;const e=new mA(s);i.ce_(e);this.kwt_.ce_(e);i.eT_();return this}Mwt_(t){const i=this.rt_(),s=fg;let e,A,n,h=this.xwt_.nA_(),r=this.xwt_.hA_();const o=this.Fwt_.ZZ_();o.off(dg.sC_,this.oQ_());if(h!==r&&isFinite(h)&&isFinite(r)&&isFinite(r-h)){o.Hx_("major",this.Pwt_);o.Hx_("minor",this.Vwt_);o.Yx_(this.yx_)}else{h=.1;r=1;const t=this.xwt_.nA_().toString(),i=this.xwt_.hA_().toString();o.Hx_("major",!1);o.Hx_("minor",!1);o.Yx_((function(s,e,A,n,h,r){return n.RE_()!=="edge"?"":h===0?t:i}))}o.on(dg.sC_,this.oQ_());const l=this.xwt_.Swt_();if(l instanceof Go&&l.oy_()===So.Ay_||l instanceof ko&&l.oy_()===Ro.Ay_){h=l.hy_(h);r=l.hy_(r)}const u=this.Owt_;let a=!1,g=ww;switch(t){case ha.sG_:case sv.sG_:this.Owt_=sv.sG_;e=new lw(i);A=new lw;n=new ww;e.add([this.Xwt_,this.Ywt_]);A.add(this.Ewt_.getItems());g=lw;this.Fwt_.LE_(yr.X_);this.Fwt_.KZ_(Dr.X_);this.Fwt_.setOrientation(s.ax_);this.Fwt_.Lq_(new mA(0,h,1,r));this.pZ_.c_(-Math.PI/2);break;case ha.AG_:case sv.AG_:this.Owt_=sv.AG_;e=new lw(i);A=new lw;n=new ww;e.add([this.Ywt_,this.Xwt_]);A.add(this.Ewt_.getItems(!0));a=!0;g=lw;this.Fwt_.LE_(yr.z_);this.Fwt_.KZ_(Dr.z_);this.Fwt_.setOrientation(s.ax_);this.Fwt_.Lq_(new mA(0,h,1,r));this.pZ_.c_(-Math.PI/2);break;case ha.eG_:case sv.eG_:this.Owt_=sv.eG_;e=new ww(i);A=new ww;n=new lw;e.add([this.Xwt_,this.Ywt_]);A.add(this.Ewt_.getItems());this.Fwt_.LE_(yr.JQ_);this.Fwt_.KZ_(Dr.JQ_);this.Fwt_.setOrientation(s.ux_);this.Fwt_.Lq_(new mA(h,0,r,1));this.pZ_.c_(0);break;default:this.Owt_=sv.nG_;e=new ww(i);A=new ww;n=new lw;e.add([this.Ywt_,this.Xwt_]);A.add(this.Ewt_.getItems(!0));a=!0;this.Fwt_.LE_(yr.Top);this.Fwt_.KZ_(Dr.Top);this.Fwt_.setOrientation(s.ux_);this.Fwt_.Lq_(new mA(h,0,r,1));this.pZ_.c_(0);break}for(const t in this.Jwt_)if(this.Jwt_.hasOwnProperty(t)){const i=new g;i.add(this.Jwt_[t].getItems(a));this.Jwt_[t].cq_(i);this.Jwt_[t].Mwt_(this.Owt_)}const c=[];this.Jwt_[Eo.NaN]!=null&&c.push(this.Jwt_[Eo.NaN]);this.Jwt_[Eo.im_]!=null&&c.push(this.Jwt_[Eo.im_]);c.push(this.Ewt_);this.Jwt_[Eo.sm_]!=null&&c.push(this.Jwt_[Eo.sm_]);n.add(c);this.xwt_.Mwt_(t);this.$wt_(e);this.cq_(e);this.Ywt_.cq_(n);this.Ewt_.cq_(A);this._wt_(this.Wwt_);u!==this.Owt_&&this.notify(uv.Rwt_,this,this.Owt_);return this}Nwt_(){return this.Owt_}tQt_(){switch(this.Owt_){case sv.AG_:return ha.AG_;case sv.sG_:return ha.sG_;case sv.eG_:return ha.eG_;default:return ha.nG_}}$wt_(t){if(!t)return this;let i,s=this.Hwt_+this.Kwt_;!isNaN(s)&&isFinite(s)||(s=void 0);if(t instanceof lw){this.Ywt_.ft_(new Aa({width:s,height:void 0}));this.Ewt_.de_(this.Hwt_,this.Kwt_);this.Xwt_.ft_(new Aa({width:this.Twt_,height:void 0}));for(i in this.Jwt_)this.Jwt_.hasOwnProperty(i)&&this.Jwt_[i].de_(this.Hwt_,this.Kwt_,this.qwt_)}else{this.Ywt_.ft_(new Aa({height:s,width:void 0}));this.Ewt_.Be_(this.Hwt_,this.Kwt_);this.Xwt_.ft_(new Aa({height:this.Twt_,width:void 0}));for(const t in this.Jwt_)this.Jwt_.hasOwnProperty(t)&&this.Jwt_[t].Be_(this.Hwt_,this.Kwt_,this.qwt_)}return this}N_(){const t=super.N_();t["min"]=this.UU_["min"];t["max"]=this.UU_["max"];t["flip"]=this.UU_["flip"];t["colorprovider"]=this.UU_["colorprovider"];t["location"]=this.Owt_;t["namedcolors"]={size:this.qwt_,visible:this.jwt_};t["range"]={min:this.xwt_.nA_(),max:this.xwt_.hA_()};t["title"]={item:this.pZ_};t["axis"]={item:this.Fwt_};t["colorbox"]={size:this.Hwt_,visible:this.xwt_.$C_(),linestyle:this.xwt_.gt_()};t["titletextstyle"]=this.UU_["title"]["textstyle"];t["titlesize"]=this.UU_["title"]["size"];t["titletext"]=this.UU_["title"]["text"];t["titlevisible"]=this.UU_["title"]["visible"];t["titleitem"]=this.UU_["title"]["item"];t["axisautolabelrotation"]=this.UU_["axis"]["autolabelrotation"];t["axisautolabelrotationangle"]=this.UU_["axis"]["autolabelrotationangle"];t["axissize"]=this.UU_["axis"]["size"];t["axisvisible"]=this.UU_["axis"]["visible"];t["axistitle"]=this.UU_["axis"]["title"];t["axisitem"]=this.UU_["axis"]["item"];if(this.Fwt_!=null){t["axisbaselinevisible"]=this.Fwt_.OZ_();t["axisbaselinestyle"]=this.Fwt_.VZ_()}t["colorboxindependentrange"]=this.UU_["colorbox"]["independentrange"];t["colorboxlinestyle"]=this.UU_["colorbox"]["linestyle"];t["colorboxsize"]=this.UU_["colorbox"]["size"];t["preciselimits"]=this.UU_["preciselimits"];return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);const i={axis:{},colorbox:{}};Pi(t,i);this.setOptions(i);return this}_wt_(t){this.Wwt_=t;if(this.Owt_===sv.sG_||this.Owt_===sv.AG_){this.pq_(!1);this.Eq_(t)}else{this.pq_(t);this.Eq_(!1)}this.vn_();return this}zwt_(t){if(t===this.Fwt_)return this;if(this.Lwt_){if(t!==void 0&&this.Fwt_!==t){this.Fwt_!=null&&this.Lwt_.removeChild(this.Fwt_);this.Fwt_=t;if(this.Fwt_!=null){this.Fwt_.ht_(this.Lwt_.rt_());this.Lwt_.GY_(this.Fwt_)}}}else{this.Lwt_=(new sI).Lq_(new mA(0,0,1,1));this.Fwt_=t;this.Fwt_.ht_(this.Lwt_.rt_());this.Lwt_.GY_(this.Fwt_)}this.Fwt_=t;const i=this.Fwt_.ZZ_();if(i){i.on(dg.sC_,this.oQ_());this.Pwt_=i.qx_("major");this.Vwt_=i.qx_("minor");this.yx_=i.Tx_()}return this}ZZ_(){return this.Fwt_.ZZ_()}jZ_(t){let i=this.ZZ_();if(i===t)return this;i&&i.off(dg.sC_,this.oQ_());this.Fwt_.jZ_(t);i=this.Fwt_.ZZ_();if(i){i.on(dg.sC_,this.oQ_());this.Pwt_=i.qx_("major");this.Vwt_=i.qx_("minor");this.yx_=i.Tx_()}this.vn_().td_();return this}oQ_(){this.yb_===null&&(this.yb_=(t,i,s)=>{const e=this.ZZ_();this.Pwt_=e.qx_("major");this.Vwt_=e.qx_("minor");this.yx_=e.Tx_();return this});return this.yb_}iQt_(){return this.Wwt_}sQt_(t){const i=this.xwt_.Swt_().Em_(),s=this.xwt_.Swt_().pm_();let e=0;const A=this.R__(),n=this.getBounds(),h=A?n.Ie_():n.Ts_();t<i?t=-1/0:t>s&&(t=1/0);e=Number.isFinite(t)?this.eQt_(t,h,i,s):this.AQt_(t,h);return e<0||e>h?-1/0:A?n.getX()+e:n.getY()+e}R__(){const t=this.Nwt_();return t===sv.eG_||t===sv.nG_}AQt_(t,i){let s=i,e=-1;const A=this.iQt_(),n=this.xwt_.Swt_(),h=n?.Mm_(Eo.im_)!=null,r=n?.Mm_(Eo.sm_)!=null,o=this.xwt_.Swt_().Mm_(Eo.NaN)!=null,l=parseInt(String(this.qwt_));if(!this.jwt_)return e;switch(t){case 1/0:if(!r)return-1;h&&(s-=l);o&&(s-=l);if(s<0)return-1;s-=l;e=s<0?A?l/2+s:i-s-l/2:A?l/2:i-l/2;break;case-1/0:if(!h)return-1;e=o?A?i-3*l/2:3*l/2:A?i-l/2:l/2;break;default:if(!o)return-1;e=A?i-l/2:l/2;break}return e}eQt_(t,i,s,e){let A=!1,n=i,h=0;const r=this.iQt_(),o=this.xwt_.Swt_(),l=o?.Mm_(Eo.im_)!=null,u=o?.Mm_(Eo.sm_)!=null,a=o?.Mm_(Eo.NaN)!=null,g=parseInt(String(this.qwt_));if(this.jwt_){if(l){h+=r?0:g;n-=g}if(a){h+=r?0:g;n-=g}if(n<0)return-1;if(u){h+=r?g:0;n-=g}if(n<0){n=1;A=!0}}let c=n*(t-s)/(e-s);if(r)if(A){c=i;l&&(c-=g);a&&(c-=g)}else c=n-c;A||(c+=h);return c}};s=i=t([_s("geotoolkit.controls.shapes.ColorBar")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwidXBkYXRlTGF5b3V0Ijoid3FfIiwiZ2V0TG9jYXRpb24iOiJOd3RfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFRpY2tHZW5lcmF0b3IiOiJaWl8iLCJzZXRUaWNrR2VuZXJhdG9yIjoialpfIiwiZ2V0SW52YWxpZGF0ZU1ldGhvZCI6Im9RXyIsImdldFBvaW50QXRWYWx1ZSI6InNRdF8ifX19");const gv=/*#__PURE__*/function(t,i,s){const e=t.ct_();let A;const n=i.we_(),h=i.Ee_(),r=i.Ie_(),o=i.Ts_();if(e!=null){A=new nA(e.getColor());e.setColor(ph.Xd_(A,-.5).Es_());s.iQ_(e,i)}s.yR_(n,h,r,o);const l=s.Ji_(),u=1/l.Zc_(),a=1/l._c_();if(e!=null){e.setColor(A.Es_());s.iQ_(e,i)}s.yR_(n+.5*u,h+.5*a,r-2*u,o-2*a);if(e!=null){e.setColor(ph.Xd_(ph.Xd_(A,.5),.5).Es_());s.iQ_(e,i)}s.yR_(n+1.5*u,h+1.5*a,r-5*u,o-5*a);e!=null&&e.setColor(A)};Xi(gv,"geotoolkit.scene.shapes.painters.CrossPlotPainter");const cv=new ma({fillstyle:"transparent",linestyle:"transparent"}),Iv=1;var fv=Ci(function(){let i=class t extends Au{constructor(t,i,s,e,A){super();this._root=t;this._x=i.data;this._y=s.data;this.nQt_=i.log;this.hQt_=s.log;this.m$_=e;this.f1_=A;this.u7_=[];this.g7_=!1;this.reset()}reset(){this.g7_=!1;this.rQt_=0;this.oQt_=0;this.lQt_=-1;this.uQt_=null;this.aQt_=null;this.u7_=[];this.c7_(this._root);return this}Hs_(){if(this.aQt_!=null)return!0;for(;this.rQt_<this.u7_.length;this.rQt_++){if(this.rQt_!==this.lQt_){this.uQt_=this.u7_[this.rQt_];this.g7_=this.m$_.Fe_(this.uQt_.getBounds().getX(),this.uQt_.getBounds().getY(),this.uQt_.getBounds().Ie_(),this.uQt_.getBounds().Ts_())}while(this.oQt_<this.uQt_.yBt_){this.aQt_=this.uQt_.gQt_[this.oQt_++];if(this.g7_){this.lQt_=this.rQt_;if(!this.m$_.contains(this.nQt_?NA.log10(this._x[this.aQt_-this._root.B$_()]):this._x[this.aQt_-this._root.B$_()],this.hQt_?NA.log10(this._y[this.aQt_-this._root.B$_()]):this._y[this.aQt_-this._root.B$_()]))continue;return!0}if(this.m$_.contains(this.nQt_?NA.log10(this._x[this.aQt_-this._root.B$_()]):this._x[this.aQt_-this._root.B$_()],this.hQt_?NA.log10(this._y[this.aQt_-this._root.B$_()]):this._y[this.aQt_-this._root.B$_()])){this.lQt_=this.rQt_;return!0}}this.oQt_=0}this.aQt_=null;return!1}c7_(t){if(t!=null&&t.getBounds().$s_(this.m$_))if(this.f1_){t.yBt_>0&&this.u7_.push(t);this.c7_(t.j9_);this.c7_(t.Z9_);this.c7_(t._9_);this.c7_(t.$9_)}else{this.c7_(t.j9_);this.c7_(t.Z9_);this.c7_(t._9_);this.c7_(t.$9_);t.yBt_>0&&this.u7_.push(t)}}next(){if(this.Hs_()){const t=this.aQt_;this.aQt_=null;return t-this._root.B$_()}return null}filter(t){const i=[];this.reset();while(this.Hs_()){const s=this.next();t(s)&&i.push(s)}return i}forEach(t){this.reset();while(this.Hs_())t(this.next());return this}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJoYXNOZXh0IjoiSHNfIn19fSAg"),Cv=function(){var t=class{constructor(t,i){this.gQt_=[];this.X9_=i;this.m$_=t;this.j9_=null;this.Z9_=null;this._9_=null;this.$9_=null;this.yBt_=0;this.t2_=0;this.T2_=0}getBounds(){return this.m$_}ht_(t){if(this.m$_==null||!this.m$_.Ce_(t)){this.m$_=t;this.j9_=null;this.Z9_=null;this._9_=null;this.$9_=null;this.yBt_=0;this.t2_=0;this.T2_=0}}clear(){this.gQt_=[];this.yBt_=0;this.t2_=0;this.T2_=0;this.j9_!=null&&this.j9_.clear();this.Z9_!=null&&this.Z9_.clear();this._9_!=null&&this._9_.clear();this.$9_!=null&&this.$9_.clear();return this}B$_(){return this.T2_}d$_(t){this.T2_=t;return this}remove(t){const i=this.t2_;if(this.yBt_>0){const i=t+this.T2_;let s=-1;for(let t=0;t<this.yBt_;++t)this.gQt_[t]===i?s=t:this.gQt_[t]>i&&this.gQt_[t]--;if(s!==-1){this.gQt_.splice(s,1);this.t2_-=1;this.yBt_-=1}}this.j9_!=null&&(this.t2_-=this.j9_.remove(t));this.Z9_!=null&&(this.t2_-=this.Z9_.remove(t));this._9_!=null&&(this.t2_-=this._9_.remove(t));this.$9_!=null&&(this.t2_-=this.$9_.remove(t));return i===this.t2_?0:1}shift(){const t=this.t2_;if(this.yBt_>0&&this.gQt_[0]===this.T2_){this.t2_-=1;this.yBt_-=1;this.gQt_.splice(0,1)}this.T2_++;this.j9_!=null&&(this.t2_-=this.j9_.shift());this.Z9_!=null&&(this.t2_-=this.Z9_.shift());this._9_!=null&&(this.t2_-=this._9_.shift());this.$9_!=null&&(this.t2_-=this.$9_.shift());return t===this.t2_?0:1}GY_(i,s,e){if(isNaN(e))return this;this.t2_+=1;if(this.X9_===0){this.gQt_[this.yBt_]=e+this.T2_;this.yBt_++;return this}if(this.j9_==null){const i=this.m$_,s=this.X9_;this.j9_=new t(new mA(i.x,i.y,i.x+i.width/2,i.y+i.height/2),s-1).d$_(this.T2_);this.Z9_=new t(new mA(i.x+i.width/2,i.y,i.x+i.width,i.y+i.height/2),s-1).d$_(this.T2_);this._9_=new t(new mA(i.x,i.y+i.height/2,i.x+i.width/2,i.y+i.height),s-1).d$_(this.T2_);this.$9_=new t(new mA(i.x+i.width/2,i.y+i.height/2,i.x+i.width,i.y+i.height),s-1).d$_(this.T2_)}if(this.j9_.m$_.contains(i,s))this.j9_.GY_(i,s,e);else if(this.Z9_.m$_.contains(i,s))this.Z9_.GY_(i,s,e);else if(this._9_.m$_.contains(i,s))this._9_.GY_(i,s,e);else if(this.$9_.m$_.contains(i,s))this.$9_.GY_(i,s,e);else{this.gQt_[this.yBt_]=e;this.yBt_++}return this}IN_(t,i,s){return new fv(this,i,s,t,!1)}J2_(t,i,s){const e=t.getBounds();let A=[];if(this.m$_.$s_(e)){for(let e=0;e<this.yBt_;e++){const n=this.gQt_[e];t.contains(i[n],s[n])&&A.push(n-this.T2_)}this.j9_!=null&&(A=A.concat(this.j9_.J2_(t,i,s)));this.Z9_!=null&&(A=A.concat(this.Z9_.J2_(t,i,s)));this._9_!=null&&(A=A.concat(this._9_.J2_(t,i,s)));this.$9_!=null&&(A=A.concat(this.$9_.J2_(t,i,s)))}return A}};return t}();const dv=new mA(0,0,0,0),Bv=10,wv=4;var Qv=Ci(function(){let i=class t extends eE{constructor(t){const i={datax:[],minx:Number.NaN,maxx:Number.NaN,datay:[],miny:Number.NaN,maxy:Number.NaN,dataz:void 0,logx:!1,logy:!1,logz:!1,colorprovider:null,defaultcolor:"rgba(60,60,60,1)",defaultlinecolor:null,highlightcolor:"rgba(255,0,255,1)",symbolsize:8,painter:gv};super(new mA(0,0,1,1));this.cQt_=1;this.IQt_=0;this.fQt_=[];this.CQt_=[];this.dQt_=null;this.BQt_=8;this.wQt_=10;this.QQt_=15;this.EQt_=[];this.pQt_=!1;this.mQt_=this.BQt_;this.yQt_=()=>{this.DBt_=!1};this.RBt_=[];this.kBt_={};this.DQt_=[];this.MQt_=[];this.vQt_=null;this.bQt_=null;this.DBt_=!1;this.NQt_=[];this.SQt_=new xA;this.GQt_=new xA;this.setData(qi(t,i,!0));this.pP_=!1}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setData(t);return this}setData(t){(t=qi(t,{datax:this.RQt_||[],minx:t["minx"]!=null?t["minx"]:this.kQt_,maxx:t["maxx"]!=null?t["maxx"]:this.FQt_,datay:this.xQt_||[],miny:t["miny"]!=null?t["miny"]:this.LQt_,maxy:t["maxy"]!=null?t["maxy"]:this.UQt_,dataz:this.YQt_||[],logx:t["logx"]!=null?t["logx"]:this.nQt_,logy:t["logy"]!=null?t["logy"]:this.hQt_,logz:t["logz"]!=null?t["logz"]:this.TQt_,colorprovider:t["colorprovider"]instanceof Mo?t["colorprovider"]:this.KQt_,defaultcolor:typeof t["defaultcolor"]=="string"?t["defaultcolor"]:this.HQt_,defaultlinecolor:t["defaultlinecolor"]===null||typeof t["defaultlinecolor"]=="string"?t["defaultlinecolor"]:this.vQt_,highlightcolor:typeof t["highlightcolor"]=="string"?t["highlightcolor"]:this.qQt_,symbolsize:typeof t["symbolsize"]=="number"?t["symbolsize"]:this.BQt_,painter:t["painter"]!=null?t["painter"]:this.hk_,x:t["x"]!=null?t["x"]:{},y:t["y"]!=null?t["y"]:{},z:t["z"]!=null?t["z"]:{},size:t["size"]!=null?t["size"]:{},symbol:t["symbol"]!=null?t["symbol"]:{}}))["x"]["data"]!=null&&(t["datax"]=t["x"]["data"]);t["x"]["min"]!=null&&(t["minx"]=t["x"]["min"]);t["x"]["max"]!=null&&(t["maxx"]=t["x"]["max"]);t["y"]["data"]!=null&&(t["datay"]=t["y"]["data"]);t["y"]["min"]!=null&&(t["miny"]=t["y"]["min"]);t["y"]["max"]!=null&&(t["maxy"]=t["y"]["max"]);t["z"]["data"]!=null&&(t["dataz"]=t["z"]["data"]);if(this.RQt_!==t["datax"]){const i=this.JQt_(t["datax"],!0);this.RQt_=i!=null?i.data:[]}if(this.xQt_!==t["datay"]){const i=this.JQt_(t["datay"],!0);this.xQt_=i!=null?i.data:[]}if(this.YQt_!==t["dataz"]){const i=this.JQt_(t["dataz"],!0);this.YQt_=i!=null?i.data:[]}const i=this.JQt_(t["size"]["data"],!1,!0);if(i!=null){this.PQt_=i.data;t["size"]["min"]=t["size"]["min"]!=null?t["size"]["min"]:i.min;t["size"]["max"]=t["size"]["max"]!=null?t["size"]["max"]:i.max}else this.PQt_=this.PQt_||[];const s=this.JQt_(t["symbol"]["data"],!1);this.VQt_=s!=null?s.data:this.VQt_||[];this.Pp_=-1;this.Jp_=-1;this.nQt_=t["logx"]!=null&&t["logx"];this.hQt_=t["logy"]!=null&&t["logy"];this.TQt_=t["logz"]!=null&&t["logz"];this.pQt_=this.PQt_.length>0||this.VQt_.length>0;this.HQt_=new nA(t["defaultcolor"]);this.vQt_=t["defaultlinecolor"]!=null?new nA(t["defaultlinecolor"]):null;if(t["colorprovider"]!==this.KQt_){this.KQt_&&this.KQt_.off(mo.sC_,this.yQt_);this.KQt_=t["colorprovider"];this.KQt_ instanceof Mo&&this.KQt_.on(mo.sC_,this.yQt_);this.DBt_=!1}this.qQt_=new nA(t["highlightcolor"]);this.OQt_(t["painter"]);this.BQt_=t["symbolsize"];if(t["size"]["minsymbolsize"]!=null&&t["size"]["minsymbolsize"]!==this.wQt_||t["size"]["maxsymbolsize"]!=null&&t["size"]["maxsymbolsize"]!==this.QQt_||t["symbol"]["painters"]!=null&&t["symbol"]["painters"]!==this.EQt_){this.fQt_=[];this.wQt_=t["size"]["minsymbolsize"]!=null?t["size"]["minsymbolsize"]:this.wQt_;this.QQt_=t["size"]["maxsymbolsize"]!=null?t["size"]["maxsymbolsize"]:this.QQt_;this.EQt_=t["symbol"]["painters"]!=null?t["symbol"]["painters"].slice():this.EQt_}this.NQt_=t["symbol"]["ranges"]!=null?t["symbol"]["ranges"].slice():this.NQt_;const e=this.vQt_!=null?1:0;this.mQt_=this.BQt_+e*2;let A=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const o=Math.min(this.RQt_.length,this.xQt_.length);for(let t=0;t<o;++t)if(!isNaN(this.RQt_[t])&&!isNaN(this.xQt_[t])){A=Math.min(A,this.RQt_[t]);n=Math.max(n,this.RQt_[t]);h=Math.min(h,this.xQt_[t]);r=Math.max(r,this.xQt_[t])}A=isNaN(t["minx"])?A===Number.POSITIVE_INFINITY?Number.NaN:A:t["minx"];n=isNaN(t["maxx"])?n===Number.NEGATIVE_INFINITY?Number.NaN:n:t["maxx"];h=isNaN(t["miny"])?h===Number.POSITIVE_INFINITY?Number.NaN:h:t["miny"];r=isNaN(t["maxy"])?r===Number.NEGATIVE_INFINITY?Number.NaN:r:t["maxy"];if(this.nQt_){A=A>0?NA.log10(A):0;n=n>0?NA.log10(n):0}if(this.hQt_){h=h>0?NA.log10(h):0;r=r>0?NA.log10(r):0}this.kQt_=A;this.FQt_=n;this.LQt_=h;this.UQt_=r;this.IQt_=t["size"]["min"]!=null?t["size"]["min"]:this.IQt_;this.cQt_=t["size"]["max"]!=null?t["size"]["max"]:this.cQt_;this.ht_(new mA(this.kQt_,this.LQt_,this.FQt_,this.UQt_));this.WQt_=0;this.DBt_=!1;this.Wj_();this.td_();return this}getData(){return{datax:this.RQt_,minx:this.kQt_,maxx:this.FQt_,datay:this.xQt_,miny:this.LQt_,maxy:this.UQt_,dataz:this.YQt_,size:{data:this.PQt_,min:this.IQt_,max:this.cQt_,minsymbolsize:this.wQt_,maxsymbolsize:this.QQt_},symbol:{data:this.VQt_,painters:this.EQt_,ranges:this.NQt_},colorprovider:this.KQt_,defaultcolor:this.HQt_,defaultlinecolor:this.vQt_,highlightcolor:this.qQt_,symbolsize:this.BQt_,painter:this.hk_}}Swt_(){return this.KQt_}isEmpty(){return this.getBounds().Ie_()===0&&this.getBounds().Ts_()===0}zQt_(t,i){for(let s=t+i-1;s>=t;s--){this.WBt_.remove(s);this.XQt_(s)}this.MQt_.splice(t,i)}jQt_(t){const i=this.vQt_!=null?1:0,s=this.BQt_/2+i;this.GQt_.setSize(s,s);t.cI_(this.GQt_,this.GQt_)}JQt_(t,i,s){if(t==null)return null;if(Array.isArray(t)){let i=1/0,e=-1/0;if(s)for(let s=0;s<t.length;s++){i>t[s]&&(i=t[s]);e<t[s]&&(e=t[s])}return{data:t,min:s?i:NaN,max:s?e:NaN}}t.on(YD.Mct_,((t,s,e)=>{i?this.ZQt_(e["count"]):this._Qt_(e["from"],e["count"])}));t.on(YD.Sct_,((t,s,e)=>{i?s.toArray(!1)===this.xQt_&&this.zQt_(e["from"],e["count"]):this._Qt_(e["from"],e["count"])}));return{data:t.toArray(!1),min:s?t.nA_():NaN,max:s?t.hA_():NaN}}$Qt_(t){if(t==null||t>=this.PQt_.length||this.GQt_.Ie_()===0||this.GQt_.Ts_()===0)return this.GQt_;const i=this.vQt_!=null?1:0,s=undefined,e=(i+this.tEt_(t)/2)/(this.BQt_/2+i);return this.SQt_.setSize(e*this.GQt_.Ie_(),e*this.GQt_.Ts_())}iEt_(t){if(t==null||t>=this.VQt_.length)return this.hk_;const i=this.VQt_[t],s=Math.min(this.EQt_.length,this.NQt_.length);for(let t=0;t<s;t++){const s=this.NQt_[t],e=undefined;if(Array.isArray(s)?s[0]<=i&&i<=s[1]:s===i)return this.EQt_[t]}return this.hk_}tEt_(t){const i=t==null||t>=this.PQt_.length?this.BQt_:this.wQt_+Math.round((this.PQt_[t]-this.IQt_)/(this.cQt_-this.IQt_)*(this.QQt_-this.wQt_));return NA.clamp(i,this.wQt_,this.QQt_)}_Qt_(t,i){const s=Math.min(t+i,this.RQt_.length,this.xQt_.length);for(let i=t;i<s;i++)this.XQt_(i)}sEt_(t){t=Math.min(t,this.MQt_.length);for(let i=0;i<t;i++){this.XQt_(0);this.WBt_.shift();this.MQt_.shift()}}ZQt_(t){const i=Math.min(this.RQt_.length,this.xQt_.length);this.eEt_(i-t,t)}eEt_(t,i){const s=Math.min(this.RQt_.length,this.xQt_.length),e=this.YQt_!=null?Math.min(s,this.YQt_.length):0,A=this.AEt_!=null?Math.min(s,this.AEt_.length):0;for(let s=t;s<t+i;s++){const t=this.RQt_[s],i=this.xQt_[s],n=this.YQt_.length<=e?this.YQt_[s]:Number.NaN,h=undefined;let r;r=!!(s<A&&this.AEt_)&&this.AEt_[this.AEt_.length-1]?this.qQt_:isNaN(n)||this.KQt_==null?this.HQt_:RA.cs_(this.KQt_.getColor(n));this.nEt_(this.hEt_(r,null),t,i,s,r);this.WBt_!=null&&this.WBt_.GY_(t,i,s);this.XQt_(s)}}nEt_(t,i,s,e,A){this.MQt_[e]={Dn_:t,x:i,y:s,color:A}}vn_(t,i){super.vn_();if(i===oh.dC_){this.DBt_=!1;this.td_()}return this}Wj_(){this.WQt_=Math.min(this.RQt_.length,this.xQt_.length);const t=this.WQt_<1e4?5:this.WQt_<1e5?4:3;this.WBt_=new Cv(this.getBounds(),t);let i=!1;for(let t=0;t<this.WQt_;++t){const s=this.RQt_[t],e=this.xQt_[t];if(!isNaN(s)&&!isNaN(e)){i=!0;this.WBt_.GY_(s,e,t)}}!i&&(this.getBounds().Ie_()<=0||this.getBounds().Ts_()<=0)&&this.ht_(new mA(0,0,1,1));this.DBt_=!1;return!0}uwt_(t){const i=Math.min(this.RQt_.length,this.xQt_.length);if(t["samples"]==null){for(let s=0;s<i;++s)if(this.RBt_[s]){const i=this.RBt_[s].indexOf(t["state"]);i!==-1&&this.RBt_[s].splice(i,1)}}else for(let s=0;s<i;++s){this.RBt_[s]=this.RBt_[s]||[];if(t["samples"].indexOf(s)!==-1)this.RBt_[s].indexOf(t["state"])===-1&&this.RBt_[s].push(t["state"]);else{const i=this.RBt_[s].indexOf(t["state"]);i!==-1&&this.RBt_[s].splice(i,1)}}this.DBt_=!1;this.td_();return this}awt_(t){this.kBt_=qi(t,this.kBt_);this.DBt_=!1;this.td_();return this}rEt_(t){if(this.DBt_||this.WQt_===0)return;this.DQt_=[];const i=Math.min(this.RQt_.length,this.xQt_.length),s=this.YQt_!=null?Math.min(i,this.YQt_.length):0,e=this.AEt_!=null?Math.min(i,this.AEt_.length):0;let A,n,h,r,o;if(this.KQt_ instanceof No||this.KQt_ instanceof Zm){const i=this.KQt_.iy_();A=this.mQt_;n=Math.ceil(Math.sqrt(i+2));this.bQt_={oEt_:n,lEt_:A,current:{x:0,y:0},scale:t.VR_(),hK_:t.ZR_(n*(A+wv),n*(A+wv)),image:null};o=this.bQt_.hK_.tQ_();const s=(this.KQt_.pm_()-this.KQt_.Em_())/i;for(h=this.KQt_.Em_()-.5*s;h<this.KQt_.pm_()+s;h+=s){r=RA.cs_(this.KQt_.getColor(h));this.hEt_(r,o)}this.hEt_(this.HQt_,o);this.hEt_(this.qQt_,o)}else{A=this.mQt_;n=this.KQt_!=null?Math.ceil(Math.sqrt(this.WQt_)):2;this.bQt_={oEt_:n,lEt_:A,current:{x:0,y:0},scale:t.VR_(),hK_:t.ZR_(n*(A+wv),n*(A+wv)),image:null};o=this.bQt_.hK_.tQ_()}for(h=0;h<i;++h){const t=this.RQt_[h],i=this.xQt_[h],A=h<s?this.YQt_[h]:Number.NaN,n=h<e&&this.AEt_[h],l=this.RBt_&&this.RBt_[h];r=null;if(!isNaN(t)&&!isNaN(i)){if(l)for(let t=l.length-1;t>=0;t--){r=this.kBt_[l[t]];if(r)break}r==null&&(r=n?this.qQt_:isNaN(A)||this.KQt_==null?this.HQt_:RA.cs_(this.KQt_.getColor(A)));this.nEt_(this.hEt_(r,o),t,i,h,r)}}this.bQt_.hK_.gM_();this.bQt_.image=this.bQt_.hK_.getCanvas();this.bQt_.image.uEt_=nh.u_();this.DBt_=!0}OQt_(t){if(this.hk_!==t){this.hk_=t;this.fQt_=[];this.DBt_=!1}return this}aEt_(){return this.hk_}gEt_(t){const i=this.QQt_,s=this.wQt_,e=this.EQt_.indexOf(this.hk_)<0?this.EQt_.length+1:this.EQt_.length,A=(i-s+1)*(i+s+4*Iv)/2,n=(i+2*Iv)*e,h=t.VR_(),r=Math.ceil(A*h),o=Math.ceil(n*h),l=undefined,u=this.cEt_(t,A,n,new hl("transparent"),new wr("#ffffff")).aM_().getImageData(0,0,r,o),a=undefined,g=this.cEt_(t,A,n,new hl(this.vQt_||"transparent"),new wr("transparent")).aM_().getImageData(0,0,r,o);this.IEt_=u.width;this.fEt_=h;this.fQt_=[];this.CQt_=[];for(let t=0;t<u.data.length;t+=4){const i=g.data[t+3]/255;this.fQt_[t]=g.data[t]*i;this.fQt_[t+1]=g.data[t+1]*i;this.fQt_[t+2]=g.data[t+2]*i;this.fQt_[t+3]=i;this.CQt_[t]=u.data[t]*(1-i)/255;this.CQt_[t+1]=u.data[t+1]*(1-i)/255;this.CQt_[t+2]=u.data[t+2]*(1-i)/255;this.CQt_[t+3]=u.data[t+3]*(1-i)/255/255}}cEt_(t,i,s,e,A){cv.rB_(e);cv.iQ_(A);const n=new mA,h=t.ZR_(i,s),r=h.tQ_(),o=this.QQt_+2*Iv;let l=Iv,u=this.EQt_;if(u.indexOf(this.hk_)<0){u=u.slice();u.push(this.hk_)}for(let t=0;t<this.QQt_-this.wQt_+1;t++){const i=this.wQt_+t;for(let t=0;t<u.length;t++){const s=t*o+Iv;n.ce_(l,s,l+i,s+i);cv.rk_(u[t]);cv.ht_(n);cv.render(r)}l+=i+2*Iv}h.gM_();return h}CEt_(t,i,s,e,A,n){cv.gt_().setColor(this.vQt_||"transparent");cv.ct_().setColor(A.Es_());cv.rk_(n);cv.ht_(new mA(i-e/2,s-e/2,i+e/2,s+e/2));cv.render(t)}dEt_(t,i,s,e,A,n){const h=t.VR_();this.fQt_.length!==0&&this.fEt_===h||this.gEt_(t);let r=this.EQt_.indexOf(n);r<0&&(r=this.EQt_.length);const o=Math.round(h*(e-this.wQt_)*(this.wQt_+e-1+4*Iv)/2),l=Math.round(h*r*(this.QQt_+2*Iv)),u=e/2+Iv,a=Math.round(h*(i-u))-this.BEt_.x,g=Math.round(h*(s-u))-this.BEt_.y,c=this.BEt_.image.data,I=this.BEt_.width,f=A.Is_(),C=A.Cs_(),d=A.fs_(),B=A.ds_(),w=4*this.IEt_,Q=4*I,E=Math.max(0,-a),p=Math.min(Math.ceil(h*(e+2*Iv)),I-a),m=Math.max(0,-g),y=undefined,D=(m+l)*w,M=(p+o)*4,v=(Math.min(Math.ceil(h*(e+2*Iv)),this.BEt_.height-g)+l)*w,b=(m+g)*Q;for(let t=(E+o)*4,i=(E+a)*4;t<M;t+=4,i+=4)for(let s=D,e=b;s<v;s+=w,e+=Q){const A=t+s,n=this.CQt_[A+3]*B+this.fQt_[A+3];if(n===0)continue;const h=this.CQt_[A]*f+this.fQt_[A],r=this.CQt_[A+1]*C+this.fQt_[A+1],o=this.CQt_[A+2]*d+this.fQt_[A+2],l=i+e;if(c[l+3]!==0){c[l]=c[l]*(1-n)+h*n;c[l+1]=c[l+1]*(1-n)+r*n;c[l+2]=c[l+2]*(1-n)+o*n;c[l+3]=c[l+3]*(1-n)+n*255}else{c[l]=h;c[l+1]=r;c[l+2]=o;c[l+3]=n*255}}}hEt_(t,i){let s=this.fn_(t);if(s!=null)return s;if(i==null)return null;this.hk_==null&&(this.hk_=gv);const e=this.bQt_.current,A=this.bQt_.lEt_,n=e.x*(A+wv),h=e.y*(A+wv);this.vQt_!=null&&cv.gt_().setColor(this.vQt_);t!=null&&cv.ct_().setColor(t.Es_());i.rB_(cv.gt_());i.iQ_(cv.ct_());const r=this.vQt_!=null?1:0,o=new mA(n+r,h+r,n+A-r,h+A-r);cv.rk_(this.hk_);cv.ht_(o);cv.render(i);s={x:e.x,y:e.y};e.x++;if(e.x>=this.bQt_.oEt_){e.x=0;e.y++}this.bQt_.current=e;this.wEt_(t,s);return s}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;if(i.tk_()){const t=i.LR_();i.iQ_(wr.EQ_);i.pR_(this.getBounds());const s=this.WQt_>0?this.nwt_(t):[];i.mO_(ks({crossplot:this,indices:s},["indices","crossplot"]));i.mO_(new jf(this,{indices:s}))}else{this.Xb_(i);if(this.pP_){const t=i.cR_(),s=i.Ji_();if(s.yI_()===0)return;i.save();const e=s.gI_(t),A=new mA(this.getBounds());A.intersect(e);s.rn_(A,A);i._b_(A)}this.bQt_&&t.VR_()!==this.bQt_.scale&&(this.DBt_=!1);this.rEt_(t);i.aS_({QEt_:"shared"});this.EEt_(i);i.aS_({QEt_:"none"});this.pP_&&i.restore();this.iN_(i)}}RY_(){return this.pP_}kY_(t){this.pP_=t;this.vn_();return this}EEt_(t){const i=t.Ji_(),s=i.gI_(t.cR_());s.intersect(this.getBounds());const e=i.rn_(s);if(e.Ie_()<1||e.Ts_()<1)return this;e.Le_(this.pQt_?this.QQt_/2:this.BQt_/2);i.gI_(e,e);this.jQt_(i);t.dI_(new Gn);let A,n,h,r;if(this.WBt_!=null){const o=this.WBt_.IN_(e,{data:this.RQt_,log:this.nQt_},{data:this.xQt_,log:this.hQt_});n=new lA(0,0);const l=Au.toArray(o);l.sort((function(t,i){return t-i}));let u=[];if(this.pQt_)u=l.reverse();else{const t=[];for(A=l.length-1;A>=0;A--){h=l[A];n.x=this.RQt_[h];n.y=this.xQt_[h];i.transformPoint(n,n);const s=Math.round(n.x),e=Math.round(n.y);t[s]==null&&(t[s]=[]);if(t[s][e]!=null)t[s][e]++;else{t[s][e]=1;u[u.length]=h}}}if(!this.pQt_||u.length===0||t instanceof Ea)this.BEt_=null;else{let e=1/0,n=1/0,h=-1/0,o=-1/0;for(A=0;A<u.length;A++){r=this.MQt_[u[A]];if(r){e=Math.min(r.x,e);n=Math.min(r.y,n);h=Math.max(r.x,h);o=Math.max(r.y,o)}}const l=this.vQt_!=null?1:0,a=this.$Qt_(),g=(l+this.QQt_/2)/(this.BQt_/2+l);e=Math.max(s.getX(),e-a.Ie_()*g);n=Math.max(s.getY(),n-a.Ts_()*g);h=Math.min(s.Qe_(),h+a.Ie_()*g);o=Math.min(s.pe_(),o+a.Ts_()*g);const c=new mA(e,n,h,o);i.rn_(c,c);const I=t.VR_();e=Math.floor(I*c.getX());n=Math.floor(I*c.getY());h=Math.ceil(I*c.Qe_());o=Math.ceil(I*c.pe_());this.dQt_==null?this.dQt_=fr.zw_({width:h-e,height:o-n,devicepixel:!0,contextattributes:{willReadFrequently:!0}}):this.dQt_.setSize(h-e,o-n);this.BEt_={x:e,y:n,width:h-e,height:o-n,image:this.dQt_.aM_().createImageData(h-e,o-n)}}for(A=u.length-1;A>=0;A--){h=u[A];r=this.MQt_[h];if(r){this.nQt_?n.x=NA.log10(r.x):n.x=r.x;this.hQt_?n.y=NA.log10(r.y):n.y=r.y;i.transformPoint(n,n);this.pEt_(t,r.Dn_,n.x,n.y,h,r.color)}}if(this.pQt_&&this.BEt_!=null){this.dQt_.aM_().putImageData(this.BEt_.image,0,0);t.aS_({RK_:!0});t.drawImage(this.dQt_,this.BEt_.x,this.BEt_.y);t.cS_()}}else{n=new lA(0,0);for(A=0;A<this.MQt_.length;++A){r=this.MQt_[A];n.x=this.nQt_?NA.log10(r.x):r.x;n.y=this.hQt_?NA.log10(r.y):r.y;i.transformPoint(n,n);e.contains(n.x,n.y)&&this.pEt_(t,this.MQt_[A].Dn_,n.x,n.y,A,this.MQt_[A].color)}}t.dI_(i);return this}pEt_(t,i,s,e,A,n){if(this.pQt_){const i=this.tEt_(A),h=this.iEt_(A);this.BEt_!=null?this.dEt_(t,s,e,i,n,h):this.CEt_(t,s,e,i,n,h);return this}if(this.bQt_.image){if(i==null)return this;const A=this.bQt_.lEt_,n=t.VR_(),h=i.x*(A+wv)*n,r=i.y*(A+wv)*n,o=A*n,l=A*n;let u=s-A/2,a=e-A/2;const g=A,c=A;if(t.VR_()===1){u=Math.round(u);a=Math.round(a)}if(t instanceof Ea&&n===this.bQt_.scale)if(i.mEt_==null){const s=fr.zw_(o,l,!0,!0,n),e=undefined;s.tQ_().drawImage(this.bQt_.image,h,r,o,l,0,0,o,l);s.gM_();i.mEt_=s.getCanvas();i.mEt_.uEt_=nh.u_();t.drawImage(i.mEt_,0,0,o,l,u,a,g,c)}else t.drawImage(i.mEt_,0,0,o,l,u,a,g,c);else t.drawImage(this.bQt_.image,h,r,o,l,u,a,g,c)}else{const i=new hl("#000",1.5),A=new wr(n);t.rB_(i);t.iQ_(A);t.DR_(s-2,e-2,4,4,0,Math.PI*2)}return this}fn_(t){const i=t.Is_(),s=t.Cs_(),e=t.fs_(),A=t.ds_(),n=this.DQt_;if(n[i]==null)return null;const h=n[i];if(h[s]==null)return null;const r=h[s];if(r[e]==null)return null;const o=r[e];return o[A]==null?null:o[A]}wEt_(t,i){const s=t.Is_(),e=t.Cs_(),A=t.fs_(),n=t.ds_(),h=this.DQt_;let r=h[s],o,l;if(r!=null){l=r[e];if(l!=null){o=l[A];if(o!=null)o[n]=i;else{o=[];o[n]=i;l[A]=o}}else{l=[];o=[];o[n]=i;l[A]=o;r[e]=l}}else{r=[];l=[];o=[];o[n]=i;l[A]=o;r[e]=l;h[s]=r}return this}yEt_(){const t=[];this.AEt_==null&&(this.AEt_=[]);for(let i=0;i<this.AEt_.length;++i)this.AEt_[i]===!0&&t.push(i);return t}gwt_(t){this.DEt_==null&&(this.DEt_=new ma({sizeisindevicespace:!0,ispointingup:!0,fillstyle:{},linestyle:{}}));const i=this.MQt_[t];this.DEt_.gt_().setColor(this.vQt_||"transparent");this.DEt_.ct_().setColor(i!=null?i.color:"transparent");const s=this.tEt_(t);this.DEt_.dt_({ax:t<this.RQt_.length?this.RQt_[t]:NaN,ay:t<this.xQt_.length?this.xQt_[t]:NaN,width:s,height:s,painter:this.iEt_(t)});return this.DEt_}MEt_(t,i){const s=this.nwt_(t);return this.vEt_(s,i)}bEt_(t,i){return t.every((function(t){return t!==i}))}XQt_(t){if(t>=this.RQt_.length||t>=this.xQt_.length)return;const i=this.$Qt_(t),s=i.Ie_(),e=i.Ts_(),A=this.RQt_[t],n=this.xQt_[t];this.td_(dv.ce_(A-s,n-e,A+s,n+e))}vEt_(t,i){let s=!1,e;if(i===!0&&this.AEt_!=null)for(e=0;e<this.AEt_.length;++e)if(this.AEt_[e]===!0&&this.bEt_(t,e)){s=!0;this.AEt_[e]=!1;this.XQt_(e)}this.AEt_==null&&(this.AEt_=[]);for(e=0;e<t.length;++e)if(this.AEt_[t[e]]!==!0){s=!0;this.AEt_[t[e]]=!0;this.XQt_(t[e])}s&&(this.DBt_=!1);return this}nwt_(t,i){this.WBt_==null&&this.Wj_();if(!i)return this.WBt_.J2_(t,this.RQt_,this.xQt_);if(!this.pQt_){const i=this.$Qt_(),s=t.getBounds().clone().Le_(i.Ie_(),i.Ts_()),e=this.WBt_.J2_(s,this.RQt_,this.xQt_);if(t instanceof In){s.de_(2*i.Ie_()).Be_(2*i.Ts_());return e.filter((i=>{s.me_(this.RQt_[i],this.xQt_[i]);return t.Nc_(s)}))}return e}const s=this.vQt_!=null?1:0,e=(this.QQt_/2+s)/(this.BQt_/2+s),A=this.SQt_.setSize(e*this.GQt_.Ie_(),e*this.GQt_.Ts_()),n=t.getBounds().clone().Le_(A.Ie_(),A.Ts_()),h=this.WBt_.J2_(n,this.RQt_,this.xQt_);if(t instanceof In)return h.filter((i=>{const s=this.$Qt_(i);n.ce_(this.RQt_[i]-s.Ie_(),this.xQt_[i]-s.Ts_(),this.RQt_[i]+s.Ie_(),this.xQt_[i]+s.Ts_());return t.Nc_(n)}));n.ce_(t.getBounds());return h.filter((t=>{const i=this.$Qt_(t);return n.$s_(this.RQt_[t]-i.Ie_(),this.xQt_[t]-i.Ts_(),2*i.Ie_(),2*i.Ts_())}))}NEt_(t){const i=[],s=this.nwt_(t);for(let t=0;t<s.length;++t){const e=s[t];i[t]={x:this.RQt_[e],y:this.xQt_[e],z:this.YQt_[e]}}return i}N_(){const t=super.N_();t["minx"]=this.kQt_;t["maxx"]=this.FQt_;t["miny"]=this.LQt_;t["maxy"]=this.UQt_;t["colorprovider"]=this.KQt_;t["defaultcolor"]=this.HQt_.Es_();t["defaultlinecolor"]=this.vQt_!=null?this.vQt_.Es_():null;t["highlightcolor"]=this.qQt_.Es_();t["symbolsize"]=this.BQt_;t["painter"]=this.hk_;t["x"]={min:this.kQt_,max:this.FQt_};t["y"]={min:this.LQt_,max:this.UQt_};t["size"]={min:this.IQt_,max:this.cQt_,minsymbolsize:this.wQt_,maxsymbolsize:this.QQt_};return t}$X_(t,i,s){const e=t=>t instanceof jf&&t.GO_()===this;let A,n,h;if(t instanceof mA)A=t.clone();else if(t instanceof lA){i=i||Bv;A=new mA(t.x-i,t.y-i,t.x+i,t.y+i)}const r=this.getRoot();if(A!=null&&ne(r)){const t=r.rt_();if(s===fg.ax_){A.setY(t.getY());A.Be_(t.Ts_())}else if(s===fg.ux_){A.setX(t.getX());A.de_(t.Ie_())}n=[A.we_(),A.Qe_(),A.Qe_(),A.we_()];h=[A.Ee_(),A.Ee_(),A.pe_(),A.pe_()]}else if(t!=null&&Array.isArray(t["x"])&&Array.isArray(t["y"])){n=t["x"];h=t["y"]}if(n!=null&&h!=null&&n.length>2&&h.length>2){const t=bC.select(this.getRoot(),n,h,!0).filter(e);return t.length>0?t[0].getData():null}return null}dispose(){this.KQt_&&this.KQt_.off(mo.sC_,this.yQt_);super.dispose()}};i=t([_s("geotoolkit.controls.shapes.CrossPlot")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0Q29sb3JQcm92aWRlciI6IlN3dF8iLCJ1cGRhdGVTdGF0ZSI6InZuXyIsInVwZGF0ZUxpbWl0cyI6IldqXyIsInNldEhpZ2hMaWdodENvbG9ycyI6ImF3dF8iLCJzZXRTeW1ib2xQYWludGVyIjoiT1F0XyIsImdldFN5bWJvbFBhaW50ZXIiOiJhRXRfIiwiaXNDbGlwcGluZ0VuYWJsZWQiOiJSWV8iLCJlbmFibGVDbGlwcGluZyI6ImtZXyIsImdldEhpZ2hsaWdodGVkSW5kaWNlcyI6InlFdF8iLCJnZXRTeW1ib2xTaGFwZSI6Imd3dF8iLCJoaWdobGlnaHRBcmVhIjoiTUV0XyIsImhpZ2hsaWdodEluZGljZXMiOiJ2RXRfIiwiZ2V0SW5kaWNlc0F0Ijoibnd0XyIsImdldFBvaW50c0F0IjoiTkV0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsImhpdFRlc3QiOiIkWF8ifX19");var Ev=function(){var t=class{static SEt_(t,i,s){const e=Math.sqrt(50),A=Math.sqrt(10),n=Math.sqrt(2),h=(i-t)/Math.max(0,s),r=Math.floor(Math.log(h)/Math.LN10),o=h/Math.pow(10,r);return r>=0?(o>=e?10:o>=A?5:o>=n?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=e?10:o>=A?5:o>=n?2:1)}static range(t,i,s){const e=arguments.length,A=Math.max(0,Math.ceil((i-t)/s))|0,n=new Array(A);t=+t,i=+i,s=e<2?(i=t,t=0,1):e<3?1:+s;let h=-1;while(++h<A)n[h]=t+h*s;return n}static GEt_(t,i){let s,e,A,n;if(i===void 0)for(A=0;A<t.length;A++){n=t[A];if(n!=null)if(s===void 0)n>=n&&(s=e=n);else{s>n&&(s=n);e<n&&(e=n)}}else{let h=-1;for(A=0;A<t.length;A++){n=t[A];if((n=i(n,++h,t))!=null)if(s===void 0)n>=n&&(s=e=n);else{s>n&&(s=n);e<n&&(e=n)}}}return[s,e]}static REt_(i,s,e){let A,n=-1,h,r,o,l,u;e=+e;if((i=+i)===(s=+s)&&e>0)return[i];(A=s<i)&&(h=i,i=s,s=h);if((o=t.SEt_(i,s,e))===0||!isFinite(o))return[];if(o>0){l=Math.round(i/o),u=Math.round(s/o);l*o<i&&++l;u*o>s&&--u;r=new Array(h=u-l+1);while(++n<h)r[n]=(l+n)*o}else{o=-o;l=Math.round(i*o),u=Math.round(s*o);l/o<i&&++l;u/o>s&&--u;r=new Array(h=u-l+1);while(++n<h)r[n]=(l+n)/o}A&&r.reverse();return r}static kEt_(t,i,s){const e=Math.sqrt(50),A=Math.sqrt(10),n=Math.sqrt(2),h=Math.abs(t-i)/Math.max(0,s);let r=Math.pow(10,Math.floor(Math.log(h)/Math.LN10));const o=h/r;o>=e?r*=10:o>=A?r*=5:o>=n&&(r*=2);return i<t?-r:r}};return t}();const pv=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],mv=function(t,i,s){return(i[0]-t[0])*(s[1]-t[1])==(s[0]-t[0])*(i[1]-t[1])},yv=function(t,i,s){return t<=i&&i<=s||s<=i&&i<=t},Dv=function(t,i,s){const e=+(t[0]===i[0]);return mv(t,i,s)&&yv(t[e],s[e],i[e])},Mv=function(t,i){let s=-1;const e=i[0],A=i[1];for(let n=0,h=t.length,r=h-1;n<h;r=n++){const h=t[n],o=h[0],l=h[1],u=t[r],a=u[0],g=u[1];if(Dv(h,u,i))return 0;l>A!=g>A&&e<(a-o)*(A-l)/(g-l)+o&&(s=-s)}return s},vv=function(t,i){let s=-1,e;const A=i.length;while(++s<A)if(e=Mv(t,i[s]))return e;return 0},bv=function(t,i){let s=0,e,A;if(i===void 0)for(e=0;e<t.length;e++){A=t[e];A!=null&&(A=+A)>=A&&++s}else{let n=-1;for(e=0;e<t.length;e++){A=t[e];(A=i(A,++n,t))!=null&&(A=+A)>=A&&++s}}return s},Nv=function(t){const i=t.length;let s=0,e=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];while(++s<i)e+=t[s-1][1]*t[s][0]-t[s-1][0]*t[s][1];return e},Sv=function(t){return Math.ceil(Math.log(bv(t))/Math.LN2)+1};var Gv=function(){var t=class{constructor(t){const i=qi(t,{dx:1,dy:1,thresholds:Sv,smooth:!0},!0);this._dx=i["dx"];this._dy=i["dy"];this.FEt_=i["thresholds"];this.xEt_=!1;this.LEt_=null;this.UEt_(i["smooth"])}YEt_(t,i,s){t.forEach((t=>{const e=t[0],A=t[1],n=e|0,h=A|0,r=i[h*this._dx+n];let o;if(e>0&&e<this._dx&&n===e){o=i[h*this._dx+n-1];t[0]=e+(s-o)/(r-o)-.5}if(A>0&&A<this._dy&&h===A){o=i[(h-1)*this._dx+n];t[1]=A+(s-o)/(r-o)-.5}}))}TEt_(){return this.xEt_}UEt_(t){this.xEt_=t;this.LEt_=this.xEt_?this.YEt_.bind(this):function(){}}index(t){return t[0]*2+t[1]*(this._dx+1)*4}setSize(t,i){this._dx=Math.floor(t);this._dy=Math.floor(i);return this}KEt_(){return this.FEt_}HEt_(t){Array.isArray(t)?this.FEt_=t.slice():this.FEt_=t;return this}qEt_(t,i){const s=[],e=[];this.JEt_(t,i,(A=>{this.LEt_(A,t,i);Nv(A)>0?s.push([A]):e.push(A)}));e.forEach((function(t){for(let i=0,e=s.length,A;i<e;++i)if(vv((A=s[i])[0],t)!==-1){A.push(t);return}}));return{value:i,coordinates:s}}JEt_(t,i,s){const e=this._dx,A=this._dy,n=[],h=[];let r,o,l,u,a,g;const c=t=>{const i=[t[0][0]+r,t[0][1]+o],e=[t[1][0]+r,t[1][1]+o],A=this.index(i),l=this.index(e);let u,a;if(u=h[A])if(a=n[l]){delete h[u.end];delete n[a.start];if(u===a){u.PEt_.push(e);s(u.PEt_)}else n[u.start]=h[a.end]={start:u.start,end:a.end,PEt_:u.PEt_.concat(a.PEt_)}}else{delete h[u.end];u.PEt_.push(e);h[u.end=l]=u}else if(u=n[l])if(a=h[A]){delete n[u.start];delete h[a.end];if(u===a){u.PEt_.push(e);s(u.PEt_)}else n[a.start]=h[u.end]={start:a.start,end:u.end,PEt_:a.PEt_.concat(u.PEt_)}}else{delete n[u.start];u.PEt_.unshift(i);n[u.start=A]=u}else n[A]=h[l]={start:A,end:l,PEt_:[i,e]}};r=o=-1;u=t[0]>=i;pv[u<<1].forEach(c);while(++r<e-1){l=u,u=t[r+1]>=i;pv[l|u<<1].forEach(c)}pv[u<<0].forEach(c);while(++o<A-1){r=-1;u=t[o*e+e]>=i;a=t[o*e]>=i;pv[u<<1|a<<2].forEach(c);while(++r<e-1){l=u,u=t[o*e+e+r+1]>=i;g=a,a=t[o*e+r+1]>=i;pv[l|u<<1|a<<2|g<<3].forEach(c)}pv[u|a<<3].forEach(c)}r=-1;a=t[o*e]>=i;pv[a<<2].forEach(c);while(++r<e-1){g=a,a=t[o*e+r+1]>=i;pv[a<<2|g<<3].forEach(c)}pv[a<<3].forEach(c)}VEt_(t){let i=typeof this.FEt_=="function"?this.FEt_(t):this.FEt_;if(Array.isArray(i))i=i.slice().sort(((t,i)=>t-i));else{const s=Ev.GEt_(t),e=Ev.kEt_(s[0],s[1],i);i=Ev.REt_(Math.floor(s[0]/e)*e,Math.floor(s[1]/e-1)*e,i)}return i.map((i=>this.qEt_(t,i)))}};return t}();const Rv=function(t,i){let s,e,A;if(i===void 0)for(s=0;s<t.length;s++){e=t[s];e!=null&&(A>e||A===void 0&&e>=e)&&(A=e)}else{let n=-1;for(s=0;s<t.length;s++){e=t[s];(e=i(e,++n,t))!=null&&(A>e||A===void 0&&e>=e)&&(A=e)}}return A},kv=function(t,i){let s,e,A;if(i===void 0)for(s=0;s<t.length;s++){e=t[s];e!=null&&(A<e||A===void 0&&e>=e)&&(A=e)}else{let n=-1;for(s=0;s<t.length;s++){e=t[s];(e=i(e,++n,t))!=null&&(A<e||A===void 0&&e>=e)&&(A=e)}}return A},Fv=function(t,i,s,e){if(s==null||e==null)return null;let A=0;for(let n=0;n<s.length;n++)A+=Math.pow(t-s[n],2)+Math.pow(i-e[n],2);const n=Math.sqrt(A);return s.length/n},xv=function(t,i,s){const e=t.width,A=t.height,n=(s<<1)+1;for(let h=0;h<A;++h)for(let A=0,r=0;A<e+s;++A){A<e&&(r+=t.data[A+h*e]);if(A>=s){A>=n&&(r-=t.data[A-n+h*e]);i.data[A-s+h*e]=r/Math.min(A+1,e-1+n-A,n)}}},Lv=function(t,i,s){const e=t.width,A=t.height,n=(s<<1)+1;for(let h=0;h<e;++h)for(let r=0,o=0;r<A+s;++r){r<A&&(o+=t.data[h+r*e]);if(r>=s){r>=n&&(o-=t.data[h+(r-n)*e]);i.data[h+(r-s)*e]=o/Math.min(r+1,A-1+n-r,n)}}};var Uv=Ci(function(){var i;let s=i=class t extends $n{constructor(t){super();const i=qi(t,{dimension:new xA(960,500),cellsize:4,bandwidth:20,thresholds:40,x:[],y:[],weight:1,modellimits:null},!0);this._dx=i["dimension"].Ie_();this._dy=i["dimension"].Ts_();this._x=i["x"];this._y=i["y"];this.aZ_=i["modellimits"]||new mA(Rv(this._x),Rv(this._y),kv(this._x),kv(this._y));this.OEt_=i["weight"];this.WEt_=i["bandwidth"];this.zEt_=i["cellsize"];this._r=Math.round((Math.sqrt(4*this.WEt_*this.WEt_+1)-1)/2);this._k=Math.floor(Math.log(this.zEt_)/Math.LN2);this.FEt_=i["thresholds"];this._o=this._r*3;this._n=this._dx+this._o*2>>this._k;this._m=this._dy+this._o*2>>this._k;this.XEt_=null;this.jEt_=null;this.ZEt_()}getX(){return this._x}setX(t){this._x=t;this._Et_=null;this._Et_=null;this.$Et_=null;return this.tpt_()}ye_(){return this._Et_}getY(){return this._y}setY(t){this._y=t;this.ipt_=null;this.$Et_=null;return this.tpt_()}De_(){return this.ipt_}spt_(){this.$Et_==null&&(this.$Et_=Fv(this._Et_,this.ipt_,this._x,this._y));return this.$Et_}setValues(t,i){this._x=t;this._y=i;this._Et_=null;this.ipt_=null;this.$Et_=null;return this.tpt_()}rt_(){return this.aZ_}Lq_(t){this.aZ_=t||new mA(Rv(this._x),Rv(this._y),kv(this._x),kv(this._y));return this.tpt_()}ept_(){return this.OEt_}Apt_(t){if(this.OEt_===t)return this;this.OEt_=t;return this.tpt_()}npt_(){return new xA(this._dx,this._dy)}hpt_(t){if(t==null)throw new Error("invalid dimension");this._dx=t.Ie_();this._dy=t.Ts_();return this.ZEt_()}rpt_(){return new xA(this._n,this._m)}opt_(){return this.zEt_}lpt_(t){if(this.opt_()===t)return this;this.zEt_=t;this._k=Math.floor(Math.log(t)/Math.LN2);return this.ZEt_()}KEt_(){return this.FEt_}HEt_(t){if(this.FEt_===t)return this;Array.isArray(t)?this.FEt_=t.slice():this.FEt_=t;return this.tpt_()}upt_(){return this.WEt_}apt_(t){if(this.upt_()===t)return this;if(t<0)throw new Error("invalid bandwidth");this.WEt_=t;this._r=Math.round((Math.sqrt(4*t*t+1)-1)/2);return this.ZEt_()}gpt_(){const t=new mA(0,0,this._dx,this._dy);this.aZ_!=null&&this.aZ_.Ie_()!==0&&this.aZ_.Ts_()!==0||(this.aZ_=new mA(Rv(this._x),Rv(this._y),kv(this._x),kv(this._y)));const i=Gn.xI_(this.aZ_,t),s=this._k,e=this._o,A=Gn.kI_(-e,-e),n=Gn.TI_(Math.pow(2,s),Math.pow(2,s)),h=Gn.multiply(A,n);return Gn.multiply(i.rI_(),h)}tpt_(){this.jEt_!=null&&this.jEt_++;this.cpt_=null;this.XEt_=null;this.notify(rh.uC_,this);return this}ZEt_(){this._o=this._r*3;this._n=this._dx+this._o*2>>this._k;this._m=this._dy+this._o*2>>this._k;this.tpt_();return this}Ipt_(){const t=this._x,i=this._y,s=this.OEt_,e=this._k,A=this._o,n=this._n,h=this._m;let r;const o=new Float32Array(n*h),l=new Float32Array(n*h),u=Math.pow(2,-e),a=new mA(0,0,this._dx,this._dy);this.aZ_!=null&&this.aZ_.Ie_()!==0&&this.aZ_.Ts_()!==0||(this.aZ_=new mA(Rv(t),Rv(i),kv(t),kv(i)));const g=Gn.xI_(this.aZ_,a);let c=0,I=0;for(r=0;r<t.length;r++){const e=t[r],l=i[r];c+=e;I+=l;const a=g.nI_(e,l),f=(a.x+A)*u,C=(a.y+A)*u,d=s;if(f>=0&&f<n&&C>=0&&C<h){const t=Math.floor(f),i=Math.floor(C),s=f-t-.5,e=C-i-.5;o[t+i*n]+=(1-s)*(1-e)*d;o[t+1+i*n]+=s*(1-e)*d;o[t+1+(i+1)*n]+=s*e*d;o[t+(i+1)*n]+=(1-s)*e*d}}this._Et_=c/t.length;this.ipt_=I/i.length;const f=this._r,C=3;for(r=0;r<C;r++){xv({width:n,height:h,data:o},{width:n,height:h,data:l},f>>e);Lv({width:n,height:h,data:l},{width:n,height:h,data:o},f>>e)}return o}fpt_(){this.cpt_==null&&(this.cpt_=this.Ipt_());return this.cpt_}Cpt_(t,i){const s=undefined;return this.fpt_()[i*this._n+t]}VEt_(){if(this.XEt_!=null)return this.XEt_;const t=this.fpt_(),i=this.gpt_(),s=this._k,e=this._n,A=this._m,n=this.FEt_;let h=typeof n=="function"?n(t):n;if(!Array.isArray(h)){const i=kv(t);h=Ev.kEt_(0,i,h);h=Ev.range(0,Math.floor(i/h)*h,h);h.shift()}const r=function(t){const s=i.nI_(t[0],t[1]);t[0]=s.x;t[1]=s.y},o=function(t){t.forEach(r)},l=function(t){t.forEach(o)},u=(new Gv).setSize(e,A).HEt_(h).VEt_(t);this.XEt_=u.map((t=>{t["value"]*=Math.pow(2,-2*s);t["coordinates"].forEach(l);return t}));return this.XEt_}N_(){return{dimension:this.npt_(),cellsize:this.opt_(),bandwidth:this.upt_(),thresholds:this.KEt_(),x:this.getX(),y:this.getY(),modellimits:this.rt_()}}dt_(t){if((t=Es(t))==null)return this;const i=this.mf_();this.yf_(!0);this.jEt_=0;t["dimension"]&&this.hpt_(t["dimension"]);t["cellsize"]&&this.lpt_(t["cellsize"]);t["bandwidth"]&&this.apt_(t["bandwidth"]);t["thresholds"]&&this.HEt_(t["thresholds"]);t.hasOwnProperty("x")&&this.setX(t["x"]);t.hasOwnProperty("y")&&this.setY(t["y"]);t.hasOwnProperty("modellimits")&&this.Lq_(t["modellimits"]);this.yf_(i);this.jEt_>0&&i!==!0&&this.notify(rh.uC_,this);this.jEt_=null;return this}static jD_(t,s,e,A,n){if(e===void 0&&A===!0)return s;if(s!=null&&e!=null&&A===!0){e instanceof i&&(e=e.N_());s.dt_(e)}else{s!=null&&t!=null&&n!=null&&s.off(rh.uC_,n);(s=i.Wi_(e))!=null&&t!=null&&n!=null&&s.on(rh.uC_,n)}return s}static Wi_(t){return t instanceof i||t==null?t:new i(t)}};s=i=t([_s("geotoolkit.controls.util.density.DensityGrid")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDZW50ZXJYIjoieWVfIiwiZ2V0Q2VudGVyWSI6IkRlXyIsImdldEF2ZXJhZ2VEaXN0YW5jZSI6InNwdF8iLCJnZXRNb2RlbExpbWl0cyI6InJ0XyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwiZ2V0R3JpZERpbWVuc2lvbiI6Im5wdF8iLCJzZXRHcmlkRGltZW5zaW9uIjoiaHB0XyIsImdldEdyaWRTaXplIjoicnB0XyIsImdldENlbGxTaXplIjoib3B0XyIsInNldENlbGxTaXplIjoibHB0XyIsImdldFRocmVzaG9sZHMiOiJLRXRfIiwic2V0VGhyZXNob2xkcyI6IkhFdF8iLCJnZXRCYW5kd2lkdGgiOiJ1cHRfIiwic2V0QmFuZHdpZHRoIjoiYXB0XyIsImdldEdyaWRUb01vZGVsVHJhbnNmb3JtYXRpb24iOiJncHRfIiwiZ2V0RGVuc2l0eVZhbHVlcyI6ImZwdF8iLCJnZXREZW5zaXR5VmFsdWVBdCI6IkNwdF8iLCJnZXRDb250b3VycyI6IlZFdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var Yv=Ci({Path:"path",vt_:"spline"},2,"eyJTcGxpbmUiOiJ2dF8ifSAg");const Tv="density",Kv=new nA("black").setAlpha(.5),Hv=new nA("black").setAlpha(.1);var qv=Ci(function(){var i;let s=i=class t extends su{constructor(t){const i=qi(t,{grid:null,linestyle:Kv.clone(),fillstyle:Hv.clone(),bandspacing:0,bandopacity:1,colorprovider:null,geometry:Yv.Path},!0);super(i);this.bf_=null;this.dpt_=null;this.Bpt_=null;this.XEt_=null;this.wpt_=i["bandspacing"];this.Qpt_=i["bandopacity"];this.Cm_=i["colorprovider"];this.EX_=!1;this.Ept_=i["geometry"];this.ppt_=()=>{this.td_();this.XEt_=this.mpt_(this.dpt_,this.Ept_);this.EX_=!1;this.td_()};this.ypt_(i["grid"])}dispose(){if(!this.Df_()){if(this.dpt_!=null){this.dpt_.off(rh.uC_,this.ppt_);this.dpt_=null}super.dispose()}}clone(){return Object.getPrototypeOf(this)!==i.prototype?Wi(this):new i({grid:this.dpt_,bandspacing:this.wpt_,bandopacity:this.Qpt_,colorprovider:this.Cm_,geometry:this.Ept_}).b_(this,!0)}b_(t,i){i===!0&&super.b_(t,i);return this}mpt_(t,i){if(t==null||t.getX().length===0||t.getY().length===0)return null;const s=t.VEt_(),e=this.ct_(),A=this.gt_(),n=[];for(let t=0;t<s.length;t++){const h=s[t],r=h["coordinates"];let o=null,l;if(i===Yv.Path){o=new Yu({fillstyle:e,linestyle:A}).setProperty(Tv,h["value"]);n.push(o)}for(let t=0;t<r.length;t++)for(let s=0;s<r[t].length;s++){const u=r[t][s];if(i===Yv.Path){o.moveTo(u[0][0],u[0][1]);for(l=0;l<u.length;l++)o.lineTo(u[l][0],u[l][1]);o.close()}else{const t=[],i=[];for(l=0;l<u.length;l++){t.push(u[l][0]);i.push(u[l][1])}const s=new Bp({x:t,y:i,fillstyle:e,linestyle:A}).setProperty(Tv,h["value"]);n.push(s)}}}return n}Dpt_(){this.EX_=!0;let t=this.XEt_!=null?this.XEt_.length:0,i,s;if(t===0)return this;const e=this.wpt_,A=this.Qpt_;let n=this.gt_(),h=this.ct_();if(e===0||this.Cm_!=null){for(i=0;i<t;i++){if(this.Cm_){const t=this.XEt_[i].Id_(Tv),s=this.Cm_.getColor(t);if(s==null){n=this.gt_();h=this.ct_()}else{const t=s.clone().setColor(s.Is_()*.7,s.Cs_()*.7,s.fs_()*.7);n=n!=null?n.clone().setColor(t):null;h=h!=null?h.clone().setColor(s):null}}this.XEt_[i].rB_(n).iQ_(h)}return this}const r=h?new nA(h.getColor()):null,o=n?new nA(n.getColor()):null,l=o?o.clone().setAlpha(.2):null,u=this.dpt_.spt_(),a=Gn.xI_(new mA(0,0,t,t),new mA(A/100,A/100,u/50,u/50));let g,c;if(this.Ept_===Yv.vt_){g=[];for(i=0;i<t;i++){const t=this.XEt_[i],e=t.Id_(Tv);c=null;for(s=0;s<g.length;s++)if(NA.equals(g[s].density,e)){c=g[s];break}if(c==null){c={density:e,Mpt_:[t]};g.push(c)}else c.Mpt_.push(t)}t=g.length}else g=this.XEt_;for(i=0;i<t;i++){const t=a.nI_(i,i).x,A=(i+e)%e==0?o:l,n=(i+e)%e==0?r.clone().setAlpha(t):null;if(this.Ept_===Yv.Path)g[i].rB_(A).iQ_(n);else{const t=g[i].Mpt_;for(s=0;s<t.length;s++){const i=undefined;t[s].rB_(A).iQ_(n)}}}return this}vpt_(){return this.dpt_}ypt_(t,i){if(this.dpt_===t)return this;this.td_();const s=this.dpt_;this.dpt_=Uv.jD_(this,this.dpt_,t,i,this.ppt_);if(this.dpt_!=null){s!==this.dpt_&&(this.XEt_=this.mpt_(this.dpt_,this.Ept_));this.EX_=!1}else this.XEt_=null;this.td_();return this}Swt_(){return this.Cm_}UBt_(t){if(this.Cm_===t)return this;this.Cm_=t;this.EX_=!1;this.td_();return this}nt_(){return this.Ept_}Pd_(t){if(this.Ept_===t)return this;this.Ept_=t;this.XEt_=this.mpt_(this.dpt_,this.Ept_);this.EX_=!1;this.td_();return this}bpt_(){return this.wpt_}Npt_(t){if(this.wpt_===t)return this;this.wpt_=t;this.EX_=!1;this.td_();return this}Spt_(){return this.Qpt_}Gpt_(t){if(this.Qpt_===t)return this;this.Qpt_=t;this.EX_=!1;this.td_();return this}Rpt_(t){if(t==null||t["bandspacing"]===this.wpt_&&t["bandopacity"]===this.Qpt_)return this;t["bandspacing"]!=null&&(this.wpt_=t["bandspacing"]);t["bandopacity"]!=null&&(this.Qpt_=t["bandopacity"]);this.EX_=!1;this.td_();return this}getBounds(){return this.bf_||this.Bpt_}render(t){if(this.XEt_==null||this.XEt_.length===0)return;this.EX_||this.Dpt_();const i=this.sd_()!=null?t.uS_(this.sd_()):t;for(let t=0;t<this.XEt_.length;t++)this.XEt_[t].render(i)}vn_(t,i){super.vn_(t,i);i===oh.pC_&&(this.EX_=!1);return this}oQ_(){this.yb_===null&&(this.yb_=()=>{this.EX_=!1;return this.td_()});return this.yb_}N_(){const t=super.N_();t["grid"]=this.dpt_;t["bandspacing"]=this.wpt_;t["bandopacity"]=this.Qpt_;t["colorprovider"]=this.Cm_;t["geometry"]=this.Ept_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["grid"]!==void 0&&this.ypt_(t["grid"],t["grid"]instanceof Uv==!1);t["bandspacing"]!=null&&this.Npt_(t["bandspacing"]);t["bandopacity"]!=null&&this.Gpt_(t["bandopacity"]);t["colorprovider"]!==void 0&&this.UBt_(t["colorprovider"]);t["geometry"]!=null&&this.Pd_(t["geometry"]);return this}};s=i=t([_s("geotoolkit.controls.shapes.density.DensityContourShape")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsImdldERlbnNpdHlHcmlkIjoidnB0XyIsInNldERlbnNpdHlHcmlkIjoieXB0XyIsImdldENvbG9yUHJvdmlkZXIiOiJTd3RfIiwic2V0Q29sb3JQcm92aWRlciI6IlVCdF8iLCJnZXRHZW9tZXRyeSI6Im50XyIsInNldEdlb21ldHJ5IjoiUGRfIiwiZ2V0QmFuZFNwYWNpbmciOiJicHRfIiwic2V0QmFuZFNwYWNpbmciOiJOcHRfIiwiZ2V0QmFuZE9wYWNpdHkiOiJTcHRfIiwic2V0QmFuZE9wYWNpdHkiOiJHcHRfIiwic2V0QmFuZE9wdGlvbnMiOiJScHRfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJnZXRJbnZhbGlkYXRlTWV0aG9kIjoib1FfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");var Jv=Ci({kpt_:"Pie2D",Fpt_:"Pie3D"},2,"eyJQaWUyRCI6ImtwdF8iLCJQaWUzRCI6IkZwdF8ifSAg"),Pv=Ci({xpt_:"radius",Lpt_:"padded",Upt_:"dynamic",VI_:"auto"},2,"eyJSYWRpdXMiOiJ4cHRfIiwiUGFkZGVkIjoiTHB0XyIsIkR5bmFtaWMiOiJVcHRfIiwiQXV0byI6IlZJXyJ9"),Vv=Ci({Raw:"Raw",cIt_:"Associative"},2,"eyJBc3NvY2lhdGl2ZSI6ImNJdF8ifSAg"),Ov=Ci({Kz_:"Inside",Hz_:"Outside"},2,"eyJJbnNpZGUiOiJLel8iLCJPdXRzaWRlIjoiSHpfIn0g"),Wv=Ci({ux_:"Horizontal",Ypt_:"Radial"},2,"eyJIb3Jpem9udGFsIjoidXhfIiwiUmFkaWFsIjoiWXB0XyJ9"),zv=Ci({Tpt_:"Clockwise",Kpt_:"CounterClockwise"},2,"eyJDbG9ja3dpc2UiOiJUcHRfIiwiQ291bnRlckNsb2Nrd2lzZSI6IktwdF8ifSAg"),Xv=Ci({Ds_:"Ascending",Ms_:"Descending",Hpt_:"Natural"},2,"eyJBc2NlbmRpbmciOiJEc18iLCJEZXNjZW5kaW5nIjoiTXNfIiwiTmF0dXJhbCI6IkhwdF8ifSAg"),jv={Arc:"arc",qpt_:"arcBottom",Jpt_:"outerArc",Ppt_:"innerArc"},Zv={Vpt_:"label",Opt_:"annulusArc",Wpt_:"stripArc",Rect:"rect",Line:"line"};const _v=90,$v=180,tb=270,ib=360,sb=Math.PI/180,eb=Math.PI*2,Ab=3*Math.PI/2,nb=Math.PI/2,hb=new mA,rb=20,ob={[Zv.Vpt_]:YC,[Zv.Opt_]:_Q,[Zv.Wpt_]:yp,[Zv.Rect]:dp,[Zv.Line]:Rd},lb=function(t,i){return i.value-t.value},ub=function(t){const i=RA.cs_(t),s=new ph(i),e=s.clone();e.tB_(-.2);e.iB_(.2);const A=e.zd_().Es_(),n=s;n.tB_(.2);n.iB_(-.2);const h=n.zd_().Es_(),r=new Fo({startcolor:h,endcolor:h});r.LQ_(.5,A);return r},ab=function(t){const i=RA.cs_(t.getColor());let s=i.Is_(),e=i.Cs_(),A=i.fs_();const n=Math.max(s,e,A);if(s===n){s=(255+s)/2;e/=2;A/=2}else if(e===n){e=(255+e)/2;s/=2;A/=2}else{A=(255+A)/2;s/=2;e/=2}const h=new nA(s,e,A);return new wr(h)},gb=function(t,i,s){if(t>eb||i>eb){t-=eb;i-=eb}if(t<0||i<0){t+=eb;i+=eb}return{start:t,end:i,LK_:s||[]}},cb=function(t,i,s,e){const A=Math.PI,n=[];let h=t,r=(Math.floor(t/A)+1)*A,o=[s];while(h<i){if(r>=i){o=o==null?[e]:Math.sin(t)<Math.sin(i)?[s,e]:[e,s];n.push(gb(h,i,o));break}n.push(gb(h,r,o));h=r;r+=A;o=null}return n},Ib=function(t){const i=undefined,s=t-(Math.ceil(t/eb)-1)*eb;return s<0?s+eb:s},fb=function(t,i,s){return t.sort((function(t,e){const A=t["outerArc"].N_(),n=A["startarc"],h=A["endarc"];if(n>i&&h<i)return-s;const r=e["outerArc"].N_(),o=r["startarc"],l=r["endarc"];if(o>i&&l<i)return s;const u=(n+h)/2,a=(o+l)/2,g=undefined,c=undefined;return Math.abs(i-u)>Math.abs(i-a)?s:-s}))},Cb=function(t,i,s,e){for(let A=0;A<i.length;++A){const n=s[i[A]];if(n!=null&&n!==0){const s=t[e[i[A]]];s.label.tf_(s.label.aR_()+n);s.zpt_.WA_().translate(0,n)}}};var db=Ci(function(){let i=class t extends sI{constructor(t,i){super();this.Xpt_={};t==null&&(t={});const s={outerradius:150,maxouterradius:150,innerradius:25,piemode:Jv.kpt_,startangle:0,totalangle:ib,direction:zv.Tpt_,minpercentage:0,maxslices:0,linestyle:new hl("lightgrey"),autogradient:!1,fillstyles:[],"selected-fillstyles":[],createselectedstyle:ab,showpercentagesthreshold:0,modellimitsmode:Pv.xpt_,label:{hideifdontfit:!1,format:(t,i)=>t+" ("+(i*100/this.jpt_).toFixed(2)+"%)",location:Ov.Kz_,direction:Wv.ux_,textstyle:(new qa).nF_("10pt Roboto"),preservereadingorientation:!0,ispointingup:!0,preserverightangle:!0,preserveaspectratio:!0},outsideline:{linestyle:new hl("lightgrey"),length:10,pad:2},sliceshift:{offsets:[]},depth3d:30,inclination3d:60};this.options={};this.Zpt_=this._pt_.bind(this);t=Pi(t,s);this.setOptions(t);this.jpt_=0;this.$pt_=[];this.tmt_=[];this.imt_=[];this.smt_={label:[],annulusArc:[],stripArc:[],rect:[],line:[]};this.emt_=null;this.data={mode:Vv.Raw,order:Xv.Ms_,values:[]};i&&this.setData(i)}setData(t){t||(t={mode:Vv.Raw,order:Xv.Ms_,values:[]});if(t["values"]instanceof zD||t["values"]instanceof bM)if(t["values"]!==this.emt_){this.emt_!=null&&this.emt_.off(UD.pct_,this.Zpt_);this.emt_=t["values"];this.emt_.on(UD.pct_,this.Zpt_);t["values"]=this.emt_.toArray(!0)}else delete t["values"];qi(t,this.data);this.Amt_();this.vn_();this.td_();this.notify(rh.uC_,this);return this}getData(){return this.data}_pt_(){const t=this.emt_.toArray(!0);this.setData({values:t})}JV_(){return Pi(this.options,{})}setOptions(t){this.options=Pi(t,this.options);this.options["label"]["textstyle"]=qa.Wi_(this.options["label"]["textstyle"]);this.options["maxouterradius"]<this.options["outerradius"]&&(this.options["maxouterradius"]=this.options["outerradius"]);this.Amt_();this.vn_().td_();this.notify(rh.uC_,this);return this}nmt_(){const t=this.$pt_;this.$pt_=[];t.forEach((t=>{this.hmt_(Zv.Opt_,t["arc"]);t["arcBottom"]!=null&&this.hmt_(Zv.Opt_,t["arcBottom"]);t.zpt_!=null&&this.hmt_(Zv.Line,t.zpt_);t.label instanceof YC&&this.hmt_(Zv.Vpt_,t.label)}))}rmt_(){const t=function(t){t.dispose()};for(const i in this.smt_){this.smt_[i].forEach(t);this.smt_[i]=[]}}Amt_(){if(!this.data)return;this.nmt_();const t=this.data["values"];let i,s,e;if(this.data["mode"]===Vv.Raw){this.jpt_=t.length;e={};for(i=0;i<this.jpt_;i++)e[t[i]]=e[t[i]]+1||1}else{if(this.data["mode"]!==Vv.cIt_)throw new Error("Unknown DonutChart Data Mode Enum :"+this.data["mode"]);this.jpt_=0;e=t;for(s in t)t.hasOwnProperty(s)&&t[s]>0&&(this.jpt_+=t[s])}const A={label:"Other",value:0},n=[],h=this.options["minpercentage"]*this.jpt_/100;for(const t in e)e.hasOwnProperty(t)&&(e[t]<h?A.value+=e[t]:n.push({label:t,value:e[t]}));n.sort(lb);const r=n.length+(A.value>0?1:0);if(this.options["maxslices"]>0&&r>this.options["maxslices"]){const t=n.length+1-this.options["maxslices"];for(let i=0;i<t;++i){const t=n.pop();A.value+=t.value}}A.value>0&&n.push(A);if(this.data["order"]===Xv.Hpt_){let e;const h={},r=n.map((function(t){return t.label}));if(this.data["mode"]===Vv.Raw){for(i=0;i<this.data["values"].length;++i)if(!h[this.data["values"][i]]){e=r.indexOf(this.data["values"][i]);if(e>-1){this.$pt_.push(n[e]);h[r[e]]=!0}}}else if(this.data["mode"]===Vv.cIt_)for(s in t)if(t.hasOwnProperty(s)){e=r.indexOf(s);e>-1&&this.$pt_.push(n[e])}A.value>0&&this.$pt_.push(A)}else this.data["order"]===Xv.Ds_?this.$pt_=n.reverse():this.data["order"]===Xv.Ms_&&(this.$pt_=n);this.YIt_();this.omt_()}lmt_(){const t=t=>this.hmt_(Zv.Rect,t),i=i=>{i["outerArc"]!=null&&this.hmt_(Zv.Wpt_,i["outerArc"]);i["innerArc"]!=null&&this.hmt_(Zv.Wpt_,i["innerArc"]);i.umt_!=null&&i.umt_.forEach(t)};this.tmt_.forEach(i);this.imt_.forEach(i);this.tmt_=[];this.imt_=[]}omt_(){this.lmt_();let t=this.options["outerradius"],i=this.options["startangle"],s=-t,e=-t,A=t,n=t;const h=this.options["sliceshift"]["offsets"];let r,o;if(this.options["piemode"]===Jv.Fpt_){this.amt_=this.options["inclination3d"]/90;r=this.options["depth3d"]/this.amt_;o=Gn.TI_(1,this.amt_)}else{this.amt_=1;o=null}for(let l=0;l<this.$pt_.length;l++){this.$pt_[l].gmt_=this.$pt_[l].value/this.jpt_;const u=undefined,a=i+this.$pt_[l].gmt_*this.options["totalangle"];this.cmt_(this.$pt_[l],i,a);const g=this.$pt_[l].start*sb,c=this.$pt_[l].end*sb;this.Imt_(l,o);let I=o,f=null;h!=null&&h[l]!==0&&h[l]!=null&&(f=this.fmt_(this.$pt_[l],l));if(f!=null){s=Math.min(-t+f.x,s);e=Math.min(-t+f.y,e);A=Math.max(t+f.x,A);n=Math.max(t+f.y,n);I=o!=null?o.clone().translate(f.x,f.y):Gn.kI_(f.x,f.y)}this.$pt_[l]["arc"]=this.Cmt_(Zv.Opt_,{x:0,y:0,visible:this.$pt_[l].value!==0,outerradius:this.options["outerradius"],innerradius:this.options["innerradius"],startarc:g,endarc:c,linestyle:this.options["linestyle"]},I);if(this.options["piemode"]===Jv.Fpt_){this.$pt_[l]["arcBottom"]=this.Cmt_(Zv.Opt_,{x:0,y:r,outerradius:this.options["outerradius"],innerradius:this.options["innerradius"],startarc:g,endarc:c,linestyle:this.options["linestyle"]},I);const t=I.clone().bI_(0,Math.tan(g)),i=I.clone().bI_(0,Math.tan(c)),s=Math.cos(g),e=Math.cos(c),A=this.Cmt_(Zv.Rect,{left:this.options["innerradius"]*s,top:0,right:this.options["outerradius"]*s,bottom:r,linestyle:this.options["linestyle"]},t),n=this.Cmt_(Zv.Rect,{left:this.options["innerradius"]*e,top:0,right:this.options["outerradius"]*e,bottom:r,linestyle:this.options["linestyle"]},i),h=cb(g,c,A,n);let o,u;for(let t=0;t<h.length;t++){this.options["innerradius"]>0&&(o=this.Cmt_(Zv.Wpt_,{outerradius:this.options["innerradius"],startarc:h[t].end,endarc:h[t].start,height:r,linestyle:this.options["linestyle"]},I));u=this.Cmt_(Zv.Wpt_,{outerradius:this.options["outerradius"],startarc:h[t].end,endarc:h[t].start,height:r,linestyle:this.options["linestyle"]},I);const i={slice:this.$pt_[l],outerArc:u,innerArc:o,umt_:h[t].LK_,index:l};Ib(h[t].end)>Math.PI?this.tmt_.push(i):this.imt_.push(i)}}i=a}fb(this.tmt_,Ab,1);fb(this.imt_,nb,-1);let l=0;this.options["piemode"]===Jv.Fpt_&&(l=this.options["depth3d"]*this.amt_);if(this.options["modellimitsmode"]===Pv.Upt_)this.Lq_(new mA(s,e,A,n));else if(this.options["modellimitsmode"]===Pv.Lpt_){t+=Math.max.apply(null,this.options["sliceshift"]["offsets"]);this.Lq_(new mA(-t,-t,t,t+l))}else if(this.options["modellimitsmode"]===Pv.VI_){const t=this.options["maxouterradius"];this.Lq_(new mA(-t,-t,t,t))}else this.Lq_(new mA(-t,-t,t,t+l));this.dmt_()}cmt_(t,i,s){t.start=this.options["direction"]===zv.Tpt_?i:ib-s;t.Bmt_=t.start;t.Bmt_<0&&(t.Bmt_+=ib);t.Bmt_>ib&&(t.Bmt_-=ib);t.end=this.options["direction"]===zv.Tpt_?s:ib-i;t.wmt_=t.end;t.wmt_<0&&(t.wmt_+=ib);t.wmt_>ib&&(t.wmt_-=ib);let e=(t.start+t.end)/2;e>ib&&(e-=ib);e<0&&(e+=ib);t.mid=e;const A=e*sb;t.Qmt_=Math.sin(A);t.Emt_=Math.cos(A)}Imt_(t,i){const s=this.$pt_[t];s.label instanceof YC||(s.pmt_=s.label);const e=this.options["label"]["format"],A=e!==null?e(s.pmt_,s.value):null;if(A!==null&&A!==""){this.options["label"]["text"]=A;s.label=this.Cmt_(Zv.Vpt_,this.options["label"],i);this.mmt_(t);if(this.options["label"]["location"]!==Ov.Hz_)s.label.SE_(dA.ne_);else{s.label.SE_(this.options["label"]["direction"]===Wv.ux_&&s.mid>=_v&&s.mid<tb?dA.oe_:dA.he_);if(this.options["piemode"]===Jv.Fpt_){s.zpt_.scale(1,this.amt_);if(s.mid>=0&&s.mid<$v){s.zpt_.translate(0,this.options["depth3d"]);s.label.translate(0,this.options["depth3d"])}}}}}Cmt_(t,i,s){let e;const A=this.smt_[t];if(A.length===0){const s=undefined;e=new(0,ob[t])(i)}else{e=A.pop();e.dt_(i)}e.at_(s);return e}hmt_(t,i){this.smt_[t].length<rb?this.smt_[t].push(i):i.dispose()}dmt_(){if(this.options["label"]["location"]!==Ov.Hz_||this.options["label"]["direction"]!==Wv.ux_||this.$pt_.length===0)return;let t=0,i=-1/0;const s=[],e=this.options["showpercentagesthreshold"]*this.jpt_/100;for(let A=0;A<this.$pt_.length;++A){const n=this.$pt_[A].label;if(!(n instanceof YC))continue;const h=this.$pt_[A].value>=e&&this.$pt_[A].value!==0;n.nf_(h);this.$pt_[A].zpt_.nf_(h);if(h){s.push(A);if(i<this.$pt_[A].value){i=this.$pt_[A].value;t=s.length-1}}}if(s.length===0)return;const A=this.if_(),n=this.options["outerradius"]*this.options["outerradius"],h=s.length;let r=0;const o=undefined;let l,u=this.$pt_[s[t]].label.getBounds(),a=u,g=[],c=t,I={};for(let i=(t+1)%h;i!==t;i=(i+1)%h){const t=undefined;l=this.$pt_[s[i]].label.getBounds();if(l.$s_(a)){r=r||(l.getY()>u.getY()?1:-1);const t=A!=null?A.gI_(l).Ts_():l.Ts_();let s=(I[c]||0)+r*t;g.length===0&&g.push(c);if(a!==hb){hb.ce_(u);a=hb}const e=Math.min(Math.abs(l.we_()),Math.abs(l.Qe_())),h=Math.min(Math.abs(u.Ee_()+s),Math.abs(u.pe_()+s));if(e*e+h*h>=n){I[i]=s-(l.getY()-u.getY());const t=Math.min(a.getX(),l.getX()),e=Math.max(a.Qe_(),l.Qe_()),A=Math.min(a.getY(),l.getY()+I[i]),n=Math.max(a.pe_(),l.pe_()+I[i]);a.ce_(t,A,e,n)}else{s=a.getY()>0?l.pe_()-a.getY():l.getY()-a.pe_();for(let t=0;t<g.length;++t){I[g[t]]=I[g[t]]||0;I[g[t]]+=s}a.setY(a.getY()+s);a.union(l)}g.push(i)}else{a=l;if(g.length>0){Cb(this.$pt_,g,I,s);g=[];I={}}}u=l;c=i}Cb(this.$pt_,g,I,s)}YIt_(){this.Rf_=this.Rf_||{fillstyles:[],"selected-fillstyles":[]};this.options["fillstyles"]=this.options["fillstyles"]||[];this.options["selected-fillstyles"]=this.options["selected-fillstyles"]||[];for(let t=0;t<this.$pt_.length;t++){this.options["fillstyles"][t]||(this.options["fillstyles"][t]=new wr(new nA(Math.round((Math.random()+1)*127.5),Math.round((Math.random()+1)*127.5),Math.round((Math.random()+1)*127.5),255)));let i=il.BD_(this.options["fillstyles"][t]);this.options["autogradient"]===!0&&(i=ub(i.getColor()));this.Rf_["fillstyles"][t]=i;this.options["selected-fillstyles"][t]||(this.options["selected-fillstyles"][t]=this.options["createselectedstyle"](i));const s=il.BD_(this.options["selected-fillstyles"][t]);this.Rf_["selected-fillstyles"][t]=s}}mmt_(t){const i=this.$pt_[t],s=i.label,e=this.options["sliceshift"]["offsets"][t]||0,A=i.mid*sb,n=this.options["innerradius"]+e,h=this.options["outerradius"]+e,r=(n+h)/2;let o=s.getBounds(),l=this.sd_(),u;if(this.options["label"]["location"]===Ov.Hz_){const t=h,e=t+this.options["outsideline"]["length"],A=e+this.options["outsideline"]["pad"];s.gR_(A*i.Emt_,A*i.Qmt_);i.zpt_=this.Cmt_(Zv.Line,{from:new lA(t*i.Emt_,t*i.Qmt_),to:new lA(e*i.Emt_,e*i.Qmt_),visible:s.SG_()!=="",linestyle:this.options["outsideline"]["linestyle"]},null);u=!1}else if(this.options["label"]["direction"]===Wv.Ypt_){if(this.options["piemode"]===Jv.Fpt_){l=l?l.clone():new Gn;l.rotate(A).scale(1,this.amt_)}const t=new lA(n*i.Emt_,n*i.Qmt_),e=new lA(h*i.Emt_,h*i.Qmt_);l.transformPoint(t,t);l.transformPoint(e,e);const a=lA.Ss_(t,e);u=o.Ie_()>a;if(u){const i=o.Ie_()/(2*a),A=new lA(t.getX()+i*(e.getX()-t.getX()),t.getY()+i*(e.getY()-t.getY()));s.gR_(l.aI_(A))}else s.gR_(r*i.Emt_,r*i.Qmt_)}else{l=this.if_();o=l?l.gI_(o):o;const t=i.start*sb,A=i.end*sb,a=Math.sin(t),g=Math.tan(t),c=Math.sin(A),I=Math.tan(A),f=n*a,C=n*c,d=h*a,B=h*c;let w;const Q=o.Ie_()/2,E=o.Ts_()/2,p=h*h,m=n*n,y=[],D=e*i.Emt_,M=e*i.Qmt_,v=i.end-i.start===ib,b=v?0:r*i.Qmt_,N=[b-E,b+E];let S=v?0:r*i.Emt_;for(let t=0;t<N.length;t++){const i=N[t];i>f!=i>d&&y.push((i-M)/g+D);i>C!=i>B&&y.push((i-M)/I+D);const s=i*i;if(s<=p){w=Math.sqrt(p-s);y.push(w);y.push(-w)}if(s<=m){w=Math.sqrt(m-s);y.push(w);y.push(-w)}}const G=Math.max.apply(null,y.filter((function(t){return t<S}))),R=Math.min.apply(null,y.filter((function(t){return t>S})));u=S-G<Q||R-S<Q;if(u){S=(G+R)/2;u=S-G<Q||R-S<Q}s.gR_(S,b);if(!u){const e=Math.cos(t),r=Math.cos(A),o=hb.ce_(n*e,f,n*r,C);o.fe_(h*e,d);o.fe_(h*r,B);i.start<_v&&i.end>_v&&o.fe_(0,h);i.start<$v&&i.end>$v&&o.fe_(-h,0);i.start<tb&&i.end>tb&&o.fe_(0,-h);u=!o.Fe_(s.getBounds())}}s.nf_(!(i.value===0||u&&this.options["label"]["hideifdontfit"]));if(this.options["label"]["direction"]===Wv.Ypt_){s.rotate(A,s.uR_(),s.aR_());s.scale(1,this.amt_);s.tf_(s.aR_()/this.amt_)}}fmt_(t,i){return{x:this.options["sliceshift"]["offsets"][i]*t.Emt_,y:this.options["sliceshift"]["offsets"][i]*t.Qmt_}}ymt_(t){return this.Xpt_[t]!==!0?this.Rf_["fillstyles"][t]:this.Rf_["selected-fillstyles"][t]}Dmt_(t,i,s){for(let e=0;e<this.$pt_.length;++e){const A=this.$pt_[e][i],n=this.ymt_(e);if(A){A.iQ_(n);if(t.filter(A)){if(s){A.PC_(e);t.YR_(A)}A.render(t);s&&t.YR_(null)}}}}Mmt_(t){for(let i=0;i<this.$pt_.length;++i){const s=this.$pt_[i];s.zpt_&&t.filter(s.zpt_)&&s.zpt_.render(t);s.label instanceof YC&&t.filter(s.label)&&s.label.render(t)}}vmt_(t,i,s,e,A){for(let n=0;n<i.length;++n){const h=i[n],r=this.ymt_(h.index);let o=h[s];if(o){o.iQ_(r);t.filter(o)&&o.render(t)}for(let i=0;i<h.umt_.length;++i){const s=h.umt_[i];s.iQ_(r);t.filter(s)&&s.render(t)}o=h[e];if(o){o.iQ_(r);if(t.filter(o)){if(A){o.PC_(h.index);t.YR_(o)}o.render(t);A&&t.YR_(null)}}}}zY_(t){if(this.jpt_<=0)return;if(this.options["outerradius"]<=0)return;this.Xb_(t);const i=t.tk_(),s=this.qY_();for(let e=0;e<s;e++){const s=this.HY_(e);if(t.filter(s)){i&&t.YR_(s);s.render(t)}}this.bmt_(t);this.iN_(t)}OY_(t,i){this.Xb_(t);Au.fN_(this.YY_(),((i,s)=>{if(t.filter(i)){t.YR_(i);i.ad_(t,s)}else s()}),(()=>{this.bmt_(t);this.iN_(t);i()}))}bmt_(t){const i=t.tk_();t.rB_(null);if(this.options["piemode"]===Jv.kpt_){this.Dmt_(t,jv.Arc,i);this.Mmt_(t)}else{this.Dmt_(t,jv.qpt_);this.vmt_(t,this.tmt_,jv.Jpt_,jv.Ppt_);this.vmt_(t,this.imt_,jv.Ppt_,jv.Jpt_,i);this.Dmt_(t,jv.Arc,i);this.Mmt_(t)}}ht_(t){const i=this.getBounds();if(i!==null&&!i.Ce_(t)||t!==null&&!t.Ce_(i)){super.ht_(t);this.Amt_()}return this}ud_(t){if(!this.options["sliceshift"]["offsets"].some((function(t){return t>0})))return super.ud_(t);const i=yu.hS_(t,this.gt_());let s=this.getBounds();if(s!=null){s=s.clone();s.Le_(Math.max.apply(null,this.options["sliceshift"]["offsets"]))}return this.$C_()===!0&&su.gN_(s,this.ut_(),t.rS_(),i)}N_(){const t=super.N_();Pi(this.options,t);return t}dt_(t){if(t==null)return this;Pi(t,this.options);t=Es(t);super.dt_(t);this.setOptions(t);return this}Nmt_(){return this.$pt_==null||this.$pt_.length==null?0:this.$pt_.length}Smt_(t){const i=this.$pt_[t];return i==null?null:Ss({label:i.pmt_,value:i.value,percentage:i.gmt_,color:this.options["fillstyles"][t],angledegstart:i.Bmt_,angledegend:i.wmt_},["angleDegStart","angleDegEnd"],"DonutChart.getSliceByIndex")}Gmt_(t,i,s){const e=[],A=function(t){if(t===null)return;const i=t.zC_();i!==null&&e.indexOf(i)<0&&t instanceof Du&&e.push(i)};let n;n=this.getParent()!=null?new bC(this.getParent().if_()):new bC;Array.isArray(t)?n.iX_(A,this,t,i,!0):typeof t=="number"?n.iX_(A,this,t,i,2):t instanceof lA?n.iX_(A,this,t.getX(),t.getY(),2):n.iX_(A,this,t);s&&this.Rmt_(e);return e}Rmt_(t,i){i||(this.Xpt_={});t.forEach((t=>this.Xpt_[t]=!0));this.td_();return this}dispose(){this.nmt_();this.lmt_();this.rmt_();this.emt_&&this.emt_.off(UD.pct_,this.Zpt_);super.dispose()}};i=t([_s("geotoolkit.controls.shapes.DonutChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwicmVuZGVyQ29udGVudCI6InpZXyIsInJlbmRlckNvbnRlbnRBc3luYyI6Ik9ZXyIsInNldEJvdW5kcyI6Imh0XyIsImNoZWNrQ29sbGlzaW9uIjoidWRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFNsaWNlc0NvdW50IjoiTm10XyIsImdldFNsaWNlQnlJbmRleCI6IlNtdF8iLCJzZWxlY3RTbGljZXNBdCI6IkdtdF8iLCJoaWdobGlnaHRTbGljZXMiOiJSbXRfIn19fSAg"),Bb=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.vi_=Un.Ai_()}bi_(t,i){return t["attributename"]==="data"&&i instanceof db}Yi_(t){const i=t.getData()["values"];return i&&Object.keys(i).length>0?i:null}apply(t){t.setData({values:this.Ei_.current})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg"),wb=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.vi_=rA.Ai_()}bi_(t,i){return t["attributename"]==="labelTextColor"&&i instanceof db}Yi_(t){const i=t.N_();return i["label"]&&i["label"]["textstyle"]&&i["label"]["textstyle"].getColor()}apply(t){const i=t.N_();i["label"]&&i["label"]["textstyle"]&&i["label"]["textstyle"].setColor(this.Ei_.current)}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg"),Qb=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.vi_=Un.Ai_()}bi_(t,i){return t["attributename"]==="radius"&&i instanceof db}Yi_(t){const i=t.JV_();return i!=null?{outerradius:i["outerradius"],innerradius:i["innerradius"]}:null}apply(t){t.setOptions({outerradius:this.Ti_()["outerradius"],innerradius:this.Ti_()["innerradius"]})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(Bb);zn.Ai_().uf_(wb);zn.Ai_().uf_(Qb);var Eb=Ci({kmt_:"LegendItemOptionsChanged",Fmt_:"LegendSourceStateChanged"},2,"eyJMZWdlbmRJdGVtT3B0aW9uc0NoYW5nZWQiOiJrbXRfIiwiTGVnZW5kU291cmNlU3RhdGVDaGFuZ2VkIjoiRm10XyJ9"),pb=Ci(function(){let i=class t extends $n{constructor(t,i){super();this.xmt_=t;this.Lmt_=Pi(i,{})}Uw_(){return this.xmt_}Umt_(){return Pi(this.Lmt_,{})}Ymt_(t){Pi(t,this.Lmt_);const i=Pi(this.Lmt_,{});this.notify(Eb.kmt_,this.xmt_,i);return this}dispose(){this.xmt_=null;this.Lmt_=null;super.dispose()}};i.prototype.Tmt_=Zi;i=t([_s("geotoolkit.controls.shapes.ShapeLegendAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPYmplY3QiOiJVd18iLCJjcmVhdGVMZWdlbmRJdGVtcyI6IlRtdF8iLCJnZXRMZWdlbmRJdGVtT3B0aW9ucyI6IlVtdF8iLCJzZXRMZWdlbmRJdGVtT3B0aW9ucyI6IlltdF8ifX19");var mb=Ci({mot_:"change",TCt_:"StateChanged"},2,"eyJDaGFuZ2UiOiJtb3RfIiwiU3RhdGVDaGFuZ2VkIjoiVEN0XyJ9"),yb=Ci({L$_:0,Kmt_:1,Hmt_:2,kv_:4},2,"eyJEZWZhdWx0IjoiTCRfIiwiSG92ZXJlZCI6IkttdF8iLCJTZWxlY3RlZCI6IkhtdF8iLCJEaXNhYmxlZCI6Imt2XyJ9"),Db=Ci(function(){let i=class t extends sI{constructor(t){let i,s;if(t instanceof $n)s=t;else{i=t;s=t?.object}super(i);this.xmt_=s;this.Ei_=yb.L$_}Uw_(){return this.xmt_}lp_(t){this.xmt_=t;return this}setOptions(t){return this}vW_(){return $i()}dispose(){this.xmt_=null;super.dispose()}qmt_(t){this.Ei_=this.Ei_^t;this.Jmt_(this.Ei_);this.notify(mb.TCt_,this,this.Ei_);return this}setState(t){if(this.Ei_===t)return this;this.Ei_=t;this.Jmt_(t);this.notify(mb.TCt_,this,t);return this}getState(){return this.Ei_}Jmt_(t){}};i=t([_s("geotoolkit.controls.shapes.LegendItem")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPYmplY3QiOiJVd18iLCJzZXRPYmplY3QiOiJscF8iLCJ1cGRhdGVHZW9tZXRyeSI6InZXXyIsInRvZ2dsZVN0YXRlIjoicW10XyIsInVwZGF0ZUl0ZW1TdGF0ZSI6IkptdF8ifX19");var Mb=Ci(function(){let i=class t extends Db{constructor(t,i){super(t);this.UU_={text:"",textstyle:new qa({color:"black",font:"9px Arial"}),margintext:2,internalpadding:4,alignment:dA.he_,background:{linestyle:null,fillstyle:null},symbol:{width:30,height:30,painter:tp,linestyle:new hl,fillstyle:null}};this.aq_(!0);this.kY_(!0);this.Pmt_=new dp;this.DIt_=new ma(this.UU_["symbol"]);this._q_=new YC;this.GY_([this.Pmt_,this.DIt_,this._q_]);this.dt_(i)}b_(t){this.Pmt_=t.Pmt_?t.Pmt_.clone():null;this.DIt_=t.DIt_?t.DIt_.clone():null;this._q_=t._q_?t._q_.clone():null;return this}N_(){const t=super.N_();delete t["children"];return Pi(this.UU_,t)}dt_(t){if(!t)return this;if((t=Es(t))["children"]){ki("geotoolkit.controls.shapes.SymbolLegendItem#setProperties: parameter options.children is not supported");delete t["children"]}super.dt_(t);if(t["textstyle"]!=null){this._q_.g_(t["textstyle"],!(t["textstyle"]instanceof qa));t["textstyle"]=this._q_.FE_()}this.UU_=Pi(t,this.UU_,!0);const i=this.UU_["symbol"];if(i!=null){this.DIt_.rB_(i["linestyle"],!(i["linestyle"]instanceof hl));i["linestyle"]=this.DIt_.gt_();this.DIt_.iQ_(i["fillstyle"],!(i["fillstyle"]instanceof wr));i["fillstyle"]=this.DIt_.ct_()}const s=this.UU_["internalpadding"],e=i!=null?i["width"]:0;this._q_.dt_({text:this.UU_["text"]});const A=this._q_.Ie_()+e+s*2+this.UU_["margintext"]*2,n=Math.max(i!=null?i["height"]:0,this._q_.Ts_())+s*2;this.Cq_(A);this.dq_(n);let h,r;if(this.UU_["alignment"]===dA.oe_){h=A-e/2-s;r=this.UU_["margintext"]}else{h=e/2+s;r=e+this.UU_["margintext"]+s}const o=this.UU_["background"];this.Pmt_.ht_(s,s,A-s,n-s);o!=null&&this.Pmt_.rB_(o["linestyle"]).iQ_(o["fillstyle"]);i!=null?this.DIt_.dt_({ax:h,ay:n/2,width:e,height:i["height"],alignment:dA.ne_,sizeisindevicespace:!1,painter:i["painter"],visible:!0}):this.DIt_.nf_(!1);this._q_.dt_({ax:r,ay:n/2,alignment:dA.he_});this.vn_();return this}JV_(){ki("geotoolkit.controls.shapes.SymbolLegendItem.prototype.getOptions is deprecated since 4.0, use getProperties instead");return this.N_()}setOptions(t){ki("geotoolkit.controls.shapes.SymbolLegendItem.prototype.setOptions is deprecated since 4.0, use setProperties instead");return this.dt_(t)}};i=t([_s("geotoolkit.controls.shapes.SymbolLegendItem")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRPcHRpb25zIjoiSlZfIn19fSAg");var vb=Ci(function(){let i=class t extends pb{constructor(t,i){super(t,i);this.Vmt_=(t,i)=>{this.notify(Eb.Fmt_,i)};t.on(rh.uC_,this.Vmt_)}Tmt_(t){t=Pi(t,this.Umt_());const i=this.Uw_(),s=[];for(let e=0;e<i.Nmt_();e++){Pi({text:i.Smt_(e).label,symbol:{linestyle:i.JV_()["linestyle"],fillstyle:i.JV_()["fillstyles"][e]}},t);const A=new Mb(i,t);s.push(A)}return s}dispose(){const t=undefined;this.Uw_().off(rh.uC_,this.Vmt_);super.dispose()}};i=t([_s("geotoolkit.controls.shapes.DonutChartLegendAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVMZWdlbmRJdGVtcyI6IlRtdF8ifX19");var Ob=Ci({CDt_:"STEP",dDt_:"LINEARINBOUND",BDt_:"LINEARLOOP",wDt_:"LINEARMIRROR"},2,"eyJTdGVwIjoiQ0R0XyIsIkxpbmVhckluYm91bmQiOiJkRHRfIiwiTGluZWFyTG9vcCI6IkJEdF8iLCJMaW5lYXJNaXJyb3IiOiJ3RHRfIn0g");const Wb=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},zb=256,Xb=256,jb=256,Zb=0;var _b=Ci(function(){let i=class t extends Du{constructor(t){let i;i=t instanceof kb||ns(t)?{data:t}:t;super(i);this.Us_=null;this.bounds=null;this.QDt_=!1;this.EDt_=!1;this.bft_=Number.POSITIVE_INFINITY;this.Nft_=Number.NEGATIVE_INFINITY;this.pDt_=null;this.mDt_=null;this.yDt_=null;this.DDt_=null;this.MDt_=[[]];this.vDt_=null;this.bDt_=null;this.NDt_=!1;this.SDt_=null;this.GDt_=Ob.CDt_;this.RDt_=Ob.CDt_;this.kDt_=!0;this.FDt_=!0;this.sK_=je.ts_();this.Cm_=null;this.xDt_=[];this.LDt_=0;this.UDt_=0;this.YDt_=!1;this.TDt_=null;this.KDt_=!1;this.HDt_=new qa;this.qDt_=new YC;this.JDt_=null;this.rd_(!1);i&&i["data"]&&this.setData(i["data"]);this.setOptions(i);this.rd_(!0)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setData(t["data"]);this.setOptions(t);return this}N_(){let t=super.N_();t=qi(t,this.JV_());return t}rt_(){if(!this.Us_)return null;let t,i,s,e;if(this.GDt_===Ob.dDt_){t=0;i=this.pDt_-1}else if(this.GDt_===Ob.BDt_){t=this.YDt_||Array.isArray(this.LDt_)?0:this.LDt_;i=this.pDt_+(this.YDt_||Array.isArray(this.LDt_)?0:this.LDt_)}else{t=-.5+(this.YDt_||Array.isArray(this.LDt_)?0:this.LDt_);i=this.pDt_-.5+(this.YDt_||Array.isArray(this.LDt_)?0:this.LDt_)}if(this.RDt_===Ob.dDt_){s=0;e=this.mDt_-1}else if(this.RDt_===Ob.BDt_){s=this.YDt_||Array.isArray(this.UDt_)?0:this.UDt_;e=this.mDt_+(this.YDt_||Array.isArray(this.UDt_)?0:this.UDt_)}else{s=-.5+(this.YDt_||Array.isArray(this.UDt_)?0:this.UDt_);e=this.mDt_-.5+(this.YDt_||Array.isArray(this.UDt_)?0:this.UDt_)}return new mA(t,s,i,e)}ht_(t){t instanceof mA&&(this.bounds=t);return this}getBounds(){return this.bounds?this.bounds:this.rt_()}setOptions(t){if(t==null)return this;t["bounds"]!=null&&this.ht_(t["bounds"]);t["colplottype"]!=null&&this.PDt_(t["colplottype"]);t["rowplottype"]!=null&&this.VDt_(t["rowplottype"]);t["min"]==null&&t["max"]==null||this.Gwt_(t["min"],t["max"]);t["offsetx"]==null&&t["offsety"]==null||this.ODt_(t["offsetx"],t["offsety"]);t["keepmodellimits"]!=null&&this.WDt_(t["keepmodellimits"]);if(t["labels"]!=null){t["labels"]["visible"]&&this.zDt_(t["labels"]["visible"]);t["labels"]["textstyle"]&&this.XDt_(t["labels"]["textstyle"])}if(t["colorprovider"]!=null)this.UBt_(t["colorprovider"]);else if(this.Cm_==null&&NA.Ve_(this.bft_)&&NA.Ve_(this.Nft_)){this.Cm_=new bo({values:[this.bft_,(this.bft_+this.Nft_)/2,this.Nft_],colors:["rgba(0, 0,255,1)","rgba(0,255,0,1)","rgba(255,0,0,1)"]});this.xDt_=this.jDt_(this.Cm_,jb)}this.td_();return this}JV_(){return{rowplottype:this.ZDt_(),colplottype:this._Dt_(),min:this.bft_,max:this.Nft_,offsetx:this.LDt_,offsety:this.UDt_,keepmodellimits:this.$Dt_(),labels:{visible:this.tMt_(),textstyle:this.iMt_()},colorprovider:this.Swt_()}}WDt_(t){this.YDt_=typeof t=="boolean"?t:this.YDt_;return this}$Dt_(){return this.YDt_}ODt_(t,i){this.LDt_=t!=null?t:this.LDt_;this.UDt_=i!=null?i:this.UDt_;if(Array.isArray(this.LDt_))for(let t=0;t<this.LDt_.length;t++)this.LDt_[t]<0&&(this.LDt_[t]=(this.pDt_+this.LDt_[t])%this.pDt_);else{if(!Wb(this.LDt_))return this;this.LDt_<0&&(this.LDt_=(this.pDt_+this.LDt_)%this.pDt_)}if(Array.isArray(this.UDt_))for(let t=0;t<this.UDt_.length;t++)this.UDt_[t]<0&&(this.UDt_[t]=(this.mDt_+this.UDt_[t])%this.mDt_);else{if(!Wb(this.UDt_))return this;this.UDt_<0&&(this.UDt_=(this.mDt_+this.UDt_)%this.mDt_)}this.YDt_||this.notify(rh.nC_,this);this.td_();return this}sMt_(){return{offsetx:this.LDt_,offsety:this.UDt_}}Gwt_(t,i){this.bft_=Wb(t)?t:this.bft_;this.Nft_=Wb(i)?i:this.Nft_;this.td_();return this}UBt_(t){if(this.Cm_===t)return this;this.Cm_!=null&&this.iC_(this.Cm_,mo.sC_,this.oQ_());this.Cm_=t instanceof Mo?t:Mo.Dm_(t["type"]).Wi_(t);this.Cm_!=null&&this.tC_(this.Cm_,mo.sC_,this.oQ_());this.xDt_=this.jDt_(this.Cm_,jb);this.vn_();this.td_();return this}Swt_(){return this.Cm_}getColor(t,i,s){const e=t.Em_(),A=t.pm_();if(s<=e)return i[0];if(s>=A)return i[i.length-1];const n=(A-e)/i.length,h=Math.round((s-e)/n);return i[h<i.length?h:i.length-1]}jDt_(t,i){const s=[],e=t.Em_(),A=undefined,n=(t.pm_()-e)/i;for(let A=0;A<i;A++)s[A]=t.getColor(e+n*A);return s}PDt_(t){if((t===Ob.dDt_||t===Ob.CDt_||t===Ob.BDt_||t===Ob.wDt_)&&this.GDt_!==t){this.GDt_=t;this.notify(rh.nC_,this);this.td_()}return this}_Dt_(){return this.GDt_}VDt_(t){if((t===Ob.dDt_||t===Ob.CDt_||t===Ob.BDt_||t===Ob.wDt_)&&this.RDt_!==t){this.RDt_=t;this.notify(rh.nC_,this);this.td_()}return this}ZDt_(){return this.RDt_}getData(){return this.Us_}setData(t){if(t==null)return this;(this.Us_ instanceof qb||this.Us_ instanceof Pb)&&this.Us_.off(UD.pct_,this.eMt_);if(t instanceof qb||t instanceof Pb){t.on(UD.pct_,this.eMt_.bind(this));this.Us_=t}else Array.isArray(t)?this.Us_=new Vb(t):this.Us_=t;this.mDt_=this.Us_.iyt_();this.DDt_=this.mDt_;this.pDt_=this.Us_.syt_();this.yDt_=this.pDt_;for(let t=0;t<this.mDt_;t++)for(let i=0;i<this.pDt_;i++){const s=this.getValue(this.Us_,t,i);s>this.Nft_&&(this.Nft_=s);s<this.bft_&&(this.bft_=s)}this.td_();return this}eMt_(){this.FDt_=!0;this.td_()}AMt_(t,i,s){let e=this.SDt_;if(e==null||e.Ie_()!==i||e.Ts_()!==s){e=i!==0&&s!==0?t.ZR_(i,s,!0):null;this.SDt_=e;if(e==null)return null;this.TDt_=e.gJ_(i,s);this.kDt_=!1}else if(this.kDt_===!0){this.nMt_(this.TDt_,e);this.kDt_=!1}return this.TDt_}nMt_(t,i){if(t==null)return;i&&this.sK_&&i.clear();const s=t.getData(),e=4*t.Ie_()*t.Ts_();for(let t=0;t<e;++t)s[t]=0}getValue(t,i,s){return i>=t.iyt_()||s>=t.syt_()?0:t.getValue(i,s)}hMt_(t,i,s,e){let A,n,h,r,o,l=0,u,a=0,g=[];this.mDt_=this.Us_.iyt_();this.pDt_=this.Us_.syt_();if(this.vDt_===s&&Math.floor(s)!==t||this.bDt_===s&&Math.floor(e)!==i)this.NDt_=!1;else{this.vDt_=s;this.bDt_=e;this.NDt_=!0}this.QDt_=this.pDt_>2*s;this.EDt_=this.mDt_>2*e;if(this.NDt_&&this.QDt_||this.FDt_&&this.QDt_){A=Math.floor(this.pDt_/s);a=Math.floor(this.pDt_/A);u=this.pDt_-a*A;for(h=0;h<this.mDt_;h++){g[h]=[];for(r=0;r<a;r++){for(o=0;o<A;o++)l+=this.getValue(this.Us_,h,A*r+o);g[h].push(l/A);l=0}if(u){for(r=this.pDt_-u;r<this.pDt_;r++)l+=this.getValue(this.Us_,h,r);g[h].push(l/u);l=0}}this.yDt_=a+(u?1:0);this.MDt_=g}if(this.NDt_&&this.EDt_||this.FDt_&&this.EDt_){n=Math.floor(this.mDt_/e);a=Math.floor(this.mDt_/n);u=this.mDt_-a*n;const t=g.length===0?this.Us_:this.MDt_,i=g.length===0?this.pDt_:this.yDt_;g=[];for(h=0;h<a;h++){g[h]=[];for(r=0;r<i;r++){for(o=0;o<n;o++)l+=this.getValue(t,h*n+o,r);g[h].push(l/n);l=0}}if(u){g[a]=[];for(r=0;r<i;r++){for(h=this.mDt_-u;h<this.mDt_;h++)l+=this.getValue(t,h,r);g[a].push(l/u);l=0}}this.DDt_=a+(u?1:0);this.MDt_=g}this.FDt_=!1}It_(){const t=this.getBounds(),i=this.rt_();return Gn.LI_(i,t)?Gn.xI_(i,t,!1,!1,!1):null}sd_(){const t=this.It_(),i=this.ut_();return i==null?t:t==null?i:Gn.multiply(i,t)}render(t){if(this.Cm_==null||this.Us_==null)return;const i=(t=this.sd_()!=null?t.uS_(this.sd_()):t).Ji_();if(t.tk_()){const i=this.rt_();t.iQ_(wr.EQ_);t.pR_(i.x,i.y,i.width,i.height)}const s=t.rS_(),e=s.we_(),A=s.Qe_(),n=s.Ee_(),h=s.pe_(),r=i.rn_(new mA(e,n,A,h));r.ce_(Math.round(r.we_()),Math.round(r.Ee_()),Math.round(r.Qe_()),Math.round(r.pe_()));const o=i.rn_(new mA(this.rt_()));o.ce_(Math.round(o.we_()),Math.round(o.Ee_()),Math.round(o.Qe_()),Math.round(o.pe_()));const l=r.Ie_(),u=r.Ts_(),a=o.Ie_(),g=o.Ts_();r.intersect(o);if(r.isEmpty())return;this.hMt_(l,u,a,g);this.yDt_=this.QDt_?this.yDt_:this.pDt_;this.DDt_=this.EDt_?this.DDt_:this.mDt_;this.DDt_===this.mDt_&&this.yDt_===this.pDt_&&(this.MDt_=this.Us_);const c=(this.yDt_-1)/(this.pDt_-1),I=(this.DDt_-1)/(this.mDt_-1);this.rMt_(t,r,c,I);this.KDt_&&this.x__(t);if(t.tk_()){t.mO_(new Proxy(this.JDt_.slice(0),Fs));t.mO_(new jf(this,this.JDt_))}}getSelection(){return this.JDt_}x__(t){const i=this.MDt_,s=i.iyt_(),e=i.syt_();for(let A=0;A<s;A++)for(let s=0;s<e;s++){this.qDt_.dt_({ax:!Array.isArray(this.LDt_)&&s>=this.LDt_?s:s+this.yDt_,ay:!Array.isArray(this.UDt_)&&A>=this.UDt_?A:A+this.DDt_,text:this.getValue(i,A,s).toString(),textstyle:this.HDt_});this.qDt_.render(t)}}zDt_(t){if(this.KDt_!==t){this.KDt_=t;this.td_()}return this}tMt_(){return this.KDt_}XDt_(t,i){if(this.HDt_===t)return this;this.HDt_=qa.jD_(this,this.HDt_,t,i,this.oQ_());this.td_();return this}iMt_(){return this.HDt_}rMt_(t,i,s,e){this.JDt_=[];const A=t.Ji_(),n=t.XR_();let h,r,o,l,u,a,g,c,I;const f=n.wI_(),C=n.QI_(),d=n.BI_(),B=n.sI_(),w=i.we_()*n.BI_()+i.Ee_()*n.wI_()+n.EI_(),Q=i.Ee_()*n.sI_()+i.we_()*n.QI_()+n.pI_();if(t.tk_()){const t=i.Qe_()*n.BI_()+i.pe_()*n.wI_()+n.EI_(),A=i.pe_()*n.sI_()+i.Qe_()*n.QI_()+n.pI_(),h=this.oMt_(w,this.GDt_,s,0,this.yDt_).position,r=this.oMt_(Q,this.RDt_,e,0,this.DDt_).position,o=this.oMt_(t,this.GDt_,s,0,this.yDt_).position,l=this.oMt_(A,this.RDt_,e,0,this.DDt_).position,u=Math.min(h,o),a=Math.max(h,o),g=Math.min(r,l),c=Math.max(r,l);for(let t=u;t<=a;++t)for(let i=g;i<=c;++i)this.JDt_.push(new lA(t,i));return}let E=0;const p=Math.min(zb,i.Ie_()),m=Math.min(Xb,i.Ts_()),y=Math.ceil(i.Ie_()/p),D=Math.ceil(i.Ts_()/m);let M=!1,v=0,b=0,N=0,S=0;if(!Array.isArray(this.LDt_)){v=this.YDt_&&this.GDt_!==Ob.BDt_?w+this.LDt_:w;N=this.GDt_===Ob.dDt_?this.pDt_-1+v:this.pDt_+v}if(!Array.isArray(this.UDt_)){b=this.YDt_&&this.RDt_!==Ob.BDt_?Q+this.UDt_:Q;S=this.RDt_===Ob.dDt_?this.mDt_-1+b:this.mDt_+b}this.TDt_=this.AMt_(t,p,m);if(this.TDt_)for(let n=0;n<D;n++)for(let D=0;D<y;D++){E=0;I=this.TDt_.getData();for(u=n*m;u<n*m+m;u++){if(M){M=!1;break}for(a=D*p;a<D*p+p;a++){if(Array.isArray(this.LDt_)||Array.isArray(this.UDt_))if(!Array.isArray(this.LDt_)&&Array.isArray(this.UDt_)){o=f*u+d*a+v;if(o>N||o<-1){E+=4*(D*p+p-a);break}h=this.oMt_(o,this.GDt_,s,this.pDt_,this.yDt_);b=(this.UDt_[h.position]?this.UDt_[h.position]:0)+Q;l=C*a+B*u+b;S=this.RDt_===Ob.dDt_?this.mDt_-1+b:this.RDt_===Ob.BDt_?this.mDt_+b:this.mDt_-.5+b;if(l>S||l<-1){M=!0;break}r=this.oMt_(l,this.RDt_,e,this.mDt_,this.DDt_)}else{if(!Array.isArray(this.LDt_)||Array.isArray(this.UDt_))throw new Error("It is not supported to set array of offsets for both column and row");l=C*a+B*u+b;if(l>S||l<-1){M=!0;break}r=this.oMt_(l,this.RDt_,e,this.mDt_,this.DDt_);v=(this.LDt_[r.position]?this.LDt_[r.position]:0)+w;o=f*u+d*a+v;N=this.GDt_===Ob.dDt_?this.pDt_-1+v:this.GDt_===Ob.BDt_?this.pDt_+v:this.pDt_-.5+v;if(o>N||o<-1){E+=4*(D*p+p-a);break}h=this.oMt_(o,this.GDt_,s,this.pDt_,this.yDt_)}else{o=f*u+d*a+v;l=C*a+B*u+b;if(o>N||o<-1){E+=4*(D*p+p-a);break}if(l>S||l<-1){M=!0;break}h=this.oMt_(o,this.GDt_,s,this.pDt_,this.yDt_);r=this.oMt_(l,this.RDt_,e,this.mDt_,this.DDt_)}g=this.getValue(this.MDt_,r.position,h.position)*(1-h.lMt_)*(1-r.lMt_)+this.getValue(this.MDt_,r.position,h.next)*h.lMt_*(1-r.lMt_)+this.getValue(this.MDt_,r.next,h.position)*r.lMt_*(1-h.lMt_)+this.getValue(this.MDt_,r.next,h.next)*h.lMt_*r.lMt_;c=this.getColor(this.Cm_,this.xDt_,g);I[E++]=c.red;I[E++]=c.green;I[E++]=c.blue;I[E++]=c.alpha}}this.SDt_.km_(this.TDt_,0,0);t.dI_(new Gn);t.drawImage(this.SDt_,0,0,this.SDt_.Ie_(),this.SDt_.Ts_(),i.we_()+D*p,i.Ee_()+n*m,this.SDt_.Ie_(),this.SDt_.Ts_());t.dI_(A)}}uMt_(t){const i=undefined;t=this.if_().aI_(t);if(this.rt_().contains(t.x,t.y)){t.x=this.oMt_(t.x,this.GDt_,(this.yDt_-1)/(this.pDt_-1),this.pDt_,this.yDt_)["position"];t.y=this.oMt_(t.y,this.RDt_,(this.DDt_-1)/(this.mDt_-1),this.mDt_,this.DDt_)["position"];return t}return null}$X_(t,i,s,e,A){const n=t=>t instanceof jf&&t.GO_()===this;if(t instanceof lA&&(i==null||i===0))return this.uMt_(t);e===void 0&&(e=!0);let h,r,o;if(t instanceof mA)h=t.clone();else if(t instanceof lA){i=i||Zb;h=new mA(t.x-i,t.y-i,t.x+i,t.y+i)}const l=this.getRoot();if(h!=null&&ne(l)){const t=l.rt_();if(s===fg.ax_){h.setY(t.getY());h.Be_(t.Ts_())}else if(s===fg.ux_){h.setX(t.getX());h.de_(t.Ie_())}r=[h.we_(),h.Qe_(),h.Qe_(),h.we_()];o=[h.Ee_(),h.Ee_(),h.pe_(),h.pe_()]}else if(t!=null&&Array.isArray(t["x"])&&Array.isArray(t["y"])){r=t["x"];o=t["y"]}if(r!=null&&r.length>0){const t=bC.select(this.getRoot(),r,o,e,A).filter(n);return t.length>0?t[0].getData():null}return null}oMt_(t,i,s,e,A){let n,h,r;if(i===Ob.BDt_){t>=e&&(t-=e);t*=s;n=Math.floor(t);h=t-n;r=t>A-1?0:n+1}else if(i===Ob.wDt_){t>=e&&(t-=e);if((t*=s)>A-1||t<0){n=Math.round(t);n=n===A?A-1:n;h=0}else{n=Math.floor(t);h=t-n}r=n+1}else if(i===Ob.dDt_){t*=s;n=Math.floor(t);r=n+1;h=t-n}else{t>=e-.5&&(t-=e);t*=s;n=Math.round(t);n=n===A?A-1:n;r=n+1;h=0}return{position:n,next:r,lMt_:h}}dispose(){(this.Us_ instanceof qb||this.Us_ instanceof Pb)&&this.Us_.off(UD.pct_,this.eMt_);super.dispose()}};i=t([_s("geotoolkit.controls.shapes.HeatMap")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0TW9kZWxMaW1pdHMiOiJydF8iLCJzZXRCb3VuZHMiOiJodF8iLCJnZXRPcHRpb25zIjoiSlZfIiwic2V0S2VlcE1vZGVsTGltaXRzIjoiV0R0XyIsImlzS2VlcE1vZGVsTGltaXRzIjoiJER0XyIsInNldE1vZGVsT2Zmc2V0IjoiT0R0XyIsImdldE1vZGVsT2Zmc2V0Ijoic010XyIsInNldE1pbk1heCI6Ikd3dF8iLCJzZXRDb2xvclByb3ZpZGVyIjoiVUJ0XyIsImdldENvbG9yUHJvdmlkZXIiOiJTd3RfIiwic2V0Q29sUGxvdE1vZGUiOiJQRHRfIiwiZ2V0Q29sdW1uUGxvdE1vZGUiOiJfRHRfIiwic2V0Um93UGxvdE1vZGUiOiJWRHRfIiwiZ2V0Um93UGxvdE1vZGUiOiJaRHRfIiwiZ2V0Q29udGVudHNUcmFuc2Zvcm0iOiJJdF8iLCJnZXRXb3JsZFRyYW5zZm9ybSI6InNkXyIsInNldExhYmVsc1Zpc2libGUiOiJ6RHRfIiwiaXNMYWJlbHNWaXNpYmxlIjoidE10XyIsInNldExhYmVsc1RleHRTdHlsZSI6IlhEdF8iLCJnZXRMYWJlbHNUZXh0U3R5bGUiOiJpTXRfIiwiaGl0VGVzdCI6IiRYXyJ9fX0g");var $b=Ci({aMt_:"dataUpdated",gMt_:"modelLimitsUpdated",cMt_:"binsUpdated"},2,"eyJEYXRhVXBkYXRlZCI6ImFNdF8iLCJNb2RlbExpbWl0c1VwZGF0ZWQiOiJnTXRfIiwiQmluc1VwZGF0ZWQiOiJjTXRfIn0g"),tN={W_:"None",z_:"Left",X_:"Right"},iN=Ci({IMt_:"absolute",fMt_:"normalized",CMt_:"relative"},2,"eyJBYnNvbHV0ZSI6IklNdF8iLCJOb3JtYWxpemVkIjoiZk10XyIsIlJlbGF0aXZlIjoiQ010XyJ9"),sN=Ci({kv_:"disabled",Rv_:"enabled"},2,"eyJEaXNhYmxlZCI6Imt2XyIsIkVuYWJsZWQiOiJSdl8ifSAg"),eN=Ci({Dt_:"linear",Ay_:"logarithmic"},2,"eyJMaW5lYXIiOiJEdF8iLCJMb2dhcml0aG1pYyI6IkF5XyJ9");const AN=function(t,i,s,e){return{minvalue:t+i*s,maxvalue:t+i*(s+1),binnumber:s,frequency:e[s]}},nN=t=>{const i=typeof t=="string"||typeof t=="number"?+t:NaN;return!(i<0)&&i===(i|0)},hN=t=>+t,rN=function(t){const i={length:function(t){ki("Access as an array is deprecated with 4.0. Use bins instead");return t.length},bins:function(t){return t}},s=undefined;return new Proxy(t,{get:function(t,s,e){if(nN(s)){s=hN(s);ki("Access as an array is deprecated with 4.0. Use bins instead");return t[s]!=null?t[s]["binnumber"]:void 0}return s in i?i[s](t):Reflect.get(t,s,e)},set:function(t,i,s,e){return!1}})};var oN=Ci(function(){let i=class t extends su{constructor(t,i,s){const e=qi(t,{data:t instanceof Array?t:null,bounds:i instanceof mA?i:null,bins:s,frequencytype:iN.IMt_,accumulatedmode:sN.kv_,histogrammode:eN.Dt_,fillstyle:"rgba(128,100,255,1.0)",linestyle:"rgba(148,120,255,1.0)",autogradient:!1,binspacing:100,verticalscale:100,logstartvalue:0,highlightstyle:"#ffc0cbff",highvalueinclusive:!0,minvalue:null,maxvalue:null,neatlimitsx:!1,neatlimitsy:!1,unit:null,flipedx:!1,orientation:fg.ax_},!0);super(e);this.dMt_=e["highvalueinclusive"];this.ldt_=null;this.BMt_=[];this.gQt_=null;this.wMt_=null;this.Zut_=0;this.QMt_=!1;this.EMt_=0;if(e["minvalue"]!=null&&e["maxvalue"]!=null){this.pMt_=!0;this.iIt_=e["minvalue"];this.sIt_=e["maxvalue"]}else{this.pMt_=!1;this.iIt_=0;this.sIt_=1}this.mMt_=e["neatlimitsx"];this.yMt_=e["neatlimitsy"];this.DMt_=[];this.MMt_=[];this.vMt_=[];this.bMt_=e["logstartvalue"];this.NMt_=0;this.SMt_=0;this.GMt_=0;this.RMt_=0;this.kMt_=[];this.FMt_=null;this.bounds=e["bounds"];this.xMt_=null;this.LMt_=!1;this.UMt_=e["binspacing"];this.YMt_=!1;this.TMt_=0;this.KMt_=0;this.HMt_=null;this.qMt_=null;this.JMt_=!1;this.PMt_={};this.VMt_=e["verticalscale"];this.OMt_=e["flipedx"];this.$K_=e["orientation"];this.WMt_=!1;this.zMt_=e["frequencytype"];this.XMt_=e["accumulatedmode"];this.jMt_=e["histogrammode"];this.ZMt_=[];this.UQt_=null;this.RBt_=[];this._Mt_={};this.jmt_=this.$Mt_.bind(this);this.tvt_=this.$Mt_.bind(this);this.ivt_=this.svt_.bind(this);e["data"]!=null&&this.setData(e);if(e["bins"]!=null)this.Wut_(e["bins"]);else if(e["binstep"]!=null)this.evt_(e["binstep"]);else{this.YMt_=!0;this.Avt_()}this.nvt_(e["autogradient"]);this.hvt_(e["highlightstyle"]);e["unit"]!==void 0&&this.KD_(e["unit"])}setData(t,i,s){if(Array.isArray(t)||t instanceof zD||t instanceof bM){this.rvt_(t);this.setOptions({minvalue:i,maxvalue:s});return this}const e=qi(t,{data:null,minvalue:i,maxvalue:s});e["data"]!=null&&this.rvt_(e["data"]);this.setOptions(e);return this}getData(){this.ovt_();return{data:this.BMt_,minvalue:this.iIt_,maxvalue:this.sIt_}}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["data"]!==void 0?this.setData(t["data"]):this.setOptions(t);return this}setOptions(t){t["autominmax"]===!0&&this.lvt_();if(t["minvalue"]!=null&&t["maxvalue"]!=null){this.pMt_=!0;this.iIt_=t["minvalue"];this.sIt_=t["maxvalue"]}t["neatlimitsx"]!=null&&(this.mMt_=t["neatlimitsx"]);t["neatlimitsy"]!=null&&(this.yMt_=t["neatlimitsy"]);t["logstartvalue"]!=null&&(this.bMt_=t["logstartvalue"]);t["binspacing"]!=null&&(this.UMt_=t["binspacing"]);t["verticalscale"]!=null&&(this.VMt_=t["verticalscale"]);t["frequencytype"]!=null&&(this.zMt_=t["frequencytype"]);t["accumulatedmode"]!=null&&(this.XMt_=t["accumulatedmode"]);t["histogrammode"]!=null&&(this.jMt_=t["histogrammode"]);t["flipedx"]!=null&&(this.OMt_=t["flipedx"]);t["orientation"]!=null&&this.setOrientation(t["orientation"]);t["bins"]!=null?this.Wut_(t["bins"]):t["binstep"]!=null&&this.evt_(t["binstep"]);t["autogradient"]!=null&&this.nvt_(t["autogradient"]);t["fillstyle"]!=null&&this.iQ_(t["fillstyle"]);t["linestyle"]!=null&&this.rB_(t["linestyle"]);t["bounds"]!=null&&this.ht_(t["bounds"]);t["unit"]!=null&&this.KD_(t["unit"]);t["highvalueinclusive"]!=null&&(this.dMt_=t["highvalueinclusive"]);this.hvt_(t["highlightstyle"]);this.uvt_();this.LMt_=!1;this.td_();return this}avt_(t){if(typeof t=="boolean"&&this.mMt_!==t){this.mMt_=t;this.LMt_=!1;this.uvt_()}return this}gvt_(t){if(typeof t=="boolean"&&this.yMt_!==t){this.yMt_=t;this.LMt_=!1;this.uvt_()}return this}N_(){let t=super.N_();t=qi(this.JV_(),t);return t}JV_(){const t={};if(this.pMt_&&this.iIt_!=null&&this.sIt_!=null){t["minvalue"]=this.iIt_;t["maxvalue"]=this.sIt_}t["logstartvalue"]=this.bMt_;t["binspacing"]=this.UMt_;t["bins"]=this.cvt_();t["verticalscale"]=this.VMt_;t["frequencytype"]=this.zMt_;t["accumulatedmode"]=this.XMt_;t["histogrammode"]=this.jMt_;t["autogradient"]=this.Ivt_();t["highlightstyle"]=this.fvt_();t["unit"]=this.HMt_;t["flipedx"]=this.OMt_;t["bounds"]=this.getBounds();t["highvalueinclusive"]=this.dMt_;t["neatlimitsx"]=this.mMt_;t["neatlimitsy"]=this.yMt_;t["orientation"]=this.$K_;return t}KD_(t){this.HMt_=OA.Ai_().gn_(t);if(this.ldt_!=null){if(this.ldt_.gn_()==null||this.ldt_.gn_()!=null&&this.ldt_.gn_().fn_()==="")this.qMt_=null;else if(!this.HMt_.pn_(this.qMt_)&&this.HMt_.Qn_(this.qMt_)){this.qMt_=this.HMt_;this.BMt_=this.ldt_.toArray(!0,this.qMt_);this.LMt_=!1;this.td_()}}else this.qMt_=this.HMt_;return this}Cvt_(){return this.ldt_}rvt_(t){let i=!1;if(t==null){this.ldt_=null;this.BMt_=null;return this}if(Array.isArray(t)){this.BMt_=t;i=!0}else if((t instanceof zD||t instanceof bM)&&t!==this.ldt_){if(this.ldt_!=null){this.ldt_.off(xD.gf_,this.jmt_);this.ldt_.off(YD.kct_,this.ivt_);this.ldt_.off(yM.jft_,this.tvt_)}this.ldt_=t;this.ldt_.on(xD.gf_,this.jmt_);this.ldt_.on(YD.kct_,this.ivt_);this.ldt_.on(yM.jft_,this.tvt_);if(this.HMt_!=null&&this.HMt_.Qn_(this.ldt_.gn_())){this.BMt_=this.ldt_.toArray(!0,this.HMt_);this.qMt_=this.HMt_}else if(this.ldt_.gn_()&&this.ldt_.gn_().fn_()!==""){this.qMt_=this.ldt_.gn_();this.BMt_=this.ldt_.toArray(!0)}else{this.qMt_=null;this.BMt_=this.ldt_.toArray(!0)}}else if(t!==this.ldt_)throw new Error("Only support Array or NumericalDataSeries(view) as data source");const s=this.BMt_;let e=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;this.wMt_=null;this.gQt_=null;let n=0;const h=s.length;for(let t=0;t<h;++t){const i=s[t];if(!isNaN(i)&&i!=null){i<e&&(e=i);i>A&&(A=i);n++}}this.QMt_=!1;this.EMt_=n;this.TMt_=h<1?0:e;this.KMt_=h<1?1:A;if(!this.pMt_){this.iIt_=this.TMt_;this.sIt_=this.KMt_}if(i){this.Avt_();const t={minValue:this.iIt_,maxValue:this.sIt_,count:this.EMt_,binCount:this.Zut_};this.notify($b.aMt_,this,t);this.iIt_=t["minValue"];this.sIt_=t["maxValue"];this.Zut_!==t["binCount"]&&(this.Zut_=t["binCount"])}this.JMt_=!1;this.LMt_=!1;return this}dispose(){if(this.ldt_!=null){this.ldt_.off(xD.gf_,this.jmt_);this.ldt_.off(YD.kct_,this.ivt_);this.ldt_.off(yM.jft_,this.tvt_);this.ldt_=null}this.dvt_!=null&&this.iC_(this.dvt_,rh.sC_,this.oQ_());super.dispose()}setOrientation(t){this.$K_=t;this.LMt_=!1;this.td_();return this}KH_(){return this.$K_}Bvt_(){return this.qMt_}wvt_(){const t=this.ldt_.nA_(this.qMt_),i=this.ldt_.hA_(this.qMt_);if(!this.pMt_){this.iIt_=t;this.sIt_=i}}svt_(t,i,s){if(this.HMt_!=null&&this.HMt_.Qn_(s)){this.qMt_=this.HMt_;this.BMt_=this.ldt_.toArray(!0,this.qMt_)}else if(s!=null&&s.fn_()!==""){this.qMt_=s;this.BMt_=this.ldt_.toArray(!0)}else{this.qMt_=null;this.BMt_=this.ldt_.toArray(!0)}this.wvt_();this.LMt_=!1;this.td_()}$Mt_(t,i,s){this.BMt_=this.ldt_.toArray(!0,this.qMt_);this.wvt_();this.LMt_=!1;this.td_()}lvt_(){if(this.pMt_){this.pMt_=!1;this.iIt_=this.TMt_;this.sIt_=this.KMt_;this.LMt_=!1}}Qvt_(t,i){this.pMt_=!0;this.iIt_=Math.min(t,i);this.sIt_=Math.max(t,i);this.LMt_=!1;return this}Evt_(){return this.pMt_}Em_(){this.ovt_();return this.iIt_}pm_(){this.ovt_();return this.sIt_}pvt_(){if(this.JMt_)return this.kMt_;this.LMt_||this.Pct_();this.uA_();return this.kMt_}mvt_(){return["Sample Count","Min","Max","Average","Variance","Avg. Deviation","Std. Deviation","Skewness","Kurtosis","P10","P50","P90"]}yvt_(){this.LMt_||this.Pct_();return this.SMt_}Dvt_(t,i){this.LMt_||this.Pct_();if(this.MMt_==null&&t<0&&t>=this.Zut_)return 0;let s=1;this.zMt_===iN.fMt_&&(s=this.XMt_===sN.kv_?this.SMt_:this.EMt_);if(this.jMt_===eN.Dt_||i){this.zMt_===iN.CMt_&&(s=this.EMt_);return this.XMt_===sN.kv_?this.MMt_[t]/s:this.vMt_[t]/s}if(this.jMt_===eN.Ay_){this.zMt_===iN.fMt_&&(s=100/s);let i=this.XMt_===sN.kv_?this.MMt_[t]:this.vMt_[t];i=i*s-this.bMt_;return i>1?NA.log10(i):0}return 0}ovt_(){if(this.mMt_&&!this.pMt_&&!this.LMt_){const t=NA.iA_(this.iIt_,this.sIt_);this.iIt_=t.Xs_();this.sIt_=t.zs_()}}Pct_(t){this.ovt_();this.LMt_=!0;this.Avt_();let i;if(this.Zut_>0&&this.BMt_!=null&&this.EMt_>0){let t;const s=(this.sIt_-this.iIt_)/this.Zut_;this.MMt_=[];this.vMt_=[];this.wMt_=[];this.NMt_=Number.POSITIVE_INFINITY;this.SMt_=0;for(i=0;i<this.Zut_;++i){this.MMt_[i]=0;this.vMt_[i]=0}const e=this.BMt_.length;for(i=0;i<e;++i){t=this.Mvt_(this.BMt_[i],s);isNaN(t)===!1&&this.MMt_[t]++}this.vMt_[0]=this.MMt_[0];this.NMt_=this.MMt_[0];this.SMt_=this.MMt_[0];for(i=1;i<this.Zut_;++i){this.NMt_>this.MMt_[i]&&(this.NMt_=this.MMt_[i]);this.SMt_<this.MMt_[i]&&(this.SMt_=this.MMt_[i]);this.vMt_[i]=this.vMt_[i-1]+this.MMt_[i]}this.SMt_-this.bMt_>1?this.GMt_=NA.log10(this.SMt_-this.bMt_):this.GMt_=0;this.vMt_[this.Zut_-1]-this.bMt_>1?this.RMt_=NA.log10(this.vMt_[this.Zut_-1]-this.bMt_):this.RMt_=0}else{this.MMt_=[];this.vMt_=[];this.wMt_=[];this.kMt_=[];for(i=0;i<12;++i)this.kMt_[i]=0;this.JMt_=!0}t||this.uvt_();return this}vvt_(){this.LMt_||this.Pct_();const t=[],i=(this.sIt_-this.iIt_)/this.Zut_;for(let s=0;s<this.Zut_;s++)t.push(AN(this.iIt_,i,s,this.MMt_));return t}bvt_(){this.LMt_||this.Pct_();return this.vMt_[this.Zut_-1]}Nvt_(t){this.ovt_();this.Avt_();const i=(this.sIt_-this.iIt_)/this.Zut_,s=undefined,e=Math.floor((t-this.iIt_)/i)*i+this.iIt_,A=(100-this.UMt_)*i/100,n=undefined,h=e+i-A/2;return t<e+A/2?tN.z_:t>h?tN.X_:tN.W_}Svt_(t,i){this.LMt_||this.Pct_();if(t>this.sIt_||t<this.iIt_)return null;if(i&&this.Nvt_(t)!==tN.W_)return null;const s=(this.sIt_-this.iIt_)/this.Zut_;let e=Math.floor((t-this.iIt_)/s);e>=this.Zut_&&(e=this.Zut_-1);if(this.wMt_!=null&&this.wMt_[e]!=null)return this.wMt_[e];this.wMt_==null&&(this.wMt_=[]);this.wMt_[e]==null&&(this.wMt_[e]=AN(this.iIt_,s,e,this.MMt_));return this.wMt_[e]}Mvt_(t,i){if(isNaN(t))return Number.NaN;const s=this.iIt_>this.sIt_;if(s){if(t>this.iIt_||t<this.sIt_)return Number.NaN}else if(t<this.iIt_||t>this.sIt_)return Number.NaN;let e=Math.floor((s?this.sIt_-t:t-this.iIt_)/i);if(e>=this.MMt_.length){if(t!==this.sIt_||this.dMt_!==!0)return Number.NaN;e--}return e}Gvt_(t){this.LMt_||this.Pct_();if(t<0||t>this.Zut_-1)return null;if(this.wMt_!=null&&this.wMt_[t]!=null&&this.wMt_[t]["indices"]!=null)return this.wMt_[t]["indices"];const i=(this.sIt_-this.iIt_)/this.Zut_,s=this.BMt_.length,e=[];for(let A=0;A<s;A++)this.Mvt_(this.BMt_[A],i)===t&&(e[e.length]=A);this.wMt_==null&&(this.wMt_=[]);this.wMt_[t]==null&&(this.wMt_[t]=AN(this.iIt_,i,t,this.MMt_));this.wMt_[t]["indices"]=e;return e}Rvt_(t){this.ovt_();this.Avt_();const i=[],s=(this.sIt_-this.iIt_)/this.Zut_;for(let e=0;e<t.length;e++){const A=t[e];i[i.length]=A<0||A>=this.BMt_.length?Number.NaN:this.Mvt_(this.BMt_[A],s)}return i}$X_(t,i){let s,e;const A=typeof i=="number"?i:1,n=t instanceof lA?new mA(t.getX()-A,t.getY()-A,t.getX()+A,t.getY()+A):t.getBounds();if(this.R__()){s=n.getX();e=n.Qe_()}else{s=n.getY();e=n.Ee_()}const h=Array.isArray(i)?i:this.kvt_(n).filter((t=>{const i=this.ZMt_[t["binnumber"]]==null?0:this.ZMt_[t["binnumber"]],A=undefined;return i+this.Dvt_(t["binnumber"])>=s&&i<=e})),r=t instanceof In,o=t instanceof lA?t.getX():n.Qe_(),l=t instanceof lA?t.getY():n.Ee_(),u=h.filter((i=>{if(i==null)return!1;const s=this.ZMt_[i["binnumber"]]|0,e=this.Dvt_(i["binnumber"])+s;if(!r)return this.R__()?e>o:e>l;const A=this.R__()?new mA(0,i["minvalue"],e,i["maxvalue"]):new mA(i["minvalue"],0,i["maxvalue"],e);return t.Nc_(A)}));return rN(u)}kvt_(t){if(t==null)return[];const i=this.R__();if(t instanceof lA)return[this.Svt_(i?t.getY():t.getX(),!0)];let s=0,e=-1;if(t instanceof fA){s=t.Xs_();e=t.zs_()}else{if(!(t instanceof mA))return[];s=i?t.getY():t.getX();e=s+(i?t.Ts_():t.Ie_())}const A=this.Svt_(s),n=this.Svt_(e);if(A==null||n==null)return[];let h=A["binnumber"],r=n["binnumber"];this.Nvt_(s)===tN.X_&&h++;this.Nvt_(e)===tN.z_&&r--;if(h>r)return[];const o=undefined;return this.vvt_().slice(h,r+1)}Fvt_(t,i){i===!0&&(this.DMt_=[]);if(t!=null&&t.length!==0){const i=this.DMt_.concat(t).sort();this.DMt_=[];for(let t=0;t<i.length;++t)t!==0&&i[t]===i[t-1]||this.DMt_.push(i[t])}this.td_()}xvt_(){return this.DMt_.slice(0,this.DMt_.length)}Lvt_(t){this.UQt_=t;this.LMt_=!1;this.td_();return this}uvt_(){this.LMt_||this.Pct_();const t=this.BMt_.length>0;let i,s=1;this.jMt_===eN.Ay_&&this.zMt_===iN.fMt_&&(s=2);if(this.UQt_!=null)s=this.UQt_;else{t&&this.zMt_===iN.IMt_&&(this.jMt_===eN.Dt_?s=this.XMt_===sN.kv_?this.SMt_:this.vMt_[this.Zut_-1]:this.jMt_===eN.Ay_&&(s=this.XMt_===sN.kv_?this.GMt_:this.RMt_));if(this.yMt_&&this.zMt_===iN.IMt_&&this.XMt_===sN.kv_&&!this.pMt_){const t=undefined;s=NA.iA_(0,s).zs_()}}const e=this.OMt_;if(this.R__()){i=e?new mA(0,this.sIt_,s,this.iIt_):new mA(0,this.iIt_,s,this.sIt_);i.de_(i.Ie_()*(this.VMt_/100))}else{i=e?new mA(this.sIt_,0,this.iIt_,s):new mA(this.iIt_,0,this.sIt_,s);i.Be_(i.Ts_()*(this.VMt_/100))}if(this.FMt_==null||!this.FMt_.Ce_(i)){this.FMt_=i;this.R__()||this.FMt_.Ts_()!==0||this.FMt_.Be_(1);this.R__()&&this.FMt_.Ie_()===0&&this.FMt_.de_(1);this.notify($b.gMt_,this,this.FMt_)}this.td_()}Wut_(t){this.YMt_=!1;this.Zut_=t;this.notify($b.cMt_,this,this.Zut_);this.LMt_=!1;return this}evt_(t){this.ovt_();this.Avt_();this.YMt_=!1;this.Zut_=Math.floor((this.sIt_-this.iIt_)/t);this.notify($b.cMt_,this,this.Zut_);this.LMt_=!1;return this}Uvt_(){if(!this.YMt_){this.YMt_=!0;this.LMt_=!1}}Yvt_(){return this.YMt_}Avt_(t){if(!this.YMt_&&t!==!0)return this;if(this.QMt_===!0)return this;const i=this.BMt_.length;if(i<1){this.Zut_=1;return this}const s=this.BMt_.slice();s.sort((function(t,i){return t-i}));const e=undefined,A=2*(s[Math.floor(i*3/4)]-s[Math.floor(i/4)])/Math.pow(i,1/3);let n=A>0?Math.round((this.KMt_-this.TMt_)/A):1;n%2==0&&n++;n=Math.min(n,128);n=Math.max(n,16);this.QMt_=!0;const h={},r="binCount";Object.defineProperty(h,r,{configurable:!0,get:function(){ki(`Histogram#binCountCalculated event is deprecated since 4.0. Use 'BinsUpdated' event instead.`);return null},set:function(){}});this.notify($b.cMt_,this,n);this.notify("binCountCalculated",this,h);this.Zut_=n;return this}cvt_(){this.Avt_();return this.Zut_}Tvt_(t){this.dMt_=t;return this}Kvt_(){return this.dMt_}rt_(){this.LMt_||this.Pct_();return this.FMt_}getBounds(){return this.bounds!=null?this.bounds:this.rt_()}ud_(t){if(this.$C_()===!1)return!1;this.LMt_!==!0&&this.Pct_(!0);return su.gN_(this.getBounds(),this.ut_(),t.rS_())}ht_(t){this.bounds=t;this.td_();return this}It_(){return this.xMt_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);if(i.tk_()){i.iQ_(wr.EQ_);i.pR_(this.rt_());const t=i.rS_(),s=new mA(this.iIt_,0,this.sIt_,1),e=undefined,A=Gn.xI_(this.getBounds(),s).rn_(t),n=this.kvt_(A);if(n!=null){i.mO_({histogram:this,bins:n,indices:n.map((t=>t["binnumber"])),hittest:this.$X_(t,n)});i.mO_(new jf(this,rN(n)))}}else{this.Hvt_(i);this.iN_(i)}}uwt_(t){if(t["samples"]==null)for(let i=0;i<this.Zut_;++i){const s=this.RBt_[i]&&this.RBt_[i].indexOf(t["state"]);s>-1&&this.RBt_[i].splice(s,1)}else for(let i=0;i<this.Zut_;++i){this.RBt_[i]=this.RBt_[i]||[];if(t["samples"].indexOf(i)!==-1)this.RBt_[i].indexOf(t["state"])===-1&&this.RBt_[i].push(t["state"]);else{const s=this.RBt_[i].indexOf(t["state"]);s!==-1&&this.RBt_[i].splice(s,1)}}this.td_();return this}qvt_(t){Object.keys(t).forEach((i=>{const s=this._Mt_[i];this._Mt_[i]={Jvt_:hl.jD_(null,s?s.Jvt_:null,t[i]["linestyle"],!0),Pvt_:il.wD_(null,s?s.Pvt_:null,t[i]["fillstyle"],!0)}}));return this}Hvt_(t){this.LMt_!==!0&&this.Pct_();const i=this.R__(),s=i?this.FMt_.Ts_()/this.Zut_:this.FMt_.Ie_()/this.Zut_,e=undefined,A=t.Ji_().gI_(t.cR_());let n=i?this.FMt_.Ee_():this.FMt_.we_();const h=i?this.FMt_.we_():this.FMt_.Ee_();let r,o,l,u,a,g,c,I=this.ct_();if(this.WMt_){if(this.ct_()!=null){u=RA.cs_(this.ct_().getColor());a=new ph(u);a.tB_(-.1);a.iB_(.1);u=a.zd_();g=RA.cs_(this.ct_().getColor());c=new ph(g);c.tB_(.1);c.iB_(-.1);g=c.zd_();r=g.Es_();o=u.Es_();l=g.Es_()}else{r="white";o="black";l="white"}I=new Fo;I.HQ_();I.LQ_(0,r);this.WMt_&&I.LQ_(.5,o);I.LQ_(1,l);I.cy_(new lA(0,0));i?I.setEndPoint(new lA(0,1)):I.setEndPoint(new lA(1,0))}const f=new Gn;this.rt_()!=null&&this.rt_().isEmpty()===!1&&this.getBounds()!=null&&this.getBounds().isEmpty()===!1&&f.II_(this.rt_(),this.getBounds(),!1,!1,!1);for(let e=0;e<this.Zut_;++e,n+=s){const r=this.OMt_?this.Zut_-1-e:e,o=this.Dvt_(r,!1),l=n+(100-this.UMt_)*s/200,u=n+s-(100-this.UMt_)*s/200,a=this.ZMt_.length>0?this.ZMt_[e]:h,g=i?new mA(a,l,a+o,u):new mA(l,a,u,a+o);f.rn_(g,g);if(A.$s_(g)){if(this.DMt_.indexOf(e)>=0){t.rB_(this.gt_(),g);t.iQ_(this.dvt_||I,g)}else{let i=null,s=null;const A=this.RBt_&&this.RBt_[e];if(A)for(let t=A.length-1;t>=0;t--){const e=this._Mt_[A[t]];if(e){i=i||e.Jvt_;s=s||e.Pvt_;if(i&&s)break}}t.rB_(i||this.gt_(),g);t.iQ_(s||I,g)}t.pR_(g)}}}uA_(){this.kMt_=[];const t=NA.uA_(this.BMt_);this.kMt_[0]=t["count"];this.kMt_[1]=t["minvalue"];this.kMt_[2]=t["maxvalue"];this.kMt_[3]=t["average"];this.kMt_[4]=t["variance"];this.kMt_[5]=t["avgdeviation"];this.kMt_[6]=t["stddeviation"];this.kMt_[7]=t["skewness"];this.kMt_[8]=t["kurtosis"];this.kMt_[9]=t["p10"];this.kMt_[10]=t["p50"];this.kMt_[11]=t["p90"];this.kMt_[12]=this.NMt_;this.kMt_[13]=this.SMt_;this.JMt_=!0}rA_(t,i){return NA.rA_(t,i)}nvt_(t){this.WMt_=t;this.LMt_=!1;this.td_();return this}Vvt_(){return this.UMt_}Ovt_(t){t=Math.min(t,100);t=Math.max(t,50);this.UMt_=t;this.td_();return this}Wvt_(t){this.VMt_=t;this.uvt_();return this}zvt_(){return this.VMt_}Ivt_(){return this.WMt_}Xvt_(t){this.zMt_=t;this.LMt_=!1;return this}jvt_(){return this.zMt_}Zvt_(t){this.XMt_=t;this.uvt_();return this}_vt_(){return this.XMt_}$vt_(t){this.jMt_=t;this.uvt_();return this}tbt_(){return this.jMt_}ibt_(){return this.bMt_}hvt_(t){if(this.dvt_===t||t===void 0)return this;this.dvt_!=null&&this.iC_(this.dvt_,rh.sC_,this.oQ_());this.dvt_=il.BD_(t);this.td_();this.dvt_!=null&&this.tC_(this.dvt_,rh.sC_,this.oQ_());return this}fvt_(){return this.dvt_}sbt_(t){this.bMt_=t;this.LMt_=!1;return this}R__(){return this.KH_()===fg.ux_}ebt_(t){if(t==null){this.ZMt_=[];this.LMt_=!1;this.td_();return this}if(this.Zut_>t.length)return this;this.ZMt_=t;this.LMt_=!1;this.td_();return this}Abt_(){const t=[];for(let i=0;i<this.Zut_;++i){const s=this.ZMt_[i]|0;t.push(s+(this.OMt_?this.Dvt_(this.Zut_-1-i,!1):this.Dvt_(i,!1)))}return t}};i=t([_s("geotoolkit.controls.shapes.Histogram")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwic2V0TmVhdExpbWl0c1giOiJhdnRfIiwic2V0TmVhdExpbWl0c1kiOiJndnRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0T3B0aW9ucyI6IkpWXyIsInNldFVuaXQiOiJLRF8iLCJnZXREYXRhU291cmNlIjoiQ3Z0XyIsImdldE9yaWVudGF0aW9uIjoiS0hfIiwiZ2V0RGlzcGxheVVuaXQiOiJCdnRfIiwicmVzZXRWYWx1ZXMiOiJsdnRfIiwic2V0VmFsdWVSYW5nZSI6IlF2dF8iLCJhcmVWYWx1ZXNDdXN0b21pemVkIjoiRXZ0XyIsImdldE1pblZhbHVlIjoiRW1fIiwiZ2V0TWF4VmFsdWUiOiJwbV8iLCJnZXRTdGF0aXN0aWNzIjoicHZ0XyIsImdldFN0YXRpc3RpY3NEZXNjcmlwdGlvbiI6Im12dF8iLCJnZXRNYXhGcmVxdWVuY3kiOiJ5dnRfIiwiZ2V0RnJlcXVlbmN5IjoiRHZ0XyIsImNhbGN1bGF0ZSI6IlBjdF8iLCJnZXRCaW5zIjoidnZ0XyIsImdldEJpbkF0IjoiU3Z0XyIsImdldEluZGljZXNCeUJpbiI6Ikd2dF8iLCJnZXRCaW5zQnlJbmRpY2VzIjoiUnZ0XyIsImhpdFRlc3QiOiIkWF8iLCJnZXRCaW5zQXQiOiJrdnRfIiwiaGlnaGxpZ2h0QmlucyI6IkZ2dF8iLCJnZXRIaWdobGlnaHRlZEJpbnMiOiJ4dnRfIiwidXBkYXRlTW9kZWxMaW1pdHMiOiJ1dnRfIiwic2V0QmluQ291bnQiOiJXdXRfIiwic2V0QmluU3RlcHMiOiJldnRfIiwicmVzZXRCaW5Db3VudCI6IlV2dF8iLCJpc0F1dG9CaW5Db3VudCI6Ill2dF8iLCJ1cGRhdGVCaW5Db3VudCI6IkF2dF8iLCJnZXRCaW5Db3VudCI6ImN2dF8iLCJzZXRIaWdoVmFsdWVJbmNsdXNpdmUiOiJUdnRfIiwiZ2V0SGlnaFZhbHVlSW5jbHVzaXZlIjoiS3Z0XyIsImdldE1vZGVsTGltaXRzIjoicnRfIiwiY2hlY2tDb2xsaXNpb24iOiJ1ZF8iLCJzZXRCb3VuZHMiOiJodF8iLCJnZXRDb250ZW50c1RyYW5zZm9ybSI6Ikl0XyIsInNldEhpZ2hMaWdodFN0eWxlcyI6InF2dF8iLCJjb21wdXRlU3RhdGlzdGljcyI6InVBXyIsInNldEF1dG9HcmFkaWVudCI6Im52dF8iLCJnZXRCaW5TcGFjaW5nIjoiVnZ0XyIsInNldEJpblNwYWNpbmciOiJPdnRfIiwic2V0VmVydGljYWxTY2FsaW5nIjoiV3Z0XyIsImdldFZlcnRpY2FsU2NhbGluZyI6Inp2dF8iLCJnZXRBdXRvR3JhZGllbnQiOiJJdnRfIiwic2V0RnJlcXVlbmN5VHlwZSI6Ilh2dF8iLCJnZXRGcmVxdWVuY3lUeXBlIjoianZ0XyIsInNldEFjY3VtdWxhdGVkTW9kZSI6Ilp2dF8iLCJnZXRBY2N1bXVsYXRlZE1vZGUiOiJfdnRfIiwic2V0SGlzdG9ncmFtTW9kZSI6IiR2dF8iLCJnZXRIaXN0b2dyYW1Nb2RlIjoidGJ0XyIsImdldFN0YXJ0VmFsdWUiOiJpYnRfIiwic2V0SGlnaGxpZ2h0U3R5bGUiOiJodnRfIiwiZ2V0SGlnaGxpZ2h0U3R5bGUiOiJmdnRfIiwic2V0TG9nU3RhcnRWYWx1ZSI6InNidF8ifX19");var lN=Ci(function(){var t=class{};t.prototype.nbt_=Zi;t.prototype.hbt_=Zi;t.prototype.cft_=Zi;return t}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBdXRvRGF0YUxpbWl0cyI6Im5idF8iLCJzZXRBdXRvRGF0YUxpbWl0cyI6ImhidF8iLCJnZXREYXRhTGltaXRzIjoiY2Z0XyJ9fX0g");const uN=new lA,aN=new mA,gN=new xA;var cN=Ci(function(){var i;let s=i=class t extends dp{constructor(t){const i=t!=null?t["textstyle"]:null,s=t!=null?_l.Wi_(t["padding"]):null;super(t=Pi(t,{text:"",textstyle:i||new qa({baseline:ka.mk_}),padding:s||null,alignment:dA.ne_,rotationangle:0},!0));this.Aq_=null;this._q_=null;this.fX_=null;this.rbt_=!1;this.obt_=null;this.lbt_=!1;this.ubt_=dA.W_;this.abt_=null;this.kG_=0;this.gbt_=null;t["sizeisindevicespace"]&&this.OG_(!0);t["anchortype"]&&this.SE_(t["anchortype"]);if(this.WG_()&&this.GE_()!==dA.W_){t["x"]!==void 0&&this.$I_(t["x"]);t["y"]!==void 0&&this.tf_(t["y"]);let i=this.getSize();if(t["width"]!==void 0||t["height"]!==void 0){i=i!=null?i.clone():new xA;i.dt_(t);this.setSize(i)}}else{const i=(new mA).dt_(t);this.ce_(i)}this._q_=new YC({text:t["text"],textstyle:t["textstyle"],alignment:t["alignment"],rotationangle:t["rotationangle"],showellipsis:!0,sizemode:NC.hX_});t["padding"]!=null&&this.Iq_(t["padding"]);t["textstyle"]!=null&&this.g_(t["textstyle"]);this.c_(t["rotationangle"]);this.bF_(t["alignment"]);this.lq_=()=>{this.vn_();this.td_()}}dispose(){if(!this.Df_()){this._q_!=null&&this._q_.dispose();this.Aq_!=null&&this.iC_(this.Aq_,rh.sC_,this.lq_);this.fX_!=null&&this.iC_(this.fX_,rh.sC_,this.oQ_());super.dispose()}}clone(){return Object.getPrototypeOf(this)!==i.prototype?Wi(this):(new i).b_(this,!0)}b_(t,i){i===!0&&super.b_(t,i);this.a_(t.SG_());this.g_(t.FE_());this.bF_(t.vF_());this.Iq_(t.uG_());this.c_(t.UE_());return this}a_(t){this._q_.a_(t);this.vn_().td_();return this}SG_(){return this._q_.SG_()}g_(t,i){if(this.fX_===t)return this;this.fX_=qa.jD_(this,this.fX_,t,i,this.oQ_());this._q_.g_(this.fX_);this.vn_().td_();return this}FE_(){return this.fX_}Iq_(t,i){if(this.Aq_===t)return this;this.Aq_=_l.jD_(this,this.Aq_,t,i,this.lq_);this.vn_().td_();return this}uG_(){return this.Aq_}bF_(t){if(this.vF_()===t)return this;this._q_.SE_(t);this.vn_().td_();return this}vF_(){return this._q_.GE_()}cbt_(){if(this.gbt_!=null)return this.gbt_;if(this.GE_()!==dA.W_){const t=this.getParent()?this.getParent().if_():Gn.JI_,i=t.nI_(this.uR_(),this.aR_()),s=Gn.FI_(this.kG_,i.getX(),i.getY());this.gbt_=s.DI_(t.rI_()).vI_(t)}return this.gbt_}c_(t){if(this.kG_===t)return this;this.kG_=t;this.gbt_=null;this.vn_().td_();return this}UE_(){return this.kG_}uR_(){return this.abt_!=null?this.abt_.getX():null}$I_(t){if(NA.equals(this.uR_(),t))return this;this.gR_(t,this.aR_());return this}aR_(){return this.abt_!=null?this.abt_.getY():null}tf_(t){if(NA.equals(this.aR_(),t))return this;this.gR_(this.uR_(),t);return this}gR_(t,i){if(t instanceof lA){i=t.getY();t=t.getX()}if(this.abt_!=null&&NA.equals(this.abt_.x,t)&&NA.equals(this.abt_.y,i))return this;this.td_();this.abt_=new lA(t,i);this.gbt_=null;this.Ibt_();this.vn_().td_();return this}lR_(){return this.abt_}SE_(t){if(this.ubt_===t)return this;this.td_();this.ubt_=t;this.gbt_=null;this.Ibt_();this.vn_().td_();return this}GE_(){return this.ubt_}setSize(t,i){if(t instanceof xA){i=t.Ts_();t=t.Ie_()}else if(typeof t!="number"){this.obt_!=null&&(t=qi(t,this.obt_.N_()));i=(t=new xA(t)).Ts_();t=t.Ie_()}if(this.obt_!=null&&NA.equals(this.obt_.Ie_(),t)&&NA.equals(this.obt_.Ts_(),i))return this;this.td_();this.obt_=new xA(t,i);this.Ibt_();this.vn_().td_();return this}getSize(){if(this.obt_!=null&&this.lbt_)return this.obt_.clone();const t=this.if_(),i=t?t.rn_(this.getBounds(),aN):this.getBounds();return new xA(i.Ie_(),i.Ts_())}OG_(t){if(this.lbt_!==t){this.td_();this.lbt_=t;this.td_()}return this}WG_(){return this.lbt_}fbt_(){if(this.rbt_!==!0&&this.lbt_===!0&&this.ubt_!==dA.W_){this.rbt_=!0;const t=this.if_(),i=this.getBounds(),s=t?t.rn_(i,aN):i;this.obt_=new xA(s.Ie_(),s.Ts_());this.abt_=i.Ye_(this.ubt_);this.rbt_=!1}return this}Ibt_(){if(this.rbt_!==!0&&this.obt_!=null&&this.abt_!=null&&this.lbt_===!0&&this.ubt_!==dA.W_){this.rbt_=!0;const t=this.getParent()!=null?this.getParent().if_():null,i=t?t.cI_(this.obt_,gN):this.obt_;let s,e;s=OC.jj_(this.ubt_)?this.abt_.getX():OC.Zj_(this.ubt_)?this.abt_.getX()-i.Ie_():this.abt_.getX()-i.Ie_()/2;e=OC.zj_(this.ubt_)?this.abt_.getY():OC.Xj_(this.ubt_)?this.abt_.getY()-i.Ts_():this.abt_.getY()-i.Ts_()/2;this.ht_(s,e,s+i.Ie_(),e+i.Ts_());this.rbt_=!1}return this}Ad_(){this.gbt_=null;this.Ibt_();super.Ad_();return this}U6_(t){super.U6_(t);this.fbt_();return this}zY_(t){super.zY_(t);const i=this.ct_();if(t.tk_()&&i)return;const s=t,e=t.Ji_(),A=this.getBounds();let n=e==null?A.Ie_():A.Ie_()*e.Zc_(),h=e==null?A.Ts_():A.Ts_()*e._c_();const r=this.vF_(),o=A.Ye_(r,uN),l=this.if_();let u=A.we_(),a=A.Ee_();if(this.Aq_!=null){const t=l==null?A:l.rn_(A),i=this.Aq_.compile(t);u+=l==null?i.we_():bn.$c_(i.we_(),0,l);a+=l==null?i.Ee_():bn.$c_(0,i.Ee_(),l);OC.jj_(r)?o.x+=l==null?i.we_():bn.$c_(i.we_(),0,l):OC.Zj_(r)&&(o.x-=l==null?i.Qe_():bn.$c_(i.Qe_(),0,l));OC.zj_(r)?o.y+=l==null?i.Ee_():bn.$c_(0,i.Ee_(),l):OC.Xj_(r)&&(o.y-=l==null?i.pe_():bn.$c_(0,i.pe_(),l));n-=i.we_()+i.Qe_();h-=i.Ee_()+i.pe_()}if(n<0||NA.equals(n,0)||h<0||NA.equals(h,0))return;const g=bn.$c_(n,0,l),c=bn.$c_(0,h,l),I=new TA;I.moveTo(u,a).lineTo(u+g,a).lineTo(u+g,a+c).lineTo(u,a+c).lineTo(u,a).close();s.save();s._b_(I,QA.Et_,!0,!0);this._q_.setSize(n,h).mX_(!0).gR_(o).render(s);s.restore()}N_(){const t=super.N_();t["sizeisindevicespace"]=this.lbt_;t["anchortype"]=this.ubt_;if(this.lbt_&&this.ubt_!==dA.W_){t["x"]=this.uR_();t["y"]=this.aR_();if(this.obt_!=null){t["width"]=this.obt_.Ie_();t["height"]=this.obt_.Ts_()}else{delete t["width"];delete t["height"]}}else{const i=this.getBounds();if(i!=null){t["x"]=i.getX();t["y"]=i.getY();t["width"]=i.Ie_();t["height"]=i.Ts_()}}t["text"]=this.SG_();t["padding"]=this.Aq_;t["textstyle"]=this.FE_();t["rotationangle"]=this.UE_();t["alignment"]=this.vF_();return t}dt_(t){if((t=Es(t))==null)return this;t["sizeisindevicespace"]!=null&&this.OG_(t["sizeisindevicespace"]);t["anchortype"]!=null&&this.SE_(t["anchortype"]);if(this.WG_()&&this.GE_()!==dA.W_){t["x"]!=null&&this.$I_(t["x"]);t["y"]!=null&&this.tf_(t["y"]);let i=this.getSize();if(t["width"]!=null||t["height"]!=null){i=i!=null?i.clone():new xA;i.dt_(t);this.setSize(i)}delete t["width"];delete t["height"]}else if(t["x"]!=null||t["y"]!=null||t["width"]!=null||t["height"]!=null){let i=this.getBounds();i=i==null?new mA:i.clone();t["x"]!=null&&i.setX(t["x"]);t["y"]!=null&&i.setX(t["y"]);t["width"]!=null&&i.setX(t["width"]);t["height"]!=null&&i.setX(t["height"]);this.ht_(i)}super.dt_(t);t["padding"]!==void 0&&this.Iq_(t["padding"]);t["text"]!==void 0&&this.a_(t["text"]);t["textstyle"]!==void 0&&this.g_(t["textstyle"]);t["rotationangle"]!==void 0&&this.c_(t["rotationangle"]);t["alignment"]!=null&&this.bF_(t["alignment"]);return this}ud_(t){const i=yu.hS_(t,this.gt_());return this.$C_()===!0&&su.gN_(this.getBounds(),this.sd_(),t.rS_(),i)}sd_(){const t=super.sd_(),i=this.cbt_();return t==null?i:i==null?t:Gn.multiply(i,t)}};s=i=t([_s("geotoolkit.controls.shapes.Label")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldFRleHQiOiJhXyIsImdldFRleHQiOiJTR18iLCJzZXRUZXh0U3R5bGUiOiJnXyIsImdldFRleHRTdHlsZSI6IkZFXyIsInNldFBhZGRpbmdTdHlsZSI6IklxXyIsImdldFBhZGRpbmdTdHlsZSI6InVHXyIsInNldEFsaWdubWVudCI6ImJGXyIsImdldEFsaWdubWVudCI6InZGXyIsInNldFJvdGF0aW9uQW5nbGUiOiJjXyIsImdldFJvdGF0aW9uQW5nbGUiOiJVRV8iLCJnZXRBbmNob3JYIjoidVJfIiwic2V0QW5jaG9yWCI6IiRJXyIsImdldEFuY2hvclkiOiJhUl8iLCJzZXRBbmNob3JZIjoidGZfIiwic2V0QW5jaG9yIjoiZ1JfIiwiZ2V0QW5jaG9yIjoibFJfIiwic2V0QW5jaG9yVHlwZSI6IlNFXyIsImdldEFuY2hvclR5cGUiOiJHRV8iLCJzZXRTaXplSXNJbkRldmljZVNwYWNlIjoiT0dfIiwiZ2V0U2l6ZUlzSW5EZXZpY2VTcGFjZSI6IldHXyIsInVwZGF0ZVNjZW5lVHJhbnNmb3JtYXRpb24iOiJBZF8iLCJvblJlY3RDaGFuZ2VkIjoiVTZfIiwicmVuZGVyQ29udGVudCI6InpZXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJjaGVja0NvbGxpc2lvbiI6InVkXyIsImdldFdvcmxkVHJhbnNmb3JtIjoic2RfIn19fSAg");var IN=Ci(function(){let i=class t extends sI{constructor(t){super();this.tH_=t;this.Cbt_=new sI;const i=this.tH_.uG_();i?this.Cbt_.ft_({left:i.we_(),top:i.Ee_(),bottom:i.pe_(),right:i.Qe_()}):this.Cbt_.ft_({left:0,top:0,bottom:0,right:0});this.Cbt_.kY_(!0);this.cq_(new zB);this.GY_(this.Cbt_);this.jC_(t);this.kY_(!0)}getItems(){return this.Cbt_}Lq_(t){return this}rt_(){return this.tH_.tT_()}It_(){const t=this.getBounds(),i=this.rt_();return t==null||t.isEmpty()||i==null||i.isEmpty()?new Gn:Gn.xI_(i,t,!1,!1,!1)}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRNb2RlbExpbWl0cyI6InJ0XyIsImdldENvbnRlbnRzVHJhbnNmb3JtIjoiSXRfIiwic2V0TW9kZWxMaW1pdHMiOiJMcV8ifX19"),fN=Ci(function(){let i=class t extends Ca{constructor(t){super(t=Pi(t,{autobounds:!1,sizeisindevicespace:!1,preserveaspectratio:!1,ispointingup:!1,autosize:!1,padding:null,alignment:dA.ne_},!0));t["padding"]?t["padding"]=_l.Wi_(t["padding"]):t["padding"]=new _l;this.Us_=new Cm;this.dbt_();this.Bbt_=!1;this.wbt_=null;this.wCt_=null;this.KCt_=null;this.Qbt_=null;this.lq_=null;this.zk_=!1;this.Ebt_=null;this.Z1_=null;this.wX_=null;this.pbt_=new IN(this);this.pbt_.ht_(sa.RS_());this.mbt_=()=>{this.notify(na.iG_,this)};this.pbt_.on(na.iG_,this.mbt_);this.setOptions(t)}Iq_(t,i){if(this.wX_===t)return this;this.wX_=_l.jD_(this,this.wX_,t,i,this.ybt_());this.td_();this.pbt_&&this.pbt_.getItems().ft_(this.wX_.getStyle());return this}uG_(){return this.wX_}setOptions(t){if(!t)return this;t["padding"]&&this.Iq_(t["padding"]);t["linestyle"]!==void 0&&this.rB_(t["linestyle"],t["linestyle"]instanceof hl==!1);t["fillstyle"]!==void 0&&this.iQ_(t["fillstyle"],t["fillstyle"]instanceof wr==!1);if(t["data"]!==void 0){let i=null;if(t["data"]instanceof Cm)i=t["data"];else if(t["data"]instanceof Array||t["data"]instanceof pb||t["data"]instanceof Db){i=new Cm;i.add(t["data"])}if(i!==this.Us_){this.Dbt_();this.Us_=i;this.dbt_();this.zT_()}}t["width"]!==void 0&&this.de_(t["width"]);t["height"]!==void 0&&this.Be_(t["height"]);if(t.hasOwnProperty("autosize")&&this.zk_!==t["autosize"]){this.zk_=t["autosize"];this.zT_()}if(t.hasOwnProperty("autobounds")&&this.Bbt_!==t["autobounds"]){this.Bbt_=t["autobounds"];this.pc_()}return this}getData(){return this.Us_}dbt_(){if(this.Us_==null)return this;const t=fm;this.Us_.on(t.Add,this.Mbt_());this.Us_.on(t.mt_,this.Mbt_());this.Us_.on(t.mot_,this.Mbt_());this.Us_.on(t.yot_,this.Mbt_());const i=undefined;this.Us_.IN_().forEach((t=>{if(t instanceof pb){t.on(Eb.kmt_,this.vbt_());t.on(Eb.Fmt_,this.Mbt_())}}));return this}Dbt_(){if(this.Us_==null)return this;const t=fm;this.Us_.off(t.Add,this.Mbt_());this.Us_.off(t.mt_,this.Mbt_());this.Us_.off(t.mot_,this.Mbt_());this.Us_.off(t.yot_,this.Mbt_());const i=undefined;this.Us_.IN_().forEach((t=>{if(t instanceof pb){t.off(Eb.kmt_,this.vbt_());t.off(Eb.Fmt_,this.Mbt_())}}));return this}zT_(){if(this.Us_==null)return;const t=[];this.YY_().forEach((i=>{i.off(mb.TCt_,this.bbt_());i.off(mb.mot_,this.zCt_());t.push(i)}));this.KY_();const i=this.Us_.IN_(),s=[];i.forEach((i=>{let e=[];if(i instanceof pb)e=i.Tmt_();else if(i instanceof Db){e=[i];const s=t.indexOf(i);s!==-1&&t.splice(s,1)}for(let t=0;t<e.length;++t){e[t].hasEventListener(mb.TCt_,this.bbt_())||e[t].on(mb.TCt_,this.bbt_());e[t].hasEventListener(mb.mot_,this.zCt_())||e[t].on(mb.mot_,this.zCt_());s.push(e[t])}}));for(let i=t.length-1;i>=0;--i)t[i].dispose();this.Z1_=null;this.GY_(s);this.Nbt_();this.Bbt_?this.pc_():this.wq_()}ht_(t){if(t&&t.Ie_()>0&&t.Ts_()>0){const i=this.GE_(),s=Ca.VG_(t,i);this.gR_(s);if(!this.WG_()){this.zk_||this.setSize(t.Ie_(),t.Ts_());this.Bbt_||this.wq_()}}return this}Nbt_(){if((this.zk_||this.pbt_.gq_())&&this.pbt_.getItems().bG_()!=null){this.pbt_.yf_(!0);this.pbt_.rd_(!1);this.pbt_.getItems().bG_().eT_(new mA(0,0,Number.MAX_VALUE,Number.MAX_VALUE),this.YY_());let t=null;this.YY_().forEach((i=>{if(!i.$C_())return;const s=i.getBounds();t==null?t=s?s.clone():null:s&&t.union(s)}));this.pbt_.yf_(!1);this.pbt_.rd_(!0);if(t!=null&&this.WG_()){t=new mA(0,0,t.Ie_()+ +this.wX_.Qe_()+ +this.wX_.we_(),t.Ts_()+ +this.wX_.pe_()+ +this.wX_.Ee_());this.Z1_=null;this.setSize(t.Ie_(),t.Ts_());if(!this.pbt_.gq_()){this.dq_(t.Ts_());this.Cq_(t.Ie_())}}}}pc_(){if(!this.Bbt_)return;const t=this.tT_();let i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,e,A;this.YY_().forEach((t=>{if(t.getBounds()){e=t.getBounds().Qe_();e>i&&(i=e);A=t.getBounds().pe_();A>s&&(s=A)}}));if(t!=null){const e=t.clone();e.de_(i);e.Be_(s);this.ht_(e)}}zCt_(){this.KCt_==null&&(this.KCt_=()=>{this.pc_()});return this.KCt_}Mbt_(){this.wCt_==null&&(this.wCt_=()=>{this.zT_()});return this.wCt_}vbt_(){this.Qbt_==null&&(this.Qbt_=(t,i,s)=>{i&&this.YY_().forEach((t=>{t.Uw_()===i&&t.dt_(s)}))});return this.Qbt_}bbt_(){this.Sbt_==null&&(this.Sbt_=(t,i,s)=>{this.notify(t,this,i)});return this.Sbt_}dispose(){this.YY_().forEach((t=>{t.off(mb.mot_,this.zCt_())}));if(this.pbt_!=null){this.Dbt_();this.pbt_.off(na.iG_,this.mbt_);this.pbt_.dispose();this.pbt_=null}super.dispose()}render(t){if(this.Ie_()>0&&this.Ts_()>0){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);const s=i.Ji_(),e=this.IR_(t.Ji_());i.dI_(e);this.zY_(i);i.dI_(s);this.iN_(i)}}zY_(t){this.Ebt_=this.Gbt_(t.Ji_());if(this.Ebt_!=null&&!this.Ebt_.Ce_(this.Z1_)){this.Rbt_(this.tT_());this.Z1_=this.Ebt_.clone()}this.pbt_.render(t)}Rbt_(t){t=new mA(0,0,t.Ie_()-+this.wX_.Qe_()-+this.wX_.we_(),t.Ts_()-+this.wX_.pe_()-+this.wX_.Ee_());this.pbt_.getItems().Lq_(t);this.pbt_.getItems().wq_();this.pbt_.wq_()}tT_(){return this.wbt_?this.wbt_:this.WG_()?new mA(0,0,this.Ie_(),this.Ts_()):this.Ebt_}Gbt_(t){const i=t.rn_(sa.RS_());return new mA(0,0,i.Ie_(),i.Ts_())}bB_(t,i){this.pbt_.getItems().bB_(t,i)}GY_(t){this.pbt_.getItems().GY_(t);return this}YY_(t){return this.pbt_.getItems().YY_(t)}removeChild(t){const i=this.pbt_.getItems();i.Df_()||i.removeChild(t);return this}KY_(t){this.pbt_.getItems().KY_(t);return this}Lq_(t){this.td_();this.wbt_=t;this.zT_();this.td_();return this}RY_(){return this.pbt_.RY_()}kY_(t){this.pbt_.kY_(t);this.pbt_.getItems().kY_(t);return this}rt_(){return this.pbt_.rt_()}cq_(t){this.pbt_.getItems().cq_(t);this.zT_();return this}bG_(){return this.pbt_.getItems().bG_()}wq_(t){this.Nbt_();this.pbt_.wq_(t);this.pbt_.getItems().wq_();return this}iQ_(t,i){super.iQ_(t,i);this.pbt_.iQ_(this.ct_());return this}rB_(t,i){super.rB_(t,i);this.pbt_.rB_(this.gt_());return this}N_(){const t=super.N_();t["padding"]=this.uG_();t["autosize"]=this.zk_;t["autobounds"]=this.Bbt_;t["data"]=this.Us_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);return this}gG_(){if(this.NS_()!=null)return this.NS_().Ie_()}Cq_(t){return this.NS_()==null&&t==null||this.NS_()!=null&&this.NS_().Ie_()===t?this:this.ft_({width:t})}cG_(){if(this.NS_()!=null)return this.NS_().Ts_()}dq_(t){return this.NS_()==null&&t==null||this.NS_()!=null&&this.NS_().Ts_()===t?this:this.ft_({height:t})}ybt_(){this.lq_===null&&(this.lq_=(t,i,s)=>{this.pbt_&&this.pbt_.getItems().ft_(this.wX_.getStyle())});return this.lq_}};i=t([Zs(qh),_s("geotoolkit.controls.shapes.Legend")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQYWRkaW5nU3R5bGUiOiJJcV8iLCJnZXRQYWRkaW5nU3R5bGUiOiJ1R18iLCJzZXRCb3VuZHMiOiJodF8iLCJnZXRMZWdlbmREZXZpY2VTaXplIjoiR2J0XyIsImVudW1lcmF0ZU5vZGVzIjoiYkJfIiwiYWRkQ2hpbGQiOiJHWV8iLCJnZXRDaGlsZHJlbiI6IllZXyIsImNsZWFyQ2hpbGRyZW4iOiJLWV8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImlzQ2xpcHBpbmdFbmFibGVkIjoiUllfIiwiZW5hYmxlQ2xpcHBpbmciOiJrWV8iLCJnZXRNb2RlbExpbWl0cyI6InJ0XyIsInNldExheW91dCI6ImNxXyIsImdldExheW91dCI6ImJHXyIsInVwZGF0ZUxheW91dCI6IndxXyIsInNldEZpbGxTdHlsZSI6ImlRXyIsInNldExpbmVTdHlsZSI6InJCXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXREZXNpcmVkV2lkdGgiOiJnR18iLCJzZXREZXNpcmVkV2lkdGgiOiJDcV8iLCJnZXREZXNpcmVkSGVpZ2h0IjoiY0dfIiwic2V0RGVzaXJlZEhlaWdodCI6ImRxXyJ9fX0g");var CN={kbt_:"InterpolateZero",Fbt_:"InterpolateNull",xbt_:"InterpolateMissingValues"};const dN=[CN.kbt_,CN.Fbt_,CN.xbt_];var BN=function(){let i=class t{constructor(t,i,s,e){this.Lbt_=t;this.Ubt_=i;this.Ybt_=s;if(typeof e=="number"){ki("strategy as number is deprecated since 4.0, use Strategy type instead");e=dN[e]}this.Tbt_=e;this.Kbt_=new Array(s.length);this.init()}init(){for(let t=0;t<this.Ybt_.length;t++)this.Kbt_[t]=new Array(this.Lbt_.length);this.Hbt_()}Hbt_(){for(let t=0;t<this.Ybt_.length;t++){let i=0,s=0;for(let e=0;e<this.Lbt_.length;e++)if(this.Lbt_[e]===this.Ubt_[t][s]){this.Kbt_[t][e]=this.Ybt_[t][s];i=s+1;s++}else if(this.Tbt_===CN.kbt_)this.Kbt_[t][e]=0;else if(this.Tbt_===CN.Fbt_)this.Kbt_[t][e]=null;else if(this.Lbt_[e]<this.Ubt_[t][0]||this.Lbt_[e]>this.Ubt_[t][this.Ubt_[t].length-1])this.Kbt_[t][e]=null;else{const s=this.Lbt_[e-1],A=this.Kbt_[t][e-1],n=this.Ubt_[t][i],h=this.Ybt_[t][i];this.Kbt_[t][e]=A+(this.Lbt_[e]-s)*(h-A)/(n-s)}}}qbt_(){return this.Kbt_}};i=t([_s("geotoolkit.controls.util.Interpolation")],i);return i}();var wN=Ci({kbt_:"InterpolateZero",Fbt_:"InterpolateNull",xbt_:"InterpolateMissingValues"},2,"eyJJbnRlcnBvbGF0ZVplcm8iOiJrYnRfIiwiSW50ZXJwb2xhdGVOdWxsIjoiRmJ0XyIsIkludGVycG9sYXRlTWlzc2luZ1ZhbHVlcyI6InhidF8ifSAg");const QN=[wN.kbt_,wN.Fbt_,wN.xbt_],EN=function(t){return t instanceof KD?t.toArray(!1):Array.isArray(t)&&t.length>0?typeof t[0]=="number"?t:t.map(EN):[]},pN=1e-5,mN="#e0e0e0",yN="#f5f5f5",DN=Math.log(10),MN=10,vN=new ma({alignment:dA.ne_,"z-index":1}),bN=new lA(0,0),NN=bN.clone();let SN=new xA(0,0);const GN=function(t,i){if(i==null||t==null)return null;const s=new Gn;if(t instanceof ma){const i=t.gt_()!=null?t.gt_().Ie_()/2:0;s.setTranslate(t.width/2+i,t.height/2+i)}const e=i.tQ_(s,new lA(0,0));if(e===null)return null;t instanceof ma?t.render(e):e.drawImage(t,0,0,t.width,t.height,0,0,t.width/Is(),t.height/Is());i.gM_();return i},RN=new YC({alignment:dA.ne_,showellipsis:!1,visible:!0,sizeisindevicespace:!0});RN.PX_(NC.sX_);function kN(t){const i=Array.isArray(t)?t:[t],s=[];let e;for(let t=0;t<i.length;++t){e=i[t];s[t]=isNaN(e)||e<pN?Number.NaN:Math.log(e)/DN}return Array.isArray(t)?s:s[0]}const FN=function(t,i){let s;s=ys(t,VD)?t:Array.isArray(t)?new zD({data:t}):new zD;return i===!0?new bM({data:s,preprocessor:kN}):s},xN=function(t){return!(t==null||!Array.isArray(t)||t.length===0||!Array.isArray(t[0]))},LN=function(t){if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(!ys(t[i],VD))return!1;return t.length!==0}return!1},UN=function(t,i){if(xN(t)||LN(t)){const s=[];for(let e=0;e<t.length;++e)s.push(FN(t[e],i));return s}return[FN(t,i)]},YN=function(t,i,s){if(t==null)return null;let e,A;if(Array.isArray(t))if(t.length===i)A=t;else{A=t.slice();for(e=t.length;e<i;++e)A.push(t[t.length-1])}else{A=[];for(e=0;e<i;++e)A.push(t)}if(s!=null)for(e=0;e<A.length;++e)A[e]=s(A[e]);return A},TN=function(t){return NA.Oe_(t)?new xA(t,t):xA.Wi_(t)},KN=function(t,i,s){return YN(t,i,s)},HN=function(t,i,s,e){let A,n=0,h=[];const r=i.length,o=[],l=[],u=new Array(r);for(A=0;A<t.length;A++){l.push(t[A].toArray(!1));const i=h.length;let s=0;const e=[];while(n<l[A].length&&s<i)l[A][n]<h[s]?e[e.length-1]===l[A][n]?n++:e.push(l[A][n++]):e.push(h[s++]);while(s<i)e[e.length-1]===h[s]?s++:e.push(h[s++]);while(n<l[A].length)e[e.length-1]===l[A][n]?n++:e.push(l[A][n++]);n=0;h=e.slice()}for(A=0;A<r;A++){o.push(i[A].toArray(!1));u[A]=new Array(h.length)}const a=l.length;for(A=0;A<r;A++)l[A]=l[A>=a?a-1:A];for(A=0;A<r;A++)l[A]=l[A].slice(0,o[A].length);let g,c;if(!s)for(A=0;A<r;A++){g=0;c=l[A].length;for(n=0;n<l[A].length-1;n++){if(o[A][n]!=null)break;g++;if(o[A][n+1]!=null)break}for(n=l[A].length-1;n>0;n--){if(o[A][n]!=null)break;c--;if(o[A][n-1]!=null)break}l[A]=l[A].slice(g,c);o[A]=o[A].slice(g,c)}const I=new BN(h,l,o,e).qbt_();if(s)for(A=0;A<h.length;A++){let t=0;for(n=0;n<r;n++){I[n][A]=isNaN(I[n][A])?0:I[n][A];t+=I[n][A]}t!==0&&(t=100/t);for(n=0;n<r;n++){I[n][A]*=t;n>0&&(I[n][A]+=I[n-1][A]);I[n][A]=I[n][A]>100?100:I[n][A]}}else for(A=0;A<r;A++)for(n=0;n<h.length;n++){I[A][n]=isNaN(I[A][n])?null:I[A][n];if(A>0){I[A][n]=isNaN(I[A][n])?null:I[A][n];I[A][n]=I[A-1][n]+I[A][n]}}if(e===CN.kbt_)for(A=0;A<o.length;A++)u[A]=h.slice();else for(A=0;A<o.length;A++){g=NA.findIndex(l[A][0],h);c=NA.findIndex(l[A][l[A].length-1],h);u[A]=h.slice(0,c+1);I[A].splice(c+1);u[A]=u[A].slice(g);I[A]=I[A].slice(g)}return{ySeries:I,xSeries:u}},qN=function(t,i,s){return(1-(s=Math.max(Math.min(s,1),0)))*t+s*i},JN=function(t,i){const s=typeof t["logscale"]=="boolean"?t["logscale"]:t["logscale"]["y"],e=typeof t["logscale"]!="boolean"&&t["logscale"]["x"],A=UN(t["y"],s),n=UN(t["x"],e);let h=null,r=null;t["symbols"]!=null&&(h={Jbt_:KN(t["symbols"]["linestyles"],A.length,hl.Wi_),Pbt_:KN(t["symbols"]["fillstyles"],A.length,il.BD_),Vbt_:KN(t["symbols"]["painters"],A.length),visible:t["symbols"]["visible"]===void 0||t["symbols"]["visible"],width:t["symbols"]["width"],height:t["symbols"]["height"],dimensions:YN(t["symbols"]["dimensions"],A.length,TN),Obt_:t["symbols"]["sizeisindevicespace"],step:t["symbols"]["step"]});if(t["labels"]!=null){r=qi(t["labels"],{});r["fillstyles"]=KN(r["fillstyles"],A.length,il.BD_);r["showellipsis"]&&RN.mX_(!0)}if(t["arearange"]!=null){t["arearange"]=Array.isArray(t["arearange"])?t["arearange"]:[t["arearange"]];for(let i=0;i<t["arearange"].length;i++){t["arearange"][i]=qi(t["arearange"][i],{range:[],linestyles:Array.isArray(t["arearange"][i]["linestyles"])?t["arearange"][i]["linestyles"]:[new hl],fillstyle:null});t["arearange"][i]["range"]=UN(t["arearange"][i]["range"],s);t["arearange"][i]["linestyles"]=KN(t["arearange"][i]["linestyles"],2,hl.Wi_)}}let o=!1;(t["stackedarea"]||t["percentarea"])&&(o=!0);let l=null,u=null;if(o){let i;i=t["datainterpolationstrategy"]===wN.kbt_?CN.kbt_:t["datainterpolationstrategy"]===wN.Fbt_?CN.Fbt_:CN.xbt_;const h=HN(n,A,t["percentarea"],i);l=UN(h["ySeries"],s);u=UN(h["xSeries"],e)}const a=t["series"].slice();for(let t=0;t<A.length;t++)a[t]==null&&(a[t]={visible:!0});const g={y:A,x:n,Jbt_:KN(t["linestyles"],A.length,hl.Wi_),Pbt_:KN(t["fillstyles"],A.length,il.BD_),Wbt_:l,zbt_:u,Xbt_:t["logscale"],jbt_:t["spline"],FW_:t["baseline"],Zbt_:t["gapfillcutoffvalue"],_bt_:t["gapvalue"],$bt_:o,tNt_:t["percentarea"],iNt_:t["arearange"],symbols:h,labels:r,sNt_:a};i.sft_(g["linestyles"],g["fillstyles"]);return g},PN=function(t,i,s){if(t===i||Bs(t,i))return;let e;for(e=0;e<t.length;e++)t[e].off(UD.pct_,s);for(e=0;e<i.length;e++)i[e].on(UD.pct_,s)};var VN=function(){var t;return class{constructor(){this.D9_=null;this.values=null;this.v9_=0;this.N9_=!0}Zb_(){this.D9_=this.D9_||[];this.values=this.values||[];this.v9_=0}end(){this.D9_.splice(this.v9_,this.D9_.length-this.v9_);this.values.splice(this.v9_,this.values.length-this.v9_)}S9_(t,i){const s=this.v9_;this.D9_[s]=t;this.values[s]=i;this.v9_=s+1}}}(),ON=function(){var t;return class{constructor(){this.eNt_=[];this.M9_=null;this.b9_=op.y9_}S9_(t,i,s){this.eNt_[t].S9_(i,s)}G9_(t,i){return this.N9_||!this.M9_||this.M9_.xx!==t.xx||this.M9_.yy!==t.yy||this.M9_.xy!==t.xy||this.M9_.yx!==t.yx||this.b9_!==i}R9_(){this.N9_=!0}ANt_(t,i){this.eNt_[t].Zb_()}nNt_(t){this.eNt_[t].end()}Zb_(t){if(t!==0&&(!this.eNt_||this.eNt_.length!==t)){this.eNt_=new Array(t);for(let i=0;i<t;i++)this.eNt_[i]=new VN}}end(t,i){this.M9_=t;this.b9_=i;this.N9_=!1}}}(),WN=Ci(function(){var i;let s=i=class t extends sI{constructor(t,i,s,e,A,n,h,r,o,l,u,a){const g=typeof n=="boolean"||n!=null&&(typeof n["x"]=="boolean"||typeof n["y"]);let c=qi(t,{x:Array.isArray(t)?t:[],y:Array.isArray(i)?i:[],series:Array.isArray(a)?a:[],linestyles:Array.isArray(s)?s:[new hl],fillstyles:Array.isArray(h)?h:null,bounds:e instanceof mA?e.clone():new mA(0,0,100,100),spline:typeof A=="boolean"&&A,logscale:!!g&&n,baseline:typeof r=="number"?r:0,gapfillcutoffvalue:0,gapvalue:Number.MAX_VALUE,stackedarea:typeof o=="boolean"&&o,percentarea:typeof l=="boolean"&&l,datainterpolationstrategy:wN.xbt_,modellimits:null,gridvisible:!0,autodatalimits:!0,symbols:null,arearange:Array.isArray(u)?u:null,labels:null},!0);c=Es(c);c["symbols"]&&(c["symbols"]=qi(c["symbols"],{linestyles:null,fillstyles:null,painters:null,width:10,height:10,sizeisindevicespace:!0,step:1,visible:!0},!0));c["labels"]&&(c["labels"]=qi(c["labels"],{annotations:null,offsetx:0,offsety:0,textstyles:[new qa],showellipsis:!1}));super(c);this.hNt_=[];this.rQ_=null;this.rNt_=0;this.oNt_=Number.MAX_VALUE;if(typeof c["datainterpolationstrategy"]=="number"){ki("datainterpolationstrategy as number is deprecated since 4.0, use DataInterpolationType type instead");c["datainterpolationstrategy"]=QN[c["datainterpolationstrategy"]]}typeof c["logscale"]!="boolean"&&(c["logscale"]={x:c["logscale"]["x"]===!0,y:c["logscale"]["y"]===!0});this.lNt_={x:c["x"],y:c["y"],linestyles:c["linestyles"],fillstyles:c["fillstyles"],size:c["y"].length,logscale:c["logscale"],spline:c["spline"],baseline:c["baseline"],gapfillcutoffvalue:c["gapfillcutoffvalue"],gapvalue:c["gapvalue"],stackedarea:c["stackedarea"],percentarea:c["percentarea"],datainterpolationstrategy:c["datainterpolationstrategy"],symbols:c["symbols"],labels:c["labels"],arearange:c["arearange"],series:c["series"],autodatalimits:c["modellimits"]==null&&c["autodatalimits"]};this.lNt_["autodatalimits"]===!1&&c["modellimits"]==null&&this.Lq_(this.cft_());this.Y9_=!0;this.K9_=new ON;this.uNt_=!1;this.L9_=!1;this.x9_=op.RDP;this.aNt_=null;this.jmt_=this.$Mt_.bind(this);this.gNt_=new ap;this.cNt_=new Yu;this.INt_=[];this.Us_=JN(this.lNt_,this);for(let t=0;t<this.Us_["x"].length;t++)this.Us_["x"][t].on(UD.pct_,this.jmt_);for(let t=0;t<this.Us_["y"].length;t++)this.Us_["y"][t].on(UD.pct_,this.jmt_);c["cache"]!==!1&&this.gk_(new tI);if(c["gridvisible"]){const t=typeof this.lNt_["logscale"]=="boolean"?{x:!1,y:this.lNt_["logscale"]}:this.lNt_["logscale"],i=t.x?new fd:new JC;i.Hx_("minor",!0);i.Hx_("edge",!1);i.Vx_("major").setColor(mN);i.Vx_("minor").setColor(yN);const s=t.y?new fd:new JC;s.Hx_("minor",!0);s.Hx_("edge",!1);s.Vx_("major").setColor(mN);s.Vx_("minor").setColor(yN);this.fNt_=new sB(s,i);this.GY_(this.fNt_)}this.setData(t);this.CNt_=null}dNt_(){this.Us_["yvalforgap"]!=null&&this.Us_["yvalforgap"].forEach((t=>{t.dispose()}));this.Us_["yvalforgap"]=null;if(this.oNt_===Number.MAX_VALUE)return this;const t=(this.Us_["yvalforgapfill"]||this.Us_["y"]).map((t=>t.clone(!0))),i=this.Us_["x"][0];for(let s=0;s<this.Us_["y"].length;++s)for(let e=1;e<i.getLength();++e)if(Math.abs(i.getValue(e)-i.getValue(e-1))>this.oNt_){i.zct_(e,i.getValue(e));t[s].zct_(e,Number.NaN);++e}this.Us_["yvalforgap"]=t;return this}BNt_(){this.Us_["yvalforgapfill"]!=null&&this.Us_["yvalforgapfill"].forEach((t=>{t.dispose()}));this.Us_["yvalforgapfill"]=null;if(this.rNt_<=0)return this;const t=this.Us_["y"].map((t=>t.clone(!0))),i=this.Us_["x"][0];for(let s=0;s<t.length;++s){let e=0;for(let A=0;A<i.getLength();++A)if(typeof t[s].getValue(A)=="number"&&!isNaN(t[s].getValue(A))){if(e<A){const n=undefined;if(A-e>1&&Math.abs(i.getValue(A)-i.getValue(e))<=this.rNt_)for(let n=e+1;n<A;++n){const h=Math.abs(i.getValue(n)-i.getValue(e))/Math.abs(i.getValue(A)-i.getValue(e));t[s].setValue(n,qN(t[s].getValue(e),t[s].getValue(A),h))}}e=A}}this.Us_["yvalforgapfill"]=t;return this}V9_(t){if(typeof t=="number"){ki("setOptimizationType(number) is deprecated since 4.0, use OptimizationType type instead");t=lp[t]}if(this.x9_===t)return this;this.td_();this.x9_=t;this.vn_().td_();return this}O9_(t){if(this.L9_===t)return this;this.td_();this.L9_=t;this.vn_().td_();return this}wNt_(t){if(this.uNt_!==t){this.uNt_=t;this.vn_().td_()}return this}vn_(t,i){i===oh.dC_&&(this.QNt_=[]);super.vn_(t,i);return this}getData(){return this.lNt_}setData(t){if(t==null)return this;const i=qi(t,{x:Array.isArray(t["x"])?t["x"]:this.lNt_["x"],y:Array.isArray(t["y"])?t["y"]:this.lNt_["y"],linestyles:Array.isArray(t["linestyles"])?t["linestyles"]:this.lNt_["linestyles"],fillstyles:Array.isArray(t["fillstyles"])?t["fillstyles"]:this.lNt_["fillstyles"],series:Array.isArray(t["series"])?t["series"]:this.lNt_["series"],baseline:typeof t["baseline"]=="number"?t["baseline"]:this.lNt_["baseline"],gapfillcutoffvalue:typeof t["gapfillcutoffvalue"]=="number"?t["gapfillcutoffvalue"]:this.lNt_["gapfillcutoffvalue"],gapvalue:typeof t["gapvalue"]=="number"?t["gapvalue"]:this.lNt_["gapvalue"],stackedarea:typeof t["stackedarea"]=="boolean"?t["stackedarea"]:this.lNt_["stackedarea"],percentarea:typeof t["percentarea"]=="boolean"?t["percentarea"]:this.lNt_["percentarea"],datainterpolationstrategy:this.lNt_["datainterpolationstrategy"],spline:typeof t["spline"]=="boolean"?t["spline"]:this.lNt_["spline"],logscale:typeof t["logscale"]=="boolean"?t["logscale"]:this.lNt_["logscale"],symbols:typeof t["symbols"]=="object"?t["symbols"]:this.lNt_["symbols"],labels:typeof t["labels"]=="object"?t["labels"]:this.lNt_["labels"],arearange:typeof t["arearange"]=="object"?t["arearange"]:this.lNt_["arearange"],autodatalimits:typeof t["autodatalimits"]=="boolean"?t["autodatalimits"]:this.lNt_["autodatalimits"]},!0);if(typeof i["datainterpolationstrategy"]=="number"){ki("datainterpolationstrategy as number is deprecated since 4.0, use DataInterpolationType type instead");i["datainterpolationstrategy"]=QN[i["datainterpolationstrategy"]]}this.lNt_={x:i["x"],y:i["y"],linestyles:i["linestyles"],fillstyles:i["fillstyles"],size:i["y"].length,logscale:i["logscale"],spline:i["spline"],baseline:i["baseline"],gapfillcutoffvalue:i["gapfillcutoffvalue"],gapvalue:i["gapvalue"],stackedarea:i["stackedarea"],percentarea:i["percentarea"],datainterpolationstrategy:i["datainterpolationstrategy"],symbols:i["symbols"],labels:i["labels"],arearange:i["arearange"],autodatalimits:i["autodatalimits"],series:i["series"]};const s=this.Us_!=null?this.Us_.x:[],e=this.Us_!=null?this.Us_.y:[];this.QNt_=null;this.Us_=JN(this.lNt_,this);this.aNt_=null;PN(s,this.Us_.x,this.jmt_);PN(e,this.Us_.y,this.jmt_);this.ENt_(this.lNt_["gapfillcutoffvalue"]);this.pNt_(this.lNt_["gapvalue"]);this.mNt_();this.vn_().td_();return this}sft_(t,i){this.Us_||(this.Us_={});let s;this.Us_.Jbt_=this.Us_.Jbt_||[];for(s=0;s<this.Us_.Jbt_.length;++s)this.iC_(this.Us_.Jbt_[s],rh.sC_,this.oQ_());this.Us_.Pbt_=this.Us_.Pbt_||[];for(s=0;s<this.Us_.Pbt_.length;++s)this.iC_(this.Us_.Pbt_[s],rh.sC_,this.oQ_());t=t||[];for(s=0;s<t.length;++s)this.tC_(t[s],rh.sC_,this.oQ_());i=i||[];for(s=0;s<i.length;++s)this.tC_(i[s],rh.sC_,this.oQ_());return this}oQ_(){this.rQ_||(this.rQ_=(t,i,s)=>{const e=Math.max(this.Us_["x"].length,this.Us_["y"].length);for(let t=0;t<e;++t){if(this.Us_["fillstyles"]&&i===this.Us_["fillstyles"][t]){this.td_();return}const s=this.Us_["linestyles"][t];if(i!==s)continue;const e=this.Us_["x"][t]||this.Us_["x"][0],A=this.Us_["y"][t]||this.Us_["y"][0],n=new mA(e.nA_(),A.nA_(),e.hA_(),A.hA_()),h=s.Ie_(),r=new xA((h+1)*Math.SQRT1_2,(h+1)*Math.SQRT1_2);this.if_()!=null&&this.if_().cI_(r,r);n.Le_(r.Ie_(),r.Ts_());this.td_(n)}});return this.rQ_}setOptions(t){if(t==null)return this;const i=qi(t,{linestyles:Array.isArray(t["linestyles"])?t["linestyles"]:this.lNt_["linestyles"],fillstyles:Array.isArray(t["fillstyles"])?t["fillstyles"]:this.lNt_["fillstyles"],baseline:typeof t["baseline"]=="number"?t["baseline"]:this.lNt_["baseline"],gapfillcutoffvalue:typeof t["gapfillcutoffvalue"]=="number"?t["gapfillcutoffvalue"]:this.lNt_["gapfillcutoffvalue"],gapvalue:typeof t["gapvalue"]=="number"?t["gapvalue"]:this.lNt_["gapvalue"],spline:typeof t["spline"]=="boolean"?t["spline"]:this.lNt_["spline"],symbols:typeof t["symbols"]=="object"?t["symbols"]:this.lNt_["symbols"],series:Array.isArray(t["series"])?t["series"]:this.lNt_["series"],labels:typeof t["labels"]=="object"?t["labels"]:this.lNt_["labels"],modellimits:typeof t["modellimits"]=="object"?t["modellimits"]:this.rt_(),autodatalimits:typeof t["autodatalimits"]=="boolean"?t["autodatalimits"]:this.lNt_["autodatalimits"]},!0);this.lNt_=Pi(i,this.lNt_);this.QNt_=null;this.Us_=JN(this.lNt_,this);this.aNt_=null;this.ENt_(this.lNt_["gapfillcutoffvalue"]);this.pNt_(this.lNt_["gapvalue"]);this.mNt_().vn_().td_();return this}JV_(){return{linestyles:this.lNt_["linestyles"],fillstyles:this.lNt_["fillstyles"],baseline:this.lNt_["baseline"],gapvalue:this.lNt_["gapvalue"],spline:this.lNt_["spline"],symbols:this.Us_.symbols!=null?{width:this.Us_.symbols.width,height:this.Us_.symbols.height,dimensions:this.Us_.symbols.dimensions,sizeisindevicespace:this.Us_.symbols.Obt_,painters:this.Us_.symbols.Vbt_,step:this.Us_.symbols.step,visible:this.Us_.symbols.visible,linestyles:this.Us_.symbols.Jbt_,fillstyles:this.Us_.symbols.Pbt_}:null,labels:this.lNt_["labels"],modellimits:this.rt_(),autodatalimits:this.nbt_(),series:this.lNt_["series"]}}$Mt_(t,i,s){let e,A=null;for(e=0;e<this.INt_.length;e++)i!==this.Us_.x[e%this.Us_.x.length]&&i!==this.Us_.y[e%this.Us_.y.length]||this.INt_[e].clear();if(i instanceof PD&&s!=null&&s["index"]!=null&&s["count"]!=null&&s["type"]==="added"){let t=-1,n,h;for(e=0;e<this.Us_.x.length;e++)if(this.Us_.x[e]===i||this.Us_.y[e]===i){t=e;break}if(t!==-1){n=this.Us_.x[t];h=this.Us_.y[t];if(this.Us_["yvalforgap"]!=null){this.dNt_();h=this.Us_["yvalforgap"][t]}if(this.Us_["yvalforgapfill"]!=null){this.BNt_();h=this.Us_["yvalforgapfill"][t]}n=n.toArray(!1);h=h.toArray(!1);t=s["index"]>0?s["index"]-1:0;if(n.length===h.length){let i=n[t],r=i,o=h[t],l=o;const u=n.length,a=s["count"];for(e=t;e<u&&e<t+a+2;e++){i=Math.min(i,n[e]);r=Math.max(r,n[e]);o=Math.min(o,h[e]);l=Math.max(l,h[e])}A=new mA(i,o,r,l);const g=this.gt_();if(g!=null){let t=new xA(g.Ie_(),g.Ie_());t=this.if_().cI_(t,t);A.Le_(t.Ie_(),t.Ts_())}const c=this.Us_.symbols;if(c!=null&&this.lNt_["symbols"]!=null&&this.lNt_["symbols"]["visible"]){let i=c.width,s=c.height;if(c.dimensions!=null&&c.dimensions[t]!=null){i=c.dimensions[t].Ie_();s=c.dimensions[t].Ts_()}const e=undefined;if(this.lNt_["symbols"]["sizeisindevicespace"]){SN.setSize(i,s);SN=this.if_().cI_(SN,SN);i=SN.Ie_();s=SN.Ts_()}A.Le_(i,s)}if(this.Us_.iNt_!==null||this.Us_.$bt_===!0){const t=this.rt_();A.setY(t.getY()).Be_(t.Ts_())}}else A=sa.SS_()}}A!=null&&A.isEmpty()===!1?this.td_(A):this.td_();this.yNt_();this.mNt_().vn_()}dispose(){if(!this.Df_()){if(this.Us_["x"]!=null&&LN(this.Us_["x"]))for(let t=0;t<this.Us_["x"].length;t++)this.Us_["x"][t].off(UD.pct_,this.jmt_);if(this.Us_["y"]!=null&&LN(this.Us_["y"]))for(let t=0;t<this.Us_["x"].length;t++)this.Us_["y"][t].off(UD.pct_,this.jmt_);for(let t=0;t<this.INt_.length;t++)this.INt_[t].dispose();super.dispose()}}rt_(){return this.lNt_&&this.lNt_["autodatalimits"]===!0?this.cft_():super.rt_()}Lq_(t){this.lNt_!=null&&(this.lNt_["autodatalimits"]=!1);super.Lq_(t);return this}mNt_(){this.Y9_=!0;this.K9_.R9_();return this.Us_.x.length===0||this.Us_.y.length===0,this}J9_(){const t=this.L9_||this.uNt_;if(this.Y9_&&this.x9_===op.RDP&&t){const t=this.Us_.y.length,i=this.Us_.x.length;let s,e,A,n;for(e=0;e<t;e++){A=this.Us_.x[e>=i?i-1:e].toArray(!1);n=this.Us_.y[e].toArray(!1);s=Math.min(A.length,n.length);this.DNt_&&this.DNt_.length===t||(this.DNt_=new Array(t));this.DNt_[e]&&this.DNt_[e].length===s||(this.DNt_[e]=new Float64Array(s));rp.e9_(A,n,s,this.DNt_[e])}this.Y9_=!1}}P9_(t){const i=undefined;if(!(this.L9_||this.uNt_))return;const s=t.Ji_();if(!this.K9_.G9_(s,this.x9_))return;this.J9_();const e=this.Us_.x.length,A=this.Us_.y.length;this.K9_.Zb_(A);for(let t=0;t<A;t++){let i=this.Us_.x[t>=e?e-1:t].toArray(!1),A=this.Us_.y[t].toArray(!1);const n=Math.min(i.length,A.length);if(this.x9_===op.RDP){const e=this.DNt_[t],h=rp.r9_(i,A,e,n,s);i=Array.prototype.slice.call(h[ep.$6_],0,h[ep.i9_]);A=Array.prototype.slice.call(h[ep.t9_],0,h[ep.i9_]);this.MNt_(t,i,A)}else this.vNt_(s,t,i,A);this.INt_[t]!=null&&this.INt_[t].clear()}this.K9_.end(s,this.x9_)}MNt_(t,i,s){if(i.length===0||s.length===0){this.K9_.ANt_(t,i.length);this.K9_.nNt_(t);return}const e=0,A=i.length;let n;this.K9_.ANt_(t,i.length);for(n=e;n<A;n++)this.K9_.S9_(t,i[n],s[n]);this.K9_.nNt_(t)}vNt_(t,i,s,e){if(s.length===0||e.length===0){this.K9_.ANt_(i,s.length);this.K9_.nNt_(i);return}let A;const n=t.nI_(1,0).clone(),h=t.nI_(0,0).clone();n.setX(n.x-h.x);n.setY(n.y-h.y);const r=Math.sqrt(n.x*n.x+n.y*n.y),o=n.x/r,l=n.y/r,u=0,a=s.length;this.K9_.ANt_(i,s.length);let g,c=NaN,I,f,C,d,B;const w=()=>{if(!isNaN(c)){d!==f&&d!==I&&this.K9_.S9_(i,s[d],e[d]);if(I<f){this.K9_.S9_(i,s[I],e[I]);this.K9_.S9_(i,s[f],e[f])}else if(f<I){this.K9_.S9_(i,s[f],e[f]);this.K9_.S9_(i,s[I],e[I])}else this.K9_.S9_(i,s[f],e[f]);B!==f&&B!==I&&this.K9_.S9_(i,s[B],e[B])}};for(C=u;C<a;C++)if(isNaN(e[C])){w();this.K9_.S9_(i,s[C],e[C]);c=NaN}else{A=t.nI_(s[C],e[C]);g=o*A.x+l*A.y;if(!isNaN(c)&&Math.abs(g-c)<1){e[C]<e[I]&&(I=C);e[f]<e[C]&&(f=C);B=C}else{w();c=g;d=B=I=f=C}}w();this.K9_.nNt_(i)}JBt_(){if(!this.Us_)return null;let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,A,n,h,r;const o=this.AD_();for(A=0;A<this.Us_.y.length;A++){if(this.Us_.sNt_!=null&&this.Us_.sNt_.length>A&&this.Us_.sNt_[A]["visible"]!=null&&!this.Us_.sNt_[A]["visible"])continue;r=this.Us_.$bt_?this.Us_.Wbt_[A]:this.Us_.y[A];const o=A<this.Us_.x.length?this.Us_.x[A]:this.Us_.x[this.Us_.x.length-1];n=o.toArray(!1);h=r.toArray(!1);if(n.length!==0&&h.length!==0){t=Math.min(o.nA_(),t);s=Math.min(r.nA_(),s);i=Math.max(o.hA_(),i);e=Math.max(r.hA_(),e)}}s=Math.min(o,s);e=Math.max(o,e);if(t===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY){t=-1;i=1}else if(i===t){t-=1;i+=1}if(s===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY){s=-1;e=1}else if(e===s){s-=1;e+=1}return new mA(t,s,i,e)}zY_(t){this.Xb_(t);this.YY_().forEach((function(i){if(t.filter(i)){t.tk_()&&t.YR_(i);i.render(t)}}));this.bNt_(t);this.iN_(t)}OY_(t,i){const s=this;this.Xb_(t);Au.fN_(this.YY_(),(function(i,s){if(t.filter(i)){t.YR_(i);i.ad_(t,s)}else s()}),(function(){s.bNt_(t);s.iN_(t);i()}))}mR_(t,s,e,A,n){const h=Math.min(t.length,s.length);if(h<2)return;const r=A.rS_();let o=A,l;if(n!==void 0){i.NNt_==null&&(i.NNt_=new Yu);o=i.NNt_}let u=!1,a=!1,g=!1;for(let i=1;i<h;i++)if(isNaN(t[i])||isNaN(s[i])){if(u===!0){A.stroke();u=!1}}else{bN.vs_(t[i-1],s[i-1]);NN.vs_(t[i],s[i]);l=r.xe_(bN,NN,bN,NN);if(l>=0){a=!0;if(u===!1){u=!0;o.rB_(e);o.beginPath();o.moveTo(t[i-1],s[i-1])}else if(g){o.moveTo(t[i-1],s[i-1]);g=!1}o.lineTo(t[i],s[i])}else g=!0}a!==!1&&(n!=null?A.pO_(o,n):A.stroke())}SNt_(t,s,e,A,n,h,r){const o=1,l=1;i.GNt_==null&&(i.GNt_=new ma({width:o,height:l,alignment:dA.ne_,sizeisindevicespace:!0,painter:tp,fillstyle:new wr("black")}));const u=[];let a=0;const g=function(){u.push({index:a,x:s[a],y:e[a],y1:h!=null?h[a]:[]})};let c=t.cR_();const I=t.Ji_();c=mA.Ue_(c,o*2,l*2);for(let A=0;A<s.length;++A){a=A;const n=I.nI_(s[A],e[A]);if(c.contains(n.x,n.y)!==!1&&(e[A]!=null&&!isNaN(e[A]))){i.GNt_.gR_(s[A],e[A]);t.pO_(i.GNt_,g.bind(this))}}if(u.length>0){t.mO_(ks({visual:this,series:A,indices:u.map((function(t){return t["index"]})),points:u},["visual","series","indices","points"]));this.hNt_.push({series:A,indices:u.map((function(t){return t["index"]})),points:u})}else{let i=!1;n!=null?t.pO_(n,(function(){i=!0})):this.mR_(s,e,r,t,(function(){i=!0}));if(i){t.mO_(ks({visual:this,series:A,indices:[],points:[]},["visual","series","indices","points"]));this.hNt_.push({series:A,indices:[],points:[]})}}}AD_(){let t=this.Us_.FW_?this.Us_.FW_:0;if(this.Us_.Xbt_){t=kN(t);isNaN(t)&&(t=1)}return t}bNt_(t){t.filter(this)&&t.YR_(this);this.hNt_=[];if(this.Us_.x.length!==0&&this.Us_.y.length!==0){this.P9_(t);this.Us_.iNt_!==null&&this.RNt_(t);if(this.Us_.$bt_===!0)this.kNt_(t);else{const i=this.Us_.x;let s=this.Us_.y;this.Us_["yvalforgapfill"]!=null&&(s=this.Us_["yvalforgapfill"]);this.Us_["yvalforgap"]!=null&&(s=this.Us_["yvalforgap"]);const e=this.Us_.x.length;let A,n,h,r;const o=this.AD_();for(n=0;n<s.length;n++){if(this.Us_.sNt_!=null&&this.Us_.sNt_.length>n&&this.Us_.sNt_[n]["visible"]!=null&&!this.Us_.sNt_[n]["visible"])continue;let l=!1;h=this.L9_?this.K9_.eNt_[n].D9_:i[n>=e?e-1:n].toArray(!1);r=this.L9_?this.K9_.eNt_[n].values:s[n].toArray(!1);if(h.length!==0&&r.length!==0){if(h.length<2)A=this.gNt_.dt_({optimization:!1,x:h,y:r});else{if(this.Us_.Pbt_!=null&&this.Us_.Pbt_.length>0&&this.Us_.Pbt_[n]!=null){this.FNt_(this.cNt_,h,r,this.Us_.jbt_,o);this.cNt_.iQ_(this.Us_.Pbt_[n]).rB_(null);this.cNt_.render(t)}if(this.Us_.Jbt_!=null&&this.Us_.Jbt_.length>0&&this.Us_.Jbt_[n]!=null)if(this.Us_.jbt_===!1||t.tk_()){this.mR_(h,r,this.Us_.Jbt_[n],t);l=!0}else{this.INt_[n]==null?this.INt_[n]=(new Bp).Qt_(h,r):this.INt_[n].nt_().getLength()===0&&this.INt_[n].Qt_(h,r);this.INt_[n].rB_(this.lNt_["linestyles"][n]);this.INt_[n].render(t);A=this.INt_[n]}}t.tk_()&&(A!==null||l)&&this.SNt_(t,h,r,n,A,null,this.Us_.Jbt_[n]);A=null}}this.xNt_(t)}t.tk_()&&t.mO_(new jf(this,this.hNt_))}}kNt_(t){let i,s,e,A,n,h;const r=this.Us_.x.length;let o;const l=[],u=this.AD_();for(i=0;i<this.Us_.y.length;i++){e=this.Us_.Wbt_[i].toArray(!0);s=this.Us_.zbt_[i].toArray(!0);n=this.L9_?this.K9_.eNt_[i].D9_:this.Us_.x[i>=r?r-1:i].toArray(!1);h=this.L9_?this.K9_.eNt_[i].values:this.Us_.y[i].toArray(!0);i===0&&l.push(u);if(s.length!==0&&e.length!==0){if(s.length<2)o=this.gNt_.dt_({x:s,y:e}).O9_(!1);else{if(this.Us_.Jbt_.length>0){if(this.Us_.jbt_===!0){this.INt_[i]==null&&(this.INt_[i]=new Bp);o=this.INt_[i].Qt_(s,e)}else o=this.gNt_.dt_({x:s,y:e}).O9_(!1);l.push({x:o.Bt_(),y:o.wt_()});o.rB_(this.Us_.Jbt_[i]);o.render(t)}if(this.Us_.Pbt_.length>0){this.FNt_(this.cNt_,s,e,this.Us_.jbt_,l,l.length-2);this.cNt_.iQ_(this.Us_.Pbt_[i]);this.cNt_.rB_(new hl(new nA(255,255,255,0)));this.cNt_.render(t)}}if(t.tk_()&&o!==null){let r=[],l=[];for(A=0;A<s.length;A++){const t=n.indexOf(s[A]);if(t!==-1){r.push(A);l.push(t)}}for(A=0;A<r.length;A++){s[A]=s[r[A]];e[A]=e[r[A]];h[A]=h[l[A]]}s.splice(r.length);e.splice(r.length);h.splice(r.length);this.SNt_(t,s,e,i,o,h);s=null;e=null;h=null;l=null;r=null}o=null}}this.xNt_(t)}RNt_(t){const i=this.Us_.x.length;let s,e,A,n;for(let h=0;h<this.Us_.iNt_.length;h++){s=this.L9_?this.K9_.eNt_[h].D9_:this.Us_.x[h>=i?i-1:h].toArray(!1);e=this.Us_.iNt_[h]["range"].length;if(e!==2||s.length===0)continue;const r=this.Us_.iNt_[h]["range"][0].toArray(!1),o=this.Us_.iNt_[h]["range"][1].toArray(!1);if(this.Us_.jbt_===!0){this.INt_[0]==null&&(this.INt_[0]=new Bp);A=this.INt_[0].dt_({x:s,y:r});A.rB_(this.Us_.iNt_[h]["linestyles"][0]);A.render(t);this.INt_[1]==null&&(this.INt_[1]=new Bp);n=this.INt_[1].dt_({x:s,y:o});n.rB_(this.Us_.iNt_[h]["linestyles"][1]);n.render(t)}else{A=this.gNt_.dt_({x:s,y:r});A.rB_(this.Us_.iNt_[h]["linestyles"][0]);A.render(t);n=this.gNt_.dt_({x:s,y:o});n.rB_(this.Us_.iNt_[h]["linestyles"][1]);n.render(t)}if(this.Us_.iNt_[h]["fillstyle"]!=null){this.FNt_(this.cNt_,s,r,this.Us_.jbt_,[{x:n.Bt_(),y:n.wt_()}],0);this.cNt_.iQ_(this.Us_.iNt_[h]["fillstyle"]);this.cNt_.rB_(new hl(new nA(255,255,255,0)));this.cNt_.render(t)}}}xNt_(t){let i,s,e,A,n,h,r,o,l,u=0,a,g,c=0,I=0;const f=this.Us_.x.length,C=this.Us_.symbols!=null&&this.Us_.symbols.visible&&this.Us_.symbols.Vbt_!=null&&this.Us_.symbols.Vbt_.length>0,d=this.Us_.labels!=null;if(C||d){if(this.QNt_==null||this.CNt_!==t.constructor){this.QNt_=[];this.CNt_=t.constructor}for(i=0;i<this.Us_.y.length;i++){if(this.Us_.sNt_!=null&&this.Us_.sNt_.length>i&&this.Us_.sNt_[i]["visible"]!=null&&!this.Us_.sNt_[i]["visible"])continue;if(this.Us_.$bt_===!0){e=this.Us_.zbt_[i].toArray(!0);A=this.Us_.Wbt_[i].toArray(!0);a=this.uNt_?this.K9_.eNt_[i].D9_:this.Us_.x[i>=f?f-1:i].toArray(!1);g=this.uNt_?this.K9_.eNt_[i].values:this.Us_.y[i].toArray(!1);const t=[];for(s=0;s<e.length;s++)a.indexOf(e[s])!==-1&&t.push(s);for(s=0;s<t.length;s++){e[s]=e[t[s]];A[s]=A[t[s]]}e.splice(t.length);A.splice(t.length)}else{e=this.uNt_?this.K9_.eNt_[i].D9_:this.Us_.x[i>=f?f-1:i].toArray(!1);A=this.uNt_?this.K9_.eNt_[i].values:this.Us_.y[i].toArray(!1)}if(e.length===0||A.length===0)continue;const B=typeof this.Us_.symbols.visible=="boolean"?this.Us_.symbols.visible:this.Us_.symbols.visible[i];if(C&&B){t.VC_(vN.Kf_());const a=this.Us_.symbols;o=a.width;l=a.height;if(a.dimensions!=null&&a.dimensions[i]!=null){o=a.dimensions[i].Ie_();l=a.dimensions[i].Ts_()}u=a.step;if(a.Pbt_!=null&&a.Pbt_.length>0){n=a.Pbt_[i];n||(n=wr.RB_)}else n=wr.RB_;if(a.Jbt_!=null&&a.Jbt_.length>0){h=a.Jbt_[i];h||(h=new hl("transparent",0))}else h=new hl("transparent",0);r=a.Vbt_[i];a.width==null&&(o=10);a.height==null&&(l=10);a.step==null&&(u=1);if(n!==null||h!=null){let a=this.QNt_[i];if(a==null){vN.dt_({width:o,height:l,sizeisindevicespace:this.lNt_["symbols"]["sizeisindevicespace"],painter:r,linestyle:h,fillstyle:n});c=vN.gt_()==null?0:vN.gt_().Ie_()+1;a=t.ZR_(vN.Ie_()+c,vN.Ts_()+c);GN(vN,a);t.tk_()===!1&&(this.QNt_[i]=a)}const g=a!=null?a.Ie_()/2:0,I=a!=null?a.Ts_()/2:0;let f=t.cR_();const C=t.Ji_();f=mA.Ue_(f,o/4,l/4);let d=null;const B=Math.sqrt(o*o+l*l),w=this.lNt_["symbols"]["decimate"]===!0;for(s=0;s<e.length;s+=u||1){const i=C.nI_(e[s],A[s]);if(w){if(d!=null&&lA.Ss_(d,i)<B)continue;d==null?d=i.clone():d.vs_(i.x,i.y)}f.contains(i.x,i.y)!==!1&&(a!=null?a.render(t,i.x-g,i.y-I):vN.gR_(e[s],A[s]).render(t))}}t.TR_()}if(d){I=u;const n=this.Us_.labels;n["step"]!=null&&(I=n["step"]);let h=n["anchor"]||dA.se_,r=n["offsetx"]!=null?n["offsetx"]:5,o=n["offsety"]!=null?n["offsety"]:-5;if(n["offsetx"]==null&&n["offsety"]==null&&n["offset"]!=null){const t=Number(n["offset"]);r=0;o=0;OC.jj_(h)?r=t:OC.Zj_(h)&&(r=-t);OC.zj_(h)?o=t:OC.Xj_(h)&&(o=-t)}r=Math.sign(r)*bn.$c_(r,0,t.Ji_());o=Math.sign(o)*bn.$c_(0,o,t.Ji_());if(this.getParent().jY_()){o*=-1;OC.zj_(h)?h=OC.jj_(h)?dA.se_:OC.Zj_(h)?dA.Ae_:dA.re_:OC.Xj_(h)&&(h=OC.jj_(h)?dA.ie_:OC.Zj_(h)?dA.ee_:dA.le_)}c=n["padding"]||0;let l=n["annotations"]!=null&&n["annotations"][i]!=null?n["annotations"][i]:null;RN.g_(n["textstyles"]!=null?n["textstyles"][i]:null);RN.iQ_(n["fillstyles"]!=null?n["fillstyles"][i]:null);RN.rB_(n["linestyles"]!=null?n["linestyles"][i]:null);l!=null&&(l instanceof vM||l instanceof PD)&&(l=l.toArray(!1));RN.SE_(h).zX_(c).tR_(!0);for(s=0;s<e.length;s+=I||1){RN.gR_(e[s]+r,A[s]+o);l!=null?RN.a_(l[s]):this.Us_.$bt_?RN.a_(g[s]):RN.a_(A[s]);RN.render(t)}}if(this.Us_.$bt_){e=null;A=null}}}}FNt_(t,i,s,e,A,n){t.clear();let h,r,o,l,u,a,g=0,c=-1,I,f,C,d,B,w,Q,E;if(this.Us_.$bt_||this.Us_.iNt_!=null)if(A[n]!==this.AD_()&&A[n]!=null){if(A[n].x[0]<=i[0]&&A[n].x[A[n].x.length-1]>=i[i.length-1]){o=0;l=i.length-1;u=NA.findIndex(i[0],A[n].x);a=NA.findIndex(i[i.length-1],A[n].x)}else if(A[n].x[0]<=i[0]){o=0;u=NA.findIndex(i[0],A[n].x);a=A[n].x.length-1;l=NA.findIndex(A[n].x[A[n].x.length-1],i);if(u===a||u<0){o=i.length-1;l=i.length-1}}else if(A[n].x[A[n].x.length-1]>=i[i.length-1]){l=i.length-1;a=NA.findIndex(i[i.length-1],A[n].x);u=0;o=NA.findIndex(A[n].x[0],i);if(u===a||a<0){o=i.length-1;l=i.length-1}}else{u=0;a=A[n].x.length-1;o=NA.findIndex(A[n].x[0],i);l=NA.findIndex(A[n].x[A[n].x.length-1],i)}if(e){const t=Ju.pS_(i,s).getPoints();I=t["firstcontrolpointsx"];C=t["firstcontrolpointsy"];f=t["secondcontrolpointsx"];d=t["secondcontrolpointsy"]}if(a>=0&&u>=0){t.moveTo(A[n].x[u],A[n].y[u]);if(e){const e=Ju.pS_(A[n].x,A[n].y).getPoints();B=e["firstcontrolpointsx"];w=e["firstcontrolpointsy"];Q=e["secondcontrolpointsx"];E=e["secondcontrolpointsy"];for(h=u;h<a;h++)t.bezierCurveTo(B[h],w[h],Q[h],E[h],A[n].x[h+1],A[n].y[h+1]);t.lineTo(i[l],s[l]);for(h=l;h>o;h--)t.bezierCurveTo(f[h-1],d[h-1],I[h-1],C[h-1],i[h-1],s[h-1])}else{for(h=u;h<=a;h++)t.lineTo(A[n].x[h],A[n].y[h]);t.lineTo(i[l],s[l]);for(h=l;h>=o;h--)t.lineTo(i[h],s[h])}t.moveTo(A[n].x[u],A[n].y[u]);t.close()}c=-1;for(h=0;h<o;h++){g=0;t.moveTo(i[h],s[h]);for(r=n-1;r>0;r--){i[h]>=A[r].x[0]&&i[h]<=A[r].x[A[r].x.length-1]&&(c=NA.findIndex(i[h],A[r].x));if(c!==A[r].x.length-1&&c!==-1){g=r;break}}if(A[g]!==this.AD_())if(e){t.bezierCurveTo(I[h],C[h],f[h],d[h],i[h+1],s[h+1]);t.lineTo(A[g].x[c+1],A[g].y[c+1]);const e=Ju.pS_(A[g].x,A[g].y).getPoints();B=e["firstcontrolpointsx"];w=e["firstcontrolpointsy"];Q=e["secondcontrolpointsx"];E=e["secondcontrolpointsy"];t.bezierCurveTo(Q[c],E[c],B[c],w[c],A[g].x[c],A[g].y[c])}else{t.lineTo(i[h+1],s[h+1]);t.lineTo(A[g].x[c+1],A[g].y[c+1]);t.lineTo(A[g].x[c],A[g].y[c])}else{e?t.bezierCurveTo(I[h],C[h],f[h],d[h],i[h+1],s[h+1]):t.lineTo(i[h+1],s[h+1]);t.lineTo(i[h+1],A[g]);t.lineTo(i[h],A[g])}t.lineTo(i[h],s[h]);t.close()}for(h=i.length-1;h>l;h--){g=0;t.moveTo(i[h],s[h]);for(r=n-1;r>0;r--){i[h]>=A[r].x[0]&&i[h]<=A[r].x[A[r].x.length-1]&&(c=NA.findIndex(i[h],A[r].x));if(c!==-1){g=r;break}}if(A[g]!==this.AD_())if(e){t.bezierCurveTo(f[h-1],d[h-1],I[h-1],C[h-1],i[h-1],s[h-1]);t.lineTo(A[g].x[c-1],A[g].y[c-1]);const e=Ju.pS_(A[g].x,A[g].y).getPoints();B=e["firstcontrolpointsx"];w=e["firstcontrolpointsy"];Q=e["secondcontrolpointsx"];E=e["secondcontrolpointsy"];t.bezierCurveTo(B[c-1],w[c-1],Q[c-1],E[c-1],A[g].x[c],A[g].y[c])}else{t.lineTo(i[h-1],s[h-1]);t.lineTo(A[g].x[c-1],A[g].y[c-1]);t.lineTo(A[g].x[c],A[g].y[c])}else{e?t.bezierCurveTo(f[h-1],d[h-1],I[h-1],C[h-1],i[h-1],s[h-1]):t.lineTo(i[h-1],s[h-1]);t.lineTo(i[h-1],A[g]);t.lineTo(i[h],A[g])}t.lineTo(i[h],s[h]);t.close()}}else{t.moveTo(i[0],A[n]);if(e)Bp.prototype.Qt_.call(t,i,s);else for(h=0;h<i.length;h++)t.lineTo(i[h],s[h]);t.lineTo(i[i.length-1],A[n]);t.lineTo(i[0],A[n]);t.close()}else{t.moveTo(i[0],A);const n=Math.min(i.length,s.length);if(e)Bp.prototype.Qt_.call(t,i,s);else for(h=0;h<n;h++)t.lineTo(i[h],s[h]);t.lineTo(i[n-1],A);t.lineTo(i[0],A);t.close()}return t}LNt_(t){const i=function(t,i,s){s.Px_(t,hl.Wi_(i))},s=function(t,s){t["major"]!==void 0&&i("major",t["major"],s);t["minor"]!==void 0&&i("minor",t["minor"],s);t["edge"]!==void 0&&i("edge",t["edge"],s)};if(t["x"]!==void 0){const i=this.fNt_.ZZ_(fg.ax_);s(t["x"],i)}if(t["y"]!==void 0){const i=this.fNt_.ZZ_(fg.ux_);s(t["y"],i)}this.td_();return this}UNt_(){return this.fNt_}$X_(t,i,s){const e=t=>t instanceof jf&&t.GO_()===this;let A,n,h,r;if(t instanceof mA)A=t.clone();else if(t instanceof lA){i=i||MN;A=new mA(t.x-i,t.y-i,t.x+i,t.y+i)}if(A!=null){const t=this.getRoot();if(ne(t)){const i=t.rt_();if(s===fg.ax_){A.setY(i.getY());A.Be_(i.Ts_())}else if(s===fg.ux_){A.setX(i.getX());A.de_(i.Ie_())}}n=[A.we_(),A.Qe_(),A.Qe_(),A.we_()];h=[A.Ee_(),A.Ee_(),A.pe_(),A.pe_()];r=bC.select(this.getRoot(),n,h,!0).filter(e)}else if(t!=null&&Array.isArray(t["x"])&&Array.isArray(t["y"])){n=t["x"];h=t["y"]}n!=null&&h!=null&&n.length>2&&h.length>2&&(r=bC.select(this.getRoot(),n,h,!0).filter(e));return r.length>0?r[0].getData():null}nbt_(){return this.lNt_["autodatalimits"]}hbt_(t){if(this.lNt_["autodatalimits"]===t)return this;this.td_();this.lNt_["autodatalimits"]=t;this.vn_().td_();return this}cft_(){this.aNt_==null&&(this.aNt_=this.JBt_());return this.aNt_}yNt_(){this.aNt_=this.JBt_();return this.aNt_}N_(){let t=super.N_();t=qi(this.JV_(),t);return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);return this}ENt_(t){if(typeof t=="number"&&this.rNt_!==t){this.rNt_=t;this.BNt_();this.dNt_();this.vn_().td_()}return this}YNt_(){return this.rNt_}pNt_(t){if(typeof t=="number"&&this.oNt_!==t){this.oNt_=t;this.dNt_();this.vn_().td_()}return this}TNt_(){return this.oNt_}KNt_(t){return this.INt_[t]||null}HNt_(t){if(this.Us_.iNt_!=null){const i=t%2,s=(t-i)/2;return this.Us_.iNt_[s]!=null&&this.Us_.iNt_[s]["range"][i]!=null?this.Us_.iNt_[s]["range"][i].toArray(!1):[]}const i=this.Us_.$bt_?this.Us_.Wbt_:this.Us_["yvalforgap"]||this.Us_["yvalforgapfill"]||this.Us_.y;return i!=null&&i[t]!=null?i[t].toArray(!1):[]}};s.GNt_=null;s.NNt_=null;s=i=t([Zs(lN),_s("geotoolkit.controls.shapes.LineChart")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPcHRpbWl6YXRpb25UeXBlIjoiVjlfIiwic2V0T3B0aW1pemF0aW9uIjoiTzlfIiwic2V0T3B0aW1pemF0aW9uU3ltYm9sIjoid050XyIsInVwZGF0ZVN0YXRlIjoidm5fIiwiZ2V0SW52YWxpZGF0ZU1ldGhvZCI6Im9RXyIsImdldE9wdGlvbnMiOiJKVl8iLCJnZXRNb2RlbExpbWl0cyI6InJ0XyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwicmVuZGVyQ29udGVudCI6InpZXyIsInJlbmRlckNvbnRlbnRBc3luYyI6Ik9ZXyIsInNldEdyaWRTdHlsZSI6IkxOdF8iLCJnZXRHcmlkIjoiVU50XyIsImhpdFRlc3QiOiIkWF8iLCJnZXRBdXRvRGF0YUxpbWl0cyI6Im5idF8iLCJzZXRBdXRvRGF0YUxpbWl0cyI6ImhidF8iLCJnZXREYXRhTGltaXRzIjoiY2Z0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJzZXRHYXBGaWxsQ3V0b2ZmVmFsdWUiOiJFTnRfIiwiZ2V0R2FwRmlsbEN1dG9mZlZhbHVlIjoiWU50XyIsInNldEdhcFZhbHVlIjoicE50XyIsImdldEdhcFZhbHVlIjoiVE50XyJ9fX0g"),zN=function(){var i;let s=i=class t extends be{process(t,i,s,e){const A=e(t["x"].length,i["x"].length),n=Math.floor(A);s={x:i["x"].slice(0,n),y:i["y"].map((t=>t.slice(0,n)))};if(n!==A){const t=A-n;let e=i["x"][n-1],h=i["x"][n],r=e+(h-e)*t;s["x"].push(r);for(let A=0;A<i["y"].length;A++){e=i["y"][A][n-1];h=i["y"][A][n];r=e+(h-e)*t;s["y"][A].push(r)}}return s}clone(t){return{x:t["x"].slice(),y:t["y"].map((t=>t.slice()))}}static Ai_(){i.Gf_==null&&(i.Gf_=new i);return i.Gf_}};s.Gf_=null;s=i=t([_s(null)],s);return s}(),XN=function(){var i;let s=i=class t extends zN{process(t,i,s,e){s=s||{x:[],y:[]};if(t["x"].length===i["x"].length){for(let A=0;A<t["x"].length;++A)s["x"][A]=e(t["x"][A],i["x"][A]);for(let A=0;A<t["y"].length;++A){s["y"][A]=s["y"][A]||[];for(let n=0;n<t["x"].length;++n)s["y"][A][n]=e(t["y"][A][n],i["y"][A][n])}return s}if(t["x"].length===0){for(let t=0;t<i["x"].length;++t)s["x"][t]=i["x"][t];for(let t=0;t<i["y"].length;++t){s["y"][t]=s["y"][t]||[];for(let A=0;A<i["x"].length;++A)s["y"][t][A]=e(0,i["y"][t][A])}return s}return null}static Ai_(){i.Gf_==null&&(i.Gf_=new i);return i.Gf_}};s.Gf_=null;s=i=t([_s(null)],s);return s}(),jN=Ci(function(){let i=class t extends ke{bi_(t,i){return t["attributename"]==="data"&&i instanceof WN&&(t["type"]==="vertical"||t["type"]==="horizontal")}Yi_(t){this.Qi_==="horizontal"&&this.Ki_(zN.Ai_());this.Qi_==="vertical"&&this.Ki_(XN.Ai_());const i=t.getData();return i==null?null:i!=null?{x:EN(i["x"]),y:EN(i["y"])}:null}apply(t){t.setData(this.Ti_())}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(jN);var ZN=function(){let i=class t extends db{constructor(t,i){t||(t={});qi({innerradius:0},t);super(t,i)}setOptions(t){t=Pi(t,{});qi({innerradius:0},t);super.setOptions(t);return this}};i=t([_s("geotoolkit.controls.shapes.PieChart")],i);return i}();var _N=Ci(function(){var i;let s=i=class t extends su{constructor(t){super(t);this.UU_=qi(t,{name:"Polar Axis",polargrid:null,center:new lA(0,0),startangle:0,relativeangle:!1,step:10,modelradius:90,outerradius:50});this.qNt_=null;this.HDt_=null;this.JNt_=null;this.PNt_=null;this.VNt_=null;this.dt_(this.UU_)}N_(){const t=super.N_();return qi(this.UU_,t)}dt_(t){super.dt_(t);this.UU_=qi(t,this.UU_);this.ONt_=t["polargrid"]!=null?t["polargrid"]:this.ONt_;this.qz_=t["center"]!=null?t["center"]:this.qz_;this.wy_=t["outerradius"]!=null?t["outerradius"]:this.wy_;this.WNt_=t["modelradius"]!=null?t["modelradius"]:this.WNt_;this.zNt_=t["step"]!=null?t["step"]:this.zNt_;if(t["labels"]!=null){t["labels"]["visible"]!=null&&(this.qNt_=t["labels"]["visible"]);t["labels"]["textstyle"]!==void 0&&(this.HDt_=qa.Wi_(t["labels"]["textstyle"]));t["labels"]["fillstyle"]!==void 0&&(this.JNt_=il.BD_(t["labels"]["fillstyle"]));t["labels"]["linestyle"]!==void 0&&(this.PNt_=hl.Wi_(t["labels"]["linestyle"]));t["labels"]["formatter"]!==void 0&&(this.VNt_=t["labels"]["formatter"])}this.XNt_=t["relativeangle"]!=null?t["relativeangle"]:this.XNt_;this.jNt_=t["startangle"]!=null?t["startangle"]:this.jNt_;if(this.ONt_!=null){const t=this.ONt_.N_();this.qz_=t["center"];this.wy_=t["outerradius"];this.WNt_=t["modelradius"];this.XNt_?this.ZNt_=this.jNt_+t["startangle"]:this.ZNt_=this.jNt_;this.ZNt_%=360;t["gridlines"]!=null&&t["gridlines"]["radius"]!=null&&t["gridlines"]["radius"]["step"]!=null&&(this.zNt_=t["gridlines"]["radius"]["step"])}this.bf_=new mA(this.qz_.x-this.wy_,this.qz_.y-this.wy_,this.qz_.x+this.wy_,this.qz_.y+this.wy_);return this}getBounds(){return this.bf_!=null?this.bf_:null}ht_(t){this.bf_=t;this.vn_();return this}render(t){if(this.ONt_==null)return;const i=this.qz_,s=this._Nt_(this.wy_,this.ZNt_).translate(i.x,i.y),e=this.gt_();if(e!=null){t.rB_(e);t.oB_(i.getX(),i.getY(),s.getX(),s.getY())}if(this.qNt_===!1)return;if(this.VNt_==null&&this.PNt_==null&&this.JNt_==null&&this.HDt_==null)return;let A,n,h=[];for(let i=this.zNt_;i<=this.WNt_;i+=this.zNt_){const s=this.$Nt_(i);let e=i.toFixed(2),r=this.HDt_,o=this.PNt_,l=this.JNt_,u={x:2,y:2};if(this.VNt_!=null){const t=this.VNt_({text:e,value:i,padding:u,textstyle:r,linestyle:o,fillstyle:l});if(t==null)continue;e=t["text"];u=t["padding"];r=t["textstyle"];o=t["linestyle"];l=t["fillstyle"]}const a=$o.measureText(e,r);let g=a.Ie_()+u["x"],c=a.Ts_()+u["y"];g=bn.$c_(g/2,0,t.Ji_());c=bn.$c_(0,c/2,t.Ji_());if(o!=null||l!=null){A=[new lA(this.qz_.getX()-g,this.qz_.getY()+s-c),new lA(this.qz_.getX()-g,this.qz_.getY()+s+c),new lA(this.qz_.getX()+g,this.qz_.getY()+s+c),new lA(this.qz_.getX()+g,this.qz_.getY()+s-c),new lA(this.qz_.getX(),this.qz_.getY()+s)];n=[A[0].getX(),A[1].getX(),A[2].getX(),A[3].getX(),A[4].getX()];h=[A[0].getY(),A[1].getY(),A[2].getY(),A[3].getY(),A[4].getY()]}else{n=[this.qz_.getX()];h=[this.qz_.getY()+s]}Gn.FI_((this.ZNt_-90)*Math.PI/180,this.qz_.getX(),this.qz_.getY()).NI_(n,h,n.length);n.length>1&&(new Yu).rB_(o).iQ_(l).moveTo(n[0],h[0]).lineTo(n[1],h[1]).lineTo(n[2],h[2]).lineTo(n[3],h[3]).lineTo(n[0],h[0]).render(t);r!=null&&(n.length===1?this.drawText(t,n[0],h[0],e,r,dA.ne_,(this.ZNt_+90)*Math.PI/180):this.drawText(t,n[4],h[4],e,r,dA.ne_,(this.ZNt_+90)*Math.PI/180))}}drawText(t,s,e,A,n,h,r){i.tSt_==null?i.tSt_=new YC(A,s,e,0,0,n,!0,h).sR_(!0).AR_(!0):i.tSt_.gR_(s,e).a_(A).g_(n).SE_(h);if(r===void 0)i.tSt_.render(t);else{i.tSt_.rotate(r,s,e);i.tSt_.render(t);i.tSt_.rotate(-r,s,e)}}_Nt_(t,i){const s=i*Math.PI/180;return new lA(t*Math.cos(s),t*Math.sin(s))}$Nt_(t){return Math.min(t/this.WNt_,1)*this.wy_}};s.tSt_=null;s=i=t([_s("geotoolkit.controls.shapes.PolarAxis")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwic2V0Qm91bmRzIjoiaHRfIn19fSAg");var $N=Ci(function(){let i=class t extends su{constructor(t){const i={name:"Polar Chart",data:null,polargrid:null,center:new lA(0,0),startangle:0,modelradius:90,outerradius:50};super(t);this.iSt_=null;this.E6_=null;this.sSt_=null;this.eSt_=null;this.center=null;this.options=qi(t,i);this.setData(this.options)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setData(t);return this}N_(){const t=super.N_();t["polargrid"]=this.iSt_;t["outerradius"]=this.E6_;t["modelradius"]=this.sSt_;t["startangle"]=this.eSt_;t["center"]=this.center;return t}ASt_(t){this.sSt_=t;this.td_();return this}nSt_(){return this.sSt_}setData(t){this.options=qi(t,this.options);t["name"]!=null&&this.HC_(t["name"]);this.data=t["data"]!=null?t["data"]:this.data;this.iSt_=t["polargrid"]!=null?t["polargrid"]:this.iSt_;this.E6_=t["outerradius"]!=null?t["outerradius"]:this.E6_;this.sSt_=t["modelradius"]!=null?t["modelradius"]:this.sSt_;this.eSt_=t["startangle"]!=null?t["startangle"]:this.eSt_;this.center=lA.Wi_(t["center"]||this.center);if(this.iSt_!=null){const t=this.iSt_.JV_();this.options=qi(t,this.options);this.center=t["center"];this.E6_=t["outerradius"];this.eSt_=t["startangle"];this.sSt_=t["modelradius"]}this.bounds=new mA(this.center.x-this.E6_,this.center.y-this.E6_,this.center.x+this.E6_,this.center.y+this.E6_);this.td_();return this}getBounds(){return this.bounds!=null?this.bounds:null}JV_(){ki("PolarChart.getOptions is deprecated since 4.0. Use PolarChart.getProperties instead");return this.options}ht_(t){this.bounds=t;this.vn_();return this}hSt_(t,i,s){const e=i["data"],A=Math.min(e["radius"].length,e["angle"].length);if(A===0)return;const n=(new Yu).iQ_(il.BD_(i["fillstyle"])).rB_(hl.Wi_(i["linestyle"]));let h=null,r,o=0,l=0,u=null;for(r=0;r<A;r++){o=this.$Nt_(e["radius"][r]);l=e["angle"][r]+this.eSt_;u=this._Nt_(o,l).translate(this.center.x,this.center.y);if(r===0){h=u;n.moveTo(u.x,u.y)}n.lineTo(u.x,u.y)}n.lineTo(h.x,h.y);n.render(t);const a=[];if(i["symbol"]!=null||i["hightlightedsymbol"]!=null){const s=i["symbol"]?i["symbol"]:t.tk_()?i["hightlightedsymbol"]:null,n=i["hightlightedsymbol"]?i["hightlightedsymbol"]:s;let h;const g=function(){a.push({index:h,angle:e["angle"][h],value:e["radius"][h]})};for(r=0;r<A;r++){const i=e["selected"]&&e["selected"][r]===!0?n:s;if(i){o=this.$Nt_(e["radius"][r]);l=e["angle"][r]+this.eSt_;u=this._Nt_(o,l).translate(this.center.x,this.center.y);i.gR_(u);if(t.tk_()){h=r;t.pO_(i,g.bind(this))}else i.render(t)}}}if(t.tk_()&&a.length>0){t.mO_({visual:this,series:s,indices:a.map((function(t){return t["index"]})),points:a});t.mO_(new jf(this,{visual:this,series:s,indices:a.map((function(t){return t["index"]})),points:a}))}}rSt_(){if(this.data.length>0){for(let t=0;t<this.data.length;++t){const i=this.data[t]["data"];if(i["selected"]){const t=Math.min(i["radius"].length,i["angle"].length);for(let s=0;s<t;++s)i["selected"][s]=!1}}this.td_()}}vEt_(t,i,s){if(this.data.length>i){const e=this.data[i]["data"];e["selected"]||(e["selected"]=[]);const A=Math.min(e["radius"].length,e["angle"].length);for(let i=0;i<A;++i)this.bEt_(t,i)?s===!0&&(e["selected"][i]=!1):e["selected"][i]=!0;this.td_()}return this}bEt_(t,i){return t.every((function(t){return t!==i}))}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}else e=bC.select(this.getRoot(),t.x,t.y,i||0).filter(s);return e.length>0?e[0].getData():null}render(t){if(this.data!=null)for(let i=0;i<this.data.length;i++)this.hSt_(t,this.data[i],i)}oSt_(){return this.iSt_}_Nt_(t,i){const s=i*Math.PI/180;return new lA(t*Math.cos(s),t*Math.sin(s))}lSt_(t,i){const s=Math.sqrt(t*t+i*i),e=Math.atan2(i,t)*180/Math.PI;return new lA(s,e)}$Nt_(t){return Math.min(t/this.sSt_,1)*this.E6_}};i=t([_s("geotoolkit.scene.shapes.PolarChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0TW9kZWxSYWRpdXMiOiJBU3RfIiwiZ2V0TW9kZWxSYWRpdXMiOiJuU3RfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsInNldEJvdW5kcyI6Imh0XyIsInJlc2V0SGlnaGxpZ2h0aW5nIjoiclN0XyIsImhpZ2hsaWdodEluZGljZXMiOiJ2RXRfIiwiaGl0VGVzdCI6IiRYXyIsImdldFBvbGFyR3JpZCI6Im9TdF8iLCJwb2xhclRvQ2FydGVzaWFuIjoiX050XyIsImNhcnRlc2lhblRvUG9sYXIiOiJsU3RfIiwibW9kZWxUb091dGVyUmFkaXVzIjoiJE50XyJ9fX0g");const tS=function(t,i,s,e,A,n){const h={};if(t!=null&&i!=null&&s!=null){if(t["radius"]!=null&&t["angle"]){h["datax"]=[];h["datay"]=[];let r,o;for(let l=0;l<t["radius"].length;++l)if(t["radius"][l]==null||t["angle"][l]==null||isNaN(t["radius"][l])||isNaN(t["angle"][l])||t["radius"][l]>n||t["radius"][l]<0){h["datax"][l]=Number.NaN;h["datay"][l]=Number.NaN}else{r=(e+t["angle"][l])*Math.PI/180;o=t["radius"][l]/n*A;h["datax"][l]=o*Math.cos(r)+i;h["datay"][l]=o*Math.sin(r)+s}}t["variable"]!=null&&(h["dataz"]=t["variable"])}return h},iS=function(t,i){qi(t,i);i["polargrid"]!=null&&(i=qi(i["polargrid"].JV_(),i));const s=i["center"],e=tS(i["data"],s!=null?s["x"]:null,s!=null?s["y"]:null,i["startangle"],i["outerradius"],i["modelradius"]);e["minx"]=NaN;e["maxx"]=NaN;e["miny"]=NaN;e["maxy"]=NaN;e["colorprovider"]=i["colorprovider"];e["painter"]=i["painter"];e["defaultcolor"]=i["defaultcolor"];e["symbolsize"]=i["symbolsize"];e["highlightcolor"]=i["highlightcolor"];return qi(e,i)};var sS=Ci(function(){let i=class t extends Qv{constructor(t){t=qi(t,{center:null,outerradius:50,modelradius:90,startangle:0,data:null,polargrid:null,painter:null},!0);super(iS({},t));this.uSt_=t}setData(t){this.uSt_=this.uSt_||{};super.setData(iS(t,this.uSt_));return this}oSt_(){return this.uSt_["polargrid"]}_Nt_(t,i){const s=i*Math.PI/180;return new lA(t*Math.cos(s),t*Math.sin(s))}lSt_(t,i){const s=Math.sqrt(t*t+i*i),e=Math.atan2(i,t)*180/Math.PI;return new lA(s,e)}N_(){const t=undefined,i=su.prototype.N_.call(this);i["options"]={};for(const t in this.uSt_)if(this.uSt_.hasOwnProperty(t)&&t!=="data"){i["options"][t]=this.uSt_[t];i[t]=this.uSt_[t]}return i}dt_(t){const i=undefined;su.prototype.dt_.call(this,t);t["options"]!==void 0?this.setData(t["options"]):this.setData(t);return this}};i=t([_s("geotoolkit.controls.shapes.PolarCrossPlot")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQb2xhckdyaWQiOiJvU3RfIiwicG9sYXJUb0NhcnRlc2lhbiI6Il9OdF8iLCJjYXJ0ZXNpYW5Ub1BvbGFyIjoibFN0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");var eS=Ci(function(){let i=class t extends eE{constructor(t){const i=(t=qi(t,{center:{x:0,y:0},outerradius:50,modelradius:90,angle:45,startangle:0}))["outerradius"],s=t["center"],e=undefined;super(new mA(s.x-i,s.y-i,s.x+i,s.y+i));this.aSt_=[];this.setOptions(t,!1)}gSt_(t){this.aSt_=t;this.td_();return this}cSt_(){return this.aSt_}setOptions(t,i){this.options=qi(t,this.options);this.options["linestyle"]==null||this.options["linestyle"]instanceof hl||(this.options["linestyle"]=new hl(this.options["linestyle"]));this.options["center"]==null||this.options["center"]instanceof lA||(this.options["center"]=new lA(this.options["center"]["x"],this.options["center"]["y"]));this.options["center"]==null&&(this.options["center"]=new lA);this.options["gridlines"]==null&&(this.options["gridlines"]={});this.options["gridlines"]==null&&(this.options["gridlines"]={});const s=this.options["gridlines"];s["radius"]==null&&(s["radius"]={});s["angles"]==null&&(s["angles"]={});const e=s["radius"],A=s["angles"];e["linestyle"]==null?e["linestyle"]=this.options["linestyle"]:e["linestyle"]instanceof hl||(e["linestyle"]=hl.Wi_(e["linestyle"]));A["linestyle"]==null?A["linestyle"]=this.options["linestyle"]:A["linestyle"]instanceof hl||(A["linestyle"]=hl.Wi_(A["linestyle"]));A["textstyle"]==null?A["textstyle"]=new qa({color:"black"}):A["textstyle"]instanceof qa||(A["textstyle"]=qa.Wi_(A["textstyle"]));e["step"]==null&&(e["step"]=10);Array.isArray(e["values"])||(e["values"]=null);e["visible"]==null&&(e["visible"]=!0);e["highlighted"]==null&&(e["highlighted"]=null);A["visible"]==null&&(A["visible"]=!0);A["visiblelabels"]==null&&(A["visiblelabels"]=!0);if(A["labels"]==null){const t={values:[],text:[]};for(let i=0;i<359;i+=this.options["angle"]){t["values"].push(i);t["text"].push(i)}A["labels"]=t}A["labeloffset"]==null&&(A["labeloffset"]=0);A["labelsalongcircumference"]==null&&(A["labelsalongcircumference"]=!1);this.center=this.options["center"];this.radius=this.options["outerradius"];this.ISt_=this.options["modelradius"];this.eSt_=this.options["startangle"];this.angle=this.options["angle"];this.fSt_=A["linestyle"];this.CSt_=e["linestyle"];this.dSt_=e["step"];e["values"]==null?this.BSt_=this.wSt_(this.ISt_,this.dSt_):this.BSt_=this.QSt_(e["values"]);this.ESt_=e["highlighted"];this.pSt_=e["visible"];this.mSt_=A["visible"];this.ySt_=A["textstyle"];this.labels=A["labels"];this.cZ_=A["labeloffset"];this.DSt_=A["labelsalongcircumference"];this.MSt_=A["visiblelabels"];t["linestyle"]!==void 0&&this.rB_(t["linestyle"]);i!=null&&i!==!0||this.td_();return this}JV_(){return this.options}$Nt_(t){return t/this.ISt_*this.radius}render(t){this.vSt_(t);this.bSt_(t);this.NSt_(t);const i=this.center.x-this.radius,s=this.center.y-this.radius,e=2*this.radius,A=2*this.radius;t.rB_(this.gt_());t.yR_(i,s,e,A);this.SSt_(t)}vSt_(t){if(!this.aSt_)return;const i=new wr("white");for(let s=0;s<this.aSt_.length;s++){const e=this.aSt_[s],A=(this.eSt_+e["start"])*Math.PI/180,n=(this.eSt_+e["end"])*Math.PI/180,h=e["color"];i.setColor(h);const r=e["length"],o=r!=null?r/this.ISt_*this.radius:this.radius,l=this.center.x-o,u=this.center.y-o,a=o*2,g=o*2;t.iQ_(i);t.DR_(l,u,a,g,A,n)}t.iQ_(null)}NSt_(t){if(this.mSt_){t.rB_(this.fSt_);for(let i=this.eSt_;i<=359+this.eSt_;i+=this.angle){const s=i*Math.PI/180;t.oB_(this.center.getX(),this.center.getY(),this.center.getX()+this.radius*Math.cos(s),this.center.getY()+this.radius*Math.sin(s))}}}lR_(t){(t%=2*Math.PI)<0&&(t+=2*Math.PI);return t===0?dA.he_:t<Math.PI/2?dA.ie_:t===Math.PI/2?dA.le_:t<Math.PI?dA.ee_:t===Math.PI?dA.oe_:t<Math.PI*3/2?dA.Ae_:t===Math.PI*3/2?dA.re_:dA.se_}SSt_(t){this.DSt_===!0?this.GSt_(t):this.RSt_(t)}RSt_(t){if(!this.MSt_)return;const i=this.ySt_.clone(),s=new YC;s.g_(i);s.tR_(!0);const e=this.radius+2/Math.max(Math.abs(t.Ji_().BI_()),Math.abs(t.Ji_().sI_()));let A;for(let i=0;i<this.labels["values"].length;i++){A=this.labels["values"][i]+this.eSt_;const n=A*Math.PI/180,h=this.center.getX()+(e+this.cZ_)*Math.cos(n),r=this.center.getY()+(e+this.cZ_)*Math.sin(n);s.a_(this.labels["text"][i]+"");s.SE_(this.lR_(n));s.gR_(h,r);s.render(t)}}GSt_(t){if(!this.MSt_)return;const i=this.ySt_.clone(),s=new YC;s.g_(i);const e=this.radius+7/Math.max(Math.abs(t.Ji_().BI_()),Math.abs(t.Ji_().sI_()));let A;for(let i=0;i<this.labels["values"].length;i++){A=this.labels["values"][i]+this.eSt_;const n=A*Math.PI/180,h=this.center.getX()+(e+this.cZ_)*Math.cos(n),r=this.center.getY()+(e+this.cZ_)*Math.sin(n);s.a_(this.labels["text"][i]+"");s.SE_(dA.ne_);s.rotate(n+Math.PI/2,h,r);s.gR_(h,r);s.render(t);s.rotate(-(n+Math.PI/2),h,r)}}wSt_(t,i){const s=this.$Nt_(t),e=this.$Nt_(i),A=[];let n=e;while(n<s){A.push(n);n+=e}return A}QSt_(t){const i=[];if(Array.isArray(t))for(let s=0;s<t.length;++s)i.push(this.$Nt_(t[s]));return i}bSt_(t){if(!this.pSt_||!this.BSt_)return;t.rB_(this.CSt_);let i,s,e,A,n,h;if(this.ESt_!=null){const i=this.$Nt_(this.ISt_),A=new wr(this.ESt_);let n=0,r=0;h=0;while(1){n=r;r=h<this.BSt_.length?this.BSt_[h]:i;r>i&&(r=i);if(h%2==0){s=this.center.x;e=this.center.y;t.iQ_(A);t.MR_(s,e,n,r,0,Math.PI*2);t.iQ_(null)}h++;if(r>=i)break}}for(h=0;h<this.BSt_.length;++h){i=this.BSt_[h];s=this.center.x-i;e=this.center.y-i;A=2*i;n=2*i;t.yR_(s,e,A,n)}}_Nt_(t,i){const s=i*Math.PI/180;return new lA(t*Math.cos(s),t*Math.sin(s))}lSt_(t,i){const s=Math.sqrt(t*t+i*i),e=Math.atan2(i,t)*180/Math.PI;return new lA(s,e)}N_(){let t=super.N_();t=Pi(this.options,t);t["options"]=this.options;return t}dt_(t){super.dt_(t);t["options"]!==void 0?this.setOptions(t["options"]):this.setOptions(t);return this}};i=t([_s("geotoolkit.controls.shapes.PolarGrid")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTZWN0b3JzIjoiZ1N0XyIsImdldFNlY3RvcnMiOiJjU3RfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsIm1vZGVsVG9PdXRlclJhZGl1cyI6IiROdF8iLCJwb2xhclRvQ2FydGVzaWFuIjoiX050XyIsImNhcnRlc2lhblRvUG9sYXIiOiJsU3RfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");var AS=Ci(function(){let i=class t extends Ic{constructor(t){super(t);const i={names:[],value:[],fillstyle:["cyan","pink","green","red","orange","brown","yellow","magenta"],invert:!1,align:"right",linestyle:[new hl("black")],border:[new hl("white",3)],linelength:20,highlight:!0,highlightstyle:new nA(255,255,255)};this.ov_=i["names"];this.kSt_=i["value"];this.FSt_=i["fillstyle"];this.xSt_=i["invert"];this.LSt_=i["align"];this.Z6_=i["linestyle"];this.USt_=i["border"];this.YSt_=i["linelength"];this.TSt_=i["highlight"];this.KSt_=i["highlightstyle"];this.HSt_=[];this.qSt_=[];this.JSt_=[];this.PSt_=[];this.VSt_=[];this.WH_=new mA(50,50,750,350);this.OSt_=new bC;this.WSt_=new oE;this.zSt_=[];this.XSt_={x:[],y:[],id:null};this.jSt_=null;this.setData(t)}setData(t){t||(t={});if(t&&Array.isArray(t["name"])){ki("Parameter name as string array in PyramidChart is deprecated since 4.0. Use names instead.");t["names"]=t["name"]}for(const i in t)if(i!==i.toLowerCase()){const s=undefined;t[i.toLowerCase()]=t[i]}this.ov_=t["names"]&&Array.isArray(t["names"])?t["names"]:this.ov_;this.kSt_=t["value"]&&Array.isArray(t["value"])?t["value"]:this.kSt_;this.FSt_=t["fillstyle"]&&Array.isArray(t["fillstyle"])?t["fillstyle"]:this.FSt_;this.xSt_=typeof t["invert"]=="boolean"?t["invert"]:this.xSt_;this.LSt_=typeof t["align"]=="string"?t["align"]:this.LSt_;this.Z6_=t["linestyle"]&&Array.isArray(t["linestyle"])?t["linestyle"]:[new hl("black")];this.USt_=t["border"]&&Array.isArray(t["border"])?t["border"]:[new hl("white",3)];this.YSt_=typeof t["linelength"]=="number"?t["linelength"]:this.YSt_;this.TSt_=typeof t["highlight"]=="boolean"?t["highlight"]:this.TSt_;this.KSt_=t["highlightstyle"]instanceof nA?t["highlightstyle"]:this.KSt_;this.ZSt_=this.ov_.length<=this.kSt_.length?this.ov_.length:this.kSt_.length;this._St_();this.td_();return this}dt_(t){if((t=Es(t))==null)return this;this.setData(t);this._St_();this.td_();return this}N_(){const t=super.N_();t["names"]=this.ov_;t["value"]=this.kSt_;t["fillstyle"]=this.FSt_;t["linestyle"]=this.Z6_;t["border"]=this.USt_;t["invert"]=this.xSt_;t["align"]=this.LSt_;t["linelength"]=this.YSt_;t["highlight"]=this.TSt_;t["highlightstyle"]=this.KSt_;Gs(t,"name","names","PyramidChart.getProperties");return t}getData(){const t={names:this.ov_,value:this.kSt_,fillstyle:this.FSt_,invert:this.xSt_,align:this.LSt_,linestyle:this.Z6_,border:this.USt_,linelength:this.YSt_,highlight:this.TSt_,highlightstyle:this.KSt_};Gs(t,"name","names","PyramidChart.getData");return t}rt_(){return this.WH_}Lq_(t){if(this.WH_!=null&&this.WH_.Ce_(t))return this;this.WH_!==t&&(this.WH_=t?new mA(t):null);this._St_();this.vn_();this.notify(rh.nC_,this);this.td_();return this}$St_(){const t=.01,i=this.YSt_,s=this.rt_(),e=s.Ie_(),A=s.Ts_(),n=s.getX(),h=s.getY();let r=0,o=0,l=0,u=0,a=0,g;const c=this.kSt_,I=this.HSt_,f=this.qSt_,C=this.JSt_,d=this.PSt_,B=this.tGt_(c);this.iGt_={sGt_:{X:[],Y:[]},eGt_:{X:[],Y:[]},AGt_:{X:[],Y:[]},nGt_:{X:[],Y:[]}};this.xSt_===!0&&(l=100);for(g=0;g<this.ZSt_;g++){o=a;o+=B[g];a=o;u=o;if(this.xSt_===!0){o=100-o;u=o;o=100-o>0?100-o:100}this.iGt_.sGt_.X[g]=n+e/2-e/2*(r*t);this.iGt_.sGt_.Y[g]=h+A*l*t;this.iGt_.eGt_.X[g]=n+e/2+e/2*(r*t);this.iGt_.eGt_.Y[g]=h+A*l*t;this.iGt_.AGt_.X[g]=n+(e/2+e/2*(o*t));this.iGt_.AGt_.Y[g]=h+A*u*t;this.iGt_.nGt_.X[g]=n+(e/2-e/2*(o*t));this.iGt_.nGt_.Y[g]=h+A*u*t;if(this.LSt_==="right"){this.xSt_===!0&&(l=u);I[g]=n+(e/2+e/2*(B[g]/2+r)*t);f[g]=h+A*(B[g]/2+l)*t;C[g]=I[g]+i;d[g]=f[g]}else{this.xSt_===!0&&(l=u);I[g]=n+e/2-e/2*((B[g]/2+r)*t);f[g]=h+A*((B[g]/2+l)*t);C[g]=I[g]-i;d[g]=f[g]}r=o;l=u}}_St_(){let t,i=this.ZSt_-1;this.zSt_=[];const s=[],e=[];this.$St_();this.removeChild(this.WSt_);this.KY_(!0);this.td_();for(t=0;t<this.ZSt_;t++){const A={x:[this.iGt_.sGt_.X[t],this.iGt_.eGt_.X[t],this.iGt_.AGt_.X[t],this.iGt_.nGt_.X[t]],y:[this.iGt_.sGt_.Y[t],this.iGt_.eGt_.Y[t],this.iGt_.AGt_.Y[t],this.iGt_.nGt_.Y[t]]};this.zSt_[t]=new oE(A);this.zSt_[t].iQ_(this.FSt_[i]);this.USt_.length===1?this.zSt_[t].rB_(this.USt_[0]):this.zSt_[t].rB_(this.USt_[i]);const n=new lA(this.HSt_[t],this.qSt_[t]),h=new lA(this.JSt_[t],this.PSt_[t]);s[t]=new Rd(n,h);this.Z6_.length===1?s[t].rB_(this.Z6_[0]):s[t].rB_(this.Z6_[i]);e[t]=(new YC).SE_(dA.oe_);this.VSt_[t]=this.ov_[i]+"<br>"+"("+this.kSt_[i]+")";i--;this.LSt_==="right"&&e[t].SE_(dA.he_);e[t].gR_(this.JSt_[t],this.PSt_[t]).a_(this.VSt_[t]);this.GY_(this.zSt_[t]);this.zSt_[t].JC_(t);this.GY_(s[t]);this.GY_(e[t]);this.td_()}this.ZSt_!==0&&this.GY_(this.WSt_)}hGt_(t){if(t==null)return null;for(let i=0;i<this.zSt_.length;i++)if(this.zSt_[i].XC_()===t){const i=this.ZSt_-t-1;return{name:this.ov_[i],value:this.kSt_[i]}}return null}h3_(t){if(this.zSt_[t]==null||this.TSt_===!1)return this;this.WSt_.nf_(!1);this.jSt_=null;const i=this.zSt_[t],s=this.rGt_(t);if(i.XC_()!==this.jSt_){this.WSt_=this.oGt_(s);const t=RA.cs_(this.KSt_);t.setAlpha(.5);this.WSt_.iQ_(t);this.jSt_=s.id;this.WSt_.nf_(!0)}return this}rGt_(t){const i=this.zSt_[t];this.XSt_.x=i.Bt_();this.XSt_.y=i.wt_();this.XSt_.id=i.XC_();return this.XSt_}oGt_(t){this.WSt_.Qt_(t.x,t.y);return this.WSt_}$X_(t,i){const s=this.OSt_.select(this.getRoot(),t.x,t.y,i);if(s==null)return-1;for(let t=0;t<s.length;t++){const i=s[t];if(i instanceof oE)return i.XC_()}return-1}tGt_(t){const i=[];let s,e=this.ZSt_-1,A=0,n=0;for(s=0;s<this.ZSt_;s++)A+=t[s];for(s=0;s<this.ZSt_;s++){const h=undefined;n=t[s]/A*100;i[e]=n;e--}return i}};i=t([_s("geotoolkit.controls.shapes.PyramidChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0TW9kZWxMaW1pdHMiOiJydF8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldFNlY3Rpb25JbmZvIjoiaEd0XyIsImhpZ2hsaWdodCI6ImgzXyIsImhpdFRlc3QiOiIkWF8ifX19");const nS=2,hS=10,rS=2,oS=new Rd,lS=new YC;var uS={lGt_:"axes",uGt_:"series"},aS={W8_:"regular",aGt_:"alongCircumference"};const gS=function(t){if(t==null)return null;t instanceof Array||(t=[t]);return t.map((t=>{const i=t["data"]instanceof Array?new zD({data:t["data"],name:t["name"]}):t["data"];let s=t["linestyle"]||new hl({color:"black"});s instanceof hl||(s=new hl(s));let e=t["fillstyle"]||new wr({color:"black"});e instanceof wr||(e=new wr(e));return{linestyle:s,fillstyle:e,name:t["name"],data:i}}))},cS=function(t){const i=t["linestyle"],s=t["fillstyle"];i!=null&&i.de_(i.Ie_()+1);if(s!=null){const t=s.hB_().setAlpha(255);s.setColor(t)}return{linestyle:i,fillstyle:s}};var IS=Ci(function(){let i=class t extends eE{constructor(t){const i=Pi(t,{center:{x:0,y:0},outerradius:50,modelradius:10,angle:45,startangle:-90,outlinevisible:!0,linestyle:new hl,gridlines:{step:rS,visible:!0},categories:{labelsalongcircumference:!1,data:[]}},!0);super(i);this.selection=null;this.ySt_={ispointingup:!0,visible:!0,padding:0,linestyle:new hl({width:0})};this.gGt_=[];this.cGt_=cS;this.IGt_(i)}IGt_(t,i=!1){const s=t["center"];s!=null&&(this.center=s instanceof lA?s:new lA(s["x"],s["y"]));t["outerradius"]!=null&&(this.radius=t["outerradius"]);t["modelradius"]!=null&&(this.ISt_=t["modelradius"]);t["startangle"]!=null&&(this.eSt_=t["startangle"]);t["outlinevisible"]!=null&&(this.fGt_=t["outlinevisible"]);const e=t["gridlines"];if(e!=null){e["visible"]!=null&&(this.CGt_=e["visible"]);this.dGt_=this.dGt_ instanceof hl?this.dGt_=hl.jD_(this,this.dGt_,e["linestyle"],!0):hl.Wi_(e["linestyle"]);e["step"]!=null&&(this.BGt_=e["step"]);if(e["count"]!=null){this.wGt_=e["count"];this.wGt_!==0&&(this.BGt_=this.ISt_/this.wGt_)}this.pSt_=this.BGt_!==0&&this.CGt_}const A=t["categories"];if(A!=null){A["linestyle"]!=null&&(this.fSt_=this.fSt_ instanceof hl?hl.jD_(this,this.fSt_,A["linestyle"],!0):hl.Wi_(A["linestyle"]));A["textstyle"]!=null&&(this.z6_=this.z6_ instanceof qa?qa.jD_(this,this.z6_,A["textstyle"],!0):qa.Wi_(A["textstyle"]));A["labelsalongcircumference"]!=null&&(this.DSt_=A["labelsalongcircumference"]);const t=A["labelstyle"];if(t!=null){t["visible"]!=null&&(this.ySt_["visible"]=t["visible"]);t["ispointingup"]!=null&&(this.ySt_["ispointingup"]=t["ispointingup"]);t["offset"]!=null&&(this.ySt_["offset"]=t["offset"]);t["padding"]!=null&&(this.ySt_["padding"]=t["padding"]);t["linestyle"]!=null&&(this.ySt_["linestyle"]=this.ySt_["linestyle"]instanceof hl?hl.jD_(this,this.ySt_["linestyle"],t["linestyle"],!0):hl.Wi_(t["linestyle"]));t["fillstyle"]!=null&&(this.ySt_["fillstyle"]=this.ySt_["fillstyle"]instanceof wr?il.wD_(this,this.ySt_["fillstyle"],t["fillstyle"],!0):il.BD_(t["fillstyle"]))}A["data"]!=null&&(this.gGt_=A["data"].map((function(t){return{label:t,highlighted:!1}})))}t["content"]!=null&&(this.Llt_=gS(t["content"]));this.dR_();i!=null&&i!==!0||this.td_()}QGt_(){return{center:{x:this.center.getX(),y:this.center.getY()},gridlines:{linestyle:this.dGt_,step:this.BGt_,count:this.wGt_,visible:this.CGt_},outerradius:this.radius,modelradius:this.ISt_,startangle:this.eSt_,outlinevisible:this.fGt_,categories:{labelsalongcircumference:this.DSt_,linestyle:this.fSt_,textstyle:this.z6_,data:this.gGt_.map((t=>t["label"])),labelstyle:this.ySt_}}}dR_(){let t=0;const i=360/this.gGt_.length;for(let s=0;s<this.gGt_.length;s++){const e=this.eSt_+i*s;lS.a_(this.gGt_[s]["label"]);const A=Math.abs(lS.Ie_()*Math.cos(e*Math.PI/180));A>t&&(t=A)}const s=new mA(this.center.x-this.radius-t,this.center.y-this.radius-t,this.center.x+this.radius+t,this.center.y+this.radius+t);this.ht_(s)}$Nt_(t){return t/this.ISt_*this.radius}EGt_(t){this.Llt_=gS(t);this.td_();return this}xlt_(){return this.Llt_}getSelection(){return this.selection}render(t){this.selection={[uS.lGt_]:[],[uS.uGt_]:[]};const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);this.zY_(i);this.ySt_["visible"]&&this.x__(i);this.iN_(i);if(t.tk_()){t.mO_(ks({[uS.lGt_]:this.selection[uS.lGt_],[uS.uGt_]:this.selection[uS.uGt_]},[uS.lGt_,uS.uGt_]));t.mO_(new jf(this,this.selection))}}pGt_(t,i){const s=this.selection[t]!=null?this.selection[t]:[];this.selection[t]=s.concat(i)}zY_(t){let i,s,e;const A=[],n=[];let h=[],r=[];const o=this.$Nt_(this.ISt_),l=[],u=360/this.gGt_.length;for(e=0;e<this.gGt_.length;e++){const t=undefined,l=(this.eSt_+u*e)*Math.PI/180;i=Math.cos(l);s=Math.sin(l);A.push(i);n.push(s);h.push(this.center.x+i*o);r.push(this.center.y+s*o)}const a=this.fGt_?this.gt_():null;t.rB_(a);t.iQ_(this.ct_());t.ER_(h,r);if(this.pSt_){t.rB_(this.dGt_);t.iQ_(null);const i=this.$Nt_(this.BGt_);let s=i;while(s<o){h=[];r=[];for(e=0;e<A.length;e++){h.push(this.center.x+A[e]*s);r.push(this.center.y+n[e]*s)}t.ER_(h,r);s+=i}}for(e=0;e<A.length;e++){i=A[e];s=n[e];oS.zA_({from:this.center,to:new lA(this.center.getX()+this.radius*i,this.center.getY()+this.radius*s)});let h=this.fSt_.clone();if(this.gGt_[e]["highlighted"]===!0&&typeof this.cGt_=="function"){const t=this.cGt_({axislinestyle:h});t["axislinestyle"]!=null&&(h=t["axislinestyle"])}oS.rB_(h);t.tk_()?t.pO_(oS,(function(){l.push(e)})):oS.render(t)}l.length!==0&&this.pGt_(uS.lGt_,l);if(this.Llt_!=null)if(this.Llt_ instanceof Array){const i=[];for(e=0;e<this.Llt_.length;e++){const s=this.mGt_(t,this.Llt_[e],A,n);t.tk_()&&s&&i.push(e)}i.length!==0&&this.pGt_(uS.uGt_,i)}else this.mGt_(t,this.Llt_,A,n)}mGt_(t,i,s,e){const A=[],n=[];let h;for(h=0;h<s.length;h++){let t=this.$Nt_(i["data"].getValue(h));isNaN(t)&&(t=0);A.push(this.center.x+s[h]*t);n.push(this.center.y+e[h]*t)}let r=i["linestyle"],o=i["fillstyle"];if(i["highlighted"]===!0&&typeof this.cGt_=="function"){const t=this.cGt_({linestyle:r.clone(),fillstyle:o.clone()});t["linestyle"]!=null&&(r=t["linestyle"]);t["fillstyle"]!=null&&(o=t["fillstyle"])}t.rB_(r);t.iQ_(o);let l=!1;if(t.tk_()){t.QO_((function(){l=!0}));t.ER_(A,n);t.EO_()}else t.ER_(A,n);return l}yGt_(t){let i,s,e=!1;if(this.Llt_!=null&&t[uS.uGt_]!=null)for(i=0;i<this.Llt_.length;i++){s=t[uS.uGt_].filter((function(t){return t===i})).length!==0;if(this.Llt_[i]["highlighted"]!==s){e=!0;this.Llt_[i]["highlighted"]=s}}if(t[uS.lGt_]!=null)for(i=0;i<this.gGt_.length;i++){s=t[uS.lGt_].filter((function(t){return t===i})).length!==0;if(this.gGt_[i]["highlighted"]!==s){e=!0;this.gGt_[i]["highlighted"]=s}}e&&this.td_();return this}rSt_(){let t,i=!1;for(t=0;t<this.Llt_.length;t++)if(this.Llt_[t]["highlighted"]!==!1){i=!0;this.Llt_[t]["highlighted"]=!1}for(t=0;t<this.gGt_.length;t++)if(this.gGt_[t]["highlighted"]!==!1){i=!0;this.gGt_[t]["highlighted"]=!1}i&&this.td_();return this}DGt_(t){if(this.cGt_===t)return this;this.cGt_=t;return this}MGt_(){return this.cGt_}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;e=t instanceof mA?bC.select(this.getRoot(),t,!0).filter(s):bC.select(this.getRoot(),t.x,t.y,i||hS).filter(s);const A={[uS.uGt_]:[],[uS.lGt_]:[]},n=undefined;return e.reduce((function(t,i){const s=i.getData();t[uS.uGt_]=t[uS.uGt_].concat(s[uS.uGt_]);t[uS.lGt_]=t[uS.lGt_].concat(s[uS.lGt_]);return t}),A)}lR_(t){(t%=2*Math.PI)<0&&(t+=2*Math.PI);return t===0?dA.he_:t<Math.PI/2?dA.ie_:t===Math.PI/2?dA.le_:t<Math.PI?dA.ee_:t===Math.PI?dA.oe_:t<Math.PI*3/2?dA.Ae_:t===Math.PI*3/2?dA.re_:dA.se_}vGt_(t,i){const s=i.vF_();return s==="center"?dA.re_:s==="left"?dA.se_:dA.Ae_}x__(t){const i=this.DSt_?aS.aGt_:aS.W8_;this.SSt_(t,i)}SSt_(t,i){let s=nS,e=i===aS.W8_;if(this.ySt_!=null){this.ySt_["offset"]!=null&&(s=this.ySt_["offset"]);this.ySt_["ispointingup"]!=null&&(e=this.ySt_["ispointingup"]);lS.tR_(e).zX_(this.ySt_["padding"]||0).OX_(this.ySt_["radius"]||0).rB_(this.ySt_["linestyle"],!1).iQ_(this.ySt_["fillstyle"],!1)}else lS.tR_(e).zX_(0).OX_(0).rB_(null).iQ_(null);const A=Math.max(Math.abs(t.Ji_().BI_()),Math.abs(t.Ji_().sI_())),n=360/this.gGt_.length;let h,r,o;const l=[];for(let u=0;u<this.gGt_.length;u++){let a=this.z6_;o=s;if(typeof this.cGt_=="function"){this.ySt_!=null?lS.tR_(e).zX_(this.ySt_["padding"]||0).OX_(this.ySt_["radius"]||0).rB_(this.ySt_["linestyle"],!1).iQ_(this.ySt_["fillstyle"],!1):lS.tR_(e).zX_(0).OX_(0).rB_(null).iQ_(null);if(this.gGt_[u]["highlighted"]===!0){a=a.clone();let t=this.ySt_!=null?Pi(this.ySt_,{}):null;const i=this.cGt_({textstyle:a,labelstyle:t});if(i!=null){i["textstyle"]!=null&&(a=i["textstyle"]);i["labelstyle"]!=null&&(t=i["labelstyle"])}if(t!=null){t["offset"]!==void 0&&(s=t["offset"]);t["ispointingup"]!==void 0&&lS.tR_(t["ispointingup"]);t["padding"]!==void 0&&lS.zX_(t["padding"]);t["radius"]!==void 0&&lS.OX_(t["radius"]);t["linestyle"]!==void 0&&lS.rB_(t["linestyle"],!1);t["fillstyle"]!==void 0&&lS.iQ_(t["fillstyle"],!1)}}}o=s+lS.XX_();r=this.radius+o/A;h=n*u+this.eSt_;const g=h*Math.PI/180,c=this.center.getX()+r*Math.cos(g),I=this.center.getY()+r*Math.sin(g);lS.a_(this.gGt_[u]["label"]).g_(a).gR_(c,I);if(i===aS.aGt_){lS.SE_(this.vGt_(g,a));lS.rotate(g+Math.PI/2,c,I)}else lS.SE_(this.lR_(g));t.tk_()?t.pO_(lS,(function(){l.push(u)})):lS.render(t);i===aS.aGt_&&lS.rotate(-(g+Math.PI/2),c,I)}l.length!==0&&this.pGt_(uS.lGt_,l)}_Nt_(t,i){const s=i*Math.PI/180;return new lA(t*Math.cos(s),t*Math.sin(s))}N_(){let t=super.N_();const i=this.QGt_();t=qi(t,i);return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.IGt_(t);return this}};i=t([_s("geotoolkit.controls.shapes.RadarChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJtb2RlbFRvT3V0ZXJSYWRpdXMiOiIkTnRfIiwic2V0Q29udGVudCI6IkVHdF8iLCJnZXRDb250ZW50IjoieGx0XyIsInJlbmRlckNvbnRlbnQiOiJ6WV8iLCJoaWdobGlnaHRTZWxlY3RlZCI6InlHdF8iLCJyZXNldEhpZ2hsaWdodGluZyI6InJTdF8iLCJzZXRIaWdobGlnaHRTdHlsZXNIYW5kbGVyIjoiREd0XyIsImdldEhpZ2hsaWdodFN0eWxlc0hhbmRsZXIiOiJNR3RfIiwiaGl0VGVzdCI6IiRYXyIsInBvbGFyVG9DYXJ0ZXNpYW4iOiJfTnRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");var fS=Ci({bGt_:"updatedmodel"},2,"eyJVcGRhdGVkTW9kZWwiOiJiR3RfIn0g"),CS={P80:"P80",P90:"P90",P95:"P95",P99:"P99"};const dS=[CS.P80,CS.P90,CS.P95,CS.P99],BS={[CS.P80]:[3.077,1.885,1.637,1.533,1.475,1.439,1.414,1.396,1.383,1.372,1.363,1.356,1.35,1.345,1.34,1.336,1.333,1.33,1.327,1.325,1.323,1.321,1.319,1.317,1.316,1.314,1.313,1.312,1.311,1.3,1.28],[CS.P90]:[6.314,2.92,2.353,2.131,2.015,1.943,1.895,1.86,1.833,1.812,1.796,1.782,1.771,1.761,1.753,1.746,1.74,1.734,1.729,1.725,1.717,1.714,1.711,1.708,1.706,1.703,1.701,1.699,1.697,1.645],[CS.P95]:[12.706,4.302,3.182,2.776,2.57,2.446,2.364,2.306,2.262,2.228,2.2,2.178,2.16,2.144,2.131,2.119,2.109,2.1,2.093,2.085,2.079,2.073,2.068,2.063,2.059,2.055,2.051,2.048,2.045,2.042,1.959],[CS.P99]:[63.656,9.924,5.84,4.604,4.032,3.707,3.499,3.355,3.249,3.169,3.105,3.054,3.012,2.976,2.946,2.92,2.898,2.878,2.86,2.845,2.831,2.818,2.807,2.796,2.787,2.778,2.77,2.763,2.756,2.75,2.575]};var wS=Ci(function(){let i=class t extends $n{constructor(t,i){super();t=qi(t,{customfunc:i},!0);this.NGt_=null;this.SGt_=1;this.GGt_=[];this.RGt_=!1;this.Us_={x:null,y:null};this.kGt_={x:null,y:null};this.FGt_={x:null,y:null};this.xGt_=null;this.LGt_=!0;this.UGt_=CS.P95;this.YGt_=CS.P95;this.TGt_=BS[this.UGt_];this.KGt_=BS[this.YGt_];this.HGt_=[];this.qGt_=0;this.JGt_=null;this.setOptions(t)}fit(t,i,s){this.Us_["x"]=Array.isArray(t)?t.concat(this.Us_["x"]?this.Us_["x"]:[]):this.Us_["x"];this.Us_["y"]=Array.isArray(i)?i.concat(this.Us_["y"]?this.Us_["y"]:[]):this.Us_["y"];this.HGt_=Array.isArray(s)?s.concat(this.HGt_?this.HGt_:[]):this.HGt_;this.qGt_=Math.min(this.Us_["x"].length,this.Us_["y"].length)}getData(){return{datax:this.Us_["x"],datay:this.Us_["y"],weights:this.HGt_}}PGt_(t){if(typeof t=="number")return this.NGt_(t);const i=[];if(Array.isArray(t))for(let s=0;s<t.length;s++)i.push(this.NGt_(t[s]));return i}setOptions(t){if((t=Es(t))==null)return this;if(Array.isArray(t["coefficients"])){this.GGt_=t["coefficients"];this.RGt_=!0}t["customfunc"]&&(this.NGt_=t["customfunc"]);return this}VGt_(){this.GGt_=[];this.RGt_=!1;this.JGt_=null;this.qGt_=0;["x","y"].forEach((t=>{this.Us_[t]=null;this.kGt_[t]=null;this.FGt_[t]=null}));this.xGt_=null;this.HGt_=[]}OGt_(){return this.RGt_}JV_(){return{coefficients:this.GGt_,customfunc:this.NGt_}}dt_(t){return this.setOptions(t)}N_(){return this.JV_()}WGt_(t){if(typeof t=="number"){ki("setPredictionProbability(prob) with prob as number is deprecated since 4.0, use Probability type instead");t=dS[t]}if(BS[t]){this.UGt_=t;this.TGt_=BS[t]}return this}zGt_(){return this.UGt_}XGt_(t){if(typeof t=="number"){ki("setPredictionProbability(prob) with prob as number is deprecated since 4.0, use Probability type instead");t=dS[t]}if(BS[t]){this.YGt_=t;this.KGt_=BS[t]}return this}jGt_(){return this.YGt_}ZGt_(t){if(!this.Us_[t])return null;if(this.kGt_[t]==null){const i=this.Us_[t],s=i.length;let e=0;for(let t=0;t<s;t++)e+=i[t];this.kGt_[t]=e/s}return this.kGt_[t]}_Gt_(t){if(!this.Us_[t])return null;if(this.FGt_[t]==null){const i=this.ZGt_(t),s=this.Us_[t],e=s.length;let A=0;for(let t=0;t<e;t++)A+=Math.pow(s[t]-i,2);this.FGt_[t]=A}return this.FGt_[t]}$Gt_(){if(!this.Us_["x"]||!this.Us_["y"])return null;if(this.xGt_==null){let t=0;const i=this.Us_["x"],s=this.Us_["y"],e=i.length;for(let A=0;A<e;A++){const e=this.PGt_(i[A]);t+=Math.pow(s[A]-e,2)}this.xGt_=t}return this.xGt_}tRt_(){return this.qGt_-this.SGt_}iRt_(){const t=this.$Gt_(),i=this._Gt_("y");return typeof t=="number"&&typeof i=="number"?1-t/i:null}sRt_(){const t=[];if(this.Us_["x"]&&this.Us_["y"]){const i=this.Us_["x"],s=this.Us_["y"];for(let e=0;e<s.length;e++)t.push(s[e]-this.PGt_(i[e]));return t}return null}eRt_(t){if(this.Us_["x"]&&this.Us_["y"]){const i=Math.pow(t-this.ZGt_("x"),2);let s=30;this.qGt_<=30&&(s=this.qGt_-1);return this.TGt_[s]*Math.sqrt(this.$Gt_()/this.tRt_())*Math.sqrt(1/this.qGt_+i/this._Gt_("x"))}return null}ARt_(t){if(this.Us_["x"]&&this.Us_["y"]){const i=Math.pow(t-this.ZGt_("x"),2);let s=30;this.qGt_<=30&&(s=this.qGt_-1);return this.KGt_[s]*Math.sqrt(this.$Gt_()/this.tRt_())*Math.sqrt(1+1/this.qGt_+i/this._Gt_("x"))}return null}pvt_(){return{rsquared:this.iRt_(),meanx:this.ZGt_("x"),meany:this.ZGt_("y"),df:this.tRt_(),sumsquaredx:this._Gt_("x"),sumsquaredy:this._Gt_("y"),sumsquaredres:this.$Gt_()}}nRt_(){return this.GGt_}};i=t([_s("geotoolkit.controls.util.regression.RegressionBase")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJwcmVkaWN0IjoiUEd0XyIsInJlc2V0TW9kZWwiOiJWR3RfIiwiaXNDdXN0b21pemVkQ29lZiI6Ik9HdF8iLCJnZXRPcHRpb25zIjoiSlZfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldENvbmZpZGVuY2VQcm9iYWJpbGl0eSI6IldHdF8iLCJnZXRDb25maWRlbmNlUHJvYmFiaWxpdHkiOiJ6R3RfIiwic2V0UHJlZGljdGlvblByb2JhYmlsaXR5IjoiWEd0XyIsImdldFByZWRpY3Rpb25Qcm9iYWJpbGl0eSI6ImpHdF8iLCJnZXRNZWFuIjoiWkd0XyIsImdldFRvdGFsU3VtU3F1YXJlZCI6Il9HdF8iLCJnZXRTdW1TcXVhcmVkUmVzaWR1YWwiOiIkR3RfIiwiZ2V0RGVncmVlT2ZGcmVlZG9tIjoidFJ0XyIsImdldFJzcXVhcmVkIjoiaVJ0XyIsImdldFJlc2lkdWFscyI6InNSdF8iLCJnZXRDb25maWRlbmNlSW50ZXJ2YWwiOiJlUnRfIiwiZ2V0UHJlZGljdGlvbkludGVydmFsIjoiQVJ0XyIsImdldFN0YXRpc3RpY3MiOiJwdnRfIiwiZ2V0Q29lZmZpY2llbnRzIjoiblJ0XyJ9fX0g");var QS=function(){let i=class t extends wS{constructor(t){super(t);this.SGt_=2;this.JGt_=null}fit(t,i,s){super.fit(t,i,s);t=Array.isArray(t)?t:this.Us_["x"];i=Array.isArray(i)?i:this.Us_["y"];if(this.GGt_.length>=this.SGt_&&this.RGt_)this.NGt_=t=>this.GGt_[0]*t+this.GGt_[1];else{let e=[0,0,0,0,0],A=0;this.JGt_!=null&&(e=this.JGt_);const n=Math.min(t.length,i.length);for(;A<n;A++)if(i[A]!=null){const n=s&&s[A]!=null&&s[A]>0?s[A]:1;e[0]+=n*t[A];e[1]+=n*i[A];e[2]+=n*t[A]*t[A];e[3]+=n*t[A]*i[A];e[4]+=n}const h=(e[4]*e[3]-e[0]*e[1])/(e[4]*e[2]-e[0]*e[0]),r=e[1]/e[4]-h*e[0]/e[4];this.JGt_=e;this.GGt_=[h,r];this.NGt_=t=>t*h+r}}};i=t([_s("geotoolkit.controls.util.regression.Linear")],i);return i}();var ES=Ci(function(){let i=class t extends wS{constructor(t){super(t);this.SGt_=3;this.hRt_=null}fit(t,i,s){super.fit(t,i,s);t=Array.isArray(t)?t:this.Us_["x"];i=Array.isArray(i)?i:this.Us_["y"];if(this.GGt_.length>=this.SGt_&&this.RGt_)this.NGt_=t=>Math.exp(this.GGt_[0])*Math.exp(this.GGt_[1]*t)+this.GGt_[2];else{let e=[0,0,0,0,0],A=0;this.JGt_!=null&&(e=this.JGt_);const n=Math.min(t.length,i.length),h=NA.nA_(i.slice(0,n));let r=0;if(h<0){i=i.map((t=>t-h+Number.MIN_VALUE));r=h}for(;A<n;A++)if(i[A]!=null){const n=s&&s[A]!=null&&s[A]>0?s[A]:1;e[0]+=n*t[A];e[1]+=n*Math.log(i[A]);e[2]+=n*t[A]*t[A];e[3]+=n*t[A]*Math.log(i[A]);e[4]+=n}const o=(e[4]*e[3]-e[0]*e[1])/(e[4]*e[2]-e[0]*e[0]),l=e[1]/e[4]-o*e[0]/e[4];this.JGt_=e;this.GGt_=[l,o,r];this.NGt_=t=>Math.exp(o*t+l)+r;this.hRt_=t=>(Math.log(t-r)-l)/o}}rRt_(t){t==null&&(t=1);let i;this.GGt_[0]!==null&&this.GGt_[1]!==null&&(i=this.GGt_[1]>0?(Math.log(t/this.GGt_[1])-this.GGt_[0])/this.GGt_[1]:(Math.log(-t/this.GGt_[1])-this.GGt_[0])/this.GGt_[1]);return i}oRt_(t){if(typeof t=="number")return this.hRt_(t);if(Array.isArray(t)){const i=[];for(let s=0;s<t.length;s++)i.push(this.hRt_(t[s]));return i}return null}};i=t([_s("geotoolkit.controls.util.regression.Exponential")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFZGdlIjoiclJ0XyIsImludmVyc2VQcmVkaWN0Ijoib1J0XyJ9fX0g");const pS="#757575",mS="#eeeeee",yS="#eeeeee";var DS=Ci(function(){let i=class t extends Du{constructor(t){super(t);const i={regressionmodel:{type:QS},regressionline:{linestyle:new hl({color:pS}),visible:!0},confidenceline:{visible:!1,linestyle:new hl({color:mS}),probability:CS.P95},predictionline:{visible:!1,linestyle:new hl({color:yS}),probability:CS.P95}},s=Pi(t,i);this.XO_={regression:new Bp,confidenceupper:new Bp,confidencelower:new Bp,predictionupper:new Bp,predictionlower:new Bp};this.Fdt_=null;this.xdt_=null;this.HGt_=[];this.lRt_=null;this.uRt_=null;this.aRt_=null;this.gRt_=null;this.cRt_=null;this.IRt_=null;this.fRt_=null;this.CRt_=3;this.dRt_=0;this.BRt_=0;this.wRt_=!1;this.bf_=null;this.WH_=null;this.QRt_=!0;this.ERt_=!1;this.pRt_=!1;this.setOptions(s);(s["datax"]||s["datay"])&&this.setData(s,!1)}setOptions(t){t["extended"]!=null&&this.mRt_(t["extended"]);t["plotinterval"]&&this.yRt_(t["plotinterval"]);t["regressionmodel"]&&this.DRt_(t["regressionmodel"]);t["regressionline"]&&this.MRt_(t["regressionline"]);t["confidenceline"]&&this.vRt_(t["confidenceline"]);t["predictionline"]&&this.bRt_(t["predictionline"]);t["horizontallogmode"]&&(this.ERt_=typeof t["horizontallogmode"]=="boolean"&&t["horizontallogmode"]);t["verticallogmode"]&&(this.pRt_=typeof t["verticallogmode"]=="boolean"&&t["verticallogmode"]);this.td_();return this}Lq_(t){if(this.WH_!==t){this.WH_=t.clone();if(this.wRt_&&this.Fdt_&&this.xdt_){this.Wj_();this.QRt_=!0;this.td_()}}return this}rt_(){return this.WH_?this.WH_.lock():this.getParent()?this.getParent().rt_():null}ht_(t){this.bf_!==t&&(this.bf_=t.clone());return this}getBounds(){return this.bf_?this.bf_:this.rt_()}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);(t["datax"]||t["datay"])&&this.setData(t,!1);return this}N_(){let t=super.N_();t=Pi(this.JV_(),t);t["datax"]=this.Fdt_;t["datay"]=this.xdt_;t["horizontallogmode"]=this.ERt_;t["verticallogmode"]=this.pRt_;return t}NRt_(){return this.cRt_?qi(this.cRt_.JV_(),{type:this.cRt_}):null}JV_(){return{plotinterval:this.CRt_,extended:this.wRt_,regressionmodel:this.NRt_(),regressionline:this.SRt_("regression"),confidenceline:this.SRt_("confidence"),predictionline:this.SRt_("prediction")}}mRt_(t){if(typeof t=="boolean"&&this.wRt_!==t){this.wRt_=t;this.Wj_();this.QRt_=!0}this.td_();return this}yRt_(t){if(typeof t=="number"){this.CRt_=t;this.QRt_=!0;this.td_()}return this}DRt_(t){if(t["type"]){const i=t["type"];if(i instanceof wS){this.cRt_&&this.cRt_.off(fS.bGt_,this.GRt_);this.cRt_=i;this.cRt_.setOptions(t)}else if(fe(i)){if(!this.gRt_||i.D_()!==this.gRt_.D_()){this.cRt_&&this.cRt_.off(fS.bGt_,this.GRt_);this.cRt_=new i(t);this.gRt_=i}}else{this.cRt_&&this.cRt_.off(fS.bGt_,this.GRt_);this.cRt_=new wS(t,i);this.gRt_=null}this.cRt_.on(fS.bGt_,this.GRt_.bind(this))}else this.cRt_&&this.cRt_.setOptions(t);if(this.cRt_&&this.Fdt_&&this.xdt_){this.cRt_.fit(this.Fdt_,this.xdt_,this.HGt_);this.Wj_()}this.QRt_=!0;this.td_();return this}setData(t,i){if(!t)return this;let s,e,A;if(t["datax"]){s=this.RRt_(t["datax"],this.lRt_);this.Fdt_=i&&s?s["rawdata"].concat(this.Fdt_?this.Fdt_:[]):s["rawdata"];this.lRt_=s["datasource"]}if(t["datay"]){e=this.RRt_(t["datay"],this.uRt_);this.xdt_=i&&e?e["rawdata"].concat(this.xdt_?this.xdt_:[]):e["rawdata"];this.uRt_=e["datasource"]}if(t["weights"]){A=this.RRt_(t["weights"],this.aRt_);this.HGt_=i&&A?A["rawdata"].concat(this.HGt_?this.HGt_:[]):A["rawdata"];this.aRt_=A["datasource"]}if(this.Fdt_&&this.xdt_&&this.cRt_){this.cRt_.OGt_()||i||this.cRt_.VGt_();this.cRt_.fit(s?s["rawdata"]:this.Fdt_,e?e["rawdata"]:this.xdt_,A?A["rawdata"]:this.HGt_);this.Wj_()}this.QRt_=!0;this.td_();return this}RRt_(t,i){if(Array.isArray(t))return{rawdata:t,datasource:null};if(t instanceof zD||t instanceof bM){if(i!=null){i.off(YD.Mct_,this.kRt_);i.off(YD.Sct_,this.FRt_);i.off(YD.Rct_,this.FRt_);i instanceof vM&&i.off(yM.jft_,this.FRt_)}if(i!==t){(i=t).on(YD.Mct_,this.kRt_.bind(this));i.on(YD.Sct_,this.FRt_.bind(this));i.on(YD.Rct_,this.FRt_.bind(this));i instanceof vM&&i.on(yM.jft_,this.FRt_.bind(this))}return{rawdata:i.toArray(!0),datasource:i}}return null}kRt_(t,i,s){this.Fdt_=this.lRt_?this.lRt_.toArray(!0):this.Fdt_;this.xdt_=this.uRt_?this.uRt_.toArray(!0):this.xdt_;this.HGt_=this.aRt_?this.aRt_.toArray(!0):this.HGt_;const e=this.Fdt_.slice(s["from"],s["from"]+s["count"]),A=this.xdt_.slice(s["from"],s["from"]+s["count"]),n=this.HGt_.slice(s["from"],s["from"]+s["count"]);if(e.length===A.length&&this.cRt_){this.cRt_.fit(e,A,n);this.Wj_()}this.QRt_=!0;this.td_()}FRt_(t,i,s){this.Fdt_=this.lRt_?this.lRt_.toArray(!0):this.Fdt_;this.xdt_=this.uRt_?this.uRt_.toArray(!0):this.xdt_;this.HGt_=this.aRt_?this.aRt_.toArray(!0):this.HGt_;this.cRt_.VGt_();if(this.Fdt_&&this.xdt_){this.cRt_.fit(this.Fdt_,this.xdt_,this.HGt_);this.Wj_()}this.QRt_=!0;this.td_()}Wj_(){if(this.Fdt_==null||this.xdt_==null)return;const t=this.rt_();if(this.wRt_){if(t){this.IRt_=t.we_();this.fRt_=t.Qe_();this.xRt_=t.Ee_();this.LRt_=t.pe_()}}else{const i=NA.oA_(this.Fdt_),s=NA.oA_(this.xdt_);this.IRt_=i[0];this.fRt_=i[1];this.xRt_=s[0];this.LRt_=s[1];if(t){this.IRt_=this.IRt_<t.we_()?t.we_():this.IRt_;this.fRt_=this.fRt_>t.Qe_()?t.Qe_():this.fRt_;this.xRt_=this.xRt_<t.Ee_()?t.Ee_():this.xRt_;this.LRt_=this.LRt_>t.pe_()?t.pe_():this.LRt_}}}GRt_(t,i){this.QRt_=!0;this.td_()}pvt_(){return this.cRt_.pvt_()}URt_(t,i,s,e,A,n,h){const r=this.pRt_?NA.log10(this.cRt_.PGt_(t===0?1:t)):this.cRt_.PGt_(t);this.ERt_?i.push(NA.log10(t===0?1:t)):i.push(t);const o=this.cRt_.eRt_(t),l=this.cRt_.ARt_(t);s.push(r);e.push(r+o);A.push(r-o);n.push(r+l);h.push(r-l)}YRt_(t,i,s,e,A,n,h){if(!(this.cRt_ instanceof ES))return;const r=this.ERt_?NA.log10(this.cRt_.oRt_(t===0?1:t)):this.cRt_.oRt_(t);this.pRt_?i.push(NA.log10(t===0?1:t)):i.push(t);const o=this.cRt_.eRt_(r),l=this.cRt_.ARt_(r);s.push(r);e.push(t+o);A.push(t-o);n.push(t+l);h.push(t-l)}TRt_(){if(!this.cRt_||this.IRt_==null||this.fRt_==null)return;const t=[],i=[],s=[],e=[],A=[];let n=[],h,r,o;if(this.cRt_ instanceof ES){const o=this.cRt_.rRt_(this.BRt_/this.dRt_);let l=null,u=null,a=null,g=null;const c=this.cRt_.nRt_()[1];if(c===0){h=Math.abs(this.fRt_-this.IRt_)<Math.abs(this.dRt_)?Math.abs(this.fRt_-this.IRt_):this.dRt_;const o=this.pRt_?NA.log10(this.xdt_[0]):this.xdt_[0];for(r=this.IRt_;r<=this.fRt_;r+=h){this.ERt_?n.push(NA.log10(r)):n.push(r);t.push(o);i.push(o);s.push(o);e.push(o);A.push(o)}}else if(c>0){h=Math.abs(this.fRt_-this.IRt_)<Math.abs(this.dRt_)?Math.abs(this.fRt_-this.IRt_):this.dRt_;if(this.IRt_<o){u=this.fRt_<o?this.fRt_:o;if(this.cRt_.PGt_(u)>this.xRt_){for(r=this.IRt_;r<u;r+=h)this.URt_(r,n,t,i,s,e,A);n.push(u);t.push(this.cRt_.PGt_(u))}}if(this.fRt_>o){h=Math.abs(this.LRt_-this.xRt_)<Math.abs(this.BRt_)?Math.abs(this.LRt_-this.xRt_):this.BRt_;a=this.xRt_>this.cRt_.PGt_(o)?this.xRt_:this.cRt_.PGt_(o);if(t.length===0||a<=t[t.length-1])for(r=a;r<=this.LRt_;r+=h)t.length>0&&t[t.length-1]===r||this.YRt_(r,t,n,i,s,e,A)}}else{if(this.IRt_<o){h=Math.abs(this.LRt_-this.xRt_)<Math.abs(this.BRt_)?Math.abs(this.LRt_-this.xRt_):this.BRt_;g=this.xRt_>this.cRt_.PGt_(o)?this.xRt_:this.cRt_.PGt_(o);if(this.cRt_.oRt_(g)>this.IRt_){for(r=this.LRt_;r>=g;r-=h)this.YRt_(r,t,n,i,s,e,A);n.push(this.cRt_.oRt_(g));t.push(g)}}if(this.fRt_>o){h=Math.abs(this.fRt_-this.IRt_)<Math.abs(this.dRt_)?Math.abs(this.fRt_-this.IRt_):this.dRt_;l=this.IRt_<o?o:this.IRt_;if(n.length===0||l<=n[n.length-1])for(r=l;r<this.fRt_;r+=h)this.URt_(r,n,t,i,s,e,A)}}}else if(this.cRt_ instanceof QS&&isNaN(this.cRt_.nRt_()[0])){h=Math.abs(this.LRt_-this.xRt_)<Math.abs(this.BRt_)?Math.abs(this.LRt_-this.xRt_):this.BRt_;const l=this.ERt_?NA.log10(this.Fdt_[0]):this.Fdt_[0];for(r=this.xRt_;r<=this.LRt_;r+=h){o=this.pRt_?NA.log10(r):r;n.push(l);t.push(o);i.push(o);s.push(o);e.push(o);A.push(o)}}else{h=Math.abs(this.fRt_-this.IRt_)<Math.abs(this.dRt_)?Math.abs(this.fRt_-this.IRt_):this.dRt_;for(r=this.IRt_;r<=this.fRt_;r+=h)this.URt_(r,n,t,i,s,e,A)}n.length<2&&(n=null);this.XO_["regression"].Qt_(n,t);this.XO_["confidenceupper"].Qt_(n,i);this.XO_["confidencelower"].Qt_(n,s);this.XO_["predictionupper"].Qt_(n,e);this.XO_["predictionlower"].Qt_(n,A);this.QRt_=!1}KRt_(t,i){const s=hl.Wi_(t["linestyle"]);if(i==="regression"){s instanceof hl&&this.XO_[i].rB_(t["linestyle"]);typeof t["visible"]=="boolean"&&this.XO_[i].nf_(t["visible"])}else{if(s instanceof hl){this.XO_[i+"upper"].rB_(t["linestyle"]);this.XO_[i+"lower"].rB_(t["linestyle"])}if(typeof t["visible"]=="boolean"){this.XO_[i+"upper"].nf_(t["visible"]);this.XO_[i+"lower"].nf_(t["visible"])}}this.vn_();this.td_()}SRt_(t){const i={};if(t==="regression"){i["linestyle"]=this.XO_[t].gt_();i["visible"]=this.XO_[t].$C_()}else{i["linestyle"]=this.XO_[t+"upper"].gt_();i["visible"]=this.XO_[t+"upper"].$C_();t==="confidence"&&this.cRt_&&(i["probability"]=this.cRt_.zGt_());t==="prediction"&&this.cRt_&&(i["probability"]=this.cRt_.jGt_())}return i}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.IRt_&&this.fRt_&&this.xRt_&&this.LRt_||this.Wj_();if(this.QRt_){const t=i.Ji_();this.dRt_=Math.abs(this.CRt_/t.BI_());this.BRt_=Math.abs(this.CRt_/t.sI_());if(!(this.Fdt_&&this.Fdt_.length>1))return;this.TRt_()}this.Xb_(i);for(const t in this.XO_)this.XO_.hasOwnProperty(t)&&this.XO_[t].$C_()&&this.XO_[t].render(i);this.iN_(t)}bRt_(t){this.KRt_(t,"prediction");typeof t["probability"]=="number"&&this.cRt_&&this.cRt_.XGt_(t["probability"]);return this}vRt_(t){this.KRt_(t,"confidence");typeof t["probability"]=="number"&&this.cRt_&&this.cRt_.WGt_(t["probability"]);return this}MRt_(t){this.KRt_(t,"regression");return this}dispose(){if(this.lRt_){this.lRt_.off(YD.Mct_,this.kRt_);this.uRt_.off(YD.Sct_,this.FRt_);this.lRt_.off(YD.Rct_,this.FRt_)}if(this.uRt_){this.uRt_.off(YD.Mct_,this.kRt_);this.uRt_.off(YD.Sct_,this.FRt_);this.uRt_.off(YD.Rct_,this.FRt_)}if(this.aRt_){this.aRt_.off(YD.Mct_,this.kRt_);this.aRt_.off(YD.Sct_,this.FRt_);this.aRt_.off(YD.Rct_,this.FRt_)}this.cRt_&&this.cRt_.off(fS.bGt_,this.GRt_);super.dispose()}HRt_(){return this.cRt_}};i=t([_s("geotoolkit.controls.shapes.RegressionLine")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldE1vZGVsTGltaXRzIjoicnRfIiwic2V0Qm91bmRzIjoiaHRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsImdldFJlZ3Jlc3Npb25Nb2RlbE9wdGlvbnMiOiJOUnRfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsInNldEV4dGVuZGVkIjoibVJ0XyIsInNldFBsb3RJbnRlcnZhbCI6InlSdF8iLCJnZXRTdGF0aXN0aWNzIjoicHZ0XyIsImdldFJlZ3Jlc3Npb25Nb2RlbCI6IkhSdF8ifX19");var MS=Ci({Bar:"bar",qRt_:"histogram",JRt_:"slices"},2,"eyJIaXN0b2dyYW0iOiJxUnRfIiwiU2xpY2VzIjoiSlJ0XyJ9"),vS=Ci(function(){let i=class t extends Au{constructor(t,i,s,e){super();this.PRt_=t;this.length=t.values.length;this.f=i;this.getStyle=s;this.VRt_=e;this.reset()}next(){if(this.Hs_()){this.match=!1;return this.BN_}return null}Hs_(){if(this.match)return!0;while(this.i<this.VRt_.call(this.PRt_)){this.BN_=this.getStyle.call(this.PRt_,this.i++);if(this.f(this.BN_)){this.match=!0;return!0}}return!1}forEach(t){for(let i=0;i<this.VRt_.call(this.PRt_);i++){const s=this.getStyle.call(this.PRt_,i);this.f(s)&&t(s)}return this}filter(t){const i=[];for(let s=0;s<this.VRt_.call(this.PRt_);s++){const e=this.getStyle.call(this.PRt_,s);this.f(e)&&t(e)&&i.push(e)}return i}reset(){this.BN_=null;this.i=0;this.match=!1;return this}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJoYXNOZXh0IjoiSHNfIn19fSAg");const bS=function(t){const i=new wr(t),s=RA.cs_(t.getColor());i.setColor(new nA(s.Is_()/1.5,s.Cs_()/1.5,s.fs_()/1.5,s.ds_()));return i};var NS=Ci(function(){let i=class t extends su{constructor(t){const i={name:"Rose Chart",data:null,polargrid:null,center:new lA,startangle:0,modelradius:200,outerradius:200,rosemode:MS.Bar,createselectedstyle:bS};super(t);this.options=qi(t,i);this.ORt_=[];this.WRt_=[];this.zRt_=[];this.XRt_=new $Q;this.setData(this.options)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.setData(t)}N_(){const t=super.N_();return Pi(this.JV_(),t)}jRt_(t){if(this.WRt_!=null)for(let t=0;t<this.WRt_.length;t++)this.iC_(this.WRt_[t],rh.sC_,this.oQ_());if(t instanceof Au==!1){Array.isArray(t)===!1&&(t=[t]);t=Au.cN_(t)}this.WRt_=[];let i=null;while(t.Hs_()){i=il.BD_(t.next());this.WRt_.push(i);i!=null&&this.tC_(i,rh.sC_,this.oQ_())}return this}ZRt_(t){return this._Rt_===MS.JRt_?new vS(this,t,this.ct_.bind(this),this.$Rt_.bind(this)):this.WRt_===null?null:Au.cN_(this.WRt_,t)}ct_(t){return t===void 0?super.ct_():this._Rt_===MS.JRt_?this.tkt_==null||this.tkt_[t]==null?null:this.tkt_[t]["fillstyle"]||(this.WRt_.length!==0?this.WRt_[t%this.WRt_.length]:null):this.WRt_[t]}$Rt_(){return this._Rt_===MS.JRt_?this.tkt_!=null?this.tkt_.length:0:this.WRt_!=null?this.WRt_.length:0}YT_(t){if(this.zRt_!=null)for(let t=0;t<this.zRt_.length;t++)this.iC_(this.zRt_[t],rh.sC_,this.oQ_());if(t instanceof Au==!1){Array.isArray(t)===!1&&(t=[t]);t=Au.cN_(t)}this.zRt_=[];let i=null;while(t.Hs_()){i=hl.Wi_(t.next());this.zRt_.push(i);i!=null&&this.tC_(i,rh.sC_,this.oQ_())}return this}LT_(t){return this._Rt_===MS.JRt_?new vS(this,t,this.gt_.bind(this),this.ikt_.bind(this)):this.zRt_===null?null:Au.cN_(this.zRt_,t)}gt_(t){return t===void 0?super.gt_():this._Rt_===MS.JRt_?this.tkt_==null||this.tkt_[t]==null?null:this.tkt_[t]["linestyle"]||(this.zRt_.length!==0?this.zRt_[t%this.zRt_.length]:null):this.zRt_[t]}ikt_(){return this._Rt_===MS.JRt_?this.tkt_!=null?this.tkt_.length:0:this.zRt_!=null?this.zRt_.length:0}setValues(t){if(t==null)this.tkt_=null;else{this.tkt_=[];for(const i of t)this.tkt_.push({value:i,highlighted:!1})}this._Rt_===MS.qRt_&&this.skt_();this.vn_().td_();return this}ekt_(t){if(this._Rt_===t)return this;this._Rt_=t;this.vn_().td_();return this}Akt_(){return this._Rt_}ASt_(t){if(this.sSt_===t)return this;this.sSt_=t;this.vn_().td_();return this}nSt_(){return this.sSt_}setData(t){this.options=qi(t,this.options);t["name"]!=null&&this.HC_(t["name"]);this.iSt_=t["polargrid"]||this.iSt_;this._Rt_=t["rosemode"]||this._Rt_;this.E6_=t["outerradius"]||this.E6_;this.sSt_=t["modelradius"]||this.sSt_;this.eSt_=t["startangle"]||this.eSt_;this.center=t["center"]||this.center;t["fillstyle"]!==void 0&&this.iQ_(t["fillstyle"]);t["linestyle"]!==void 0&&this.rB_(t["linestyle"]);t["createselectedstyle"]!==void 0&&(this.nkt_=t["createselectedstyle"]);if(t["data"]!==void 0){const i=t["data"];this.data=t["data"];this.hkt_=i["bins"]||this.hkt_;if(i["values"]!==void 0)if(i["values"]===null)this.tkt_=null;else{this.tkt_=[];for(const t of i["values"])typeof t=="number"?this.tkt_.push({value:t,highlighted:!1}):this.tkt_.push({linestyle:t["linestyle"],fillstyle:t["fillstyle"],value:t["value"],start:t["start"],end:t["end"],highlighted:!1})}i["fillstyles"]!==void 0?this.jRt_(i["fillstyles"]):i["fillstyle"]!==void 0&&this.jRt_([i["fillstyle"]]);i["linestyles"]!==void 0?this.YT_(i["linestyles"]):i["linestyle"]!==void 0&&this.YT_([i["linestyle"]])}if(this.iSt_!=null){const t=this.iSt_.JV_();this.options=qi(t,this.options);this.center=t["center"];this.E6_=t["outerradius"];this.eSt_=t["startangle"];this.sSt_=t["modelradius"]}this.bounds=new mA(this.center.x-this.E6_,this.center.y-this.E6_,this.center.x+this.E6_,this.center.y+this.E6_);this._Rt_===MS.qRt_&&this.skt_();this.vn_().td_();return this}JV_(){return{name:this.dn_(),rosemode:this._Rt_,outerradius:this.E6_,modelradius:this.sSt_,startangle:this.eSt_,center:this.center,linestyle:this.gt_(),fillstyle:this.ct_(),data:{values:this.tkt_,bins:this.hkt_,linestyles:this.LT_(),fillstyles:this.ZRt_()}}}skt_(){let t;this.ORt_=[];for(t=0;t<this.hkt_;t++)this.ORt_.push({value:0,count:0,highlighted:!1});let i=0;const s=360/this.hkt_;for(t=0;t<this.tkt_.length;t++){const e=Math.floor(this.tkt_[t]["value"]/s);this.ORt_[e]["count"]++;this.ORt_[e]["count"]>i&&(i=this.ORt_[e]["count"])}for(t=0;t<this.ORt_.length;t++)this.ORt_[t]["value"]=this.ORt_[t]["count"]/i*this.sSt_;return this}cvt_(){return this.hkt_}Wut_(t){if(this.hkt_===t)return this;this.hkt_=t;this.skt_().vn_().td_();return this}ht_(t){if(this.bounds!=null&&this.bounds.Ce_(t,NA.Je_))return this;this.bounds=t;this.vn_().td_();return this}getBounds(){return this.bounds!=null?this.bounds.lock():null}zY_(t){const i=t.tk_(),s=this._Rt_!==MS.qRt_?this.tkt_:this.ORt_,e=360/(this._Rt_===MS.Bar?this.tkt_.length:this.hkt_);let A=this.eSt_,n=this.eSt_;const h=this.$Rt_(),r=this.ikt_();let o,l;for(let u=0;u<s.length;u++){const a=s[u];if(a==null||Number.isNaN(a))continue;l=h!==0?this.ct_(u%h):null;o=r!==0?this.gt_(u%r):null;if(this._Rt_===MS.JRt_){a["fillstyle"]!==void 0&&(l=il.BD_(a["fillstyle"]));a["linestyle"]!==void 0&&(o=hl.Wi_(a["linestyle"]))}if(l==null&&o==null)continue;this.XRt_.rB_(o);this.XRt_.iQ_(a["highlighted"]&&this.nkt_!=null?this.nkt_(l):l);if(this._Rt_===MS.JRt_){A=a["start"];n=a["end"]}else{A=n;n=A+e}const g=this.$Nt_(a["value"]),c=A*Math.PI/180,I=n*Math.PI/180;this.XRt_.M6_(this.center.x,this.center.y,g,c,I,I-c);if(i){this.XRt_.PC_(u);t.YR_(this.XRt_)}this.XRt_.render(t)}}render(t){const i=this.getBounds();if(i==null)return;const s=this.sd_()?t.uS_(this.sd_()):t,e=undefined;if(this.ct_()!=null){s.iQ_(this.ct_(),i);s.rB_(null);if(this.iSt_==null)s.pR_(i.we_(),i.Ee_(),i.Ie_(),i.Ts_());else{const t=this.$Nt_(this.sSt_);s.yR_(this.center.x-t,this.center.y-t,this.center.x+t,this.center.y+t)}}const A=this.gt_();if(A!=null){s.iQ_(null);s.rB_(A);if(this.iSt_==null)s.pR_(i.we_(),i.Ee_(),i.Ie_(),i.Ts_());else{const t=this.$Nt_(this.sSt_);s.yR_(this.center.x-t,this.center.y-t,this.center.x+t,this.center.y+t)}}this.data!=null&&this.tkt_!=null&&this.zY_(s)}$X_(t,i){const s=[],e=function(t){if(t===null)return;const i=t.zC_();i!==null&&s.indexOf(i)<0&&s.push(i)},A=new bC;t instanceof lA?A.iX_(e,this.getRoot(),t.x,t.y,i||1):A.iX_(e,this.getRoot(),t);return s}vEt_(t,i){if(this._Rt_===MS.qRt_){if(!i)for(const t of this.ORt_)t.rkt_=!1;for(const i of t)this.ORt_[i].rkt_=!0}else{if(!i)for(const t of this.tkt_)t.rkt_=!1;for(const i of t)this.tkt_[i].rkt_=!0}this.td_();return this}$Nt_(t){return Math.min(t/this.sSt_,1)*this.E6_}};i=t([_s("geotoolkit.controls.shapes.RoseChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0RmlsbFN0eWxlcyI6ImpSdF8iLCJnZXRGaWxsU3R5bGVzIjoiWlJ0XyIsImdldEZpbGxTdHlsZSI6ImN0XyIsImdldEZpbGxTdHlsZXNDb3VudCI6IiRSdF8iLCJzZXRMaW5lU3R5bGVzIjoiWVRfIiwiZ2V0TGluZVN0eWxlcyI6IkxUXyIsImdldExpbmVTdHlsZSI6Imd0XyIsImdldExpbmVTdHlsZXNDb3VudCI6ImlrdF8iLCJzZXRSb3NlTW9kZSI6ImVrdF8iLCJnZXRSb3NlTW9kZSI6IkFrdF8iLCJzZXRNb2RlbFJhZGl1cyI6IkFTdF8iLCJnZXRNb2RlbFJhZGl1cyI6Im5TdF8iLCJnZXRPcHRpb25zIjoiSlZfIiwiZ2V0QmluQ291bnQiOiJjdnRfIiwic2V0QmluQ291bnQiOiJXdXRfIiwic2V0Qm91bmRzIjoiaHRfIiwiaGl0VGVzdCI6IiRYXyIsImhpZ2hsaWdodEluZGljZXMiOiJ2RXRfIiwibW9kZWxUb091dGVyUmFkaXVzIjoiJE50XyJ9fX0g");var SS=function(){let i=class t{constructor(t,i,s){this.JP_=null;this.Jgt_=t;this.NY_=s;this.okt_=null;this.lkt_=()=>{const t=this.JP_.if_().transform(this.JP_.rt_());this.okt_.ht_(this.Jgt_.if_().uI_(t));this.okt_.Lq_(this.JP_.rt_())};i&&this.ukt_(i,this.Jgt_)}ukt_(t,i){this.Jgt_=i;this.JP_=t;this.okt_=new sI;this.okt_.HC_("ghost_node");this.lkt_();this.JP_.on(rh.rC_,this.lkt_);this.Jgt_.GY_(this.okt_);return this}akt_(){return this.JP_}gkt_(){return this.mgt_()}contains(t){const i=this.JP_.rt_(),s=undefined;return this.JP_.if_().transform(i).contains(t)}ckt_(t,i,s){if(t){const i=t.e7_().getBounds().clone();let e=s.if_().transform(i);e=this.mgt_().if_().uI_(e);t.e7_().ht_(e);t.Ngt_()}return!0}Ikt_(t){return t}fkt_(t){return t}Ckt_(t){return t}dkt_(t){return t}intersect(t){return t}Bkt_(){return!1}mgt_(){return this.okt_||this.Jgt_}dispose(){this.JP_&&this.JP_.off(rh.rC_,this.lkt_);if(this.okt_){this.okt_.KY_();this.okt_.dispose();this.okt_=null}}static bi_(t){return t instanceof sI}static wkt_(){return 1}};i=t([_s("geotoolkit.controls.tools.SimpleAdapter")],i);return i}();let GS=null;var RS=function(){var i;let s=i=class t{constructor(){this.Qkt_=[]}Ekt_(t,i,s){let e=SS,A=-1/0;for(let t=0;t<this.Qkt_.length;t++){const s=this.Qkt_[t];if(s.bi_(i)&&s.wkt_()>A){e=s;A=s.wkt_()}}return new e(t,i,s)}register(t){this.Qkt_.indexOf(t)===-1&&this.Qkt_.push(t);return this}static Ai_(){GS==null&&(GS=new i);return GS}};s=i=t([_s("geotoolkit.controls.tools.AdaptersRegistry")],s);return s}();var kS=Ci(function(){var t;return class{constructor(t){this.pkt_=t;this.mkt_=!1;this.ykt_=!1}Dkt_(){return this.pkt_}stopPropagation(){this.mkt_=!0;return this}preventDefault(){this.ykt_=!0;return this}qE_(){return this.mkt_}Mkt_(){return this.ykt_}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFdmVudE5hbWUiOiJEa3RfIiwiaXNDYW5jZWxlZCI6InFFXyIsImlzUHJldmVudERlZmF1bHQiOiJNa3RfIn19fSAg");var FS=Ci(function(){let i=class t extends kS{constructor(t,i,s,e,A){super(t);this.vkt_=!1;this.bkt_=i;this.Nkt_=s;this.E8_=A;this.JP_=e;this.Skt_=null;this.Gkt_=!1;this.Rkt_=null;this.E8_!=null&&this.Nkt_!=null&&(this.Gkt_=this.Nkt_.getX()>=0&&this.Nkt_.getX()<this.E8_.Ie_()&&this.Nkt_.getY()>=0&&this.Nkt_.getY()<this.E8_.Ts_())}kkt_(){return this.bkt_==null?null:this.bkt_.currentTarget||this.bkt_.target}Fkt_(){return this.Nkt_}getPlot(){return this.E8_}PP_(){return this.JP_}xkt_(t){this.JP_=t;return this}Lkt_(){return this.bkt_}Ukt_(t){if(t==null)return this.vkt_;this.vkt_=t;return this.vkt_}stopPropagation(t,i){super.stopPropagation();if(t){super.preventDefault();this.Ukt_(!1);this.Lkt_()!=null&&this.Lkt_().preventDefault()}i&&this.Lkt_()!=null&&this.Lkt_().stopPropagation();return this}Ykt_(t){const i=this.kkt_();return this.Lkt_()==null||t===i||t===null&&this.getPlot()!=null&&i===this.getPlot().r3_()}Tkt_(){return this.Gkt_}Kkt_(t){this.Skt_=t;return this}Hkt_(){return this.Skt_}qkt_(){if(this.Rkt_==null){this.Rkt_=new lA;const t=this.Lkt_();let i;i=de(t)&&t.touches.length>0?t.touches[0]:Be(t)?t:{clientX:NaN,clientY:NaN};this.Rkt_.vs_(i.clientX,i.clientY)}return this.Rkt_}};i=t([_s(null)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFdmVudFRhcmdldCI6ImtrdF8iLCJnZXRQbG90UG9pbnQiOiJGa3RfIiwiZ2V0Tm9kZSI6IlBQXyIsImdldE5hdGl2ZUV2ZW50QXJncyI6IkxrdF8iLCJpblBsb3QiOiJUa3RfIiwiZ2V0Q1NTUG9pbnQiOiJxa3RfIn19fSAg");var xS=Ci({Jkt_:"onStateChanged",Pkt_:"onEnabledStateChanged",Vkt_:"onEnter",Okt_:"onLeave",sDt_:"onRebuild",Wkt_:"onListenerAdded",zkt_:"onListenerRemoved"},2,"eyJvblN0YXRlQ2hhbmdlZCI6IkprdF8iLCJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIiwib25FbnRlciI6IlZrdF8iLCJvbkxlYXZlIjoiT2t0XyIsIm9uUmVidWlsZCI6InNEdF8iLCJvbkxpc3RlbmVyQWRkZWQiOiJXa3RfIiwib25MaXN0ZW5lclJlbW92ZWQiOiJ6a3RfIn0g");const LS=500,US=20,YS=10;let TS=null,KS=5,HS=2;RS.Ai_().register(SS);const qS=new RegExp(/touch/),JS=new RegExp(/pointer/),PS=new lA,VS="simulatedevent";var OS=Ci(function(){var i;let s=i=class t extends $n{constructor(t,i){super();this.Gi_=!1;this.Xkt_=null;this.jkt_=null;this.Zkt_=0;this._kt_=new lA(-1/0,-1/0);this.$kt_=null;const s=t instanceof Ic?t:null,e=typeof t=="string"?t:typeof i=="string"?i:"",A=t&&typeof t=="object"&&t["name"]==null&&t["layer"]==null?t:null;t=t&&s==null?Es(t):null;this.tFt_={};this.xv_=!0;this.ov_=e;this.iFt_=HS;this.sFt_=KS;this.Jgt_=s;if(t){t["enabled"]!=null&&(this.xv_=t["enabled"]);t["name"]!=null&&(this.ov_=t["name"]);t["mouseradius"]!=null&&(this.iFt_=t["mouseradius"]);t["touchradius"]!=null&&(this.sFt_=t["touchradius"]);t["layer"]!=null&&(this.Jgt_=t["layer"])}A!=null&&this.eFt_(A);this.AFt_={};this.nFt_=[0,1]}static hFt_(){return VS}eFt_(t,s){const e=this.rFt_();e!=null&&this.detach(e);let A=this.tFt_;t==null&&(t={});if(s===!0&&this.tFt_!=null)for(const i in t)A[i]=t[i];else A=t;for(const t in A)if(A.hasOwnProperty(t)){const s=i.oFt_(t);if(Array.isArray(s)){const i=A[t];delete A[t];for(let t=0;t<s.length;++t)A[s[t]]=i}}for(const t in A)if(A.hasOwnProperty(t)){const i=A[t];i==null||Array.isArray(i)||(A[t]=[i]);const s=A[t];if(s!=null)for(let t=0;t<s.length;t++){const i=s[t];typeof i=="function"&&(s[t]={callback:i,object:null,enabled:!0})}}e!=null&&this.attach(e);this.tFt_=A;return this}lFt_(t){return this}uFt_(t){this.iFt_=t;return this}aFt_(){return this.iFt_}gFt_(t){this.sFt_=t;return this}static cFt_(t){KS=t}static IFt_(t){HS=t}fFt_(){return this.sFt_}CFt_(t){return this.dFt_(t)?this.sFt_:this.iFt_}static Tkt_(t){const i=t.getPlot(),s=t!=null&&t.Lkt_();return s!=null&&i!=null&&(s["type"]===VS||s["target"]===i.r3_())}static lock(t,s){i.BFt_===void 0&&(i.BFt_=[]);const e=i.BFt_;for(let i=0;i<e.length;i++)if(e[i].wFt_===t){e[i].QFt_=s;return}e.push({wFt_:t,QFt_:s})}static unlock(t){if(i.BFt_===void 0)return;const s=i.BFt_;if(t instanceof i)for(let i=s.length-1;i>=0;i--)s[i].QFt_===t&&s.splice(i,1);else for(let i=0;i<s.length;i++)if(s[i].wFt_===t){s.splice(i,1);return}}static EFt_(t){const s=i.BFt_;if(s===void 0||s.length===0)return null;for(let i=0;i<s.length;i++)if(s[i].wFt_==null||s[i].wFt_===t)return s[i].QFt_;return null}static oFt_(t){TS||(TS=je.As_()?{pointerdown:["touchstart"],pointermove:["touchmove"],pointerup:["touchend"]}:"ontouchstart"in Mi.document.documentElement?{pointerdown:["mousedown","touchstart"],pointermove:["mousemove","touchmove"],pointerup:["mouseup","touchend"]}:Mi["PointerEvent"]?{pointerdown:["pointerdown"],pointermove:["pointermove"],pointerup:["pointerup"]}:Mi["TouchEvent"]?{pointerdown:["mousedown","touchstart"],pointermove:["mousemove","touchmove"],pointerup:["mouseup","touchend"]}:{pointerdown:["mousedown"],pointermove:["mousemove"],pointerup:["mouseup"]});if(typeof t=="string"){const i=t.toLowerCase();return TS[i]!=null?TS[i]:[t]}return[]}pFt_(t,s,e){const A=i.oFt_(t);for(let t=0;t<A.length;++t){const i=A[t];if(this.tFt_[i]!=null)for(let t=0;t<this.tFt_[i].length;++t){const A=this.tFt_[i][t];A["object"]!==e&&e||(A["enabled"]=s)}}return this}HC_(t){this.ov_=t;return this}dn_(){return this.ov_}mgt_(){return this.Jgt_}mFt_(){Ie(this)&&this.Ct_(null);this.Xkt_&&i.oFt_("pointerup").forEach((t=>{Mi.removeEventListener(t,this.Xkt_,!1)}))}yFt_(){this.Xkt_==null&&(this.Xkt_=this.mFt_.bind(this));i.oFt_("pointerup").forEach((t=>{Mi.addEventListener(t,this.Xkt_,!1)}))}dispose(){if(this.Df_())return;this.Xkt_&&i.oFt_("pointerup").forEach((t=>{Mi.removeEventListener(t,this.Xkt_,!1)}));const t=this.rFt_();if(t!=null){this.detach(t);t.remove(this)}this.AFt_=null;this.tFt_=null;super.dispose()}static dFt_(t){t instanceof FS&&(t=t.Lkt_());return qS.test(t.type)||JS.test(t.type)&&t["pointerType"]!=="mouse"||je.As_()}dFt_(t){return i.dFt_(t)}static DFt_(t,i){i=i||new lA;if(t==null)return i.vs_(0,0);let s=0,e=0;if(je.As_()){s=t.clientX;e=t.clientY}else if(Mi.TouchEvent&&t instanceof Mi.TouchEvent&&t["type"]==="touchend"&&t.changedTouches!=null&&t.changedTouches.length>0){s=t.changedTouches[0].clientX;e=t.changedTouches[0].clientY}else if(Mi.TouchEvent&&t instanceof Mi.TouchEvent&&t.touches!=null&&t.touches.length>0){s=t.touches[0].clientX;e=t.touches[0].clientY}else if(t instanceof MouseEvent){s=t.clientX;e=t.clientY}return i.vs_(s,e)}static MFt_(t,s){const e=s.getBoundingClientRect(),A=i.DFt_(t,PS),n=A.getX(),h=A.getY();if(je.As_())return{x:Math.round(n*10)/10,y:Math.round(h*10)/10};const r=(n-e.left)/(e.right-e.left)*s.Ie_(),o=(h-e.top)/(e.bottom-e.top)*s.Ts_();return{x:Math.round(r*10)/10,y:Math.round(o*10)/10}}vFt_(t,s){const e=s==null&&t instanceof FS?t.getPlot():s,A=s==null&&t instanceof FS?t.Lkt_():t;return i.MFt_(A,e)}bFt_(t,i){const s=i instanceof FS?i.Fkt_():i,e=new lA(s.getX(),s.getY());if(t!=null){const i=t.if_();i!=null&&i.aI_(e,e)}return e}addListener(t,i){ki("AbstractTool.addListener() is deprecated since 4.0 use .on() instead."+" Note that 3 args callback should be used in subscription via .on(): (eventType, source, args)");this._on(t,i);const s={tool:this,eventname:t,listener:i,short:!0};this.notify(xS.Wkt_,this,Ss(s,["eventName"],"AbstractTool#onListenerAdded"));return this}off(t,i){super.off(t,i);const s={tool:this,eventname:t,listener:i};this.notify(xS.zkt_,this,Ss(s,["eventName"],"AbstractTool#onListenerRemoved"));return this}removeListener(t,i){ki("AbstractTool.removeListener() is deprecated since 4.0 use .off() instead.");Array.isArray(i)?i.forEach((i=>{this.pf_(t,i)})):this.pf_(t,i);const s={tool:this,eventname:t,listener:i,short:!0};this.notify(xS.zkt_,this,Ss(s,["eventName"],"AbstractTool#onListenerRemoved"));return this}fireEvent(t,i){ki("AbstractTool.fireEvent() is deprecated since 4.0 use .notify() instead."+" Note that 3 args callback should be used in subscription via .on()");this.notify(t,this,i)}Kv_(t){if(this.xv_===t)return this;this.xv_=t;this.Pkt_();this.Dgt_();return this}isEnabled(){return this.xv_}toggle(){this.Kv_(!this.xv_);return this}start(t){return this.setActive(!0)}stop(){return this.setActive(!1)}NFt_(){return this.stop()}setActive(t){if(this.Gi_===t)return this;this.Gi_=t;this.Dgt_();return this}isActive(){return this.Gi_}Dgt_(){this.notify(xS.Jkt_,this)}Pkt_(){this.notify(xS.Pkt_,this)}attach(t){this.SFt_(t);const i=function(t,i,s){if(s.qE_())return;const e=t.tFt_[i];for(let i=0;i<e.length;++i){const A=e[i];if(A["enabled"]!==!1&&s.Ykt_(A["object"])){A["callback"].call(t,s);if(s.qE_())return}}};for(const s in this.tFt_)if(this.tFt_.hasOwnProperty(s)&&this.tFt_[s]!=null){this.AFt_[s]==null&&(this.AFt_[s]=[]);this.AFt_[s].push(t.subscribe(s,this,t,i.bind(null,this,s)))}return this}detach(t){t===this.rFt_()&&this.SFt_(null);let i;for(const s in this.AFt_)if(this.AFt_.hasOwnProperty(s)){i=this.AFt_[s];for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.GFt_()===t){e.off();i.splice(s,1)}}}return this}rFt_(){return this.jkt_}SFt_(t){this.jkt_=t;return this}on(t,i){super.on(t,i);const s={tool:this,eventname:t,listener:i};this.notify(xS.Wkt_,this,Ss(s,["eventName"],"AbstractTool#onListenerAdded"));return this}subscribe(t,i,s,e){return null}unsubscribe(t){return this}RFt_(t){if(t==null||this.tFt_[t]==null)return null;const i=[];this.tFt_[t].forEach((function(t){i.indexOf(t["object"])===-1&&i.push(t["object"])}));return i}kFt_(t){const i=Date.now(),s=i-this.Zkt_;if(s<LS&&lA.Ss_(t,this._kt_)<YS&&s>US)return!0;this.Zkt_=i;this._kt_.vs_(t.getX(),t.getY());return!1}FFt_(t){return this.nFt_.indexOf(t)!==-1}xFt_(t){this.nFt_=t;return this}LFt_(t,i,s){if(this.$kt_&&this.$kt_.akt_()===t)return this.$kt_;const e=RS.Ai_().Ekt_(this.Jgt_,t,i);this.$kt_&&s&&this.$kt_.dispose();return e}UFt_(){this.$kt_=null}dt_(t){if((t=Es(t))==null)return this;t["slots"]!==void 0&&this.eFt_(t["slots"]);t["name"]!==void 0&&this.HC_(t["name"]);t["enabled"]!==void 0&&this.Kv_(t["enabled"]);t["mouseradius"]!==void 0&&this.uFt_(t["mouseradius"]);t["touchradius"]!==void 0&&this.gFt_(t["touchradius"]);t["layer"]!==void 0&&this.YFt_(t["layer"]);return this}N_(){return Ss({name:this.ov_,enabled:this.isEnabled(),mouseradius:this.iFt_,touchradius:this.sFt_,layer:this.Jgt_},["mouseRadius","touchRadius"],"AbstractTool.getProperties")}YFt_(t){this.Jgt_=t;return this}};s=i=t([Zs(Sw),_s("geotoolkit.controls.tools.AbstractTool")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTbG90cyI6ImVGdF8iLCJzZXRNb3VzZVJhZGl1cyI6InVGdF8iLCJnZXRNb3VzZVJhZGl1cyI6ImFGdF8iLCJzZXRUb3VjaFJhZGl1cyI6ImdGdF8iLCJnZXRUb3VjaFJhZGl1cyI6ImZGdF8iLCJzZXRTbG90RW5hYmxlZCI6InBGdF8iLCJzZXROYW1lIjoiSENfIiwiZ2V0TmFtZSI6ImRuXyIsImdldE1hbmlwdWxhdG9yTGF5ZXIiOiJtZ3RfIiwiY2FwdHVyZU1vdXNlVXAiOiJ5RnRfIiwiaXNUb3VjaEV2ZW50IjoiZEZ0XyIsInBhZ2VUb0NhbnZhcyI6InZGdF8iLCJwb2ludFRvTW9kZWwiOiJiRnRfIiwic2V0RW5hYmxlZCI6Ikt2XyIsIm9uQWN0aXZlU3RhdGVDaGFuZ2VkIjoiRGd0XyIsIm9uRW5hYmxlZFN0YXRlQ2hhbmdlZCI6IlBrdF8iLCJnZXRQYXJlbnRUb29sIjoickZ0XyIsImlzRG91YmxlQ2xpY2siOiJrRnRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyJ9fSwic2V0RGVmYXVsdFRvdWNoUmFkaXVzIjoiY0Z0XyIsInNldERlZmF1bHRNb3VzZVJhZGl1cyI6IklGdF8iLCJnZXRFeGNsdXNpdmVUb29sIjoiRUZ0XyIsImdldE5hdGl2ZUV2ZW50TmFtZSI6Im9GdF8iLCJpc1RvdWNoRXZlbnQiOiJkRnRfIiwiY2xpZW50VG9DYW52YXMiOiJNRnRfIn0g");var WS=Ci(function(){let i=class t extends FS{constructor(t,i){super(i);this.TFt_=t;this.LMt_=t!=null;this.eb_=null}KFt_(t){this.eb_=t;return this}kkt_(){return this.eb_!=null?this.eb_:this.TFt_==null?null:this.TFt_.kkt_()}HFt_(){return this.LMt_===!1}PP_(){return this.LMt_?this.TFt_.PP_():null}getPlot(){return this.LMt_?this.TFt_.getPlot():null}Fkt_(){return this.LMt_?this.TFt_.Fkt_():null}Dkt_(){const t=super.Dkt_();return t!=null?t:this.LMt_?this.TFt_.Dkt_():null}Lkt_(){return this.LMt_?this.TFt_.Lkt_():null}stopPropagation(t,i){this.LMt_&&this.TFt_.stopPropagation(t,i);return this}qE_(){return!!this.LMt_&&this.TFt_.qE_()}Ukt_(t){return!this.LMt_||this.TFt_.Ukt_(t)}Tkt_(){return!!this.LMt_&&this.TFt_.Tkt_()}Kkt_(t){this.LMt_&&this.TFt_.Kkt_(t);return this}Hkt_(){return this.LMt_?this.TFt_.Hkt_():[]}};i=t([_s(null)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRFdmVudFRhcmdldCI6IktGdF8iLCJnZXRFdmVudFRhcmdldCI6ImtrdF8iLCJnZXROb2RlIjoiUFBfIiwiZ2V0UGxvdFBvaW50IjoiRmt0XyIsImdldEV2ZW50TmFtZSI6IkRrdF8iLCJnZXROYXRpdmVFdmVudEFyZ3MiOiJMa3RfIiwiaXNDYW5jZWxlZCI6InFFXyIsImluUGxvdCI6IlRrdF8ifX19");var zS=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.E1_=i;this.qFt_=s===!0}JFt_(){return this.qFt_}oc_(){return this.E1_}};i=t([_s("geotoolkit.controls.tools.PanningEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1doZWVsIjoiSkZ0XyIsImdldERpcmVjdGlvbiI6Im9jXyJ9fX0g");const XS=Mi.setTimeout;var jS=Ci({PFt_:"onPanningStart",VFt_:"onPanning",OFt_:"onPanningEnd",WFt_:"onDoubleClick"},2,"eyJvblBhbm5pbmdTdGFydCI6IlBGdF8iLCJvblBhbm5pbmciOiJWRnRfIiwib25QYW5uaW5nRW5kIjoiT0Z0XyIsIm9uRG91YmxlQ2xpY2siOiJXRnRfIn0g");const ZS=25,_S=250,$S=5,tG=30,iG=0;var sG=Ci(function(){let i=class t extends OS{constructor(t){const i=undefined;super(void 0,(t=t?Es(t):null)&&typeof t["name"]=="string"?t["name"]:"panning");this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:{callback:this.Ct_.bind(this),object:Mi},wheel:this.jFt_.bind(this),dblclick:this.ZFt_.bind(this)});this._Ft_=!1;this.$Ft_=!1;this.txt_=0;this.E1_=null;this.ixt_=null;this.sxt_=null;this._x=0;this._y=0;this.ext_=0;this.Axt_=null;this.nxt_=1/20;this.hxt_=!1;this.rxt_=iG;if(t){t["wheelratio"]!=null&&(this.nxt_=t["wheelratio"]);t["acceptx"]!=null&&(this.hxt_=t["acceptx"]);t["panningthreshold"]!=null&&(this.rxt_=t["panningthreshold"]);t["inertiacoef"]!=null&&this.oxt_(t["inertiacoef"])}}lxt_(t){const i=this.vFt_(t);this._x=i.x;this._y=i.y;return this}start(t){this.lxt_(t);this.setActive(!0);return this}stop(){this.setActive(!1);return this}uxt_(t){this.lxt_(t);return this}oc_(t){const i=this.vFt_(t),s=i.x,e=i.y;return{x:s-this._x,y:e-this._y,start:{x:this._x,y:this._y},end:{x:s,y:e}}}ukt_(t,i){this.Axt_!=null&&this.off(jS.VFt_,this.Axt_);this.Axt_=function(s,e,A){const n=A.oc_(),h=t.if_().aI_(new lA(0,0)),r=t.if_().aI_(new lA(n.x,n.y)),o=r.x-h.x,l=r.y-h.y;i==null?t.translate(o,l):i.call(t,o,l)};this.on(jS.VFt_,this.Axt_);return this}jFt_(t){const i=t.Lkt_();i.preventDefault();const s=this.hxt_===!1?0:i["deltaY"],e=i["deltaY"],A=this.isActive();this.setActive(!0);this.axt_(t,s,e);this.setActive(A)}gxt_(){return this.hxt_}cxt_(t){this.hxt_=t;return this}Ixt_(){return this.nxt_}fxt_(t){this.nxt_=t;return this}axt_(t,i,s){const e=t.PP_();if(!(e instanceof Ic))return;this.Cxt_();const A=this.vFt_(t),n=e.ot_(),h=-1*NA.sign(i)*n.Ie_()*this.nxt_,r=-1*NA.sign(s)*n.Ts_()*this.nxt_,o={x:h,y:r,start:{x:A.x,y:A.y},end:{x:A.x+h,y:A.y+r}};this.dxt_(t,o)}dxt_(t,i){this.notify(jS.PFt_,this,new zS(t,null));this.notify(jS.VFt_,this,new zS(t,i,!0));this.notify(jS.OFt_,this,new zS(t,null))}Bxt_(t){this.$Ft_!==!0&&this.notify(jS.PFt_,this,new zS(t,null))}wxt_(t){this.$Ft_!==!0&&(this.txt_!==0&&t!=null&&t.Lkt_()["timeStamp"]-this.ext_<_S?this.Qxt_(t):this.notify(jS.OFt_,this,new zS(t,null)))}Qxt_(t){this.ixt_=t;let i=1,s=Date.now();const e=this.vFt_(t),A={x:0,y:0,start:{x:e.x,y:e.y},end:{x:0,y:0}};if(Math.abs(this.E1_.x)>tG||Math.abs(this.E1_.y)>tG){const t=tG/Math.max(Math.abs(this.E1_.x),Math.abs(this.E1_.y));this.E1_.x*=t;this.E1_.y*=t;this.E1_.end.x=this.E1_.start.x+this.E1_.x;this.E1_.end.y=this.E1_.start.y+this.E1_.y}const n=()=>{const t=Date.now()-s,e=Math.ceil(t/ZS),h=Math.pow(this.txt_,e),r=(1-h)/(1-this.txt_);A.x=Math.round(this.E1_.x*i*r);A.y=Math.round(this.E1_.y*i*r);i*=h;this.E1_.x*=i;this.E1_.y*=i;A.end.x=A.start.x+A.x;A.end.y=A.start.y+A.y;if(Math.abs(A.x)>=1||Math.abs(A.y)>=1){this.notify(jS.VFt_,this,new zS(null,A));A.start.x=A.end.x;A.start.y=A.end.y;s=Date.now();this.sxt_=XS(n,ZS)}else{this.sxt_=null;this.notify(jS.OFt_,this,new zS(this.ixt_,null))}};this.sxt_=XS(n,ZS)}zFt_(t){if(t.Lkt_()["buttons"]==null||t.Lkt_()["buttons"]===Ts.z_){this.Cxt_();this.start(t)}}Kv_(t){t===!1&&this.Cxt_();return super.Kv_(t)}XFt_(t){if(!this.isActive())return;if(t.Lkt_()["buttons"]===Ts.W_){this.stop();if(this._Ft_){this.wxt_(t);this._Ft_=!1}return}const i=this.oc_(t);if(!this._Ft_){const s=t.Dkt_()==="touchmove"?$S:this.Ext_();if(Math.abs(i.x)<=s&&Math.abs(i.y)<=s)return;this.$Ft_=t.Lkt_()["ctrlKey"]===!0;this.Bxt_(t);this._Ft_=!0}this.uxt_(t);t.stopPropagation(!0);i.x===0&&i.y===0||this.notify(jS.VFt_,this,new zS(t,i));if(this.txt_!==0&&this.isActive()){this.E1_=i;this.ext_=t.Lkt_()["timeStamp"]}}Ct_(t){this.stop();if(this._Ft_){t!=null&&t.stopPropagation(!0);this.wxt_(t);this._Ft_=!1}}ZFt_(t){this.isEnabled()&&this.notify(jS.WFt_,this,new zS(t,null));return this}oxt_(t){this.txt_=t===!0?.99:typeof t=="number"&&t>0&&t<1?t:0;return this}Cxt_(){if(this.sxt_!=null){clearTimeout(this.sxt_);this.sxt_=null;this.notify(jS.OFt_,this,new zS(this.ixt_,null))}return this}dispose(){if(this.sxt_!=null){clearTimeout(this.sxt_);this.sxt_=null}super.dispose()}setActive(t){if(t===!1&&this.sxt_!=null){clearTimeout(this.sxt_);this.sxt_=null}return super.setActive(t)}pxt_(t){this.pFt_("pointermove",!t);this.pFt_("pointermove",t,Mi);return this}mxt_(t){this.rxt_=Math.max(0,t);return this}Ext_(){return this.rxt_}};i=t([_s("geotoolkit.controls.tools.Panning")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREaXJlY3Rpb24iOiJvY18iLCJzZXRUYXJnZXQiOiJ1a3RfIiwiZ2V0QWNjZXB0WCI6Imd4dF8iLCJzZXRBY2NlcHRYIjoiY3h0XyIsImdldFdoZWVsUmF0aW8iOiJJeHRfIiwic2V0V2hlZWxSYXRpbyI6ImZ4dF8iLCJzZXRFbmFibGVkIjoiS3ZfIiwic2V0SW5lcnRpYSI6Im94dF8iLCJzdG9wSW5lcnRpYSI6IkN4dF8iLCJzZXRXaW5kb3dFdmVudHNFbmFibGVkIjoicHh0XyIsInNldFBhbm5pbmdUaHJlc2hvbGQiOiJteHRfIiwiZ2V0UGFubmluZ1RocmVzaG9sZCI6IkV4dF8ifX19");var eG=function(){let i=class t extends OS{};i=t([_s(null)],i);return i}();var AG=Ci(function(){var t;return class{constructor(t,i,s,e,A){this.jkt_=t;this.pkt_=i;this.yxt_=s;this.xmt_=e;this.TK_=A;this.xv_=!0}GFt_(){return this.jkt_}Dkt_(){return this.pkt_}Uw_(){return this.xmt_}K3_(){return this.yxt_}isEnabled(){return this.xv_&&this.yxt_.isEnabled()}Kv_(t){this.xv_=t;return this}Dxt_(){return this.TK_}Eu_(t){if(t instanceof FS){this.TK_.call(this,t);return t}const i=new FS(this.pkt_,t);this.TK_.call(this,i);return i}off(){this.jkt_.unsubscribe(this);return this}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb21wb3NpdGVUb29sIjoiR0Z0XyIsImdldEV2ZW50TmFtZSI6IkRrdF8iLCJnZXRPYmplY3QiOiJVd18iLCJnZXRUb29sIjoiSzNfIiwic2V0RW5hYmxlZCI6Ikt2XyIsImV4ZWN1dGUiOiJFdV8ifX19");const nG=function(t,i){const s=[];let e=null;for(let A=0;A<t.length;A++){e=t[A];if(e.dn_()===i||e.dn_().replace(/-/g,"")===i.replace(/-/g,""))return e;e instanceof oG&&s.push(e)}for(let t=0;t<s.length;t++){e=s[t].C5_(i);if(e!=null)return e}return null},hG=function(t,i){const s=[];let e=null;for(let A=0;A<t.length;A++){e=t[A];if(e instanceof i)return e;e instanceof oG&&s.push(e)}if(s.length>0)for(let t=0;t<s.length;t++){e=s[t].d5_(i);if(e!=null)return e}return null},rG=function(t,i,s){let e=null,A="";for(let n=0;n<t.length;n++){e=t[n];A=e.dn_();if(A.length===0&&e instanceof oG){const t=e.Mxt_(i,s);if(t!=null)return t}if(A===i[s]){if(s===i.length-1)return e;if(e instanceof oG)return e.Mxt_(i,s+1)}}return null};var oG=Ci(function(){var i;let s=i=class t extends OS{constructor(t){const i=undefined;super(typeof t=="object"?t:{name:t});this.vxt_={};this.bxt_={};this.Nxt_=!1;this.E8_=null;this.Sxt_=[]}getPlot(){return this.E8_}lFt_(t){if(this.E8_!==t){this.E8_=t;for(const i in this.Sxt_)this.Sxt_.hasOwnProperty(i)&&this.Sxt_[i].lFt_(t)}return super.lFt_(t)}dispose(){if(!this.Df_()){this.lFt_(null);for(let t=this.Sxt_.length-1;t>=0;--t)this.Sxt_[t]&&this.Sxt_[t].dispose();super.dispose()}}Mxt_(t,i){return i>=t.length?null:rG(this.Sxt_,t,i)}C5_(t){let i=nG(this.Sxt_,t);if(i==null){const s=t.split(".");s.length>0&&s[0]===this.dn_()&&(i=this.Mxt_(s,1))}return i}d5_(t){return hG(this.Sxt_,t)}B5_(){return this.Gxt_(this.dn_(),[])}Gxt_(t,s){for(let e=0;e<this.Sxt_.length;e++){const A=this.Sxt_[e];let n=A.dn_();if(A instanceof i){n=n.length===0?t:t.length===0?n:t+"."+n;A.Gxt_(n,s)}else s.push(t.length>0?t+"."+n:n)}return s}Rxt_(){return this.kxt_([])}kxt_(t){let s;for(let e=0;e<this.Sxt_.length;e++){s=this.Sxt_[e];s instanceof i?s.kxt_(t):t.push(s)}return t}Fxt_(t){return this.Sxt_.indexOf(t)}zT_(t){if(t===!0){this.Sxt_.forEach((t=>{t.detach(this)}));this.Sxt_.forEach((t=>{t.attach(this)}))}const s=this.rFt_();s instanceof i&&s.zT_(!0);this.notify(xS.sDt_,this);return this}g1_(t,i){this.Sxt_.forEach((t=>{t.detach(this)}));const s=Array.isArray(i)?[t,0].concat(i):[t,0,i];Array.prototype.splice.apply(this.Sxt_,s);this.Nxt_=!1;this.Sxt_.forEach((t=>{t.lFt_(this.E8_);t.attach(this)}));this.Nxt_&&this.zT_();return this}add(t){if(t==null)return this;const i=Array.isArray(t)?t:[t];this.Nxt_=!1;for(let t=0;t<i.length;++t)if(i[t]!=null){this.Sxt_.push(i[t]);i[t].lFt_(this.E8_);i[t].attach(this)}this.Nxt_&&this.zT_();return this}remove(t){const i=Array.isArray(t)?t:[t];for(let t=0;t<i.length;++t){const s=this.Sxt_.indexOf(i[t]);if(s!==-1){this.Sxt_.splice(s,1);i[t].detach(this);i[t].lFt_(null)}}return this}subscribe(t,i,s,e){this.bxt_[t]==null&&(this.bxt_[t]=[]);if(this.bxt_[t].length===0){this.Nxt_=!0;this.attachEvent(t)}const A=new AG(this,t,i,s,e);this.bxt_[t].push(A);return A}unsubscribe(t){if(t==null||!(t instanceof AG)){ki("A wrong handler is in AbstractCompositeTool.prototype.off");return this}const i=this.bxt_[t.Dkt_()];if(i==null)return this;const s=i.indexOf(t);s!==-1&&i.splice(s,1);i.length===0&&this.detachEvent(t.Dkt_());return this}detachEvent(t){this.vxt_[t]=null;return this}attachEvent(t){if(this.vxt_[t]!=null)return this;const i=i=>this.dispatchEvent(t,i);this.vxt_[t]=i;return this}xxt_(){return this.vxt_}dispatchEvent(t,s){if(!this.isEnabled())return!1;const e=s.Hkt_()?s.Hkt_().length:0,A=this.bxt_[t];if(A==null)return!1;let n=!1;const h=OS.EFt_(s.getPlot());for(let t=0;t<A.length;++t){const r=A[t],o=r.K3_();if(o.FFt_(e)&&((o instanceof i||h==null||o===h)&&r.isEnabled())){const t=r.Eu_(s);if(t.qE_())return t.Ukt_();n=t.Ukt_()}}return n}FFt_(t){return!0}};s=i=t([_s("geotoolkit.controls.tools.AbstractCompositeTool")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUb29sQnlOYW1lIjoiQzVfIiwiZ2V0VG9vbEJ5VHlwZSI6ImQ1XyIsImxpc3RUb29sc05hbWVzIjoiQjVfIiwiZ2V0VG9vbEluZGV4IjoiRnh0XyIsImluc2VydCI6ImcxXyJ9fX0g");var lG=Ci(function(){let i=class t extends oG{constructor(t,i){const s=qi(t,{name:i||"",node:t instanceof Ic?t:null},!0);super(s);this.Lxt_={};this.JP_=s["node"];this.Uxt_=null}dispose(){this.JP_=null;this.Uxt_=null;super.dispose()}PP_(){return this.JP_}xkt_(t){this.JP_=t;return this}Yxt_(t){const i=new WS(t),s=t.kkt_();if(this.JP_!=null&&t.getPlot()!=null&&(t.Lkt_()==null||s===t.getPlot().r3_())){let i=t.Tkt_();if(i){const s=this.bFt_(this.JP_,t),e=this.JP_!=null&&this.JP_.ot_!=null?this.JP_.ot_():null;if(e==null)return;const A=s.getX(),n=s.getY();i=e.contains(A,n)}if(!i){if(this.Uxt_!=null){this.dispatchEvent("cg-leave",new WS(t,"cg-leave"));this.Uxt_=null}return}if(this.Uxt_==null){t.Dkt_()!=="cg-enter"&&this.dispatchEvent("cg-enter",new WS(t,"cg-enter"));this.Uxt_=this.JP_}}this.dispatchEvent(t.Dkt_(),i)}detach(t){t===this.rFt_()&&this.SFt_(null);if(!this.isEnabled())return this;for(const i in this.bxt_)if(this.bxt_[i]!=null)for(const i in this.Lxt_){const s=this.Lxt_[i];for(let i=0;i<s.length;i++)s[i]&&t.unsubscribe(s[i])}return this}attach(t){this.SFt_(t);if(!this.isEnabled())return this;for(const i in this.bxt_)if(this.bxt_[i]!=null){this.Lxt_[i]==null&&(this.Lxt_[i]=[]);this.Lxt_[i].push(t.subscribe(i,this,this,this.Yxt_.bind(this)))}return this}};i=t([_s("geotoolkit.controls.tools.CompositeTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROb2RlIjoiUFBfIiwic2V0Tm9kZSI6InhrdF8ifX19");var uG=Ci({Txt_:"onActivate",Kxt_:"onScroll",Hxt_:"onScale",qxt_:"onScrollEnd",Jxt_:"onScaleEnd",Pxt_:"onRangeChanged"},2,"eyJvbkFjdGl2YXRlIjoiVHh0XyIsIm9uU2Nyb2xsIjoiS3h0XyIsIm9uU2NhbGUiOiJIeHRfIiwib25TY3JvbGxFbmQiOiJxeHRfIiwib25TY2FsZUVuZCI6Ikp4dF8iLCJvblJhbmdlQ2hhbmdlZCI6IlB4dF8ifSAg"),aG=function(){var t=class{constructor(t,i){this.from=t;this.to=i}OA_(){return this.from}WA_(){return this.to}transform(t){if(t!=null){t.transformPoint(this.to,this.to);t.transformPoint(this.from,this.from)}return this}getLength(){return lA.Ss_(this.from,this.to)}Le_(t,i){const s=this.getLength(),e=t===this.to?this.from:this.to,A=t===this.to?this.to:this.from,n=i*((A.x-e.x)/s)+A.x,h=i*((A.y-e.y)/s)+A.y;t===this.from?this.from.vs_(n,h):this.to.vs_(n,h);return this}};return t}();const gG=100;var cG=Ci(function(){var i;let s=i=class t extends sI{constructor(t){super();this.cq_(new zB).aq_(!0);this.Vxt_=t&&t["transparency"]||1;this.Oxt_=t&&t["size"]||15;t["backgroundfillstyle"]!==void 0&&this.iQ_(t["backgroundfillstyle"]);t["floating"]!==void 0&&this.Wxt_(t["floating"]);const i={wheel:this.jFt_.bind(this),pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.zxt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Xxt_.bind(this),object:Mi.document,enabled:!1}],dblclick:[{callback:this.WFt_.bind(this),object:null}],"cg-leave":this.jxt_.bind(this)};this.yxt_=new eG(i,t["name"]);this.Zxt_=new lG(this);this.Zxt_.add(this.yxt_);this._xt_=function(t,i,s){this.notify(t,this,s)}.bind(this);this.yxt_.on(uG.Txt_,this._xt_);this.yxt_.on(uG.Kxt_,this._xt_);this.yxt_.on(uG.Hxt_,this._xt_);this.yxt_.on(uG.qxt_,this._xt_);this.yxt_.on(uG.Jxt_,this._xt_);this.yxt_.on(uG.Pxt_,this._xt_);this.$xt_=null;this.sFt_=5;this.iFt_=2;this.tLt_=new Bh({attributename:"transparency",function:function(t,i,s,e,A){const n=undefined;return s<s+e?s+e:s+e*i/A},begin:"auto",duration:500})}dispose(){if(this.Zxt_!=null){this.yxt_.dispose();this.Zxt_.dispose();this.yxt_=null;this.Zxt_=null}super.dispose()}pxt_(t){this.yxt_.pFt_("pointermove",t,Mi);this.yxt_.pFt_("pointerup",t,Mi.document)}jxt_(t){if(this.yxt_.isActive()===!1&&this.iLt_()!==1&&this.wgt_!=null){this.sLt_();this.wgt_=null}}WFt_(t){const i=this.yxt_.dFt_(t),s=t.Fkt_(),e=i?this.sFt_:this.iFt_;this.$Y_().Le_(e,e).contains(s)===!0&&t.stopPropagation()}Xxt_(t){this.eLt_()&&this.sLt_()}K3_(){return this.yxt_}isActive(){return this.yxt_.isActive()}stop(){this.yxt_.stop();OS.unlock(this.yxt_);return this}start(t){this.yxt_.start(t);OS.lock(t.getPlot(),this.yxt_);return this}bFt_(t,i){return this.yxt_.bFt_(t,i)}addListener(t,i){ki("AbstractScroll.addListener() is deprecated since 4.0, use scrollBar.on(event, function (event, sender, eventArgs) {}) instead");const s=(t,s,e)=>{i.call(this,this,e)};super.on(t,s);return this}ALt_(t,i){return new aG(t,i)}sLt_(){this.IB_(this.tLt_);this.nLt_(0)}hLt_(){this.IB_(null)}render(t){if(t.tk_())super.render(t);else{if(this.Vxt_===0)return;let i;if(this.Vxt_<1){i=t.OR_();t.tN_(this.Vxt_)}super.render(t);this.Vxt_<1&&t.tN_(i)}}Wxt_(t){if(this.eLt_()===t)return this;t||this.hLt_();this.nLt_(t?.5:1);t&&this.sLt_();return this}eLt_(){return this.Vxt_!==1}iLt_(){return this.Vxt_}nLt_(t){if(this.Vxt_===t)return this;this.Vxt_=t;this.vn_().td_();return this}Lq_(t,s,e,A){if(this.Vxt_!==1&&A!==!1){const t=this.rLt_(),s=this.oLt_();if(t.Ws_(s,NA.Je_)){this.hLt_();this.nLt_(0)}else if(this.Vxt_!==i.lLt_||this.fB_()){this.hLt_();this.nLt_(i.lLt_);this.sLt_()}}return this}N_(){const t=super.N_();this.ct_()!=null&&(t["backgroundfillstyle"]=this.ct_());t["floating"]=this.eLt_();t["transparency"]=this.Vxt_;t["size"]=this.Oxt_;t["name"]=this.yxt_.dn_();return qi(t,this.JV_())}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["name"]!==void 0&&this.yxt_.HC_(t["name"]);t["backgroundfillstyle"]!==void 0&&this.iQ_(t["backgroundfillstyle"]);t["floating"]!==void 0&&this.Wxt_(t["floating"]);t["transparency"]!==void 0&&(this.Vxt_=t["transparency"]);t["size"]!==void 0&&(this.Oxt_=t["size"]);this.td_();this.setOptions(t);return this}setOptions(t){if((t=Es(t))==null)return this;t.hasOwnProperty("name")&&this.yxt_!=null&&this.yxt_.HC_(t["name"]);return this}JV_(){const t={};this.yxt_!=null&&(t["name"]=this.yxt_.dn_());return t}uLt_(){return this.Oxt_}aLt_(t){if(this.$xt_!=null&&t==null){clearInterval(this.$xt_);this.$xt_=null}}gLt_(t){this.$xt_==null&&(this.$xt_=Mi.setInterval(this.zFt_.bind(this),gG,t))}};s.prototype.rLt_=Zi;s.prototype.oLt_=Zi;s.prototype.zFt_=Zi;s.prototype.XFt_=Zi;s.prototype.jFt_=Zi;s.prototype.Ct_=Zi;s.prototype.zxt_=Zi;s.lLt_=.7;s=i=t([_s("geotoolkit.controls.tools.scroll.AbstractScroll")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRNb2RlbFJhbmdlIjoickx0XyIsImdldFZpc2libGVNb2RlbFJhbmdlIjoib0x0XyIsIm9uTW91c2VMZWF2ZSI6Imp4dF8iLCJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlV2hlZWwiOiJqRnRfIiwib25Nb3VzZVVwIjoiQ3RfIiwib25Eb3VibGVDbGljayI6IldGdF8iLCJvbldpbmRvd01vdXNlTW92ZSI6Inp4dF8iLCJvbldpbmRvd01vdXNlVXAiOiJYeHRfIiwiZ2V0VG9vbCI6IkszXyIsInBvaW50VG9Nb2RlbCI6ImJGdF8iLCJzZXRGbG9hdGluZ01vZGUiOiJXeHRfIiwiZ2V0RmxvYXRpbmdNb2RlIjoiZUx0XyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldE9wdGlvbnMiOiJKVl8iLCJnZXREZXNpcmVkU2l6ZSI6InVMdF8ifX19");var IG=Ci(function(){let i=class t extends WS{constructor(t,i){super(t);this.aZ_=i}ot_(){return this.aZ_}};i=t([_s("geotoolkit.controls.tools.scroll.ScrollEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRWaXNpYmxlTW9kZWxMaW1pdHMiOiJvdF8ifX19");const fG=new WeakMap,CG=function(t){let i=0,s=0;while(t){i+=parseInt(t.offsetTop);s+=parseInt(t.offsetLeft);t=t.offsetParent}return{top:i,left:s}},dG=function(t){const i=t.getBoundingClientRect(),s=Mi.document.body,e=Mi.document.documentElement,A=Mi.pageYOffset||e.scrollTop||s.scrollTop,n=e.clientTop||s.clientTop||0,h=Mi.pageXOffset||e.scrollLeft||s.scrollLeft,r=e.clientLeft||s.clientLeft||0,o=i.top+A-n,l=i.left+h-r;return{top:Math.round(o),left:Math.round(l)}};var BG=function(){let i=class t{static B$_(t){return t.getBoundingClientRect?dG(t):CG(t)}static Yb_(t,i,s){if(t==null||i==null)return t;let e=null;e=t.r3_!=null?[t.r3_()]:Array.isArray(t)?t:[t];e.forEach((function(t){if(t==null||t["style"]==null)return;fG.has(t)||fG.set(t,{});const e=fG.get(t);for(const A in i){let n=i[A];if(n!=null||e[A]!=null){e[A]=e[A]||[{QFt_:null,value:t["style"][A]}];for(let t=0;t<e[A].length;t++)if(e[A][t].QFt_===s){e[A].splice(t,1);break}if(n!=null)e[A].push({QFt_:s,value:n});else{const t=e[A].length;n=e[A][t-1].value;t<2&&(e[A]=null)}t["style"][A]!==n&&(t["style"][A]=n)}}}));return t}};i=t([_s("geotoolkit.controls.util.Helpers")],i);return i}();const wG=15,QG=new hl("transparent").qD_({x:!0,y:!0}),EG=new wr("#f1f1f1"),pG=new wr("#bcbcbc"),mG=new hl("#a8a8a8").qD_({x:!0,y:!0}),yG=new hl({color:"#4a4a4a",linejoin:Al.bD_}),DG=new mA(0,0,wG,wG),MG={agt_:"Move",cLt_:"ResizeBegin",ILt_:"ResizeEnd"};var vG=Ci(function(){let i=class t extends cG{constructor(t){const i=qi(t,{modellimits:t!=null&&t["modellimits"]instanceof mA?t["modellimits"]:new mA(0,0,1,1),visiblelimits:t!=null&&t["visiblelimits"]instanceof mA?t["visiblelimits"]:new mA(0,0,1,1),size:wG,name:"VerticalScroll",minimumcarretsize:20,rounded:!1,resizable:!1},!0);super(i);this.X1_=i["isvertical"];const s=i["size"];if(this.X1_){i["modellimits"]=i["modellimits"].clone().setX(0).de_(s);i["visiblelimits"]=i["visiblelimits"].clone().setX(0).de_(1)}else{i["modellimits"]=i["modellimits"].clone().setY(0).Be_(s);i["visiblelimits"]=i["visiblelimits"].clone().setY(0).Be_(1)}this.fLt_=i["minimumcarretsize"];this.CLt_=i["rounded"];this.HC_(i["name"]);const e=i["minscrollbutton"]==null||i["minscrollbutton"]["visible"]!==!1,A=i["maxscrollbutton"]==null||i["maxscrollbutton"]["visible"]!==!1;this.dLt_=new sI;this.BLt_=new Yu;this.wLt_=new sI;this.QLt_=new Yu;this.ELt_=new sI;this.pLt_=new sI;this.mLt_=new sI;this.yLt_=new Sc;this.DLt_=new dp;this.MLt_=new sI;this.vLt_=new sI;this.GY_([this.dLt_.HC_("scrollbar-button-min").qC_("scrollbar-button").nf_(e).aq_(!1).Lq_(DG).GY_([(new Sc).qC_("scrollbar-button-border").KC_(!1).rB_(QG.clone()).iQ_(EG.clone()),this.BLt_.qC_("scrollbar-button-icon").KC_(!0).rB_(yG.clone())]),this.wLt_.HC_("scrollbar-button-max").qC_("scrollbar-button").nf_(A).aq_(!1).Lq_(DG).GY_([(new Sc).qC_("scrollbar-button-border").KC_(!1).rB_(QG.clone()).iQ_(EG.clone()),this.QLt_.qC_("scrollbar-button-icon").KC_(!0).rB_(yG.clone())]),this.ELt_.Lq_(i["modellimits"]).GY_([(new Sc).KC_(!1).rB_(QG.clone()).iQ_(EG.clone()),this.pLt_.ht_(i["modellimits"].clone()).rB_("transparent"),this.mLt_.ht_(i["modellimits"].clone()).rB_("transparent"),this.MLt_.Lq_(i["modellimits"]).ht_(i["visiblelimits"]).GY_([this.yLt_.KC_(!1).rB_(mG.clone()).iQ_(pG.clone()).nf_(!this.CLt_),this.DLt_.KC_(!1).rB_(mG.clone()).iQ_(pG.clone()).nf_(this.CLt_)]),this.vLt_.nf_(!1).ht_(i["visiblelimits"]).GY_([(new Sc).rB_({color:"red"})])])]);this.bLt_=!1;this.OSt_=new bC;this.wgt_=null;this.uy_=new lA(0,0);this.NLt_=new lA(0,0);this.SLt_=null;this.GLt_=i["resizable"];this.d4_=MG.agt_;this.RLt_(wG).setSize(s)}_wt_(t){this.X1_?this.Eq_(t):this.pq_(t);return this}vn_(t,i){if(this.Bq_()===!0||ch.hd_()===!1)return this;super.vn_(t,i);if(this.ELt_==null)return this;i!==oh.wC_&&i!==oh.EC_||this.kLt_();return this}RLt_(t){const i=3,s=t-i-1,e=(s+i)/2;this.BLt_.clear();this.QLt_.clear();if(this.X1_){this.BLt_.moveTo(i,9).lineTo(e,5).lineTo(s,9);this.QLt_.moveTo(i,4).lineTo(e,8).lineTo(s,4)}else{this.BLt_.moveTo(9,i).lineTo(5,e).lineTo(9,s);this.QLt_.moveTo(4,i).lineTo(8,e).lineTo(4,s)}return this}setSize(t){if(t==null||t===this.fk_)return this;this.fk_=t;if(this.X1_){this.ft_({width:t});this.ELt_.ft_({top:t,left:0,right:0,bottom:t});this.dLt_.ft_({top:0,left:0,right:0,height:t});this.wLt_.ft_({height:t,left:0,right:0,bottom:0})}else{this.ft_({height:t});this.ELt_.ft_({left:t,top:0,bottom:0,right:t});this.dLt_.ft_({top:0,left:0,bottom:0,width:t});this.wLt_.ft_({width:t,top:0,right:0,bottom:0})}return this}scrollTo(t,i){const s=this.ELt_.rt_();if(this.X1_){t.Ee_()<s.Ee_()&&t.setY(s.getY());t.pe_()>s.pe_()&&t.setY(s.pe_()-t.Ts_())}else{t.we_()<s.we_()&&t.setX(s.getX());t.Qe_()>s.Qe_()&&t.setX(s.Qe_()-t.Ie_())}this.notify(uG.Txt_,this,new IG(i,null));this.notify(uG.Kxt_,this,new IG(i,t));this.notify(uG.qxt_,this,new IG(i,t));this.Lq_(s,t)}rLt_(){return this.X1_?new fA(this.ELt_.rt_().Ee_(),this.ELt_.rt_().pe_()):new fA(this.ELt_.rt_().we_(),this.ELt_.rt_().Qe_())}oLt_(){return this.X1_?new fA(this.vLt_.getBounds().Ee_(),this.vLt_.getBounds().pe_()):new fA(this.vLt_.getBounds().we_(),this.vLt_.getBounds().Qe_())}kLt_(){const t=bn.jc_(this.MLt_.getBounds().Ie_(),0,this.ELt_.if_()),i=bn.jc_(0,this.MLt_.getBounds().Ts_(),this.ELt_.if_()),s=this.MLt_.rt_().clone().de_(t).Be_(i);this.MLt_.Lq_(s);let e;if(this.X1_){this.DLt_.OX_(t/2);e=bn.$c_(1,0,this.DLt_.if_());this.DLt_.ht_(this.MLt_.rt_().clone().de_(this.MLt_.rt_().Ie_()-e-e).setX(this.MLt_.rt_().getX()+e))}else{this.DLt_.OX_(i/2);e=bn.$c_(0,1,this.DLt_.if_());this.DLt_.ht_(this.MLt_.rt_().clone().Be_(this.MLt_.rt_().Ts_()-e-e).setY(this.MLt_.rt_().getY()+e))}}Lq_(t,i,s,e){if(i==null)return this;s!=null&&this._wt_(s);if(this.X1_){t=t.clone().setX(0).de_(1);i=i.clone().setX(0).de_(1)}else{t=t.clone().setY(0).Be_(1);i=i.clone().setY(0).Be_(1)}if(this.ELt_.rt_().Ce_(t)&&this.MLt_.getBounds().Ce_(i))return this;if(this.Bq_()===!0||ch.hd_()===!1){this.ELt_.Ad_();this.MLt_.Ad_()}this.ELt_.Lq_(t);if(this.X1_){this.pLt_.ht_(t.clone().Be_(i.Ee_()-t.Ee_()));this.mLt_.ht_(t.clone().setY(i.pe_()).Be_(t.pe_()-i.pe_()))}else{this.pLt_.ht_(t.clone().de_(i.we_()-t.we_()));this.mLt_.ht_(t.clone().setX(i.Qe_()).de_(t.Qe_()-i.Qe_()))}this.MLt_.ht_(i);this.MLt_.Lq_(t);this.MLt_.nf_(this.GLt_||(this.X1_?NA.equals(t.Ts_(),i.Ts_())===!1:NA.equals(t.Ie_(),i.Ie_())===!1));this.vLt_.ht_(i);const A=this.ALt_(this.MLt_.getBounds().Ye_(dA.ie_),this.MLt_.getBounds().Ye_(this.X1_?dA.se_:dA.ee_)).transform(this.ELt_.if_()),n=A.getLength();if(n>0&&n<this.fLt_){let s,e,h;if(this.X1_){s=Math.abs(i.De_()-t.De_())/(t.Ts_()*.5);e=(this.fLt_-n)/2-(this.fLt_-n)/2*s;i.De_()<t.De_()?A.Le_(A.WA_(),this.fLt_-e-A.getLength()).Le_(A.OA_(),e):A.Le_(A.OA_(),this.fLt_-e-A.getLength()).Le_(A.WA_(),e);A.transform(this.ELt_.if_().rI_());h=this.MLt_.getBounds().clone().setY(A.OA_().getY()).Be_(A.getLength())}else{s=Math.abs(i.ye_()-t.ye_())/(t.Ie_()*.5);e=(this.fLt_-n)/2-(this.fLt_-n)/2*s;i.ye_()<t.ye_()?A.Le_(A.WA_(),this.fLt_-e-A.getLength()).Le_(A.OA_(),e):A.Le_(A.OA_(),this.fLt_-e-A.getLength()).Le_(A.WA_(),e);A.transform(this.ELt_.if_().rI_());h=this.MLt_.getBounds().clone().setX(A.OA_().getX()).de_(A.getLength())}this.MLt_.ht_(h)}this.kLt_();super.Lq_(t,i,s,e);return this}FLt_(t,i){const s=t.Fkt_();i.vs_(s.x,s.y);return this.ELt_.if_().uI_(i,i)}xLt_(t,i){const s=t.Fkt_(),e=undefined,A=OS.dFt_(t)?this.sFt_:this.iFt_;if(this.$Y_().Le_(A,A).contains(s)===!1)return null;const n=undefined;return this.OSt_.select(this.getRoot(),s.x,s.y,2).filter(Ih).filter((t=>t===this.dLt_||t===this.wLt_||t===this.MLt_||t===this.pLt_||t===this.mLt_||t===this.MLt_.getParent())).reverse()[0]}jxt_(t){super.jxt_(t);BG.Yb_(t.getPlot(),{cursor:null},this)}XFt_(t){const i=this.xLt_(t,!0);this.aLt_(i);if(!this.Df_())if(this.isActive()&&this.wgt_!=null){if(this.bLt_===!1){this.notify(uG.Txt_,this,new IG(t,null));this.bLt_=!0}t.stopPropagation(!0,!1)}else{let s=null;if(i===this.MLt_){s="move";this.d4_=MG.agt_;const i=t.Fkt_(),e=this.MLt_.$Y_();if(this.GLt_){const t=this.DLt_.WX_();if(this.X1_){if(Math.abs(i.y-e.Ee_())<t){s="ns-resize";this.d4_=MG.cLt_}else if(Math.abs(i.y-e.pe_())<t){s="ns-resize";this.d4_=MG.ILt_}}else if(Math.abs(i.x-e.we_())<t){s="ew-resize";this.d4_=MG.cLt_}else if(Math.abs(i.x-e.Qe_())<t){s="ew-resize";this.d4_=MG.ILt_}}}BG.Yb_(t.getPlot(),{cursor:s},this);if(this.iLt_()===1)return;if(i==null){this.wgt_!=null&&this.sLt_();this.wgt_=null}else{BG.Yb_(t.getPlot(),{cursor:null},this);const s=this.rLt_(),e=this.oLt_();if(s.Ws_(e)===!1){this.wgt_=i;this.hLt_();this.nLt_(cG.lLt_);t.stopPropagation(!0,!0)}}}}Xxt_(t){if(!this.Df_()){this.xLt_(t,!0)==null&&super.Xxt_(t);this.Ct_(t)}}zFt_(t){if(this.Df_())return;if(this.ELt_.rt_().Ce_(this.vLt_.getBounds()))return;const i=this.xLt_(t,!0);if(i==null)return;i!==this.MLt_&&this.gLt_(t);this.pxt_(!0);t.stopPropagation(t.Dkt_()==="touchstart");this.SLt_=this.vLt_.getBounds().clone();const s=this.SLt_.clone();if(i!==this.pLt_&&i!==this.mLt_)if(i!==this.dLt_&&i!==this.wLt_){this.wgt_=i;this.hLt_();this.start(t);this.bLt_=!1;this.uy_=this.FLt_(t,this.uy_)}else{i===this.dLt_?this.X1_?s.setY(s.getY()-s.Ts_()/10):s.setX(s.getX()-s.Ie_()/10):this.X1_?s.setY(s.getY()+s.Ts_()/10):s.setX(s.getX()+s.Ie_()/10);this.scrollTo(s,t)}else{let e;if(this.X1_){e=s.Ts_()/5;i===this.pLt_?s.setY(s.getY()-e):i===this.mLt_&&s.setY(s.getY()+e)}else{e=s.Ie_()/5;i===this.pLt_?s.setX(s.getX()-e):i===this.mLt_&&s.setX(s.getX()+e)}this.scrollTo(s,t)}}zxt_(t){if(!this.Df_()&&this.isActive()&&this.wgt_!=null){const i=t.Lkt_();i.stopPropagation();i.preventDefault();const s=this.ELt_.rt_(),e=this.SLt_.clone();this.NLt_=this.FLt_(t,this.NLt_);if(this.wgt_===this.MLt_){if(this.X1_)if(this.d4_===MG.agt_){e.setY(e.getY()-(this.uy_.getY()-this.NLt_.getY()));e.Ee_()<s.Ee_()&&e.setY(s.getY());e.pe_()>s.pe_()&&e.setY(s.pe_()-e.Ts_())}else{let t,i,A,n;if(this.d4_===MG.cLt_){t=this.NLt_.getY();i=e.pe_()}else{t=e.Ee_();i=this.NLt_.getY()}if(t>i){A=Math.max(i,s.getY());n=Math.min(t,s.pe_())}else{A=Math.max(t,s.getY());n=Math.min(i,s.pe_())}e.setY(A);e.Be_(n-A)}else if(this.d4_===MG.agt_){e.setX(e.getX()-(this.uy_.getX()-this.NLt_.getX()));e.we_()<s.we_()&&e.setX(s.getX());e.Qe_()>s.Qe_()&&e.setX(s.Qe_()-e.Ie_())}else{let t,i,A,n;if(this.d4_===MG.cLt_){t=this.NLt_.getX();i=e.Qe_()}else{t=e.we_();i=this.NLt_.getX()}if(t>i){A=Math.max(i,s.getX());n=Math.min(t,s.Qe_())}else{A=Math.max(t,s.getX());n=Math.min(i,s.Qe_())}e.setX(A);e.de_(n-A)}this.notify(uG.Kxt_,this,new IG(t,e))}}}Ct_(t){this.aLt_(null);if(this.Df_())return;this.isActive()&&t!=null&&t.stopPropagation(!0,!1);this.bLt_=!1;this.pxt_(!1);const i=this.ELt_.rt_(),s=this.SLt_.clone();if(this.X1_){s.Ee_()<i.Ee_()&&s.setY(i.getY());s.pe_()>i.pe_()&&s.setY(i.pe_()-s.Ts_())}else{s.we_()<i.we_()&&s.setX(i.getX());s.Qe_()>i.Qe_()&&s.setX(i.Qe_()-s.Ie_())}this.stop();this.NLt_=this.bFt_(this.ELt_,t);if(this.wgt_!=null){if(this.wgt_===this.MLt_){if(this.X1_)if(this.d4_===MG.agt_){s.setY(s.getY()-(this.uy_.getY()-this.NLt_.getY()));s.Ee_()<i.Ee_()&&s.setY(i.getY());s.pe_()>i.pe_()&&s.setY(i.pe_()-s.Ts_())}else{let t,e,A,n;if(this.d4_===MG.cLt_){t=this.NLt_.getY();e=s.pe_()}else{t=s.Ee_();e=this.NLt_.getY()}if(t>e){A=Math.max(e,i.getY());n=Math.min(t,i.pe_())}else{A=Math.max(t,i.getY());n=Math.min(e,i.pe_())}s.setY(A);s.Be_(n-A)}else if(this.d4_===MG.agt_){s.setX(s.getX()-(this.uy_.getX()-this.NLt_.getX()));s.we_()<i.we_()&&s.setX(i.getX());s.Qe_()>i.Qe_()&&s.setX(i.Qe_()-s.Ie_())}else{let t,e,A,n;if(this.d4_===MG.cLt_){t=this.NLt_.getX();e=s.Qe_()}else{t=s.we_();e=this.NLt_.getX()}if(t>e){A=Math.max(e,i.getX());n=Math.min(t,i.Qe_())}else{A=Math.max(t,i.getX());n=Math.min(e,i.Qe_())}s.setX(A);s.de_(n-A)}this.notify(uG.qxt_,this,new IG(t,s))}this.wgt_=null}this.SLt_=null}jFt_(t){const i=undefined;if(this.xLt_(t,!0)==null)return;const s=t.Lkt_();s.preventDefault();t.stopPropagation();const e=this.vLt_.getBounds().clone();s["deltaY"]>0?this.X1_?e.setY(e.getY()+e.Ts_()/10):e.setX(e.getX()+e.Ie_()/10):this.X1_?e.setY(e.getY()-e.Ts_()/10):e.setX(e.getX()-e.Ie_()/10);const A=this.yxt_.isActive();this.yxt_.setActive(!0);this.scrollTo(e,t);this.yxt_.setActive(A)}JV_(){const t=super.JV_();t["size"]=this.fk_;t["minimumcarretsize"]=this.fLt_;t["rounded"]=this.CLt_;t["borderlinestyle"]=this.dLt_.HY_(0).gt_();t["linestyle"]=this.ELt_.HY_(0).gt_();t["fillstyle"]=this.ELt_.HY_(0).ct_();t["caretfillstyle"]=this.MLt_.HY_(0).ct_();t["caretlinestyle"]=this.MLt_.HY_(0).gt_();t["arrowlinestyle"]=this.dLt_.HY_(1).gt_();t["resizable"]=this.GLt_;return t}setOptions(t){if((t=Es(t))==null)return this;super.setOptions(t);t["size"]!==void 0&&this.setSize(t["size"]);if(t["minscrollbutton"]!==void 0){const i=t["minscrollbutton"];i["visible"]!==void 0&&this.dLt_.nf_(i["visible"]);this.ELt_.ft_(this.X1_?{top:this.dLt_.$C_()?this.fk_:0}:{left:this.dLt_.$C_()?this.fk_:0})}if(t["maxscrollbutton"]!==void 0){const i=t["maxscrollbutton"];i["visible"]!==void 0&&this.wLt_.nf_(i["visible"]);this.ELt_.ft_(this.X1_?{bottom:this.wLt_.$C_()?this.fk_:0}:{right:this.wLt_.$C_()?this.fk_:0})}t["minimumcarretsize"]!==void 0&&(this.fLt_=t["minimumcarretsize"]);if(t["rounded"]!==void 0){this.CLt_=t["rounded"];this.yLt_.nf_(this.CLt_===!1);this.DLt_.nf_(this.CLt_===!0)}if(t["borderlinestyle"]!==void 0){const i=hl.Wi_(t["borderlinestyle"]);this.dLt_.HY_(0).rB_(i);this.wLt_.HY_(0).rB_(i)}if(t["fillstyle"]!==void 0){const i=il.BD_(t["fillstyle"]);this.ELt_.HY_(0).iQ_(i);this.dLt_.HY_(0).iQ_(i);this.wLt_.HY_(0).iQ_(i)}if(t["linestyle"]!==void 0){const i=hl.Wi_(t["linestyle"]);this.ELt_.HY_(0).rB_(i);this.dLt_.HY_(0).rB_(i);this.wLt_.HY_(0).rB_(i)}if(t["caretfillstyle"]!==void 0){const i=il.BD_(t["caretfillstyle"]);this.yLt_.iQ_(i);this.DLt_.iQ_(i)}if(t["caretlinestyle"]!==void 0){const i=hl.Wi_(t["caretlinestyle"]);this.yLt_.rB_(i);this.DLt_.rB_(i)}if(t["arrowlinestyle"]!==void 0){const i=hl.Wi_(t["arrowlinestyle"]);this.dLt_.HY_(1).rB_(i);this.wLt_.HY_(1).rB_(i)}t["resizable"]!==void 0&&(this.GLt_=t["resizable"]);this.DG_();this.td_();return this}};i=t([_s("geotoolkit.controls.tools.scroll.HVBaseScroll")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRGbGlwIjoiX3d0XyIsInVwZGF0ZVN0YXRlIjoidm5fIiwiZ2V0TW9kZWxSYW5nZSI6InJMdF8iLCJnZXRWaXNpYmxlTW9kZWxSYW5nZSI6Im9MdF8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsIm9uTW91c2VMZWF2ZSI6Imp4dF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbldpbmRvd01vdXNlVXAiOiJYeHRfIiwib25Nb3VzZURvd24iOiJ6RnRfIiwib25XaW5kb3dNb3VzZU1vdmUiOiJ6eHRfIiwib25Nb3VzZVVwIjoiQ3RfIiwib25Nb3VzZVdoZWVsIjoiakZ0XyIsImdldE9wdGlvbnMiOiJKVl8ifX19");var bG=function(){let i=class t extends vG{constructor(t){const i=undefined;super(qi(t,{name:"HorizontalScroll",isVertical:!1}))}};i=t([_s("geotoolkit.controls.tools.scroll.HorizontalScroll")],i);return i}();var NG=function(){let i=class t extends vG{constructor(t){const i=undefined;super(qi(t,{name:"VerticalScroll",isVertical:!0}))}};i=t([_s("geotoolkit.controls.tools.scroll.VerticalScroll")],i);return i}();let SG=null;const GG={};var RG=function(){var i;let s=i=class t{static Ai_(){SG=SG||new i;return SG}LLt_(t,i){GG[i]=t}ULt_(t,i){const s=GG[i];return s==null?{options:t,type:i}:s(t)}};s=i=t([_s("geotoolkit.controls.tools.scroll.ScrollBarConverter")],s);return s}();var kG=Ci(function(){let i=class t extends sI{constructor(t,i){super(i=qi(i||t,{anchorpoint:t instanceof lA?t:null,linestyle:new hl("gray").qD_({x:!0,y:!0}),fillstyle:new wr("white"),centerlinestyle:new hl("gray").qD_({x:!0,y:!0}),shadowlinestyle:new hl("lightgray").qD_({x:!0,y:!0})},!0));this.abt_=i["anchorpoint"];const s=8,e=14;this.YLt_=new mA(0,0,s,e);this.TLt_=new mA(0,0,s,e);this.KLt_=(new Yu).moveTo(2,0).lineTo(s-2,0).lineTo(s,2).lineTo(s,e-2).lineTo(s-2,e).lineTo(2,e).lineTo(0,e-2).lineTo(0,2).lineTo(2,0).close().KC_(!1);this.HLt_=(new Yu).moveTo(3,3).lineTo(3,e-3).moveTo(5,3).lineTo(5,e-3);this.qLt_=(new Yu).moveTo(2,e-1).lineTo(s-2,e-1).moveTo(s-1,e-2).lineTo(s-1,2);this.GY_([this.KLt_,this.HLt_,this.qLt_]);this.dt_(i)}gR_(t,i){this.abt_.vs_(t,i);this.vn_();return this}lR_(){return this.abt_}getBounds(){if(this.getParent()==null)return null;const t=undefined;this.getParent().if_().uI_(this.YLt_,this.TLt_);return this.TLt_.me_(this.abt_.getX(),this.abt_.getY())}rt_(){return this.YLt_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["anchorpoint"]!==void 0&&this.gR_(t["anchorpoint"].getX(),t["anchorpoint"].getY());t["linestyle"]!==void 0&&this.KLt_.rB_(t["linestyle"],!(t["linestyle"]instanceof hl));t["fillstyle"]!==void 0&&this.KLt_.iQ_(t["fillstyle"],!(t["fillstyle"]instanceof wr));t["centerlinestyle"]!==void 0&&this.HLt_.rB_(t["centerlinestyle"],!(t["centerlinestyle"]instanceof hl));t["shadowlinestyle"]!==void 0&&this.qLt_.rB_(t["shadowlinestyle"],!(t["shadowlinestyle"]instanceof hl));return this}N_(){const t=super.N_();t["anchorpoint"]=this.lR_();t["linestyle"]=this.KLt_.gt_();t["fillstyle"]=this.KLt_.ct_();t["centerlinestyle"]=this.HLt_.gt_();t["shadowlinestyle"]=this.qLt_.gt_();return t}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0TW9kZWxMaW1pdHMiOiJydF8ifX19");var FG=Ci(function(){let i=class t extends cG{constructor(t,i,s,e,A){const n=qi(t,{name:A!=null?A:"AdvancedScroll",modellimits:t instanceof mA?t:null,visiblelimits:i,tickgenerator:s,axis:e},!0);super(n);this.bLt_=!1;this.SLt_=null;t=n["modellimits"];i=n["visiblelimits"];e=n["axis"];const h=t,r=h.clone().setY(0).setX(15).de_(h.Ie_()-30).Be_(h.Ts_()-15),o=h.clone().setX(0).setY(h.Ts_()-15).Be_(15),l=o.clone().setY(0).setX(15).de_(h.Ie_()-30);e==null&&(e=new nd(n["tickgenerator"]!=null?n["tickgenerator"]:new JC).setOrientation("horizontal").LE_("bottom").PZ_(null));this.Fwt_=e;const u={axislinestyle:new hl("#6b6b6b").qD_({x:!0,y:!0}),borderlinestyle:new hl("transparent").qD_({x:!0,y:!0}),buttonborderlinestyle:new hl("transparent").qD_({x:!0,y:!0}),buttonbackgroundfillstyle:new Fo({startcolor:"#fafafa",endcolor:"#cdcdcd",startpoint:new lA(0,0),endpoint:new lA(0,1)}),topbackgroundfillstyle:new wr("#f1f1ff"),backgroundfillstyle:new Fo({startcolor:"#cdcdcd",endcolor:"#f1f1f1",startpoint:new lA(0,0),endpoint:new lA(0,1)}),toplinelinestyle:new hl("#e1e1ff").qD_({x:!0,y:!0}),caretfillstyle:new Fo({startcolor:"#cdcdcd",endcolor:"#a0a0a0",startpoint:new lA(0,0),endpoint:new lA(0,1)}),caretlinestyle:new hl("#a8a8a8").qD_({x:!0,y:!0}),arrowlinestyle:new hl({color:"#4a4a4a",linejoin:Al.bD_}).qD_({x:!0,y:!0}),handle:{linestyle:new hl("gray").qD_({x:!0,y:!0}),fillstyle:new wr("white"),centerlinestyle:new hl("gray").qD_({x:!0,y:!0}),shadowlinestyle:new hl("lightgray").qD_({x:!0,y:!0})}},a=15,g=4/15*a,c=a-g-1/15*a,I=c-g+1/15*a;this.JLt_=new sI;this.PLt_=new sI;this.VLt_=new sI;this.OLt_=(new TQ).JC_("AXIS_MODEL");this.WLt_=new sI;this.zLt_=new kG(new lA(i.we_(),t.De_())).nf_(!1);this.XLt_=new kG(new lA(i.Qe_(),t.De_())).nf_(!1);this.jLt_=new sI;this.ZLt_=new sI;this.MLt_=new sI;this._Lt_=new sI;this.GY_([this.JLt_.ht_(r).Lq_(t).GY_([(new Sc).rB_(u["axislinestyle"]).KC_(!1).GT_({top:!1,left:!0,right:!0,bottom:!1}),this.PLt_.ht_(t.clone().de_(i.we_()-t.we_())).Lq_(new mA(0,0,1,1)).GY_((new Sc).rB_(u["toplinelinestyle"]).iQ_(u["topbackgroundfillstyle"])),this.VLt_.ht_(t.clone().de_(t.Qe_()-i.Qe_()).setX(i.Qe_())).Lq_(new mA(0,0,1,1)).GY_((new Sc).rB_(u["toplinelinestyle"]).iQ_(u["topbackgroundfillstyle"])),this.OLt_,this.Fwt_,this.WLt_.ht_(i).Lq_(i).GY_((new Sc).rB_(u["borderlinestyle"]).KC_(!1)),this.zLt_,this.XLt_]),this.$Lt_=(new sI).ht_(o).aq_(!0).GY_([this.jLt_.ht_(new mA(0,0,15,o.Ts_())).Lq_(new mA(0,0,15,o.Ts_())).GY_([(new Sc).rB_(u["buttonborderlinestyle"]).iQ_(u["buttonbackgroundfillstyle"]).KC_(!1),(new Yu).moveTo(8/15*a,g).lineTo(1/3*a,I).lineTo(8/15*a,c).KC_(!1).rB_(u["arrowlinestyle"])]),this.ZLt_.ht_(l).Lq_(t).GY_([(new Sc).rB_(u["borderlinestyle"]).iQ_(u["backgroundfillstyle"]).GT_({top:!0,left:!1,right:!1,bottom:!0}).KC_(!1),this.MLt_.ht_(i).Lq_(i).GY_((new Sc).rB_(u["caretlinestyle"]).iQ_(u["caretfillstyle"]).KC_(!1))]),this._Lt_.ht_(new mA(o.Qe_()-15,0,o.Qe_(),o.Ts_())).Lq_(new mA(0,0,15,o.Ts_())).GY_([(new Sc).rB_(u["buttonborderlinestyle"]).iQ_(u["buttonbackgroundfillstyle"]).KC_(!1),(new Yu).moveTo(1/3*a,g).lineTo(8/15*a,I).lineTo(1/3*a,c).KC_(!1).rB_(u["arrowlinestyle"])])])]);this.OSt_=new bC;this.wgt_=null;this.uy_=new lA(0,0);this.NLt_=new lA(0,0)}setOptions(t){if((t=Es(t))==null)return this;super.setOptions(t);let i,s;const e=function(t){return t instanceof hl},A=function(t){return t instanceof wr};i=t["axislinestyle"];this.JLt_.HY_(0).rB_(i,!e(i));i=t["toplinelinestyle"];s=t["topbackgroundfillstyle"];this.PLt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));this.VLt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));i=t["borderlinestyle"];s=t["backgroundfillstyle"];this.WLt_.HY_(0).rB_(i,!e(i));this.ZLt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));i=t["buttonborderlinestyle"];s=t["buttonbackgroundfillstyle"];this.jLt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));this._Lt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));i=t["arrowlinestyle"];this.jLt_.HY_(1).rB_(i,!e(i));this._Lt_.HY_(1).rB_(i,!e(i));this.jLt_.HY_(1).vn_();this._Lt_.HY_(1).vn_();i=t["caretlinestyle"];s=t["caretfillstyle"];this.MLt_.HY_(0).rB_(i,!e(i)).iQ_(s,!A(s));this.zLt_.dt_(t["handle"]);this.XLt_.dt_(t["handle"]);this.td_();return this}_wt_(t){this.pq_(t);return this}tUt_(){return this.OLt_}iUt_(){return this.WLt_}wq_(){this.vG_(!1);const t=this.rt_();if(this.JLt_==null||!t)return this;const i=t.clone().setY(0).setX(15).de_(t.Ie_()-30).Be_(t.Ts_()-15),s=t.clone().setX(0).setY(t.Ts_()-15).Be_(15),e=s.clone().setY(0).setX(15).de_(t.Ie_()-30);this.JLt_.ht_(i);this.$Lt_.ht_(s);this.ZLt_.ht_(e);this._Lt_.ht_(new mA(s.Qe_()-15,0,s.Qe_(),s.Ts_()));this.jLt_.ht_(new mA(0,0,15,s.Ts_()));return this}sUt_(t,i){this.JLt_.Lq_(t);this.WLt_.ht_(i).Lq_(i);this.PLt_.ht_(t.clone().de_(i.we_()-t.we_()));this.VLt_.ht_(t.clone().de_(t.Qe_()-i.Qe_()).setX(i.Qe_()));this.zLt_.gR_(i.we_(),t.De_());this.XLt_.gR_(i.Qe_(),t.De_())}rLt_(){return new fA}oLt_(){return new fA}Lq_(t,i,s,e){this.sUt_(t,i);t=t.clone().setY(0).Be_(1);i=i.clone().setY(0).Be_(1);this.ZLt_.Lq_(t);this.MLt_.ht_(i).Lq_(i);return this}jZ_(t){this.Fwt_.jZ_(t)}xLt_(t,i){const s=t.Fkt_();let e;if(!this.lt_().contains(s.getX(),s.getY()))return null;const A=undefined;this.OSt_.select(this.getRoot(),s.getX(),s.getY(),2).filter((t=>t===this.zLt_||t===this.XLt_||t===this.jLt_||t===this._Lt_||t===this.MLt_||!i&&t===this)).forEach((t=>{if(e==null||e===this){t!==this.zLt_&&t!==this.XLt_&&t!==this.jLt_&&t!==this._Lt_&&t!==this.MLt_||(e=t);i||e!=null||t!==this||(e=t)}}));return e}eUt_(t,i,s){const e=this.JLt_.rt_(),A=this.WLt_.getBounds().clone();t?A.setX(A.getX()-i):A.setX(A.getX()+i);A.we_()<e.we_()&&A.setX(e.getX());A.Qe_()>e.Qe_()&&A.setX(e.Qe_()-A.Ie_());this.notify(uG.Txt_,this,s);this.notify(uG.qxt_,this,new IG(s,A))}zFt_(t){if(this.Df_())return;const i=this.xLt_(t,!0);this.SLt_=this.WLt_.getBounds().clone();const s=this.SLt_.clone();let e=s.Ie_()/10*(this.ZY_()?-1:1),A=!1,n=!1;if(i==null){const i=t.Fkt_();if(!this.ZLt_.lt_().contains(i.getX(),i.getY()))return;e=s.Ie_();i.getX()<this.WLt_.lt_().ye_()?A=!0:n=!0}this.pxt_(!0);if(i===this.jLt_||A||i===this._Lt_||n){this.gLt_(t);this.eUt_(i===this.jLt_||A,e,t)}else{this.wgt_=i;t.stopPropagation(t.Dkt_()==="touchstart");this.start(t);this.bLt_=!1;this.uy_=this.bFt_(this.JLt_,t)}}jFt_(t){const i=this.xLt_(t,!0),s=t.Fkt_();if(i==null&&this.ZLt_.lt_().contains(s)===!1)return;const e=t.Lkt_();e.preventDefault();t.stopPropagation();const A=undefined,n=this.WLt_.getBounds().clone().Ie_()/10*(this.ZY_()?-1:1);this.eUt_(e["deltaY"]<0,n,t)}AUt_(t,i){if(this.NLt_.x<t.we_()||this.NLt_.x>t.Qe_())return;let s=this.wgt_!==this.zLt_?this.zLt_.lR_().getX():this.NLt_.x,e=this.wgt_!==this.XLt_?this.XLt_.lR_().getX():this.NLt_.x;if(s>e){const t=s;s=e;e=t;this.wgt_=this.wgt_===this.zLt_?this.XLt_:this.zLt_}i.setX(s);i.de_(e-s)}zxt_(t){if(!this.Df_()&&this.isActive()&&this.wgt_!=null){const i=t.Lkt_();i.stopPropagation();i.preventDefault();const s=this.JLt_.rt_(),e=this.SLt_.clone();this.NLt_=this.bFt_(this.JLt_,t);if(this.wgt_===this.MLt_){e.setX(e.getX()-(this.uy_.getX()-this.NLt_.getX()));e.we_()<s.we_()&&e.setX(s.getX());e.Qe_()>s.Qe_()&&e.setX(s.Qe_()-e.Ie_());this.notify(uG.Kxt_,this,new IG(t,e))}else{this.AUt_(s,e);this.notify(uG.Hxt_,this,new IG(t,e))}}}Xxt_(t){super.Xxt_(t);this.Ct_(t)}jxt_(t){super.jxt_(t);BG.Yb_(t.getPlot(),{cursor:null},this)}XFt_(t){const i=this.xLt_(t,!1);this.aLt_(i);if(this.Df_())return;if(this.isActive()&&this.wgt_!=null){if(this.bLt_===!1){this.notify(uG.Txt_,this,t);this.bLt_=!0}return}const s=i===this||i===this.zLt_||i===this.XLt_;this.XLt_.nf_(s).td_();this.zLt_.nf_(s).td_();let e=null;i==null||i===this||i!==this.zLt_&&i!==this.XLt_?i===this.jLt_||i===this._Lt_?e="pointer":i===this.MLt_&&(e="move"):e="ew-resize";BG.Yb_(t.getPlot(),{cursor:e},this)}Ct_(t){this.aLt_(null);if(this.Df_())return;this.isActive()&&t!=null&&t.stopPropagation(!0,!1);this.bLt_=!1;this.pxt_(!1);const i=this.JLt_.rt_(),s=this.SLt_.clone();if(!(s.we_()<i.we_()||s.Qe_()>i.Qe_())){this.stop();this.NLt_=this.bFt_(this.JLt_,t);if(this.wgt_!=null){if(this.wgt_===this.zLt_||this.wgt_===this.XLt_){this.AUt_(i,s);this.notify(uG.Jxt_,this,new IG(t,s));this.XLt_.nf_(!1).td_();this.zLt_.nf_(!1).td_()}if(this.wgt_===this.MLt_){s.setX(s.getX()-(this.uy_.getX()-this.NLt_.getX()));s.we_()<i.we_()&&s.setX(i.getX());s.Qe_()>i.Qe_()&&s.setX(i.Qe_()-s.Ie_());this.notify(uG.qxt_,this,new IG(t,s))}this.wgt_=null}this.SLt_=null}}};i=t([_s("geotoolkit.controls.tools.scroll.AdvancedScroll")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVMYXlvdXQiOiJ3cV8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldE1vZGVsUmFuZ2UiOiJyTHRfIiwiZ2V0VmlzaWJsZU1vZGVsUmFuZ2UiOiJvTHRfIn19fSAg");RG.Ai_().LLt_((function(t){return{options:t=qi(t,{resizable:!0,rounded:!0,size:10}),type:bG.D_()}}),"geotoolkit.controls.tools.scroll.CompactHorizontalScroll");RG.Ai_().LLt_((function(t){return{options:t=qi(t,{resizable:!0,rounded:!0,size:10}),type:NG.D_()}}),"geotoolkit.controls.tools.scroll.CompactVerticalScroll");let xG=null;var LG=Ci(function(){var i;let s=i=class t{constructor(){this.Jv_={};this.nUt_(bG.D_(),(t=>new bG(t)));this.nUt_(NG.D_(),(t=>new NG(t)));this.nUt_("geotoolkit.controls.tools.scroll.CompactHorizontalScroll",(t=>{t=RG.Ai_().ULt_(t,"geotoolkit.controls.tools.scroll.CompactHorizontalScroll")["options"];return new bG(t)}));this.nUt_("geotoolkit.controls.tools.scroll.CompactVerticalScroll",(t=>{t=RG.Ai_().ULt_(t,"geotoolkit.controls.tools.scroll.CompactVerticalScroll")["options"];return new NG(t)}));this.nUt_(FG.D_(),(t=>new FG(t["modellimits"],t["visiblelimits"],t["tickgenerator"],t["axis"],t["name"])))}static Ai_(){xG==null&&(xG=new i);return xG}nUt_(t,i){if(t==null||i==null||typeof i!="function")return this;this.Jv_[t]=i;return this}hUt_(t,i){let s=null;this.Jv_[t]!=null&&typeof this.Jv_[t]=="function"&&(s=this.Jv_[t](i));return s}};s=i=t([_s("geotoolkit.controls.tools.scroll.ScrollFactory")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZWdpc3RlclNjcm9sbGJhciI6Im5VdF8iLCJnZXRTY3JvbGxiYXIiOiJoVXRfIn19LCJnZXRJbnN0YW5jZSI6IkFpXyIsImdldENsYXNzTmFtZSI6IkRfIn0g");function UG(t){return t&&typeof t.setSize=="function"}var YG=Ci(function(){let i=class t extends sI{constructor(t){super(t);this.content=(new sI).kY_(!0).Lq_(sa.RS_()).cq_(new Ew);const i=Pi(t,{scroll:{vertical:{type:"geotoolkit.controls.tools.scroll.VerticalScroll",size:15,visible:!0,floating:!0,options:{rounded:!1}},horizontal:{type:"geotoolkit.controls.tools.scroll.HorizontalScroll",size:15,visible:!0,floating:!0,options:{rounded:!1}}}},!0);this.rUt_=i["scroll"];this.zk_=i["autosize"]||!1;this.oUt_=(new sG).HC_("scrollablepanel-panning").Kv_(!0).pFt_("pointerdown",!1).pFt_("pointermove",!1).pFt_("pointerup",!1).pFt_("dblclick",!1).on(jS.VFt_,((t,i,s)=>{const e=s.Dkt_();if(s.Lkt_()&&s.Lkt_().ctrlKey&&(e==="wheel"||e==="mousewheel"))return;s.stopPropagation();const A=s.oc_();this.lUt_(null,A.x,A.y)}));this.uUt_=LG.Ai_().hUt_(this.rUt_["vertical"]["type"],{name:this.rUt_["vertical"]["name"],modellimits:this.content.rt_(),visiblelimits:this.content.rt_(),size:this.rUt_["vertical"]["size"]}).Wxt_(this.rUt_["vertical"]["floating"]).nf_(this.rUt_["vertical"]["visible"]).setOptions(this.rUt_["vertical"]["options"]).on(uG.Kxt_,((t,i,s)=>{this.lUt_(s.ot_())}));this.aUt_=LG.Ai_().hUt_(this.rUt_["horizontal"]["type"],{name:this.rUt_["horizontal"]["name"],modellimits:this.content.rt_(),visiblelimits:this.content.rt_(),size:this.rUt_["horizontal"]["size"]}).Wxt_(this.rUt_["horizontal"]["floating"]).nf_(this.rUt_["horizontal"]["visible"]).setOptions(this.rUt_["horizontal"]["options"]).on(uG.Kxt_,((t,i,s)=>{this.lUt_(s.ot_())}));this.kY_(!0).aq_(!0).cq_(new zB).rB_("black").ft_({left:0,top:0,right:0,bottom:0});this.GY_([this.content,this.uUt_,this.aUt_]);this.mbt_=()=>{this.Wj_(!0)};let s=i["content"];if(s){s instanceof $n&&(s=[s]);s.forEach((t=>{t.on(na.iG_,this.mbt_)}));this.xlt_().GY_(s)}}lUt_(t,i,s){const e=this.content.ot_();if(t){i=(e.we_()-t.we_())*this.content.if_().BI_();s=(e.Ee_()-t.Ee_())*this.content.if_().sI_()}this.content.translate(i,s);this.content.iT_();const A=this.content.rt_(),n=this.content.ot_();this.uUt_.Lq_(A,n,!1);this.aUt_.Lq_(A,n,!1)}dispose(){if(!this.Df_()){this.content.YY_().forEach((t=>{t.off(na.iG_,this.mbt_)}));super.dispose()}}xlt_(){return this.content}Wj_(t){if(this.content){if(this.gq_()){this.content.yf_(!0);this.content.rd_(!1);this.content.bG_().eT_(new mA(0,0,Number.MAX_VALUE,Number.MAX_VALUE),this.content.YY_((t=>ys(t,ta))));let i=null;this.content.YY_().forEach((t=>{if(!(ie(t)&&t instanceof iu))return;const s=t.ut_(),e=s?s.transform(t.getBounds()):t.getBounds();i==null?i=e:e&&i.union(e)}));this.content.Lq_(new mA(0,0,i.Ie_(),i.Ts_()));this.content.ht_(new mA(0,0,i.Ie_(),i.Ts_()));this.content.rd_(!0);this.content.yf_(!1);if(this.zk_&&t){const t=this.getBounds();this.ht_(new mA(t.getX(),t.getY(),t.getX()+i.Ie_(),t.getY()+i.Ts_()))}}const i=this.It_().uI_(new xA(this.rUt_["vertical"]["size"],this.rUt_["horizontal"]["size"]));UG(this.uUt_)&&this.uUt_.setSize(i.Ie_()).ft_({width:i.Ie_(),top:0,right:0,bottom:i.Ts_()}).Lq_(this.content.rt_(),this.content.ot_(),!1);UG(this.aUt_)&&this.aUt_.setSize(i.Ts_()).ft_({height:i.Ts_(),left:0,right:i.Ie_(),bottom:0}).Lq_(this.content.rt_(),this.content.ot_(),!1);this.wq_()}return this}ht_(t){super.ht_(t);this.content.iT_();return this}gUt_(){if(this.content.getBounds()){const t=this.getBounds().clone().de_(this.content.getBounds().Ie_()).Be_(this.content.getBounds().Ts_());this.ht_(t)}return this}cUt_(){return[new lG(this).add(this.oUt_),this.uUt_.K3_(),this.aUt_.K3_()]}JF_(){return this.zk_}qF_(t){if(this.zk_===t)return this;this.zk_=t;this.Wj_(!0);return this}IUt_(t){this.rUt_=Pi(t,this.rUt_);this.uUt_.HC_(this.rUt_["vertical"]["name"]).Wxt_(this.rUt_["vertical"]["floating"]).nf_(this.rUt_["vertical"]["visible"]).setOptions(this.rUt_["vertical"]["options"]);this.uUt_ instanceof vG&&this.uUt_.setSize(this.rUt_["vertical"]["size"]);this.aUt_.HC_(this.rUt_["horizontal"]["name"]).Wxt_(this.rUt_["horizontal"]["floating"]).nf_(this.rUt_["horizontal"]["visible"]).setOptions(this.rUt_["horizontal"]["options"]);this.aUt_ instanceof vG&&this.aUt_.setSize(this.rUt_["horizontal"]["size"]);return this}};i=t([_s("geotoolkit.controls.shapes.ScrollablePanel")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb250ZW50IjoieGx0XyIsInVwZGF0ZUxpbWl0cyI6IldqXyIsInNldEJvdW5kcyI6Imh0XyIsImZpdENvbnRlbnQiOiJnVXRfIiwiZ2V0VG9vbHMiOiJjVXRfIiwiZ2V0QXV0b1NpemUiOiJKRl8iLCJzZXRBdXRvU2l6ZSI6InFGXyJ9fX0g");var TG=Ci(function(){let i=class t extends sI{constructor(t){const i=qi(t,{content:t instanceof eE?t:null},!0);t==null||t instanceof eE?super():super(t);this.aq_(!0);this.fUt_=(new sI).aq_(!0);this.GY_(this.fUt_);this.EGt_(i["content"])}EGt_(t){if(t===this.Llt_)return this;const i=this.fUt_.FY_(this.Llt_);this.fUt_.removeChild(this.Llt_);this.Llt_=t;i===-1?this.fUt_.GY_(this.Llt_):this.fUt_.xY_(i,this.Llt_);return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["content"]!==void 0&&this.EGt_(t["content"]);return this}N_(){const t=super.N_();t["content"]=this.Llt_;return t}CUt_(t,i,s,e){this.Llt_.CUt_(t,i,s,e);this.fUt_.Lq_(this.Llt_.getBounds());this.fUt_.ht_(this.Llt_.getBounds())}dUt_(){return this.fUt_}xlt_(){return this.Llt_}ht_(t){super.ht_(t);this.Lq_(new mA(0,0,t.Ie_(),t.Ts_()));return this}};i=t([_s("geotoolkit.controls.shapes.tableview.ContentView")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwic2V0Qm91bmRzIjoiaHRfIn19fSAg");var KG=Ci(function(){let i=class t{constructor(){}BUt_(t,i){return null}wUt_(t){return"Row #"+t}QUt_(t){return!1}EUt_(t,i,s,e){return null}pUt_(t,i){return t+"x"+i}mUt_(t){return"Column #"+t}yUt_(t,i,s){return s}DUt_(t,i){return i}MUt_(t,i){return i}};i=t([_s("geotoolkit.controls.shapes.tableview.DataProvider")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJwcmVwYXJlSW5kZXgiOiJCVXRfIiwiZ2V0SW5kZXhEYXRhIjoid1V0XyIsImdldE1hcmtlckRhdGEiOiJRVXRfIiwicHJlcGFyZUNvbnRlbnQiOiJFVXRfIiwiZ2V0Q29udGVudERhdGEiOiJwVXRfIiwiZ2V0SGVhZGVyRGF0YSI6Im1VdF8iLCJnZXRDb250ZW50Rm9ybWF0IjoieVV0XyIsImdldEhlYWRlckZvcm1hdCI6IkRVdF8iLCJnZXRJbmRleEZvcm1hdCI6Ik1VdF8ifX19");function HG(t){return t&&(t["horizontal"]!=null||t["vertical"]!=null)}const qG="rgba(0,0,255,0.2)",JG="rgba(255,0,0,0.2)",PG="white",VG="#6b6b6b",OG="white",WG="red",zG="#d4d4d4",XG="#ededed",jG="bold 12px Courier",ZG=10,_G=new mA,$G=new mA,tR=new mA,iR={selection:{},background:{fillstyle:null,linestyle:null,bounds:null},text:{textstyle:null,fillstyle:null,linestyle:null,value:null,bounds:null},icon:{fillstyle:null,linestyle:null,value:null,bounds:null}};var sR=Ci(function(){let i=class t extends eE{constructor(t,i){super(t=Pi(t,{rows:typeof t=="number"?t:null,tableview:i},!0));this.vUt_(t);this.bUt_=null;this.NUt_=new hl({color:PG,pixelsnapmode:{x:!0,y:!0}});this.fX_=new qa({color:VG,alignment:Fa.X_,baseline:ka.j_,font:jG});this.SUt_=new hl({color:OG,pixelsnapmode:{x:!0,y:!0}});this.GUt_=new wr(WG);this.RUt_=new wr(XG);this.kUt_=new wr(zG);this.FUt_=new wr(qG);this.xUt_=new wr(JG)}vUt_(t){t["rows"]!==void 0&&(this.LUt_=t["rows"]);t["tableview"]!==void 0&&(this.UUt_=t["tableview"]);this.YUt_=this.UUt_.TUt_();this.Jp_=this.YUt_.KUt_;this.Pp_=this.YUt_.HUt_.Ts_()*this.LUt_;this.ce_(0,0,this.Jp_,this.Pp_);return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.vUt_(t)}N_(){const t=super.N_();t["rows"]=this.LUt_;t["tableview"]=this.UUt_;return t}setData(t){if(t==null)return this;t["highlightrowfillstyle"]!==void 0&&(this.xUt_=il.BD_(t["highlightrowfillstyle"]));t["activerowfillstyle"]!==void 0&&(this.FUt_=il.BD_(t["activerowfillstyle"]));t["defaultcellsize"]!==void 0&&(this.YUt_.HUt_=t["defaultcellsize"]);if(!t.hasOwnProperty("index"))return this;const i=t["index"];i["gridstyle"]!==void 0&&(HG(i["gridstyle"])?this.NUt_={horizontal:hl.Wi_(i["gridstyle"]["horizontal"]),vertical:hl.Wi_(i["gridstyle"]["vertical"])}:this.NUt_=hl.Wi_(i["gridstyle"]));i["textstyle"]!==void 0&&(this.fX_=qa.Wi_(i["textstyle"]));i["oddfillstyle"]!==void 0&&(this.RUt_=il.BD_(i["oddfillstyle"]));i["evenfillstyle"]!==void 0&&(this.kUt_=il.BD_(i["evenfillstyle"]));i["markerfillstyle"]!==void 0&&(this.GUt_=il.BD_(i["markerfillstyle"]));i["markerlinestyle"]!==void 0&&(this.SUt_=hl.Wi_(i["markerlinestyle"]));i["highlightrowfillstyle"]!==void 0&&(this.xUt_=il.BD_(t["highlightrowfillstyle"]));i["activerowfillstyle"]!==void 0&&(this.FUt_=il.BD_(t["activerowfillstyle"]));return this}CUt_(t,i,s,e){this.LUt_=t;this.bUt_=e;this.qUt_=this.bUt_!=null?[]:null;if(this.bUt_!=null){this.Pp_=this.bUt_[0];this.qUt_[0]=0;for(let t=1;t<this.bUt_.length;t++){this.Pp_+=this.bUt_[t];this.qUt_[t]=this.qUt_[t-1]+this.bUt_[t-1]}}else this.Pp_=this.YUt_.HUt_.Ts_()*t;this.ce_(0,0,this.Jp_,this.Pp_);return this}JUt_(){return this.UUt_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t,s=this.getBounds().clone().de_(this.YUt_.KUt_);if(i.tk_()){i.iQ_(wr.EQ_);i.pR_(s);return this}this.zY_(i);return this}PUt_(t,i){if(t>=0){let i;i=this.qUt_!=null?this.qUt_[t]:t*this.YUt_.HUt_.Ts_();return i}return i!=null?i.Ee_():0}VUt_(t,i){if(t>=0){let i;i=this.qUt_!=null?this.qUt_[t]:t*this.YUt_.HUt_.Ts_();this.bUt_!=null?i+=this.bUt_[t]:i+=this.YUt_.HUt_.Ts_();return i}return i!=null?i.pe_():0}OUt_(t,i,s){if(this.qUt_==null)return Math.floor(t.Ee_()/this.YUt_.HUt_.Ts_());i=i==null?0:i;s=s==null?this.LUt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.bUt_!=null?this.bUt_[e]:this.YUt_.HUt_.Ts_();if(this.qUt_[e]<=t.Ee_()&&t.Ee_()<=this.qUt_[e]+A)return e;t.Ee_()<this.qUt_[e]?s=e-1:i=e+1}return-1}WUt_(t,i,s){if(this.qUt_==null)return Math.floor(Math.min(this.LUt_-1,t.pe_()/this.YUt_.HUt_.Ts_()));s=s==null?this.LUt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.bUt_!=null?this.bUt_[e]:this.YUt_.HUt_.Ts_(),n=this.bUt_!=null?this.bUt_[this.bUt_.length-1]:this.YUt_.HUt_.Ts_(),h=Math.min(t.pe_(),this.qUt_[this.qUt_.length-1]+n);if(this.qUt_[e]<=h&&h<=this.qUt_[e]+A)return e;h<this.qUt_[e]?s=e-1:i=e+1}return-1}zUt_(t,i,s,e,A){if(e!=null){let n,h,r,o,l;t.iQ_(e);t.beginPath();l=i%2==0&&A===!0||i%2!=0&&A===!1?i:i+1;for(let i=l;i<=s;i+=2){n=0;r=this.PUt_(i);h=this.YUt_.KUt_;o=this.VUt_(i);t.moveTo(n,r).lineTo(h,r).lineTo(h,o).lineTo(n,o).lineTo(n,r)}t.closePath().sQ_()}return this}XUt_(t,i,s,e,A){if(t>=i&&t<=s){A.iQ_(e);A.beginPath();const i=0,s=this.YUt_.KUt_,n=this.PUt_(t),h=this.VUt_(t);A.moveTo(i,n);A.lineTo(s,n);A.lineTo(s,h);A.lineTo(i,h);A.closePath();A.sQ_()}return this}jUt_(t,i,s){const e=this.UUt_.ZUt_()!=null?this._Ut_:this.$Ut_;for(let A=t;A<=i;A++)this.tYt_(s,A,e);return this}iYt_(t,i,s){if(this.NUt_==null)return this;if(this.NUt_ instanceof hl||this.NUt_["horizontal"]instanceof hl){let e;const A=this.NUt_ instanceof hl?this.NUt_:this.NUt_["horizontal"];s.beginPath();s.rB_(A);const n=0,h=this.YUt_.KUt_;for(let A=t;A<=i;A++){e=this.VUt_(A);s.moveTo(n,e);s.lineTo(h,e)}s.stroke()}return this}sYt_(t,i,s){if(this.NUt_==null)return this;if(this.NUt_ instanceof hl||this.NUt_["vertical"]instanceof hl){const e=this.NUt_ instanceof hl?this.NUt_:this.NUt_["vertical"],A=0,n=this.YUt_.KUt_;s.save();s._b_(null,QA.Et_);s.beginPath().rB_(e).moveTo(A,t).lineTo(A,i).moveTo(n,t).lineTo(n,i).stroke();s.restore()}return this}eYt_(t,i,s){if(this.NUt_==null)return this;if(this.NUt_ instanceof hl||this.NUt_["vertical"]instanceof hl){const e=this.NUt_ instanceof hl?this.NUt_:this.NUt_["vertical"],A=0,n=this.YUt_.KUt_,h=this.PUt_(t),r=this.VUt_(i);s.save();s._b_(null,QA.Et_);s.beginPath().rB_(e).moveTo(A,h).lineTo(A,r).moveTo(n,h).lineTo(n,r).stroke();s.restore()}return this}zY_(t){const i=t.Ji_().uI_(t.cR_());i.ce_({x:Math.max(0,i.getX()),y:Math.max(0,i.getY()),width:Math.max(0,i.Ie_()),height:Math.max(0,i.Ts_())});const s=this.getParent().ot_().clone().de_(this.YUt_.KUt_);t.save();t._b_(s,QA.Et_,!0);const e=this.OUt_(i),A=this.WUt_(i,e);this.zUt_(t,e,A,this.RUt_,!1);this.zUt_(t,e,A,this.kUt_,!0);this.xUt_!=null&&this.UUt_.AYt_()>=0&&this.XUt_(this.UUt_.AYt_(),e,A,this.xUt_,t);this.FUt_!=null&&this.UUt_.nYt_().length>0&&this.UUt_.nYt_().forEach((i=>{this.XUt_(i,e,A,this.FUt_,t)}));this.UUt_.BUt_(e,A);this.jUt_(e,A,t);t.rB_(this.SUt_);t.iQ_(this.GUt_);for(let i=e;i<A;i++)this.hYt_(t,i);t.restore();this.iYt_(e,A,t);this.sYt_(s.Ee_(),s.pe_(),t);return this}tYt_(t,i,s){const e=0,A=this.YUt_.KUt_,n=this.qUt_==null?i*this.YUt_.HUt_.Ts_():this.qUt_[i],h=this.bUt_==null?this.YUt_.HUt_.Ts_():this.bUt_[i];t.save();const r=t.Ji_().rn_(new mA(e,n,e+A,n+h));t._b_(r,QA.ue_);s.call(this,t,i);t.restore();return this}$Ut_(t,i){const s=this.UUt_.wUt_(i);if(s==null)return this;let e=this.YUt_.KUt_;const A=this.bUt_!=null?this.qUt_[i]:i*this.YUt_.HUt_.Ts_();let n=0;this.NUt_!=null&&(this.NUt_ instanceof hl?n=this.NUt_.Ie_():this.NUt_["vertical"]!=null&&(n=this.NUt_["vertical"].Ie_()));const h=undefined;switch(this.fX_.vF_()){case Fa.z_:e=n;break;case Fa.X_:const i=undefined;e-=bn.$c_(2+n,0,t.Ji_());break;default:e/=2;break}t.g_(this.fX_);t.drawText(e,A+(this.bUt_==null?this.YUt_.HUt_.Ts_():this.bUt_[i])/2,s);return this}rYt_(t,i,s,e){iR["selection"]["row"]=this.UUt_.AYt_();iR["selection"]["column"]=this.UUt_.oYt_();iR["background"]["fillstyle"]=null;iR["background"]["linestyle"]=null;iR["background"]["bounds"]=t;iR["text"]["fillstyle"]=null;iR["text"]["linestyle"]=null;iR["text"]["textstyle"]=this.fX_;iR["text"]["value"]=e;iR["text"]["bounds"]=i;iR["icon"]["fillstyle"]=null;iR["icon"]["linestyle"]=null;iR["icon"]["value"]=null;iR["icon"]["bounds"]=s;return this}lYt_(t,i,s){if(t!=null&&(i["background"]["fillstyle"]!=null||i["background"]["linestyle"]!=null)){s.iQ_(il.BD_(i["background"]["fillstyle"]));s.rB_(hl.Wi_(i["background"]["linestyle"]));s.pR_(t)}return this}uYt_(t,i,s,e,A){if(t!=null){if(i["icon"]["fillstyle"]!=null||i["icon"]["linestyle"]!=null){A.iQ_(il.BD_(i["icon"]["fillstyle"]));A.rB_(hl.Wi_(i["icon"]["linestyle"]));A.pR_(t)}if(i["icon"]["value"]!=null){const t=A.uS_(Gn.kI_(s,e));i["icon"]["value"].render(t)}}return this}aYt_(t,i,s){if(t==null)return this;if(i["text"]["fillstyle"]!=null||i["text"]["linestyle"]!=null){s.iQ_(il.BD_(i["text"]["fillstyle"]));s.rB_(hl.Wi_(i["text"]["linestyle"]));s.pR_(t)}let e;const A=i["text"]["value"],n=i["text"]["textstyle"];if(A!=null&&n!=null){switch(n.vF_()){case Fa.X_:e=t.Qe_();break;case Fa.ne_:e=t.ye_();break;default:e=t.we_();break}s.g_(n);s.drawText(e,t.De_(),A)}return this}_Ut_(t,i){const s=0,e=this.qUt_==null?i*this.YUt_.HUt_.Ts_():this.qUt_[i],A=this.YUt_.KUt_,n=this.bUt_==null?this.YUt_.HUt_.Ts_():this.bUt_[i];_G.ce_(0,0,A,n);$G.ce_(0,0,A,n);tR.ce_(0,0,A,n);this.rYt_(_G,$G,tR,this.UUt_.wUt_(i));const h=this.UUt_.gYt_(i,iR);if(h==null)return this;const r=h["background"]["bounds"],o=h["text"]["bounds"],l=h["icon"]["bounds"];r!=null&&r.setX(s+r.getX()).setY(e+r.getY());o!=null&&o.setX(s+o.getX()).setY(e+o.getY());l!=null&&l.setX(s+l.getX()).setY(e+l.getY());this.lYt_(r,h,t);this.uYt_(l,h,s,e,t);this.aYt_(o,h,t);return this}hYt_(t,i){const s=undefined;if(this.UUt_.QUt_(i)===!1)return this;let e=i*this.YUt_.HUt_.Ts_(),A=(this.YUt_.HUt_.Ts_()-ZG)/2;if(this.qUt_!=null){e=this.qUt_[i];A=(this.bUt_[i]-ZG)/2}t.pR_(A,e+A,ZG,ZG);return this}FE_(){return this.fX_}};i=t([_s("geotoolkit.controls.shapes.tableview.FixedColumnContent")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const eR="rgba(0,0,255,0.2)",AR="white",nR="#6b6b6b",hR="#bdbdbd",rR="bold 11px Tahoma",oR=new mA,lR=new mA,uR=new mA,aR={selection:{},background:{fillstyle:null,linestyle:null,bounds:null},text:{textstyle:null,fillstyle:null,linestyle:null,value:null,bounds:null},icon:{fillstyle:null,linestyle:null,value:null,bounds:null}};var gR=Ci(function(){let i=class t extends eE{constructor(t,i){super(t=Pi(t,{columns:typeof t=="number"?t:null,tableview:i},!0));this.cYt_=!0;this.IYt_(t);this.fYt_=null;this.CYt_=[];this.wX_=0;this.dYt_=NC.sX_;this.qDt_=new YC({alignment:dA.ne_});this.NUt_=new hl({color:AR,pixelsnapmode:{x:!0,y:!0}});this.fX_=new qa({color:nR,alignment:Fa.ne_,baseline:ka.j_,font:rR});this.BYt_=new wr(hR);this.wYt_=new wr(eR);this.RUt_=null;this.kUt_=null}IYt_(t){t["columns"]!==void 0&&(this.Qyt_=t["columns"]);t["tableview"]!==void 0&&(this.UUt_=t["tableview"]);this.YUt_=this.UUt_.TUt_();this.Jp_=this.YUt_.HUt_.Ie_()*this.Qyt_;this.Pp_=this.YUt_.QYt_;this.ce_(0,0,this.Jp_,this.Pp_);return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.IYt_(t)}N_(){const t=super.N_();t["columns"]=this.Qyt_;t["tableview"]=this.UUt_;return t}setData(t){if(t==null)return this;t["highlightcolumnfillstyle"]!==void 0&&(this.wYt_=il.BD_(t["highlightcolumnfillstyle"]));t["activecolumnfillstyle"]!==void 0&&(this.wYt_=il.BD_(t["activecolumnfillstyle"]));t["defaultheadersize"]!==void 0?this.YUt_.QYt_=t["defaultheadersize"].Ts_():t["defaultcellsize"]!=null&&(this.YUt_.QYt_=t["defaultcellsize"].Ts_());if(!t.hasOwnProperty("header"))return this;const i=t["header"];typeof i["padding"]=="number"&&(this.wX_=i["padding"]);if(i["gridstyle"]!==void 0)if(i["gridstyle"].hasOwnProperty("horizontal")||i["gridstyle"].hasOwnProperty("vertical")){this.NUt_=i["gridstyle"];this.NUt_["horizontal"]=hl.Wi_(this.NUt_["horizontal"]);this.NUt_["vertical"]=hl.Wi_(this.NUt_["vertical"])}else this.NUt_=hl.Wi_(i["gridstyle"]);i["textstyle"]!==void 0&&(this.fX_=qa.Wi_(i["textstyle"]));i["headerfillstyle"]!==void 0&&(this.BYt_=il.BD_(i["headerfillstyle"]));i["oddfillstyle"]!==void 0&&(this.RUt_=il.BD_(i["oddfillstyle"]));i["evenfillstyle"]!==void 0&&(this.kUt_=il.BD_(i["evenfillstyle"]));i["highlightcolumnfillstyle"]!==void 0&&(this.wYt_=il.BD_(i["highlightcolumnfillstyle"]));i["activecolumnfillstyle"]!==void 0&&(this.wYt_=il.BD_(i["activecolumnfillstyle"]));return this}EYt_(t,i){let s=0,e;if(i!=null&&i.length===t){this.CYt_[0]=0;for(e=0;e<t;++e){this.fYt_[e]=i[e];s+=this.fYt_[e];e>0&&(this.CYt_[e]=this.CYt_[e-1]+this.fYt_[e-1])}}else{s=this.YUt_.HUt_.Ie_()*t;if(this.fYt_!=null)for(e=0;e<t;++e){this.fYt_[e]=this.YUt_.HUt_.Ie_();this.CYt_[e]=e*this.YUt_.HUt_.Ie_()}}return s}CUt_(t,i,s){this.fYt_=s;this.CYt_=this.fYt_!=null?[]:null;this.Qyt_=i;this.Jp_=this.EYt_(i,s);this.ce_(0,0,this.Jp_,this.Pp_);return this}JUt_(){return this.UUt_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;i.YR_(this);if(i.tk_()){const t=this.getBounds();i.iQ_(wr.EQ_);i.pR_(t)}else this.zY_(i);return this}zUt_(t,i,s,e,A){if(e==null)return this;t.iQ_(e);t.beginPath();let n,h,r,o,l;l=i%2==0&&A===!0||i%2!=0&&A===!1?i:i+1;for(let i=l;i<=s;i+=2){n=this.pYt_(i);h=this.mYt_(i);r=0;o=this.YUt_.QYt_;t.moveTo(n,r).lineTo(h,r).lineTo(h,o).lineTo(n,o).lineTo(n,r)}t.closePath().sQ_();return this}yYt_(t,i,s){if(this.CYt_==null)return Math.floor(t.we_()/this.YUt_.HUt_.Ie_());i=i==null?0:i;s=s==null?this.Qyt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.fYt_!=null?this.fYt_[e]:this.YUt_.HUt_.Ie_();if(this.CYt_[e]<=t.we_()&&t.we_()<=this.CYt_[e]+A)return e;t.we_()<this.CYt_[e]?s=e-1:i=e+1}return-1}DYt_(t,i,s){if(this.CYt_==null)return Math.floor(Math.min(this.Qyt_-1,t.Qe_()/this.YUt_.HUt_.Ie_()));s=s==null?this.Qyt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.fYt_!=null?this.fYt_[e]:this.YUt_.HUt_.Ie_(),n=this.fYt_!=null?this.fYt_[this.fYt_.length-1]:this.YUt_.HUt_.Ie_(),h=Math.min(t.Qe_(),this.CYt_[this.CYt_.length-1]+n);if(this.CYt_[e]<=h&&h<=this.CYt_[e]+A)return e;h<this.CYt_[e]?s=e-1:i=e+1}return-1}pYt_(t,i){if(t>=0){let i;i=this.CYt_!=null?this.CYt_[t]:t*this.YUt_.HUt_.Ie_();return i}return i!=null?i.we_():0}mYt_(t,i){if(t>=0){let i;i=this.CYt_!=null?this.CYt_[t]:t*this.YUt_.HUt_.Ie_();this.fYt_!=null?i+=this.fYt_[t]:i+=this.YUt_.HUt_.Ie_();return i}return i!=null?i.Qe_():0}MYt_(t,i,s,e){e.iQ_(s);e.beginPath();const A=this.pYt_(-1,t),n=this.mYt_(i),h=0,r=this.YUt_.QYt_;e.moveTo(A,h);e.lineTo(n,h);e.lineTo(n,r);e.lineTo(A,r);e.lineTo(A,h);e.closePath();e.sQ_();return this}vYt_(t,i,s,e){if(this.wYt_!=null&&t>=s&&t<=i){const i=this.pYt_(t),s=this.mYt_(t);e.iQ_(this.wYt_);e.beginPath().moveTo(i,0).lineTo(s,0).lineTo(s,this.YUt_.QYt_).lineTo(i,this.YUt_.QYt_).closePath().sQ_()}return this}bYt_(t,i,s){const e=this.UUt_.NYt_()!=null?this.SYt_:this.GYt_;for(let A=t;A<=i;A++)this.tYt_(s,A,e);return this}RYt_(t){this.cYt_=t;return this}kYt_(t,i,s){if(this.NUt_==null)return this;let e,A,n,h;if(this.NUt_ instanceof hl){e=this.NUt_;A=this.NUt_}else{e=this.NUt_["vertical"];A=this.NUt_["horizontal"]}if(e==null&&A==null)return this;const r=0,o=this.YUt_.QYt_-A.Ie_();if(e!=null){s.rB_(e);s.beginPath();for(let e=t;e<=i;e++){n=this.pYt_(e);s.moveTo(n,r);s.lineTo(n,o)}if(this.cYt_!==!1||i!==this.Qyt_-1){h=this.mYt_(i);s.moveTo(h,r);s.lineTo(h,o)}s.stroke()}s.rB_(A);s.beginPath();n=this.pYt_(t);h=this.mYt_(i);s.moveTo(n,r);s.lineTo(h,r);s.moveTo(n,o);s.lineTo(h,o);s.stroke();return this}zY_(t){const i=t.Ji_().uI_(t.cR_());i.ce_({x:Math.max(0,i.getX()),y:Math.max(0,i.getY()),width:Math.max(0,i.Ie_()),height:Math.max(0,i.Ts_())});const s=this.yYt_(i),e=this.DYt_(i,s);this.MYt_(i,e,this.BYt_,t);this.zUt_(t,s,e,this.kUt_,!0);this.zUt_(t,s,e,this.RUt_,!1);const A=this.UUt_.oYt_();this.vYt_(A,e,s,t);this.bYt_(s,e,t);this.kYt_(s,e,t);return this}tYt_(t,i,s){const e=this.CYt_!=null?this.CYt_[i]:Math.round(this.YUt_.HUt_.Ie_()*i),A=this.fYt_!=null?this.fYt_[i]:this.YUt_.HUt_.Ie_(),n=0,h=this.YUt_.QYt_;t.save();const r=t.Ji_().rn_(new mA(e,n,e+A,n+h));t._b_(r,QA.ue_);s.call(this,t,i);t.restore();return this}GYt_(t,i){const s=this.CYt_!=null?this.CYt_[i]:Math.round(this.YUt_.HUt_.Ie_()*i),e=this.UUt_.mUt_(i);this.qDt_.a_(e);this.qDt_.SE_(dA.ne_);this.qDt_.g_(this.fX_).PX_(this.dYt_);const A=this.fYt_!=null?this.fYt_[i]:this.YUt_.HUt_.Ie_();this.qDt_.de_(A);this.qDt_.gR_(s+A/2,this.YUt_.QYt_/2);this.qDt_.render(t);return this}FYt_(t){return new mA({x:this.pYt_(t),y:0,width:this.fYt_!=null?this.fYt_[t]:this.YUt_.HUt_.Ie_(),height:this.YUt_.QYt_})}xYt_(t,i,s,e,A){aR["selection"]["row"]=this.UUt_.AYt_();aR["selection"]["column"]=this.UUt_.oYt_();aR["background"]["fillstyle"]=null;aR["background"]["linestyle"]=null;aR["background"]["bounds"]=t;aR["text"]["fillstyle"]=null;aR["text"]["linestyle"]=null;aR["text"]["textstyle"]=A.clone();aR["text"]["value"]=e;aR["text"]["bounds"]=i;aR["icon"]["fillstyle"]=null;aR["icon"]["linestyle"]=null;aR["icon"]["value"]=null;aR["icon"]["bounds"]=s;return this}LYt_(t,i,s){if(t!=null&&(i["background"]["fillstyle"]!=null||i["background"]["linestyle"]!=null)){s.iQ_(il.BD_(i["background"]["fillstyle"]));s.rB_(hl.Wi_(i["background"]["linestyle"]));s.pR_(t)}return this}UYt_(t,i,s){if(t==null)return this;if(i["text"]["fillstyle"]!=null||i["text"]["linestyle"]!=null){s.iQ_(il.BD_(i["text"]["fillstyle"]));s.rB_(hl.Wi_(i["text"]["linestyle"]));s.pR_(t)}let e;const A=i["text"]["textstyle"],n=i["text"]["value"];if(n!=null&&A!=null){switch(A.vF_()){case Fa.X_:this.qDt_.SE_(dA.oe_);e=t.Qe_();break;case Fa.ne_:this.qDt_.SE_(dA.ne_);e=t.ye_();break;default:this.qDt_.SE_(dA.he_);e=t.we_();break}this.qDt_.a_(n);this.qDt_.g_(A).PX_(this.dYt_);this.qDt_.gR_(e,t.De_());this.qDt_.de_(t.Ie_());this.qDt_.render(s)}return this}YYt_(t,i,s,e){if(t==null)return this;if(i["icon"]["fillstyle"]!=null||i["icon"]["linestyle"]!=null){e.iQ_(il.BD_(i["icon"]["fillstyle"]));e.rB_(hl.Wi_(i["icon"]["linestyle"]));e.pR_(t)}if(i["icon"]["value"]!=null){e.save();const t=e.uS_(Gn.kI_(s.getX(),s.getY()));i["icon"]["value"].render(t);e.restore()}return this}SYt_(t,i){const s=this.FYt_(i);oR.ce_(0,0,s.Ie_(),s.Ts_());lR.ce_(0,0,s.Ie_(),s.Ts_()).Le_(-this.wX_,0);uR.ce_(0,0,s.Ie_(),s.Ts_());this.xYt_(oR,lR,uR,this.UUt_.mUt_(i),this.fX_);const e=this.UUt_.TYt_(i,aR);if(e==null)return this;const A=e["background"]["bounds"],n=e["text"]["bounds"],h=e["icon"]["bounds"];A!=null&&A.setX(s.getX()+A.getX()).setY(s.getY()+A.getY());n!=null&&n.setX(s.getX()+n.getX()).setY(s.getY()+n.getY());h!=null&&h.setX(s.getX()+h.getX()).setY(s.getY()+h.getY());this.LYt_(A,e,t);this.YYt_(h,e,s,t);this.UYt_(n,e,t);return this}FE_(){return this.fX_}KYt_(t){this.dYt_=t;return this}};i=t([_s("geotoolkit.controls.shapes.tableview.HeaderContent")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const cR="#e6e6e6",IR="#f5f5f5",fR="rgba(51, 116, 235, 0.4)",CR="rgba(255,0,0,0.2)",dR="rgba(51, 116, 235, 0.4)",BR="rgba(51, 116, 235, 0.8)",wR="white",QR="#6b6b6b",ER="12px Courier",pR=new mA,mR=new mA,yR=new mA;var DR=Ci(function(){let i=class t extends eE{constructor(t,i,s){super(t=Pi(t,{rows:typeof t=="number"?t:null,columns:i,tableview:s},!0));this.cYt_=!0;this.HYt_=Ss({selection:{},background:{fillstyle:null,linestyle:null,bounds:null},text:{textstyle:null,fillstyle:null,linestyle:null,shape:null,value:null,bounds:null},icon:{fillstyle:null,linestyle:null,value:null,bounds:null},ispicking:!1},["isPicking"],"TableView.CellStyle");this.fYt_=null;this.bUt_=null;this.CYt_=[];this.wX_=0;this.qYt_(t);this.NUt_=new hl({color:wR,pixelsnapmode:{x:!0,y:!0}});this.fX_=new qa({color:QR,alignment:Fa.X_,baseline:ka.j_,font:ER});this.RUt_=new wr(IR);this.kUt_=new wr(cR);this.JYt_=null;this.PYt_=null;this.FUt_=new wr(fR);this.xUt_=new wr(CR);this.VYt_=new wr(dR);this.OYt_=new hl({color:BR,width:1,pixelsnapmode:{x:!0,y:!0}});this.WYt_=null}qYt_(t){t["rows"]!==void 0&&(this.LUt_=t["rows"]);t["columns"]!==void 0&&(this.Qyt_=t["columns"]);t["tableview"]!==void 0&&(this.UUt_=t["tableview"]);this.YUt_=this.UUt_.TUt_();this.Jp_=this.YUt_.HUt_.Ie_()*this.Qyt_;this.Pp_=this.YUt_.HUt_.Ts_()*this.LUt_;this.ce_(0,0,this.Jp_,this.Pp_);return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.qYt_(t)}N_(){const t=super.N_();t["rows"]=this.LUt_;t["columns"]=this.Qyt_;t["tableview"]=this.UUt_;return t}zYt_(){return this.OYt_}XYt_(t){this.OYt_=hl.Wi_(t);return this}setData(t){if(t==null)return this;t["activerowfillstyle"]!==void 0&&(this.FUt_=il.BD_(t["activerowfillstyle"]));t["highlightrowfillstyle"]!==void 0&&(this.xUt_=il.BD_(t["highlightrowfillstyle"]));t["highlightcolumnfillstyle"]!==void 0&&(this.VYt_=il.BD_(t["highlightcolumnfillstyle"]));t["activecelllinestyle"]!==void 0&&this.XYt_(t["activecelllinestyle"]);t["activecellfillstyle"]!==void 0&&(this.WYt_=il.BD_(t["activecellfillstyle"]));t["defaultcellsize"]!==void 0&&(this.YUt_.HUt_=t["defaultcellsize"]);if(!t.hasOwnProperty("content"))return this;const i=t["content"];typeof i["padding"]=="number"&&(this.wX_=i["padding"]);if(i["gridstyle"]!==void 0)if(HG(i["gridstyle"])){this.NUt_={};this.NUt_["horizontal"]=hl.Wi_(i["gridstyle"]["horizontal"]);this.NUt_["vertical"]=hl.Wi_(i["gridstyle"]["vertical"])}else this.NUt_=hl.Wi_(i["gridstyle"]);i["textstyle"]!==void 0&&(this.fX_=qa.Wi_(i["textstyle"]));i["oddfillstyle"]!==void 0&&(this.RUt_=il.BD_(i["oddfillstyle"]));i["evenfillstyle"]!==void 0&&(this.kUt_=il.BD_(i["evenfillstyle"]));i["oddfillstylecolumn"]!==void 0&&(this.JYt_=il.BD_(i["oddfillstylecolumn"]));i["evenfillstylecolumn"]!==void 0&&(this.PYt_=il.BD_(i["evenfillstylecolumn"]));return this}jYt_(t){let i=0;if(this.bUt_!=null){this.qUt_[0]=0;for(let s=0;s<t;++s){i+=this.bUt_[s];s>0&&(this.qUt_[s]=this.qUt_[s-1]+this.bUt_[s-1])}}else i=this.YUt_.HUt_.Ts_()*t;return i}EYt_(t){let i=0,s;if(this.fYt_!=null&&this.fYt_.length===t){this.CYt_[0]=0;for(s=0;s<t;++s){i+=this.fYt_[s];s>0&&(this.CYt_[s]=this.CYt_[s-1]+this.fYt_[s-1])}}else{i=this.YUt_.HUt_.Ie_()*t;if(this.fYt_!=null)for(s=0;s<t;++s){this.fYt_[s]=this.YUt_.HUt_.Ie_();this.CYt_[s]=s*this.YUt_.HUt_.Ie_()}}return i}CUt_(t,i,s,e){this.fYt_=s;this.bUt_=e;this.CYt_=this.fYt_!=null?[]:null;this.qUt_=this.bUt_!=null?[]:null;this.LUt_=t;this.Qyt_=i;this.Pp_=this.jYt_(t);this.Jp_=this.EYt_(i);this.ce_(0,0,this.Jp_,this.Pp_);return this}JUt_(){return this.UUt_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;i.YR_(this);if(i.tk_()&&this.UUt_.ZYt_()==null){i.iQ_(wr.EQ_).pR_(this.getBounds());return this}this.zY_(i);return this}_Yt_(t,i,s,e,A,n,h){if(n!=null){let r,o,l,u,a;t.iQ_(n);t.beginPath();a=i%2==0&&h===!0||i%2!=0&&h===!1?i:i+1;for(let i=a;i<=s;i+=2){r=this.pYt_(-1,A);o=this.mYt_(e);l=this.PUt_(i);u=this.VUt_(i);t.moveTo(r,l).lineTo(o,l).lineTo(o,u).lineTo(r,u).lineTo(r,l)}t.closePath().sQ_()}return this}$Yt_(t,i,s,e,A,n,h){if(n!=null){let r,o,l,u,a;t.iQ_(n);t.beginPath();a=s%2==0&&h===!0||s%2!=0&&h===!1?s:s+1;for(let s=a;s<=e;s+=2){r=this.pYt_(s);o=this.mYt_(s);l=this.PUt_(-1,A);u=this.VUt_(i);t.moveTo(r,l).lineTo(o,l).lineTo(o,u).lineTo(r,u).lineTo(r,l)}t.closePath().sQ_()}return this}zUt_(t,i,s){this._Yt_(t,i.tTt_,i.iTt_,i.sTt_,s,this.RUt_,!1);this._Yt_(t,i.tTt_,i.iTt_,i.sTt_,s,this.kUt_,!0);this.$Yt_(t,i.iTt_,i.eTt_,i.sTt_,s,this.JYt_,!1);this.$Yt_(t,i.iTt_,i.eTt_,i.sTt_,s,this.PYt_,!0);return this}yYt_(t,i,s){if(this.CYt_==null)return Math.floor(t.we_()/this.YUt_.HUt_.Ie_());i=i==null?0:i;s=s==null?this.Qyt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.fYt_!=null?this.fYt_[e]:this.YUt_.HUt_.Ie_();if(this.CYt_[e]<=t.we_()&&t.we_()<=this.CYt_[e]+A)return e;t.we_()<this.CYt_[e]?s=e-1:i=e+1}return-1}DYt_(t,i,s){if(this.CYt_==null)return Math.floor(Math.min(this.Qyt_-1,t.Qe_()/this.YUt_.HUt_.Ie_()));s=s==null?this.Qyt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.fYt_!=null?this.fYt_[e]:this.YUt_.HUt_.Ie_(),n=this.fYt_!=null?this.fYt_[this.fYt_.length-1]:this.YUt_.HUt_.Ie_(),h=Math.min(t.Qe_(),this.CYt_[this.CYt_.length-1]+n);if(this.CYt_[e]<=h&&h<=this.CYt_[e]+A)return e;h<this.CYt_[e]?s=e-1:i=e+1}return-1}OUt_(t,i,s){if(this.qUt_==null)return Math.floor(t.Ee_()/this.YUt_.HUt_.Ts_());i=i==null?0:i;s=s==null?this.LUt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.bUt_!=null?this.bUt_[e]:this.YUt_.HUt_.Ts_();if(this.qUt_[e]<=t.Ee_()&&t.Ee_()<=this.qUt_[e]+A)return e;t.Ee_()<this.qUt_[e]?s=e-1:i=e+1}return-1}WUt_(t,i,s){if(this.qUt_==null)return Math.floor(Math.min(this.LUt_-1,t.pe_()/this.YUt_.HUt_.Ts_()));s=s==null?this.LUt_-1:s;while(i<=s){const e=Math.floor((i+s)/2),A=this.bUt_!=null?this.bUt_[e]:this.YUt_.HUt_.Ts_(),n=this.bUt_!=null?this.bUt_[this.bUt_.length-1]:this.YUt_.HUt_.Ts_(),h=Math.min(t.pe_(),this.qUt_[this.qUt_.length-1]+n);if(this.qUt_[e]<=h&&h<=this.qUt_[e]+A)return e;h<this.qUt_[e]?s=e-1:i=e+1}return-1}pYt_(t,i){if(t>=0){let i;i=this.CYt_!=null?this.CYt_[t]:t*this.YUt_.HUt_.Ie_();return i}return i!=null?i.we_():0}mYt_(t,i){if(t>=0){let i;i=this.CYt_!=null?this.CYt_[t]:t*this.YUt_.HUt_.Ie_();this.fYt_!=null?i+=this.fYt_[t]:i+=this.YUt_.HUt_.Ie_();return i}return i!=null?i.Qe_():0}PUt_(t,i){if(t>=0){let i;i=this.qUt_!=null?this.qUt_[t]:t*this.YUt_.HUt_.Ts_();return i}return i!=null?i.Ee_():0}VUt_(t,i){if(t>=0){let i;i=this.qUt_!=null?this.qUt_[t]:t*this.YUt_.HUt_.Ts_();this.bUt_!=null?i+=this.bUt_[t]:i+=this.YUt_.HUt_.Ts_();return i}return i!=null?i.pe_():0}XUt_(t,i,s,e,A){if(t>=0&&t<this.LUt_){A.iQ_(e);A.beginPath();const n=this.pYt_(-1,s),h=this.mYt_(i.sTt_),r=this.PUt_(t),o=this.VUt_(t);A.moveTo(n,r);A.lineTo(h,r);A.lineTo(h,o);A.lineTo(n,o);A.lineTo(n,r);A.closePath();A.sQ_()}return this}vYt_(t,i,s,e,A){if(t>=0&&t<this.Qyt_){A.iQ_(e);A.beginPath();const n=this.pYt_(t),h=this.mYt_(t),r=this.PUt_(-1,s),o=this.VUt_(i.iTt_);A.moveTo(n,r);A.lineTo(h,r);A.lineTo(h,o);A.lineTo(n,o);A.lineTo(n,r);A.closePath();A.sQ_()}return this}ATt_(t,i,s){if(this.NUt_==null)return this;let e,A,n,h;e=this.NUt_ instanceof hl?this.NUt_:this.NUt_["horizontal"];if(e instanceof hl){s.rB_(e);s.beginPath();A=this.pYt_(-1,i);n=this.mYt_(t.sTt_);for(let i=t.tTt_;i<=t.iTt_;i++){h=this.VUt_(i);s.moveTo(A,h);s.lineTo(n,h)}}s.closePath();s.stroke();return this}RYt_(t){this.cYt_=t;return this}nTt_(t,i,s){if(this.NUt_==null)return this;let e,A,n,h,r;s.beginPath();e=this.NUt_ instanceof hl?this.NUt_:this.NUt_["vertical"];if(e instanceof hl){n=this.pYt_(-1,i);h=this.PUt_(-1,i);r=this.VUt_(t.iTt_);s.rB_(e);s.moveTo(n,h);s.lineTo(n,r);for(let i=t.eTt_;i<=t.sTt_;i++)if(this.cYt_!==!1||i!==this.Qyt_-1){A=this.mYt_(i);s.moveTo(A,h);s.lineTo(A,r)}}s.closePath();s.stroke();return this}hTt_(t,i){const s=this.UUt_.ZYt_()!=null?this.rTt_:this.oTt_;for(let e=t.tTt_;e<=t.iTt_;e++)for(let A=t.eTt_;A<=t.sTt_;A++)this.tYt_(i,e,A,s);return this}lTt_(t,i,s,e,A){if(e!=null&&i>=s.eTt_&&i<=s.sTt_&&t>=s.tTt_&&t<=s.iTt_){const s={row:t,column:i};A.rB_(e);const n=this.pYt_(s["column"]),h=this.mYt_(s["column"]),r=this.PUt_(s["row"]),o=this.VUt_(s["row"]);A.beginPath();A.moveTo(n,r);A.lineTo(h,r);A.lineTo(h,o);A.lineTo(n,o);A.closePath();A.stroke()}return this}zY_(t){const i=t.Ji_().uI_(t.cR_());i.ce_({x:Math.max(0,i.getX()),y:Math.max(0,i.getY()),width:Math.max(0,i.Ie_()),height:Math.max(0,i.Ts_())});const s=this.yYt_(i),e=this.DYt_(i,s),A=this.OUt_(i),n=this.WUt_(i,A),h={tTt_:A,iTt_:n,eTt_:s,sTt_:e},r=this.UUt_.oYt_(),o=this.UUt_.AYt_();this.zUt_(t,h,i);this.xUt_!=null&&this.XUt_(o,h,i,this.xUt_,t);this.FUt_!=null&&this.UUt_.nYt_().length>0&&this.UUt_.nYt_().forEach((s=>{this.XUt_(s,h,i,this.FUt_,t)}));this.VYt_!=null&&this.vYt_(r,h,i,this.VYt_,t);this.UUt_.EUt_(A,n,s,e);this.hTt_(h,t);this.lTt_(this.UUt_.nYt_()[0],r,h,this.OYt_,t);this.ATt_(h,i,t);this.nTt_(h,i,t);return this}tYt_(t,i,s,e){const A=this.CYt_!=null?this.CYt_[s]:Math.round(this.YUt_.HUt_.Ie_()*s),n=this.fYt_!=null?this.fYt_[s]:this.YUt_.HUt_.Ie_(),h=this.qUt_==null?i*this.YUt_.HUt_.Ts_():this.qUt_[i],r=this.bUt_==null?this.YUt_.HUt_.Ts_():this.bUt_[i];t.save();const o=t.Ji_().rn_(new mA(A,h,A+n,h+r));t._b_(o,QA.ue_);e.call(this,t,i,s);t.restore();return this}oTt_(t,i,s){let e=this.CYt_!=null?this.CYt_[s]:Math.round(this.YUt_.HUt_.Ie_()*s);const A=this.qUt_==null?i*this.YUt_.HUt_.Ts_():this.qUt_[i];let n=0;this.NUt_!=null&&(this.NUt_ instanceof hl?n=this.NUt_.Ie_():this.NUt_["vertical"]!=null&&(n=this.NUt_["vertical"].Ie_()));switch(this.fX_.vF_()){case Fa.z_:e+=this.wX_+n;break;case Fa.X_:e+=(this.fYt_!=null?this.fYt_[s]:this.YUt_.HUt_.Ie_())-this.wX_-n;break;case Fa.ne_:e+=(this.fYt_!=null?this.fYt_[s]:this.YUt_.HUt_.Ie_())/2;break;default:e+=this.fYt_!=null?this.fYt_[s]:this.YUt_.HUt_.Ie_();break}const h=this.UUt_.pUt_(s,i);t.g_(this.fX_);t.drawText(e,A+(this.bUt_==null?this.YUt_.HUt_.Ts_():this.bUt_[i])/2,h);return this}uTt_(t,i){return new mA({x:this.CYt_!=null?this.CYt_[i]:i*this.YUt_.HUt_.Ie_(),y:this.qUt_!=null?this.qUt_[t]:t*this.YUt_.HUt_.Ts_(),width:this.fYt_!=null?this.fYt_[i]:this.YUt_.HUt_.Ie_(),height:this.bUt_!=null?this.bUt_[t]:this.YUt_.HUt_.Ts_()})}aTt_(t,i,s,e){t.ce_(0,0,e.Ie_(),e.Ts_());i.ce_(0,0,e.Ie_(),e.Ts_()).Le_(-this.wX_,0);s.ce_(0,0,e.Ie_(),e.Ts_());return this}gTt_(t,i,s,e){this.HYt_["selection"]["row"]=this.UUt_.AYt_();this.HYt_["selection"]["column"]=this.UUt_.oYt_();this.HYt_["background"]["fillstyle"]=null;this.HYt_["background"]["linestyle"]=null;this.HYt_["background"]["bounds"]=t;this.HYt_["text"]["fillstyle"]=null;this.HYt_["text"]["linestyle"]=null;this.HYt_["text"]["shape"]=null;this.HYt_["text"]["textstyle"]=this.fX_;this.HYt_["text"]["value"]=e;this.HYt_["text"]["bounds"]=i;this.HYt_["icon"]["fillstyle"]=null;this.HYt_["icon"]["linestyle"]=null;this.HYt_["icon"]["value"]=null;this.HYt_["icon"]["bounds"]=s;this.HYt_["border"]=null;this.HYt_["ispicking"]=!1;return this}cTt_(t,i,s,e){if(i==null)return this;if(t["icon"]["fillstyle"]!=null||t["icon"]["linestyle"]!=null){e.iQ_(il.BD_(t["icon"]["fillstyle"]));e.rB_(hl.Wi_(t["icon"]["linestyle"]));e.pR_(i)}const A=t["icon"]["value"];if(A!=null){e.save();const t=e.uS_(Gn.kI_(s.getX(),s.getY()));t.tk_()&&A.zC_()!=null&&(A.zC_()["transformation"]=t.Ji_());A.render(t);e.restore()}return this}ITt_(t,i,s,e,A){if(i==null)return this;let n=s.getX();const h=s.getY();if(t["text"]["fillstyle"]!=null||t["text"]["linestyle"]!=null){A.iQ_(il.BD_(t["text"]["fillstyle"]));A.rB_(hl.Wi_(t["text"]["linestyle"]));A.pR_(i)}const r=t["text"]["textstyle"],o=t["text"]["shape"];if(o!=null){if(o.$C_()){const t=o.getBounds().clone();t.setX(t.getX()+n).setY(t.getY()+h);o.ht_(t).render(A)}}else if(e!=null&&r!=null){switch(r.vF_()){case Fa.z_:n=i.we_();break;case Fa.X_:n=i.Qe_();break;case Fa.ne_:n=i.ye_();break;default:n=i.we_();break}A.g_(r);A.drawText(n,i.De_(),e)}return this}fTt_(t,i,s){const e=i.getX(),A=i.getY(),n=i.Ie_(),h=i.Ts_();if(t["border"]==null)return this;if(t["border"]["top"]!=null){s.beginPath();s.rB_(hl.Wi_(t["border"]["top"]));s.moveTo(e,A);s.lineTo(e+n,A);s.stroke()}if(t["border"]["right"]!=null){s.beginPath();s.rB_(hl.Wi_(t["border"]["right"]));s.moveTo(e+n,A);s.lineTo(e+n,A+h);s.stroke()}if(t["border"]["bottom"]!=null){s.beginPath();s.rB_(hl.Wi_(t["border"]["bottom"]));s.moveTo(e+n,A+h);s.lineTo(e,A+h);s.stroke()}if(t["border"]["left"]!=null){s.beginPath();s.rB_(hl.Wi_(t["border"]["left"]));s.moveTo(e,A+h);s.lineTo(e,A);s.stroke()}return this}CTt_(t,i,s){if(i!=null&&(t["background"]["fillstyle"]!=null||t["background"]["linestyle"]!=null)){s.iQ_(il.BD_(t["background"]["fillstyle"]));s.rB_(hl.Wi_(t["background"]["linestyle"]));s.pR_(i)}return this}rTt_(t,i,s){const e=this.uTt_(i,s);this.aTt_(pR,mR,yR,e);this.gTt_(pR,mR,yR,this.UUt_.pUt_(s,i));t.tk_()&&(this.HYt_["ispicking"]=!0);const A=this.UUt_.dTt_(s,i,this.HYt_);if(A!=null){const i=A["background"]["bounds"],s=A["text"]["bounds"],n=A["icon"]["bounds"];i!=null&&i.setX(e.getX()+i.getX()).setY(e.getY()+i.getY());s!=null&&s.setX(e.getX()+s.getX()).setY(e.getY()+s.getY());n!=null&&n.setX(e.getX()+n.getX()).setY(e.getY()+n.getY());this.CTt_(A,i,t);this.fTt_(A,e,t);this.cTt_(A,n,e,t);this.ITt_(A,s,e,A["text"]["value"],t)}return this}FE_(){return this.fX_}};i=t([_s("geotoolkit.controls.shapes.tableview.TableContent")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");function MR(t){return t&&(t.hasOwnProperty("vertical")||t.hasOwnProperty("horizontal"))}const vR=new KG;var bR=Ci({BTt_:"onColumnWidthChanging",wTt_:"onColumnWidthChanged",QTt_:"onRowHeightChanging",ETt_:"onRowHeightChanged"},2,"eyJDb2x1bW5XaWR0aENoYW5naW5nIjoiQlR0XyIsIkNvbHVtbldpZHRoQ2hhbmdlZCI6IndUdF8iLCJSb3dIZWlnaHRDaGFuZ2luZyI6IlFUdF8iLCJSb3dIZWlnaHRDaGFuZ2VkIjoiRVR0XyJ9");const NR="#bdbdbd",SR="white",GR="#6b6b6b",RR="Depth",kR="bold 11px Tahoma",FR=function(t,i){let s=0;(t.we_()<i.we_()||t.Qe_()>i.Qe_())&&(s=t.ye_()<i.ye_()?i.we_()-t.we_():i.Qe_()-t.Qe_());return s},xR=function(t,i){let s=0;(t.Ee_()<i.Ee_()||t.pe_()>i.pe_())&&(s=t.De_()<i.De_()?i.Ee_()-t.Ee_():i.pe_()-t.pe_());return s};var LR=Ci(function(){let i=class t extends sI{constructor(t){t==null&&(t={});super(t=qi(t,{rows:t["rows"]!=null&&t["rows"]>0?t["rows"]:1,cols:t["cols"]!=null&&t["cols"]>0?t["cols"]:1,bounds:t["bounds"]instanceof mA?t["bounds"]:new mA(0,0,400,400),fixedsize:t["fixedsize"]!=null&&t["fixedsize"],indexwidth:t["indexwidth"]!=null?t["indexwidth"]:100,headerheight:t["headerheight"]!=null?t["headerheight"]:20,cellsize:t["cellsize"]instanceof xA?t["cellsize"]:new xA(100,20)}));this.pTt_=!0;this.YUt_={HUt_:t["cellsize"],QYt_:t["headerheight"],KUt_:t["indexwidth"]};this.kY_(!0);this.mTt_=(new Sc).NT_(wc.BT_).iQ_(new wr(NR)).rB_(new hl({color:SR,pixelsnapmode:{x:!0,y:!0}}));this.yTt_=new YC({text:RR,ax:Math.round(this.YUt_.KUt_/2),ay:Math.round(this.YUt_.QYt_/2),textstyle:new qa({color:GR,baseline:ka.j_,alignment:Fa.ne_,font:kR,multiline:!0}),alignment:dA.ne_}).PX_(NC.sX_);this.pTt_=t["drawlastgridline"];this.DTt_=new TG(new DR(t["rows"],t["cols"],this).RYt_(this.pTt_));this.DTt_.kY_(!0);this.GY_(this.DTt_);this.MTt_=new TG(new gR(t["cols"],this).RYt_(this.pTt_));this.MTt_.kY_(!0);this.GY_(this.MTt_);this.vTt_=new TG(new sR(t["rows"],this));this.GY_(this.vTt_);this.GY_(this.mTt_);this.GY_(this.yTt_);this.bTt_();this.NTt_=t["fixedsize"];this.STt_=null;this.fYt_=null;this.GTt_=null;this.RTt_=null;this.kTt_=null;this.FTt_=null;this.xTt_=null;this.LTt_=null;this.UTt_=null;this.Jp_=0;this.Pp_=0;this.YTt_=[];this.TTt_=-1;this.KTt_=-1;this.setData(t)}CUt_(t,i,s){t=t==null?this.LUt_:t;i=i==null?this.Qyt_:i;if(this.LUt_===t&&this.Qyt_===i&&s===!1||t==null||i==null)return this;this.LUt_=t;this.Qyt_=i;this.HTt_();this.DTt_.CUt_(t,i,this.fYt_,this.bUt_);this.MTt_.CUt_(t,i,this.fYt_,this.bUt_);this.vTt_.CUt_(t,1,this.fYt_,this.bUt_);this.getBounds()!=null&&this.ht_(this.getBounds());return this}qTt_(t){return t<0?this.YUt_.QYt_:this.bUt_!=null?this.bUt_[t]:this.YUt_.HUt_.Ts_()}JTt_(t,i){if(t<0)return this.PTt_(i);if(t>=this.LUt_)throw new Error("Index is out of range");if(this.bUt_==null){this.NTt_=!1;this.HTt_()}const s={row:t,height:{old:this.bUt_[t],new:i,current:0}};this.notify(bR.QTt_,this,s);i=s["height"]["new"];const e=this.bUt_[t];if(i!==e){this.Pp_+=i-(e>0?e:0);this.bUt_[t]=i;this.DTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.MTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.vTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.VTt_();this.td_()}s["height"]["current"]=this.bUt_[t];this.notify(bR.ETt_,this,s);return this}OTt_(){return this.WTt_().Ts_()+this.zTt_().Ts_()}XTt_(t){return t!=null?this.jTt_(t):this.ZTt_().Ie_()+this.zTt_().Ie_()}jTt_(t){return t<0?this.YUt_.KUt_:this.fYt_!=null?this.fYt_[t]||0:this.YUt_.HUt_.Ie_()}_Tt_(t,i){if(t<0)return this.$Tt_(i);if(t>=this.Qyt_)throw new Error("Index is out of range");if(this.fYt_==null){this.NTt_=!1;this.HTt_()}const s={column:t,width:{old:this.fYt_[t],new:i,current:0}};this.notify(bR.BTt_,this,s);i=s["width"]["new"];const e=this.fYt_[t];if(i!==e){this.Jp_+=i-(e>0?e:0);this.fYt_[t]=i;this.DTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.MTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.vTt_.CUt_(this.LUt_,this.Qyt_,this.fYt_,this.bUt_);this.VTt_();this.td_()}s["width"]["current"]=this.fYt_[t];this.notify(bR.wTt_,this,s);return this}$Tt_(t){if(this.YUt_.KUt_===t)return this;const i={column:-1,width:{old:this.YUt_.KUt_,new:t,current:0}};this.notify(bR.BTt_,this,i);this.YUt_.KUt_=t;this.bTt_();i["width"]["current"]=t;this.notify(bR.wTt_,this,i);return this}tKt_(){return this.YUt_.KUt_}PTt_(t){if(this.YUt_.QYt_===t)return this;this.YUt_.QYt_=t;this.bTt_();return this}iKt_(){return this.YUt_.QYt_}TUt_(){return this.YUt_}sKt_(t){let i=this.eKt_().Ie_();const s=this.vTt_.$C_(),e=this.ot_().Ie_();let A;if((s||i>0)&&e>0){const n=s?-1:0;if(t){const t=undefined,h=e/(s?i+1:i);i=this.eKt_().Ie_();for(A=n;A<i;A++)this._Tt_(A,h)}else{let t=0,s;for(A=n;A<i;A++)t+=this.jTt_(A);for(A=n;A<i;A++){s=this.jTt_(A)*e/t;this._Tt_(A,s)}}}return this}ht_(t){if(t==null)return this;super.ht_(t);this.Lq_(new mA(0,0,t.Ie_(),t.Ts_()));this.bTt_();return this}AKt_(){return this.DTt_.dUt_().ot_()}zTt_(){return this.DTt_.dUt_().getBounds()}WTt_(){return this.MTt_.getBounds()}ZTt_(){return this.vTt_.getBounds()}eKt_(){return new xA(this.Qyt_,this.LUt_)}nKt_(){return this.NTt_}hKt_(t,i){t=t==null?0:t;i=i==null?this.zTt_().Qe_():i;let s=0,e=0,A=0,n=-1,h;if(this.bUt_==null){n=t/this.YUt_.HUt_.Ts_();h=i/this.YUt_.HUt_.Ts_()}else{while(n+1<this.bUt_.length){if(s>=t)break;n++;s+=this.bUt_[n]}e=1-(s-t)/this.bUt_[n<0?0:n];h=n;while(h+1<this.bUt_.length){if(s>=i)break;h++;s+=this.bUt_[h]}A=1-(s-i)/this.bUt_[h<0?0:h]}return{IT_:n+e,rKt_:h+A-1,range:h+A-1-n-e+1}}oKt_(t,i){t=t==null?0:t;i=i==null?this.zTt_().pe_():i;let s=0,e=0,A=0,n=-1,h;if(this.fYt_==null){n=t/this.YUt_.HUt_.Ie_();h=i/this.YUt_.HUt_.Ie_()}else{while(n+1<this.fYt_.length){if(s>=t)break;n++;s+=this.fYt_[n]}e=1-(s-t)/this.fYt_[n<0?0:n];h=n;while(h+1<this.fYt_.length){if(s>=i)break;h++;s+=this.fYt_[h]}A=1-(s-i)/this.fYt_[h<0?0:h]}return{IT_:n+e,rKt_:h+A,range:h+A-n-e+1}}lKt_(){const t=this.AKt_(),i=this.oKt_(t.we_(),t.Qe_()),s=this.hKt_(t.Ee_(),t.pe_());return new mA(i.IT_,s.IT_,i.rKt_,s.rKt_)}uKt_(t,i){if(t==null&&i==null)return this;let s,e;const A=this.AKt_(),n=this.aKt_(t==null?this.lKt_().Ee_():t,i==null?this.lKt_().we_():i);if(n==null||A.Fe_(n))return this;let h;if(t==null){h=new mA({x:n.we_(),y:A.Ee_(),width:n.Ie_(),height:n.Ts_()});e=xR(h,A)}else{t=Math.max(0,Math.floor(t))&&Math.min(Math.floor(t),this.LUt_-1);e=xR(n,A)}if(i==null){h=new mA({x:A.getX(),y:n.Ee_(),width:n.Ie_(),height:n.Ts_()});s=FR(h,A)}else{i=Math.max(0,Math.floor(i))&&Math.min(Math.floor(i),this.Qyt_-1);s=FR(n,A)}this.gKt_(s,e);return this}scroll(t,i){this.uKt_(t,i);return this}cKt_(){return new mA(0,0,this.Qyt_,this.LUt_)}gKt_(t,i){this.DTt_.dUt_().translate(t,i);this.MTt_.dUt_().translate(t,0);this.vTt_.dUt_().translate(0,i);this.VTt_();return this}VTt_(){this.DTt_.dUt_().iT_();this.MTt_.dUt_().iT_();this.vTt_.dUt_().iT_();return this}setData(t){if(t==null)return this;t.D_&&t.D_()==="geotoolkit.widgets.data.DataTableAdapter"&&(t=Pi(t.getData(),{}));const i=t;let s=0;if(i["defaultcellsize"]!=null||i["defaultheadersize"]!=null){s=i["defaultcellsize"]!=null?i["defaultcellsize"].Ie_():i["defaultheadersize"].Ie_();i["defaultcellsize"]=i["defaultcellsize"]||this.YUt_.HUt_;i["defaultheadersize"]=i["defaultheadersize"]||i["defaultcellsize"]||this.YUt_.QYt_;s===0&&(s=Math.max(i["defaultcellsize"].Ie_(),i["defaultheadersize"].Ie_()));i["defaultcellsize"].setSize(s,i["defaultcellsize"].Ts_());i["defaultheadersize"].setSize(s,i["defaultheadersize"].Ts_());this.fYt_=null;this.bUt_=null}this.DTt_.xlt_().setData(i);i["content"]!=null&&this.DTt_.xlt_().setData(i["content"]);this.MTt_.xlt_().setData(i);i["header"]!=null&&this.MTt_.xlt_().setData(i["header"]);this.vTt_.xlt_().setData(i);i["index"]!=null&&this.vTt_.xlt_().setData(i["index"]);if(i["header"]!=null){i["header"]["textstyle"]!=null&&this.yTt_.g_(i["header"]["textstyle"]);i["header"]["headerfillstyle"]!=null&&this.mTt_.iQ_(i["header"]["headerfillstyle"]);if(i["header"]["gridstyle"]!=null){let t=i["header"]["gridstyle"];if(t!=null&&MR(t)&&t["vertical"]!==t["horizontal"]){this.mTt_.GT_({left:t["vertical"]!=null,right:t["vertical"]!=null,bottom:t["horizontal"]!=null,top:t["horizontal"]!=null});t["vertical"]!=null&&t["horizontal"]!=null&&this.mTt_.YT_({left:t["vertical"],right:t["vertical"],top:t["horizontal"],bottom:t["horizontal"]});t=t["vertical"]||t["horizontal"]}else this.mTt_.GT_({left:!0,right:!0,bottom:!0,top:!0});this.mTt_.rB_(t)}}i["headerprovider"]!=null&&this.IKt_(i["headerprovider"]);i["headerformatprovider"]!=null&&this.fKt_(i["headerformatprovider"]);i["contentmeasure"]!=null&&this.CKt_(i["contentmeasure"]);i["contentprepare"]!=null&&this.dKt_(i["contentprepare"]);i["contentprovider"]!=null&&this.BKt_(i["contentprovider"]);i["contentformatprovider"]!=null&&this.wKt_(i["contentformatprovider"]);i["dataprovider"]!=null&&this.X$_(i["dataprovider"]);i["indexprepare"]!=null&&this.QKt_(i["indexprepare"]);i["indexprovider"]!=null&&this.EKt_(i["indexprovider"]);i["indexformatprovider"]!=null&&this.pKt_(i["indexformatprovider"]);i["markerprovider"]!=null&&this.mKt_(i["markerprovider"]);const e=i["fixedsize"];if(e!=null&&this.NTt_!==e){this.NTt_=e;this.NTt_===!0&&(this.fYt_=null);this.HTt_()}i["bounds"]!=null&&this.ht_(i["bounds"]);this.yKt_(i["defaultcellsize"],i["defaultheadersize"]);this.CUt_(i["rows"],i["cols"],i["defaultcellsize"]!==void 0||i["contentmeasure"]!==void 0);let A=null;i["indexvisible"]!=null&&(A=i["indexvisible"]!==!1);i["indextitle"]!=null&&this.DKt_(i["indextitle"]);if(i["index"]!=null)if(i["index"]==null){A=!1;this.DKt_(null)}else{i["index"]["visible"]!=null&&(A=i["index"]["visible"]===!0);i["index"]["title"]!=null&&this.DKt_(i["index"]["title"])}let n=null;i["headervisible"]!=null&&(n=i["headervisible"]!==!1);i["header"]!=null&&(i["header"]==null?n=!1:i["header"]["visible"]!=null&&(n=i["header"]["visible"]===!0));A!=null&&this.vTt_.nf_(A);A=this.vTt_.$C_();n!=null&&this.MTt_.nf_(n);n=this.MTt_.$C_();this.yTt_.nf_(A&&n);this.mTt_.nf_(A&&n);i["fittowidth"]===!0&&this.sKt_();const h=this.getBounds(),r=A?this.YUt_.KUt_:0,o=n?this.YUt_.QYt_:0;this.MTt_.ht_(new mA(r,0,h.Qe_(),o));this.vTt_.ht_(new mA(0,o,r,h.pe_()));this.DTt_.ht_(new mA(r,o,h.Qe_(),h.pe_()));const l=this.mTt_.gt_().Ie_()/2;this.yTt_.ht_(new mA(0,0,r+l,o));this.mTt_.ht_(new mA(0,0,r+l,o));this.VTt_();return this}DKt_(t){this.yTt_.a_(t);return this}MKt_(){return this.yTt_.SG_()}CKt_(t){this.STt_=t;return this}dKt_(t){ki('TableView.Options#setContentPrepare is deprecated since 4.0. Use "setDataProvider" instead');this.GTt_=t;return this}IKt_(t){ki('TableView.Options#setHeaderProvider is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.kTt_=t;return this}fKt_(t){ki('TableView.Options#setHeaderFormatProvider is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.vKt_=t;return this}BKt_(t){ki('TableView.Options#setContentProvider is deprecated since 4.0. Use "setDataProvider" instead');this.RTt_=t;return this}wKt_(t){ki('TableView.Options#setContentFormatProvider is deprecated since 4.0. Use "setDataProvider" instead');this.bKt_=t;return this}QKt_(t){ki('TableView.Options#setIndexPrepare is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.FTt_=t;return this}EKt_(t){ki('TableView.Options#setIndexProvider is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.xTt_=t;return this}BUt_(t,i){return this.z$_!=null&&this.z$_.BUt_!=null?this.z$_.BUt_(t,i):this.FTt_==null?null:typeof this.FTt_=="function"?this.FTt_.call(this,t>>0,i>>0):this.FTt_["prepareIndex"](t>>0,i>>0)}wUt_(t){return this.z$_!=null?this.z$_.wUt_(t):this.xTt_!=null?typeof this.xTt_=="function"?this.xTt_.call(this,t>>0):this.xTt_["getIndexData"](t>>0):"Row #"+t}QUt_(t){return this.z$_!=null&&this.z$_.QUt_!=null?this.z$_.QUt_(t):this.UTt_!=null&&(typeof this.UTt_=="function"?this.UTt_.call(this,t>>0):this.UTt_["getMarkerData"](t>>0))}NKt_(t){const i=function(t,i){return t.length===i.length&&t.every((function(t){return i.indexOf(t)!==-1}))};t==null&&(t=[]);if(!i(t=Array.isArray(t)?t:[t],this.YTt_)){this.YTt_=t.slice(0);this.vn_();this.td_()}return this}nYt_(){return this.YTt_}XUt_(t){if(this.TTt_!==t){this.TTt_=t;this.vn_();this.td_()}return this}AYt_(){return this.TTt_}vYt_(t){if(this.KTt_!==t){this.KTt_=t;this.vn_();this.td_()}return this}oYt_(){return this.KTt_}Ayt_(t,i){let s;if(t>=0){let e=0;if(this.fYt_!=null)for(let A=0;A<this.Qyt_;A++){let n=this.fYt_!=null?this.fYt_[A]:this.YUt_.HUt_.Ie_();n=typeof n=="number"&&n>0?n:0;if(e+n>t){s=A+(i===!0?(t-e)/n:0);break}e+=n}else{s=t/this.YUt_.HUt_.Ie_();s=i===!0?s:Math.floor(s)}}s==null&&(s=-1);return s}Fyt_(t,i){let s;if(t>=0){let e=0;if(this.bUt_!=null)for(let A=0;A<this.LUt_;A++){let n=this.bUt_!=null?this.bUt_[A]:this.YUt_.HUt_.Ts_();n=typeof n=="number"&&n>0?n:0;if(e+n>t){s=A+(i===!0?(t-e)/n:0);break}e+=n}else{s=t/this.YUt_.HUt_.Ts_();s=i===!0?s:Math.floor(s)}}s==null&&(s=-1);return s}SKt_(t,i){if(t instanceof lA){i=t.y;t=t.x}let s=this.if_().transformPoint(new lA(t,i)),e=this.vTt_.dUt_().if_().aI_(s);e.x>this.ZTt_().Ie_()&&(e=null);s=this.MTt_.dUt_().if_().aI_(s,s);t=s.x;i=s.y;const A=Math.floor(i/this.MTt_.getBounds().Ts_());return new lA(e!=null?-1:this.Ayt_(t),A)}GKt_(t,i){if(t instanceof lA){i=t.y;t=t.x}let s=this.if_().transformPoint(new lA(t,i));const e=undefined;if(this.vTt_.dUt_().if_().aI_(s).x>=this.ZTt_().Ie_())return new lA(-1,-1);s=this.vTt_.dUt_().if_().aI_(s,s);t=s.x;i=s.y;const A=Math.floor(t/this.vTt_.getBounds().Ie_());return new lA(A,this.Fyt_(i))}RKt_(t,i,s){if(t instanceof lA){i=t.y;t=t.x}let e=this.if_().transformPoint(new lA(t,i));e=this.DTt_.dUt_().if_().aI_(e,e);i=i<=this.MTt_.getBounds().Ts_()?-1:e.y;t=t<=this.vTt_.getBounds().Ie_()?-1:e.x;return new lA(this.Ayt_(t,s),this.Fyt_(i,s))}aKt_(t,i){if(i>=this.Qyt_||t>=this.LUt_)return null;let s=0,e=0,A;if(this.bUt_==null)e=this.YUt_.HUt_.Ts_()*t;else for(A=0;A<t;A++)e+=this.bUt_[A]>0?this.bUt_[A]:0;const n=Math.floor(t);let h=0;n>=0&&(h=this.bUt_!=null?this.bUt_[n]:this.YUt_.HUt_.Ts_());const r=t-n;let o=0;if(o>0&&n<this.bUt_.length-1){const t=undefined;o=(this.bUt_!=null?this.bUt_[n+1]:this.YUt_.HUt_.Ts_())*r}if(i===-1)return new mA(0,e,this.vTt_.getBounds().Ie_(),e+h+o);if(this.fYt_==null)s=this.YUt_.HUt_.Ie_()*i;else for(let t=0;t<i;t++)s+=this.fYt_[t]>0?this.fYt_[t]:0;const l=Math.floor(i);let u=0;l>=0&&(u=this.fYt_!=null?this.fYt_[l]:this.YUt_.HUt_.Ie_());const a=i-l;let g=0;if(a>0&&l<this.fYt_.length-1){const t=undefined;g=(this.fYt_!=null?this.fYt_[l+1]:this.YUt_.HUt_.Ie_())*a}return new mA(s,e,s+u+g,e+h+o)}EUt_(t,i,s,e){return this.z$_!=null&&this.z$_.EUt_!=null?this.z$_.EUt_(t>>0,i>>0,s>>0,e>>0):this.GTt_!=null?typeof this.GTt_=="function"?this.GTt_.call(this,t>>0,i>>0,s>>0,e>>0):this.GTt_["prepareContent"](t>>0,i>>0,s>>0,e>>0):null}pUt_(t,i){return this.z$_!=null?this.z$_.pUt_(t>>0,i>>0):this.RTt_!=null?typeof this.RTt_=="function"?this.RTt_.call(this,t>>0,i>>0):this.RTt_["getContentData"](t>>0,i>>0):t+"x"+i}pKt_(t){ki('TableView.Options#setIndexFormatProvider is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.LTt_=t;return this}mKt_(t){ki('TableView.Options#setMarkerProvider is deprecated since 4.0. Use "setDataProvider" instead');if(t==null)return this;this.UTt_=t;return this}mUt_(t){return this.z$_!=null?this.z$_.mUt_(t>>0):this.kTt_!=null?typeof this.kTt_=="function"?this.kTt_.call(this,t>>0):this.kTt_["getHeaderData"](t>>0):"Column #"+t}kKt_(t){if(t==null)return this;this.mTt_.iQ_(il.BD_(t));return this}FKt_(){return this.mTt_.ct_()}xKt_(){const t=[];this.Jp_=0;for(let i=0;i<this.Qyt_;i++){let s=this.YUt_.HUt_.Ie_();this.fYt_!=null&&this.fYt_[i]!=null&&(s=this.fYt_[i]);s=s>0?s:0;let e={width:s};e=this.LKt_(i,this.MTt_.xlt_().FE_(),this.DTt_.xlt_().FE_(),e);t[i]=e["width"];this.Jp_+=e["width"]}return t}UKt_(){const t=[];this.Pp_=0;for(let i=0;i<this.LUt_;i++){let s=this.YUt_.HUt_.Ts_();this.bUt_!=null&&this.bUt_[i]!=null&&(s=this.bUt_[i]);s=s>0?s:0;let e={height:s};e=this.YKt_(i,this.MTt_.xlt_().FE_(),this.DTt_.xlt_().FE_(),e);t[i]=e["height"];this.Pp_+=e["height"]}return t}HTt_(){if(this.NTt_===!0){this.Jp_=this.YUt_.HUt_.Ie_()*this.Qyt_;return this}this.fYt_=this.xKt_();this.bUt_=this.UKt_();return this}dUt_(){return this.DTt_}TKt_(){return this.MTt_}KKt_(){return this.vTt_}Z$_(){return this.z$_}X$_(t){this.z$_=t;return this}bTt_(){const t=this.vTt_.$C_(),i=this.MTt_.$C_(),s=this.getBounds();this.DTt_.ht_(new mA(t?this.YUt_.KUt_:0,i?this.YUt_.QYt_:0,s.Ie_(),s.Ts_()));t&&this.vTt_.ht_(new mA(0,i?this.YUt_.QYt_:0,this.YUt_.KUt_,s.Ts_()));i&&this.MTt_.ht_(new mA(t?this.YUt_.KUt_:0,0,s.Ie_(),this.YUt_.QYt_));if(t&&i){const t=this.mTt_.gt_().Ie_()/2;this.mTt_.ht_(new mA(0,0,this.YUt_.KUt_+t,this.YUt_.QYt_));this.yTt_.gR_(Math.round(this.YUt_.KUt_/2),Math.round(this.YUt_.QYt_/2))}}yKt_(t,i){if(t==null)return this;i==null&&(i=t);this.YUt_.HUt_=t;this.YUt_.QYt_=i.Ts_();this.bTt_();return this}ZYt_(){return this.z$_&&this.z$_.yUt_!==vR.yUt_?this.z$_.yUt_:this.bKt_}NYt_(){return this.z$_&&this.z$_.DUt_!==vR.DUt_?this.z$_.DUt_:this.vKt_}ZUt_(){return this.z$_&&this.z$_.MUt_!==vR.MUt_?this.z$_.MUt_:this.LTt_}LKt_(t,i,s,e){if(this.STt_!=null){if(typeof this.STt_=="function")return this.STt_.call(this,t>>0,i,s,e);let A=this.STt_["measurecolumn"];if(!A){A=this.STt_["measureColumn"];if(A)ki('TableView.Options#measureColumn is deprecated since 4.0. Use "measurecolumn" instead');else{A=this.STt_["measureContent"];A&&ki('TableView.Options#measureContent is deprecated since 4.0. Use "measurecolumn" instead')}}if(A)return A(t>>0,i,s,e)}return e}YKt_(t,i,s,e){const A=this.HKt_();return A?A(t,i,s,e):e}HKt_(){if(this.STt_==null||typeof this.STt_=="function")return null;let t=this.STt_["measurerow"];if(!t){t=this.STt_["measureRow"];t&&ki('TableView.Options#measureRow is deprecated since 4.0. Use "measurerow" instead')}return t}dTt_(t,i,s){return this.z$_!=null?this.z$_.yUt_(t>>0,i>>0,s):this.bKt_!=null?typeof this.bKt_=="function"?this.bKt_.call(this,t>>0,i>>0,s):this.bKt_["getContentFormat"](t>>0,i>>0,s):s}TYt_(t,i){return this.z$_!=null?this.z$_.DUt_(t>>0,i):this.vKt_!=null?typeof this.vKt_=="function"?this.vKt_.call(this,t>>0,i):this.vKt_["getHeaderFormat"](t>>0,i):i}gYt_(t,i){if(this.z$_!=null)return this.z$_.MUt_(t>>0,i);if(this.LTt_!=null){if(typeof this.LTt_!="function")return this.LTt_["getIndexFormat"](t>>0,i);this.LTt_.call(this,t>>0,i)}return i}};i=t([_s("geotoolkit.controls.shapes.tableview.TableView")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRUYWJsZUJvdW5kcyI6IkNVdF8iLCJnZXRSb3dIZWlnaHQiOiJxVHRfIiwic2V0Um93SGVpZ2h0IjoiSlR0XyIsImdldFJvd3NTaXplIjoiT1R0XyIsImdldENvbHVtbnNTaXplIjoiWFR0XyIsImdldENvbHVtbldpZHRoIjoialR0XyIsInNldENvbHVtbldpZHRoIjoiX1R0XyIsInNldEluZGV4Q29sdW1uV2lkdGgiOiIkVHRfIiwiZ2V0SW5kZXhDb2x1bW5XaWR0aCI6InRLdF8iLCJzZXRIZWFkZXJSb3dIZWlnaHQiOiJQVHRfIiwiZ2V0SGVhZGVyUm93SGVpZ2h0IjoiaUt0XyIsImdldERlZmF1bHRUYWJsZUVsZW1lbnRTaXplIjoiVFV0XyIsImZpdFRvV2lkdGgiOiJzS3RfIiwic2V0Qm91bmRzIjoiaHRfIiwiZ2V0VmlzaWJsZVRhYmxlTW9kZWxMaW1pdHMiOiJBS3RfIiwiZ2V0Q29udGVudFRhYmxlQm91bmRzIjoielR0XyIsImdldEhlYWRlckJvdW5kcyI6IldUdF8iLCJnZXRGaXhlZFRhYmxlQm91bmRzIjoiWlR0XyIsImdldFRhYmxlU2l6ZSI6ImVLdF8iLCJnZXRGaXhlZFNpemUiOiJuS3RfIiwiZ2V0VmlzaWJsZVRhYmxlTGltaXRzIjoibEt0XyIsInNldFZpc2libGVUYWJsZUxpbWl0cyI6InVLdF8iLCJnZXRUYWJsZUJvdW5kcyI6ImNLdF8iLCJ0cmFuc2xhdGVUYWJsZSI6ImdLdF8iLCJhZGp1c3RUYWJsZSI6IlZUdF8iLCJzZXRJbmRleFRpdGxlIjoiREt0XyIsImdldEluZGV4VGl0bGUiOiJNS3RfIiwic2V0Q29udGVudE1lYXN1cmUiOiJDS3RfIiwic2V0Q29udGVudFByZXBhcmUiOiJkS3RfIiwic2V0SGVhZGVyUHJvdmlkZXIiOiJJS3RfIiwic2V0SGVhZGVyRm9ybWF0UHJvdmlkZXIiOiJmS3RfIiwic2V0Q29udGVudFByb3ZpZGVyIjoiQkt0XyIsInNldENvbnRlbnRGb3JtYXRQcm92aWRlciI6IndLdF8iLCJzZXRJbmRleFByZXBhcmUiOiJRS3RfIiwic2V0SW5kZXhQcm92aWRlciI6IkVLdF8iLCJwcmVwYXJlSW5kZXgiOiJCVXRfIiwiZ2V0SW5kZXhEYXRhIjoid1V0XyIsImdldE1hcmtlckRhdGEiOiJRVXRfIiwic2V0QWN0aXZlUm93cyI6Ik5LdF8iLCJnZXRBY3RpdmVSb3dzIjoibll0XyIsImhpZ2hsaWdodFJvdyI6IlhVdF8iLCJnZXRIaWdobGlnaHRlZFJvdyI6IkFZdF8iLCJoaWdobGlnaHRDb2x1bW4iOiJ2WXRfIiwiZ2V0SGlnaGxpZ2h0ZWRDb2x1bW4iOiJvWXRfIiwiZ2V0Q29sdW1uIjoiQXl0XyIsImdldFJvdyI6IkZ5dF8iLCJwaWNrSGVhZGVyIjoiU0t0XyIsInBpY2tGaXhlZFJvdyI6IkdLdF8iLCJyZXNvbHZlQ2VsbENvb3JkaW5hdGUiOiJSS3RfIiwiZ2V0Q2VsbEJvdW5kcyI6ImFLdF8iLCJwcmVwYXJlQ29udGVudCI6IkVVdF8iLCJnZXRDb250ZW50RGF0YSI6InBVdF8iLCJzZXRJbmRleEZvcm1hdFByb3ZpZGVyIjoicEt0XyIsInNldE1hcmtlclByb3ZpZGVyIjoibUt0XyIsImdldEhlYWRlckRhdGEiOiJtVXRfIiwiZ2V0RGF0YVByb3ZpZGVyIjoiWiRfIiwic2V0RGF0YVByb3ZpZGVyIjoiWCRfIn19fSAg");const UR=new Yu,YR=function(t){let i=Number.MAX_SAFE_INTEGER;t["left"]&&(i=Math.min(t["left"].length,i));t["right"]&&(i=Math.min(t["right"].length,i));t["top"]&&(i=Math.min(t["top"].length,i));return i},TR=function(t,i){return t.every((function(t){return t!==i}))};var KR=Ci(function(){let i=class t extends su{constructor(t){const i={name:"Ternary Chart",data:null,ternarygrid:null};super(t);this.qKt_=null;this.center=null;this.data=null;this.setData(qi(t,i,!0))}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setData(t);return this}N_(){const t=super.N_();t["ternarygrid"]=this.qKt_;return t}setData(t){let i=0;if(this.data!=null)for(i=0;i<this.data.length;i++){const t=this.data[i];t["fillstyleobject"]!=null&&this.iC_(t["fillstyleobject"],rh.sC_,this.oQ_());t["linestyleobject"]!=null&&this.iC_(t["linestyleobject"],rh.sC_,this.oQ_())}t["name"]!=null&&this.HC_(t["name"]);this.data=t["data"];this.qKt_=t["ternarygrid"]!=null?t["ternarygrid"]:this.qKt_;if(this.qKt_!=null){const t=this.qKt_.JKt_();this.center=t["center"];this.PKt_=t["size2"];this.bounds=new mA(this.center.x-this.PKt_,this.center.y-this.PKt_,this.center.x+this.PKt_,this.center.y+this.PKt_)}for(i=0;i<this.data.length;i++){const t=this.data[i];if(t["fillstyle"]!=null){t["fillstyleobject"]=il.BD_(t["fillstyle"]);this.tC_(t["fillstyleobject"],rh.sC_,this.oQ_())}if(t["linestyle"]!=null){t["linestyleobject"]=hl.Wi_(t["linestyle"]);this.tC_(t["linestyleobject"],rh.sC_,this.oQ_())}}this.td_();return this}getData(){return{name:this.dn_(),data:this.data,ternarygrid:this.qKt_}}dispose(){if(this.data!=null)for(let t=0;t<this.data.length;t++){const i=this.data[t];i["fillstyleobject"]!=null&&this.iC_(i["fillstyleobject"],rh.sC_,this.oQ_());i["linestyleobject"]!=null&&this.iC_(i["linestyleobject"],rh.sC_,this.oQ_())}super.dispose()}getBounds(){return this.bounds!=null?this.bounds:null}ht_(t){this.bounds=t;this.vn_();return this}render(t){if(this.data==null||this.qKt_==null)return;const i=this.qKt_.JKt_();this.center=i["center"];this.PKt_=i["size2"];const s=this.sd_()?t.uS_(this.sd_()):t;for(let t=0;t<this.data.length;t++)this.hSt_(s,this.data[t],t)}hSt_(t,i,s){const e=i["values"],A=YR(e);if(A===0)return;let n=0;const h=[];let r=null;const o=i["fillstyleobject"]!=null||i["linestyleobject"]!=null?UR.clear():null;for(n=0;n<A;n++){const t=e["left"]!=null?e["left"][n]:null,i=e["right"]!=null?e["right"][n]:null,s=e["top"]!=null?e["top"][n]:null,A=this.qKt_.VKt_({left:t,right:i,top:s}).translate(this.center.x,this.center.y);if(n===0){r=A;o&&o.moveTo(A.x,A.y)}h.push(A);o&&o.lineTo(A.x,A.y)}if(o){o.lineTo(r.x,r.y);o.iQ_(i["fillstyleobject"]);o.rB_(i["linestyleobject"]);o.render(t)}const l=[];if(i["symbol"]!=null||i["hightlightedsymbol"]!=null){const s=i["symbol"]?i["symbol"]:t.tk_()?i["hightlightedsymbol"]:null,A=i["hightlightedsymbol"]?i["hightlightedsymbol"]:s;let r,o;const u=()=>{const t=this.qKt_.OKt_(this.qKt_.VKt_({top:e["top"]!=null?e["top"][o]:null,left:e["left"]!=null?e["left"][o]:null,right:e["right"]!=null?e["right"][o]:null}));l.push({index:o,top:e["top"]!=null?e["top"][o]:t["top"],left:e["left"]!=null?e["left"][o]:t["left"],right:e["right"]!=null?e["right"][o]:t["right"],color:e["color"]!=null?e["color"][o]:null,size:e["size"]!=null?e["size"][o]:null})};for(n=0;n<h.length;n++){r=e["selected"]&&e["selected"][n]===!0?A:s;if(r){r.gR_(h[n]);e["color"]&&i["colorprovider"]&&r.iQ_({color:i["colorprovider"].getColor(e["color"][n])});e["size"]&&r.setSize(e["size"][n],e["size"][n]);if(t.tk_()){o=n;t.pO_(r,u)}else r.render(t)}}}if(t.tk_()&&l.length>0){t.mO_(ks({visual:this,series:s,indices:l.map((t=>t["index"])),points:l},["visual","series","indices","points"]));t.mO_(new jf(this,{series:s,indices:l.map((t=>t["index"])),points:l}))}}rSt_(){if(this.data.length>0){for(let t=0;t<this.data.length;++t){const i=this.data[t]["values"];if(i["selected"]){const t=YR(i);for(let s=0;s<t;++s)i["selected"][s]=!1}}this.td_()}}vEt_(t,i,s){if(this.data.length>i){const e=this.data[i]["values"];e["selected"]||(e["selected"]=[]);const A=YR(e);for(let i=0;i<A;++i)TR(t,i)?s===!0&&(e["selected"][i]=!1):e["selected"][i]=!0;this.td_()}return this}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}else e=bC.select(this.getRoot(),t.x,t.y,i||0).filter(s);return e.length>0?e[0].getData():null}};i=t([_s("geotoolkit.scene.shapes.TernaryChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0Qm91bmRzIjoiaHRfIiwicmVzZXRIaWdobGlnaHRpbmciOiJyU3RfIiwiaGlnaGxpZ2h0SW5kaWNlcyI6InZFdF8iLCJoaXRUZXN0IjoiJFhfIn19fSAg");const HR=new TA;var qR=Ci(function(){let i=class t extends eE{constructor(t){const i=(t=Pi(t,{center:{x:0,y:0},size:100},!0))["size"],s=i/2,e=t["center"],A=undefined;super(new mA(e.x-s,e.y-s,e.x+s,e.y+s));this.center=e;this.size=i;this.PKt_=s;this.q8_=this.PKt_/100;this.J8_=this.PKt_*Math.sqrt(3)/100;this.FMt_=null;this.WKt_=null;this.zKt_=null;this.XKt_=null;this.jKt_=10;this.ZKt_=10;this._Kt_=10;this.$Kt_=!1;this.tHt_=!1;this.iHt_=!1;this.sHt_=null;this.eHt_=null;this.AHt_=null;this.nHt_=!1;this.hHt_=!1;this.rHt_=!1;this.oHt_=null;this.lHt_=null;this.uHt_=null;this.aHt_=null;this.gHt_=null;this.cHt_=null;this.IHt_=!1;this.borderStyle=null;this.options=t;this.fHt_(t)}fHt_(t){t["linestyle"]=hl.Wi_(t["linestyle"]);t["center"]==null||t["center"]instanceof lA||(t["center"]=new lA(t["center"]["x"],t["center"]["y"]));t["center"]==null&&(t["center"]=new lA(0,0));t["limits"]==null&&(t["limits"]={});t["gridlines"]==null&&(t["gridlines"]={});t["labels"]==null&&(t["labels"]={});t["border"]==null&&(t["border"]={});const i=t["limits"];(i["left"]==null||typeof i["left"]["min"]!="number"||typeof i["left"]["max"]!="number"||i["left"]["min"]>=i["left"]["max"])&&(i["left"]=null);(i["right"]==null||typeof i["right"]["min"]!="number"||typeof i["right"]["max"]!="number"||i["right"]["min"]>=i["right"]["max"])&&(i["right"]=null);(i["top"]==null||typeof i["top"]["min"]!="number"||typeof i["top"]["max"]!="number"||i["top"]["min"]>=i["top"]["max"])&&(i["top"]=null);const s=t["gridlines"];s["left"]==null&&(s["left"]={});s["right"]==null&&(s["right"]={});s["top"]==null&&(s["top"]={});const e=s["top"],A=s["left"],n=s["right"];e["linestyle"]==null?e["linestyle"]=t["linestyle"]:e["linestyle"]instanceof hl||(e["linestyle"]=new hl(e["linestyle"]));A["linestyle"]==null?A["linestyle"]=t["linestyle"]:A["linestyle"]instanceof hl||(A["linestyle"]=new hl(A["linestyle"]));n["linestyle"]==null?n["linestyle"]=t["linestyle"]:n["linestyle"]instanceof hl||(n["linestyle"]=new hl(n["linestyle"]));const h=qa.Wi_(t["textstyle"])||new qa({color:"black"});e["textstyle"]=qa.Wi_(e["textstyle"])||h;A["textstyle"]=qa.Wi_(A["textstyle"])||h;n["textstyle"]=qa.Wi_(n["textstyle"])||h;e["visiblelabels"]==null&&(e["visiblelabels"]=!0);A["visiblelabels"]==null&&(A["visiblelabels"]=!0);n["visiblelabels"]==null&&(n["visiblelabels"]=!0);e["step"]==null&&(e["step"]=10);e["visible"]==null&&(e["visible"]=!0);A["step"]==null&&(A["step"]=10);A["visible"]==null&&(A["visible"]=!0);n["step"]==null&&(n["step"]=10);n["visible"]==null&&(n["visible"]=!0);const r=t["labels"];r["left"]==null&&(r["left"]={});r["right"]==null&&(r["right"]={});r["top"]==null&&(r["top"]={});const o=r["top"],l=r["left"],u=r["right"];o["textstyle"]=qa.Wi_(o["textstyle"])||h;l["textstyle"]=qa.Wi_(l["textstyle"])||h;u["textstyle"]=qa.Wi_(u["textstyle"])||h;o["text"]==null&&(o["text"]=null);l["text"]==null&&(l["text"]=null);u["text"]==null&&(u["text"]=null);const a=t["border"];a["linestyle"]==null?a["linestyle"]=t["linestyle"]:a["linestyle"]instanceof hl||(a["linestyle"]=new hl(a["linestyle"]));a["visible"]==null&&(a["visible"]=!0);this.center=t["center"];this.size=t["size"];this.PKt_=this.size/2;this.q8_=this.PKt_/100;this.J8_=this.PKt_*Math.sqrt(3)/100;this.FMt_=i;this.WKt_=e["linestyle"];this.zKt_=A["linestyle"];this.XKt_=n["linestyle"];this.jKt_=e["step"];this.ZKt_=A["step"];this._Kt_=n["step"];this.$Kt_=e["visible"];this.tHt_=A["visible"];this.iHt_=n["visible"];this.sHt_=e["textstyle"];this.eHt_=A["textstyle"];this.AHt_=n["textstyle"];this.nHt_=e["visiblelabels"];this.hHt_=A["visiblelabels"];this.rHt_=n["visiblelabels"];this.oHt_=o["textstyle"];this.lHt_=l["textstyle"];this.uHt_=u["textstyle"];this.aHt_=o["text"];this.gHt_=l["text"];this.cHt_=u["text"];this.IHt_=a["visible"];this.borderStyle=a["linestyle"];t["linestyle"]!==void 0&&this.rB_(t["linestyle"])}nA_(t){switch(t){case"top":return this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["min"]:0;case"left":return this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["min"]:0;case"right":return this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["min"]:0}return Number.NaN}hA_(t){switch(t){case"top":return this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["max"]:100;case"left":return this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["max"]:100;case"right":return this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["max"]:100}return Number.NaN}VKt_(t){this.FMt_!=null&&this.FMt_["left"]!=null&&t["left"]!=null&&(t["left"]=(t["left"]-this.FMt_["left"]["min"])/(this.FMt_["left"]["max"]-this.FMt_["left"]["min"])*100);this.FMt_!=null&&this.FMt_["right"]!=null&&t["right"]!=null&&(t["right"]=(t["right"]-this.FMt_["right"]["min"])/(this.FMt_["right"]["max"]-this.FMt_["right"]["min"])*100);this.FMt_!=null&&this.FMt_["top"]!=null&&t["top"]!=null&&(t["top"]=(t["top"]-this.FMt_["top"]["min"])/(this.FMt_["top"]["max"]-this.FMt_["top"]["min"])*100);return this.CHt_(t)}CHt_(t){const i=t["right"]!=null?t["right"]:100-t["left"]-t["top"],s=t["top"]!=null?t["top"]:100-t["right"]-t["left"];return new lA(this.size*this.q8_*(2*i+s)/100-this.PKt_,-this.size*this.J8_*s/100+this.PKt_)}OKt_(t){const i=this.dHt_(t);this.FMt_==null||this.FMt_["left"]==null||isNaN(i["left"])||(i["left"]=i["left"]/100*(this.FMt_["left"]["max"]-this.FMt_["left"]["min"])+this.FMt_["left"]["min"]);this.FMt_==null||this.FMt_["right"]==null||isNaN(i["right"])||(i["right"]=i["right"]/100*(this.FMt_["right"]["max"]-this.FMt_["right"]["min"])+this.FMt_["right"]["min"]);this.FMt_==null||this.FMt_["top"]==null||isNaN(i["top"])||(i["top"]=i["top"]/100*(this.FMt_["top"]["max"]-this.FMt_["top"]["min"])+this.FMt_["top"]["min"]);return i}dHt_(t){let i=-(t.getY()-this.PKt_)*100/this.size/this.J8_,s=((t.getX()+this.PKt_)*100/this.size/this.q8_-i)/2,e=100-i-s;if(i<0||i>100||s<0||s>100||e<0||e>100){i=Number.NaN;s=Number.NaN;e=Number.NaN}return{left:e,right:s,top:i}}JKt_(){return{center:this.center,size:this.size,size2:this.PKt_}}render(t){this.A0_(t);this.BHt_(t);this.FT_(t);this.x__(t)}FT_(t){if(!this.IHt_)return;const i=this.CHt_({left:100,right:0}).translate(this.center["x"],this.center["y"]),s=this.CHt_({left:0,right:100}).translate(this.center["x"],this.center["y"]),e=this.CHt_({left:0,right:0}).translate(this.center["x"],this.center["y"]);HR.clear().moveTo(i.getX(),i.getY()).lineTo(s.getX(),s.getY()).lineTo(e.getX(),e.getY()).lineTo(i.getX(),i.getY()).close();t.rB_(this.borderStyle);t.drawPath(HR);t.stroke()}A0_(t){let i=0,s=100,e=0,A=0,n=null,h=null;if(this.$Kt_){t.rB_(this.WKt_);i=this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["min"]:0;s=this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["max"]:100;for(e=s-this.jKt_;e>i;e-=this.jKt_){A=this.FMt_!=null&&this.FMt_["top"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({left:A,right:0}).translate(this.center["x"],this.center["y"]);h=this.CHt_({left:0,right:A}).translate(this.center["x"],this.center["y"]);t.oB_(n.getX(),n.getY(),h.getX(),h.getY())}}if(this.tHt_){t.rB_(this.zKt_);i=this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["min"]:0;s=this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["max"]:100;for(e=s-this.ZKt_;e>i;e-=this.ZKt_){A=this.FMt_!=null&&this.FMt_["left"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({top:A,right:0}).translate(this.center["x"],this.center["y"]);h=this.CHt_({top:0,right:A}).translate(this.center["x"],this.center["y"]);t.oB_(n.getX(),n.getY(),h.getX(),h.getY())}}if(this.iHt_){t.rB_(this.XKt_);i=this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["min"]:0;s=this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["max"]:100;for(e=s-this._Kt_;e>i;e-=this._Kt_){A=this.FMt_!=null&&this.FMt_["right"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({left:A,top:0}).translate(this.center["x"],this.center["y"]);h=this.CHt_({left:0,top:A}).translate(this.center["x"],this.center["y"]);t.oB_(n.getX(),n.getY(),h.getX(),h.getY())}}}BHt_(t){let i=0,s=100,e=0,A=0,n=null;const h=new YC;if(this.nHt_){h.g_(this.sHt_);h.tR_(!0);h.c_(Math.PI/3);h.SE_(dA.re_);i=this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["min"]:0;s=this.FMt_!=null&&this.FMt_["top"]!=null?this.FMt_["top"]["max"]:100;for(e=s-this.jKt_;e>i;e=Math.round((e-this.jKt_)*100)/100){h.a_(Math.round(e*100)/100);A=this.FMt_!=null&&this.FMt_["top"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({top:A,left:-2}).translate(this.center["x"],this.center["y"]);h.gR_(n.getX(),n.getY());h.render(t)}}if(this.hHt_){h.g_(this.eHt_);h.tR_(!0);h.c_(-Math.PI/3);h.SE_(dA.re_);i=this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["min"]:0;s=this.FMt_!=null&&this.FMt_["left"]!=null?this.FMt_["left"]["max"]:100;for(e=s-this.ZKt_;e>i;e=Math.round((e-this.ZKt_)*100)/100){h.a_(Math.round(e*100)/100);A=this.FMt_!=null&&this.FMt_["left"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({left:A,right:-2}).translate(this.center["x"],this.center["y"]);h.gR_(n.getX(),n.getY());h.render(t)}}if(this.rHt_){h.g_(this.AHt_);h.tR_(!0);h.c_(0);h.SE_(dA.le_);i=this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["min"]:0;s=this.FMt_!=null&&this.FMt_["right"]!=null?this.FMt_["right"]["max"]:100;for(e=s-this._Kt_;e>i;e=Math.round((e-this._Kt_)*100)/100){h.a_(Math.round(e*100)/100);A=this.FMt_!=null&&this.FMt_["right"]!=null?(e-i)/(s-i)*100:e;n=this.CHt_({right:A,top:-2}).translate(this.center["x"],this.center["y"]);h.gR_(n.getX(),n.getY());h.render(t)}}}x__(t){let i=null;const s=new YC;s.tR_(!0);if(this.aHt_){s.g_(this.oHt_);s.SE_(dA.re_);i=this.CHt_({right:-1,left:-1}).translate(this.center["x"],this.center["y"]);s.gR_(i.getX(),i.getY());s.a_(this.aHt_);s.render(t)}if(this.gHt_){s.g_(this.lHt_);s.SE_(dA.ee_);i=this.CHt_({top:-1,right:-1}).translate(this.center["x"],this.center["y"]);s.gR_(i.getX(),i.getY());s.a_(this.gHt_);s.render(t)}if(this.cHt_){s.g_(this.uHt_);s.SE_(dA.ie_);i=this.CHt_({top:-1,left:-1}).translate(this.center["x"],this.center["y"]);s.gR_(i.getX(),i.getY());s.a_(this.cHt_);s.render(t)}}N_(){let t=super.N_();t=Pi(this.options,t);t["options"]=this.options;t["center"]=this.center;t["size"]=this.size;return t}dt_(t){super.dt_(t);this.options=qi(t["options"]!==void 0?t["options"]:t,this.options,!0);this.fHt_(this.options);const i=new mA(this.center.x-this.PKt_,this.center.y-this.PKt_,this.center.x+this.PKt_,this.center.y+this.PKt_);this.ht_(i);return this}};i=t([_s("geotoolkit.controls.shapes.TernaryGrid")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ0ZXJuYXJ5VG9DYXJ0ZXNpYW4iOiJWS3RfIiwiY2FydGVzaWFuVG9UZXJuYXJ5IjoiT0t0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");var JR=Ci({wHt_:"maxtomin",QHt_:"mintomax",W_:"none"},2,"eyJNYXhUb01pbiI6IndIdF8iLCJNaW5Ub01heCI6IlFIdF8iLCJOb25lIjoiV18ifSAg"),PR=Ci({Kz_:"Inside",Hz_:"Outside",ne_:"Center"},2,"eyJJbnNpZGUiOiJLel8iLCJPdXRzaWRlIjoiSHpfIiwiQ2VudGVyIjoibmVfIn0g");const VR=[PR.Kz_,PR.Hz_,PR.ne_],OR="#757575",WR="12px Roboto",zR=new YC,XR=function(t){const i=RA.cs_(t.getColor()),s=new nA(i.Is_()/1.5,i.Cs_()/1.5,i.fs_()/1.5);return new wr(s)},jR=function(t){let i,s;i=RA.cs_(t.getColor());const e=new ph(i);e.tB_(-.1);e.iB_(.1);i=e.zd_();s=RA.cs_(t.getColor());const A=new ph(s);A.tB_(.1);A.iB_(-.1);s=A.zd_();const n=s.Es_(),h=i.Es_(),r=s.Es_(),o=new Fo;o.HQ_();o.LQ_(0,n);o.LQ_(.5,h);o.LQ_(1,r);o.cy_(new lA(0,0));o.setEndPoint(new lA(0,1));return o};var ZR=Ci(function(){let i=class t extends su{constructor(t){super(t);const i=qi(t,{left:null,right:null,label:null,bounds:new mA(0,0,200,200),leftfillstyle:"rgba(128,100,255,1.0)",rightfillstyle:"rgba(128,100,255,1.0)",linestyle:new hl({color:"rgba(0,0,0,1.0)",pixelsnapmode:!0}),leftlinestyle:new hl({color:"rgba(0,0,0,1.0)",pixelsnapmode:!0}),rightlinestyle:new hl({color:"rgba(0,0,0,1.0)",pixelsnapmode:!0}),lefttextstyle:new qa(OR,ka.j_,Fa.z_,WR),righttextstyle:new qa(OR,ka.j_,Fa.X_,WR),labelposition:PR.ne_,spacing:.2,autogradient:!0,sort:JR.W_,drawlabels:!1},!0);this.EHt_=i["sort"];this.ht_(i["bounds"]);this.Bj_=i["spacing"];this.pHt_=i["drawlabels"];this.Us_=[];this.mHt_=[];this.WMt_=i["autogradient"];if(typeof i["labelposition"]=="number"){ki("labelposition as number is deprecated since 4.0, use TextPlacement type instead");i["labelposition"]=VR[i["labelposition"]]}this.yHt_=i["labelposition"];this.DHt_=(new dp).rd_(!1);this.nkt_=i["createselectedstyle"]!=null?i["createselectedstyle"]:XR;i["data"]!==void 0?this.setData(i["data"]):this.setData(i);this.MHt_(i["righttextstyle"]);this.vHt_(i["lefttextstyle"]);this.bHt_(i["leftlinestyle"]);this.NHt_(i["rightlinestyle"]);this.SHt_(i["leftfillstyle"]);this.GHt_(i["rightfillstyle"]);this.iQ_(i["fillstyle"]);this.rB_(i["linestyle"])}setData(t){if(t==null)return this;const i=t[Fa.z_],s=t[Fa.X_],e=t["label"];t["sort"]!=null&&t["sort"]&&(this.EHt_=t["sort"]);this.Us_=[];this.mHt_=[];let A;if(i!=null&&i instanceof Array&&s!=null&&s instanceof Array){for(A=0;A<i.length&&A<s.length;A++){let t=null;e!=null&&e[A]!=null&&(t=e[A]);this.Us_.push({index:A,label:t,left:i[A],right:s[A],RHt_:!1,kHt_:!1})}this.FHt_()}let n=Number.NEGATIVE_INFINITY;for(A=0;A<this.mHt_.length;A++){this.mHt_[A].left>n&&(n=this.mHt_[A].left);this.mHt_[A].right>n&&(n=this.mHt_[A].right)}n===Number.NEGATIVE_INFINITY?this.FMt_=new mA(0,0,1,1):this.FMt_=new mA(-n,.5,n,this.mHt_.length+.5);this.xHt_();return this}FHt_(){if(this.EHt_!==JR.W_){this.mHt_=this.Us_.slice();this.EHt_!==JR.wHt_?this.EHt_!==JR.QHt_||this.mHt_.sort((function(t,i){return t.left+t.right-(i.left+i.right)})):this.mHt_.sort((function(t,i){return i.left+i.right-(t.left+t.right)}))}else this.mHt_=this.Us_}vEt_(t,i,s){if(!s)for(const t of this.mHt_){t.RHt_=!1;t.kHt_=!1}for(const i of this.mHt_){const e=t.indexOf(i.index)>=0;s&&i.RHt_||(i.RHt_=e)}for(const t of this.mHt_){const e=i.indexOf(t.index)>=0;s&&t.kHt_||(t.kHt_=e)}this.td_();return this}xHt_(){let t;const i=[];for(t=0;t<this.mHt_.length;++t)i.push({position:t+1,grade:"major"});const s=[];for(t=0;t<this.mHt_.length;++t)s.push({position:t+1,grade:"major",label:this.mHt_[t]["label"]});this.LHt_={ticks:i,labels:s}}j$_(){return this.LHt_}nvt_(t){if(this.WMt_!==t){this.WMt_=t;this.GHt_(this.UHt_);this.SHt_(this.YHt_)}return this}Ivt_(){return this.WMt_}Lj_(t){this.Bj_=t;return this}Uj_(){return this.Bj_}THt_(t){this.pHt_=t;if(!this.pHt_){let t=Number.NEGATIVE_INFINITY;for(let i=0;i<this.mHt_.length;i++){this.mHt_[i].left>t&&(t=this.mHt_[i].left);this.mHt_[i].right>t&&(t=this.mHt_[i].right)}this.FMt_=new mA(-t,.5,t,this.mHt_.length+.5)}return this}KHt_(){return this.pHt_}KZ_(t){if(typeof t=="number"){ki("setLabelPosition(position) with position as number is deprecated since 4.0, use TextPlacement type instead");t=VR[t]}this.yHt_=t;return this}HZ_(){return this.yHt_}getData(){return this.mHt_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);this.Hvt_(i);this.iN_(i)}NHt_(t,i){if(this.HHt_===t)return this;this.HHt_=hl.jD_(this,this.HHt_,t,i,this.oQ_());this.vn_().td_();return this}bHt_(t,i){if(this.qHt_===t)return this;this.qHt_=hl.jD_(this,this.qHt_,t,i,this.oQ_());this.vn_().td_();return this}GHt_(t,i){if(this.UHt_===t)return this;this.UHt_=il.wD_(this,this.UHt_,t,i,this.oQ_());this.JHt_=null;this.WMt_&&(this.JHt_=jR(this.UHt_));this.vn_().td_();return this}PHt_(){return this.HHt_}VHt_(){return this.qHt_}OHt_(){return this.UHt_}WHt_(){return this.YHt_}SHt_(t,i){if(this.YHt_===t)return this;this.YHt_=il.wD_(this,this.YHt_,t,i,this.oQ_());this.zHt_=null;this.WMt_&&(this.zHt_=jR(this.YHt_));this.vn_().td_();return this}vHt_(t,i){if(this.XHt_===t)return this;this.XHt_=qa.jD_(this,this.XHt_,t,i,this.oQ_());this.vn_().td_();return this}MHt_(t,i){if(this.jHt_===t)return this;this.jHt_=qa.jD_(this,this.jHt_,t,i,this.oQ_());this.vn_().td_();return this}$X_(t,i){const s=[],e=function(t){if(t===null)return;const i=t.zC_();i!==null&&s.indexOf(i)<0&&s.push(i)},A=new bC;t instanceof lA?A.iX_(e,this.getRoot(),t.x,t.y,i||1):A.iX_(e,this.getRoot(),t);return s}Hvt_(t){if(this.mHt_.length<=0)return;const i=t.Ji_(),s=i.gI_(t.cR_());this.ZHt_(t,i.rn_(this.getBounds()));const e=new Gn;e.II_(this.rt_(),this.getBounds(),!1,!1,!1);let A=this.YHt_,n=this.UHt_;this.zHt_!=null&&(A=this.zHt_);this.JHt_!=null&&(n=this.JHt_);let h=A,r=n;if(this.nkt_!=null)if(this.WMt_){h=jR(this.nkt_(this.YHt_));r=jR(this.nkt_(this.UHt_))}else{h=this.nkt_(this.YHt_);r=this.nkt_(this.UHt_)}const o=this.mHt_.length,l=t.tk_();for(let i=0;i<o;i++){const o=this.FMt_.Ee_()+(i*1+1*(this.Bj_/2)),u=o+1*(1-this.Bj_),a=new mA(-this.mHt_[i].left,o,0,u),g=new mA(0,o,this.mHt_[i].right,u);e.rn_(a,a);e.rn_(g,g);if(s.$s_(a)){this.DHt_.ce_(a);this.DHt_.rB_(this.qHt_);this.DHt_.iQ_(this.mHt_[i].RHt_?h:A);if(l){this.DHt_.PC_({left:this.mHt_[i].index});t.YR_(this.DHt_)}this.DHt_.render(t)}if(s.$s_(g)){this.DHt_.ce_(g);this.DHt_.rB_(this.HHt_);this.DHt_.iQ_(this.mHt_[i].kHt_?r:n);if(l){this.DHt_.PC_({right:this.mHt_[i].index});t.YR_(this.DHt_)}this.DHt_.render(t)}}this.pHt_&&this.x__(t,e);t.rB_(this.gt_());const u=this.bounds.we_()+this.bounds.Ie_()/2;t.oB_(u,this.bounds.Ee_(),u,this.bounds.pe_())}x__(t,i){const s=t.Ji_(),e=Gn.multiply(s,i);t.dI_(new Gn);zR.g_(this.XHt_);let A=null,n;for(n=0;n<this._Ht_.length;n++){A=e.transformPoint(this._Ht_[n]["position"]);zR.SE_(this._Ht_[n]["align"]).gR_(A).a_(this._Ht_[n]["label"]).render(t)}zR.g_(this.jHt_);for(n=0;n<this.$Ht_.length;n++){A=e.transformPoint(this.$Ht_[n]["position"]);zR.SE_(this.$Ht_[n]["align"]).gR_(A).a_(this.$Ht_[n]["label"]).render(t)}t.dI_(s)}ZHt_(t,i){if(!this.pHt_)return;let s=!0;if(this._Ht_!=null&&this.$Ht_)s=!1;else{this._Ht_=[];this.$Ht_=[]}let e=Number.NEGATIVE_INFINITY,A;for(A=0;A<this.mHt_.length;A++){this.mHt_[A].left>e&&(e=this.mHt_[A].left);this.mHt_[A].right>e&&(e=this.mHt_[A].right)}const n=this.mHt_.length;let h=e;for(A=0;A<n;A++){const t=i.Ie_()/2,e=t/h*this.mHt_[A].left,n=this.Fx_(this.mHt_[A].left),r=$o.measureText(n,this.XHt_),o=t/h*this.mHt_[A].right,l=this.Fx_(this.mHt_[A].right),u=$o.measureText(l,this.jHt_);let a=new lA(-this.mHt_[A].left,A+1),g=new lA(this.mHt_[A].right,A+1),c=dA.oe_,I=dA.he_,f,C;if(this.yHt_===PR.Hz_){if(r.Ie_()+e>=t){f=r.Ie_()+e-t;C=h/(e-f)*e;C>h&&(h=C)}if(u.Ie_()+o>=t){f=u.Ie_()+o-t;C=h/(o-f)*o;C>h&&(h=C)}}else if(this.yHt_===PR.Kz_){if(s){r.Ie_()<e&&(c=dA.he_);u.Ie_()<o&&(I=dA.oe_)}}else if(this.yHt_===PR.ne_&&s){r.Ie_()<e&&(a=new lA(0,A+1));u.Ie_()<o&&(g=new lA(0,A+1))}if(s){this._Ht_.push({label:n,position:a,align:c});this.$Ht_.push({label:l,position:g,align:I})}}this.FMt_=new mA(-h,.5,h,this.mHt_.length+.5)}Fx_(t){const i=100,s=undefined;return" "+(Math.round(t*i)/i).toString()+" "}rt_(){return this.FMt_}tqt_(){return this.EHt_}iqt_(t){this.EHt_=t;this.FHt_();return this}getBounds(){return this.bounds!=null?this.bounds:this.FMt_}ht_(t){this.bounds=t;this.td_();return this}N_(){const t=super.N_();t["bounds"]=this.bounds;t["lefttextstyle"]=this.XHt_;t["leftfillstyle"]=this.YHt_;t["leftlinestyle"]=this.qHt_;t["linestyle"]=this.XQ_;t["righttextstyle"]=this.jHt_;t["rightlinestyle"]=this.HHt_;t["rightfillstyle"]=this.UHt_;t["autogradient"]=this.WMt_;t["spacing"]=this.Bj_;t["sort"]=this.EHt_;t["drawlabels"]=this.pHt_;t["labelposition"]=this.yHt_;return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["bounds"]!==void 0&&(this.bounds=t["bounds"]);t["lefttextstyle"]!==void 0&&this.vHt_(t["lefttextstyle"],t["lefttextstyle"]instanceof qa==!1);t["leftfillstyle"]!==void 0&&this.SHt_(t["leftfillstyle"],t["leftfillstyle"]instanceof wr==!1);t["leftlinestyle"]!==void 0&&this.bHt_(t["leftlinestyle"],t["leftlinestyle"]instanceof hl==!1);t["linestyle"]!==void 0&&this.rB_(t["linestyle"],t["linestyle"]instanceof hl==!1);t["righttextstyle"]!==void 0&&this.MHt_(t["righttextstyle"],t["righttextstyle"]instanceof qa==!1);t["rightlinestyle"]!==void 0&&this.NHt_(t["rightlinestyle"],t["rightlinestyle"]instanceof hl==!1);t["rightfillstyle"]!==void 0&&this.GHt_(t["rightfillstyle"],t["rightfillstyle"]instanceof wr==!1);t["data"]!==void 0&&this.setData(t["data"]);t["autogradient"]!==void 0&&this.nvt_(t["autogradient"]);t["spacing"]!==void 0&&(this.Bj_=t["spacing"]);t["sort"]!==void 0&&this.iqt_(t["sort"]);t["drawlabels"]!==void 0&&this.THt_(t["drawlabels"]);t["labelposition"]!==void 0&&this.KZ_(t["labelposition"]);t["createselectedstyle"]!==void 0&&(this.nkt_=t["createselectedstyle"]);t.hasOwnProperty(Fa.z_)&&t.hasOwnProperty(Fa.X_)&&this.setData(t);return this}};i=t([_s("geotoolkit.controls.shapes.TornadoChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzb3J0RGF0YSI6IkZIdF8iLCJoaWdobGlnaHRJbmRpY2VzIjoidkV0XyIsImdldFRpY2tzQW5kTGFiZWxzIjoiaiRfIiwic2V0QXV0b0dyYWRpZW50IjoibnZ0XyIsImdldEF1dG9HcmFkaWVudCI6Ikl2dF8iLCJzZXRTcGFjaW5nIjoiTGpfIiwiZ2V0U3BhY2luZyI6IlVqXyIsInNldERyYXdMYWJlbHMiOiJUSHRfIiwiZ2V0RHJhd0xhYmVscyI6IktIdF8iLCJzZXRMYWJlbFBvc2l0aW9uIjoiS1pfIiwiZ2V0TGFiZWxQb3NpdGlvbiI6IkhaXyIsInNldFJpZ2h0TGluZVN0eWxlIjoiTkh0XyIsInNldExlZnRMaW5lU3R5bGUiOiJiSHRfIiwic2V0UmlnaHRGaWxsU3R5bGUiOiJHSHRfIiwiZ2V0UmlnaHRMaW5lU3R5bGUiOiJQSHRfIiwiZ2V0TGVmdExpbmVTdHlsZSI6IlZIdF8iLCJnZXRSaWdodEZpbGxTdHlsZSI6Ik9IdF8iLCJnZXRMZWZ0RmlsbFN0eWxlIjoiV0h0XyIsInNldExlZnRGaWxsU3R5bGUiOiJTSHRfIiwic2V0TGVmdFRleHRTdHlsZSI6InZIdF8iLCJzZXRSaWdodFRleHRTdHlsZSI6Ik1IdF8iLCJoaXRUZXN0IjoiJFhfIiwiZ2V0TW9kZWxMaW1pdHMiOiJydF8iLCJnZXRTb3J0IjoidHF0XyIsInNldFNvcnQiOiJpcXRfIiwic2V0Qm91bmRzIjoiaHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");var _R=Ci({sqt_:"Squarify",eqt_:"HorizontalSliceAndDice",Aqt_:"VerticalSliceAndDice",nqt_:"AlternateSliceAndDice"},2,"eyJTcXVhcmlmeSI6InNxdF8iLCJIb3Jpem9udGFsU2xpY2VBbmREaWNlIjoiZXF0XyIsIlZlcnRpY2FsU2xpY2VBbmREaWNlIjoiQXF0XyIsIkFsdGVybmF0ZVNsaWNlQW5kRGljZSI6Im5xdF8ifSAg"),$R=Ci({Top:"Top",XCt_:"Below",z_:"Left",X_:"Right"},2,"eyJCZWxvdyI6IlhDdF8iLCJMZWZ0Ijoiel8iLCJSaWdodCI6IlhfIn0g"),tk=Ci({hqt_:"onDataChanged"},2,"eyJEYXRhQ2hhbmdlZCI6ImhxdF8ifSAg");let ik=0;function sk(t){for(let i=0;i<t.length;i++){t[i]["id"]=ik++;if(t[i].hasOwnProperty("level")){sk(t[i]["level"]);t[i]["children"]=0;for(let s=0;s<t[i]["level"].length;s++)t[i]["children"]=t[i]["children"]+t[i]["level"][s]["children"]+1}else t[i]["children"]=0}}function ek(t,i){for(let s=0;s<t.length;s++){t[s]["atlevel"]=i;if(t[s]["children"]>0){i+=1;ek(t[s]["level"],i);i-=1}}}function Ak(t,i){for(let s=0;s<t.length;s++)if(t[s]["atlevel"]===0){t[s]["parent"]=-1;i=[];if(t[s]["children"]>0){i.push(t[s]["id"]);Ak(t[s]["level"],i)}}else{const e=t[s]["atlevel"];i=i.slice(0,e);t[s]["parent"]=i[i.length-1];if(t[s]["children"]>0){i.push(t[s]["id"]);Ak(t[s]["level"],i)}}}const nk=function(t){t==null&&(t=[]);let i=0;for(let s=0;s<t.length;s++)i+=t[s].value;return i};function hk(t){t.sort((function(t,i){return i.value-t.value}));return t}function rk(t,i,s){const e=i*s/nk(t);for(let i=0;i<t.length;i++)t[i].value=t[i].value*e;return t}const ok=function(t,i,s,e){return Math.max(e*e*i/(s*s),s*s/(e*e*t))},lk=function(t,i,s,e){const A=e?i:s;let n=0;for(let i=0;i<t.length;i++)n+=t[i].value;return A/n};var uk=Ci(function(){let i=class t extends eE{constructor(t,i){super(t);this.zz_=new mA;this._q_=(new YC).sR_(!0).tR_(!0).AR_(!0).hR_(!0).rd_(!1);this.UU_={nodevalues:{visible:!0,textstyle:new qa,location:$R.Top},linestyle:new hl({color:"gray",width:1}),fillstyle:new wr({color:"lightblue"})};this.rqt_=this.UU_["nodevalues"]["visible"];this.oqt_=this.UU_["nodevalues"]["location"];this.lqt_=_R.sqt_;this.VIt_=[];this._W_=[];this.LMt_=!1;this.uqt_=0;this.aqt_=0;this.gqt_=!0;this.cqt_=!1;this.vQ_=null;this.Iqt_=0;this.setOptions(t);i&&this.setData(i)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.setOptions(t)}N_(){const t=super.N_();return Pi(this.JV_(),t)}fqt_(t){switch(t){case _R.nqt_:this.lqt_=_R.nqt_;break;case _R.eqt_:this.lqt_=_R.eqt_;break;case _R.Aqt_:this.lqt_=_R.Aqt_;break;default:this.lqt_=_R.sqt_}this.LMt_=!1;this.vn_().td_();return this}Cqt_(){return this.lqt_}setData(t){t=qi(t,{mode:_R.sqt_,datasets:null});this.lqt_=t["mode"];const i=t["datasets"];this.VIt_=Ji(i);this.notify(tk.hqt_,this,this.VIt_);this.td_();return this}getData(){return{mode:this.lqt_,datasets:this.VIt_}}dqt_(t){if(Array.isArray(t)&&t.length>0){this.VIt_=t;this.LMt_=!1;this.notify(tk.hqt_,this,t)}}setOptions(t){t=qi(t,{});Pi(t,this.UU_);if(this.UU_["nodevalues"]){this.rqt_=this.UU_["nodevalues"]["visible"];this.oqt_=this.UU_["nodevalues"]["location"];this._q_.g_(this.UU_["nodevalues"]["textstyle"])}this.UU_["linestyle"]=hl.Wi_(this.UU_["linestyle"]);this.UU_["fillstyle"]=il.BD_(this.UU_["fillstyle"]);this.td_();return this}JV_(){return{nodevalues:{visible:this.rqt_,location:this.oqt_,textstyle:this._q_.FE_()}}}Bqt_(t,i){if(this.VIt_==null||!i)return;t=t.slice(0);const s=i.getX(),e=i.getY(),A=i.Ie_(),n=i.Ts_();this._W_=[];if(this.lqt_===_R.sqt_){const i=undefined,h=hk(rk(t,A,n));this.wqt_(h,[],A,n,s,e)}else{let i;switch(this.lqt_){case _R.eqt_:i="vertical";break;case _R.Aqt_:i="horizontal";break;case _R.nqt_:i="alternate";break;default:const t=undefined;i=this.Ts_()<this.Ie_()?"horizontal":"vertical";break}this.Qqt_(t,A,n,s,e,i)}}wqt_(t,i,s,e,A,n){const h=e<s,r=h?e:s,o=t[0],l=o!=null?o.value:0,u=i.map((function(t){return t.value})),a=nk(i),g=NA.nA_(u),c=NA.hA_(u),I=ok(Math.min(g,l),Math.max(c,l),a+l,r),f=ok(g,c,a,r);if(i.length===0||I<f){t.shift();i.push(o);this.wqt_(t,i,s,e,A,n)}else{let o="",l,u=A,g=n;const c=a/r;for(let t=0;t<i.length;t++){const s=i[t].value/c;o=i[t]["name"]!==void 0?i[t].name:"";l=i[t]["color"]!==void 0?i[t].color:"";if(h){this._W_.push({x:u,y:g,width:c,height:s,color:l,name:o,children:i[t]["children"],id:i[t]["id"],atlevel:i[t]["atlevel"],parent:i[t]["parent"]});if(i[t]["level"]!==void 0){const e=undefined,A=hk(rk(i[t].level,c,s));this.wqt_(A,[],c,s,u,g)}g+=s}else{this._W_.push({x:u,y:g,width:s,height:c,color:l,name:o,children:i[t]["children"],id:i[t]["id"],atlevel:i[t]["atlevel"],parent:i[t]["parent"]});if(i[t]["level"]!==void 0){const e=undefined,A=hk(rk(i[t].level,s,c));this.wqt_(A,[],s,c,u,g)}u+=s}}if(h){A+=c;s-=c}else{n+=c;e-=c}t.length>0&&this.wqt_(t,[],s,e,A,n)}}Qqt_(t,i,s,e,A,n){let h=e,r=A;const o=[];let l,u=!1,a,g;n==null&&(n="");switch(n){case"horizontal":l=!0;break;case"vertical":l=!1;break;case"alternate":l=s<i;u=!0;break;default:l=s<i;n=l?"horizontal":"vertical";break}let c=i,I=s;if(u){a=l;while(t.length>0){g=lk(t,c,I,a);o.push({scaledValue:t[0].value*g,color:t[0].hasOwnProperty("color")?t[0].color:"",child:t[0].hasOwnProperty("level")?t[0].level:null,name:t[0].hasOwnProperty("name")?t[0].name:"",children:t[0]["children"],id:t[0]["id"],atlevel:t[0]["atlevel"],parent:t[0]["parent"]});a?c-=t[0].value*g:I-=t[0].value*g;a=!a;t.shift()}}else{g=lk(t,c,I,l);while(t.length>0){o.push({scaledValue:t[0].value*g,color:t[0].hasOwnProperty("color")?t[0].color:"",child:t[0].hasOwnProperty("level")?t[0].level:null,name:t[0].hasOwnProperty("name")?t[0].name:"",children:t[0]["children"],id:t[0]["id"],atlevel:t[0]["atlevel"],parent:t[0]["parent"]});t.shift()}}a=l;for(let t=0;t<o.length;t++){this._W_.push({x:h,y:r,width:a?o[t]["scaledValue"]:i,height:a?s:o[t]["scaledValue"],color:o[t]["color"],name:o[t]["name"],children:o[t]["children"],id:o[t]["id"],atlevel:o[t]["atlevel"],parent:o[t]["parent"]});o[t]["child"]!=null&&this.Qqt_(o[t]["child"],a?o[t]["scaledValue"]:i,a?s:o[t]["scaledValue"],h,r,u?"alternate":l?"vertical":"horizontal");if(u){if(a){h+=o[t]["scaledValue"];i-=o[t]["scaledValue"]}else{r+=o[t]["scaledValue"];s-=o[t]["scaledValue"]}a=!a}else l?h+=o[t]["scaledValue"]:r+=o[t]["scaledValue"]}}Eqt_(t,i,s,e){const A={x:i.x,y:i.y,width:i.width,height:i.height};let n=this.UU_["fillstyle"];i.color!==""&&s==null&&(n=new wr({color:i.color}));s!=null&&s!==""&&(n=new wr({color:s}));let h=this.zz_.ce_(A);e===!0&&(this.vQ_=Gn.xI_(h,this.bounds));this.vQ_!=null&&(h=this.vQ_.transform(h));t.iQ_(n,h);t.rB_(hl.Wi_(this.UU_["linestyle"]),h);t.pR_(h)}vdt_(t,i){const s=i.name.trim();let e=i.x+i.width/2,A=i.y+i.height/2;if(this.vQ_!=null){const t=this.vQ_.nI_(e,A);e=t.getX();A=t.getY()}this._q_.a_(s);this._q_.gR_(e,A);this._q_.render(t)}pqt_(){let t;if(this.aqt_===0)for(t=0;t<this._W_.length;t++){this._W_[t]["visible"]=this._W_[t]["atlevel"]===0;this._W_[t]["visibleborder"]=!0}else{let i=null,s=0;for(t=0;t<this._W_.length;t++)if(i==null||s>=i){if(this._W_[t]["id"]===this.uqt_){this._W_[t]["visibleborder"]=!0;i=this._W_[t]["children"]}else this._W_[t]["visibleborder"]=!1;this._W_[t]["visible"]=!1}else{s+=1;this._W_[t]["visible"]=this._W_[t]["atlevel"]===this.aqt_;this._W_[t]["visibleborder"]=!0}}}mqt_(t){let i=!0,s,e;for(s=0;s<this._W_.length;s++)if(this._W_[s]["visible"]){this.Eqt_(t,this._W_[s]);e=this._W_[s]["color"]}else if(this._W_[s]["visibleborder"])if(this.aqt_>0&&i){this.Eqt_(t,this._W_[s],e,!0);i=!1}else{this.aqt_===0&&(this.vQ_=null);this.Eqt_(t,this._W_[s],e,!1)}for(s=0;s<this._W_.length;s++)this._W_[s]["visible"]&&this.vdt_(t,this._W_[s])}yqt_(t){for(let i=0;i<this._W_.length;i++){this.Eqt_(t,this._W_[i]);this.vdt_(t,this._W_[i])}}Dqt_(){if(!this.LMt_){this.LMt_=!0;let t=this.getBounds(),i=[];this.VIt_.length<=0&&(this.VIt_=[{value:1,name:"Empty Tree"}]);t.Ie_()!==0&&t.Ts_()!==0||(t=null);i=Ji(this.VIt_);ik=0;this.gqt_=!0;sk(i);ek(i,0);Ak(i,[]);this.Bqt_(i,t);this.lqt_===_R.sqt_&&this._W_.sort(((t,i)=>t["id"]-i["id"]))}}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);this.Dqt_();if(this.gqt_){this.gqt_=!1;this.pqt_()}this.cqt_?this.mqt_(i):this.yqt_(i);this.iN_(t)}Mqt_(t){this.Dqt_();if(this.LMt_){const i=[];for(let s=0;s<this._W_.length;s++)this._W_[s]["name"]===t&&i.push(this._W_[s]["id"]);return i}return[]}$X_(t){const i=undefined;t=this.if_().aI_(t);const s=[];for(let i=0;i<this._W_.length;i++){this.zz_.ce_({x:this._W_[i]["x"],y:this._W_[i]["y"],width:this._W_[i]["width"],height:this._W_[i]["height"]});if(!this.cqt_||this._W_[i]["visible"]){this.vQ_!=null&&(this.zz_=this.vQ_.transform(this.zz_));this.zz_.contains(t.getX(),t.getY())&&s.push(this._W_[i])}}return s}vqt_(t){this.cqt_=t;return this}bqt_(t){this.gqt_=!0;this.cqt_=!0;if(isNaN(t)||t<0||t>this._W_.length-1){this.aqt_=0;this.uqt_=0;this.td_();this.vQ_=null;return}const i=this._W_[t];if(i!=null){const s=i["parent"];if(i["children"]>=1){this.uqt_=t;this.aqt_=i["atlevel"]+1}else if(s===-1){this.uqt_=0;this.aqt_=0}else{this.uqt_=s;this.aqt_=i["atlevel"]}this.td_()}}Nqt_(t){if(isNaN(t)||t<0||t>this._W_.length-1)return;this.gqt_=!0;this.cqt_=!0;const i=this._W_[t];if(i!=null){const t=i["parent"];if(t===-1){this.uqt_=0;this.aqt_=0}else{const i=this._W_[t]["parent"];if(i===-1){this.uqt_=0;this.aqt_=0}else{this.uqt_=i;this.aqt_=this._W_[t]["atlevel"]}}this.vQ_=null;this.td_()}}Sqt_(t,i){i?this.Nqt_(t):this.bqt_(t)}Gqt_(t){if(!(isNaN(t)||t<=0)){for(let i=0;i<t;i++)if(this.uqt_!==-1){const t=this._W_[this.uqt_];this.uqt_=t["parent"]}this.bqt_(this.uqt_)}}};i=t([_s("geotoolkit.controls.shapes.Treemap")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0TGF5b3V0TW9kZSI6ImZxdF8iLCJnZXRMYXlvdXRNb2RlIjoiQ3F0XyIsInVwZGF0ZURhdGFTZXRzIjoiZHF0XyIsImdldE9wdGlvbnMiOiJKVl8iLCJsb29rVXBGb3JJZEJ5TmFtZSI6Ik1xdF8iLCJoaXRUZXN0IjoiJFhfIiwic2hvd0xldmVsIjoiU3F0XyIsInNob3dQYXJlbnRMZXZlbEF0RGlzdGFuY2UiOiJHcXRfIn19fSAg");const ak="cg-toolbar-button",gk="cg-toolbar-checked",ck=function(t){t.preventDefault()};var Ik=Ci(function(){let i=class t{constructor(t){t=Pi(t,{element:null,icon:"",title:"",action:null,init:null,checkbox:{enabled:!1,checked:!1,name:[]},width:null,height:null,color:null,border:""});this.w8_=t["element"]==null?xs("div",ak):t["element"];this.Rqt_=t["action"];this.kqt_=t["init"];this.Fqt_=t["checkbox"]["enabled"];this.ov_=Array.isArray(t["checkbox"]["name"])?t["checkbox"]["name"]:[t["checkbox"]["name"]];this.Jp_=t["width"];this.Pp_=t["height"];t["icon"]&&this.xqt_(t["icon"]);t["title"]&&(this.w8_.title=t["title"]);this.Fqt_&&t["checkbox"]["checked"]&&this.w8_.classList.add(gk);t["color"]&&this.setColor(t["color"]);t["border"]&&this.Lqt_(t["border"])}clone(){return Wi(this)}b_(t){this.w8_=t.w8_.cloneNode(!0);this.Rqt_=t.Rqt_;this.kqt_=t.kqt_;this.Fqt_=t.Fqt_;this.ov_=t.ov_;this.Jp_=t.Jp_;this.Pp_=t.Pp_;return this}nn_(){return this.w8_}Uqt_(){return this.Rqt_}Yqt_(t){this.Rqt_=t;return this}Tqt_(){return this.kqt_}Kqt_(t){this.kqt_=t;return this}dn_(){return this.ov_}Ie_(){return this.Jp_}Ts_(){return this.Pp_}Hqt_(){return this.qqt_}xqt_(t){if(this.qqt_===t)return this;this.qqt_=t;if(t==null){this.Jqt_!=null&&this.w8_.removeChild(this.Jqt_);this.Jqt_=null}else{const i=xs("span",t);this.Jqt_==null?this.w8_.appendChild(i):this.w8_.replaceChild(i,this.Jqt_);this.Jqt_=i}return this}setSize(t,i){i==null&&(i=t);this.w8_.style.width=t+"px";this.w8_.style.minWidth=t+"px";this.w8_.style.height=i+"px";this.w8_.style.minHeight=i+"px";this.w8_.style.lineHeight=i+"px";this.Jp_=t;this.Pp_=i;return this}Pqt_(){return this.w8_.classList.contains(gk)}Vqt_(t){t?this.w8_.classList.add(gk):this.w8_.classList.remove(gk);return this}setColor(t){this.Oqt_().style.backgroundColor=t;return this}getColor(){return this.Oqt_().style.backgroundColor}Lqt_(t){this.Oqt_().style.border=t;return this}Wqt_(){return this.Oqt_().style.border}clear(t,i){if(!this.w8_.parentNode)return;const s=i.indexOf(this);s>=0&&i.splice(s,1);this.kqt_&&this.kqt_.call(this,t,!1);this.Oqt_().removeEventListener("click",this.Axt_);this.Oqt_().removeEventListener("contextmenu",ck);const e=this.w8_.parentNode;for(let t=0;t<e.childElementCount;t++)if(e.children[t]===this.w8_){e.children[t+1]==null||e.children[t+1].classList.contains(ak)?e.children[t-1]==null||e.children[t-1].classList.contains(ak)||e.removeChild(e.children[t-1]):e.removeChild(e.children[t+1]);e.removeChild(this.w8_);break}}Oqt_(){return this.w8_}init(t,i,s,e,A,n){this.kqt_&&this.kqt_.call(this,t,!0);this.Axt_=t=>{n(this);t.stopPropagation();t.preventDefault()};this.w8_.classList.contains(gk)&&this.action(t,!0);this.Oqt_().addEventListener("click",this.Axt_);this.Oqt_().addEventListener("contextmenu",ck);if((A=A!=null&&e!=null?A*2:A)!=null&&s.childElementCount>A){const t=s.children[A];s.insertBefore(this.w8_,t);e!=null&&s.insertBefore(e.cloneNode(!0),t)}else{e!=null&&s.childElementCount>0&&s.appendChild(e.cloneNode(!0));s.appendChild(this.w8_)}i.push(this);this.Jp_==null&&this.Pp_==null||this.setSize(this.Jp_,this.Pp_);return this}action(t,i){this.Fqt_&&this.Vqt_(i);this.Rqt_!=null&&this.Rqt_.call(this,t,i);return this}match(t){const i=t.dn_();if(this.ov_.length===0||i.length===0)return!1;for(let t=0;t<this.ov_.length;t++){const s=this.ov_[t];if(i.indexOf(s)>=0)return!0}return!1}};i=t([_s("geotoolkit.controls.toolbar.Button")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsImdldEVsZW1lbnQiOiJubl8iLCJnZXRBY3Rpb24iOiJVcXRfIiwic2V0QWN0aW9uIjoiWXF0XyIsImdldEluaXQiOiJUcXRfIiwic2V0SW5pdCI6IktxdF8iLCJnZXROYW1lIjoiZG5fIiwiZ2V0V2lkdGgiOiJJZV8iLCJnZXRIZWlnaHQiOiJUc18iLCJnZXRJY29uIjoiSHF0XyIsInNldEljb24iOiJ4cXRfIiwiZ2V0Q2hlY2tlZCI6IlBxdF8iLCJzZXRDaGVja2VkIjoiVnF0XyIsInNldEJvcmRlciI6IkxxdF8iLCJnZXRCb3JkZXIiOiJXcXRfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var fk=Ci({zqt_:"pointer",Xqt_:"rubberband"},2,"eyJQb2ludGVyIjoienF0XyIsIlJ1YmJlckJhbmQiOiJYcXRfIn0g");var Ck=Ci({jqt_:"Distance",ra_:"Area"},2,"eyJEaXN0YW5jZSI6ImpxdF8iLCJBcmVhIjoicmFfIn0g");let dk=null;var Bk=Ci(function(){var i;let s=i=class t{constructor(){this.Zqt_={}}register(t,i){this.Zqt_[t]=i instanceof Ik?i:new Ik(i);return this}_qt_(t){return this.Zqt_.hasOwnProperty(t)?this.Zqt_[t].clone():null}getIds(){return Object.keys(this.Zqt_)}static Ai_(){if(dk==null){dk=new i;dk.register("zoom-in",{title:"Zoom in",icon:"fas fa-plus",action:function(t){const i=t.C5_("zoom"),s=t.PP_();if(!i||!ie(s))return;const e=s.getBounds();e&&i.zoom(2,2,e.ye_(),e.De_())}}).register("zoom-out",{title:"Zoom out",icon:"fas fa-minus",action:function(t){const i=t.C5_("zoom"),s=t.PP_();if(!i||!ie(s))return;const e=s.getBounds();e&&i.zoom(.5,.5,e.ye_(),e.De_())}}).register("export-png",{title:"Save as PNG",icon:"fas fa-file-image",action:function(t){const i=t.getPlot().getCanvas();if(Array.isArray(i)){ki("ButtonRegistry does not support export to image in multi-canvas mode");return}const s=xs("a");s.href=i.toDataURL();s.download="screen.png";s.click()}}).register("point-selection",{title:"Point Selection",icon:"fas fa-hand-pointer",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("pick");s&&s.Kv_(i).$qt_(fk.zqt_)}}).register("rubberband-selection",{title:"RubberBand Selection",icon:"fas fa-vector-square",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("pick");s&&s.Kv_(i).$qt_(fk.Xqt_)}}).register("polygon-selection",{title:"Polygon Selection",icon:"fas fa-draw-polygon",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("polygon-selection");s&&s.Kv_(i)}}).register("tooltip",{title:"Tooltip",icon:"fas fa-comment-alt",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("tooltip");s&&s.Kv_(i)}}).register("measure",{title:"Measure distance",icon:"fas fa-ruler-horizontal",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("measure");s&&s.Kv_(i).tJt_(Ck.jqt_)}}).register("measure-area",{title:"Measure area",icon:"fas fa-ruler-combined",checkbox:{enabled:!0,name:"tools"},action:function(t,i){const s=t.C5_("measure");s&&s.Kv_(i).tJt_(Ck.ra_)}})}return dk}};s=i=t([_s("geotoolkit.controls.toolbar.ButtonRegistry")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRCdXR0b24iOiJfcXRfIn19LCJnZXRJbnN0YW5jZSI6IkFpXyIsImdldENsYXNzTmFtZSI6IkRfIn0g");const wk="cg-toolbar-checkbox",Qk="cg-toolbar-checkbox-text";var Ek=Ci(function(){let i=class t extends Ik{constructor(t){super(t=qi(t,{text:"",padding:10,checkbox:{enabled:!0}}));this.wX_=t["padding"];if(t["text"]){const i=xs("div",Qk);i.innerText=t["text"];this.nn_().appendChild(i)}this.nn_().classList.add(wk);this.nn_().style.paddingLeft=this.wX_+"px";this.nn_().style.paddingRight=this.wX_+"px"}b_(t){this.wX_=t.wX_;return this}setSize(t,i){if(i==null&&t!=null){i=t;t=this.Ie_()}return super.setSize(t,i)}};i=t([_s("geotoolkit.controls.toolbar.Checkbox")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyJ9fX0g");const pk="cg-toolbar-dropdown";var mk=Ci(function(){let i=class t extends Ik{constructor(t){super(t=Pi(t,{icon:"fas fa-ellipsis-v",checkbox:{enabled:!0},buttons:[]}));this.Zqt_=[];const i=Bk.Ai_(),s=Array.isArray(t["buttons"])?t["buttons"]:[];for(let t=0;t<s.length;t++){const e=s[t],A=typeof e=="string"?i._qt_(e):e;A!=null&&this.Zqt_.push(A)}const e=xs("div",pk);e.title=t["title"];e.appendChild(this.nn_());this.w8_=e}b_(t){this.Zqt_=[];for(let i=0;i<t.Zqt_.length;i++)this.Zqt_.push(t.Zqt_[i].clone());return this}init(t,i,s,e,A,n){super.init(t,i,s,e,A,n);for(let s=0;s<this.Zqt_.length;s++)this.Zqt_[s].init(t,i,this.nn_(),e,null,n);return this}Oqt_(){return this.nn_().firstChild}setSize(t,i){super.setSize(t,i);const s=this.Zqt_.length>0&&!this.Pqt_();s&&this.Vqt_(!0);for(let s=0;s<this.Zqt_.length;s++)this.Zqt_[s].setSize(t,i);s&&this.Vqt_(!1);return this}iJt_(){return this.Zqt_}setColor(t){super.setColor(t);for(let i=0;i<this.Zqt_.length;i++)this.Zqt_[i].setColor(t);return this}Lqt_(t){super.Lqt_(t);for(let i=0;i<this.Zqt_.length;i++)this.Zqt_[i].Lqt_(t);return this}clear(t,i){for(let s=0;s<this.Zqt_.length;s++)this.Zqt_[s].clear(t,i);this.Zqt_.length=0;super.clear(t,i)}};i=t([_s("geotoolkit.controls.toolbar.Dropdown")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsImdldEJ1dHRvbnMiOiJpSnRfIiwic2V0Qm9yZGVyIjoiTHF0XyJ9fX0g");je.As_()===!1&&Bk.Ai_().register("selection",new mk({title:"Selection Tools",icon:"fas fa-tools",buttons:["point-selection","polygon-selection","rubberband-selection"]})).register("tools",new mk({title:"Tools",icon:"fas fa-tools",buttons:["point-selection","rubberband-selection","polygon-selection","tooltip","measure","measure-area"]}));const yk="cg-toolbar-label";var Dk=Ci(function(){let i=class t extends Ik{constructor(t){super(t=qi(t,{text:"",padding:5,icon:null}));this.wX_=t["padding"];const i=xs("div",yk);i.innerText=t["text"];this.nn_().appendChild(i);this.nn_().classList.add(yk);this.nn_().style.paddingLeft=this.wX_+"px";this.nn_().style.paddingRight=this.wX_+"px"}b_(t){this.wX_=t.wX_;return this}a_(t){const i=undefined;this.nn_().getElementsByClassName(yk)[0].innerText=t;return this}setSize(t,i){if(i==null){i=t;const s=this.nn_().getElementsByClassName(yk)[0];let e=0;s&&(e=s.offsetWidth+2*this.wX_);t=Math.max(t,e)}return super.setSize(t,i)}};i=t([_s("geotoolkit.controls.toolbar.Label")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldFRleHQiOiJhXyJ9fX0g");const Mk="cg-toolbar-container",vk="cg-toolbar-left",bk="cg-toolbar-right",Nk="cg-toolbar-top",Sk="cg-toolbar-bottom",Gk="cg-toolbar-group",Rk="cg-toolbar-gap",kk=new Map;var Fk=Ci(function(){let i=class t{constructor(t){t=qi(t,{tools:null,element:null,buttons:[],alignment:dA.ie_,orientation:fg.ax_,offset:10,size:30,fontsize:15,gap:1,borderradius:5,border:"",color:"white",node:null});this.Hk_=t["alignment"];this.Sxt_=t["tools"];const i=this.Sxt_.getPlot();kk.has(i)||kk.set(i,[]);this.Jv_=kk.get(i);this.fk_=t["size"];this.sB_=t["color"];this.USt_=t["border"];this.T2_=typeof t["offset"]=="number"?new xA(t["offset"],t["offset"]):t["offset"];this.w8_=this.createElement(t);this.Axt_=this.zFt_.bind(this);this.Zqt_=[];this.sJt_=this.eJt_(t["gap"]);let s=null;for(let i=0;i<t["buttons"].length;i++)s=this.AJt_(t["buttons"][i],s,this.sJt_,null,null,this.Axt_);this.nJt_=this.e4_.bind(this);this.hJt_=this.w8_.offsetWidth;this.rJt_=this.w8_.offsetHeight;i.on(Hw.C3_,this.nJt_);this.E8_=i;this.JP_=t["node"];this.JP_!=null&&this.JP_.on(rh.aC_,this.nJt_);this.e4_()}oJt_(){for(let t=0;t<this.Zqt_.length;t++)for(let i=0;i<this.Zqt_[t].length;i++)this.Zqt_[t][i].clear(this.Sxt_,this.Jv_);while(this.w8_.firstChild)this.w8_.removeChild(this.w8_.lastChild);this.Zqt_=[];return this}lJt_(t){this.oJt_();let i=null;for(let s=0;s<t.length;s++)i=this.AJt_(t[s],i,this.sJt_,null,null,this.Axt_);return this}getSize(){return this.fk_}d$_(t){this.T2_=t;this.e4_();return this}nn_(){return this.w8_}oy_(){return this.w8_.style.display}ry_(t){this.w8_.style.display=t;return this}$C_(){return this.w8_.style.visibility==="visible"}nf_(t){if(this.$C_()===t)return this;this.w8_.style.visibility=t?"visible":"hidden";return this}uJt_(){return this.Zqt_}aJt_(t,i,s){const e=this.w8_.children[t];this.AJt_(s,e,this.sJt_,t,i,this.Axt_);this.e4_();return this}gJt_(t){for(let i=0;i<this.Zqt_.length;i++)for(let s=0;s<this.Zqt_[i].length;s++)if(this.Zqt_[i][s]===t){this.Zqt_[i].splice(s,1);t.clear(this.Sxt_,this.Jv_);return this}return this}createElement(t){let i=t["element"];if(i==null){this.M_=null;t["orientation"]===fg.ax_?this.M_=OC.Zj_(t["alignment"])?bk:vk:this.M_=OC.Xj_(t["alignment"])?Sk:Nk;t["classname"]!=null&&(this.M_+=" "+t["classname"]);i=xs("div",this.M_);t["borderradius"]&&(i.style.borderRadius=t["borderradius"]+"px");t["fontsize"]&&(i.style.fontSize=t["fontsize"]+"px");i.style.position="absolute"}const s=this.Sxt_.getPlot().r3_(),e=s.parentNode;if(e&&e.classList.contains(Mk))e.appendChild(i);else{const t=xs("div",Mk);t.style.width="100%";t.style.height="100%";t.appendChild(s);t.appendChild(i);e&&e.appendChild(t)}i.style.visibility="visible";return i}AJt_(t,i,s,e,A,n){if(t==="-")return null;typeof t=="string"?t=Bk.Ai_()._qt_(t):Array.isArray(t)&&(t=new mk({icon:"fas fa-ellipsis-v",buttons:t}));if(!t||typeof t=="string")return i;if(!i){i=xs("div",Gk);this.w8_.appendChild(i);this.Zqt_.push([])}t.init(this.Sxt_,this.Jv_,i,s,A,n);this.fk_!=null&&t.Ie_()==null&&t.Ts_()==null&&t.setSize(this.fk_);this.USt_&&t.Lqt_(this.USt_);t.setColor(this.sB_);e==null&&(e=this.Zqt_.length-1);this.Zqt_[e].push(t);return i}eJt_(t){if(t<=0&&!this.USt_)return null;const i=xs("div",Rk);i.style.width=t+"px";i.style.minWidth=t+"px";i.style.height=t+"px";i.style.minHeight=t+"px";if(this.USt_){const t=parseInt(this.USt_);if(t){i.style.marginTop=-t+"px";i.style.marginLeft=-t+"px"}}return i}e4_(){this.hJt_=this.w8_.offsetWidth||this.hJt_;this.rJt_=this.w8_.offsetHeight||this.rJt_;const t=undefined,i=this.Sxt_.getPlot().r3_();let s=new mA(i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth,i.offsetTop+i.offsetHeight);this.JP_!=null&&(s=this.JP_.lt_());OC.jj_(this.Hk_)?this.w8_.style.left=s.we_()+this.T2_.Ie_()+"px":OC.Zj_(this.Hk_)?this.w8_.style.left=s.Qe_()-this.hJt_-this.T2_.Ie_()+"px":this.w8_.style.left=s.ye_()-this.hJt_/2-this.T2_.Ie_()+"px";OC.zj_(this.Hk_)?this.w8_.style.top=s.Ee_()+this.T2_.Ts_()+"px":OC.Xj_(this.Hk_)?this.w8_.style.top=s.pe_()-this.rJt_-this.T2_.Ts_()+"px":this.w8_.style.top=s.De_()-this.rJt_/2-this.T2_.Ts_()+"px"}zFt_(t){const i=t.Pqt_();if(!i)for(let i=0;i<this.Jv_.length;i++)this.Jv_[i]!==t&&this.Jv_[i].match(t)&&this.Jv_[i].action(this.Sxt_,!1);t.action(this.Sxt_,!i)}dispose(){if(this.Sxt_!=null){this.JP_!=null&&this.JP_.off(rh.aC_,this.nJt_);this.E8_!=null&&this.E8_.off(Hw.C3_,this.nJt_);this.oJt_();this.w8_!=null&&this.w8_.parentNode!=null&&this.w8_.parentNode.removeChild(this.w8_);this.Sxt_=null;this.w8_=null;this.Jv_=null;this.Zqt_.length=0;this.sJt_=null}}};i=t([_s("geotoolkit.controls.toolbar.Toolbar")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPZmZzZXQiOiJkJF8iLCJnZXRFbGVtZW50Ijoibm5fIiwiZ2V0VmlzaWJsZSI6IiRDXyIsInNldFZpc2libGUiOiJuZl8iLCJnZXRCdXR0b25MaXN0IjoidUp0XyIsImluc2VydEJ1dHRvbiI6ImFKdF8iLCJyZW1vdmVCdXR0b24iOiJnSnRfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var xk=Ci({cJt_:1,IJt_:2,fJt_:4,CJt_:8,dJt_:16,BJt_:32,wJt_:64,QJt_:128,EJt_:7,pJt_:231,mJt_:224,yJt_:248,All:255,DJt_:256},2,"eyJSZXNpemUiOiJjSnRfIiwiVHJhbnNsYXRlIjoiSUp0XyIsIlJvdGF0ZSI6ImZKdF8iLCJBZGRQb2ludCI6IkNKdF8iLCJDcmVhdGVXaXRoQm91bmRzIjoiZEp0XyIsIkRyYWdQb2ludCI6IkJKdF8iLCJJbnNlcnRQb2ludCI6IndKdF8iLCJEZWxldGVQb2ludCI6IlFKdF8iLCJFZGl0QmJveCI6IkVKdF8iLCJFZGl0Tm9kZSI6InBKdF8iLCJFZGl0UG9pbnRzIjoibUp0XyIsIkNyZWF0ZSI6InlKdF8iLCJHaG9zdCI6IkRKdF8ifSAg");var Lk=Ci({C3_:"Resized",BC_:"Translated",MJt_:"Rotated",Mk_:"Start",vJt_:"Continue",End:"End",bJt_:"Drag",NJt_:"Inserted",SJt_:"Deleted",GJt_:"Reversed",RJt_:"NodeInserted",kJt_:"NodeDeleted",FJt_:"Flipped",xJt_:"Grouped",LJt_:"Ungrouped",gf_:"PropertyChanged",UJt_:"SceneChanged",YJt_:"NodeReplaced",TJt_:"EditorChanged",KJt_:"Undo",HJt_:"Redo",qJt_:"BeforeCommandApplied",JJt_:"CommandApplying",PJt_:"CommandApplied"},2,"eyJSZXNpemVkIjoiQzNfIiwiVHJhbnNsYXRlZCI6IkJDXyIsIlJvdGF0ZWQiOiJNSnRfIiwiU3RhcnQiOiJNa18iLCJDb250aW51ZSI6InZKdF8iLCJEcmFnIjoiYkp0XyIsIkluc2VydGVkIjoiTkp0XyIsIkRlbGV0ZWQiOiJTSnRfIiwiUmV2ZXJzZWQiOiJHSnRfIiwiTm9kZUluc2VydGVkIjoiUkp0XyIsIk5vZGVEZWxldGVkIjoia0p0XyIsIkZsaXBwZWQiOiJGSnRfIiwiR3JvdXBlZCI6InhKdF8iLCJVbmdyb3VwZWQiOiJMSnRfIiwiUHJvcGVydHlDaGFuZ2VkIjoiZ2ZfIiwiU2NlbmVDaGFuZ2VkIjoiVUp0XyIsIk5vZGVSZXBsYWNlZCI6IllKdF8iLCJFZGl0b3JDaGFuZ2VkIjoiVEp0XyIsIlVuZG8iOiJLSnRfIiwiUmVkbyI6IkhKdF8iLCJCZWZvcmVDb21tYW5kQXBwbGllZCI6InFKdF8iLCJDb21tYW5kQXBwbHlpbmciOiJKSnRfIiwiQ29tbWFuZEFwcGxpZWQiOiJQSnRfIn0g");let Uk=null;function Yk(t){return t instanceof OS&&typeof t.isSupported=="function"}var Tk=Ci(function(){var i;let s=i=class t{constructor(){this.VJt_=[];this.OJt_=null}clone(){const t=new i;this.VJt_.forEach((i=>{t.register(i)}));t.WJt_(this.OJt_);return t}zJt_(t){for(let i=0;i<this.VJt_.length;i++){const s=this.VJt_[i];if(s.XJt_(t)){const i=undefined;return new(0,s.constructor)(t)}}if(this.OJt_!=null){const i=undefined;return new(0,this.OJt_.constructor)(t)}throw new Error("Default editor does not exists")}register(t){let i,s;if(Yk(t)){i=t;s=this.VJt_.indexOf(i)>=0}else{const e=undefined;i=new t;s=this.VJt_.some((t=>t.constructor===i.constructor))}s||this.VJt_.push(i);return this}unregister(t){const i=[],s=undefined;this.VJt_.filter(((s,e)=>{if(s instanceof t){i.push(e);return!0}return!1})).forEach(((t,s)=>{this.VJt_.splice(i[s],1)}));return this}WJt_(t){this.OJt_=t;return this}static Ai_(){Uk===null&&(Uk=new i);return Uk}};s=i=t([_s("geotoolkit.controls.tools.editors.Registry")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFZGl0b3IiOiJ6SnRfIiwic2V0RGVmYXVsdEVkaXRvciI6IldKdF8ifX0sImdldEluc3RhbmNlIjoiQWlfIiwiZ2V0Q2xhc3NOYW1lIjoiRF8ifSAg");const Kk=function(t){const i=t.PP_();let s=t.JV_();s=qi(s,{reversed:!0});const e=t.rI_().setOptions(s);e.PP_()||e.xkt_(i);return e},Hk=function(t){if(t==null)return[];const i=undefined;return(Array.isArray(t)?t:[t]).map((function(t){const i=t._C_();t.td_();t.rd_(!1);return i}))},qk=function(t,i,s){if(t==null)return;const e=undefined;(Array.isArray(t)?t:[t]).forEach((function(t,e){t.vn_().rd_(i[e],s)}))};var Jk=Ci(function(){let i=class t extends $n{constructor(t){super();this.jJt_=t;this.ZJt_=null;this._Jt_=[];this.$Jt_=0;this.Jv_=Tk.Ai_()}iz_(t){this.Jv_=t;return this}tPt_(){return this.$Jt_>0}iPt_(){return this.$Jt_!==this._Jt_.length}sPt_(){if(!this.tPt_())return this;const t=this._Jt_[--this.$Jt_];let i=Kk(t);const s=this.ePt_(i.PP_());this.APt_(s);if(s!=null){let e=t.JV_();if(e==null||e["laststate"]===void 0){const A=s.save(t);e=qi(e,{laststate:A});t.setOptions(e);i=Kk(t)}this.notify(Lk.qJt_,this,i);const A=Hk(t.PP_());s.apply(i).update();qk(t.PP_(),A,!0);this.notify(Lk.JJt_,this,i)}this.notify(Lk.PJt_,this,i);this.notify(Lk.KJt_,this,t);return t.nPt_()?this:this.sPt_()}hPt_(){if(!this.iPt_())return this;const t=this._Jt_[this.$Jt_++],i=this.ePt_(t.PP_());this.APt_(i);if(i!=null){this.notify(Lk.qJt_,this,t);const s=Hk(t.PP_());i.apply(t).update();qk(t.PP_(),s,!0);this.notify(Lk.JJt_,this,t)}this.notify(Lk.PJt_,this,t);this.notify(Lk.HJt_,this,t);const s=this._Jt_[this.$Jt_];return!s||s.nPt_()?this:this.hPt_()}push(t,i){this._Jt_.length=this.$Jt_;if((i=i||(t.PP_()?this.ePt_(t.PP_()):this.ZJt_))!=null){this.APt_(i);t.PP_()||t.xkt_(i.PP_());this.notify(Lk.qJt_,this,t);if(t.rPt_())return this;const s=i.save(t);let e=t.JV_();e=qi(e,{origstate:s});t.setOptions(e);const A=Hk(t.PP_());i.apply(t);this.notify(Lk.JJt_,this,t);if(t.rPt_()){const e=i.restore(t,s);if(!e){qk(t.PP_(),A,!1);return this}t=e}qk(t.PP_(),A,!0);i.update();const n=this._Jt_[this._Jt_.length-1];if(i.isActive()&&n!=null&&n.PP_()===t.PP_()&&n.merge(t)){this.notify(Lk.PJt_,this,t);return this}}this._Jt_.push(t);this.$Jt_++;this.notify(Lk.PJt_,this,t);return this}getCurrentPosition(){return this.$Jt_}clear(){this.APt_(null);this._Jt_.length=0;this.$Jt_=0;return this}APt_(t){if(this.ZJt_===t)return this;this.ZJt_=t;this.notify(Lk.TJt_,this,t);return this}oPt_(){return this.ZJt_}ePt_(t){return this.ZJt_!=null&&this.ZJt_.PP_()===t?this.ZJt_:this.Jv_.zJt_({node:t,editmode:this.ZJt_!=null?this.ZJt_.lPt_():xk.All,layer:this.jJt_,history:this})}};i=t([_s("geotoolkit.controls.tools.editors.History")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRSZWdpc3RyeSI6Iml6XyIsImNhblVuZG8iOiJ0UHRfIiwiY2FuUmVkbyI6ImlQdF8iLCJ1bmRvIjoic1B0XyIsInJlZG8iOiJoUHRfIn19fSAg");var Pk=Ci(function(){let i=class t extends WS{constructor(t,i){super(t);this.uPt_=i["command"];this.JP_=i["node"];this.ZJt_=i["editor"];this.aPt_=i["distances"]||[];this.kSt_=i["value"]}gPt_(){return this.uPt_}zJt_(){return this.ZJt_}PP_(){return this.JP_}R4_(){return Array.isArray(this.JP_)?this.JP_:null}cPt_(){return this.aPt_.slice()}getValue(){return this.kSt_}};i=t([_s("geotoolkit.controls.tools.PaintEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb21tYW5kIjoiZ1B0XyIsImdldEVkaXRvciI6InpKdF8iLCJnZXROb2RlIjoiUFBfIiwiZ2V0Tm9kZXMiOiJSNF8iLCJnZXREaXN0YW5jZXMiOiJjUHRfIn19fSAg");const Vk=.3;var Ok=Ci(function(){let i=class t extends OS{constructor(t){super({name:(t=Pi(t,{name:"EditingTool",editmode:xk.All,mouseradius:3,touchradius:10,history:new Jk(t&&t["layer"]),editor:{ghost:{fillstyle:{color:"rgba(0, 0, 255, 0.3)"},linestyle:null,opacity:Vk}},registry:Tk.Ai_()},!0))["name"],layer:t["layer"],mouseradius:t["mouseradius"],touchradius:t["touchradius"],slots:{}});this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:{callback:this.Ct_.bind(this),object:Mi},keydown:{callback:this.IPt_.bind(this),object:Mi},keyup:{callback:this.fPt_.bind(this),object:Mi},"cg-leave":this.Okt_.bind(this)});this.Jv_=t["registry"];this.ZJt_=null;this.CPt_=t["editor"];this.dPt_=t["editmode"];this.YC_={};this.BPt_=(t,i,s)=>{this.wPt_(i,s)};this.QPt_=this.EPt_.bind(this);this.pPt_=this.mPt_.bind(this);this.yPt_=this.DPt_.bind(this);this.MPt_=this.vPt_.bind(this);this.bPt_=this.NPt_.bind(this);this.SPt_=this.GPt_.bind(this);this.RPt_=this.kPt_.bind(this);this.FPt_=null;this.dt_(t)}qw_(){return this.Jv_}ePt_(t){return this.Jv_.zJt_(t)}xPt_(t){if(this.e7_()!==t){const i=this.ePt_({node:t,editmode:this.lPt_(),mouseradius:this.aFt_(),touchradius:this.fFt_(),history:this.LPt_,layer:this.mgt_()});this.UPt_().APt_(i);if(i!=null){i.YPt_(t);if(this.FPt_&&!this.FPt_.qE_()){i.TPt_(this.FPt_);i.KPt_(this.FPt_)&&this.FPt_.stopPropagation(!1,!0)}this.FPt_=null}}return this}zFt_(t){this.HPt_=t.Fkt_();this.FPt_=t;this.ZJt_!=null&&this.ZJt_.isEnabled()&&this.ZJt_.qPt_(t)}XFt_(t){this.FPt_=null;this.ZJt_!=null&&this.ZJt_.isEnabled()&&this.ZJt_.JPt_(t)}Ct_(t){this.ZJt_!=null&&this.ZJt_.isEnabled()&&this.ZJt_.PPt_(t);this.HPt_=null;this.FPt_=null}Okt_(t){this.ZJt_!=null&&this.ZJt_.isEnabled()&&this.ZJt_.VPt_(t)}IPt_(t){const i=t.Lkt_();if(!i["defaultPrevented"]){this.ZJt_!=null&&this.ZJt_.isEnabled()&&this.ZJt_.OPt_(t);if(t.qE_()!==!0&&t.Mkt_()!==!0)switch(i["keyCode"]){case Ys.Z:if(i["ctrlKey"]!==!0)if(i["shiftKey"]){if(!this.iPt_())return}else if(!this.tPt_())return;i["shiftKey"]===!0?this.hPt_():this.sPt_();t.stopPropagation(!0,!0);break;case Ys.Y:if(!i["ctrlKey"]||!this.iPt_())return;this.hPt_();t.stopPropagation(!0,!0);break;case Ys.U_:this.stop();this.APt_(null);t.stopPropagation(!0,!0);break}}}fPt_(t){this.ZJt_!=null&&this.ZJt_.WPt_(t)}zPt_(){return this.HPt_!=null}update(){this.ZJt_!=null&&this.ZJt_.update();return this}Ngt_(){this.ZJt_!=null&&this.ZJt_.Ngt_();return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);Pi(t,this.YC_);t["history"]!=null&&this.XPt_(t["history"]);this.ZJt_!=null&&this.ZJt_.dt_(t);t["editmode"]!=null&&this.jPt_(t["editmode"]);if(t["editor"]!==void 0){this.CPt_=Pi(t["editor"],this.CPt_);this.ZJt_!=null&&this.ZJt_.dt_(this.CPt_)}return this}N_(){let t=super.N_();t=Pi(this.YC_,t);t["editmode"]=this.dPt_;return t}sPt_(){this.LPt_.sPt_();return this}tPt_(){return this.LPt_.tPt_()}iPt_(){return this.LPt_.iPt_()}hPt_(){this.LPt_.hPt_();return this}jPt_(t){this.dPt_=t;this.ZJt_!=null&&this.ZJt_.jPt_(t);return this}lPt_(){return this.dPt_}e7_(){return this.ZJt_?this.ZJt_.PP_():null}ZPt_(){return this.ZJt_?this.ZJt_.$O_():null}APt_(t){this.ZJt_!=null&&this.ZJt_.dispose();this.ZJt_=t;if(t!=null){const i=t.lPt_();t.on(Lk.End,this.BPt_).on(xS.Jkt_,this.QPt_).dt_(this.YC_).jPt_(i).gFt_(this.fFt_()).uFt_(this.aFt_());this.CPt_!=null&&t.dt_(this.CPt_)}this.notify(Lk.TJt_,this,new Pk(null,{node:t!=null?t.PP_():null,editor:t}));return this}zJt_(){return this.ZJt_}NPt_(t,i,s){s!==this.ZJt_&&this.APt_(s)}EPt_(t,i){this.setActive(i.isActive())}wPt_(t,i){this.notify(Lk.End,this,i)}mPt_(t,i,s){const e=new Pk(null,{node:s.PP_(),command:s,editor:this.ZJt_});this.notify(Lk.qJt_,this,e)}DPt_(t,i,s){const e=new Pk(null,{node:s.PP_(),command:s,editor:this.ZJt_});this.notify(Lk.JJt_,this,e)}vPt_(t,i,s){if(s.Dkt_()===Lk.YJt_){const t=s,i=t._Pt_(),e=t.$Pt_(),A=i.getParent(),n=A.FY_(i);A.removeChild(i);A.xY_(n,e);this.xPt_(e)}const e=new Pk(null,{node:s.PP_(),command:s,editor:this.ZJt_});this.notify(Lk.PJt_,this,e);this.notify(s.Dkt_()||t,this,e)}GPt_(t,i,s){const e=new Pk(null,{node:s.PP_(),command:s,editor:this.ZJt_});this.notify(Lk.KJt_,this,e)}kPt_(t,i,s){const e=new Pk(null,{node:s.PP_(),command:s,editor:this.ZJt_});this.notify(Lk.HJt_,this,e)}uFt_(t){super.uFt_(t);this.ZJt_!=null&&this.ZJt_.uFt_(t);return this}gFt_(t){super.gFt_(t);this.ZJt_!=null&&this.ZJt_.gFt_(t);return this}XPt_(t){if(t==null)return this;this.LPt_&&this.LPt_.off(Lk.qJt_,this.pPt_).off(Lk.JJt_,this.yPt_).off(Lk.PJt_,this.MPt_).off(Lk.TJt_,this.bPt_).off(Lk.KJt_,this.SPt_).off(Lk.HJt_,this.RPt_);this.LPt_=t.on(Lk.qJt_,this.pPt_).on(Lk.JJt_,this.yPt_).on(Lk.PJt_,this.MPt_).on(Lk.TJt_,this.bPt_).on(Lk.KJt_,this.SPt_).on(Lk.HJt_,this.RPt_);return this}UPt_(){return this.LPt_}Pkt_(){this.ZJt_!=null&&this.ZJt_.Kv_(this.isEnabled());super.Pkt_()}dispose(){if(this.LPt_!=null){this.LPt_.dispose();this.LPt_=null}this.APt_(null);this.YC_=null;this.CPt_=null;super.dispose()}};i=t([_s("geotoolkit.controls.tools.AbstractEditingTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRSZWdpc3RyeSI6InF3XyIsImNyZWF0ZUVkaXRvciI6ImVQdF8iLCJlZGl0Tm9kZSI6InhQdF8iLCJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJ1cGRhdGVIYW5kbGVzIjoiTmd0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJ1bmRvIjoic1B0XyIsImNhblVuZG8iOiJ0UHRfIiwiY2FuUmVkbyI6ImlQdF8iLCJyZWRvIjoiaFB0XyIsInNldEVkaXRNb2RlIjoialB0XyIsImdldEVkaXRNb2RlIjoibFB0XyIsImdldFNoYXBlIjoiZTdfIiwiZ2V0QWN0aXZlU2hhcGUiOiJaUHRfIiwic2V0RWRpdG9yIjoiQVB0XyIsImdldEVkaXRvciI6InpKdF8iLCJvbk5vZGVDcmVhdGVkIjoid1B0XyIsIm9uQmVmb3JlQ29tbWFuZEFwcGx5aW5nIjoibVB0XyIsIm9uQ29tbWFuZEFwcGx5aW5nIjoiRFB0XyIsIm9uQ29tbWFuZEFwcGxpZWQiOiJ2UHRfIiwib25Db21tYW5kVW5kbyI6IkdQdF8iLCJvbkNvbW1hbmRSZWRvIjoia1B0XyIsInNldE1vdXNlUmFkaXVzIjoidUZ0XyIsInNldFRvdWNoUmFkaXVzIjoiZ0Z0XyIsImdldEhpc3RvcnkiOiJVUHRfIiwib25FbmFibGVkU3RhdGVDaGFuZ2VkIjoiUGt0XyJ9fX0g");var Wk=Ci({tVt_:"Free",ux_:"Horizontal",ax_:"Vertical",iVt_:"AspectRatio"},2,"eyJGcmVlIjoidFZ0XyIsIkhvcml6b250YWwiOiJ1eF8iLCJWZXJ0aWNhbCI6ImF4XyIsIkFzcGVjdFJhdGlvIjoiaVZ0XyJ9");const zk=[Wk.tVt_,Wk.ux_,Wk.ax_,Wk.iVt_];var Xk=Ci(function(){let i=class t extends OS{constructor(t,i,s){const e=qi(t,{name:typeof i=="string"?i:"",mode:s==null?Wk.tVt_:s});super(e);this.uy_=new lA(0,0);this.ay_=new lA(0,0);if(typeof e["mode"]=="number"){ki("mode as number is deprecated since 4.0, use RubberBandRenderMode type instead");e["mode"]=zk[e["mode"]]}this.sVt_=e["mode"];this.Zqt_=Ts.z_}eVt_(t){if(typeof t=="number"){ki("setRubberBandRenderMode(number) is deprecated since 4.0, use RubberBandRenderMode type instead");t=zk[t]}this.sVt_=t;return this}AVt_(){return this.sVt_}nVt_(t,i){const s=this.mgt_().ot_(!0);if(this.sVt_===Wk.iVt_){const e=s.Ts_()/s.Ie_(),A=i.getY()-t.getY(),n=i.getX()-t.getX(),h=Math.abs(A),r=Math.abs(n);if(e<h/r){const s=h/e;n>0?i.vs_(t.getX()+s,i.getY()):i.vs_(t.getX()-s,i.getY())}else{const s=r*e;A>0?i.vs_(i.getX(),t.getY()+s):i.vs_(i.getX(),t.getY()-s)}}else if(this.sVt_===Wk.ax_){t.vs_(s.we_(),t.getY());i.vs_(s.Qe_(),i.getY())}else if(this.sVt_===Wk.ux_){t.vs_(t.getX(),s.Ee_());i.vs_(i.getX(),s.pe_())}}hVt_(){return this.Zqt_}rVt_(t){this.Zqt_=t;return this}};i=t([_s("geotoolkit.controls.tools.AbstractRubberTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRSdWJiZXJCYW5kUmVuZGVyTW9kZSI6ImVWdF8iLCJnZXRSdWJiZXJCYW5kUmVuZGVyTW9kZSI6IkFWdF8iLCJnZXRNb3VzZUJ1dHRvbnMiOiJoVnRfIiwic2V0TW91c2VCdXR0b25zIjoiclZ0XyJ9fX0g");var jk=Ci({oVt_:"corner",ne_:"center"},2,"eyJDb3JuZXIiOiJvVnRfIiwiQ2VudGVyIjoibmVfIn0g");var Zk=Ci({z_:"left",X_:"right",v6_:"both"},2,"eyJMZWZ0Ijoiel8iLCJSaWdodCI6IlhfIiwiQm90aCI6InY2XyJ9"),_k=Ci(function(){let i=class t extends OS{constructor(t){const i=qi(t,{name:"colorbarcursor",offset:0,symbolalignment:Zk.v6_,symbol:new ma({cssclass:t["cssclass"]||"colorbarcursor-symbol",width:6,height:6,alignment:dA.ne_,sizeisindevicespace:!0,painter:da,fillstyle:"black",visible:!0})},!0);if(i["colorbar"]==null)throw new Error("colorbar should be defined");const s=undefined;super({slots:{},name:i["name"],layer:i["group"]});this.lVt_=i["colorbar"];this.xwt_=ur(this.lVt_).Gw_((t=>t instanceof Av)).xw_();this.eFt_({pointermove:this.XFt_.bind(this),"cg-leave":t=>{this.uVt_(!1);this.notify(xS.Okt_,this,t)}});this.x0_=i["callback"];typeof i["init"]=="function"&&i["init"](this);this.aVt_=null;this.gVt_=null;this.cVt_=i["symbolalignment"];this.T2_=i["offset"];this.k6_(i["symbol"]);this.uVt_(!1);this.mbt_=this.IVt_.bind(this);this.lVt_.on(na.tG_,this.mbt_)}fVt_(t,i){if(this.lVt_===t&&this.mgt_()===i)return this;this.lVt_!=null&&this.lVt_.off(na.tG_,this.mbt_);this.lVt_=t;this.xwt_=ur(this.lVt_).Gw_((t=>t instanceof Av)).xw_();this.lVt_.on(na.tG_,this.mbt_);if(this.mgt_()!==i){this.mgt_().removeChild([this.aVt_,this.gVt_]);this.YFt_(i);this.k6_(this.DIt_)}return this}dispose(){this.lVt_.off(na.tG_,this.mbt_);this.aVt_&&this.mgt_().removeChild(this.aVt_);this.gVt_&&this.mgt_().removeChild(this.gVt_);super.dispose()}d$_(t){if(this.T2_===t)return this;this.T2_=t;this.CVt_();return this}uVt_(t){t||(this.dVt_=null);this.aVt_!=null&&this.aVt_.nf_(t);this.gVt_!=null&&this.gVt_.nf_(t);return this}setPosition(t){const i=this.lVt_.sQt_(t);if(Number.isFinite(i)===!1){this.uVt_(!1);return this}this.dVt_=t;const s=this.xwt_.getBounds().clone(),e=undefined;this.xwt_.getParent().if_().rn_(s,s);let A,n,h;const r=this.mgt_().if_(),o=this.DIt_.Ie_()/2+this.T2_;if(this.lVt_.R__()){A=s.getY();const t=this.lVt_.getParent().if_().SI_(i,0);if(this.aVt_){h=r.hI_(t,A-o);n=this.aVt_.ut_();this.aVt_.translate(h.getX()-n.EI_(),h.getY()-n.pI_())}if(this.gVt_){h=r.hI_(t,A+o+s.Ts_());n=this.gVt_.ut_();this.gVt_.translate(h.getX()-n.EI_(),h.getY()-n.pI_())}}else{A=s.getX();const t=this.lVt_.getParent().if_().GI_(0,i);if(this.aVt_){h=r.hI_(A-o,t);n=this.aVt_.ut_();this.aVt_.translate(h.getX()-n.EI_(),h.getY()-n.pI_())}if(this.gVt_){h=r.hI_(A+o+s.Ie_(),t);n=this.gVt_.ut_();this.gVt_.translate(h.getX()-n.EI_(),h.getY()-n.pI_())}}return this.uVt_(!0)}CVt_(){return this.dVt_==null?this:this.setPosition(this.dVt_)}XFt_(t){if(!this.isEnabled()||!this.lVt_.$C_()||this.x0_==null)return;const i=t.PP_(),s=this.bFt_(null,t),e=t.Lkt_(),A=this.x0_.call(this,i?i.if_().aI_(s):s,e,this);typeof A=="number"?this.setPosition(A):this.uVt_(!1)}BVt_(t){const i=Math.PI/2,s=t===Zk.X_,e=undefined;let A;switch(this.lVt_.Nwt_()){case sv.eG_:case sv.nG_:A=s?0:i*2;break;case sv.AG_:case sv.sG_:A=s?i*3:i;break}return A}k6_(t){this.DIt_=t;this.cVt_!==Zk.X_&&this.wVt_(Zk.z_);this.cVt_!==Zk.z_&&this.wVt_(Zk.X_);return this}wVt_(t){const i=t===Zk.X_;this.mgt_().removeChild(i?this.gVt_:this.aVt_);const s=this.DIt_.clone();s.rotate(this.BVt_(t),s.uR_(),s.aR_());i?this.gVt_=s:this.aVt_=s;this.mgt_().GY_(s);return this}QVt_(){return this.aVt_!=null&&this.aVt_.$C_()||this.gVt_!=null&&this.gVt_.$C_()}IVt_(){if(this.aVt_!=null){this.aVt_.at_(null);this.aVt_.rotate(this.BVt_(Zk.z_),this.aVt_.uR_(),this.aVt_.aR_())}if(this.gVt_!=null){this.gVt_.at_(null);this.gVt_.rotate(this.BVt_(Zk.X_),this.gVt_.uR_(),this.gVt_.aR_())}if(this.QVt_()){const t=this.dVt_;this.dVt_=null;this.setPosition(t)}else this.dVt_=null;return this}};i=t([_s("geotoolkit.controls.tools.ColorBarCursorTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPZmZzZXQiOiJkJF8iLCJ1cGRhdGVQb3NpdGlvbiI6IkNWdF8iLCJzZXRTeW1ib2wiOiJrNl8ifX19");var $k=function(){let i=class t extends WS{constructor(t,i){super(t);this.Qgt_=i}getPosition(){return this.Qgt_}};i=t([_s("geotoolkit.controls.tools.CrossHairEventArgs")],i);return i}();var tF=Ci({EVt_:"onPositionChanged",pVt_:"onPointerUp",mVt_:"onPointerDown"},2,"eyJvblBvc2l0aW9uQ2hhbmdlZCI6IkVWdF8iLCJvblBvaW50ZXJVcCI6InBWdF8iLCJvblBvaW50ZXJEb3duIjoibVZ0XyJ9");const iF="#757575",sF="12px Roboto",eF=new mA,AF=new lA(Number.NaN,Number.NaN),nF=["north","south","east","west","center"],hF=function(t){if(!t)return!1;for(let i=0;i<nF.length;++i)if(t[nF[i]]&&t[nF[i]]["visible"]===!0)return!0;return t["labels"]!=="none"&&t["labels"]!==!1};var rF=Ci(function(){let i=class t extends YC{constructor(t){super(t);this.yVt_=this.GE_()}SE_(t,i){super.SE_(t);i!==!1&&(this.yVt_=t);return this}DVt_(){return this.yVt_}};i=t([_s("geotoolkit.controls.tools.CrossHair.CrossHairText")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRBbmNob3JUeXBlIjoiU0VfIn19fSAg"),oF=Ci(function(){let i=class t extends su{constructor(t){super(t=qi(t,{radius:0},!0));this.qC_("cross-hair-cursor");this.KC_(!1);this.Qgt_=new lA(Number.NaN,Number.NaN);this.XO_={dl_:{left:null,MVt_:null,vVt_:null,right:null},vertical:{top:null,bVt_:null,NVt_:null,bottom:null}};this.rB_(new hl(iF,1,[3,2]).qD_(!0));this.SVt_=null;this.Xz_=t["radius"];t["outlinestyle"]&&this.GVt_(t["outlinestyle"])}GVt_(t,i){if(this.SVt_===t)return this;this.SVt_=hl.jD_(this,this.SVt_,t,i,this.oQ_());this.vn_().td_();return this}RVt_(){return this.SVt_}rB_(t,i){super.rB_(t,i);if(i===!0){this.kVt_(t,i);this.FVt_(t,i)}else{t=this.gt_();this.kVt_(t);this.FVt_(t)}return this}setRadius(t){if(this.Xz_!==t){this.Xz_=t;this.TRt_().td_()}return this}xVt_(){return this.Xz_}fn_(){return this.DIt_}k6_(t){if(this.DIt_!==t){this.DIt_=t;this.TRt_().td_()}return this}kVt_(t,i){if(this.LVt_===t)return this;this.LVt_=hl.jD_(this,this.LVt_,t,i,this.oQ_());this.vn_().td_();return this}UVt_(){return this.LVt_}FVt_(t,i){if(this.YVt_===t)return this;this.YVt_=hl.jD_(this,this.YVt_,t,i,this.oQ_());this.vn_().td_();return this}TVt_(){return this.YVt_}setPosition(t){if(this.Qgt_===t||this.Qgt_.bs_(t,NA.Je_))return this;this.td_();this.Qgt_=t==null?this.Qgt_.vs_(NaN,NaN):this.Qgt_.vs_(t.getX(),t.getY());this.TRt_().td_();return this}td_(t,i){const s=this.getParent();if(!(s instanceof Ic))return this;const e=s.ot_(),A=this.YVt_!==null?this.YVt_.Ie_()*.5:1,n=this.LVt_!==null?this.LVt_.Ie_()*.5:1;let h=eF.ce_(0,0,A,n);const r=s.if_();r&&(h=r.gI_(h,h));if(!isNaN(this.Qgt_.y)&&this.YVt_!=null){const t=new mA(e.we_(),this.Qgt_.y-h.Ts_(),e.Qe_(),this.Qgt_.y+h.Ts_());super.td_(t,i)}if(!isNaN(this.Qgt_.x)&&this.LVt_!=null){const t=new mA(this.Qgt_.x-h.Ie_(),e.Ee_(),this.Qgt_.x+h.Ie_(),e.pe_());super.td_(t,i)}return this}TRt_(t){const i=this.getParent();if(!(i instanceof Ic))return this;const s=i.ot_(),e=isNaN(this.Qgt_.getX())?s.ye_():this.Qgt_.getX(),A=isNaN(this.Qgt_.getY())?s.De_():this.Qgt_.getY(),n=s.Qe_(),h=s.pe_();this.XO_.dl_.left=s.we_();this.XO_.dl_.MVt_=[s.we_(),e];this.XO_.dl_.vVt_=[e,n];this.XO_.dl_.right=n;this.XO_.vertical.top=s.Ee_();this.XO_.vertical.bVt_=[s.Ee_(),A];this.XO_.vertical.NVt_=[A,h];this.XO_.vertical.bottom=h;if(this.Xz_>0||this.DIt_!=null){let i=this.DIt_!=null?this.DIt_.Ie_()/2:this.Xz_,s=this.DIt_!=null?this.DIt_.Ts_()/2:this.Xz_;const e=t||this.if_();i=bn.$c_(i,0,e);s=bn.$c_(0,s,e);this.XO_.dl_.MVt_[1]-=i;this.XO_.dl_.vVt_[0]+=i;this.XO_.vertical.bVt_[1]-=s;this.XO_.vertical.NVt_[0]+=s}return this}getPosition(){return this.Qgt_}split(t,i,s){if(t==="horizontal"){if(i==="left"){this.XO_.dl_.left=s.we_();this.XO_.dl_.MVt_[0]=s.Qe_()}if(i==="right"){this.XO_.dl_.right=s.Qe_();this.XO_.dl_.vVt_[1]=s.we_()}if(i==="center"){this.XO_.dl_.MVt_=s.we_()>this.XO_.dl_.MVt_[0]?[this.XO_.dl_.MVt_[0],s.we_()]:[];this.XO_.dl_.vVt_=s.Qe_()<this.XO_.dl_.vVt_[1]?[s.Qe_(),this.XO_.dl_.vVt_[1]]:[]}}if(t==="vertical"){if(i==="top"){this.XO_.vertical.top=s.Ee_();this.XO_.vertical.bVt_[0]=s.pe_()}if(i==="bottom"){this.XO_.vertical.bottom=s.pe_();this.XO_.vertical.NVt_[1]=s.Ee_()}if(i==="center"){this.XO_.vertical.bVt_=s.Ee_()>this.XO_.vertical.bVt_[0]?[this.XO_.vertical.bVt_[0],s.Ee_()]:[];this.XO_.vertical.NVt_=s.pe_()<this.XO_.vertical.NVt_[1]?[s.pe_(),this.XO_.vertical.NVt_[1]]:[]}}}KVt_(t,i){this.XO_.dl_.left!==i.we_()&&t.oB_(i.we_(),this.Qgt_.y,this.XO_.dl_.left,this.Qgt_.y);this.XO_.dl_.MVt_!=null&&t.oB_(this.XO_.dl_.MVt_[0],this.Qgt_.y,this.XO_.dl_.MVt_[1],this.Qgt_.y);this.XO_.dl_.vVt_!=null&&t.oB_(this.XO_.dl_.vVt_[1],this.Qgt_.y,this.XO_.dl_.vVt_[0],this.Qgt_.y);this.XO_.dl_.right!==i.Qe_()&&t.oB_(i.Qe_(),this.Qgt_.y,this.XO_.dl_.right,this.Qgt_.y)}HVt_(t,i){this.XO_.vertical.top!==i.Ee_()&&t.oB_(this.Qgt_.x,i.Ee_(),this.Qgt_.x,this.XO_.vertical.top);this.XO_.vertical.bVt_!=null&&this.XO_.vertical.bVt_.length>0&&t.oB_(this.Qgt_.x,this.XO_.vertical.bVt_[0],this.Qgt_.x,this.XO_.vertical.bVt_[1]);this.XO_.vertical.NVt_!=null&&this.XO_.vertical.NVt_.length>0&&t.oB_(this.Qgt_.x,this.XO_.vertical.NVt_[1],this.Qgt_.x,this.XO_.vertical.NVt_[0]);this.XO_.vertical.bottom!==i.pe_()&&t.oB_(this.Qgt_.x,i.pe_(),this.Qgt_.x,this.XO_.vertical.bottom)}Ad_(){super.Ad_();(this.DIt_!=null||this.Xz_>0)&&(this.qVt_=!0);return this}render(t){const i=this.getParent();if(!(i instanceof Ic)||this.gt_()==null||this.Qgt_==null)return;if((this.DIt_!=null||this.Xz_>0)&&this.qVt_){this.TRt_(t.Ji_());this.qVt_=!1}const s=i.ot_();if(!isNaN(this.Qgt_.y)&&this.YVt_!=null){if(this.SVt_!=null){t.rB_(this.SVt_);this.KVt_(t,s)}t.rB_(this.YVt_);this.KVt_(t,s)}if(!isNaN(this.Qgt_.x)&&this.LVt_!=null){if(this.SVt_!=null){t.rB_(this.SVt_);this.HVt_(t,s)}t.rB_(this.LVt_);this.HVt_(t,s)}if(!isNaN(this.Qgt_.x)&&!isNaN(this.Qgt_.y))if(this.DIt_!=null)this.DIt_.$C_()&&this.DIt_.gR_(this.Qgt_).render(t);else if(this.Xz_>0){if(this.SVt_!=null){t.rB_(this.SVt_);t.yR_(this.XO_.dl_.MVt_[1],this.XO_.vertical.bVt_[1],this.XO_.dl_.vVt_[0]-this.XO_.dl_.MVt_[1],this.XO_.vertical.NVt_[0]-this.XO_.vertical.bVt_[1])}if(this.gt_()!=null||this.ct_()!=null){t.iQ_(this.ct_());t.rB_(this.gt_());t.yR_(this.XO_.dl_.MVt_[1],this.XO_.vertical.bVt_[1],this.XO_.dl_.vVt_[0]-this.XO_.dl_.MVt_[1],this.XO_.vertical.NVt_[0]-this.XO_.vertical.bVt_[1])}}}N_(){const t=super.N_();t["radius"]=this.xVt_();t["outlinestyle"]=this.RVt_();return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["radius"]!==void 0&&this.setRadius(t["radius"]);t["outlinestyle"]!==void 0&&this.GVt_(t["outlinestyle"],!(t["outlinestyle"]instanceof hl));return this}};i=t([_s("geotoolkit.controls.tools.CrossHair.CrossHairCursor")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwidXBkYXRlU2NlbmVUcmFuc2Zvcm1hdGlvbiI6IkFkXyIsImludmFsaWRhdGUiOiJ0ZF8iLCJzZXRMaW5lU3R5bGUiOiJyQl8ifX19");const lF=function(t,i){return isNaN(t)?"":t.toFixed(2)},uF=function(t,i){return isNaN(i)?"":i.toFixed(2)},aF=new mA;var gF=function(){let i=class t extends sI{constructor(t){super();this._dx=0;this._dy=0;this.JVt_=!1;this.PVt_=!1;this.VVt_=!1;this.KC_(!1);this.Qgt_=new lA(Number.NaN,Number.NaN);this._$_={};t==null?this.fX_=new qa:this.g_(t);this.OVt_=(t,i,s)=>{this._$_[t]={border:{padding:0,visible:!1},text:new rF({text:"",alignment:i,ispointingup:!0}).qC_("cross-hair-label"),WVt_:s};this.GY_(this._$_[t].text)};this.OVt_(ha.ne_,dA.le_,uF);this.OVt_(ha.sG_,dA.ie_,uF);this.OVt_(ha.AG_,dA.ee_,uF);this.OVt_(ha.eG_,dA.ee_,lF);this.OVt_(ha.nG_,dA.Ae_,lF);this.g_(this.fX_)}render(t){if(this._dx===0&&this._dy===0){super.render(t);return}const i=t.Ji_(),s=this._$_[ha.ne_].text,e=s.ut_(),A=new Gn(i.BI_(),i.QI_(),i.wI_(),i.sI_(),i.EI_()+this._dx,i.pI_()+this._dy),n=Gn.multiply(i.rI_(),A);s.rd_(!1);s.at_(n);s.rd_(!0);super.render(t);s.rd_(!1);s.at_(e);s.rd_(!0)}zVt_(t){this.XVt_=t;return this}g_(t){if((t=qa.Wi_(t))instanceof qa){this.fX_=t;for(const t in this._$_)this._$_[t].text.g_(this.fX_)}return this}FE_(){return this.fX_}x__(t){for(const i in this._$_)this._$_.hasOwnProperty(i)&&this._$_[i].text.nf_(t);return this}setPosition(t){if(this.Qgt_===t||this.Qgt_.bs_(t,NA.Je_))return this;this.Qgt_=t==null?this.Qgt_.vs_(NaN,NaN):this.Qgt_.vs_(t.getX(),t.getY());this.jVt_();return this}jVt_(){const t=this.getParent();if(!(t instanceof Ic))return this;const i=t.ot_(),s=t.if_(),e=this.Qgt_.getX(),A=this.Qgt_.getY(),n=ha,h=s.sI_()<0&&this.VVt_,r=s.BI_()<0&&this.VVt_;this.ZVt_(n.sG_,r?i.Qe_():i.we_(),A,e,A);this.ZVt_(n.AG_,r?i.we_():i.Qe_(),A,e,A);this.ZVt_(n.eG_,e,h?i.pe_():i.Ee_(),e,A);this.ZVt_(n.nG_,e,h?i.Ee_():i.pe_(),e,A);this.ZVt_(n.ne_,this.JVt_?i.ye_():e,this.PVt_?i.De_():A,e,A);return this}ZVt_(t,i,s,e,A){const n=this._$_[t];if(isNaN(i)||isNaN(s)){n.visibility==null&&(n.visibility=n.text.$C_());n.text.nf_(!1)}else if(n.visibility!=null){n.text.nf_(n.visibility);n.visibility=null}if(!n.text.$C_())return;let h="";n.WVt_!=null&&(h=n.WVt_(e,A));n.text.a_(h);const r=n.text.XX_(),o=n.text.qb_(),l=n.text.if_();let u=0,a=0;if(r!==0){u=bn.$c_(r,0,l);a=bn.$c_(0,r,l)}const g=this.VVt_?OC.transform(l,n.text.DVt_()):n.text.DVt_();if(o!=null){u=OC.jj_(g)?+o.we_():+o.Qe_();a=OC.zj_(g)?+o.Ee_():+o.pe_();u=bn.$c_(u,0,l);a=bn.$c_(0,a,l)}const c=l.sI_()<0&&this.VVt_,I=l.BI_()<0&&this.VVt_;switch(g){case dA.he_:i+=2*u;break;case dA.ie_:i+=2*u;s+=2*a;break;case dA.se_:i+=2*u;s-=2*a;break;case dA.ee_:i-=2*u;s+=2*a;break;case dA.Ae_:i-=2*u;s-=2*a;break;case dA.oe_:i-=2*u;break;case dA.le_:s+=2*a;break;case dA.re_:s-=2*a;break}n.text.SE_(g,!1);n.text.gR_(i,s);const f=ha,C=n.text.DVt_();if(t===f.sG_&&C===dA.he_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("horizontal",I?"right":"left",aF)}else if(t===f.AG_&&C===dA.oe_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("horizontal",I?"left":"right",aF)}else if(t===f.eG_&&C===dA.le_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("vertical",c?"bottom":"top",aF)}else if(t===f.nG_&&C===dA.re_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("vertical",c?"top":"bottom",aF)}else if(t===f.ne_)if(C===dA.oe_||C===dA.he_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("horizontal","center",aF)}else if(C===dA.le_||C===dA.re_){aF.ce_(n.text.getBounds()).Le_(u,a);this.XVt_.split("vertical","center",aF)}}_Vt_(t){return this._$_[t]}getPosition(){return this.Qgt_}};i=t([_s("geotoolkit.controls.tools.CrossHair.CrossHairLabels")],i);return i}(),cF=Ci(function(){let i=class t extends OS{constructor(t,i){const s=t==null||t["labels"]!=="none"?(new qa).setColor(iF).nF_(sF):null,e=Pi(t,{layer:t instanceof Ic?t:null,name:typeof i=="string"&&i!==""?i:"cross-hair",linestyle:new hl(iF,1,[3,2]).qD_({x:!0,y:!0}),textstyle:s},!0);super(e);this.eFt_({pointermove:this.XFt_.bind(this),pointerup:this.Ct_.bind(this),pointerdown:this.zFt_.bind(this),"cg-enter":t=>{this.notify(xS.Vkt_,this,t)},"cg-leave":t=>{this.setPosition(AF,!1,t);this.notify(xS.Okt_,this,t)}});this.$Vt_=!0;this.tOt_=null;this.iOt_=null;this.eb_=null;this.sOt_=(new oF).rB_(e["linestyle"]).setPosition(AF);this.Jgt_.GY_(this.sOt_);this.eOt_=null;(hF(e)||e==null||e["labels"]!=="none")&&this.AOt_(e["textstyle"]);this.nOt_(e)}nOt_(t){if((t=Es(t))==null)return this;t["linestyle"]!=null&&this.sOt_.rB_(t["linestyle"]);t["fillstyle"]!=null&&this.sOt_.iQ_(t["fillstyle"]);t["outlinestyle"]!=null&&this.sOt_.GVt_(t["outlinestyle"]);t["horizontal"]!==void 0&&this.sOt_.FVt_(t["horizontal"]);t["vertical"]!==void 0&&this.sOt_.kVt_(t["vertical"]);t["radius"]!==void 0&&this.sOt_.setRadius(t["radius"]);t["symbol"]!==void 0&&this.sOt_.k6_(t["symbol"]);this.sOt_.TRt_();if(t["labels"]!=null&&(t["labels"]==="none"||t["labels"]===!1)){if((t["labels"]==="none"||t["labels"]===!1)&&this.eOt_){this.Jgt_.removeChild(this.eOt_);this.eOt_=null}return this}hF(t)&&!this.eOt_&&this.AOt_(t["textstyle"]);if(this.eOt_==null)return this;t["textstyle"]!==void 0&&this.eOt_.g_(t["textstyle"]);if(t["center"]){if(t["center"]["labelsoffset"]){this.eOt_._dx=t["center"]["labelsoffset"]["x"]!=null?t["center"]["labelsoffset"]["x"]:0;this.eOt_._dy=t["center"]["labelsoffset"]["y"]!=null?t["center"]["labelsoffset"]["y"]:0}this.eOt_.JVt_=t["center"]["lockx"]!=null?t["center"]["lockx"]:this.eOt_.JVt_;this.eOt_.PVt_=t["center"]["locky"]!=null?t["center"]["locky"]:this.eOt_.PVt_}t["keeporientation"]!==void 0&&(this.eOt_.VVt_=t["keeporientation"]);this.hOt_(ha.eG_,t["north"]);this.hOt_(ha.nG_,t["south"]);this.hOt_(ha.AG_,t["east"]);this.hOt_(ha.sG_,t["west"]);this.hOt_(ha.ne_,t["center"]);this.eOt_.jVt_();return this}Pkt_(){this.rOt_();super.Pkt_()}rB_(t,i){this.sOt_.rB_(t,i);return this}gt_(){return this.sOt_.gt_()}iQ_(t,i){this.sOt_.iQ_(t,i);return this}ct_(){return this.sOt_.ct_()}GVt_(t,i){this.sOt_.GVt_(t,i);return this}RVt_(){return this.sOt_.RVt_()}setRadius(t){this.sOt_.setRadius(t);return this}xVt_(){return this.sOt_.xVt_()}k6_(t){this.sOt_.k6_(t);return this}fn_(){return this.sOt_.fn_()}N_(){const t=super.N_();t["linestyle"]=this.sOt_.gt_();t["fillstyle"]=this.sOt_.ct_();t["outlinestyle"]=this.sOt_.RVt_();t["horizontal"]=this.sOt_.TVt_();t["vertical"]=this.sOt_.UVt_();t["radius"]=this.sOt_.xVt_();t["symbol"]=this.sOt_.fn_();if(this.eOt_==null)return t;t["textstyle"]=this.eOt_.FE_();t["keeporientation"]=this.eOt_.VVt_;t["north"]=this.oOt_(ha.eG_);t["south"]=this.oOt_(ha.nG_);t["east"]=this.oOt_(ha.AG_);t["west"]=this.oOt_(ha.sG_);t["center"]=this.oOt_(ha.ne_);t["center"]["labelsoffset"]={};t["center"]["labelsoffset"]["x"]=this.eOt_._dx;t["center"]["labelsoffset"]["y"]=this.eOt_._dy;t["center"]["lockx"]=this.eOt_.JVt_;t["center"]["locky"]=this.eOt_.PVt_;return t}dt_(t){super.dt_(t);this.nOt_(t);return this}oOt_(t){const i=this.eOt_._Vt_(t);if(i==null)return null;const s=i.text;return{textconverter:i.WVt_,textstyle:s.FE_(),fillstyle:s.ct_(),linestyle:s.gt_(),visible:s.$C_(),alignment:s.GE_(),padding:s.XX_(),offset:s.qb_(),radius:s.WX_()}}hOt_(t,i){if(i==null)return this;if(this.eOt_==null){if(i["visible"]!==!0)return this;this.AOt_()}const s=this.eOt_._Vt_(t);if(s==null)return this;const e=s.text;i["textconverter"]!==void 0&&(s.WVt_=i["textconverter"]);i["textstyle"]!=null&&e.g_(i["textstyle"]);i["fillstyle"]!=null&&e.iQ_(i["fillstyle"]);i["linestyle"]!=null&&e.rB_(i["linestyle"]);if(i["visible"]!=null){s.visibility=null;e.nf_(i["visible"])}i["alignment"]!=null&&e.SE_(i["alignment"]);i["padding"]!=null&&e.zX_(i["padding"]);i["offset"]!=null&&e.Ub_(i["offset"]);i["radius"]!=null&&e.OX_(i["radius"]);return this}g_(t){this.eOt_!=null&&this.eOt_.g_(t);return this}kVt_(t,i){this.sOt_.kVt_(t,i);return this}UVt_(){return this.sOt_.UVt_()}FVt_(t,i){this.sOt_.FVt_(t,i);return this}TVt_(){return this.sOt_.TVt_()}isVisible(){return this.sOt_.$C_()}nf_(t){if(this.$Vt_!==t){this.$Vt_=t;this.rOt_();this.notify(xS.Jkt_,this)}return this}getPosition(){return this.sOt_.getPosition()}lOt_(t){let i=this.getPosition();this.tOt_!=null&&(i=this.uOt_(this.tOt_));const s=this.tOt_;this.setPosition(i,t);this.tOt_=s;return this}setPosition(t,i,s){const e=this.sOt_.getPosition();if(e===t||e!=null&&e.bs_(t,NA.Je_))return this;this.sOt_.setPosition(t);this.eOt_!=null&&this.eOt_.setPosition(t);this.tOt_=null;if(i!==!0){const i=this.isActive();this.setActive(!0);this.notify(tF.EVt_,this,new $k(s,t));i||this.setActive(i)}return this}aOt_(t,i){if(this.eOt_==null)return this;const s=this.eOt_._Vt_(t);s!=null&&(s.WVt_=i);return this}gOt_(){return this.iOt_}cOt_(t){this.iOt_=t;return this}akt_(){return this.eb_}XFt_(t){if(!this.isEnabled()||!this.Jgt_)return;let i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;if(typeof this.iOt_=="function"){const s=t.Fkt_();this.eb_=this.iOt_(s);if(this.eb_){this.$kt_=this.LFt_(this.eb_,!1,!0);i=this.$kt_.mgt_();i.GY_([this.sOt_,this.eOt_])}else i=null}t.preventDefault();let s=new lA(Number.NaN,Number.NaN);if(i)if(Om(i)){s=i.uI_(t.Fkt_()).clone();(isNaN(s.getX())||isNaN(s.getY()))&&s.vs_(Number.NaN,Number.NaN)}else{s=this.bFt_(i,t);i.ot_().contains(s)||s.vs_(Number.NaN,Number.NaN)}const e=this.getPosition();if(e==null||e.bs_(s,NA.Je_)===!1){this.setPosition(s,!1,t);this.tOt_=this.IOt_(s)}}IOt_(t){if(this.Jgt_==null||isNaN(t.x)||isNaN(t.y))return t;const i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;return i&&i.if_()?i.if_().transformPoint(t):t}uOt_(t){if(this.Jgt_==null||isNaN(t.x)||isNaN(t.y))return t;const i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;return i&&i.if_()?i.if_().aI_(t):t}Ct_(t){this.isEnabled()&&this.Jgt_&&this.notify(tF.pVt_,this,new $k(t,this.getPosition()))}zFt_(t){if(!this.isEnabled()||!this.Jgt_)return;let i=new lA(Number.NaN,Number.NaN);if(this.Jgt_ instanceof TQ){const s=this.Jgt_.getParent();if(s instanceof Ic){i=this.bFt_(this.Jgt_.getParent(),t);s.ot_().contains(i)||i.vs_(Number.NaN,Number.NaN)}}else if(this.Jgt_){i=this.bFt_(this.Jgt_,t);this.Jgt_.ot_().contains(i)||i.vs_(Number.NaN,Number.NaN)}this.notify(tF.mVt_,this,new $k(t,i))}dispose(){this.sOt_.dispose();if(this.eOt_!=null){this.eOt_.dispose();this.eOt_=null}super.dispose()}rOt_(){const t=this.isEnabled()&&this.$Vt_;this.sOt_.nf_(t);this.eOt_!=null&&this.eOt_.nf_(t);return this}AOt_(t){if(!this.eOt_){t||(t=(new qa).setColor(iF).nF_(sF));this.eOt_=new gF(t).setPosition(AF).x__(!1).nf_(this.$Vt_).zVt_(this.sOt_);this.Jgt_.GY_(this.eOt_)}}};i=t([_s("geotoolkit.controls.tools.CrossHair")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIiwic2V0TGluZVN0eWxlIjoickJfIiwiZ2V0TGluZVN0eWxlIjoiZ3RfIiwic2V0RmlsbFN0eWxlIjoiaVFfIiwiZ2V0RmlsbFN0eWxlIjoiY3RfIiwic2V0T3V0TGluZVN0eWxlIjoiR1Z0XyIsImdldE91dExpbmVTdHlsZSI6IlJWdF8iLCJnZXRSYWRpdXMiOiJ4VnRfIiwic2V0U3ltYm9sIjoiazZfIiwiZ2V0U3ltYm9sIjoiZm5fIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldExhYmVsU2V0dGluZ3MiOiJvT3RfIiwic2V0TGFiZWxTZXR0aW5ncyI6ImhPdF8iLCJzZXRUZXh0U3R5bGUiOiJnXyIsInNldFZlcnRpY2FsTGluZVN0eWxlIjoia1Z0XyIsImdldFZlcnRpY2FsTGluZVN0eWxlIjoiVVZ0XyIsInNldEhvcml6b250YWxMaW5lU3R5bGUiOiJGVnRfIiwiZ2V0SG9yaXpvbnRhbExpbmVTdHlsZSI6IlRWdF8iLCJzZXRWaXNpYmxlIjoibmZfIiwidXBkYXRlQ3Vyc29yUG9zaXRpb24iOiJsT3RfIiwic2V0TGFiZWxzVGV4dENvbnZlcnRlciI6ImFPdF8iLCJzZXRTZWxlY3RUYXJnZXRDYWxsYmFjayI6ImNPdF8iLCJnZXRUYXJnZXQiOiJha3RfIn19fSAg");var IF=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(s);this.F0_=!1;this.JDt_=t;this.GBt_=i}fOt_(){return this.GBt_}getSelection(){return this.JDt_}stopPropagation(t,i){this.HFt_()?this.F0_=!0:super.stopPropagation(t,i);return this}qE_(){return this.HFt_()?this.F0_:super.qE_()}};i=t([_s("geotoolkit.controls.tools.DOMEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRNb3VzZVBvc2l0aW9uIjoiZk90XyIsImlzQ2FuY2VsZWQiOiJxRV8ifX19");var fF=Ci({COt_:"collision",Kz_:"inside"},2,"eyJDb2xsaXNpb24iOiJDT3RfIiwiSW5zaWRlIjoiS3pfIn0g");var CF=Ci({__:"hover",st_:"click",tt_:"mousedown",it_:"mouseup",et_:"doubleclick",dOt_:"taphold"},2,"eyJIb3ZlciI6Il9fIiwiQ2xpY2siOiJzdF8iLCJNb3VzZURvd24iOiJ0dF8iLCJNb3VzZVVwIjoiaXRfIiwiRG91YmxlQ2xpY2siOiJldF8iLCJUYXBIb2xkIjoiZE90XyJ9");var dF=Ci({BOt_:"rectangular",wOt_:"circular"},2,"eyJSZWN0YW5ndWxhciI6IkJPdF8iLCJDaXJjdWxhciI6IndPdF8ifSAg");var BF=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.JDt_=i;this.QOt_=s}EOt_(){return this.QOt_}getSelection(){return this.JDt_}vO_(t){this.JDt_=t;return this}};i=t([_s("geotoolkit.controls.tools.SelectionEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTZWxlY3Rpb25Nb2RlIjoiRU90XyIsInNldFNlbGVjdGlvbiI6InZPXyJ9fX0g");var wF=Ci({pOt_:"onPick",mOt_:"onSelectionEnd",yOt_:"onSelectionChanged",DOt_:"beforeSelectionChange",WFt_:"onDoubleClick"},2,"eyJvblBpY2siOiJwT3RfIiwib25TZWxlY3Rpb25FbmQiOiJtT3RfIiwib25TZWxlY3Rpb25DaGFuZ2VkIjoieU90XyIsImJlZm9yZVNlbGVjdGlvbkNoYW5nZSI6IkRPdF8iLCJvbkRvdWJsZUNsaWNrIjoiV0Z0XyJ9");const QF="rgba(189,189,189,0.5)",EF=new hl({color:"#bdbdbd",pattern:[2,3],pixelsnapmode:!0}),pF={alignment:Fa.ne_},mF={width:7,height:12,sizeisindevicespace:!0,painter:gE,alignment:dA.le_},yF=750,DF=function(t,i){if(t===i||!(i instanceof ch))return!0;while(i&&i.getParent()){if(i.getParent()===t)return!0;i=i.getParent()}return!1};var MF=Ci(function(){let i=class t extends Xk{constructor(t,i){super(t=qi(t=t||{},{layer:t instanceof Ic?t:t["layer"]||new TQ,name:"pick",mode:i}));this.eFt_(Pi(t["slots"],{pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi.document,enabled:!1}],dblclick:[{callback:this.WFt_.bind(this),object:null}]}));this.MOt_=null;this.vOt_=null;this.bOt_=!1;this.NOt_=[];this.SOt_=null;this.HPt_=null;this.uy_=new lA;this.ay_=new lA;this.GOt_=null;this.ROt_=(new sE).R6_(new ma(mF)).KC_(!1);this.kOt_=(new YC).tR_(!0).g_(pF).KC_(!1);this.QOt_=fk.zqt_;this.FOt_=fF.COt_;this.xOt_=null;this.LOt_=jk.ne_;this.UOt_=CF.tt_;this.YOt_=null;this._root=null;this.TOt_(dF.BOt_)}KOt_(){return this.MOt_}HOt_(t){this.MOt_=t;return this}qOt_(){return this.vOt_}JOt_(t){this.vOt_=t;return this}pxt_(t){this.pFt_("pointermove",t,Mi);this.pFt_("pointerup",t,Mi.document)}POt_(t){this._root=t;return this}getRootNode(){return this._root}$qt_(t){if(this.QOt_===t)return this;this.QOt_=t;return this}EOt_(){return this.QOt_}VOt_(t){this.FOt_=t;return this}OOt_(){return this.FOt_}TOt_(t){if(this.xOt_===t)return this;const i=this.GOt_?this.GOt_.gt_():EF.clone(),s=this.GOt_?this.GOt_.ct_():QF;this.xOt_=t;this.mgt_().removeChild([this.GOt_,this.ROt_,this.kOt_]);switch(t){case dF.BOt_:this.GOt_=new dp(0,0,0,0).nf_(!1).rB_(i).iQ_(s).KC_(!1);this.mgt_().GY_(this.GOt_);return this;default:this.GOt_=new nE(0,0,0,0).nf_(!1).rB_(i).iQ_(s).KC_(!1);const t=this.mgt_().if_()||Gn.JI_;this.ROt_.x6_().rB_(i).iQ_(i.getColor());this.ROt_.nf_(!1).rB_(i);this.kOt_.nf_(!1).SE_(t.sI_()<0?dA.le_:dA.re_);this.mgt_().GY_([this.GOt_,this.ROt_,this.kOt_])}return this}WOt_(){return this.xOt_}zOt_(t){this.LOt_=t;return this}XOt_(){return this.LOt_}jOt_(t){this.UOt_=t;return this}ZOt_(){return this.UOt_}_Ot_(t){this.SOt_=t;return this}Vp_(){return this.uy_}Op_(){return this.ay_}$Ot_(t){if(this.QOt_===fk.Xqt_){this.setActive(!0);this.uy_=this.bFt_(this.mgt_(),t);this.ay_=this.bFt_(this.mgt_(),t)}else{const i=t.Fkt_(),s=this.CFt_(t);this.tWt_(t.PP_(),t,i.x,i.y,s)}}zFt_(t){if(this.hVt_()&t.Lkt_()["buttons"]||this.dFt_(t))if(this.QOt_===fk.Xqt_){this.pxt_(!0);this.$Ot_(t)}else{this.HPt_=t.Fkt_();switch(this.UOt_){case CF.dOt_:this.YOt_=Number(setTimeout((()=>{this.QOt_===fk.zqt_&&this.UOt_===CF.dOt_&&this.isEnabled()&&this.$Ot_(t);this.YOt_=null}),yF));break;case CF.tt_:this.$Ot_(t)}}}iWt_(t){const i=this.mgt_().if_();return i!=null?i.transformPoint(t):t}tWt_(t,i,s,e,A){const n=this.getRootNode();let h=this.MOt_;if(h==null){let h=bC.select(t,s,e,A);n!=null&&(h=h.filter((t=>DF(n,t))));this.sWt_(h,i)}else{n!=null&&(h=(t,i)=>{DF(n,t)&&this.MOt_(t,i)});bC.IO_().iX_(h,t,s,e,A);this.notify(wF.yOt_,this,new BF(i,this.NOt_,this.QOt_))}}Ct_(t){const i=t.Fkt_();if(this.QOt_===fk.Xqt_){if(!this.isActive())return;this.pxt_(!1);this.setActive(!1);const i=t.PP_(),s=this.CFt_(t),e=this.iWt_(this.uy_),A=this.iWt_(this.ay_);this.GOt_.nf_(!1);this.ROt_.nf_(!1);this.kOt_.nf_(!1);const n=new mA(e.x,e.y,A.x,A.y);n.Ie_()<.1&&n.setX(n.getX()-s/2).de_(s/2);n.Ts_()<.1&&n.setY(n.getY()-s/2).Be_(s/2);this.FOt_===fF.COt_?this.tWt_(i.getRoot(),t,n):this.xOt_===dF.wOt_?this.tWt_(i.getRoot(),t,this.eWt_,this.AWt_,this.AWt_):this.tWt_(i.getRoot(),t,[n.getX(),n.Qe_(),n.Qe_(),n.getX()],[n.getY(),n.getY(),n.pe_(),n.pe_()],!1)}else switch(this.UOt_){case CF.dOt_:if(this.YOt_!=null){clearTimeout(this.YOt_);this.YOt_=null}break;case CF.it_:this.$Ot_(t);break;case CF.st_:this.HPt_&&lA.Ss_(this.HPt_,i)<this.CFt_(t)&&this.$Ot_(t);break}}WFt_(t){this.notify(wF.WFt_,this,new BF(t,this.NOt_,this.QOt_));this.QOt_===fk.zqt_&&this.UOt_===CF.et_&&this.$Ot_(t)}XFt_(t){if(this.QOt_!==fk.zqt_){if(this.isActive()){this.ay_=this.bFt_(this.mgt_(),t);this.nVt_(this.uy_,this.ay_);if(this.xOt_===dF.BOt_)this.GOt_.ce_(this.uy_.getX(),this.uy_.getY(),this.ay_.getX(),this.ay_.getY()).nf_(!0);else{let t;const i=this.mgt_().if_()||Gn.JI_,s=this.iWt_(this.uy_),e=this.iWt_(this.ay_);if(this.LOt_===jk.ne_){this.eWt_=s;this.AWt_=lA.Ss_(s,e)}else{this.eWt_=new lA((s.getX()+e.getX())/2,(s.getY()+e.getY())/2);this.AWt_=lA.Ss_(e,this.eWt_)}t=i.hI_(this.eWt_.getX()-this.AWt_,this.eWt_.getY()-this.AWt_);const A=t.getX(),n=t.getY();t=i.hI_(this.eWt_.getX()+this.AWt_,this.eWt_.getY()+this.AWt_);const h=t.getX(),r=t.getY();this.GOt_.ce_(A,n,h,r).nf_(!0);let o=!1;if(this.vOt_){const t=new lA((A+h)/2,(n+r)/2),i=new lA(h,(n+r)/2),s=this.vOt_(this.AWt_,t.clone(),i.clone());if(s){this.ROt_.zA_({from:t,to:i});this.kOt_.a_(s).gR_((t.getX()+i.getX())/2,t.getY());o=!0}}this.ROt_.nf_(o);this.kOt_.nf_(o)}t.stopPropagation(!0)}}else if(this.UOt_===CF.__){this.ay_=this.bFt_(this.mgt_(),t);const i=this.iWt_(this.ay_);this.tWt_(t.PP_(),t,i.x,i.y,this.CFt_(t))}}sWt_(t,i){this.SOt_!=null&&(t=this.SOt_.call(this,t));this.nWt_(t,i)}getSelection(){return this.NOt_}vO_(t){return this.nWt_(t,null)}nWt_(t,i){this.notify(wF.pOt_,this,new BF(i,t,this.QOt_));if(!Ki(this.NOt_,t)){this.notify(wF.DOt_,this,new BF(i,this.NOt_,this.QOt_));this.NOt_=t;this.notify(wF.yOt_,this,new BF(i,this.NOt_,this.QOt_))}this.hWt_()&&this.Kv_(!1);this.notify(wF.mOt_,this,new BF(i,t,this.QOt_));return this}rB_(t,i){this.GOt_.rB_(t,i);t=this.GOt_.gt_();this.ROt_.rB_(t);this.ROt_.x6_().rB_(t).iQ_(t.getColor());return this}iQ_(t,i){this.GOt_.iQ_(t,i);return this}g_(t,i){this.kOt_.g_(t,i);return this}setOptions(t){(t=Es(t))["enabled"]!=null&&this.Kv_(t["enabled"]);t["rootnode"]!=null&&this.POt_(t["rootnode"]);t["nodefilter"]!==null&&typeof t["nodefilter"]!="function"||this._Ot_(t["nodefilter"]);t["selectorcallback"]!==null&&typeof t["selectorcallback"]!="function"||this.HOt_(t["selectorcallback"]);t["measurecallback"]!==null&&typeof t["measurecallback"]!="function"||this.JOt_(t["measurecallback"]);t["mode"]!=null&&this.$qt_(t["mode"]);t["rubberbandmode"]!=null&&this.VOt_(t["rubberbandmode"]);t["rubberbandshapemode"]!=null&&this.TOt_(t["rubberbandshapemode"]);t["circularmode"]!=null&&this.zOt_(t["circularmode"]);t["pointermode"]!=null&&this.jOt_(t["pointermode"]);t["linestyle"]!=null&&this.rB_(t["linestyle"]);t["fillstyle"]!=null&&this.iQ_(t["fillstyle"]);t["textstyle"]!=null&&this.g_(t["textstyle"]);t["autodisabled"]!=null&&this.rWt_(t["autodisabled"]);t["mouseradius"]!=null&&this.uFt_(t["mouseradius"]);t["touchradius"]!=null&&this.gFt_(t["touchradius"]);return this}rWt_(t){this.bOt_=t;return this}hWt_(){return this.bOt_}dispose(){if(this.YOt_!=null){clearTimeout(this.YOt_);this.YOt_=null}this.GOt_.dispose();this.ROt_.dispose();this.kOt_.dispose();this.NOt_=[];super.dispose()}};i=t([_s("geotoolkit.controls.tools.Selection")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTZWxlY3RvckNhbGxiYWNrIjoiSE90XyIsInNldE1lYXN1cmVDYWxsYmFjayI6IkpPdF8iLCJzZXRSb290Tm9kZSI6IlBPdF8iLCJzZXRTZWxlY3Rpb25Nb2RlIjoiJHF0XyIsImdldFNlbGVjdGlvbk1vZGUiOiJFT3RfIiwic2V0UnViYmVyQmFuZE1vZGUiOiJWT3RfIiwiZ2V0UnViYmVyQmFuZE1vZGUiOiJPT3RfIiwic2V0UnViYmVyQmFuZFNoYXBlTW9kZSI6IlRPdF8iLCJnZXRSdWJiZXJCYW5kU2hhcGVNb2RlIjoiV090XyIsInNldENpcmN1bGFyTW9kZSI6InpPdF8iLCJnZXRDaXJjdWxhck1vZGUiOiJYT3RfIiwic2V0UG9pbnRlck1vZGUiOiJqT3RfIiwiZ2V0UG9pbnRlck1vZGUiOiJaT3RfIiwic2V0Tm9kZUZpbHRlciI6Il9PdF8iLCJnZXRTdGFydFBvaW50IjoiVnBfIiwiZ2V0RW5kUG9pbnQiOiJPcF8iLCJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJvbkRvdWJsZUNsaWNrIjoiV0Z0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsInNldFNlbGVjdGlvbiI6InZPXyIsInNldExpbmVTdHlsZSI6InJCXyIsInNldEZpbGxTdHlsZSI6ImlRXyIsInNldFRleHRTdHlsZSI6ImdfIiwic2V0QXV0b0Rpc2FibGVkIjoicld0XyIsImlzQXV0b0Rpc2FibGVkIjoiaFd0XyJ9fX0g");const vF=function(t,i,s){let e;const A=new IF(i,s.Fkt_(),s);for(e=i.length-1;e>=0;e--){if(!(i[e]instanceof ch))continue;const s=t.indexOf(i[e]);if(s>=0){i[e].notify(Hs.__,i[e],A);t.splice(s,1)}else i[e].Bd_(Rl.__).notify(Hs.L_,i[e],A)}for(e=t.length-1;e>=0;e--)t[e]instanceof ch&&t[e].Qd_(Rl.__).notify(Hs.Z_,t[e],A)};var bF=Ci(function(){let i=class t extends MF{constructor(t){super();const i={pointermove:this.XFt_.bind(this),pointerdown:this.zFt_.bind(this),pointerup:this.Ct_.bind(this),"cg-leave":this.Okt_.bind(this)};this.HC_(t["name"]||"domsupport");this.eFt_(i);this.E8_=t["plot"];this.GBt_=null;this.JDt_=[];this.HPt_=null}XFt_(t){const i=t.Fkt_();if(this.GBt_==null||!this.GBt_.bs_(i)){this.GBt_=i;if(eh.Ai_().Yf_(this.E8_.getRoot())){const i=this.oWt_(t);vF(this.JDt_,i,t);this.JDt_=i;let s=null;for(let t=i.length-1;t>=0;t--){const e=i[t];if(e instanceof iu){s=e.sN_();if(s!=null)break}}BG.Yb_(this.E8_,{cursor:s},this)}}}zFt_(t){this.HPt_=t.Fkt_();const i=this.oWt_(t);if(this.dFt_(t)){vF(this.JDt_,i,t);this.JDt_=i}this.lWt_(i,[Hs.tt_],t)}Ct_(t){let i;const s=this.oWt_(t),e=t.Fkt_();i=this.kFt_(e)?[Hs.it_,Hs.st_,Hs.et_]:this.uWt_(t)?[Hs.it_,Hs.st_]:[Hs.it_];this.lWt_(s,i,t)}Okt_(t){this.GBt_=null;vF(this.JDt_,[],t);this.JDt_=[]}uWt_(t){const i=t.Fkt_(),s=this.dFt_(t)?this.fFt_():this.aFt_();return this.HPt_&&lA.Ss_(this.HPt_,i)<=s}lWt_(t,i,s){const e=new IF(t,s.Fkt_(),s);for(let s=t.length-1;s>=0;s--)if(t[s]instanceof ch)for(let A=0;A<i.length;A++){t[s].notify(i[A],t[s],e);if(e.qE_())return}}oWt_(t){const i=t.Fkt_(),s=this.dFt_(t)?this.fFt_():this.aFt_();return bC.select(this.E8_.getRoot(),i.getX(),i.getY(),s)}};i=t([_s("geotoolkit.controls.tools.DOMSupport")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlVXAiOiJDdF8ifX19");var NF=Ci(function(){let i=class t extends WS{constructor(t,i){super(t);this.rO_=Array.isArray(i)?i.slice():[i]}J2_(){return this.rO_}};i=t([_s("geotoolkit.controls.tools.DragAndDropEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFbGVtZW50cyI6IkoyXyJ9fX0g");var SF=Ci({pOt_:"onPick",aWt_:"onDrag",gWt_:"onDrop"},2,"eyJvblBpY2siOiJwT3RfIiwib25EcmFnIjoiYVd0XyIsIm9uRHJvcCI6ImdXdF8ifSAg"),GF=Ci({cWt_:"VisibleModelLimits",IWt_:"ModelLimits"},2,"eyJWaXNpYmxlTW9kZWxMaW1pdHMiOiJjV3RfIiwiTW9kZWxMaW1pdHMiOiJJV3RfIn0g"),RF=Ci(function(){let i=class t extends OS{constructor(t){const i=undefined,s=Pi(t,{nodefilters:[{drag:t=>t.filter((t=>t instanceof su))}],inflatex:0,inflatey:0,dragmode:GF.cWt_,slots:{},name:"drag-and-drop"},!0);super(s);this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:{callback:this.XFt_.bind(this),object:Mi,enabled:!1},pointerup:{callback:this.Ct_.bind(this),object:Mi,enabled:!1}});this.E8_=null;this.OSt_=new bC;this.fWt_=new mQ;this.dVt_=null;this.CWt_=null;this.dWt_=null;this.BWt_=s["inflatex"];this.wWt_=s["inflatey"];this.QWt_=s["dragmode"];this.EWt_=s["nodefilters"];this.pWt_=null;this._D_=null;this.Kv_(!1)}lFt_(t){if(t==null)return this;super.lFt_(t);this.on(SF.aWt_,((t,i,s)=>{}));this.E8_=t;this.dWt_==null&&(this.dWt_=Xy.Ai_().create(this.E8_));return this}dispose(){if(this.dWt_!=null){this.dWt_.remove();this.dWt_=null}super.dispose()}Pkt_(){super.Pkt_();this.isEnabled()===!1&&this.mWt_()}Dgt_(){super.Dgt_();this.isEnabled()===!1&&this.mWt_()}mWt_(){this.pWt_=null;this._D_=null;this.dWt_!=null&&this.dWt_.remove();return this}yWt_(t){const i=t.PP_(),s=this.bFt_(i,t),e=this.OSt_.select(i,s.getX(),s.getY(),2).filter(Ih);for(let t=0;t<this.EWt_.length;++t){this._D_=null;const i=this.EWt_[t]["drag"](e),s=this.EWt_[t]["container"];s&&(this._D_=s(e));if(!(i==null||Array.isArray(i)&&i.length===0)){Array.isArray(i)?i.length>1&&!s?ki("NodeFilter.Drag returned an array. NodeFilters.Container should be specified!"):this.pWt_=i:this.pWt_=[i];break}}}zFt_(t){if(this.pWt_!=null&&this.dFt_(t))t.stopPropagation(!1,!0);else{this.yWt_(t);if(this.pWt_!=null){this.start(t);this.notify(SF.pOt_,this,new NF(t,this.pWt_))}}}start(t){t.stopPropagation(!1,!0);super.start(t);OS.lock(this.E8_,this);this.DWt_(t);this.pFt_("pointermove",!0,Mi);this.pFt_("pointerup",!0,Mi);return this}stop(){super.stop();OS.unlock(this);this.mWt_();this.pFt_("pointermove",!1,Mi);this.pFt_("pointerup",!1,Mi);return this}DWt_(t){this.dVt_=null;let i;const s=this._D_?this._D_:this.pWt_[0];if(!ie(s))return;i=s.getBounds().clone().Le_(this.BWt_,this.wWt_);let e=s.if_(),A;ge(s)&&s.It_()!=null&&(e=Gn.multiply(e,s.It_().rI_()));if(this.QWt_===GF.cWt_){if(re(s))A=s.lt_();else{A=e.transform(i);A.intersect(0,0,t.getPlot().Ie_(),t.getPlot().Ts_())}i=e.uI_(A)}else A=e.transform(i);const n=e.transform(i).Me_();e=Gn.multiply(Gn.kI_(-n.getX(),-n.getY()),e);e.transform(i,i);const h=fr.zw_(i.Ie_(),i.Ts_());h.clear();s instanceof iu&&s.ut_()!=null&&(e=Gn.multiply(e,s.ut_().rI_()));const r=h.tQ_(e);this._D_&&r.addFilter(this.fWt_.setArray(this.pWt_));s.render(r);h.gM_();this.CWt_=this.dWt_.getPosition();this.CWt_.x+=A.getX();this.CWt_.y+=A.getY();this.dWt_.initialize(h,A,this.CWt_)}XFt_(t){if(t.Lkt_().buttons===0){this.Ct_(t);return}const i=t.qkt_();if(this.dVt_!=null){this.CWt_.x+=i.getX()-this.dVt_.getX();this.CWt_.y+=i.getY()-this.dVt_.getY();this.dWt_.setPosition(this.CWt_.x,this.CWt_.y);this.dVt_=i;this.notify(SF.aWt_,this,new NF(t,this.pWt_))}else this.dVt_=i}Ct_(t){t.stopPropagation(!1,!0);this.notify(SF.gWt_,this,new NF(t,this.pWt_));this.stop()}MWt_(){return this.EWt_}vWt_(t){this.EWt_=t;return this}bWt_(){return this.QWt_}NWt_(t){this.QWt_=t;return this}SWt_(t){je.As_()||BG.Yb_(this.dWt_.J2_()[0],{cursor:t},this)}};i=t([_s("geotoolkit.controls.tools.DragAndDrop")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIiwib25BY3RpdmVTdGF0ZUNoYW5nZWQiOiJEZ3RfIiwiZ2V0Tm9kZUZpbHRlcnMiOiJNV3RfIiwic2V0Tm9kZUZpbHRlcnMiOiJ2V3RfIiwiZ2V0RHJhZ01vZGUiOiJiV3RfIiwic2V0RHJhZ01vZGUiOiJOV3RfIiwic2V0Q3Vyc29yIjoiU1d0XyJ9fX0g");var kF=Ci({IJt_:"Translate",GWt_:"Transform",fJt_:"Rotate",RWt_:"ChangeBounds"},2,"eyJUcmFuc2xhdGUiOiJJSnRfIiwiVHJhbnNmb3JtIjoiR1d0XyIsIlJvdGF0ZSI6ImZKdF8iLCJDaGFuZ2VCb3VuZHMiOiJSV3RfIn0g");const FF="Node is null";function xF(t,i){return t!=null?`Node ${t.D_()} does not implement ${i} method`:FF}const LF=function(t,i){if(!oe(t)){ki(xF(t,"get/setLocalTransform"));return}const s=t.ut_()||new Gn;s.vI_(i["tr"]);t.at_(s)},UF=function(t,i){le(t)?t.translate(i["dx"],i["dy"]):ki(xF(t,"translate"))},YF=function(t,i){if(!ie(t)){ki(xF(t,"getBounds"));return}const s=t.getBounds();if(s==null)return;if(!oe(t)){ki(xF(t,"get/setLocalTransform"));return}const e=t.ut_()!=null?t.ut_().clone():new Gn,A=t.getParent()?t.getParent().if_():Gn.JI_,n=e.DI_(A),h=n.nI_(s.ye_(),s.De_()),r=Gn.FI_(i["angle"],h.getX(),h.getY());t.at_(r.DI_(A.rI_()).vI_(n))},TF=function(t,i){if(!ee(t)){ki(xF(t,"setBounds"));return}const s=i["p1"],e=i["p2"],A=new mA(s.getX(),s.getY(),e.getX(),e.getY());t.ht_(A)};let KF=null;var HF=Ci(function(){var t=class{constructor(){this.kWt_=new Map;this.FWt_=null;this.xWt_=null;this.LWt_=null;this.register(iu,kF.IJt_,UF).register(iu,kF.GWt_,LF).register(Du,kF.fJt_,YF).register(Ca,kF.fJt_,YF).register(Ic,kF.fJt_,YF).register(eE,kF.RWt_,TF).register(Ca,kF.RWt_,TF).register(sI,kF.RWt_,TF)}register(t,i,s){if(this.kWt_.has(t))this.kWt_.get(t).set(i,s);else{const e=new Map;e.set(i,s);this.kWt_.set(t,e)}this.xWt_=null;this.LWt_=null;this.FWt_=null;return this}unregister(t,i){if(this.kWt_.has(t)){const s=this.kWt_.get(t);s.delete(i)&&s.size===0&&this.kWt_.delete(t)}this.xWt_=null;this.LWt_=null;this.FWt_=null;return this}xd_(t,i){return this.UWt_(t,i)!=null}UWt_(t,i){if(t==null)return null;if(this.FWt_!=null&&t.constructor===this.xWt_&&i===this.LWt_)return this.FWt_;let s=null;this.kWt_.has(t.constructor)&&(s=this.kWt_.get(t.constructor).get(i));if(s==null){let e=null;this.kWt_.forEach((function(A,n){if(t instanceof n&&(e==null||n.prototype instanceof e)){const t=A.get(i);if(t!=null){e=n;s=t}}}))}this.FWt_=s;this.LWt_=i;this.xWt_=t.constructor;return s}YWt_(t,i,s){const e=this.UWt_(t,i);if(e==null)return!1;e(t,s);return!0}static Ai_(){KF==null&&(KF=new t);return KF}};return t}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1JlZ2lzdGVyZWQiOiJ4ZF8iLCJnZXRPcGVyYXRpb24iOiJVV3RfIiwiYXBwbHlPcGVyYXRpb24iOiJZV3RfIn19LCJnZXRJbnN0YW5jZSI6IkFpXyJ9");const qF=new Gn,JF=new Gn,PF=new mA,VF=new lA,OF=new lA;var WF=function(){var i;let s=i=class t{static TWt_(t,s,e){e=e||t.getParent();const A=t.ut_()?t.ut_().clone():new Gn,n=i.KWt_(e,s,qF);A.DI_(n);t.at_(A);return t}static KWt_(t,i,s){const e=s||new Gn;e.fI_();if(t===i)return e;t&&t.if_()&&e.vI_(t.if_());i&&i.if_()&&e.DI_(i.if_().rI_());return e}static HWt_(t,s,e){const A=e||new Gn;A.fI_();oe(t)&&t.ut_()&&A.vI_(t.ut_());if(t==null||t.getParent()==null||t.getParent()===s)return A;A.DI_(i.KWt_(t.getParent(),s));return A}static qWt_(t,i){let s=0,e=0;t.we_()<i.we_()?s=i.we_()-t.we_():t.Qe_()>i.Qe_()&&(s=i.Qe_()-t.Qe_());t.Ee_()<i.Ee_()?e=i.Ee_()-t.Ee_():t.pe_()>i.pe_()&&(e=i.pe_()-t.pe_());return s||e?new lA(s,e):null}static lPt_(t){let i=0;const s=HF.Ai_();for(let e=0;e<t.length;e++){const A=t[e];s.xd_(A,kF.IJt_)&&(i|=xk.IJt_);s.xd_(A,kF.GWt_)&&(i|=xk.cJt_);s.xd_(A,kF.fJt_)&&(i|=xk.fJt_)}return i}static JWt_(t,i){const s=t.getParent();if(s==null||!(s instanceof Ic))return!1;s.removeChild(t);return!0}static g1_(t,i,s){NA.Oe_(s)&&s>=0?t.xY_(s,i):t.GY_(i);return!0}static ht_(t,i,s,e){return HF.Ai_().YWt_(t,kF.RWt_,{p1:i,p2:s,hint:e})}static PWt_(t,i,s,e){return HF.Ai_().YWt_(t,kF.IJt_,{dx:i,dy:s,hint:e})}static VWt_(t,i,s){return HF.Ai_().YWt_(t,kF.GWt_,{tr:i,hint:s})}static OWt_(t,i,s){return HF.Ai_().YWt_(t,kF.fJt_,{angle:i,hint:s})}static WWt_(t,i,s,e,A,n){n=n||new Gn;const h=s.HI_();let r=bn.jc_(i.Ie_(),0,s),o=bn.jc_(0,i.Ts_(),s);if(NA.equals(r,0)||NA.equals(o,0))return n.dI_(A);let l=t.IR_(e,JF),u;if(isNaN(l.yI_()))u=s.nI_(i.ye_(),i.De_());else{u=l.nI_(.5,.5);const t=bn.jc_(1,0,l),i=bn.jc_(0,1,l);r=Math.max(r,t);o=Math.max(o,i)}const a=PF.ce_(u.getX()-r/2,u.getY()-o/2,u.getX()+r/2,u.getY()+o/2);l=Gn.xI_(i,a,!1,!1,!1,qF);if(h!==0){const t=Gn.FI_(h,u.getX(),u.getY(),JF);l.DI_(t)}const g=l.DI_(e.rI_()),c=A.BI_()*g.BI_()<0,I=A.sI_()*g.sI_()<0;if(c||I){const t=Gn.xI_(i,i,c,I,!1,JF);g.vI_(t)}return n.dI_(g)}static zWt_(t,i){if(!i.MI_())return!1;if(i.BI_()===0||i.sI_()===0)return!1;VF.vs_(i.nI_(t.we_(),t.Ee_()));OF.vs_(i.nI_(t.Qe_(),t.pe_()));const s=lA.Ss_(VF,OF);VF.vs_(i.nI_(t.Qe_(),t.Ee_()));OF.vs_(i.nI_(t.we_(),t.pe_()));const e=lA.Ss_(VF,OF);return!NA.equals(s,e)}};s=i=t([_s("geotoolkit.controls.tools.ToolHelpers")],s);return s}();function zF(t){return t&&typeof t.EI_=="function"&&typeof t.pI_=="function"&&typeof t.vP_=="function"}function XF(t){return t&&typeof t.EI_=="function"&&typeof t.pI_=="function"&&typeof t.getIndex=="function"}function jF(t){return t&&typeof t.XWt_=="function"&&typeof t.jWt_=="function"}function ZF(t){return t&&typeof t.ZWt_=="function"&&typeof t._Wt_=="function"}function _F(t){return t&&typeof t.HI_=="function"}function $F(t){return t&&typeof t.OA_=="function"&&typeof t.WA_=="function"}function tx(t){return t&&typeof t.dn_=="function"&&typeof t.getValue=="function"}function ix(t){return t&&typeof t.$Wt_=="function"&&typeof t.tzt_=="function"}function sx(t){return t&&typeof t.izt_=="function"&&typeof t.szt_=="function"&&typeof t.ezt_=="function"&&typeof t.Azt_=="function"}function ex(t){return t&&typeof t.getX=="function"&&typeof t.getY=="function"}function Ax(t){return t&&typeof t.getX=="function"&&typeof t.getY=="function"&&typeof t.getIndex=="function"}var nx=Ci(function(){let i=class t{constructor(){this.JP_=null;this.UU_=null;this.nzt_=!0;this.hzt_=!1}reject(){this.hzt_=!0;return this}rPt_(){return this.hzt_}xkt_(t){this.JP_=t;return this}PP_(){return this.JP_}merge(t){return!1}rI_(){return this}rzt_(t){this.nzt_=t;return this}nPt_(){return this.nzt_}setOptions(t){this.UU_=t;return this}JV_(){return this.UU_}Dkt_(){return null}};i=t([_s("geotoolkit.controls.tools.editors.commands.AbstractCommand")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1JlamVjdGVkIjoiclB0XyIsInNldE5vZGUiOiJ4a3RfIiwiZ2V0Tm9kZSI6IlBQXyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJzZXRTZXBhcmF0ZSI6InJ6dF8iLCJpc1NlcGFyYXRlIjoiblB0XyIsImdldE9wdGlvbnMiOiJKVl8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var hx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i,s){super();this.Mi_=t;this._to=i;this.ozt_=t==null||s===!0}OA_(){return this.Mi_}WA_(){return this._to}merge(t){if(t instanceof i&&t.ozt_&&!this.ozt_){this.Mi_=t.OA_()||this.Mi_;this._to=t.WA_()||this._to;return!0}return!1}rI_(){return new i(new lA(NaN,NaN),new lA(NaN,NaN),this.ozt_)}Dkt_(){return this.ozt_?Lk.vJt_:Lk.Mk_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.AddSegment")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGcm9tIjoiT0FfIiwiZ2V0VG8iOiJXQV8iLCJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g");var rx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i){super();this._dx=t;this._dy=i}EI_(){return this._dx}pI_(){return this._dy}vP_(t,i){this._dx=t;this._dy=i;return this}merge(t){if(t instanceof i){this._dx+=t.EI_();this._dy+=t.pI_();return!0}return!1}Dkt_(){return Lk.BC_}rI_(){return new i(-this._dx,-this._dy)}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.Translation")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUcmFuc2xhdGVYIjoiRUlfIiwiZ2V0VHJhbnNsYXRlWSI6InBJXyIsImdldEV2ZW50TmFtZSI6IkRrdF8iLCJjcmVhdGVJbnZlcnNlIjoicklfIn19fSAg");var ox=Ci(function(){var i;let s=i=class t extends nx{constructor(t){super();this.jNt_=t}HI_(){return this.jNt_}merge(t){if(t instanceof i){this.jNt_+=t.HI_();return!0}return!1}rI_(){return new i(-this.jNt_)}Dkt_(){return Lk.MJt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.Rotation")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbmdsZSI6IkhJXyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var lx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i){super();this.lzt_=t;this.uzt_=i}jWt_(){return this.uzt_}XWt_(){return this.lzt_}merge(t){if(t instanceof i){const i=t.XWt_();this.lzt_.forEach((function(t,s){t["delta"]+=(1+t["delta"])*i[s]["delta"]}));return!0}return!1}rI_(){const t=this.lzt_.map((function(t){const i=t["delta"]<-1?-1:1;return{vx:i*t["vx"],vy:i*t["vy"],delta:-t["delta"]/(1+t["delta"])}}));return new i(t,this.uzt_!=null?this.uzt_.rI_():null)}Dkt_(){return Lk.C3_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.Resize")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRCb3VuZHNUcmFuc2Zvcm1hdGlvbiI6ImpXdF8iLCJnZXRSZXNpemVEaXJlY3Rpb25zIjoiWFd0XyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var ux=Ci(function(){let i=class t extends nx{Eu_(t){return!1}};i=t([_s("geotoolkit.controls.tools.editors.commands.ExecutableCommand")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIn19fSAg");var ax=Ci(function(){let i=class t extends nx{constructor(t,i){super();this.azt_=t===!0;this.gzt_=i===!0}$Wt_(){return this.azt_}tzt_(){return this.gzt_}Dkt_(){return Lk.FJt_}};i=t([_s("geotoolkit.controls.tools.editors.commands.Flip")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGbGlwWCI6IiRXdF8iLCJnZXRGbGlwWSI6InR6dF8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var gx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i,s,e){super();this.czt_=t;this.Izt_=i;this.fzt_=s;this.Czt_=e}izt_(){return this.czt_}szt_(){return this.Izt_}ezt_(){return this.fzt_}Azt_(){return this.Czt_}rI_(){return new i(this.fzt_,this.Czt_,this.czt_,this.Izt_)}Dkt_(){return Lk.UJt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.SceneChange")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGcm9tUGFyZW50IjoiaXp0XyIsImdldEZyb21JZCI6InN6dF8iLCJnZXRUb1BhcmVudCI6ImV6dF8iLCJnZXRUb0lkIjoiQXp0XyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var cx=Ci({ne_:0,ie_:1,he_:2,se_:3,dzt_:4,Ae_:5,oe_:6,ee_:7,Bzt_:8,fJt_:9},2,"eyJDZW50ZXIiOiJuZV8iLCJMZWZ0VG9wIjoiaWVfIiwiTGVmdENlbnRlciI6ImhlXyIsIkxlZnRCb3R0b20iOiJzZV8iLCJDZW50ZXJCb3R0b20iOiJkenRfIiwiUmlnaHRCb3R0b20iOiJBZV8iLCJSaWdodENlbnRlciI6Im9lXyIsIlJpZ2h0VG9wIjoiZWVfIiwiQ2VudGVyVG9wIjoiQnp0XyIsIlJvdGF0ZSI6ImZKdF8ifSAg");const Ix=new Gn,fx=new mA,Cx=[-1,-1,-1,0,1,1,1,0],dx=[-1,0,1,1,1,0,-1,-1],Bx=17,wx=.3,Qx=function(t,i,s,e){return Math.atan2(t*e-i*s,t*s+i*e)},Ex=new ma,px=new ma;var mx=Ci(function(){var i;let s=i=class t extends OS{constructor(t){super(t=qi(t,{editmode:xk.All,mouseradius:3,touchradius:5,bbox:{linestyle:{color:"#3399ff",pattern:[3,3],pixelsnapmode:!0}},handles:{bbox:{painter:tp,alignment:dA.ne_,sizeisindevicespace:!0,width:7,height:7,fillstyle:{color:"white",shadow:{enable:!0,color:"rgba(0,0,0,0.3)",offsetx:1,offsety:1}},linestyle:{color:"#7a7a7a",pixelsnapmode:!0},cssclass:"resize"},rotation:{painter:cE,alignment:dA.ne_,preservereadingorientation:!0,sizeisindevicespace:!0,width:9,height:9,fillstyle:{color:"white",shadow:{enable:!0,color:"rgba(0,0,0,0.3)",offsetx:1,offsety:1}},linestyle:"#4c4c4c",cssclass:"rotation"}},slots:{},ghost:{fillstyle:{color:"rgba(0, 0, 255, 0.3)"},linestyle:null,opacity:wx}}));t["history"]==null&&(t["history"]=new Jk(t&&t["layer"]));this.eFt_({dblclick:this.WFt_.bind(this),pointerdown:this.zFt_.bind(this),pointermove:{callback:this.XFt_.bind(this),object:Mi},pointerup:{callback:this.Ct_.bind(this),object:Mi},keydown:{callback:this.IPt_.bind(this),object:Mi},keyup:{callback:this.fPt_.bind(this),object:Mi},"cg-leave":this.Okt_.bind(this)});this.wzt_=null;t["node"]instanceof ch&&(this.JP_=t["node"]);this.Qzt_=null;this.Ezt_=null;this.m$_=t["bbox"]instanceof Yu?t["bbox"]:new Yu(t["bbox"]);this.LPt_=t["history"];this.pPt_=this.pzt_.bind(this);this.yPt_=this.mzt_.bind(this);this.yzt_=this.Dzt_.bind(this);this.LPt_.on(Lk.qJt_,this.pPt_).on(Lk.JJt_,this.yPt_).on(Lk.PJt_,this.yzt_);this.Mzt_=!1;this.vzt_=Ex.clone();this.bzt_=new sI({visible:!1,children:[this.m$_,px.clone(),px.clone(),px.clone(),px.clone(),px.clone(),px.clone(),px.clone(),px.clone(),this.vzt_]});this.Nzt_=new sI({children:this.bzt_});this.mgt_()!=null&&this.mgt_().GY_(this.Nzt_);t["handles"]!=null&&this.Szt_(t["handles"]);this.d4_=t["editmode"];this.vzt_.nf_((this.d4_&xk.fJt_)!=0);this.Fat_=null;this.Gzt_=null;this.XI_=null;this.Rzt_=!1;this.kzt_=!1;this.YC_=Pi(t,{},!0);this.Fzt_=!1;this.xzt_=(t,i,s)=>{if(this.Lzt_==null||!this.Lzt_.RI_(i.if_())){this.Lzt_=i.if_();this.Uzt_()}};if(this.mgt_()!=null){this.Yzt_(this.mgt_());this.Lzt_=this.mgt_().if_()}else this.Lzt_=null}Tzt_(){return this.Ezt_}isSupported(t){return!0}XJt_(t){return this.isSupported(t)}WFt_(t){}zFt_(t){this.TPt_(t);this.KPt_(t)&&t.stopPropagation(!1,!0)}qPt_(t){this.zFt_(t)}JPt_(t){this.XFt_(t)}PPt_(t){this.Ct_(t)}XFt_(t){const i=t.Lkt_();if(i!=null&&i["buttons"]===Ts.W_){this.Kzt_(t);if(this.JP_==null)return}else if(this.JP_!=null&&this.Qzt_==null){this.HPt_=this.HPt_||this.bFt_(this.mgt_(),t.Fkt_());if(this.Hzt_(t)!=null){this.qzt_=this.bFt_(this.mgt_(),t);this.Qzt_=cx.ne_;this.Kzt_(t)}}if(this.JP_==null)return;if(!this.KPt_(t))return;this.Gzt_||(this.Gzt_=this.Jzt_(this.qzt_,this.Qzt_));this.XI_=this.Pzt_(this.Gzt_,this.Qzt_,this.XI_);this.qzt_=this.getCurrentPosition(t.Fkt_(),this.Gzt_,this.Qzt_,this.qzt_);const s=this.$O_(),e=WF.KWt_(s.getParent(),this.mgt_(),Ix),A=e.aI_(this.qzt_),n=e.aI_(this.XI_),h=this.getBounds(),r=this.ut_(),o=this.Vzt_(this.Hzt_(),A,n,s,r,h);if(o!=null){this.push(o);if(!o.rPt_()){this.isActive()||this.start();this.Ozt_(t)}}}Ct_(t){this.Wzt_(t)}Okt_(t){}VPt_(t){this.Okt_(t)}fPt_(t){}IPt_(t){const i=t.Lkt_();if(i!=null)switch(i["keyCode"]){case Ys.Z:const s=this.lPt_();if(i["ctrlKey"]!==!0)if(i["shiftKey"]){if(!this.iPt_())return}else if(!this.tPt_())return;i["shiftKey"]===!0?this.hPt_():this.sPt_();this.jPt_(s);t.stopPropagation(!0,!0);break;case Ys.Y:if(i["ctrlKey"]!==!0||!this.iPt_())return;this.hPt_();t.stopPropagation(!0,!0);break;case Ys.U_:this.stop();break}}OPt_(t){this.IPt_(t)}WPt_(t){this.fPt_(t)}wPt_(t,i){t.nf_(!0);this.notify(Lk.End,this,new Pk(i,{node:t}))}Pkt_(){this.Nzt_.nf_(this.isEnabled());super.Pkt_()}zzt_(t){this.notify(Lk.qJt_,this,new Pk(null,{node:t.PP_(),command:t}))}DPt_(t){this.notify(Lk.JJt_,this,new Pk(null,{node:t.PP_(),command:t}))}vPt_(t){switch(t.Dkt_()){case Lk.BC_:this.isActive()&&this.Nzt_.nf_(!1);break;case Lk.Mk_:if(this.Xzt_()){const i=t.JV_(),s=undefined;if(!(i&&i["reversed"])){const s=undefined;if(i==null||i["laststate"]===void 0){this.jzt_();if(this.Zzt_()){const i=t.PP_();i==null||Array.isArray(i)||i.nf_(!1)}}}}break}this.notify(Lk.PJt_,this,new Pk(null,{node:t.PP_(),command:t}));t.Dkt_()!=null&&this.notify(t.Dkt_(),this,new Pk(null,{node:t.PP_(),command:t}))}$C_(){if(this.JP_==null)return!1;let t=this.JP_;while(t!=null){if(!t.$C_())return!1;t=t.getParent()}return!0}Kzt_(t,i){let s=null;i==null&&this._zt_()&&this.Rzt_&&this.$zt_(t)?i="crosshair":s=this.Qzt_==null?this.Hzt_(t):this.Qzt_;if(i==null&&s!=null)switch(this.bzt_.HY_(s)){case this.m$_:i="move";break;case this.vzt_:i="url(data:application/octet-stream;base64,AAACAAEAICACAAcABgAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQ"+"AAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfgAAAcIAAAE+AAADQIAAAoFAAAKCIAAO5BAACCdwAARBQAACgUAA"+"AQLAAAB8gAAAQ4AAAH4AAA//////////////////////////////////////////////////////////////////////////"+"//////////////////////+B///+Af///gH///w/f//8fj///Hwf//AYD//wGA//+D4///x+P//+/D///4B///+Af///gf//"+"8=), auto";break;default:const t=this.if_(),e=t.QI_()?Math.atan(t.QI_()/t.BI_()):0,A=t.BI_()*t.sI_()-t.wI_()*t.QI_()>0?-s:s,n=(Math.round(e/(Math.PI/4))+10+A)%4;i=n===3?"nesw-resize":n===0?"ew-resize":n===1?"nwse-resize":"ns-resize"}if(i!=null||this.Ezt_!=null){this.Ezt_=i!=null?t.getPlot():null;BG.Yb_(t.getPlot(),{cursor:i},this)}}push(t){this.LPt_.push(t,this);return this}apply(t){let i=this.$O_()||t.PP_(),s,e,A,n,h;if(i==null||Array.isArray(i))return this;let r=t.JV_();const o=r&&r["hint"];switch(t.Dkt_()){case Lk.gf_:if(!tx(t))return this;r={};r[t.dn_()]=t.getValue();i.dt_(r);return this;case Lk.Mk_:if(!$F(t))return this;s=t.OA_();e=t.WA_();const l=isNaN(s.getX())||isNaN(s.getY())||isNaN(e.getX())||isNaN(e.getY());h=r&&r["laststate"];if(l){const t=undefined;h==null&&WF.JWt_(i,o);return this}A=this.tXt_();if(!(A instanceof Ic))return this;n=A.FY_(this.iXt_());WF.g1_(A,i,n);case Lk.vJt_:if(!$F(t))return this;const u=this.ut_();s=u.aI_(t.OA_());e=u.aI_(t.WA_());i.nf_(!0);this.sXt_(i,s,e,o);return this;case Lk.BC_:zF(t)&&this.PWt_(i,t.EI_(),t.pI_(),o);return this;case Lk.C3_:const a=this.eXt_(t,this.ut_(),this.getBounds());this.VWt_(i,a,o);return this;case Lk.MJt_:_F(t)&&this.OWt_(i,t.HI_(),o);return this;case Lk.FJt_:return this;case Lk.kJt_:i=this.PP_();if(!i||i.getParent()==null)return this;WF.JWt_(i);return this;case Lk.RJt_:i=this.PP_()||t.PP_();if(i==null||Array.isArray(i))return this;h=r["origstate"];if(h!=null&&h["parent"]!=null){A=h["parent"];n=h["index"]}else{A=this.tXt_();if(!(A instanceof Ic))return this;n=A.FY_(this.iXt_())}if(!(A instanceof Ic))return this;WF.g1_(A,i,n);return this;default:t instanceof ux&&t.Eu_(this)}return this}PWt_(t,i,s,e){const A=undefined;return WF.PWt_(t,i,s,e)}VWt_(t,i,s){const e=undefined;return WF.VWt_(t,i,s)}OWt_(t,i,s){const e=undefined;return WF.OWt_(t,i,s)}sXt_(t,i,s,e){const A=undefined;return WF.ht_(t,i,s,e)}AXt_(t){if(!this.nXt_())return null;const i=this.tXt_();let s;if(t&&he(i))s=i.ot_();else{if(!ne(i))return null;s=i.rt_()}if(this.Zzt_()&&i!==this.mgt_()){const t=undefined;s=WF.KWt_(i,this.mgt_(),Ix).rn_(s)}return s}_zt_(){return(this.lPt_()&xk.dJt_)!=0&&(this.lPt_()&xk.CJt_)!=0}hXt_(){return this._zt_()&&this.isActive()&&this.qzt_!=null}$zt_(t){const i=this.tXt_();if(i==null||!ne(i))return!1;const s=i.rt_();if(s==null)return!1;const e=this.bFt_(i,t.Fkt_());return s.contains(e)}save(t){const i=this.PP_();let s=null;if(i)switch(t.Dkt_()){case Lk.Mk_:case Lk.kJt_:s={parent:i.getParent()};const t=i.getParent();t instanceof Ic&&(s["index"]=t.FY_(i));break;default:s=i.clone().N_();break}return s}restore(t,i){const s=this.$O_();let e=qi(i,{},!0);const A=t.JV_()&&t.JV_()["reject"];A&&(e=qi(A,e,!0));let n=null,h,r,o,l;switch(t.Dkt_()){case Lk.C3_:s.dt_(e);const i=undefined,u=undefined;if(Cx[this.Hzt_()-1]*dx[this.Hzt_()-1]==0)break;r=A&&A["deviceclip"];if(r){h=s.getParent()&&s.getParent().if_()||Gn.JI_;o=h.gI_(r);l=this.ut_();n=this.rXt_(this.qzt_,this.XI_,o,s,l,this.getBounds());if(!n)break;this.apply(n);if(l.wI_()!==0||l.QI_()!==0){const t=l.rn_(this.getBounds());if(t&&!o.Fe_(t)){s.dt_(e);n=null}}}break;case Lk.BC_:s.dt_(e);r=A&&A["deviceclip"];if(r){h=s.getParent()&&s.getParent().if_()||Gn.JI_;const t=h.gI_(r);n=this.oXt_(this.qzt_,this.XI_,t,s);if(!n)break;this.apply(n)}break;default:let a=t.JV_();a=qi(a,{reversed:!0});const g=t.rI_().setOptions(a);g.PP_()||g.xkt_(s);this.apply(g);s.dt_(e)}return n}TPt_(t){if(this._zt_()&&!this.$zt_(t))return this;this.HPt_=this.bFt_(this.mgt_(),t);this.Ozt_(t);this.qzt_=this.HPt_.clone();this.XI_=this.qzt_.clone();this.Qzt_=this.Hzt_(t);if(this.Qzt_!=null){this.Xzt_()&&this.jzt_();this.Gzt_=this.Jzt_(this.qzt_,this.Qzt_);this.start();this.Kzt_(t)}this.lXt_(!0);return this}KPt_(t){return this.Hzt_()!=null&&(this.isActive()||this.uWt_(t))}Wzt_(t){this.lXt_(!1);this.Qzt_=null;this.qzt_=null;this.XI_=null;this.Gzt_=null;this.HPt_=null;this.uXt_=null;this.Nzt_.nf_(!0);this.Zzt_()&&this.aXt_();this.stop();return this.update()}gXt_(){return this.Rzt_}cXt_(t){this.Rzt_=t;return this}IXt_(){return this.kzt_}fXt_(t){this.kzt_=t;return this}CXt_(t){const i=t.Lkt_();return i&&i.buttons&&i.buttons===Ts.X_}dXt_(t){const i=t.Lkt_();return i&&i.buttons&&i.buttons===Ts.z_}static BXt_(t){return Cx[t]}static wXt_(t){return dx[t]}static QXt_(t,i,s,e){return Qx(t,i,s,e)}EXt_(){return this.Qzt_}pXt_(t,i,s,e){if(s)for(let i=this.bzt_.qY_()-1;i>0;i--)if(t.indexOf(this.bzt_.HY_(i))>=0)return i;if(this.lPt_()&xk.IJt_){if(this.lPt_()&xk.cJt_){const t=this.getBounds(),s=undefined,e=this.if_().aI_(i);if(t!=null&&t.contains(e))return 0}if(e)return t.indexOf(this.JP_)>=0?0:null}return null}Hzt_(t){if(t==null)return this.EXt_();const i=this.getSelection(t);if(i==null)return null;const s=t.Lkt_();return this.pXt_(i,t.Fkt_(),s!=null&&!s["ctrlKey"],!0)}mXt_(t,s){if(t===0)return t;const e=i.yXt_(t,s);if(!e)return t;this.lXt_(!1,t);this.lXt_(!0,e);return e}iXt_(){return this.Nzt_}DXt_(){return this.bzt_}lXt_(t,i){const s=i||this.Qzt_;if(s>0){const i=this.bzt_.HY_(s);t?i.Bd_("active"):i.Qd_("active");this.Qzt_=s}return this}MXt_(t){const i=this.$O_(),s=i&&i.getParent();if(!t||t.isEmpty()||!s||!this.$C_()){this.bzt_.nf_(!1);return this}this.m$_.clear();const e=this.ut_().clone();e.vI_(WF.KWt_(i.getParent(),this.mgt_(),Ix));const A=t.we_(),n=t.ye_(),h=t.Qe_(),r=t.Ee_(),o=t.De_(),l=t.pe_(),u=[A,A,A,n,h,h,h,n],a=[r,o,l,l,l,o,r,r],g=u.length;e.NI_(u,a,g);let c=null;if(this.lPt_()&xk.fJt_){const t=this.if_(),i=new lA(n,r);let s=new lA(n,r-1);t.transformPoint(i,i);t.transformPoint(s,s);const A=lA.Ss_(s,i)||1,h=this.Nzt_.if_()!=null&&this.Nzt_.if_().sI_()<0;s=e.nI_(n,h?l+Bx/A:r-Bx/A);if(h){this.m$_.moveTo(u[3],a[3]);s=e.nI_(n,l+Bx/A)}else{this.m$_.moveTo(u[g-1],a[g-1]);s=e.nI_(n,r-Bx/A)}this.m$_.lineTo(s.getX(),s.getY());this.vzt_.gR_(s);c=this.vzt_.getBounds().clone()}for(let i=0;i<g;i++){const s=this.bzt_.HY_(i+1);if(s instanceof Ca){t=s.gR_(u[i],a[i]).getBounds();c=c?c.union(t):t.clone()}}this.Nzt_.ht_(c);this.bzt_.ht_(c);this.vXt_();this.m$_.moveTo(u[0],a[0]).lineTo(u[6],a[6]).moveTo(u[2],a[2]).lineTo(u[4],a[4]).moveTo(u[0],a[0]).lineTo(u[2],a[2]).moveTo(u[6],a[6]).lineTo(u[4],a[4]).td_();return this}vXt_(){this.bzt_.nf_((this.lPt_()&xk.cJt_)!=0);return this}Jzt_(t,i,s){s=s||new lA;if(i==null)return s.vs_(t);const e=this.bzt_.HY_(i),A=ie(e)?e.getBounds():null;return A?t.clone().translate(-A.we_(),-A.Ee_()):s.vs_(t)}Pzt_(t,i,s){s=s||new lA;if(i==null)return s;const e=this.bzt_.HY_(i),A=ie(e)?e.getBounds():null;if(!A)return s;switch(i){case cx.ne_:return s.vs_(t).translate(A.we_(),A.Ee_());default:return s.vs_(A.ye_(),A.De_())}}getCurrentPosition(t,i,s,e){(e=e||new lA).vs_(this.bFt_(this.mgt_(),t));if(s===cx.ne_)return e;const A=this.bzt_.HY_(s),n=ie(A)?A.getBounds():null;if(!n)return e;const h=n.Ie_()/2-i.getX(),r=n.Ts_()/2-i.getY();return e.translate(h,r)}bXt_(t){this.Szt_(t);this.NXt_(t);return this}NXt_(t){return this}Szt_(t){this.vzt_.dt_(t["rotation"]);this.bzt_.bB_((i=>{i!==this.m$_&&i!==this.vzt_&&i.dt_(t["bbox"])}),null);return this}Uat_(){return this.JP_!=null?this.JP_.clone().nf_(!0):null}qat_(){return this.Fat_}$O_(){return this.Zzt_()?this.Fat_:this.JP_}SXt_(t,i){t&&t.dt_(i);return this}Lat_(){this.Fat_&&this.Fat_.dispose();this.Fat_=null;return this}xat_(){return this.Fat_!=null}Xzt_(){return(this.d4_&xk.DJt_)!=0}jzt_(){this.Lat_();const t=this.Uat_();if(t&&this.mgt_()){this.SXt_(t,this.YC_["ghost"]);const i=this.mgt_().FY_(this.iXt_());i>=0?this.mgt_().xY_(i,t):this.mgt_().GY_(t)}this.Fat_=t;return this}Zzt_(){return this.Xzt_()&&this.xat_()}aXt_(){if(this.xat_()){this.GXt_();this.Lat_()}return this}Vzt_(t,i,s,e,A,n){if(s.bs_(i,NA.Je_))return null;let h;switch(t){case void 0:case null:h=this.kzt_&&this.RXt_(i,s,this.AXt_(!0),e,this.isActive())||this.kXt_(i,s,e,this.isActive());break;case cx.ne_:h=this.kzt_&&this.oXt_(i,s,this.AXt_(!1),e)||this.FXt_(i,s,e);break;case cx.fJt_:h=this.xXt_(i,s,e,A,n);break;default:h=this.kzt_&&this.rXt_(i,s,this.AXt_(!0),e,A,n)||this.LXt_(t,i,s,e,A,n)}h!=null&&h.xkt_(this.PP_());return h}kXt_(t,i,s,e){return new hx(i,t,e).xkt_(s)}FXt_(t,i,s){return new rx(t.getX()-i.getX(),t.getY()-i.getY()).xkt_(s)}xXt_(t,i,s,e,A){const n=undefined,h=this.if_().rn_(A,fx),r=s.getParent()&&s.getParent().if_()||Gn.JI_,o=r.transformPoint(t,t),l=r.transformPoint(i,i),u=h.getCenter(),a=u.getX()-l.getX(),g=u.getY()-l.getY(),c=u.getX()-o.getX(),I=u.getY()-o.getY();return new ox(Qx(a,g,c,I)).xkt_(s)}LXt_(t,i,s,e,A,n){const h=Cx[t-1],r=dx[t-1];i=A.aI_(i,i);s=A.aI_(s,s);return new lx([{vx:h*A.BI_(),vy:h*A.QI_(),delta:h*(i.getX()-s.getX())/n.Ie_()},{vx:r*A.wI_(),vy:r*A.sI_(),delta:r*(i.getY()-s.getY())/n.Ts_()}]).xkt_(e)}eXt_(t,i,s){if(!jF(t))return Gn.JI_;const e=t.XWt_(),A=this.UXt_(e[0],i,s).clone(),n=this.UXt_(e[1],i,s);return A.vI_(n)}UXt_(t,i,s){i=i||this.ut_();s=s||this.getBounds();const e=t["delta"];if(e===0||e===-1||s==null)return Gn.JI_;const A=i.BI_(),n=i.sI_(),h=i.wI_(),r=i.QI_(),o=Math.abs(Qx(t["vx"],t["vy"],A,r)),l=Math.abs(Qx(t["vx"],t["vy"],h,n)),u=Math.abs(Qx(t["vx"],t["vy"],-A,-r)),a=Math.abs(Qx(t["vx"],t["vy"],-h,-n));switch(Math.min(o,l,u,a)){case o:return Ix.dI_(1+e,0,0,1,-e*s.getX(),0);case l:return Ix.dI_(1,0,0,1+e,0,-e*s.getY());case u:return Ix.dI_(1+e,0,0,1,-e*s.Qe_(),0);default:return Ix.dI_(1,0,0,1+e,0,-e*s.pe_())}}rXt_(t,i,s,e,A,n){if(s==null||s.contains(t))return null;const h=Math.min(Math.max(t.getX(),s.we_()),s.Qe_()),r=Math.min(Math.max(t.getY(),s.Ee_()),s.pe_());t.vs_(h,r);return this.LXt_(this.Hzt_(),t,i,e,A,n)}oXt_(t,i,s,e){let A=this.getBounds();if(A==null||s==null)return null;const n=t.getX()-i.getX(),h=t.getY()-i.getY();A=fx.ce_(A);const r=undefined;this.ut_().rn_(A,A);A.translate(n,h);const o=WF.qWt_(A,s);if(!o)return null;const l=o.translate(t.getX(),t.getY());return this.FXt_(l,i,e)}RXt_(t,i,s,e,A){A=A===!0;if(s==null||s.contains(t))return null;const n=Math.min(Math.max(t.getX(),s.we_()),s.Qe_()),h=Math.min(Math.max(t.getY(),s.Ee_()),s.pe_());t.vs_(n,h);return this.kXt_(t,i,e,A)}jPt_(t){if(this.d4_===t)return this;this.d4_=t;this.vzt_.nf_((t&xk.fJt_)!=0);return this.update()}lPt_(){return this.d4_}PP_(){return this.JP_}xkt_(t){this.Mzt_=t==null||t.getParent()!=null;if(this.JP_===t)return this;this.JP_=t;this.MXt_(this.getBounds());return this}YPt_(t){if(Array.isArray(t)){ki("Nodes array is not supported for current implementation");return this}return this.xkt_(t)}sPt_(){this.LPt_.sPt_();return this}hPt_(){this.LPt_.hPt_();return this}tPt_(){return this.LPt_.tPt_()}iPt_(){return this.LPt_.iPt_()}UPt_(){return this.LPt_}Ngt_(){this.YXt_();return this.MXt_(this.getBounds())}update(){if(this.TXt_())return this;this.Ngt_();return this}Uq_(){this.Fzt_=!0;return this}TXt_(){return this.Fzt_}Yq_(t){this.Fzt_=!1;t===!0&&this.update();return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.YC_=Pi(t,this.YC_,!0);this.JP_==null||this.KXt_()||t["node"]===void 0||t["node"]instanceof ch||this.JP_.dt_(t["node"]);t["editmode"]&&this.jPt_(t["editmode"]);t["bbox"]instanceof Yu?this.m$_=t["bbox"]:t["bbox"]!=null&&this.m$_.dt_(t["bbox"]);t["handles"]!=null&&this.bXt_(t["handles"]);return this}N_(){const t=super.N_();this.JP_==null||Array.isArray(this.JP_)||(t["node"]=this.JP_.N_());this.YC_["bbox"]instanceof Yu?t["bbox"]=this.m$_.N_():t["bbox"]=Pi(this.YC_["bbox"],{},!0);t["editmode"]=this.lPt_();t["handles"]=Pi(this.YC_["handles"],{},!0);t["ghost"]=Pi(this.YC_["ghost"],{},!0);return t}getBounds(){const t=this.$O_();return t!=null&&ie(t)?t.getBounds():null}HXt_(){return this.if_().clone()}dispose(){if(!this.Df_()){this.mgt_()!=null&&this.qXt_(this.mgt_());this.JP_=null;this.LPt_.off(Lk.qJt_,this.pPt_).off(Lk.JJt_,this.yPt_).off(Lk.PJt_,this.yzt_);this.LPt_=null;this.Nzt_.dispose();if(this.Ezt_!=null){BG.Yb_(this.Ezt_,{cursor:null},this);this.Ezt_=null}this.Fat_!=null&&this.Fat_.dispose();super.dispose()}}tXt_(){return this.nXt_()?this.PP_().getParent():this.wzt_}JXt_(t){this.wzt_=t;return this}ut_(){const t=this.$O_();return t&&oe(t)&&t.ut_()||new Gn}if_(){let t=null;const i=this.$O_();if(i&&i.getParent()){const s=i.getParent().if_()||Gn.JI_;t=Gn.multiply(s,this.ut_(),Ix)}else this.mgt_()&&(t=this.mgt_().if_());return t||Gn.JI_}uWt_(t,i){if(this.HPt_==null)return!1;const s=this.bFt_(this.mgt_(),t.Fkt_());let e=NA.Je_,A=NA.Je_;if(i!=null){const t=this.mgt_()!=null?this.mgt_().if_():null;e=t!=null?bn.$c_(i,0,t):i;A=t!=null?bn.$c_(0,i,t):i}return NA.equals(s.getX(),this.HPt_.getX(),e)&&NA.equals(s.getY(),this.HPt_.getY(),A)}nXt_(){return this.JP_!=null&&this.JP_.getParent()!=null}KXt_(){return this.Mzt_}pzt_(t,i,s){i.oPt_()===this&&this.zzt_(s)}mzt_(t,i,s){i.oPt_()===this&&this.DPt_(s)}Dzt_(t,i,s){i.oPt_()===this&&this.vPt_(s)}getSelection(t,i){if(!OS.Tkt_(t))return[];const s=t.Fkt_();i=i||this.CFt_(t);return bC.select(t.PP_(),s.getX(),s.getY(),i).filter(Ih)}static yXt_(t,i){switch(t){case cx.ne_:return cx.ne_;case cx.Bzt_:return cx.dzt_;case cx.dzt_:return cx.Bzt_;case cx.he_:return cx.oe_;case cx.oe_:return cx.he_;case cx.ie_:return i?cx.se_:cx.ee_;case cx.ee_:return i?cx.Ae_:cx.ie_;case cx.se_:return i?cx.ie_:cx.Ae_;case cx.Ae_:default:return i?cx.ee_:cx.se_}}YXt_(){const t=this.$O_();if(!(t instanceof Ca))return;const i=t.ut_();if(i==null)return;const s=this.getBounds();if(s==null||s.isEmpty())return;const e=t.getParent()!=null&&t.getParent().if_()!=null?t.getParent().if_():Gn.JI_,A=Gn.multiply(e,i,Ix);if(!WF.zWt_(s,A))return;const n=WF.WWt_(t,s,A,e,i,i);t.at_(n)}Ozt_(t){this.uXt_=OS.DFt_(t.Lkt_());this.Ezt_=t.getPlot()}YFt_(t){this.mgt_()!=null&&this.qXt_(this.mgt_());super.YFt_(t);this.mgt_()!=null&&this.Yzt_(this.mgt_());return this}Yzt_(t){t.on(rh.rC_,this.xzt_)}qXt_(t){t.off(rh.rC_,this.xzt_)}Uzt_(){const t=this.$O_();if(t==null||this.uXt_==null||this.Ezt_==null)return;const i={clientX:this.uXt_.getX(),clientY:this.uXt_.getY(),button:Ts.z_,buttons:Ts.z_,bubbles:!0,cancelable:!0,view:document.defaultView},s=new PointerEvent(OS.hFt_(),i),e=new lA(OS.MFt_(s,this.Ezt_)),A=new FS("pointermove",s,e,this.Ezt_.getRoot(),this.Ezt_);if(this.KPt_(A)||this.hXt_()){t.Ad_();this.XFt_(A)}}PXt_(t,i){this.push(new ax(t,i));return this}VXt_(t,i){const s=this.PP_(),e=s!=null?s.getParent():null;if(e==null)return this;const A=e.FY_(s),n=gc(e.UY_(),s,t,i);n!==-1&&this.push(new gx(e,A,e,n).xkt_(s));return this}OXt_(t,i){i==null&&(i=this.PP_());if(i==null)return this;let s;if(Array.isArray(i)){if(i.length>0){this.push(new ax(!1,!1));s=i[0].getParent();const e=i.map((t=>s.FY_(t))).sort().reverse(),A=this.LPt_;for(let i=0;i<e.length;i++)A.push(new gx(s,e[i],t,0).xkt_(s.HY_(e[i])).rzt_(!1))}}else{s=i.getParent();this.push(new gx(s,s.FY_(i),t,0))}return this}};s.prototype.GXt_=Zi;s=i=t([_s("geotoolkit.controls.tools.editors.AbstractEditorBase")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBY3RpdmVQbG90IjoiVHp0XyIsIm9uRG91YmxlQ2xpY2siOiJXRnRfIiwib25Nb3VzZURvd24iOiJ6RnRfIiwib25Nb3VzZU1vdmUiOiJYRnRfIiwib25Nb3VzZVVwIjoiQ3RfIiwib25MZWF2ZSI6Ik9rdF8iLCJvbktleVVwIjoiZlB0XyIsIm9uS2V5RG93biI6IklQdF8iLCJvbk5vZGVDcmVhdGVkIjoid1B0XyIsIm9uRW5hYmxlZFN0YXRlQ2hhbmdlZCI6IlBrdF8iLCJvbkJlZm9yZUNvbW1hbmRBcHBsaWVkIjoienp0XyIsIm9uQ29tbWFuZEFwcGx5aW5nIjoiRFB0XyIsIm9uQ29tbWFuZEFwcGxpZWQiOiJ2UHRfIiwiZ2V0VmlzaWJsZSI6IiRDXyIsInVwZGF0ZUJyb3dzZXJDdXJzb3IiOiJLenRfIiwidHJhbnNsYXRlTm9kZSI6IlBXdF8iLCJ0cmFuc2Zvcm1Ob2RlIjoiVld0XyIsInJvdGF0ZU5vZGUiOiJPV3RfIiwic2V0Tm9kZUJvdW5kcyI6InNYdF8iLCJjYW5JbnNlcnQiOiIkenRfIiwiZ2V0QmJveEhhbmRsZSI6Ikh6dF8iLCJzd2FwQWN0aXZlSGFuZGxlcyI6Im1YdF8iLCJjcmVhdGVHaG9zdCI6IlVhdF8iLCJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsImdldEdob3N0IjoicWF0XyIsImdldEFjdGl2ZU5vZGUiOiIkT18iLCJzZXRFZGl0TW9kZSI6ImpQdF8iLCJnZXRFZGl0TW9kZSI6ImxQdF8iLCJnZXROb2RlIjoiUFBfIiwic2V0Tm9kZSI6InhrdF8iLCJ1bmRvIjoic1B0XyIsInJlZG8iOiJoUHRfIiwiY2FuVW5kbyI6InRQdF8iLCJjYW5SZWRvIjoiaVB0XyIsImdldEhpc3RvcnkiOiJVUHRfIiwidXBkYXRlSGFuZGxlcyI6Ik5ndF8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0RGV2aWNlVHJhbnNmb3JtIjoiSFh0XyIsImdldExvY2FsVHJhbnNmb3JtIjoidXRfIiwidXBkYXRlTm9kZVBvc2l0aW9uIjoiVXp0XyIsImZsaXBOb2RlT3JpZW50YXRpb24iOiJQWHRfIiwiY2hhbmdlTm9kZU9yZGVyIjoiVlh0XyIsImRlbGV0ZU5vZGUiOiJPWHRfIn19fSAg");var yx=Ci(function(){let i=class t extends mx{constructor(t){super(t=qi(t,{editmode:xk.All},!0));this.Bgt_=!1;this.initialize(t);t["node"]!=null&&(t["node"]instanceof ch||Array.isArray(t["node"]))&&this.YPt_(t["node"]);this.jPt_(t["editmode"]);t["handles"]!=null&&this.bXt_(t["handles"])}initialize(t){this.Bgt_!==!0&&(this.Bgt_=!0)}isSupported(t){return t["node"]instanceof iu}end(t){this.stop();const i=this.PP_();this.YPt_(i.clone());this.WXt_();this.wPt_(i,t)}WXt_(t){t=t!==!1;const i=this.PP_();if(i==null)return this;oe(i)&&i.at_(null);t&&WF.JWt_(i);this.update();return this}zXt_(t){return this.WXt_(t)}save(t){const i=this.$O_();if(!i)return null;let s=null;switch(t.Dkt_()){case Lk.gf_:s=i.N_();break;case Lk.BC_:case Lk.MJt_:case Lk.C3_:case Lk.FJt_:oe(i)&&(s={localtransform:i.ut_()?i.ut_().clone():null});break;case Lk.vJt_:ie(i)&&(s={bounds:i.getBounds()?i.getBounds().clone():null});break;default:s=super.save(t);break}return s}apply(t){const i=this.$O_()||t.PP_();if(Array.isArray(i))return this;let s,e,A;switch(t.Dkt_()){case Lk.FJt_:if(!ix(t)||!oe(i))return this;s=this.getBounds();A=this.if_();e=i.getParent()?i.getParent().if_():Gn.JI_;const n=A.rn_(s),h=Gn.xI_(n,n,t.$Wt_(),t.tzt_());i.at_(h.DI_(e.rI_()).vI_(A));return this;case Lk.UJt_:if(!sx(t))return this;const r=t.szt_(),o=t.izt_().HY_(r);t.izt_().removeChild(o);t.ezt_().xY_(t.Azt_(),o);return this;case Lk.SJt_:if(this.PP_()==null)return this;WF.JWt_(this.PP_());return this;default:return super.apply(t)}}getBounds(){const t=this.$O_();return this.nXt_()&&ie(t)?t.getBounds():null}Uat_(){const t=super.Uat_();t instanceof iu&&WF.TWt_(t,this.mgt_(),this.tXt_());return t}GXt_(){const t=this.PP_(),i=this.qat_();if(!(t instanceof iu&&i instanceof iu))return this;const s=WF.TWt_(i,t.getParent());t.at_(s.ut_());return this}tXt_(){const t=undefined;return super.tXt_()||this.mgt_()}LM_(){return this.nXt_()?this.PP_():this.mgt_()}};i=t([_s("geotoolkit.controls.tools.editors.AbstractEditor")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGUiOiJXWHRfIiwiY3JlYXRlR2hvc3QiOiJVYXRfIiwicmVzZXROb2RlVG9HaG9zdCI6IkdYdF8ifX19");var Dx=Ci({XXt_:"Polygon",jXt_:"Polyline",ZXt_:"Rectangle",_Xt_:"Ellipse",Image:"Image",vt_:"Spline",$Xt_:"Arrow",Line:"Line",Symbol:"Symbol",Text:"Text",Vpt_:"Label",tjt_:"Callout",ijt_:"Pencil",sjt_:"Edit"},2,"eyJQb2x5Z29uIjoiWFh0XyIsIlBvbHlsaW5lIjoialh0XyIsIlJlY3RhbmdsZSI6IlpYdF8iLCJFbGxpcHNlIjoiX1h0XyIsIlNwbGluZSI6InZ0XyIsIkFycm93IjoiJFh0XyIsIkxhYmVsIjoiVnB0XyIsIkNhbGxvdXQiOiJ0anRfIiwiUGVuY2lsIjoiaWp0XyIsIkVkaXQiOiJzanRfIn0g");var Mx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i,s){super();this._dx=t;this._dy=i;this.Ndt_=s}EI_(){return this._dx}pI_(){return this._dy}getIndex(){return this.Ndt_}merge(t){if(t instanceof i&&t.getIndex()===this.getIndex()){this._dx+=t.EI_();this._dy+=t.pI_();return!0}return!1}rI_(){return new i(-this._dx,-this._dy,this.Ndt_)}Dkt_(){return Lk.bJt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.DragPoint")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUcmFuc2xhdGVYIjoiRUlfIiwiZ2V0VHJhbnNsYXRlWSI6InBJXyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");const vx=new ma({painter:cE,alignment:dA.ne_,fillstyle:"#a9a9a9",linestyle:"black",sizeisindevicespace:!0,width:7,height:7}),bx=new Gn;var Nx=Ci(function(){let i=class t extends yx{constructor(t){const i=t!=null?t["node"]:null;super(t=qi(t,{name:"LineEditor",node:i instanceof Rd?i:new Rd({linestyle:{width:2,pixelsnapmode:!0}})}));this.DXt_().nf_(!1)}GXt_(){super.GXt_();const t=this.PP_(),i=this.qat_();if(t instanceof Rd&&i instanceof Rd){const s=i.OA_(),e=i.WA_();this.zA_(t,s,e)}return this}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.zgt_=null;this.ejt_=vx.clone();this.Ajt_=vx.clone();this.njt_=new sI({children:[this.ejt_,this.Ajt_],visible:!1});this.iXt_().GY_(this.njt_)}}isSupported(t){return t["node"]instanceof Rd||t["mode"]===Dx.Line}zFt_(t){super.zFt_(t);if(this.Hzt_()!=null||this.nXt_())this.zgt_=this.hjt_(t);else{const i=this.bFt_(this.LM_(),t);this.push(new hx(i,i.clone()));t.stopPropagation(!0,!0);this.start()}}XFt_(t){if(this.Hzt_()==null&&this.isActive()&&!this.KXt_()){const i=this.$O_(),s=i!=null&&i.getParent()!=null?i:this.LM_(),e=this.bFt_(s,t);this.push(new hx(null,e));this.Ozt_(t)}else if(this.zgt_==null||!this.isActive()&&this.uWt_(t))super.XFt_(t);else{const i=this.njt_.HY_(this.zgt_);if(!(i instanceof Ca))return;const s=undefined,e=WF.HWt_(this.$O_(),this.mgt_(),bx).hI_(i.uR_(),i.aR_()),A=this.bFt_(this.LM_(),t);this.push(new Mx(A.getX()-e.getX(),A.getY()-e.getY(),this.zgt_));this.start();this.Kzt_(t);this.Ozt_(t)}}Ct_(t){const i=this.Hzt_()==null&&this.isActive();super.Ct_(t);this.zgt_=null;if(i){t.stopPropagation(!0,!0);this.end(t)}}apply(t){let i=this.$O_(),s,e;if(!(i instanceof Rd))return this;switch(t.Dkt_()){case Lk.Mk_:if(this.mgt_()==null)return this;i=this.PP_();if(!(i instanceof Rd))return this;const A=this.mgt_().FY_(this.iXt_());A<0?this.mgt_().GY_(i):this.mgt_().xY_(A,i);case Lk.vJt_:if($F(t)){s=t.OA_();e=t.WA_();this.zA_(i,s,e)}return this;case Lk.bJt_:if(!XF(t))return this;const n=t.getIndex(),h=undefined,r=(n===0?i.OA_():i.WA_()).clone().translate(t.EI_(),t.pI_());s=n===0?r:i.OA_();e=n===1?r:i.WA_();this.zA_(i,s,e);return this;case Lk.FJt_:if(!ix(t))return this;s=i.OA_();e=i.WA_();if(t.$Wt_()){const t=(s.getX()+e.getX())/2;s.setX(t+t-s.getX());e.setX(t+t-e.getX())}if(t.tzt_()){const t=(s.getY()+e.getY())/2;s.setY(t+t-s.getY());e.setY(t+t-e.getY())}this.zA_(i,s,e);return this;case Lk.C3_:const o=this.getBounds()||i.getBounds();if(o==null||!jF(t))return this;const l=this.ut_(),u=t.XWt_(),a=this.UXt_(u[0],l,o).clone(),g=this.UXt_(u[1],l,o),c=Gn.multiply(a,g,a);if(c.BI_()<0||c.sI_()<0){const t=Gn.xI_(o,o,c.BI_()<0,c.sI_()<0);c.DI_(t);t.DI_(l);i.at_(t)}s=c.transformPoint(i.OA_());e=c.transformPoint(i.WA_());this.zA_(i,s,e);i.pc_();return this}return super.apply(t)}OWt_(t,i,s){if(!(t instanceof Rd))return super.OWt_(t,i,s);const e=t.OA_(),A=t.WA_(),n=Gn.FI_(i,(e.getX()+A.getX())/2,(e.getY()+A.getY())/2),h=n.transformPoint(e),r=n.transformPoint(A);this.zA_(t,h,r);return!0}zA_(t,i,s){t.zA_({from:i,to:s});return this}vXt_(){this.DXt_().nf_(!1);return this}update(){super.update();const t=this.$O_();if(!(t instanceof Rd))return this;let i=t.OA_(),s=t.WA_();if(i!=null&&s!=null){const e=WF.HWt_(t,this.mgt_(),bx);i=e.nI_(i.getX(),i.getY());this.ejt_.gR_(i);s=e.nI_(s.getX(),s.getY());this.Ajt_.gR_(s);this.njt_.nf_(this.nXt_());this.MXt_(t.getBounds())}return this}hjt_(t){if(t==null)return this.zgt_;if((this.lPt_()&xk.BJt_)==0||!OS.Tkt_(t)||t.Lkt_()["ctrlKey"])return null;const i=t.Fkt_(),s=this.dFt_(t)?this.fFt_():this.aFt_(),e=bC.select(t.PP_(),i.getX(),i.getY(),s);return e.indexOf(this.Ajt_)>=0?1:e.indexOf(this.ejt_)>=0?0:null}getBounds(){return null}dt_(t){return(t=Es(t))==null?this:super.dt_(t)}N_(){let t=super.N_();t=Pi(t,{handles:{from:this.ejt_.N_(),to:this.Ajt_.N_()}});return t}NXt_(t){this.ejt_.dt_(t["from"]);this.Ajt_.dt_(t["to"]);return this}Kzt_(t,i){i==null&&(this.zgt_!=null?i="grabbing":this.hjt_(t)!=null&&(i="grab"));super.Kzt_(t,i)}};i=t([_s("geotoolkit.controls.tools.editors.Line")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsIm9uTW91c2VEb3duIjoiekZ0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsIm9uTW91c2VVcCI6IkN0XyIsInJvdGF0ZU5vZGUiOiJPV3RfIiwic2V0TGluZSI6InpBXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJ1cGRhdGVCcm93c2VyQ3Vyc29yIjoiS3p0XyJ9fX0g");var Sx=Ci(function(){let i=class t extends Nx{constructor(t){super(t=qi(t,{name:"ArrowEditor",node:new sE({linestyle:{width:2,pixelsnapmode:!0},symbolend:new ma({width:12,height:24,painter:da,alignment:dA.le_,sizeisindevicespace:!0,preserverightangle:!0,linestyle:"black",fillstyle:"black"})})},!0))}isSupported(t){return t["node"]instanceof sE||t["mode"]===Dx.$Xt_}OWt_(t,i,s){if(!(t instanceof sE))return super.OWt_(t,i,s);const e=t.OA_(),A=t.WA_(),n=Gn.FI_(i,e.getX(),e.getY());t.zA_({from:e,to:n.transformPoint(A)});return!0}};i=t([_s("geotoolkit.controls.tools.editors.Arrow")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyb3RhdGVOb2RlIjoiT1d0XyJ9fX0g");var Gx=Ci(function(){let i=class t extends mx{TPt_(t){super.TPt_(t);if(this._zt_()){if(!this.$zt_(t))return this;{const i=undefined,s=this.if_().aI_(t.Fkt_()),e=this.kXt_(s,s.clone(),this.PP_(),!1);if(e==null)return this;this.push(e);e.rPt_()||this.isActive()||this.start()}}return this}KPt_(t){return super.KPt_(t)||this.hXt_()}Wzt_(t){const i=this.hXt_()&&this.nXt_();super.Wzt_(t);i&&this.wPt_(this.PP_(),t);return this}jPt_(t){super.jPt_(t);this.rjt_();return this}Uat_(){const t=super.Uat_(),i=this.getBounds();if(t==null||i==null)return t;const s=WF.KWt_(this.tXt_(),this.mgt_());if(!s.isIdentity()){const e=s.rn_(i);WF.ht_(t,e.Me_(),e.be_())}return t}GXt_(){if(this.PP_()==null||this.qat_()==null)return this;let t=this.getBounds();if(t==null)return this;const i=WF.KWt_(this.tXt_(),this.mgt_());i.isIdentity()||(t=i.rn_(t));WF.ht_(this.PP_(),t.Me_(),t.be_());return this}vXt_(){this.DXt_().nf_(!this._zt_()&&this.nXt_());return this}rjt_(){return this}};i=t([_s("geotoolkit.controls.tools.editors.BaseEditor")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRFZGl0TW9kZSI6ImpQdF8iLCJjcmVhdGVHaG9zdCI6IlVhdF8iLCJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyJ9fX0g");var Rx=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i){super();this.ov_=t;this.Mi_=null;this.kSt_=i}xkt_(t){Array.isArray(t)?this.Mi_=t.map((t=>this.Id_(t,this.ov_))):this.Mi_=this.Id_(t,this.ov_);return super.xkt_(t)}dn_(){return this.ov_}getValue(){return this.kSt_}merge(t){if(t instanceof i&&t.dn_()===this.ov_){this.kSt_=t.getValue();return!0}return!1}rI_(){return new i(this.ov_,this.Mi_)}Dkt_(){return Lk.gf_}Id_(t,i){const s=undefined;if(t.N_().hasOwnProperty(this.ov_))return t.N_()[this.ov_];ki(`Cannot retrieve property "${this.ov_}"`)}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.PropertyChange")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROb2RlIjoieGt0XyIsImdldE5hbWUiOiJkbl8iLCJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g");const kx=30,Fx=100,xx=2,Lx=new Gn;var Ux=Ci(function(){let i=class t extends yx{constructor(t){let i=null;t!=null&&t["node"]!=null||(i=new YC({ispointingup:!0,showellipsis:!0,fillstyle:"white",textstyle:{baseline:ka.mk_}}).PX_(NC.hX_).OG_(!0));super(t=qi(t,{name:"TextEditor",node:i,preview:new Yu({linestyle:{pixelsnapmode:!0,pattern:[5,5]}})}))}GXt_(){super.GXt_();const t=this.PP_(),i=this.qat_();if(t instanceof YC&&i instanceof YC){t.setSize(i.Ie_(),i.Ts_());this.gR_(t,i.lR_())}return this}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.ojt_=null;this.ljt_=t["preview"]instanceof Yu?t["preview"]:new Yu(t["preview"]);this.ujt_=this.ajt_.bind(this);this.bf_=new mA;this.iXt_().xY_(0,this.ljt_)}}isSupported(t){return t["node"]instanceof YC||t["mode"]===Dx.Text}zFt_(t){super.zFt_(t);this.ojt_=t.getPlot()!=null?t.getPlot().r3_():null;this.GBt_=this.bFt_(this.LM_(),t);const i=this.getBounds();if(i!=null&&!i.contains(this.GBt_)&&this.Hzt_()==null){this.gjt_(!1);this.stop();if(!this.KXt_()){t.stopPropagation(!0,!0);this.end(t)}}}XFt_(t){const i=this.cjt_(),s=this.bFt_(this.LM_(),t),e=this.getBounds();(this.Hzt_()!=null||e!=null&&e.contains(s)===!0)&&t.stopPropagation(!0,!0);if(this.uWt_(t)||this.KXt_()||t.Lkt_()["buttons"]===Ts.W_||this.Hzt_()!=null)super.XFt_(t);else if(i.parentNode!=null){this.gjt_(!1);t.stopPropagation(!0,!0);this.end(t)}else if((this.lPt_()&xk.dJt_)!=0&&this.GBt_!=null){this.push(new hx(this.GBt_,this.bFt_(this.mgt_(),t),this.isActive()));t.stopPropagation(!0,!0);this.start();this.Ozt_(t)}}Ct_(t){this.ojt_=t.getPlot()!=null?t.getPlot().r3_():null;let i;if(this.uWt_(t))if(this.KXt_()){t.stopPropagation(!0,!0);let i=t.Fkt_();const s=this.getBounds();i=this.if_().hI_(i.getX(),i.getY());this.gjt_(s!=null&&s.contains(i))}else(this.lPt_()&xk.CJt_)==0||this.nXt_()||this.Ijt_(t);else if(this.KXt_())this.gjt_(!1);else{if(!OS.Tkt_(t)&&this.nXt_()){t.stopPropagation(!0,!0);this.end(t);return}if(this.nXt_()&&(i=this.PP_())instanceof YC){t.stopPropagation(!0,!0);this.push(new Rx("text",i.SG_()).rzt_(!1));this.gjt_(!0)}}super.Ct_(t);this.fjt_!=null&&this.fjt_.parentNode!=null&&this.start()}IPt_(t){const i=this.cjt_();if(t.Lkt_()["keyCode"]!==Ys.U_)super.IPt_(t);else if(i.parentNode!=null){t.stopPropagation(!0,!0);this.gjt_(!1);this.stop();this.KXt_()||this.end(t)}else{t.stopPropagation(!0,!0);this.end(t)}}apply(t){let i=this.$O_();if(!(i instanceof YC))return this;switch(t.Dkt_()){case Lk.gf_:if(!tx(t))return this;if(t.dn_()==="text"){this.PP_().a_(t.getValue());return this}return super.apply(t);case Lk.Mk_:if(this.PP_().getParent()==null&&this.mgt_()!=null){i=this.PP_();const t=this.mgt_().FY_(this.iXt_());t<0?this.mgt_().GY_(i):this.mgt_().xY_(t,i)}case Lk.vJt_:if(!$F(t))break;const s=t.OA_(),e=t.WA_();this.bf_.ce_(s.getX(),s.getY(),e.getX(),e.getY());this.update();break;case Lk.BC_:if(!zF(t))break;const A=this.ut_().rI_(),n=A.BI_()*t.EI_()+A.wI_()*t.pI_(),h=A.QI_()*t.EI_()+A.sI_()*t.pI_();this.bf_.translate(n,h);this.update();break;case Lk.C3_:if(!jF(t))break;const r=t.XWt_(),o=this.UXt_(r[0]).clone(),l=this.UXt_(r[1]),u=Gn.multiply(o,l,o);if(u.BI_()<0||u.sI_()<0){const t=Gn.xI_(this.bf_,this.bf_,u.BI_()<0,u.sI_()<0);u.DI_(t);t.DI_(this.ut_());i.at_(t)}u.rn_(this.bf_,this.bf_);this.update();break;default:super.apply(t)}this.gjt_(!1);return this}getBounds(){return this.nXt_()?this.bf_:null}dwt_(){const t=this.PP_();if(t instanceof YC){const i=t.N_();if(this.nXt_()!==!0||NA.equals(i["width"],0)||NA.equals(i["height"],0))return this.getBounds();const s=new mA(0,0,i["width"],i["height"]);return this.pc_(s,t)}return this.getBounds()}WXt_(t){this.gjt_(!1);const i=this.PP_();i instanceof YC&&i.a_("");this.bf_.de_(0);return super.WXt_(t)}end(t){this.gjt_(!1);return super.end(t)}pc_(t,i){const s=undefined;t=(i.getParent()&&i.getParent().if_()||Gn.JI_).gI_(t,t);const e=i.GE_();OC.jj_(e)?t.setX(i.uR_()):OC.Zj_(e)?t.setX(i.uR_()-t.Ie_()):t.setX(i.uR_()-t.Ie_()/2);OC.zj_(e)?t.setY(i.aR_()):OC.Xj_(e)?t.setY(i.aR_()-t.Ts_()):t.setY(i.aR_()-t.Ts_()/2);return t}xkt_(t){if(t instanceof YC){const i=t.N_(),s=i["userwidth"]||i["width"],e=i["userheight"]||i["height"],A=new mA(0,0,s,e);this.bf_=this.pc_(A,t)}return super.xkt_(t)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["preview"]instanceof Yu?this.ljt_=t["preview"]:this.ljt_.dt_(t["preview"]);return this}N_(){const t=super.N_();t["preview"]=this.ljt_.N_();return t}Cjt_(){return this.fjt_}cjt_(){if(!this.fjt_){const t=xs("textarea");t.className="cg-editor-textarea";t.style.display="block";t.style.border="none";t.style.resize="none";t.style.outline="none";t.style.overflow="hidden";t.style.position="relative";t.style.backgroundColor="transparent";t.style.textAlign="left";t.style.wordBreak="break-word";t.style.padding="0";t.style.pointerEvents="all";t.addEventListener("input",this.ujt_);this.fjt_=t}return this.fjt_}gjt_(t){if(!this.ojt_||!this.fjt_)return this;const i=this.PP_();if(t&&this.fjt_.parentNode==null&&i instanceof YC){this.fjt_.value=i.SG_();this.ojt_.parentNode.insertBefore(this.fjt_,this.ojt_.nextSibling);this.update();this.fjt_.focus()}else t||this.fjt_.parentNode==null||this.ojt_.parentNode.removeChild(this.fjt_);this.PP_().nf_(!t);return this}update(){this.djt_();const t=this.dwt_(),i=this.PP_(),s=this.$O_();if(this.ojt_!=null&&this.fjt_!=null&&t!=null&&i instanceof YC&&s instanceof YC){const e=i.SG_();e||i.a_("|");const A=this.Bjt_();let n=i.if_()||Gn.JI_;const h=n.nI_(t.ye_(),t.De_()),r=s.vn_().BR_(A);A.rn_(r,r);const o=r.Ie_(),l=r.Ts_(),u=this.ojt_.getBoundingClientRect();if(this.ojt_.parentElement.style.position==="relative"){this.fjt_.style.position="absolute";const t=this.ojt_.parentElement.getBoundingClientRect(),i=u["left"]-t["left"],s=u["top"]-t["top"];this.fjt_.style.left=i+(h.x-o/2)+"px";this.fjt_.style.top=s+(h.y-l/2)+"px"}else{this.fjt_.style.position="relative";this.fjt_.style.left=h.x-o/2+"px";this.fjt_.style.top=h.y+l/2-u["height"]+"px";this.fjt_.style.marginTop=-l+"px"}this.fjt_.style.width=o+xx+"px";this.fjt_.style.height=l+"px";if(!NA.equals(i.UE_(),0)){const t=i.getParent()!=null&&i.getParent().if_()||Gn.JI_;n=i.IR_(t)}this.fjt_.style.transform="rotate("+Gn.HI_(n)+"rad)";const a=i.FE_()||new qa;this.fjt_.style.font=a.Zy_();this.fjt_.style.color=a.getColor();this.fjt_.style.lineHeight=a.Wy_().toString();this.fjt_.style.textAlign=a.vF_();i.a_(e);this.wjt_(t.getX(),t.getY(),t.Qe_(),t.pe_())}return super.update()}ajt_(){this.push(new Rx("text",this.cjt_().value))}wjt_(t,i,s,e){this.ljt_.clear();if(t!==s&&i!==e&&this.nXt_()&&!this.KXt_()){const A=[t,s,s,t],n=[i,i,e,e],h=this.ut_();h.vI_(WF.KWt_(this.PP_().getParent(),this.mgt_(),Lx));h.NI_(A,n,A.length);this.ljt_.moveTo(A[0],n[0]).lineTo(A[1],n[1]).moveTo(A[0],n[0]).lineTo(A[3],n[3]).moveTo(A[1],n[1]).lineTo(A[2],n[2]).moveTo(A[3],n[3]).lineTo(A[2],n[2])}this.ljt_.td_()}dispose(){this.gjt_(!1);if(this.fjt_){this.fjt_.removeEventListener("input",this.ujt_);this.fjt_=null}this.ljt_.dispose();this.ljt_=null;super.dispose()}$C_(){if(this.PP_()==null||(this.fjt_==null||this.fjt_.parentNode==null)&&!this.PP_().$C_())return!1;let t=this.PP_().getParent();while(t!=null){if(!t.$C_())return!1;t=t.getParent()}return!0}djt_(){const t=this.$O_();if(!(t instanceof YC))return;const i=t.getParent()||this.mgt_(),s=i&&i.if_()||Gn.JI_,e=Ca.VG_(this.bf_,t.GE_());this.gR_(t,e);const A=s.rn_(this.bf_);t.setSize(A.Ie_(),A.Ts_())}gR_(t,i,s){t instanceof YC&&t.gR_(i,s);return this}Bjt_(){const t=this.if_(),i=Math.atan2(t.QI_(),t.BI_()),s=this.getBounds(),e=s.ye_(),A=s.De_(),n=t.nI_(e,A);return i?Gn.FI_(-i,n.getX(),n.getY()).vI_(t):t}Ijt_(t){const i=this.PP_();if(!(i instanceof YC))return;const s=t.Fkt_(),e=new mA(s.getX(),s.getY(),s.getX()+Fx,s.getY()+kx);this.mgt_()!=null&&this.mgt_().if_()!=null&&this.mgt_().if_().gI_(e,e);const A=Ca.VG_(e,i.GE_());e.translate(e.getX()-A.getX(),e.getY()-A.getY());this.push(new hx(e.Me_(),e.be_()));this.push(new Rx("text","").rzt_(!1));this.gjt_(!0)}};i=t([_s("geotoolkit.controls.tools.editors.Text")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsIm9uTW91c2VEb3duIjoiekZ0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsIm9uTW91c2VVcCI6IkN0XyIsIm9uS2V5RG93biI6IklQdF8iLCJnZXRUZXh0Qm91bmRzIjoiZHd0XyIsInJlc2V0Tm9kZSI6IldYdF8iLCJ1cGRhdGVCb3VuZHMiOiJwY18iLCJzZXROb2RlIjoieGt0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRUZXh0QXJlYVZpc2libGUiOiJnanRfIiwiZ2V0VmlzaWJsZSI6IiRDXyIsInVwZGF0ZVRleHRTaGFwZSI6ImRqdF8iLCJzZXRBbmNob3IiOiJnUl8iLCJjcmVhdGVUZXh0T25DbGljayI6IklqdF8ifX19");var Yx={Qjt_:"Bubble",$Xt_:"Arrow",Ejt_:"Anchor"};const Tx=1,Kx=0,Hx=new mA,qx=new ma({painter:cE,alignment:dA.ne_,fillstyle:"#a9a9a9",linestyle:"black",sizeisindevicespace:!0,width:7,height:7});var Jx=Ci(function(){let i=class t extends Ux{constructor(t){super(t=qi(t,{name:"CalloutEditor",node:new iv({width:100,height:30,sizemode:NC.hX_,showellipsis:!0,padding:0,sizeisindevicespace:!0,preserveaspectratio:!0}),preview:{visible:!1}}))}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.zgt_=null;this.dVt_=null;this.azt_=!1;this.gzt_=!1;this.pjt_=qx.clone().gR_(NaN,NaN);this.iXt_().GY_(this.pjt_)}}isSupported(t){return t["mode"]===Dx.tjt_||t["node"]instanceof iv}zFt_(t){super.zFt_(t);if(this.KXt_()){this.zgt_=this.hjt_(t);if(this.zgt_!=null&&(this.Hzt_()==null||this.zgt_===Yx.Ejt_)){this.dVt_=this.bFt_(this.pjt_,t);t.stopPropagation(!1,!0)}}}XFt_(t){if(this.KXt_()&&this.Hzt_()==null&&this.zgt_==null&&t.Lkt_()["buttons"]!==Ts.W_&&this.Hzt_(t)==null){this.zgt_=this.hjt_(t);this.dVt_=this.bFt_(this.pjt_,t)}if(this.zgt_==null||this.dVt_==null||!this.isActive()&&this.uWt_(t)){super.XFt_(t);this.zgt_!=null&&t.stopPropagation(!0,!0)}else{const i=this.bFt_(this.pjt_,t),s=i.getX()-this.dVt_.getX(),e=i.getY()-this.dVt_.getY(),A=this.zgt_!==Yx.Ejt_?Tx:Kx;this.push(new Mx(s,e,A));this.start();this.dVt_=i}}Ct_(t){super.Ct_(t);this.zgt_=null;this.dVt_=null;this.azt_=!1;this.gzt_=!1}zzt_(t){switch(t.Dkt_()){case Lk.bJt_:this.DXt_().nf_(!1);break;case Lk.BC_:if(!zF(t))break;const i=this.mjt_(),s=i.BI_()*t.EI_()+i.wI_()*t.pI_(),e=i.QI_()*t.EI_()+i.sI_()*t.pI_();t.vP_(s,e);break}super.zzt_(t)}vPt_(t){if(t.Dkt_()===Lk.C3_&&jF(t)){const i=t.XWt_(),s=i[0]["delta"]<-1,e=i[1]["delta"]<-1;if(s||e){let t=this.Hzt_();if(s){this.azt_=!this.azt_;t=this.mXt_(t,!1)}if(e){this.gzt_=!this.gzt_;this.mXt_(t,!0)}}}super.vPt_(t)}Uat_(){return this.PP_()!=null?this.PP_().clone():null}GXt_(){const t=this.PP_(),i=this.qat_();if(t instanceof iv&&i instanceof iv){t.td_().Qwt_(i.dwt_()).c_(i.UE_()).d$_(i.bK_(),i.NK_());const s=t.uR_(),e=t.aR_();this.gR_(t,s,e)}return this}apply(t){const i=this.$O_();if(!(i instanceof iv))return this;let s,e,A,n;switch(t.Dkt_()){case Lk.Mk_:if(!this.PP_().getParent()&&this.mgt_()!=null){const t=this.mgt_().FY_(this.iXt_());this.mgt_().xY_(t,this.PP_())}case Lk.vJt_:if(!$F(t))return this;const h=t.OA_(),r=t.WA_();if(h==null||isNaN(h.getX()))this.gR_(i,NaN,NaN);else if(h===r)this.gR_(i,h);else{Hx.ce_(h.getX(),h.getY(),r.getX(),r.getY());i.Qwt_(Hx);i.SE_(i.GE_());this.gR_(i,i.lR_())}return this;case Lk.bJt_:if(!XF(t))break;A=i.uR_();n=i.aR_();this.gR_(i,A+t.EI_(),n+t.pI_());const o=undefined;if(t.getIndex()===Kx){let s=-t.EI_(),e=-t.pI_();const A=i.WG_(),n=i.if_();if(A&&n!=null){s*=n.Zc_();e*=n._c_()}this.move(i,s,e)}break;case Lk.BC_:zF(t)&&this.move(i,t.EI_(),t.pI_());return this;case Lk.C3_:if(!jF(t))return this;const l=t.XWt_(),u=this.UXt_(l[0]).clone(),a=this.UXt_(l[1]),g=Gn.multiply(u,a,u);e=this.getBounds();if(g.BI_()<0||g.sI_()<0){g.BI_()<0&&(this.azt_=!this.azt_);g.sI_()<0&&(this.gzt_=!this.gzt_)}const c=g.rn_(e);A=i.uR_();n=i.aR_();i.Qwt_(c);const I=i.uR_()-A,f=i.aR_()-n;s=this.if_();this.move(i,s.BI_()*I+s.wI_()*f,s.QI_()*I+s.sI_()*f);this.gR_(i,A,n);return this;case Lk.MJt_:_F(t)&&i.c_(i.UE_()+t.HI_());return this;case Lk.FJt_:if(!ix(t))return this;const C=i.bK_(),d=i.NK_();this.move(i,t.$Wt_()?-2*C:0,t.tzt_()?-2*d:0);return this}return super.apply(t)}pc_(t,i){const s=undefined;t=(i.getParent()&&i.getParent().if_()||Gn.JI_).gI_(t,t);const e=undefined,A=i.dwt_().getCenter();return t.translate(A.getX()-t.ye_(),A.getY()-t.De_())}gR_(t,i,s){t.gR_(i,s);return this}move(t,i,s){t.move(i,s);return this}Hzt_(t){const i=super.Hzt_(t);if(i!==0||t==null)return i;const s=this.getBounds(),e=this.bFt_(this.mgt_(),t);this.ut_().aI_(e,e);return s!=null&&s.contains(e)?0:null}ut_(){const t=this.$O_();if(!(t instanceof iv))return Gn.JI_;const i=t.UE_();if(!i&&!this.azt_&&!this.gzt_)return Gn.JI_;const s=t.dwt_(),e=t.if_()||Gn.JI_,A=e.nI_(s.ye_(),s.De_());return Gn.FI_(i,A.getX(),A.getY()).DI_(e.rI_()).vI_(e)}gjt_(t){if(this.Cjt_()==null)return this;super.gjt_(t);const i=this.PP_();i instanceof iv&&i.nf_(!0).wwt_(!t);return this}hjt_(t){if(t==null)return this.zgt_;const i=t.Fkt_(),s=this.dFt_(t)?this.fFt_():this.aFt_(),e=bC.select(t.PP_(),i.getX(),i.getY(),s);return e.indexOf(this.pjt_)>=0?Yx.Ejt_:e.indexOf(this.PP_())<0?null:this.Hzt_()!=null?Yx.Qjt_:Yx.$Xt_}update(){super.update();const t=this.PP_();if(!(t instanceof iv))return this;const i=t.uR_(),s=t.aR_();this.pjt_.gR_(i,s);const e=this.iXt_().getBounds();if(e!=null&&!isNaN(i)){Hx.ce_(e).fe_(i,s);this.iXt_().ht_(Hx)}return this}getBounds(){const t=this.$O_();return this.nXt_()&&t instanceof iv?t.dwt_():null}dwt_(){return this.getBounds()}djt_(){}dt_(t){return(t=Es(t))==null?this:super.dt_(t)}NXt_(t){t["anchor"]!=null&&this.pjt_.dt_(t["anchor"]);return this}N_(){let t=super.N_();t=Pi(t,{handles:{anchor:this.pjt_.N_()}});return t}Ijt_(t){const i=this.mjt_().aI_(t.Fkt_());this.push(new hx(i,i));this.push(new Rx("text","").rzt_(!1));this.gjt_(!0)}Kzt_(t,i){if(i==null){const s=this.hjt_(t);s==null||this.Hzt_(t)!=null&&s!==Yx.Ejt_||(i=s===Yx.Ejt_?"grab":"move")}super.Kzt_(t,i)}mjt_(){return this.mgt_()&&this.mgt_().if_()||Gn.JI_}};i=t([_s("geotoolkit.controls.tools.editors.Callout")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJvbkJlZm9yZUNvbW1hbmRBcHBsaWVkIjoienp0XyIsIm9uQ29tbWFuZEFwcGxpZWQiOiJ2UHRfIiwiY3JlYXRlR2hvc3QiOiJVYXRfIiwicmVzZXROb2RlVG9HaG9zdCI6IkdYdF8iLCJ1cGRhdGVCb3VuZHMiOiJwY18iLCJzZXRBbmNob3IiOiJnUl8iLCJnZXRCYm94SGFuZGxlIjoiSHp0XyIsImdldExvY2FsVHJhbnNmb3JtIjoidXRfIiwic2V0VGV4dEFyZWFWaXNpYmxlIjoiZ2p0XyIsImdldFRleHRCb3VuZHMiOiJkd3RfIiwidXBkYXRlVGV4dFNoYXBlIjoiZGp0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJjcmVhdGVUZXh0T25DbGljayI6IklqdF8iLCJ1cGRhdGVCcm93c2VyQ3Vyc29yIjoiS3p0XyJ9fX0g");var Px=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i){super();if(Array.isArray(t)){this.ozt_=!1;this._x=t}else{this.ozt_=!0;this._x=[t]}this._y=Array.isArray(i)?i:[i]}getX(){return this._x}getY(){return this._y}merge(t){if(t instanceof i&&!this.ozt_){this._x.push(t.getX()[0]);this._y.push(t.getY()[0]);return!0}return!1}rI_(){return new i([],[])}Dkt_(){return this.ozt_?Lk.vJt_:Lk.Mk_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.AddPath")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g");var Vx=Ci(function(){let i=class t extends nx{constructor(t,i,s){super();this.GBt_=t;this.Ndt_=i;this.yjt_=s===!0}getPoint(){return this.GBt_}getX(){return this.GBt_.getX()}getY(){return this.GBt_.getY()}getIndex(){return this.Ndt_}merge(t){if(t instanceof Mx&&t.getIndex()===this.getIndex()){this.GBt_.translate(t.EI_(),t.pI_());return!0}return!1}rI_(){return new Ox(this.GBt_,this.Ndt_)}Djt_(){return this.yjt_}Dkt_(){return this.yjt_?Lk.NJt_:this.Ndt_!==0?Lk.vJt_:Lk.Mk_}};i=t([_s("geotoolkit.controls.tools.editors.commands.AddPoint")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVJbnZlcnNlIjoicklfIiwiaXNJbnNlcnQiOiJEanRfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g"),Ox=Ci(function(){let i=class t extends nx{constructor(t,i){super();this.GBt_=t;this.Ndt_=i}getX(){return this.GBt_.getX()}getY(){return this.GBt_.getY()}getIndex(){return this.Ndt_}rI_(){return new Vx(this.GBt_,this.Ndt_,!0)}Dkt_(){return Lk.SJt_}};i=t([_s("geotoolkit.controls.tools.editors.commands.DeletePoint")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g"),Wx=Ci(function(){var i;let s=i=class t extends nx{rI_(){return new i}Dkt_(){return Lk.GJt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.ReversePoints")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g");var zx=Ci(function(){let i=class t extends nx{Dkt_(){return Lk.SJt_}};i=t([_s("geotoolkit.controls.tools.editors.commands.Delete")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var Xx=Ci(function(){var i;let s=i=class t extends nx{constructor(){super();this.Mjt_=!1}Dkt_(){return this.Mjt_?Lk.RJt_:Lk.kJt_}rI_(){return(new i).kh_()}kh_(){this.Mjt_=!this.Mjt_;return this}vjt_(){return this.Mjt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.DeleteNode")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFdmVudE5hbWUiOiJEa3RfIiwiY3JlYXRlSW52ZXJzZSI6InJJXyJ9fX0g");var jx=Ci(function(){let i=class t extends nx{constructor(){super();this.HU_=new sI}xkt_(t){const i=new mA;let s=null;const e=Array.isArray(t)?t:[t];for(let t=0;t<e.length;t++){const A=e[t],n=oe(A)&&A.ut_()!=null?A.ut_():Gn.JI_,h=ie(A)?A.getBounds():null;if(h!=null){n.rn_(h,i);s=s?s.union(i):i.clone()}}this.HU_.ht_(s);return super.xkt_(t)}_Wt_(t){this.HU_=t;return this}ZWt_(){return this.HU_}rI_(){return(new Zx).xkt_(this.HU_)}Dkt_(){return Lk.xJt_}};i=t([_s("geotoolkit.controls.tools.editors.commands.Group")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROb2RlIjoieGt0XyIsInNldEdyb3VwIjoiX1d0XyIsImdldEdyb3VwIjoiWld0XyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg"),Zx=Ci(function(){let i=class t extends nx{constructor(){super();this.bjt_=[]}xkt_(t){if(t instanceof sI){this.bjt_=t.YY_().toArray().slice();return super.xkt_(t)}ki("geotoolkit/scene/Group is expected");return super.xkt_(null)}rI_(){const t=this.PP_()instanceof sI?this.PP_():null;return(new jx).xkt_(this.bjt_)._Wt_(t)}Dkt_(){return Lk.LJt_}};i=t([_s("geotoolkit.controls.tools.editors.commands.Ungroup")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROb2RlIjoieGt0XyIsImNyZWF0ZUludmVyc2UiOiJySV8iLCJnZXRFdmVudE5hbWUiOiJEa3RfIn19fSAg");var _x=Ci(function(){var i;let s=i=class t extends nx{constructor(t,i){super();this.Njt_=t;this.Sjt_=i}_Pt_(){return this.Njt_}$Pt_(){return this.Sjt_}rI_(){return new i(this.Sjt_,this.Njt_)}Dkt_(){return Lk.YJt_}};s=i=t([_s("geotoolkit.controls.tools.editors.commands.ReplaceNode")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGcm9tU2hhcGUiOiJfUHRfIiwiZ2V0VG9TaGFwZSI6IiRQdF8iLCJjcmVhdGVJbnZlcnNlIjoicklfIiwiZ2V0RXZlbnROYW1lIjoiRGt0XyJ9fX0g");var $x=Ci(function(){let i=class t extends yx{constructor(t){super(t=qi(t,{name:"CompositeEditor",node:null}))}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.Gjt_=!1;this._W_=[];this.Rjt_=[];this.kjt_=this.Fjt_.bind(this)}}isSupported(t){return Array.isArray(t["node"])||t["node"]instanceof sI}Fjt_(t,i,s){if(!(s instanceof Pk)||!this.isEnabled()||this.Gjt_||this.xjt_!=null&&this.xjt_!==i)return;this.xjt_=i;i.iXt_().nf_(!0);const e=s.gPt_();e.xkt_(this.PP_());this.push(e);this.start()}zFt_(t){if(this.Gjt_)super.zFt_(t);else for(let i=this.Rjt_.length-1;i>=0;i--){const s=this.Rjt_[i];if(this.xjt_!=null||t.qE_()){if(!this.Xzt_())break}else s.qPt_(t);this.Xzt_()&&!s.Zzt_()&&this.Rjt_[i].jzt_()}}XFt_(t){if(this.Gjt_)super.XFt_(t);else if(this.xjt_!=null)this.xjt_.JPt_(t);else for(let i=this.Rjt_.length-1;i>=0;i--){this.Rjt_[i].JPt_(t);if(this.xjt_!=null||t.qE_())break}}Ct_(t){if(this.Gjt_)super.Ct_(t);else{for(let i=0;i<this.Rjt_.length;i++)this.Rjt_[i].PPt_(t);this.xjt_=null;this.stop()}}PP_(){return this.Gjt_?super.PP_():this._W_}jPt_(t){t&=xk.EJt_|xk.DJt_;for(let i=0;i<this.Rjt_.length;i++)this.Rjt_[i].jPt_(t);return super.jPt_(t)}Kv_(t){for(let i=0;i<this.Rjt_.length;i++)this.Rjt_[i].Kv_(t);return super.Kv_(t)}save(t){const i=t.PP_();if(!Array.isArray(i))return super.save(t);if(i.length===0)return null;switch(t.Dkt_()){case Lk.kJt_:const s=i[0].getParent(),e={parent:s};s instanceof Ic&&(e["index"]=s.FY_(i[0]));return e;default:return super.save(t)}}apply(t){let i,s,e,A;switch(t.Dkt_()){case Lk.xJt_:if(!ZF(t)||this.Gjt_||this._W_.length<1)return this;e=this._W_[0].getParent();if(!(e instanceof Ic))return this;s=e.FY_(this._W_[0]);const n=t.ZWt_();A=n.sd_()||Gn.JI_;for(i=0;i<this._W_.length;i++){const t=this._W_[i];if(!oe(t))continue;const s=Gn.multiply(A.rI_(),t.ut_()||Gn.JI_);t.at_(s)}n.KY_().GY_(this._W_);this.YPt_(n);e.xY_(s,n);return this;case Lk.LJt_:const h=this.PP_();if(!(h instanceof Ic))return this;e=h.getParent();if(!(this.Gjt_&&e instanceof Ic))return this;A=h.sd_()||Gn.JI_;s=e.FY_(h);e.removeChild(h);this._W_=Au.toArray(h.YY_());for(i=this._W_.length-1;i>=0;i--){const t=this._W_[i];if(!oe(t))continue;const n=t.ut_()||Gn.JI_;t.at_(Gn.multiply(A,n));e.xY_(s,this._W_[i])}this.YPt_(this._W_);return this;case Lk.gf_:if(!tx(t))return this;if(this.Gjt_)return super.apply(t);const r=t.dn_(),o=t.getValue(),l=Array.isArray(o);for(i=0;i<this.Rjt_.length;i++){const s=l?new Rx(r,o[i]):t;this.Rjt_[i].apply(s)}return this;case Lk.UJt_:return super.apply(t);case Lk.BC_:case Lk.MJt_:case Lk.C3_:case Lk.FJt_:case Lk.kJt_:if(this.Gjt_)return super.apply(t);for(i=0;i<this.Rjt_.length;i++)this.xjt_!==this.Rjt_[i]&&this.Rjt_[i].apply(t);return this;case Lk.RJt_:const u=t.PP_();if(Array.isArray(u)){for(i=u.length-1;i>=0;i--){t.xkt_(u[i]);super.apply(t)}t.xkt_(u);return this}return super.apply(t)}return this}YPt_(t){let i;for(i=0;i<this.Rjt_.length;i++)this.Rjt_[i].dispose();this.Rjt_=[];if(!Array.isArray(t)){if(!(t instanceof sI)){ki("geotoolkit/scene/Group is expected");return this.xkt_(null)}this.Gjt_=!0;this._W_=Au.toArray(t.YY_());this.iXt_().nf_(!0);return this.xkt_(t)}this.Gjt_=!1;this._W_=t.reduce((function(t,i){!i.getParent()||t.length!==0&&t[0].getParent()!==i.getParent()||t.push(i);return t}),[]);if(this._W_.length>0){const t=this._W_[0].getParent();t instanceof Ic&&(this._W_=t.YY_((t=>this._W_.indexOf(t)>=0)).toArray())}for(i=0;i<this._W_.length;){const t=this.N_();let s={node:this._W_[i],layer:this.mgt_()};s=qi(s,t,!0);const e=Tk.Ai_().zJt_(s);if(e!=null){e.on(Lk.PJt_,this.kjt_);this.Rjt_.push(e);i++}else this._W_.splice(i,1)}return this.xkt_(null)}dt_(t){for(let i=0;i<this.Rjt_.length;i++)this.Rjt_[i].dt_(t);return super.dt_(t)}WXt_(t){if(this.Gjt_)return super.WXt_(t);for(let i=0;i<this.Rjt_.length;i++){const s=this.Rjt_[i];s instanceof yx&&s.zXt_(t)}return this}update(){for(let t=0;t<this.Rjt_.length;t++)this.Rjt_[t].update();return super.update()}dispose(){for(let t=0;t<this.Rjt_.length;t++)this.Rjt_[t].dispose();this.Rjt_=[];this._W_=[];this.xjt_=null;super.dispose()}};i=t([_s("geotoolkit.controls.tools.editors.CompositeEditor")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRFbmFibGVkIjoiS3ZfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsInNldEVkaXRNb2RlIjoialB0XyIsImdldE5vZGUiOiJQUF8ifX19");const tL=new xA(50,50);var iL=Ci(function(){let i=class t extends yx{constructor(t){super(t=qi(t,{name:"SymbolEditor",node:new ma({alignment:dA.ne_,linestyle:"black",fillstyle:"white"})}))}GXt_(){const t=this.PP_(),i=this.qat_();if((this.lPt_()&xk.dJt_)!=0&&t!=null&&ee(t)&&i!=null&&ie(i)){t.ht_(i.getBounds());return this}return super.GXt_()}SXt_(t,i){if(t instanceof ma){if(i&&i.hasOwnProperty("fillstyle")){const s=t.N_();s["painter"]!==void 0&&s["painterproperties"]!==void 0&&(i=Pi(i,{painter:s["painter"],painterproperties:s["painterproperties"]},!0))}t.dt_(i)}else super.SXt_(t,i);return this}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.GBt_=null;this.fk_=tL}}isSupported(t){return t["node"]instanceof ma||t["mode"]===Dx.Symbol}zFt_(t){super.zFt_(t);this.GBt_=this.Hzt_()==null?t.Fkt_():null;if(this.GBt_!=null){const t=this.if_();this.Ljt_=t.aI_(this.GBt_)}this.nXt_()||(this.lPt_()&xk.dJt_)==0||(this.lPt_()&xk.CJt_)==0||t.stopPropagation(!0,!0)}XFt_(t){if(this.GBt_==null||this.KXt_()||(this.lPt_()&xk.dJt_)==0||!this.isActive()&&(this.uWt_(t)||this.nXt_()||!this.$zt_(t)))super.XFt_(t);else{const i=t.Fkt_();let s=i.getX(),e=i.getY();if(t.Lkt_()["shiftKey"]){const t=this.oR_();let A=i.getX()-this.GBt_.getX(),n=i.getY()-this.GBt_.getY();Math.abs(A)<t*Math.abs(n)?n=A>0==n>0?A/t:-A/t:A=A>0==n>0?n*t:-n*t;s=this.GBt_.getX()+A;e=this.GBt_.getY()+n}const A=this.if_(),n=this.Ljt_||A.aI_(this.GBt_),h=A.aI_(new lA(s,e)),r=this.PP_(),o=this.IXt_()&&this.RXt_(h,n,this.AXt_(!0),r,this.isActive())||this.kXt_(h,n,r,this.isActive());if(o==null)return;this.push(o);if(!o.rPt_()){this.isActive()||this.start();this.Ozt_(t)}}}Ct_(t){let i=!1;if(this.GBt_!=null)if(this.uWt_(t)&&(this.lPt_()&xk.CJt_)!=0&&!this.nXt_()){const s=t.Fkt_(),e=new mA(s.getX(),s.getY(),s.getX(),s.getY()).Le_(this.fk_.Ie_()/2,this.fk_.Ts_()/2);this.LM_()!=null&&this.LM_().if_()!=null&&this.LM_().if_().gI_(e,e);this.push(new hx(e.Me_(),e.be_()));i=!0}else if(this.isActive()){t.stopPropagation(!0,!0);i=!0}this.GBt_=null;super.Ct_(t);i&&this.end(t)}getBounds(){const t=this.qat_();if(this.Zzt_()&&t instanceof Ca)return t.dR_(Gn.JI_);const i=this.PP_();return this.nXt_()&&i instanceof Ca?i.dR_(Gn.JI_):null}oR_(){const t=this.PP_();return t instanceof Ca?t.oR_():1}Ujt_(){const t=this.PP_();this.fk_=t instanceof Ca?t.getSize():tL;return this}Vp_(){return this.GBt_}};i=t([_s("geotoolkit.controls.tools.editors.SymbolEditor")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsIm9uTW91c2VEb3duIjoiekZ0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsIm9uTW91c2VVcCI6IkN0XyIsImdldEFzcGVjdFJhdGlvIjoib1JfIn19fSAg");var sL=Ci(function(){let i=class t extends iL{constructor(t){super(t=qi(t,{name:"RectangleEditor",node:new dp({fillstyle:"white",linestyle:{width:2,pixelsnapmode:!0}})}))}isSupported(t){return t["node"]instanceof dp||t["mode"]===Dx.ZXt_}oR_(){return 1}getBounds(){if(this.Zzt_()){const t=this.qat_();return ie(t)?t.getBounds():null}return this.nXt_()&&ie(this.JP_)?this.JP_.getBounds():null}};i=t([_s("geotoolkit.controls.tools.editors.Rectangle")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBc3BlY3RSYXRpbyI6Im9SXyJ9fX0g");var eL=Ci(function(){let i=class t extends sL{constructor(t){super(t=qi(t,{name:"EllipseEditor",node:new nE({fillstyle:"white",linestyle:{width:2,pixelsnapmode:!0}})}))}isSupported(t){return t["node"]instanceof nE||t["mode"]===Dx._Xt_}XFt_(t){if(!t.Lkt_()["ctrlKey"]||this.Vp_()==null||this.KXt_()||(this.lPt_()&xk.dJt_)==0||!this.isActive()&&(this.uWt_(t)||this.nXt_()))super.XFt_(t);else{const i=this.Vp_(),s=t.Fkt_(),e=lA.Ss_(i,s),A=new mA(i.getX(),i.getY(),i.getX(),i.getY()).Le_(e);this.LM_()!=null&&this.LM_().if_()!=null&&this.LM_().if_().gI_(A,A);this.push(new hx(A.Me_(),A.be_(),this.isActive()));this.start()}}};i=t([_s("geotoolkit.controls.tools.editors.Ellipse")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlTW92ZSI6IlhGdF8ifX19");var AL=Ci(function(){let i=class t extends iL{constructor(t){super(t=qi(t,{name:"ImageEditor",node:new df({alignment:dA.ne_})}));this.Ujt_();this.Yjt_=this.Ujt_.bind(this);this.PP_().on(ff.PV_,this.Yjt_)}isSupported(t){return t["node"]instanceof df||t["mode"]===Dx.Image}xkt_(t){this.PP_()!=null&&this.Yjt_!=null&&this.PP_().off(ff.PV_,this.Yjt_);super.xkt_(t);this.PP_()!=null&&this.Yjt_!=null&&this.PP_().on(ff.PV_,this.Yjt_);return this}dispose(){this.PP_().off(ff.PV_,this.Yjt_);super.dispose()}};i=t([_s("geotoolkit.controls.tools.editors.Image")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROb2RlIjoieGt0XyJ9fX0g");const nL=30,hL=100,rL=2,oL=new Gn,lL=new mA,uL=function(t,i,s,e){return Math.atan2(t*e-i*s,t*s+i*e)},aL="Node is null";function gL(t,i){return t!=null?`Node ${t.D_()} does not implement ${i} method`:aL}const cL=function(t,i){if(t.GE_()!==dA.W_){t.c_(t.UE_()+i["angle"]);return}if(!ie(t)){ki(gL(t,"getBounds"));return}const s=t.getBounds();if(s==null)return;if(!oe(t)){ki(gL(t,"get/setLocalTransform"));return}const e=t.ut_()!=null?t.ut_().clone():new Gn,A=t.getParent()?t.getParent().if_():Gn.JI_,n=e.DI_(A),h=n.nI_(s.ye_(),s.De_()),r=Gn.FI_(i["angle"],h.getX(),h.getY());t.at_(r.DI_(A.rI_()).vI_(n))};HF.Ai_().register(cN,kF.fJt_,cL);const IL=function(t,i){i&&(t=t.replaceAll(' style=""',""));return t=(t=(t=(t=t.replaceAll("&quot;","'")).replaceAll("<br>","<br/>")).replaceAll("<span","<font").replaceAll("</span>","</font>")).replaceAll("<div","<p").replaceAll("</div>","</p>")};var fL=Ci(function(){let i=class t extends yx{constructor(t){let i=null;t!=null&&t["node"]!=null||(i=new cN({fillstyle:"white",textstyle:{baseline:ka.mk_}}).OG_(!1));super(t=qi(t,{name:"TextEditor",node:i,preview:new Yu({linestyle:{pixelsnapmode:!0,pattern:[5,5]}})}))}GXt_(){super.GXt_();const t=this.PP_(),i=this.qat_();if(t instanceof cN&&i instanceof cN){t.setSize(i.Ie_(),i.Ts_());this.gR_(t,i.lR_())}return this}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.ojt_=null;this.ljt_=t["preview"]instanceof Yu?t["preview"]:new Yu(t["preview"]);this.ujt_=this.ajt_.bind(this);this.bf_=new mA;this.iXt_().xY_(0,this.ljt_)}}isSupported(t){return t["node"]instanceof cN||t["mode"]===Dx.Vpt_}zFt_(t){super.zFt_(t);this.ojt_=t.getPlot()!=null?t.getPlot().r3_():null;this.GBt_=this.bFt_(this.LM_(),t);const i=this.getBounds();if(i!=null&&!i.contains(this.GBt_)&&this.Hzt_()==null){this.gjt_(!1);this.stop();if(!this.KXt_()){t.stopPropagation(!0,!0);this.end(t)}}}XFt_(t){const i=this.Tjt_();if(this.uWt_(t)||this.KXt_()||t.Lkt_()["buttons"]===Ts.W_||this.Hzt_()!=null)super.XFt_(t);else if(i.parentNode!=null){this.gjt_(!1);t.stopPropagation(!0,!0);this.end(t)}else if((this.lPt_()&xk.dJt_)!=0&&this.GBt_!=null){this.push(new hx(this.GBt_,this.bFt_(this.mgt_(),t),this.isActive()));t.stopPropagation(!0,!0);this.start()}}Ct_(t){this.ojt_=t.getPlot()!=null?t.getPlot().r3_():null;let i;if(this.uWt_(t))if(this.KXt_()){t.stopPropagation(!0,!0);let i=t.Fkt_();const s=this.getBounds();i=this.if_().hI_(i.getX(),i.getY());this.gjt_(s!=null&&s.contains(i))}else(this.lPt_()&xk.CJt_)==0||this.nXt_()||this.Ijt_(t);else if(this.KXt_());else{if(!OS.Tkt_(t)&&this.nXt_()){t.stopPropagation(!0,!0);this.end(t);return}if(this.nXt_()&&(i=this.PP_())instanceof cN){t.stopPropagation(!0,!0);this.push(new Rx("text",i.SG_()).rzt_(!1));this.gjt_(!0)}}super.Ct_(t);this.Kjt_!=null&&this.Kjt_.parentNode!=null&&this.start()}IPt_(t){const i=this.Tjt_();if(t.Lkt_()["keyCode"]!==Ys.U_)super.IPt_(t);else if(i.parentNode!=null){t.stopPropagation(!0,!0);this.gjt_(!1);this.stop();this.KXt_()||this.end(t)}else{t.stopPropagation(!0,!0);this.end(t)}}apply(t){let i=this.$O_();if(!(i instanceof cN))return this;switch(t.Dkt_()){case Lk.gf_:if(!tx(t))return this;if(t.dn_()==="text"){this.PP_().a_(t.getValue());return this}return super.apply(t);case Lk.Mk_:if(this.PP_().getParent()==null&&this.mgt_()!=null){i=this.PP_();const t=this.mgt_().FY_(this.iXt_());t<0?this.mgt_().GY_(i):this.mgt_().xY_(t,i)}case Lk.vJt_:if(!$F(t))break;const s=t.OA_(),e=t.WA_();this.bf_.ce_(s.getX(),s.getY(),e.getX(),e.getY());this.update();break;case Lk.BC_:if(!zF(t))break;const A=t.EI_(),n=t.pI_();this.bf_.translate(A,n);this.update();break;case Lk.C3_:if(!jF(t))break;let h=t.jWt_();if(h==null){const s=t.XWt_(),e=this.UXt_(s[0]).clone(),A=this.UXt_(s[1]);h=Gn.multiply(e,A,e);if(h.BI_()<0||h.sI_()<0){const t=Gn.xI_(this.bf_,this.bf_,h.BI_()<0,h.sI_()<0);h.DI_(t);t.DI_(this.ut_());i.at_(t)}}if(h!=null&&h.isIdentity()!==!0){this.bf_=h.rn_(this.bf_);this.update()}break;default:super.apply(t)}this.gjt_(!1);return this}getBounds(){return this.nXt_()?this.bf_:null}dwt_(){let t=this.getBounds();const i=this.PP_();if(i instanceof cN&&i.uG_()!=null){const s=i.getParent()&&i.getParent().if_()||Gn.JI_,e=s!=null?s.rn_(t):t,A=i.uG_().compile(e),n=s==null?A.we_():bn.$c_(A.we_(),0,s),h=s==null?A.Qe_():bn.$c_(A.Qe_(),0,s),r=s==null?A.Ee_():bn.$c_(A.Ee_(),0,s),o=s==null?A.pe_():bn.$c_(A.pe_(),0,s);t=t.clone().setX(t.getX()+n).setY(t.getY()+r).de_(t.Ie_()-n-h).Be_(t.Ts_()-r-o)}return t}WXt_(t){this.gjt_(!1);const i=this.PP_();i instanceof cN&&i.a_("");this.bf_.de_(0);return super.WXt_(t)}end(t){this.gjt_(!1);return super.end(t)}xkt_(t){t instanceof cN&&(this.bf_=t.getBounds().clone());return super.xkt_(t)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["preview"]instanceof Yu?this.ljt_=t["preview"]:this.ljt_.dt_(t["preview"]);return this}N_(){const t=super.N_();t["preview"]=this.ljt_.N_();return t}Tjt_(){if(!this.Kjt_){const t=xs("div");t.className="geotoolkit-inlineeditor";t.style.position="absolute";t.style.padding="0px";t.style.resize="none";t.style.overflowY="hidden";t.style.overflowX="hidden";t.style.border="0px solid transparent !important";t.style.fontFamily="sans-serif";t.style.fontSize="small";t.style.lineHeight="normal";t.style.boxShadow="none";t.style.borderWidth="0px";t.style.borderColor="transparent";t.style.borderStyle="none";t.style.outline="0px";t.contentEditable=!0;t.addEventListener("input",this.ujt_);this.Kjt_=t}return this.Kjt_}gjt_(t){if(!this.ojt_||!this.Kjt_)return this;const i=this.PP_();if(t&&this.Kjt_.parentNode==null&&i instanceof cN){this.Kjt_.innerHTML=i.SG_();this.ojt_.parentNode.insertBefore(this.Kjt_,this.ojt_.nextSibling);this.update();this.Kjt_.focus()}else t||this.Kjt_.parentNode==null||this.ojt_.parentNode.removeChild(this.Kjt_);this.PP_().nf_(!t);return this}Ngt_(){const t=this.$O_();t instanceof cN&&(this.bf_=t.getBounds().clone());return super.Ngt_()}update(){this.djt_();const t=this.getBounds(),i=this.PP_(),s=this.$O_();if(this.ojt_!=null&&this.Kjt_!=null&&t!=null&&i instanceof cN&&s instanceof cN){const s=i.SG_();s||i.a_("|");const e=this.Bjt_(),A=i.if_()||Gn.JI_,n=A.nI_(t.ye_(),t.De_()),h=e.rn_(t),r=h.Ie_(),o=h.Ts_(),l=this.ojt_.getBoundingClientRect();if(this.ojt_.parentElement.style.position==="relative"){this.Kjt_.style.position="absolute";const t=this.ojt_.parentElement.getBoundingClientRect(),i=l["left"]-t["left"],s=l["top"]-t["top"];this.Kjt_.style.left=i+(n.x-r/2)+"px";this.Kjt_.style.top=s+(n.y-o/2)+"px";this.Kjt_.style.width=r+rL+"px";this.Kjt_.style.height=o+"px"}else{this.Kjt_.style.position="relative";this.Kjt_.style.left=n.x-r/2+"px";this.Kjt_.style.top=n.y+o/2-l["height"]+"px";this.Kjt_.style.width=r+rL+"px";this.Kjt_.style.height=o+"px";this.Kjt_.style.marginTop=-o+"px"}this.Kjt_.style.transform="rotate("+Gn.HI_(A)+"rad)";const u=i.FE_()||new qa;this.Kjt_.style.font=u.Zy_();this.Kjt_.style.color=u.getColor();this.Kjt_.style.lineHeight=u.Wy_().toString();this.Kjt_.style.textAlign=u.vF_();this.Kjt_.style.textAlignLast="auto";this.Kjt_.setAttribute("spellcheck","false");this.Kjt_.style.lineHeight=1;this.Kjt_.style.whiteSpace="normal";const a=i.ct_();a!=null&&(this.Kjt_.style.backgroundColor=nA.cs_(a.getColor()).ys_(!0));const g=i.gt_();if(g!=null){this.Kjt_.style.borderColor=g.hB_().Es_();this.Kjt_.style.borderStyle="solid";this.Kjt_.style.borderWidth=g.Ie_()+"px"}let c=i.uG_();if(c!=null){c=c.compile();this.Kjt_.style.paddingLeft=c.we_()+"px";this.Kjt_.style.paddingTop=c.Ee_()+"px";this.Kjt_.style.paddingRight=c.Qe_()+"px";this.Kjt_.style.paddingBottom=c.pe_()+"px"}i.a_(s);this.wjt_(t.getX(),t.getY(),t.Qe_(),t.pe_())}return super.update()}ajt_(){const t=IL(this.Tjt_().innerHTML,!0);this.push(new Rx("text",t))}wjt_(t,i,s,e){this.ljt_.clear();if(t!==s&&i!==e&&this.nXt_()&&!this.KXt_()){const A=[t,s,s,t],n=[i,i,e,e],h=this.ut_();h.vI_(WF.KWt_(this.PP_().getParent(),this.mgt_(),oL));h.NI_(A,n,A.length);this.ljt_.moveTo(A[0],n[0]).lineTo(A[1],n[1]).moveTo(A[0],n[0]).lineTo(A[3],n[3]).moveTo(A[1],n[1]).lineTo(A[2],n[2]).moveTo(A[3],n[3]).lineTo(A[2],n[2])}this.ljt_.td_()}dispose(){this.gjt_(!1);if(this.Kjt_){this.Kjt_.removeEventListener("input",this.ujt_);this.Kjt_=null}this.ljt_.dispose();this.ljt_=null;super.dispose()}$C_(){if(this.PP_()==null||(this.Kjt_==null||this.Kjt_.parentNode==null)&&!this.PP_().$C_())return!1;let t=this.PP_().getParent();while(t!=null){if(!t.$C_())return!1;t=t.getParent()}return!0}djt_(){const t=this.$O_();if(!(t instanceof cN))return;const i=t.getParent()||this.mgt_(),s=i&&i.if_()||Gn.JI_,e=t.GE_();if(e===dA.W_)t.ht_(this.bf_);else{const i=Ca.VG_(this.bf_,e);this.gR_(t,i);if(t.WG_()){const i=s.rn_(this.bf_);t.setSize(i.Ie_(),i.Ts_())}else t.setSize(this.bf_.Ie_(),this.bf_.Ts_())}}gR_(t,i,s){t instanceof cN&&t.gR_(i,s);return this}Bjt_(){const t=this.if_(),i=Math.atan2(t.QI_(),t.BI_()),s=this.getBounds(),e=s.ye_(),A=s.De_(),n=t.nI_(e,A);return i?Gn.FI_(-i,n.getX(),n.getY()).vI_(t):t}Ijt_(t){const i=this.PP_();if(!(i instanceof cN))return;const s=t.Fkt_(),e=new mA(s.getX(),s.getY(),s.getX()+hL,s.getY()+nL);this.mgt_()!=null&&this.mgt_().if_()!=null&&this.mgt_().if_().gI_(e,e);const A=Ca.VG_(e,i.GE_());e.translate(e.getX()-A.getX(),e.getY()-A.getY());this.push(new hx(e.Me_(),e.be_()));this.push(new Rx("text","").rzt_(!1));this.gjt_(!0)}xXt_(t,i,s,e,A){const n=this.if_(),h=s.getParent()&&s.getParent().if_()||Gn.JI_,r=h.transformPoint(t,t),o=h.transformPoint(i,i),l=n.rn_(A,lL),u=s.GE_()===dA.W_?l.getCenter():n.nI_(s.uR_(),s.aR_()),a=u.getX()-o.getX(),g=u.getY()-o.getY(),c=u.getX()-r.getX(),I=u.getY()-r.getY();return new ox(uL(a,g,c,I)).xkt_(s)}LXt_(t,i,s,e,A,n){let h=new lA(0,0);const r=e.sd_(),o=function(t,i){let s=h.clone();h=r.aI_(h.vs_(0,0),h);s=r.aI_(s.vs_(t,i),s);return{x:s.getX()-h.getX(),y:s.getY()-h.getY()}};let l=i.x-s.x,u=i.y-s.y;const a=o(l,u);l=a.x;u=a.y;const g=[-1,-1,-1,0,1,1,1,0],c=[-1,0,1,1,1,0,-1,-1];A=e.sd_()||new Gn;const I=g[t-1],f=c[t-1];i=A.aI_(i,i);s=A.aI_(s,s);let C=n.clone();if(I!==0){if(I<0){l*=-1;C.setX(C.getX()-l)}C.de_(C.Ie_()+l)}if(f!==0){if(f<0){u*=-1;C.setY(C.getY()-u)}C.Be_(C.Ts_()+u)}const d=e.if_(),B=bn.jc_(C.Ie_(),0,d),w=bn.jc_(0,C.Ts_(),d);if(C.Ie_()<0||B<1||NA.equals(B,1)||C.Ts_()<0||w<1||NA.equals(w,1))return null;const Q=function(t,i){const s=i.getCenter();s.vs_(s.getX()-i.we_(),s.getY()-i.Ee_());const e=t.GE_();OC.jj_(e)&&s.setX(0);OC.Zj_(e)&&s.setX(i.Ie_());OC.zj_(e)&&s.setY(0);OC.Xj_(e)&&s.setY(i.Ts_());return s},E=function(t,i,s,e,A){A.ce_(i.x-s/2,i.y-e/2,i.x+s/2,i.y+e/2);const n=t.GE_();OC.jj_(n)&&A.setX(i.x);OC.zj_(n)&&A.setY(i.y);OC.Xj_(n)&&A.setY(i.y-e);OC.Zj_(n)&&A.setX(i.x-s);return A},p=undefined;C=function(t,i){const s=i.Ie_(),A=i.Ts_(),n=e.if_();let h=Q(t,i);h==null?h=i.getCenter():h.vs_(h.x+i.we_(),h.y+i.Ee_());let r=n.transformPoint(h);const o=undefined;r=t.getParent().if_().aI_(r,r);const l=undefined;r=((t.getParent()?t.getParent().sd_():Gn.JI_)||Gn.JI_).aI_(r,r);return i=E(t,r,s,A,i)}(e,C);return new lx([{vx:I*A.BI_(),vy:I*A.QI_(),delta:I*(i.getX()-s.getX())/n.Ie_()},{vx:f*A.wI_(),vy:f*A.sI_(),delta:f*(i.getY()-s.getY())/n.Ts_()}],Gn.xI_(this.getBounds(),C)).xkt_(e)}ut_(){const t=this.$O_();return t&&oe(t)&&t.sd_()||new Gn}};i=t([_s("geotoolkit.controls.tools.editors.Label")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsIm9uTW91c2VEb3duIjoiekZ0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsIm9uTW91c2VVcCI6IkN0XyIsIm9uS2V5RG93biI6IklQdF8iLCJnZXRUZXh0Qm91bmRzIjoiZHd0XyIsInJlc2V0Tm9kZSI6IldYdF8iLCJzZXROb2RlIjoieGt0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRUZXh0QXJlYVZpc2libGUiOiJnanRfIiwidXBkYXRlSGFuZGxlcyI6Ik5ndF8iLCJnZXRWaXNpYmxlIjoiJENfIiwidXBkYXRlVGV4dFNoYXBlIjoiZGp0XyIsInNldEFuY2hvciI6ImdSXyIsImNyZWF0ZVRleHRPbkNsaWNrIjoiSWp0XyIsImdldExvY2FsVHJhbnNmb3JtIjoidXRfIn19fSAg");var CL=Ci(function(){let i=class t extends yx{constructor(t){super(t=qi(t,{name:"PencilEditor",node:new Yu({linestyle:{width:2,pixelsnapmode:!0}})}))}isSupported(t){if(t["mode"]===Dx.ijt_)return!0;if(t["node"]instanceof Yu){const i=t["node"].nt_().getTags();for(let t=0;t<i.length;t++)if(i[t]!==LA.jA_&&(i[t]!==LA.ZA_||t!==0))return!1;return t["node"].Id_("type")==null||t["node"].Id_("type")==="pencil"}return!1}zFt_(t){super.zFt_(t);const i=this.PP_();if(this.Hzt_()==null&&i instanceof Yu&&i.nt_().getLength()===0){const i=t.Fkt_();this.push(new Px([i.getX()],[i.getY()]));t.stopPropagation(!0,!0);this.start();this.Ozt_(t)}}XFt_(t){if(this.Hzt_()==null&&this.isActive()&&!this.KXt_()){const i=t.Fkt_();this.push(new Px(i.getX(),i.getY()));this.Ozt_(t)}else super.XFt_(t)}Ct_(t){const i=this.Hzt_()==null&&this.isActive();super.Ct_(t);if(i){t.stopPropagation(!0,!0);this.end(t)}}WXt_(t){const i=this.PP_();i instanceof Yu&&i.clear().td_();return super.WXt_(t)}apply(t){let i;const s=this.PP_();if(!(s instanceof Yu))return this;switch(t.Dkt_()){case Lk.vJt_:if(!ex(t))return this;i=this.if_().hI_(t.getX()[0],t.getY()[0]);this.lineTo(s,i.getX(),i.getY());s.td_();return this;case Lk.Mk_:if(!s.getParent()&&this.mgt_()!=null){const t=this.mgt_().FY_(this.iXt_());t<0?this.mgt_().GY_(s):this.mgt_().xY_(t,s)}if(!ex(t))return this;const e=t.getX(),A=t.getY(),n=this.if_();s.setProperty("type","pencil").clear();if(e.length>0){i=n.hI_(e[0],A[0]);this.moveTo(s,i.getX(),i.getY())}for(let t=1;t<e.length;t++){i=n.hI_(e[t],A[t]);this.lineTo(s,i.getX(),i.getY())}s.td_();return this}return super.apply(t)}moveTo(t,i,s){t.moveTo(i,s);return this}lineTo(t,i,s){t.lineTo(i,s);return this}dt_(t){super.dt_(t);const i=this.PP_();i instanceof Yu&&i.iQ_(null);return this}};i=t([_s("geotoolkit.controls.tools.editors.Pencil")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJyZXNldE5vZGUiOiJXWHRfIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");const dL=new lA,BL=new Gn,wL=new ma({painter:cE,alignment:dA.ne_,fillstyle:"#a9a9a9",linestyle:"black",sizeisindevicespace:!0,width:7,height:7});var QL=Ci(function(){let i=class t extends yx{constructor(t){super(t=qi(t,{name:"PolygonEditor",node:new oE({linestyle:{width:2,pixelsnapmode:!0},fillstyle:"white"}),preview:{linestyle:{color:"red",width:1.5,pattern:[7,3]}},mouseradius:5}))}GXt_(){super.GXt_();const t=this.PP_(),i=this.qat_();if(Qe(t)&&Qe(i)){const s=i.Bt_().slice(),e=i.wt_().slice();this.Qt_(t,s,e)}return this}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this.ljt_=t["preview"]instanceof Yu?t["preview"]:new Yu(t["preview"]);this.Hjt_=wL.clone();this.qjt_=wL.clone().qC_("preview");this.Jjt_=wL.clone();this.Pjt_=[];this.Vjt_=new sI;this.zgt_=null;this.iXt_().GY_([this.ljt_,this.Vjt_])}}isSupported(t){return t["node"]instanceof oE||t["mode"]===Dx.XXt_}IPt_(t){if(!this.nXt_()||this.Df_())return;super.IPt_(t);const i=t.Lkt_();if(i!=null)switch(i["keyCode"]){case Ys.x_:case Ys.q_:t.stopPropagation(!0,!0);const i=this.vgt_();i!=null&&this.Ojt_(i);break;case Ys.L_:this.lPt_()===xk.EJt_&&this.jPt_(xk.mJt_);break;case Ys.U_:if((this.lPt_()&xk.CJt_)!=0){this.zgt_=null;this.lPt_()===xk.yJt_?this.end(t):this.jPt_(xk.mJt_);t.stopPropagation(!0,!0)}else if((this.lPt_()&xk.mJt_)!=0){this.jPt_(xk.EJt_);t.stopPropagation(!0,!0)}break}}WFt_(t){super.WFt_(t);this.lPt_()===xk.EJt_&&this.jPt_(xk.mJt_)}zFt_(t){this.zgt_=this.hjt_(t);const i=this.hjt_(t);this.Mgt_(i);super.zFt_(t);if(this.zgt_!=null){t.stopPropagation(!1,!0);this.Xzt_()&&!this.xat_()&&this.jzt_()}else if(this.Hzt_()<=0&&!t.Lkt_()["ctrlKey"]){const i=this.intersect(t);if(i!==null){this.zgt_=i.index;this.push(new Vx(new lA(i.x,i.y),this.zgt_,!0).setOptions(i));t.stopPropagation(!1,!0);this.iXt_().removeChild(this.qjt_);this.Vjt_.HY_(this.zgt_).Bd_("hover");this.start()}}}XFt_(t){if(this.zgt_==null||!this.isActive()&&this.uWt_(t)){super.XFt_(t);this.hXt_()&&this.Ozt_(t);this.zgt_!=null&&t.stopPropagation(!0,!0)}else{const i=this.$O_(),s=WF.HWt_(i,this.mgt_(),BL),e=this.Wjt_().HY_(this.zgt_);if(!(e instanceof Ca))return;const A=s.hI_(e.uR_(),e.aR_()),n=this.bFt_(this.LM_(),t);this.push(new Mx(n.getX()-A.getX(),n.getY()-A.getY(),this.zgt_));t.stopPropagation(!0,!0);this.start();this.Kzt_(t);this.Ozt_(t)}this.wjt_(OS.Tkt_(t)?t:null)}hXt_(){return this._zt_()&&this.getSize()>0}KPt_(t){return super.KPt_(t)||this.zgt_!=null}Ct_(t){if(this.kFt_(t.Fkt_())){if(this.zjt_(this.zgt_)&&this.nXt_()&&(this.lPt_()&xk.CJt_)!=0){if(this.lPt_()===xk.yJt_)this.end(t);else{this.stop();this.jPt_(xk.mJt_)}return}if(this.lPt_()===xk.EJt_){this.zgt_=null;this.Wzt_(t);this.jPt_(xk.mJt_);return}}let i=!1;if(this.isActive())t.stopPropagation(!0,!0);else if(this.uWt_(t)&&OS.Tkt_(t)&&(this.lPt_()&xk.CJt_)!=0)if(this.nXt_()&&(this.zjt_(this.zgt_)||t.Lkt_()["button"]===Ks.X_)){t.stopPropagation(!0,!0);this.zgt_=null;i=!0}else if(this.zgt_==null&&this.Hzt_()<=0){const i=this.bFt_(this.LM_(),t);this.push(new Vx(i,this.getSize()));this.wjt_()}const s=this.hjt_(t);this.Mgt_(s);super.Ct_(t);this.zgt_=null;i&&(this.lPt_()===xk.yJt_?this.end(t):this.jPt_(xk.mJt_))}Okt_(t){this.wjt_();this.iXt_().removeChild(this.qjt_)}vPt_(t){super.vPt_(t);t.Dkt_()===Lk.Mk_&&this.PP_()&&this.Zzt_()&&this.PP_().nf_(!0)}apply(t){let i,s=this.Bt_(),e=this.wt_();const A=this.$O_();if(!Qe(A))return super.apply(t);switch(t.Dkt_()){case Lk.Mk_:if(!this.PP_().getParent()&&this.mgt_()!=null){i=this.mgt_().FY_(this.iXt_());i<0?this.mgt_().GY_(this.PP_()):this.mgt_().xY_(i,this.PP_())}case Lk.vJt_:case Lk.NJt_:if(!Ax(t))break;i=t.getIndex();s.splice(i,0,t.getX());e.splice(i,0,t.getY());break;case Lk.bJt_:if(!XF(t))break;i=t.getIndex();s[i]+=t.EI_();e[i]+=t.pI_();break;case Lk.SJt_:if(!Ax(t))break;i=t.getIndex();i===this.vgt_()&&this.Mgt_(null);s.splice(i,1);e.splice(i,1);break;case Lk.GJt_:s=s.reverse();e=e.reverse();break;default:return super.apply(t)}this.Qt_(A,s,e);return this.update()}Qt_(t,i,s){Qe(t)&&t.Qt_(i,s);return this}update(){const t=this.$O_();if(t==null)return super.update();if(t.getParent()==null){this.Vjt_.removeChild(this.Pjt_);return super.update()}let i;const s=WF.HWt_(t,this.mgt_(),BL),e=this.Bt_(),A=this.wt_(),n=[];if(e.length>0){i=s.nI_(e[0],A[0]);this.Hjt_.gR_(i);n.push(this.Hjt_);for(let t=1;t<e.length-1;t++){let h=this.Pjt_[t];h&&h!==this.Jjt_||(h=wL.clone().gR_(this.qjt_.lR_()));i=s.nI_(e[t],A[t]);h.gR_(i);n.push(h)}if(e.length>1){i=s.nI_(e[e.length-1],A[A.length-1]);this.Jjt_.gR_(i);n.push(this.Jjt_)}}if(this.Pjt_.length!==n.length||n.some((t=>t.getParent()!==this.Vjt_))){this.Vjt_.removeChild(this.Pjt_);this.Vjt_.GY_(n);this.Pjt_=n}this.Vjt_.nf_(this.$C_()&&((this.lPt_()&xk.BJt_)!=0||(this.lPt_()&xk.QJt_)!=0));this.wjt_();return super.update()}push(t){super.push(t);t instanceof Mx||t instanceof Vx&&t.Djt_()?this.DXt_().nf_(!1):(t instanceof ox||t instanceof lx)&&this.Vjt_.nf_(!this.isActive());return this}WXt_(t){const i=this.PP_();Qe(i)&&this.Qt_(i,[],[]);this.iXt_().removeChild(this.qjt_);return super.WXt_(t)}jPt_(t){if(this.lPt_()===t)return this;this.ljt_!=null&&this.ljt_.Df_()!==!0&&this.ljt_.clear().td_();this.Mgt_(null);return super.jPt_(t)}getBounds(){return this.getSize()>1?super.getBounds():null}Kzt_(t,i){i==null&&(this.zgt_!=null||this.hjt_(t)!=null?i="crosshair":this.qjt_.getParent()!=null&&(i="copy"));super.Kzt_(t,i)}Hzt_(t){return this.zgt_!=null?null:super.Hzt_(t)}NXt_(t){this.Hjt_.dt_(t["begin"]);this.qjt_.dt_(t["middle"]);this.Jjt_.dt_(t["end"]);this.Pjt_.forEach((i=>{i!==this.Hjt_&&i!==this.Jjt_&&i.dt_(t["middle"])}));return this}vgt_(){return this.wgt_}Mgt_(t){if(this.wgt_===t)return this;const i=this.wgt_!=null?this.Vjt_.HY_(this.wgt_):null;i!=null&&i.Qd_("active");this.wgt_=t;const s=this.wgt_!=null?this.Vjt_.HY_(this.wgt_):null;s!=null&&s.Bd_("active");return this}hjt_(t){if(t==null)return this.zgt_;if((this.lPt_()&xk.BJt_)==0||!OS.Tkt_(t)||t.Lkt_()["ctrlKey"])return null;const i=t.Fkt_(),s=this.dFt_(t)?this.sFt_:this.iFt_,e=bC.select(t.PP_(),i.getX(),i.getY(),s);for(let t=this.Vjt_.qY_()-1;t>=0;t--)if(e.indexOf(this.Vjt_.HY_(t))>=0)return t;return null}wjt_(t){const i=this.getSize();this.ljt_.clear();if(i>0&&t!=null&&!this.isActive()&&this.hjt_(t)==null&&this.Hzt_(t)<=0){const s=this.$O_(),e=WF.HWt_(s,this.mgt_(),BL),A=t.Lkt_()["ctrlKey"]?null:this.intersect(t);if(A!=null){const t=e.nI_(A.x,A.y);this.qjt_.gR_(t);this.iXt_().GY_(this.qjt_)}else{this.iXt_().removeChild(this.qjt_);if((this.lPt_()&xk.CJt_)!=0){const s=this.Bt_(),A=this.wt_(),n=e.nI_(s[0],A[0]),h=this.bFt_(this.mgt_(),t);this.ljt_.moveTo(n.getX(),n.getY()).lineTo(h.getX(),h.getY());if(i>1){const t=e.nI_(s[i-1],A[i-1]);this.ljt_.moveTo(t.getX(),t.getY()).lineTo(h.getX(),h.getY())}}}}else this.iXt_().removeChild(this.qjt_);this.ljt_.td_()}intersect(t){if(this.getSize()<2||(this.lPt_()&xk.wJt_)==0)return null;const i=t.Fkt_(),s=this.dFt_(t)?this.sFt_:this.iFt_,e=this.if_(),A=this.Bt_(),n=this.wt_();let h=A.length-1,r=e.nI_(A[h],n[h]);for(let t=0;t<A.length;h=t++){const o=r.getX(),l=r.getY();r=e.nI_(A[t],n[t]);const u=i.Ns_(o,l,r.getX(),r.getY(),dL);if(u.bs_(i,s)){e.aI_(u,u);return{x:u.getX(),y:u.getY(),index:h+1}}}return null}getSize(){const t=this.PP_();return we(t)?t.getSize():0}Bt_(){const t=this.$O_();return Qe(t)?t.Bt_().slice():[]}wt_(){const t=this.$O_();return Qe(t)?t.wt_().slice():[]}Wjt_(){return this.Vjt_}Xjt_(){return this.ljt_}jjt_(){return this.qjt_}Zjt_(){return this.Pjt_}zjt_(t){return t===0||t===this.getSize()-1}Ojt_(t){if(t==null||(this.lPt_()&xk.QJt_)==0)return this;const i=this.$O_();if(Qe(i)){this.wgt_===t&&this.Mgt_(null);const s=i.getPoint(t);s!=null&&this.push(new Ox(s,t))}return this}split(t){const i=this.PP_();if(i==null)return null;const s=i.N_();let e=s["x"],A=s["y"];if(t!=null){e=e.slice();A=A.slice();if(t===0||t===e.length-1){e.splice(t,1);A.splice(t,1)}else{const i=e[0],s=A[0],n=e[e.length-1],h=A[A.length-1];if(!NA.equals(i,n)||!NA.equals(s,h)){e.push(i);A.push(s)}e=e.slice(t+1).concat(e.slice(0,t));A=A.slice(t+1).concat(A.slice(0,t))}}s["x"]=e;s["y"]=A;const n=(new ap).dt_(s);this.push(new _x(i,n));return n}dt_(t){if(t==null)return this;this.ljt_.dt_(t["preview"]);const i=t["handles"];if(i!=null){i["begin"]!=null&&this.Hjt_!=null&&this.Hjt_.dt_(i["begin"]);i["middle"]!=null&&this.qjt_!=null&&this.qjt_.dt_(i["middle"]);i["end"]!=null&&this.Jjt_!=null&&this.Jjt_.dt_(i["end"])}return super.dt_(t)}N_(){let t=super.N_();t["preview"]=this.ljt_.N_();t=Pi(t,{handles:{begin:this.Hjt_.N_(),middle:this.qjt_.N_(),end:this.Jjt_.N_()}});return t}};i=t([_s("geotoolkit.controls.tools.editors.Polygon")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsIm9uS2V5RG93biI6IklQdF8iLCJvbkRvdWJsZUNsaWNrIjoiV0Z0XyIsIm9uTW91c2VEb3duIjoiekZ0XyIsIm9uTW91c2VNb3ZlIjoiWEZ0XyIsIm9uTW91c2VVcCI6IkN0XyIsIm9uTGVhdmUiOiJPa3RfIiwib25Db21tYW5kQXBwbGllZCI6InZQdF8iLCJzZXRDb29yZGluYXRlcyI6IlF0XyIsInJlc2V0Tm9kZSI6IldYdF8iLCJzZXRFZGl0TW9kZSI6ImpQdF8iLCJ1cGRhdGVCcm93c2VyQ3Vyc29yIjoiS3p0XyIsImdldEJib3hIYW5kbGUiOiJIenRfIiwiZ2V0QWN0aXZlSGFuZGxlIjoidmd0XyIsInNldEFjdGl2ZUhhbmRsZSI6Ik1ndF8iLCJkZWxldGVQb2ludEF0IjoiT2p0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8ifX19");const EL=new ic({format:"###,###.00",locale:"no"}),pL=new iv({selectable:!1,arrowsize:10,padding:3,fillstyle:{color:"#00fa9a",shadow:{enable:!0,color:"rgba(0, 0, 0, 0.5)",offsetx:2,offsety:2}},textstyle:{font:"bold 11px sans-serif"}});var mL=Ci(function(){var i;let s=i=class t extends QL{constructor(t){super(t=qi(t,{format:EL}))}initialize(t){if(this.Bgt_!==!0){super.initialize(t);this._jt_=pL.clone();this._jt_.dt_(t["label"]);this.jF_=t["format"];this.$q_=null}}update(){this.$q_=this.$jt_();if(this.$q_==null)this.iXt_().removeChild(this._jt_);else{const t=this.ut_(),s=this.getSize(),e=this.Bt_(),A=this.wt_(),n=i.tZt_(this,e[s-1],A[s-1],e[0],A[0],e[1],A[1]),h=t.nI_(e[0],A[0]),r=this.format(this.$q_);this._jt_.a_(r).gR_(h).SE_(n);this.iXt_().GY_(this._jt_)}return super.update()}dt_(t){if(t==null)return this;this._jt_.dt_(t["label"]);t["format"]!=null&&(this.jF_=t["format"]);return super.dt_(t)}N_(){const t=super.N_();t["label"]=this._jt_.N_();t["format"]=this.jF_;return t}_Vt_(){return this._jt_}static tZt_(t,i,s,e,A,n,h){const r=undefined,o=[i,e,n],l=[s,A,h];t.ut_().NI_(o,l,o.length);let u=o[1]-o[0],a=l[1]-l[0];const g=o[1]-o[2],c=l[1]-l[2],I=Math.sqrt(u*u+a*a),f=Math.sqrt(g*g+c*c);u=u/I+g/f;a=a/I+c/f;const C=t.mgt_().if_().sI_()<0;if(NA.equals(u,0)&&NA.equals(a,0)){u=l[0]-l[1];a=o[1]-o[0];if(a>0!==C){u=-u;a=-a}}return u<0?a>0===C?dA.Ae_:dA.ee_:a>0===C?dA.se_:dA.ie_}$jt_(t,i){t=t||this.Bt_();i=i||this.wt_();const s=t.length;if(s<3)return null;let e=[];for(let A=0;A<s;A++)e.push(new ZA.$r_(t[A],i[A]));e=ZA.cg_.Oa_(e,ZA.oo_.lo_);return ZA.JS.Yg_(e)}iZt_(t,i){const s=this.Bt_().slice(),e=this.wt_().slice();s.push(t);e.push(i);return this.$jt_(s,e)}getArea(){return this.$q_}format(t){return this.jF_.format(t)}};s=i=t([_s("geotoolkit.controls.tools.editors.PolygonArea")],s);return s}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIn19fSAg");const yL=new Gn;var DL=Ci(function(){let i=class t extends QL{constructor(t){super(t=qi(t,{name:"PolylineEditor",node:new ap({linestyle:{width:2,pixelsnapmode:!0}})}))}isSupported(t){return t["node"]instanceof ap||t["mode"]===Dx.jXt_}wjt_(t){const i=this.getSize();this.Xjt_().clear();if(i>0&&t!=null&&!this.isActive()&&this.hjt_(t)==null&&this.Hzt_(t)<=0&&((this.lPt_()&xk.CJt_)!=0||(this.lPt_()&xk.wJt_)!=0)){const s=this.$O_(),e=WF.HWt_(s,this.mgt_(),yL),A=t.Lkt_()["ctrlKey"]?null:this.intersect(t);if(A!=null){const t=e.nI_(A.x,A.y);this.jjt_().gR_(t);this.iXt_().GY_(this.jjt_())}else{this.iXt_().removeChild(this.jjt_());if((this.lPt_()&xk.CJt_)!=0){const s=this.Bt_(),A=this.wt_(),n=e.nI_(s[i-1],A[i-1]),h=this.bFt_(this.mgt_(),t);this.Xjt_().moveTo(n.getX(),n.getY()).lineTo(h.getX(),h.getY())}}}else this.iXt_().removeChild(this.jjt_());this.Xjt_().td_()}intersect(t){const i=this.PP_();if(!Qe(i)||i.getSize()<2||(this.lPt_()&xk.wJt_)==0)return null;const s=t.Fkt_(),e=this.dFt_(t)?this.sFt_:this.iFt_,A=i.Bt_(),n=i.wt_(),h=this.PP_().if_()||Gn.JI_;let r=h.nI_(A[0],n[0]);for(let t=1;t<A.length;t++){const i=r.getX(),o=r.getY();r=h.nI_(A[t],n[t]);const l=s.Ns_(i,o,r.getX(),r.getY());if(l.bs_(s,e)){h.aI_(l,l);return{x:l.x,y:l.y,index:t}}}return null}zjt_(t){return t===this.getSize()-1}close(){const t=this.PP_();if(t==null)return null;const i=t.N_();i["x"]=i["x"].slice();i["y"]=i["y"].slice();const s=(new oE).dt_(i);this.push(new _x(t,s));return s}sZt_(t,i){if(t==null)return this;if(this.zjt_(t)!==!0&&t!==0)return this;t===0&&this.push(new Wx);this.vgt_()===t&&this.Mgt_(null);this.jPt_(xk.wJt_|xk.BJt_|xk.CJt_|xk.dJt_);if(i!=null)if(i instanceof FS)this.XFt_(i);else{const t=i,s=OS.MFt_(t,this.Tzt_()),e=new lA(s.x,s.y),A=new FS("pointermove",t,e,this.Tzt_().getRoot(),this.Tzt_());this.TPt_(A);this.Uzt_()}this.Xjt_().td_();return this}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this}};i=t([_s("geotoolkit.controls.tools.editors.Polyline")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRQb2ludEF0Ijoic1p0XyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");var ML=Ci({W_:0,Mk_:1,j_:2,End:4},2,"eyJOb25lIjoiV18iLCJTdGFydCI6Ik1rXyIsIk1pZGRsZSI6ImpfIn0g");var vL=Ci(function(){var i;let s=i=class t extends mL{constructor(t){if(t&&t["directionMode"]!==void 0){ki("geotoolkit.controls.tools.editors.PolylineDistance parameter options.directionMode deprecated since 4.0. "+"Use parameter options.directionmode instead");t["directionmode"]=t["directionMode"]}if(t&&t["directionSymbol"]!==void 0){ki("geotoolkit.controls.tools.editors.PolylineDistance parameter options.directionSymbol deprecated since 4.0. "+"Use parameter options.directionsymbol instead");t["directionsymbol"]=t["directionSymbol"]}super(t=qi(t,{node:new ap({linestyle:{width:2,pixelsnapmode:!0}}),directionmode:ML.W_,directionsymbol:new ma({width:12,height:21,painter:gE,alignment:dA.ne_,sizeisindevicespace:!0,selectable:!1,linestyle:"black",fillstyle:"black"})},!0));this.eZt_=t["directionsymbol"];this.AZt_=t["directionmode"]}initialize(t){if(this.Bgt_===!0)return;super.initialize(t);this._$_=[];this.aPt_=[];this.lzt_=[];this.nZt_=new sI;const i=this.iXt_().FY_(this.Wjt_());this.iXt_().xY_(i,this.nZt_)}update(){super.update();const t=this.getSize(),s=this.Bt_(),e=this.wt_(),A=this.ut_(),n=[],h=[];let r=0;const o=this.if_(),l=o.nI_(s[0],e[0]).clone();o.vI_(A.rI_());this.aPt_=[];for(let u=1;u<t;u++){r+=this.hZt_(s[u-1],e[u-1],s[u],e[u]);const t=this._$_[u-1]||this._Vt_().clone(),a=this.format(r),g=A.nI_(s[u],e[u]),c=i.GE_(this,u);t.a_(a).gR_(g).SE_(c);h.push(t);this.aPt_.push(r);const I=o.transformPoint(g,g),f=I.getX(),C=I.getY();this.rZt_(l,f,C,o,n,ML.Mk_);this.rZt_(l,f,C,o,n,ML.j_);this.rZt_(l,f,C,o,n,ML.End);l.vs_(f,C)}if(h.length!==this._$_.length){this.Wjt_().removeChild(this._$_);this.Wjt_().GY_(h);this._$_=h}if(n.length!==this.lzt_.length){this.nZt_.removeChild(this.lzt_);this.nZt_.GY_(n);this.lzt_=n}return this}$jt_(t,i){return null}dt_(t){if((t=Es(t))==null)return this;for(let i=0;i<this._$_.length;i++)this._$_[i].dt_(t["label"]);if(t&&t["directionMode"]!==void 0){ki("geotoolkit.controls.tools.editors.PolylineDistance parameter options.directionMode deprecated since 4.0. "+"Use parameter options.directionmode instead");t["directionmode"]=t["directionMode"]}if(t&&t["directionSymbol"]!==void 0){ki("geotoolkit.controls.tools.editors.PolylineDistance parameter options.directionSymbol deprecated since 4.0. "+"Use parameter options.directionsymbol instead");t["directionsymbol"]=t["directionSymbol"]}t["directionmode"]!=null&&(this.AZt_=t["directionmode"]);t["directionsymbol"]!=null&&(t["directionsymbol"]instanceof Ca?this.eZt_=t["directionsymbol"]:this.eZt_.dt_(t["directionsymbol"]));return super.dt_(t)}N_(){const t=super.N_();t["directionMode"]=this.AZt_;t["directionSymbol"]=this.eZt_;t["directionmode"]=this.AZt_;t["directionsymbol"]=this.eZt_;return t}hZt_(t,i,s,e){const A=s-t,n=e-i;return Math.sqrt(A*A+n*n)}oZt_(t,i){if(this.getSize()<1)return null;const s=this.Bt_(),e=this.wt_(),A=this.cPt_(),n=A.length>0?A[A.length-1]:0;return this.hZt_(s[s.length-1],e[e.length-1],t,i)+n}rZt_(t,i,s,e,A,n){if((this.AZt_&n)==0)return;const h=this.lzt_[A.length]||this.eZt_.clone(),r=Math.atan2(s-t.getY(),i-t.getX())+NA.sign(e.sI_())*Math.PI/2;let o,l;switch(n){case ML.Mk_:o=t.getX();l=t.getY();h.SE_(dA.re_);break;case ML.j_:o=(t.getX()+i)/2;l=(t.getY()+s)/2;h.SE_(dA.ne_);break;case ML.End:o=i;l=s;h.SE_(dA.le_)}const u=Gn.FI_(r,o,l).vI_(e);h.gR_(u.hI_(o,l));const a=u.DI_(e.rI_());h.at_(a);A.push(h)}cPt_(){return this.aPt_.slice()}static GE_(t,i){const s=t.Bt_(),e=t.wt_();return i===0?mL.tZt_(t,s[1],e[1],s[0],e[0],s[1],e[1]):i===t.getSize()-1?mL.tZt_(t,s[i-1],e[i-1],s[i],e[i],s[i-1],e[i-1]):mL.tZt_(t,s[i-1],e[i-1],s[i],e[i],s[i+1],e[i+1])}wjt_(t){const i=this.getSize();this.Xjt_().clear();if(i>0&&t!=null&&!this.isActive()&&this.hjt_(t)==null&&this.Hzt_(t)<=0){const s=this.ut_(),e=this.intersect(t),A=this.Bt_(),n=this.wt_();if(e!=null){const t=e.index,i=undefined,h=(t>1?this.aPt_[t-2]:0)+this.hZt_(A[t-1],n[t-1],e.x,e.y),r=this.format(h),o=mL.tZt_(this,A[t-1],n[t-1],e.x,e.y,A[t],n[t]),l=s.nI_(e.x,e.y);this._Vt_().a_(r).gR_(l).SE_(o);this.jjt_().gR_(l);this.iXt_().GY_([this.jjt_(),this._Vt_()])}else{this.iXt_().removeChild([this.jjt_(),this._Vt_()]);if((this.lPt_()&xk.CJt_)!=0){const e=s.nI_(A[i-1],n[i-1]),h=this.bFt_(this.mgt_(),t);this.Xjt_().moveTo(e.getX(),e.getY()).lineTo(h.getX(),h.getY())}}}else this.iXt_().removeChild([this.jjt_(),this._Vt_()]);this.Xjt_().td_()}intersect(t){const i=this.PP_();if(!(i instanceof ap)||i.getSize()<2)return null;const s=t.Fkt_(),e=this.dFt_(t)?this.sFt_:this.iFt_,A=i.if_(),n=i.Bt_(),h=i.wt_();let r=A.nI_(n[0],h[0]);for(let t=1;t<n.length;t++){const i=r.getX(),o=r.getY();r=A.nI_(n[t],h[t]);const l=s.Ns_(i,o,r.getX(),r.getY());if(l.bs_(s,e)){A.aI_(l,l);return{x:l.x,y:l.y,index:t}}}return null}zjt_(t){return t===this.getSize()-1}lZt_(){return this._$_}};s=i=t([_s("geotoolkit.controls.tools.editors.PolylineDistance")],s);return s}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIn19fSAg");const bL=new lA,NL=new lA,SL=new lA,GL=new lA,RL=new Gn,kL=new ma({painter:cE,alignment:dA.ne_,fillstyle:"#ffe5cf",linestyle:"#ba2d32",sizeisindevicespace:!0,width:8,height:8}),FL=new Yu({selectable:!1,linestyle:"#db7c8d"}),xL=function(t,i,s){return new lA((1-s)*t.getX()+s*i.getX(),(1-s)*t.getY()+s*i.getY())};var LL=Ci(function(){var i;let s=i=class t extends QL{constructor(t){super(t=qi(t,{name:"SplineEditor",node:new Yu({linestyle:{width:2,pixelsnapmode:!0}})}))}GXt_(){super.GXt_();const t=this.PP_(),i=this.qat_();t instanceof Yu&&i instanceof Yu&&t.Pd_(i.nt_().clone());return this}initialize(t){if(this.Bgt_===!0)return;super.initialize(t);this.uZt_=[];this.aZt_=[];this.gZt_=[];this.cZt_=[];this.IZt_=[];this.fZt_=kL.clone();this.CZt_=FL.clone();this.CZt_.dt_(t["cpline"]);const i=this.iXt_().FY_(this.Wjt_());this.iXt_().xY_(i,this.CZt_)}isSupported(t){if(t["mode"]===Dx.vt_)return!0;if(t["node"]instanceof Yu){const i=t["node"].nt_().getTags();for(let t=0;t<i.length;t++)if(i[t]!==LA._A_&&(i[t]!==LA.ZA_||t!==0))return!1;return t["node"].Id_("type")==null||t["node"].Id_("type")==="spline"}return!1}xkt_(t){super.xkt_(t);if(!(t instanceof Yu))return this;const i=[],s=[],e=[],A=[],n=[],h=t.nt_(),r=h.getTags(),o=h.getX(),l=h.getY();for(let t=0;t<h.getLength();t++){const u=h.getIndex(t);i.push(this.uZt_[t]||new lA);s.push(this.aZt_[t]||new lA);e.push(this.gZt_[t]||new lA);A.push(this.cZt_[t]||this.fZt_.clone());n.push(this.IZt_[t]||this.fZt_.clone());switch(r[t]){case LA.ZA_:i[t].vs_(o[u],l[u]);break;case LA._A_:s[t-1].vs_(o[u],l[u]);e[t].vs_(o[u+1],l[u+1]);i[t].vs_(o[u+2],l[u+2]);break}}for(let t=i.length;t<this.getSize();t++){this.cZt_[t].dispose();this.IZt_[t].dispose()}this.uZt_=i;this.aZt_=s;this.gZt_=e;this.cZt_=A;this.IZt_=n;return this.update()}push(t){let i,s;if(t instanceof Vx){i=t.JV_()||{};if(t.Djt_()){i["isInsert"]=!0;s=t.getIndex();const e=this.uZt_[s-1],A=this.aZt_[s-1],n=this.gZt_[s],h=this.uZt_[s],r=xL(e,A,i.t),o=xL(A,n,i.t),l=xL(n,h,i.t),u=xL(r,o,i.t),a=xL(o,l,i.t);i["cpAfter"]=[r,u,a,l];i["cpBefore"]=[A.clone(),n.clone()]}else{const s=this.getSize();if(s>0){let e,A;if(s===1){e=[this.uZt_[0].getX(),t.getX()];A=[this.uZt_[0].getY(),t.getY()]}else{e=[this.uZt_[s-2].getX(),this.uZt_[s-1].getX(),t.getX()];A=[this.uZt_[s-2].getY(),this.uZt_[s-1].getY(),t.getY()]}const n=Ju.pS_(e,A).getPoints(),h=n["firstcontrolpointsx"],r=n["firstcontrolpointsy"],o=n["secondcontrolpointsx"],l=n["secondcontrolpointsy"];switch(s){case 1:i["cpAfter"]=[new lA(h[0],r[0]),new lA(o[0],l[0])];break;case 2:i["cpAfter"]=[new lA(h[0],r[0]),new lA(o[0],l[0]),new lA(h[1],r[1]),new lA(o[1],l[1])];i["cpBefore"]=[this.aZt_[0].clone(),this.gZt_[1].clone()];break;default:i["cpAfter"]=[new lA(o[0],l[0]),new lA(h[1],r[1]),new lA(o[1],l[1])];i["cpBefore"]=[this.gZt_[s-1].clone()];break}}}t.setOptions(i)}else if(t instanceof Ox){s=t.getIndex();if(s>this.getSize())return this;i=t.JV_()||{};i["point"]=this.uZt_[s].clone();i["cp1"]=this.aZt_[s].clone();i["cp2"]=this.gZt_[s].clone();t.setOptions(i)}super.push(t);this.CZt_.nf_(this.Wjt_().$C_());return this}apply(t){let i,s,e;const A=t.JV_()||{},n=A["cpAfter"];switch(t.Dkt_()){case Lk.NJt_:if(!Ax(t))break;e=t.getIndex();if(n!=null){i=t.getX()-A["x"];s=t.getY()-A["y"];this.aZt_[e-1].vs_(n[0]);this.gZt_[e].vs_(n[3]);this.gZt_.splice(e,0,n[1].clone().translate(i,s));this.aZt_.splice(e,0,n[2].clone().translate(i,s));this.uZt_.splice(e,0,new lA(t.getX(),t.getY()))}else if(A["point"]!=null){this.uZt_.splice(e,0,A["point"].clone());this.aZt_.splice(e,0,A["cp1"].clone());this.gZt_.splice(e,0,A["cp2"].clone())}this.cZt_.splice(e,0,this.fZt_.clone());this.IZt_.splice(e,0,this.fZt_.clone());break;case Lk.Mk_:if(!this.PP_().getParent()){e=this.mgt_().FY_(this.iXt_());e<0?this.mgt_().GY_(this.PP_()):this.mgt_().xY_(e,this.PP_())}this.PP_().setProperty("type","spline");case Lk.vJt_:if(!Ax(t))break;this.uZt_.push(new lA(t.getX(),t.getY()));this.aZt_.push(new lA);this.gZt_.push(new lA);this.cZt_.push(this.fZt_.clone());this.IZt_.push(this.fZt_.clone());if(n!=null){e=t.getIndex();n.length>3&&this.aZt_[e-2].vs_(n[n.length-4]);n.length>2&&this.gZt_[e-1].vs_(n[n.length-3]);this.aZt_[e-1].vs_(n[n.length-2]);this.gZt_[e].vs_(n[n.length-1])}break;case Lk.bJt_:if(!XF(t))break;e=t.getIndex();i=t.EI_();s=t.pI_();if(e<this.getSize()){this.uZt_[e].translate(i,s);this.aZt_[e].translate(i,s);this.gZt_[e].translate(i,s)}else e-this.getSize()<this.getSize()-1?this.aZt_[e-this.getSize()].translate(i,s):this.gZt_[e-2*this.getSize()+2].translate(i,s);break;case Lk.SJt_:if(!Ax(t))break;e=t.getIndex();this.uZt_.splice(e,1);this.aZt_.splice(e,1);this.gZt_.splice(e,1);this.cZt_.splice(e,1);this.IZt_.splice(e,1);if(A["cpBefore"]!=null){const t=A["cpBefore"];if(A["isInsert"]){this.aZt_[e-1].vs_(t[0]);this.gZt_[e].vs_(t[1])}else if(t.length===2){this.aZt_[0].vs_(t[0]);this.gZt_[1].vs_(t[1])}else this.gZt_[e-1].vs_(t[0])}break;default:super.apply(t)}return this.update()}update(){const t=this.Wjt_();if(t==null)return this;this.CZt_.clear();const i=this.$O_();if(!(i instanceof Yu))return this;t.KY_();if(i.getParent()==null){super.update();this.CZt_.nf_(!1);return this}i.clear();const s=WF.HWt_(i,this.mgt_(),RL);if(this.uZt_.length>0){i.moveTo(this.uZt_[0].getX(),this.uZt_[0].getY());for(let t=1;t<this.uZt_.length;t++){const e=this.uZt_[t-1],A=this.uZt_[t],n=this.aZt_[t-1],h=this.gZt_[t];i.bezierCurveTo(n.getX(),n.getY(),h.getX(),h.getY(),A.getX(),A.getY());let r=s.nI_(e.getX(),e.getY());this.CZt_.moveTo(r.getX(),r.getY());r=s.nI_(n.getX(),n.getY());this.CZt_.lineTo(r.getX(),r.getY());this.cZt_[t-1].gR_(r);r=s.nI_(A.getX(),A.getY());this.CZt_.moveTo(r.getX(),r.getY());r=s.nI_(h.getX(),h.getY());this.CZt_.lineTo(r.getX(),r.getY());this.IZt_[t].gR_(r)}}super.update();t.GY_(this.Zjt_()).GY_(this.cZt_).GY_(this.IZt_).removeChild([this.IZt_[0],this.cZt_[this.getSize()-1]]);this.CZt_.nf_(t.$C_());return this}WXt_(t){for(let t=0;t<this.getSize();t++){this.cZt_[t].dispose();this.IZt_[t].dispose()}this.uZt_.length=0;this.aZt_.length=0;this.gZt_.length=0;this.cZt_.length=0;this.IZt_.length=0;const i=this.PP_();i instanceof Yu&&i.at_(null);return this.update()}dt_(t){if(t==null)return this;this.CZt_.dt_(t["cpline"]);super.dt_(t);const i=this.PP_();i instanceof Yu&&i.iQ_(null);return this}N_(){let t=super.N_();t["cpline"]=this.CZt_.N_();t=Pi(t,{handles:{controlpoint:this.fZt_.N_()}});return t}NXt_(t){this.fZt_.dt_(t["controlpoint"]);this.cZt_.forEach((function(i){i.dt_(t["controlpoint"])}));this.IZt_.forEach((function(i){i.dt_(t["controlpoint"])}));return this}intersect(t){if(this.getSize()<2)return null;const s=this.if_(),e=t.Fkt_(),A=this.dFt_(t)?this.fFt_():this.aFt_(),n=new mA(e.getX()-A,e.getY()-A,e.getX()+A,e.getY()+A);for(let t=1;t<this.getSize();t++){bL.vs_(this.uZt_[t-1]);NL.vs_(this.aZt_[t-1]);SL.vs_(this.gZt_[t]);GL.vs_(this.uZt_[t]);s.transformPoint(bL,bL);s.transformPoint(NL,NL);s.transformPoint(SL,SL);s.transformPoint(GL,GL);const e=i.dZt_(n,bL,NL,SL,GL);if(e){s.aI_(e.Tgt_,e.Tgt_);return{Tgt_:e.Tgt_,index:t,t:e.t,x:e.Tgt_.x,y:e.Tgt_.y}}}return null}wjt_(t){const i=this.getSize();this.Xjt_().clear();if(i>0&&t!=null&&!this.isActive()&&this.hjt_(t)==null&&this.Hzt_(t)<=0){const s=this.intersect(t),e=this.$O_(),A=WF.HWt_(e,this.mgt_(),RL);if(s!=null){const t=A.nI_(s.x,s.y);this.jjt_().gR_(t);this.iXt_().GY_(this.jjt_())}else{this.iXt_().removeChild(this.jjt_());if((this.lPt_()&xk.CJt_)!=0){const s=this.bFt_(this.mgt_(),t);if(i===1){const t=A.nI_(this.uZt_[0].getX(),this.uZt_[0].getY());this.Xjt_().moveTo(t.getX(),t.getY()).lineTo(s.getX(),s.getY())}else{const t=this.getSize()-1;A.transformPoint(this.uZt_[t-1],bL);A.transformPoint(this.uZt_[t],NL);const i=Ju.pS_([bL.getX(),NL.getX(),s.getX()],[bL.getY(),NL.getY(),s.getY()]).getPoints(),e=i["firstcontrolpointsx"],n=i["firstcontrolpointsy"],h=i["secondcontrolpointsx"],r=i["secondcontrolpointsy"],o=A.transformPoint(this.aZt_[t-1],bL),l=A.transformPoint(this.uZt_[t-1],NL),u=A.transformPoint(this.uZt_[t],SL);this.Xjt_().moveTo(l.getX(),l.getY()).bezierCurveTo(o.getX(),o.getY(),h[0],r[0],u.getX(),u.getY()).bezierCurveTo(e[1],n[1],h[1],r[1],s.getX(),s.getY())}}}}else this.iXt_().removeChild(this.jjt_());this.Xjt_().td_()}getSize(){return this.uZt_.length}Bt_(){return this.uZt_.map((function(t){return t.getX()}))}wt_(){return this.uZt_.map((function(t){return t.getY()}))}zjt_(t){return t===this.getSize()-1}static dZt_(t,s,e,A,n){const h=Math.min(s.getX(),e.getX(),A.getX(),n.getX()),r=Math.min(s.getY(),e.getY(),A.getY(),n.getY()),o=Math.max(s.getX(),e.getX(),A.getX(),n.getX())-h,l=Math.max(s.getY(),e.getY(),A.getY(),n.getY())-r;if(!t.$s_(h,r,o,l))return null;if(t.Ie_()<o||t.Ts_()<l){const h=s.getX(),r=s.getY(),o=n.getX(),l=n.getY(),u=(h+e.getX())/2,a=(r+e.getY())/2,g=(e.getX()+(h+A.getX())/2)/2,c=(e.getY()+(r+A.getY())/2)/2,I=(A.getX()+(o+e.getX())/2)/2,f=(A.getY()+(l+e.getY())/2)/2,C=(o+A.getX())/2,d=(l+A.getY())/2,B=(g+I)/2,w=(c+f)/2,Q=i.dZt_(t,s,e.vs_(u,a),A.vs_(g,c),n.vs_(B,w));if(Q){Q.t/=2;return Q}const E=i.dZt_(t,s.vs_(B,w),e.vs_(I,f),A.vs_(C,d),n.vs_(o,l));if(E){E.t=.5+E.t/2;return E}return null}return t.contains(s)?{Tgt_:s,x:s.x,y:s.y,t:0}:t.contains(n)?{Tgt_:n,x:n.x,y:n.y,t:1}:null}};s=i=t([_s("geotoolkit.controls.tools.editors.Spline")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZXNldE5vZGVUb0dob3N0IjoiR1h0XyIsInNldE5vZGUiOiJ4a3RfIiwicmVzZXROb2RlIjoiV1h0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8ifX19");var UL=Ci(function(){let i=class t extends OS{constructor(t){let i;t instanceof _b?i=t:t!=null&&t["heatmap"]!=null&&(i=t["heatmap"]);if(!(i||t instanceof _b)){super(t);return}t=qi(t,{name:"Highlight",heatmap:i,linestyle:new hl},!0);const s={};s["fillstyle"]=t["fillstyle"];s["linestyle"]=t["linestyle"];super(t);this.BZt_=t["heatmap"];this.zz_=new dp(0,0,0,0).dt_(s);this.eFt_({pointermove:this.XFt_.bind(this),"cg-enter":t=>{this.notify(xS.Vkt_,this,t)},"cg-leave":t=>{this.notify(xS.Okt_,this,t);this.zz_.td_();this.zz_.ht_(0,0,0,0)}});this.BZt_.getParent()&&this.BZt_.getParent().GY_(this.zz_)}XFt_(t){this.BZt_.getParent()!==this.zz_.getParent()&&this.BZt_.getParent().GY_(this.zz_);if(this.BZt_.ZDt_()!==Ob.CDt_||this.BZt_._Dt_()!==Ob.CDt_)return;let i=t.Fkt_();const s=this.BZt_.rt_().we_(),e=this.BZt_.rt_().Ee_(),A=this.BZt_.sMt_()["offsetx"],n=this.BZt_.sMt_()["offsety"];i=this.BZt_.uMt_(i);if(i){this.zz_.td_();const t=i.getX(),h=i.getY();this.zz_.ht_(t+s-A,h+e-n,t+s-A+1,h+e-n+1)}}};i=t([_s("geotoolkit.controls.tools.HeatMap.Highlight")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlTW92ZSI6IlhGdF8ifX19");var YL=Ci(function(){let i=class t extends WS{constructor(t,i){super(t);this._q_=null;this._q_=i}SG_(){return this._q_}};i=t([_s("geotoolkit.controls.tools.html.EditorEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUZXh0IjoiU0dfIn19fSAg");const TL=2,KL=new Gn,HL=function(t,i){i&&(t=t.replaceAll(' style=""',""));return t=(t=(t=(t=(t=(t=t.replace(/\n/g,"<br/>")).replaceAll("&quot;","'")).replaceAll("&nbsp;"," ")).replaceAll("<br>","<br/>")).replaceAll("<span","<font").replaceAll("</span>","</font>")).replaceAll("<div","<p").replaceAll("</div>","</p>")};var qL=Ci({wZt_:"onType",QZt_:"onSubmit",EZt_:"onRollback"},2,"eyJvblR5cGUiOiJ3WnRfIiwib25TdWJtaXQiOiJRWnRfIiwib25Sb2xsYmFjayI6IkVadF8ifSAg"),JL=Ci(function(){let i=class t extends OS{constructor(t){super(t=qi(t,{plot:null,containingnode:null,name:"inline-editor"},!0));this.JP_=null;this.pZt_=null;this.E8_=null;this.ojt_=null;this.pZt_=t["containingnode"];this.setPlot(t["plot"])}dispose(){if(!this.Df_()){this.mZt_(!1);if(this.yZt_){this.yZt_.removeEventListener("input",this.DZt_);this.yZt_.removeEventListener("keydown",this.MZt_);this.yZt_.removeEventListener("focusout",this.vZt_);this.yZt_=null}if(this.bZt_!=null&&this.bZt_.parentNode!=null){try{this.bZt_.parentNode.removeChild(this.bZt_)}catch(t){}this.bZt_=null}super.dispose()}}lFt_(t){this.setPlot(t);return this}setPlot(t){if(this.E8_===t)return this;this.E8_=t;this.ojt_=this.E8_!=null?this.E8_.r3_():null;return this}getPlot(){return this.E8_}NZt_(t){if(this.pZt_===t)return this;this.pZt_=t;return this}SZt_(){return this.pZt_}start(t){t!=null&&t.stopPropagation();this.setActive(!0);this.rFt_()!=null&&OS.lock(t!=null?t.getPlot():this.E8_,this);return this}stop(){this.setActive(!1);this.rFt_()!=null&&OS.unlock(this);return this}GZt_(){if(this.bZt_!=null)return this;this.bZt_=this.RZt_();Mi.document.body.appendChild(this.bZt_);this.yZt_=this.kZt_();this.bZt_.appendChild(this.yZt_);return this}RZt_(){const t=xs("div");t.style.pointerEvents="none";t.style.position="absolute";t.style.display="none";t.style.border="0px solid transparent";t.style.backgroundColor="transparent";t.style.overflow="unset";return t}kZt_(){const t=xs("div");t.className="geotoolkit-inlineeditor";t.style.pointerEvents="auto";t.style.position="absolute";t.style.padding="0px";t.style.resize="none";t.style.overflowY="hidden";t.style.overflowX="hidden";t.style.border="0px solid transparent !important";t.style.fontFamily="sans-serif";t.style.fontSize="small";t.style.lineHeight="normal";t.style.boxShadow="none";t.style.borderWidth="0px";t.style.borderColor="transparent";t.style.borderStyle="none";t.style.outline="0px";t.contentEditable=!0;this.DZt_=()=>{const i=HL(t.innerHTML,!0);this.notify(qL.wZt_,this,new YL(null,i))};this.MZt_=t=>{t.key!=="Escape"&&t.keyCode!==27?t.ctrlKey!==!0||t.key!=="Enter"&&t.keyCode!==13||this.FZt_(!0):this.FZt_(!1)};this.vZt_=()=>{this.FZt_(!0)};t.addEventListener("input",this.DZt_);t.addEventListener("keydown",this.MZt_);t.addEventListener("focusout",this.vZt_);return t}FZt_(t){if(this.isActive()===!1)return this;const i=HL(this.yZt_.innerHTML,!0);t===!0?this.notify(qL.QZt_,this,new YL(null,i)):this.notify(qL.EZt_,this,new YL(null,i));this.mZt_(!1);this.stop();return this}mZt_(t){if(!this.ojt_||!this.bZt_)return this;if(t){this.bZt_.style.display="block";this.yZt_.style.display="block";this.yZt_.focus()}else this.bZt_.style.display="none";return this}PP_(){return this.JP_}ut_(t){return t&&oe(t)&&t.ut_()||new Gn}if_(t){let i=null;if(t&&t.getParent()){const s=t.getParent().if_()||Gn.JI_;i=Gn.multiply(s,this.ut_(t),KL)}return i||Gn.JI_}Bjt_(t,i){const s=this.if_(t),e=Math.atan2(s.QI_(),s.BI_()),A=i.ye_(),n=i.De_(),h=s.nI_(A,n);return e?Gn.FI_(-e,h.getX(),h.getY()).vI_(s):s}xZt_(t){this.LZt_(t);this.UZt_(this.yZt_,t);return this}LZt_(t){const i=Us(this.E8_.r3_());let s;if(this.pZt_!=null){const t=undefined;s=this.pZt_.if_().rn_(this.pZt_.ot_())}else s=new mA(0,0,this.E8_.Ie_(),this.E8_.Ts_());const e=i.x+s.we_(),A=i.y+s.Ee_();this.bZt_.style.left=e+"px";this.bZt_.style.top=A+"px";this.bZt_.style.width=s.Ie_()+"px";this.bZt_.style.height=s.Ts_()+"px";return this}UZt_(t,i){t.innerHTML=i["text"];const s=i["bounds"],e=i["node"],A=this.Bjt_(e,s),n=this.if_(e)||Gn.JI_,h=n.nI_(s.ye_(),s.De_()),r=A.rn_(s),o=r.Ie_(),l=r.Ts_();t.style.position="absolute";t.style.left=h.x-o/2+"px";t.style.top=h.y-l/2+"px";t.style.width=o+TL+"px";t.style.height=l+"px";t.style.transform="rotate("+Gn.HI_(n)+"rad)";const u=i["textstyle"]?qa.Wi_(i["textstyle"]):new qa;t.style.font=u.Zy_();t.style.color=u.getColor();t.style.lineHeight=u.Wy_().toString();t.style.textAlign=u.vF_();t.style.textAlignLast="auto";t.style.whiteSpace="normal";t.setAttribute("spellcheck","false");const a=i["fillstyle"]?il.BD_(i["fillstyle"]):new wr("white");a!=null&&(t.style.backgroundColor=nA.cs_(a.getColor()).ys_(!0));const g=i["linestyle"]?hl.Wi_(i["linestyle"]):new hl("black");if(g!=null){t.style.borderColor=g.hB_().Es_();t.style.borderStyle="solid";t.style.borderWidth=g.Ie_()+"px"}let c=i["padding"]?_l.Wi_(i["padding"]):null;if(c!=null){c=c.compile();t.style.paddingLeft=c.we_()+"px";t.style.paddingTop=c.Ee_()+"px";t.style.paddingRight=c.Qe_()+"px";t.style.paddingBottom=c.pe_()+"px"}return this}YZt_(t,i){this.JP_=t["node"];this.bZt_==null&&this.GZt_();this.xZt_(t);this.mZt_(!0);this.start(i);return this}};i=t([_s("geotoolkit.controls.tools.html.Editor")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROb2RlIjoiUFBfIiwiZ2V0TG9jYWxUcmFuc2Zvcm0iOiJ1dF8iLCJlZGl0IjoiWVp0XyJ9fX0g");Tk.Ai_().register(new Jx).register(new $x).register(new Sx).register(new Nx).register(new CL).register(new iL).register(new AL).register(new Ux).register(new fL).register(new sL).register(new eL).register(new QL).register(new DL).register(new LL).WJt_(new yx);var PL=Ci(function(){let i=class t extends Ok{constructor(t){super(t=Pi(t,{name:"paint",mode:Dx.XXt_,history:new Jk(t&&t["layer"])},!0));this.d4_=t["mode"]}TZt_(t){if(this.d4_===t)return this;this.d4_=t;const i=this.qw_().zJt_({mode:t,editmode:this.lPt_(),mouseradius:this.aFt_(),touchradius:this.fFt_(),layer:this.mgt_(),history:this.LPt_,ghost:Pi(this.YC_["ghost"],{})});this.APt_(i);this.UPt_().APt_(i);return this}KZt_(){return this.d4_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["mode"]!=null&&this.TZt_(t["mode"]);return this}N_(){const t=super.N_();t["mode"]=this.d4_;return t}xPt_(t){super.xPt_(t);this.d4_=Dx.sjt_;return this}clear(){const t=this.zJt_();t instanceof yx&&t.zXt_();this.UPt_().clear();return this}NPt_(t,i,s){if(s!==this.zJt_()){this.APt_(s);this.d4_=Dx.sjt_}}APt_(t){t!=null&&t.JXt_(this.mgt_());return super.APt_(t)}wPt_(t,i){this.d4_!==Dx.sjt_&&this.mgt_()!=null&&this.mgt_().removeChild(i.PP_());super.wPt_(t,i)}};i=t([_s("geotoolkit.controls.tools.Paint")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNb2RlIjoiVFp0XyIsImdldE1vZGUiOiJLWnRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsImVkaXROb2RlIjoieFB0XyIsInNldEVkaXRvciI6IkFQdF8iLCJvbk5vZGVDcmVhdGVkIjoid1B0XyJ9fX0g");var VL=Ci({HZt_:"DistanceChanged",qZt_:"AreaChanged",fgt_:"PositionChanged"},2,"eyJEaXN0YW5jZUNoYW5nZWQiOiJIWnRfIiwiQXJlYUNoYW5nZWQiOiJxWnRfIiwiUG9zaXRpb25DaGFuZ2VkIjoiZmd0XyJ9");const OL={painter:new aE([.2,1]),width:10,height:10,fillstyle:"white",linestyle:{color:"black",width:1.35}},WL={painter:cE,fillstyle:"white",linestyle:{color:"black",width:1.35}};var zL=Ci(function(){let i=class t extends PL{constructor(t){if(t&&t["measuremode"]!=null){ki("geotoolkit.controls.tools.Measure(options.measuremode)"+" is deprecated since 4.0. Use mode instead.");t["mode"]=t["measuremode"]}super(t=Pi(t,{name:"measure",mode:Ck.jqt_,node:{fillstyle:{color:"rgba(100,100,100, .5)",evenoddmode:!0}},directionmode:ML.W_,handles:{begin:OL,middle:WL,end:WL}},!0));this.TZt_(t["mode"])}cPt_(){return this.JZt_===Ck.jqt_?this.zJt_().cPt_():[]}getArea(){return this.JZt_===Ck.ra_?this.zJt_().getArea():null}lZt_(){return this.zJt_()==null?[]:this.JZt_===Ck.jqt_?this.zJt_().lZt_():this.zJt_()._Vt_()}TZt_(t){return this.tJt_(t)}KZt_(){return this.PZt_()}tJt_(t){if(this.JZt_===t)return this;this.JZt_=t;this.VZt_();return this}PZt_(){return this.JZt_}XFt_(t){super.XFt_(t);if(this.zJt_()==null||!this.zJt_().isEnabled()||this.zJt_().Xjt_().nt_().getLength()===0)return;let i;const s=this.bFt_(this.mgt_(),t);i=this.PZt_()===Ck.jqt_?this.zJt_().oZt_(s.getX(),s.getY()):this.zJt_().iZt_(s.getX(),s.getY());i!=null&&this.notify(VL.fgt_,this,new Pk(t,{value:i}))}Ct_(t){if(!this.zPt_())return;const i=this.zJt_(),s=!i.isActive()&&i.uWt_(t)&&i.hjt_()==null;super.Ct_(t);t.qE_()||(t.Lkt_()["button"]===Ks.X_||i.zjt_(i.hjt_())||s)&&i.KXt_()&&this.VZt_()}jPt_(t){return super.jPt_(t&xk.yJt_)}N_(){const t=super.N_();t["editmode"]=this.lPt_();return t}Pkt_(){this.isEnabled()||this.VZt_();super.Pkt_()}wPt_(t,i){this.zJt_().YPt_(i.PP_()).jPt_(this.lPt_()&(xk.BJt_|xk.wJt_|xk.QJt_));this.notify(Lk.End,this,i)}vPt_(t,i,s){super.vPt_(t,i,s);t!==Lk.End&&this.OZt_(s.PP_(),null,s)}APt_(t){if(this.zJt_()===t)return this;if(t==null)this.VZt_();else{super.APt_(t);t.dt_(this.N_());this.OZt_(t.PP_(),t)}return this}VZt_(){const t=this.e7_(),i={layer:this.mgt_(),editmode:this.lPt_(),history:this.LPt_};this.UPt_().clear();switch(this.PZt_()){case Ck.jqt_:this.APt_(new vL(i));break;case Ck.ra_:this.APt_(new mL(i));break;default:return this}t!=null&&t.dispose();return this}OZt_(t,i,s){this.PZt_()===Ck.jqt_?this.notify(VL.HZt_,this,new Pk(null,{node:t,editor:i,command:s,distances:this.cPt_()})):this.notify(VL.qZt_,this,new Pk(null,{node:t,editor:i,command:s,value:this.getArea()}))}};i=t([_s("geotoolkit.controls.tools.Measure")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREaXN0YW5jZXMiOiJjUHRfIiwiZ2V0TGFiZWxzIjoibFp0XyIsInNldE1vZGUiOiJUWnRfIiwiZ2V0TW9kZSI6IktadF8iLCJzZXRNZWFzdXJlTW9kZSI6InRKdF8iLCJnZXRNZWFzdXJlTW9kZSI6IlBadF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJzZXRFZGl0TW9kZSI6ImpQdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIiwib25Ob2RlQ3JlYXRlZCI6IndQdF8iLCJvbkNvbW1hbmRBcHBsaWVkIjoidlB0XyIsInNldEVkaXRvciI6IkFQdF8ifX19");var XL=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.iGt_=s;this.JDt_=i}$St_(){return this.iGt_}getSelection(){return this.JDt_}vO_(t){this.JDt_=t;return this}};i=t([_s("geotoolkit.controls.tools.PolygonSelectionEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb29yZGluYXRlcyI6IiRTdF8iLCJzZXRTZWxlY3Rpb24iOiJ2T18ifX19");var jL=Ci({mOt_:"onSelectionEnd",yOt_:"onSelectionChanged",DOt_:"beforeSelectionChange"},2,"eyJvblNlbGVjdGlvbkVuZCI6Im1PdF8iLCJvblNlbGVjdGlvbkNoYW5nZWQiOiJ5T3RfIiwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIjoiRE90XyJ9");const ZL="rgba(100,100,100, .5)",_L=undefined,$L=new hl({color:"black",width:1,pattern:[2,3],pixelsnapmode:{x:!0,y:!0}}),tU=new wr({color:ZL,evenoddmode:!0}),iU=new hl("rgba(255,0,0,1)",2),sU={painter:new aE([.2,1]),width:10,height:10,fillstyle:"white",linestyle:iU},eU={painter:cE,fillstyle:"white",linestyle:iU};var AU=Ci(function(){let i=class t extends PL{constructor(t){super(t=Pi(t,{name:"polygon-selection",layer:t instanceof Ic?t:null,node:{fillstyle:tU,linestyle:$L},preview:{linestyle:{color:"red",width:1,pattern:[2,3]}},handles:{begin:sU,middle:eU,end:eU}},!0));this.bOt_=!1;this.OSt_=new bC;this.NOt_=[];this.SOt_=null;this.Rz_=!1;this.hQ_=!0;this.APt_(new QL({layer:this.mgt_(),editmode:xk.yJt_,history:this.LPt_}))}selection(t){const i=t.PP_(),s=i.Bt_(),e=i.wt_(),A=[],n=[];let h=new lA(0,0);for(let t=0;t<s.length;t++){h.vs_(s[t],e[t]);h=this.iWt_(h);A[t]=h.getX();n[t]=h.getY()}const r=this.OSt_.select(i.getRoot(),A,n,this.Rz_,this.hQ_);this.sWt_(r,i,t);return this}iWt_(t){return this.Jgt_!=null?this.Jgt_.if_().transformPoint(t):t}sWt_(t,i,s){let e;e=this.SOt_!=null?this.SOt_.call(this,t):t;const A=new XL(s,e,{x:i.Bt_(),y:i.wt_()});this.notify(jL.mOt_,this,A);this.vO_(A.getSelection(),i)}vO_(t,i){if(!this.WZt_(this.NOt_,t)){this.notify(jL.DOt_,this,new XL(null,this.NOt_,{x:i.Bt_(),y:i.wt_()}));this.NOt_=t;this.hWt_()&&this.Kv_(!1);this.notify(jL.yOt_,this,new XL(null,this.NOt_,{x:i.Bt_(),y:i.wt_()}))}return this}WZt_(t,i){if(!t||!i)return!1;if(!(t instanceof Array&&i instanceof Array))return!1;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}getSelection(){return this.NOt_}_Ot_(t){this.SOt_=t;return this}kz_(t){this.Rz_=t;return this}Fz_(){return this.Rz_}mc_(t){if(this.hQ_===t)return this;this.hQ_=t;this.e7_().ct_().mc_(t);return this}yc_(){return this.hQ_}rWt_(t){this.bOt_=t;return this}hWt_(){return this.bOt_}jPt_(t){return super.jPt_(t&xk.yJt_)}wPt_(t,i){this.selection(i);this.zZt_(i.PP_());this.notify(Lk.End,this,i)}zZt_(t){const i={layer:this.mgt_(),editmode:this.lPt_(),history:this.LPt_};this.UPt_().clear();this.APt_(new QL(i));t!=null&&t.dispose()}Pkt_(){this.isEnabled()||this.zJt_().zXt_();super.Pkt_()}rB_(t,i){this.e7_().rB_(t,i);return this}gt_(){return this.e7_().gt_()}iQ_(t,i){this.e7_().iQ_(t,i);return this}};i=t([_s("geotoolkit.controls.tools.PolygonSelection")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROb2RlRmlsdGVyIjoiX090XyIsInNldEFsbG93SW50ZXJzZWN0aW9uIjoia3pfIiwiZ2V0QWxsb3dJbnRlcnNlY3Rpb24iOiJGel8iLCJzZXRFdmVuT2RkTW9kZSI6Im1jXyIsImdldEV2ZW5PZGRNb2RlIjoieWNfIiwic2V0QXV0b0Rpc2FibGVkIjoicld0XyIsImlzQXV0b0Rpc2FibGVkIjoiaFd0XyIsInNldEVkaXRNb2RlIjoialB0XyIsIm9uTm9kZUNyZWF0ZWQiOiJ3UHRfIiwib25FbmFibGVkU3RhdGVDaGFuZ2VkIjoiUGt0XyIsInNldExpbmVTdHlsZSI6InJCXyIsImdldExpbmVTdHlsZSI6Imd0XyIsInNldEZpbGxTdHlsZSI6ImlRXyJ9fX0g");var nU=Ci(function(){let i=class t extends WS{constructor(t){super(t);this.hzt_=!1}ukt_(t){ki("geotoolkit/controls/tools/RejectableEventArgs#setTarget() deprecated since 4.0, use setEventTarget() instead");this.KFt_(t);return this}akt_(){ki("geotoolkit/controls/tools/RejectableEventArgs#getTarget() deprecated since 4.0, use getEventTarget() instead");return this.kkt_()}reject(t){t==null&&(t=!0);this.hzt_=t;return this}rPt_(){return this.hzt_}};i=t([_s("geotoolkit.controls.tools.RejectableEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRUYXJnZXQiOiJ1a3RfIiwiZ2V0VGFyZ2V0IjoiYWt0XyIsImlzUmVqZWN0ZWQiOiJyUHRfIn19fSAg");var hU=function(){let i=class t extends WS{constructor(t,i){super(t);this.$q_=i}getArea(){return this.$q_}};i=t([_s("geotoolkit.controls.tools.RubberBandEventArgs")],i);return i}();var rU=Ci({XZt_:"onZoomStart",jZt_:"onZoomEnd",Pxt_:"onRangeChanged"},2,"eyJvblpvb21TdGFydCI6IlhadF8iLCJvblpvb21FbmQiOiJqWnRfIiwib25SYW5nZUNoYW5nZWQiOiJQeHRfIn0g"),oU=Ci({ZZt_:"Hard",_Zt_:"Smart"},2,"eyJIYXJkIjoiWlp0XyIsIlNtYXJ0IjoiX1p0XyJ9");const lU=[oU.ZZt_,oU._Zt_],uU="#bdbdbd",aU="rgba(189,189,189,0.5)";var gU=Ci(function(){let i=class t extends Xk{constructor(t,i){const s=undefined;super(qi(t,{slots:{},layer:t instanceof Ic?t:null,name:"rubberband",mode:i}));this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi.document,enabled:!1}]});this.Kv_(!1);this.bOt_=!0;this.$Zt_=!1;this.t_t_=null;this.i_t_=new xA(0,0);this.s_t_=!1;this.e_t_=oU.ZZt_;this.A_t_=new dp(new mA(0,0,0,0)).nf_(!1).rB_(new hl(uU,1,[2,3]).qD_({x:!0,y:!0})).iQ_(new wr(aU));this.Jgt_!=null&&this.Jgt_.GY_(this.A_t_);this.eb_=null;this.n_t_=null;this.h_t_=new lA;this.r_t_=new lA}YFt_(t){this.$kt_=null;this.Jgt_!=null&&this.Jgt_.removeChild(this.A_t_);this.Jgt_=t;this.Jgt_!=null&&this.Jgt_.GY_(this.A_t_);return this}pxt_(t){this.pFt_("pointermove",t,Mi);this.pFt_("pointerup",t,Mi.document)}o_t_(t,i){this.s_t_=i!=null&&i;this.i_t_=t;return this}l_t_(){return this.i_t_}u_t_(t){if(typeof t=="number"){ki("setMinDimensionMode(number) is deprecated since 4.0, use MinimumDimensionMode type instead");t=lU[t]}this.e_t_=t;return this}a_t_(){return this.e_t_}TZt_(t){return this.eVt_(t)}g_t_(){return this.$Zt_}c_t_(t){this.$Zt_=t;return this}I_t_(t){this.t_t_=t;return this}f_t_(){return this.t_t_}rWt_(t){this.bOt_=t;return this}hWt_(){return this.bOt_}KZt_(){return this.AVt_()}C_t_(t){if(this.t_t_==null||this.t_t_.contains(t))return t;t.getX()<this.t_t_.we_()&&t.setX(this.t_t_.we_());t.getX()>this.t_t_.Qe_()&&t.setX(this.t_t_.Qe_());t.getY()<this.t_t_.Ee_()&&t.setY(this.t_t_.Ee_());t.getY()>this.t_t_.pe_()&&t.setY(this.t_t_.pe_());return t}zFt_(t){const i=undefined;if(((this.dFt_(t)?Ts.z_:t.Lkt_()["buttons"])&this.hVt_())==0)return;this.setActive(!0);this.pxt_(!0);let s=this.bFt_(this.Jgt_,t);this.t_t_!=null&&(s=this.C_t_(s));this.uy_=s;this.h_t_=this.uy_}XFt_(t){if(!this.isActive())return;const i=this.bFt_(this.Jgt_,t);if(this.A_t_.$C_()===!1){const i=undefined,s=undefined;if((this.Jgt_&&this.Jgt_.if_()||Gn.JI_).nI_(this.uy_.getX(),this.uy_.getY()).bs_(t.Fkt_(),this.CFt_(t)))return;this.notify(rU.XZt_,this,new hU(t,null))}let s=this.uy_,e=i,A;this.t_t_!=null&&(e=this.C_t_(e));if(this.eb_){this.$kt_=this.LFt_(this.eb_,!1,!0);const t=undefined;this.$kt_.mgt_().GY_(this.A_t_);if(this.KZt_()===Wk.tVt_&&this.$kt_.Bkt_()){if(!this.n_t_){this.n_t_=this.A_t_.clone().iQ_(null).rB_(new hl("red",2).qD_({x:!0,y:!0}));this.Jgt_.GY_(this.n_t_)}const t=new mA(Math.min(this.uy_.x,this.ay_.x),Math.min(this.uy_.y,this.ay_.y),Math.max(this.uy_.x,this.ay_.x),Math.max(this.uy_.y,this.ay_.y));this.n_t_.ce_(t).nf_(!0);A=this.$kt_.intersect(t);this.h_t_=this.$kt_.dkt_(A.Me_());this.r_t_=this.$kt_.dkt_(A.be_())}else{this.h_t_=this.$kt_.dkt_(this.$kt_.Ckt_(this.uy_));this.r_t_=this.$kt_.dkt_(this.$kt_.Ckt_(i))||this.r_t_}s=this.$kt_.Ckt_(s);e=this.$kt_.Ckt_(e)}else this.r_t_=i;this.ay_=i;if(!A){if(!s||!e)return;this.t_t_!=null&&(e=this.C_t_(e));this.nVt_(s,e);A=new mA(Math.min(s.x,e.x),Math.min(s.y,e.y),Math.max(s.x,e.x),Math.max(s.y,e.y));this.KZt_()!==Wk.iVt_&&(A=this.d_t_(A,s,e))}this.A_t_.ce_(A).nf_(!0);t.stopPropagation(!0);this.notify(rU.Pxt_,this,new hU(t,A))}Ct_(t){if(!this.isActive())return;this.setActive(!1);this.pxt_(!1);if(this.A_t_.$C_()===!1)return;this.A_t_.nf_(!1);this.n_t_&&this.n_t_.nf_(!1);let i=new mA(this.h_t_.x,this.h_t_.y,this.r_t_.x,this.r_t_.y);if(!i.isEmpty()||this.$Zt_!==!1){t.stopPropagation(!0);this.KZt_()!==Wk.iVt_&&(i=this.d_t_(i,this.h_t_,this.r_t_));this.notify(rU.Pxt_,this,new hU(t,i));this.notify(rU.jZt_,this,new hU(t,i));this.hWt_()&&this.Kv_(!1)}}ukt_(t){this.eb_=t;this.n_t_=null;this.$kt_=null;return this}mgt_(){return this.$kt_&&this.$kt_.mgt_()||this.Jgt_}d_t_(t,i,s){let e=this.i_t_.Ie_(),A=this.i_t_.Ts_();if(this.s_t_){const t=this.Jgt_.if_();e=bn.$c_(e,0,t);A=bn.$c_(0,A,t)}if(this.e_t_===oU._Zt_){const i=t.getCenter();if(t.Ie_()<e){t.setX(i.getX()-e/2);t.de_(e)}if(t.Ts_()<A){t.setY(i.getY()-A/2);t.Be_(A)}}else{if(t.Ie_()<e)if(i.x<s.x){t.setX(i.x);t.de_(e)}else{t.setX(i.x-e);t.de_(e)}if(t.Ts_()<A)if(i.y<s.y){t.setY(i.y);t.Be_(A)}else{t.setY(i.y-A);t.Be_(A)}}return t}rB_(t,i){this.A_t_.rB_(t,i);return this}iQ_(t,i){this.A_t_.iQ_(t,i);return this}B_t_(t){t["enabled"]!=null&&this.Kv_(t["enabled"]);t["linestyle"]!=null&&this.rB_(t["linestyle"]);t["fillstyle"]!=null&&this.iQ_(t["fillstyle"]);t["autodisabled"]!=null&&this.rWt_(t["autodisabled"]);t["acceptemptyrect"]!=null&&this.c_t_(t["acceptemptyrect"]);t["restrictionarea"]!=null&&this.I_t_(t["restrictionarea"]);return this}dispose(){this.A_t_.dispose();super.dispose()}};i=t([_s("geotoolkit.controls.tools.RubberBand")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNaW5EaW1lbnNpb24iOiJvX3RfIiwiZ2V0TWluRGltZW5zaW9uIjoibF90XyIsInNldE1pbkRpbWVuc2lvbk1vZGUiOiJ1X3RfIiwiZ2V0TWluRGltZW5zaW9uTW9kZSI6ImFfdF8iLCJzZXRNb2RlIjoiVFp0XyIsImdldEFjY2VwdEVtcHR5UmVjdCI6ImdfdF8iLCJzZXRBY2NlcHRFbXB0eVJlY3QiOiJjX3RfIiwic2V0UmVzdHJpY3Rpb25BcmVhIjoiSV90XyIsImdldFJlc3RyaWN0aW9uQXJlYSI6ImZfdF8iLCJzZXRBdXRvRGlzYWJsZWQiOiJyV3RfIiwiaXNBdXRvRGlzYWJsZWQiOiJoV3RfIiwiZ2V0TW9kZSI6IktadF8iLCJvbk1vdXNlRG93biI6InpGdF8iLCJvbk1vdXNlTW92ZSI6IlhGdF8iLCJvbk1vdXNlVXAiOiJDdF8iLCJzZXRUYXJnZXQiOiJ1a3RfIiwiZ2V0TWFuaXB1bGF0b3JMYXllciI6Im1ndF8iLCJzZXRMaW5lU3R5bGUiOiJyQl8iLCJzZXRGaWxsU3R5bGUiOiJpUV8iLCJzZXRTZXR0aW5ncyI6IkJfdF8ifX19");var cU=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.w_t_=i;this.Q_t_=s}getDelta(){return this.w_t_}E_t_(){return this.Q_t_}};i=t([_s("geotoolkit.controls.tools.splitter.SplitterEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQbG90cyI6IkVfdF8ifX19");var IU=Ci({p_t_:"onPlotSizeChanged",m_t_:"beforePlotSizeChanged",y_t_:"onShow"},2,"eyJvblBsb3RTaXplQ2hhbmdlZCI6InBfdF8iLCJiZWZvcmVQbG90U2l6ZUNoYW5nZWQiOiJtX3RfIiwib25TaG93IjoieV90XyJ9");const fU=OA.Ai_(),CU=new xA(1,1);var dU=function(){let i=class t extends dp{constructor(t){super(t=qi(t,{orientation:typeof t=="string"?t:null},!0));this.$K_=t["orientation"]}getBounds(){const t=this.getParent();if(!(t instanceof Ic))return null;const i=t.ot_();if(i==null)return null;const s=this.if_();CU.setSize(1,1);s!=null&&s.cI_(CU,CU);const e=super.getBounds();return this.$K_===fg.ux_?e.ge_().setX(i.getX()).de_(i.Ie_()-CU.Ie_()).Be_(CU.Ts_()).lock():e.ge_().setY(i.getY()).de_(CU.Ie_()).Be_(i.Ts_()-CU.Ts_()).lock()}};i=t([_s("geotoolkit.controls.tools.splitter.Splitter-Handle")],i);return i}();const BU=10;var wU=Ci(function(){let i=class t extends OS{constructor(t,i){super(t=qi(t,{name:"splitter",layer:t instanceof Ic?t:null,orientation:i||fg.ux_},!0));this.eFt_({"cg-leave":t=>{this.D_t_(t.getPlot(),!1);if(this.M_t_.$C_()){this.isActive()&&this.stop();this.M_t_.nf_(!1)}},pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi,enabled:!1}]});this.v_t_=null;this.b_t_=null;this.$K_=t["orientation"];this.OSt_=new bC;this.N_t_=null;this.M_t_=new dU(this.$K_).nf_(!1).rB_(new hl("#444",1).qD_({x:!0,y:!0})).iQ_(new wr("rgba(160,160,160, 0.5)")).qC_("containersplitter");this.uy_=new lA(0,0);this.dVt_=new lA(0,0);this.kf_=[];this.Jgt_.GY_(this.M_t_)}S_t_(t){this.kf_=[];for(let i=0;i<t.length;i++)t[i]&&this.kf_.push(t[i]);return this}start(t){this.uy_=this.bFt_(this.Jgt_,t);this.v_t_=t.Fkt_();t.stopPropagation();this.setActive(!0);OS.lock(t.getPlot(),this);this.pxt_(!0);return this}stop(){this.M_t_.nf_(!1);this.setActive(!1);OS.unlock(this);this.N_t_=null;this.v_t_=null;this.b_t_=null;this.M_t_.at_(null);return this}G_t_(t){this.uy_=this.bFt_(this.Jgt_,t);if(!this.Jgt_.ot_().contains(this.uy_)){this.D_t_(t.getPlot(),!1);return null}const i=undefined,s=this.dFt_(t)?5:2,e=t.Fkt_(),A=this.OSt_.select(t.getPlot().getRoot(),e.getX(),e.getY(),s);let n=null,h=null;for(let t=0;t<this.kf_.length;t++){const i=undefined;A.indexOf(this.kf_[t])!==-1&&(n==null?n=this.kf_[t]:h=this.kf_[t])}if(n==null||h==null){this.D_t_(t.getPlot(),!1);return null}const r=this.Jgt_.ot_();this.dVt_.vs_(this.uy_.x,this.uy_.y);let o=n.getBounds();o=n.getParent().if_().rn_(o);this.Jgt_.if_().gI_(o,o);let l=h.getBounds();l=h.getParent().if_().rn_(l);this.Jgt_.if_().gI_(l,l);this.M_t_.nf_(!0);this.$K_===fg.ux_?this.M_t_.ce_(r.we_(),o.pe_(),r.Qe_(),l.Ee_()):this.M_t_.ce_(o.Qe_(),r.Ee_(),l.we_(),r.pe_());this.D_t_(t.getPlot(),!0);t.stopPropagation();this.notify(IU.y_t_,this,new cU(t,null,{top:n,bottom:h,left:n,right:h}));return{top:n,bottom:h,left:n,right:h}}D_t_(t,i){let s=null;if(i){const t=this.mgt_().if_().HI_();s=Math.abs(t)<NA.Je_?this.$K_===fg.ux_?"ns-resize":"ew-resize":this.$K_===fg.ux_?"ew-resize":"ns-resize"}BG.Yb_(t,{cursor:s},this);this.M_t_.nf_(i);return this}zFt_(t){if(t.Lkt_()["buttons"]===Ts.z_){this.N_t_=this.G_t_(t);if(this.N_t_!=null){t.Lkt_().preventDefault();this.start(t)}}}XFt_(t){if(this.isActive()){t.stopPropagation();if(this.R_t_(t)){this.D_t_(t.getPlot(),!0);return}}this.G_t_(t)}R_t_(t){const i=this.bFt_(this.Jgt_,t);if(this.$K_===fg.ux_){if(this.N_t_!=null&&this.N_t_.top!=null){if(this.N_t_.top.getBounds().Ts_()+(i.getY()-this.uy_.getY())<BU)return!0;if(this.N_t_.bottom.getBounds().Ts_()-(i.getY()-this.uy_.getY())<BU)return!0;this.M_t_.translate(0,i.y-this.dVt_.y);this.dVt_.vs_(i.x,i.y);this.b_t_=t.Fkt_();return!0}}else if(this.N_t_!=null&&this.N_t_.left!=null){if(this.N_t_.left.getBounds().Ie_()+(i.getX()-this.uy_.getX())<BU)return!0;if(this.N_t_.right.getBounds().Ie_()-(i.getX()-this.uy_.getX())<BU)return!0;this.M_t_.translate(i.x-this.dVt_.x,0);this.dVt_.vs_(i.x,i.y);this.b_t_=t.Fkt_();return!0}return!1}Ct_(t){if(!this.isActive()||!this.v_t_)return;this.D_t_(t.getPlot(),!1);if(!this.N_t_||!this.b_t_){this.stop();return}t.stopPropagation();const i=this.$K_===fg.ux_?this.dVt_.getY()-this.uy_.getY():this.dVt_.getX()-this.uy_.getX(),s=this.$K_===fg.ux_?this.b_t_.getY()-this.v_t_.getY():this.b_t_.getX()-this.v_t_.getX();this.notify(IU.m_t_,this,new cU(t,i));const e=this.$K_===fg.ux_?this.k_t_(i,s):this.F_t_(i,s);this.notify(IU.p_t_,this,new cU(t,i,e));this.stop();this.pxt_(!1)}k_t_(t,i){const s={};let e,A,n;const h=this.N_t_.top.getParent(),r=ne(h)&&h.rt_().Ts_();let o=this.N_t_.top.NS_().getStyle()["height"];const l=jA.Ah_(o,r);if(l!=null){e=jA.parse(o).unit;n=ua.aG_(o)?i:t;A=l+n;e&&(A=e==="%"?100*A/r+e:fU.gn_("px").wn_(A,e)+e);this.N_t_.top.ft_({height:A});s["top"]=this.N_t_.top}const u=this.N_t_.top.NS_().getStyle()["bottom"],a=jA.Ah_(u,r);if(a!=null){e=jA.parse(u).unit;n=ua.aG_(u)?i:t;A=a-n;e&&(A=e==="%"?100*A/r+e:fU.gn_("px").wn_(A,e)+e);this.N_t_.top.ft_({bottom:A});s["top"]=this.N_t_.top}o=this.N_t_.bottom.NS_().getStyle()["height"];const g=jA.Ah_(o,r);if(g!=null){e=jA.parse(o).unit;n=ua.aG_(o)?i:t;A=g-n;e&&(A=e==="%"?100*A/r+e:fU.gn_("px").wn_(A,e)+e);this.N_t_.bottom.ft_({height:A});s["bottom"]=this.N_t_.bottom}const c=this.N_t_.bottom.NS_().getStyle()["top"],I=jA.Ah_(c,r);if(I!=null){e=jA.parse(c).unit;n=ua.aG_(c)?i:t;A=I+n;e&&(A=e==="%"?100*A/r+e:fU.gn_("px").wn_(A,e)+e);this.N_t_.bottom.ft_({top:A});s["bottom"]=this.N_t_.bottom}return s}F_t_(t,i){const s={};let e,A,n,h;const r=this.N_t_.left.getParent(),o=ne(r)&&r.rt_().Ie_();let l=this.N_t_.left.NS_().getStyle()["width"];const u=jA.Ah_(l,o);if(u!=null){e=jA.parse(l).unit;h=ua.aG_(l)?i:t;n=u+h;e&&(A=e==="%"?100*n/o+e:fU.gn_("px").wn_(n,e)+e);this.N_t_.left.ft_({width:A});s["left"]=this.N_t_.left}const a=this.N_t_.left.NS_().getStyle()["right"],g=jA.Ah_(a,o);if(g!=null){e=jA.parse(a).unit;h=ua.aG_(a)?i:t;n=g-h;e&&(A=e==="%"?100*n/o+e:fU.gn_("px").wn_(n,e)+e);this.N_t_.left.ft_({right:A});s["left"]=this.N_t_.left}l=this.N_t_.right.NS_().getStyle()["width"];const c=jA.Ah_(l,o);if(c!=null){e=jA.parse(l).unit;h=ua.aG_(l)?i:t;n=c-h;e&&(A=e==="%"?100*n/o+e:fU.gn_("px").wn_(n,e)+e);this.N_t_.right.ft_({width:A});s["right"]=this.N_t_.right}const I=this.N_t_.right.NS_().getStyle()["left"],f=jA.Ah_(I,o);if(f!=null){e=jA.parse(I).unit;h=ua.aG_(I)?i:t;n=f+h;e&&(A=e==="%"?100*n/o+e:fU.gn_("px").wn_(n,e)+e);this.N_t_.right.ft_({left:A});s["right"]=this.N_t_.right}return s}pxt_(t){this.pFt_("pointermove",t,Mi);this.pFt_("pointerup",t,Mi);return this}rB_(t){this.M_t_.rB_(t)}};i=t([_s("geotoolkit.controls.tools.splitter.Splitter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQbG90cyI6IlNfdF8iLCJzZXRMaW5lU3R5bGUiOiJyQl8ifX19");var QU=Ci({bgt_:"onMove",Kxt_:"onScroll"},2,"eyJvbk1vdmUiOiJiZ3RfIiwib25TY3JvbGwiOiJLeHRfIn0g"),EU=Ci(function(){let i=class t extends OS{constructor(t){super(t=qi(t,{name:"ColumnHandler",tableview:t instanceof LR?t:null},!0));this.UUt_=t["tableview"];this.x_t_=null;this.L_t_=!1;this.U_t_=-1;this.eFt_({pointermove:this.XFt_.bind(this),pointerdown:this.zFt_.bind(this),pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:()=>{this.stop()},object:Mi,enabled:!1}],keydown:{callback:this.IPt_.bind(this),object:Mi,enabled:!0},keyup:{callback:this.fPt_.bind(this),object:Mi,enabled:!0},"cg-leave":t=>{this.x_t_=null}});this.Y_t_=(new dp).rB_({color:"gray",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"rgba(236,243,255, 0.5)"}).nf_(!1);this.T_t_=new sI;this.K_t_=new sI;this.H_t_=(new sI).aq_(!0).nf_(!1).cq_(new zB).GY_([this.T_t_.ft_({left:1,top:0,bottom:0,width:2}).rB_({color:"#4285F4",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"#4285F4"}).nf_(!1),this.K_t_.ft_({right:1,top:0,bottom:0,width:2}).rB_({color:"#4285F4",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"#4285F4"}).nf_(!1)]);this.UUt_.GY_([this.Y_t_,this.H_t_])}pxt_(t){this.pFt_("pointerup",t,Mi);return this}start(t){this.pxt_(!0);return super.start()}stop(){this.pxt_(!1);OS.unlock(this);return super.stop()}IPt_(t){if(this.x_t_!=null&&this.L_t_!==!0&&t.Lkt_().ctrlKey===!0){const i=this.bFt_(this.UUt_,this.x_t_),s=this.UUt_.SKt_(i.getX(),i.getY());if(s.getY()===0&&s.getX()>=0){BG.Yb_(t.getPlot(),{cursor:"move"},this);this.L_t_=!0}}}fPt_(t){if(this.isActive())return;if(this.L_t_===!1)return;const i=undefined;if(t.Lkt_().ctrlKey===!0){this.L_t_=!1;BG.Yb_(t.getPlot(),{cursor:null},this)}}q_t_(){this.J_t_==null&&(this.J_t_=new kw(300,(()=>{this.J_t_.stop();this.J_t_=null;this.x_t_!=null&&this.XFt_(this.x_t_)})).start())}XFt_(t){this.x_t_=t;if(this.isActive()){BG.Yb_(t.getPlot(),{cursor:"move"},this);t.stopPropagation(!0,!0);let i=this.bFt_(this.UUt_,t);const s=this.Y_t_.getBounds().clone();s.setX(s.we_()+i.getX()-this.P_t_.getX());const e=this.UUt_.RKt_(s.we_(),s.getY()),A=this.UUt_.RKt_(s.Qe_(),s.getY()),n=this.UUt_.lKt_();if(i.getX()-this.P_t_.getX()>0){if(A.getX()>n.Qe_()&&this.J_t_==null){this.q_t_();this.UUt_.scroll(null,A.getX());this.notify(QU.Kxt_,this)}}else if(e.getX()<n.we_()&&this.J_t_==null){this.q_t_();this.UUt_.scroll(null,e.getX());this.notify(QU.Kxt_,this)}i=this.bFt_(this.UUt_,t);const h=this.UUt_.RKt_(i);this.T_t_.nf_(h.getX()<this.U_t_);this.K_t_.nf_(h.getX()>this.U_t_);this.H_t_.nf_(h.getX()>=0);const r=h.getX()!==-1&&h.getX()!==this.U_t_?"move":"not-allowed";BG.Yb_(t.getPlot(),{cursor:r},this);const o=this.V_t_(h.getX());this.H_t_.ht_(o).td_();const l=this.UUt_.dUt_().getBounds();if(l.we_()<=s.we_()&&l.Qe_()>=s.Qe_()){this.Y_t_.ht_(s).td_();this.P_t_=i}}else this.x_t_=t}zFt_(t){if(this.L_t_===!0){const i=this.bFt_(this.UUt_,t),s=this.UUt_.SKt_(i.getX(),i.getY());if(s.getY()===0&&s.getX()>=0){this.start();OS.lock(t.getPlot(),this);this.U_t_=this.UUt_.RKt_(i.getX(),i.getY()).getX();const s=this.V_t_(this.U_t_);this.Y_t_.ht_(s).nf_(!0).at_(null);this.H_t_.ht_(this.Y_t_.getBounds().clone()).nf_(!0);this.P_t_=this.bFt_(this.UUt_,t);this.O_t_=this.P_t_}}}Ct_(t){if(!this.isActive())return;t.stopPropagation();this.stop();const i=this.bFt_(this.UUt_,t),s=this.UUt_.RKt_(i.getX(),i.getY()).getX();if(s===-1||s===this.U_t_)return;const e=[];let A;for(A=0;A<this.UUt_.eKt_().Ie_();A++)e[A]=this.UUt_.jTt_(A);const n=e[this.U_t_];e.splice(this.U_t_,1);e.splice(s,0,n);for(A=0;A<e.length;A++)this.UUt_._Tt_(A,e[A]);this.notify(QU.bgt_,this,{from:this.U_t_,to:s})}V_t_(t){const i=this.UUt_.aKt_(0,t);if(i==null)return null;const s=new lA(i.getX(),i.getY()),e=new lA(i.Qe_(),i.pe_());this.UUt_.dUt_().dUt_().if_().transformPoint(s,s);this.UUt_.if_().aI_(s,s);this.UUt_.dUt_().dUt_().if_().transformPoint(e,e);this.UUt_.if_().aI_(e,e);return new mA(s.x,this.UUt_.rt_().Ee_(),e.x,this.UUt_.rt_().pe_()-1)}Dgt_(){super.Dgt_();if(this.isEnabled()===!1||this.isActive()===!1){this.x_t_=null;this.L_t_=!1;this.Y_t_.nf_(!1);this.H_t_.nf_(!1);this.T_t_.nf_(!1);this.K_t_.nf_(!1)}}};i=t([_s("geotoolkit.controls.tools.tableview.ColumnHandler")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkFjdGl2ZVN0YXRlQ2hhbmdlZCI6IkRndF8ifX19");var pU=Ci({W_t_:"onHeaderHover",z_t_:"onButtonHover",X_t_:"onClick"},2,"eyJvbkhlYWRlckhvdmVyIjoiV190XyIsIm9uQnV0dG9uSG92ZXIiOiJ6X3RfIiwib25DbGljayI6IlhfdF8ifSAg"),mU=Ci(function(){let i=class t extends OS{constructor(t){super(t=qi(t,{name:"HeaderHandler",tableview:t instanceof LR?t:null},!0));this.UUt_=t["tableview"];this.fk_=new xA(12,12);this.j_t_=new xA(4,4);this.eFt_({pointermove:this.XFt_.bind(this),pointerdown:this.zFt_.bind(this),"cg-leave":t=>{this.Z_t_.nf_(!1)}});this.Z_t_=new sI;this.UUt_.GY_([this.Z_t_.nf_(!1)])}setSize(t){this.fk_=t;return this}getSize(){return this.fk_}__t_(t){this.j_t_=t;return this}$_t_(){return this.j_t_}XFt_(t){const i=this.bFt_(this.UUt_,t),s=this.UUt_.SKt_(i.getX(),i.getY());let e=null;if(s.getY()===0&&s.getX()===-1){this.U_t_=-1;e=this.t$t_(-1);this.Z_t_.ht_(e).Lq_(e.clone().setX(0).setY(0));this.notify(e.contains(i)?pU.z_t_:pU.W_t_,this,{column:this.U_t_,button:this.Z_t_})}else if(s.getY()===0&&s.getX()>=0){this.U_t_=this.UUt_.RKt_(i.getX(),i.getY()).getX();e=this.t$t_(this.U_t_);this.Z_t_.ht_(e).Lq_(e.clone().setX(0).setY(0));this.notify(e.contains(i)?pU.z_t_:pU.W_t_,this,{column:this.U_t_,button:this.Z_t_})}else this.Z_t_.nf_(!1)}zFt_(t){const i=this.bFt_(this.UUt_,t),s=this.UUt_.SKt_(i.getX(),i.getY());let e=null;if(s.getY()===0&&s.getX()===-1){this.U_t_=-1;e=this.t$t_(-1);this.Z_t_.nf_(!0).ht_(e);if(e.contains(i)){t.stopPropagation();this.notify(pU.X_t_,this,{column:this.U_t_,button:this.Z_t_})}}else if(s.getY()===0&&s.getX()>=0){this.U_t_=this.UUt_.RKt_(i.getX(),i.getY()).getX();e=this.t$t_(this.U_t_);this.Z_t_.nf_(!0).ht_(e);if(e.contains(i)){t.stopPropagation();this.notify(pU.X_t_,this,{column:this.U_t_,button:this.Z_t_})}}}t$t_(t){const i=this.WTt_(t);return i.setX(i.getX()+i.Ie_()-this.fk_.Ie_()-this.j_t_.Ie_()).setY(i.getY()+this.j_t_.Ts_()).de_(this.fk_.Ie_()).Be_(this.fk_.Ts_())}WTt_(t){const i=this.UUt_.aKt_(-1,t),s=this.UUt_.WTt_();if(i==null)return null;const e=new lA(i.getX(),i.getY()),A=new lA(i.Qe_(),i.pe_());this.UUt_.dUt_().dUt_().if_().transformPoint(e,e);this.UUt_.if_().aI_(e,e);this.UUt_.dUt_().dUt_().if_().transformPoint(A,A);this.UUt_.if_().aI_(A,A);return new mA(e.x,s.Ee_(),A.x,s.pe_())}};i=t([_s("geotoolkit.controls.tools.tableview.HeaderHandler")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNYXJnaW4iOiJfX3RfIiwiZ2V0TWFyZ2luIjoiJF90XyJ9fX0g");var yU=Ci(function(){let i=class t extends WS{constructor(t,i,s,e){super(t);this.i$t_=i;this.s$t_=s;this.e$t_=e}A$t_(){return this.i$t_}n$t_(){return this.s$t_}fOt_(){return this.e$t_}};i=t([_s("geotoolkit.controls.tools.HoverEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRSb3dOdW1iZXIiOiJBJHRfIiwiZ2V0Q29sdW1uTnVtYmVyIjoibiR0XyIsImdldE1vdXNlUG9zaXRpb24iOiJmT3RfIn19fSAg");var DU=Ci({h$t_:"onHover"},2,"eyJvbkhvdmVyIjoiaCR0XyJ9"),MU=Ci(function(){let i=class t extends OS{constructor(t){super(t=qi(t,{name:"Highlight",tableview:t instanceof LR?t:null},!0));this.UUt_=t["tableview"];this.eFt_({pointermove:this.XFt_.bind(this),"cg-leave":t=>{this.notify(xS.Okt_,this,null)}})}XFt_(t){const i=this.bFt_(this.UUt_,t),s=this.UUt_.RKt_(i.getX(),i.getY()),e=this.UUt_.aKt_(s.getY(),s.getX());if(e){const A=this.UUt_.RKt_(i.getX(),i.getY(),!0),n=e.Ie_()*(A.getX()-s.getX()),h=e.Ts_()*(A.getY()-s.getY());this.notify(DU.h$t_,this,new yU(t,s.getY(),s.getX(),new lA(n,h)))}}};i=t([_s("geotoolkit.controls.tools.Highlight")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbk1vdXNlTW92ZSI6IlhGdF8ifX19");var vU=Ci({h$t_:"onHover",bgt_:"onMove",Kxt_:"onScroll"},2,"eyJvbkhvdmVyIjoiaCR0XyIsIm9uTW92ZSI6ImJndF8iLCJvblNjcm9sbCI6Ikt4dF8ifSAg"),bU=Ci(function(){let i=class t extends OS{constructor(t){super(t=qi(t,{name:"RowHandler",tableview:t instanceof LR?t:null},!0));this.UUt_=t["tableview"];this.x_t_=null;this.L_t_=!1;this.U_t_=-1;this.eFt_({pointermove:this.XFt_.bind(this),pointerdown:this.zFt_.bind(this),pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:()=>{this.stop()},object:Mi,enabled:!1}],keydown:{callback:this.IPt_.bind(this),object:Mi,enabled:!0},keyup:{callback:this.fPt_.bind(this),object:Mi,enabled:!0},"cg-leave":t=>{this.x_t_=null}});this.r$t_=(new dp).rB_({color:"gray",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"rgba(236,243,255, 0.5)"}).nf_(!1);this.o$t_=new sI;this.l$t_=new sI;this.u$t_=(new sI).aq_(!0).nf_(!1).cq_(new zB).GY_([this.o$t_.ft_({left:0,top:1,right:0,height:2}).rB_({color:"#4285F4",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"#4285F4"}).nf_(!1),this.l$t_.ft_({left:0,bottom:1,right:0,height:2}).rB_({color:"#4285F4",pixelsnapmode:{x:!0,y:!0}}).iQ_({color:"#4285F4"}).nf_(!1)]);this.UUt_.GY_([this.r$t_,this.u$t_])}pxt_(t){this.pFt_("pointerup",t,Mi);return this}start(t){this.pxt_(!0);return super.start()}stop(){this.pxt_(!1);OS.unlock(this);return super.stop()}IPt_(t){if(this.x_t_!=null&&this.L_t_!==!0&&t.Lkt_().ctrlKey===!0){const i=this.bFt_(this.UUt_,this.x_t_),s=this.UUt_.GKt_(i.getX(),i.getY());if(s.getX()===0&&s.getY()>=0){BG.Yb_(t.getPlot(),{cursor:"move"},this);this.L_t_=!0}}}fPt_(t){if(this.isActive())return;if(this.L_t_===!1)return;const i=undefined;if(t.Lkt_().ctrlKey===!0){this.L_t_=!1;BG.Yb_(t.getPlot(),{cursor:null},this)}}zFt_(t){if(this.L_t_===!0){const i=this.bFt_(this.UUt_,t),s=this.UUt_.GKt_(i.getX(),i.getY());if(s.getX()===0&&s.getY()>=0){this.start();OS.lock(t.getPlot(),this);this.a$t_=s.getY();const i=this.g$t_(this.a$t_);this.r$t_.ht_(i).nf_(!0).at_(null);this.u$t_.ht_(this.r$t_.getBounds().clone()).nf_(!0);this.P_t_=this.bFt_(this.UUt_,t);this.O_t_=this.P_t_}}}q_t_(){this.J_t_==null&&(this.J_t_=new kw(300,(()=>{this.J_t_.stop();this.J_t_=null;this.x_t_!=null&&this.XFt_(this.x_t_)})).start())}XFt_(t){this.x_t_=t;if(this.isActive()){BG.Yb_(t.getPlot(),{cursor:"move"},this);t.stopPropagation(!0,!0);let i=this.bFt_(this.UUt_,t);const s=this.r$t_.getBounds().clone();s.setY(s.Ee_()+i.getY()-this.P_t_.getY());const e=this.UUt_.RKt_(s.getX(),s.Ee_()),A=this.UUt_.RKt_(s.getX(),s.pe_()),n=this.UUt_.lKt_();if(i.getY()-this.P_t_.getY()>0){if(A.getY()>=n.pe_()-1&&this.J_t_==null){this.q_t_();this.UUt_.scroll(A.getY()+1);this.notify(vU.Kxt_,this)}}else if(e.getY()<n.Ee_()&&this.J_t_==null){this.q_t_();this.UUt_.scroll(e.getY());this.notify(vU.Kxt_,this)}i=this.bFt_(this.UUt_,t);const h=this.UUt_.RKt_(i);this.o$t_.nf_(h.getY()<this.a$t_);this.l$t_.nf_(h.getY()>this.a$t_);this.u$t_.nf_(h.getY()>=0);const r=h.getY()!==-1&&h.getY()!==this.a$t_?"move":"not-allowed";BG.Yb_(t.getPlot(),{cursor:r},this);const o=this.g$t_(h.getY());this.u$t_.ht_(o).td_();const l=this.UUt_.dUt_().getBounds();if(l.Ee_()<=s.Ee_()&&l.pe_()>=s.pe_()){this.r$t_.ht_(s).td_();this.P_t_=i}}else this.x_t_=t}g$t_(t){const i=this.UUt_.aKt_(t,0);if(i==null)return null;const s=new lA(i.getX(),i.getY()),e=new lA(i.Qe_(),i.pe_());this.UUt_.dUt_().dUt_().if_().transformPoint(s,s);this.UUt_.if_().aI_(s,s);this.UUt_.dUt_().dUt_().if_().transformPoint(e,e);this.UUt_.if_().aI_(e,e);return new mA(this.UUt_.rt_().we_(),s.y,this.UUt_.rt_().Qe_()-1,e.y)}Ct_(t){if(!this.isActive())return;t.stopPropagation();this.stop();const i=this.bFt_(this.UUt_,t),s=this.UUt_.RKt_(i.getX(),i.getY()).getY();s!==-1&&s!==this.a$t_&&this.notify(vU.bgt_,this,{from:this.a$t_,to:s})}Dgt_(){super.Dgt_();if(this.isEnabled()===!1||this.isActive()===!1){this.x_t_=null;this.L_t_=!1;this.r$t_.nf_(!1);this.u$t_.nf_(!1);this.o$t_.nf_(!1);this.l$t_.nf_(!1)}}};i=t([_s("geotoolkit.controls.tools.tableview.RowHandler")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkFjdGl2ZVN0YXRlQ2hhbmdlZCI6IkRndF8ifX19");var NU=Ci({e4_:"onResize"},2,"eyJvblJlc2l6ZSI6ImU0XyJ9"),SU=Ci({ax_:"vertical",ux_:"horizontal",v6_:"both"},2,"eyJWZXJ0aWNhbCI6ImF4XyIsIkhvcml6b250YWwiOiJ1eF8iLCJCb3RoIjoidjZfIn0g");const GU=new lA(0,0),RU=new lA(1,0);var kU=Ci(function(){let i=class t extends OS{constructor(t,i){super(t=qi(t,{name:"Splitter",tableview:t instanceof LR?t:null,ignorezerosize:i},!0));this.c$t_=!1;this.I$t_=t["ignorezerosize"];this.P_t_=null;this.wgt_=null;this.UUt_=t["tableview"];this.Ezt_=null;this.f$t_=null;this.eFt_({"cg-leave":()=>{if(this.C$t_!=null){BG.Yb_(this.C$t_,{cursor:null},this);this.C$t_=null;this.d$t_.nf_(!1);this.d$t_=null}},pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi,enabled:!1}]});this.B$t_=1;this.OSt_=new bC;this.w$t_=(new dp).qC_("tableview-splitter-vertical").rB_({color:"gray",pixelsnapmode:{x:!0,y:!0}}).iQ_("rgba(150,150,150, 0.5)").nf_(!1);this.Q$t_=this.w$t_.clone();this.E$t_=this.w$t_.clone();this.p$t_=this.w$t_.clone().qC_("tableview-splitter-horizontal");this.m$t_=this.w$t_.clone().qC_("tableview-splitter-horizontal");this.y$t_=this.w$t_.clone().qC_("tableview-splitter-horizontal");this.D$t_=[this.w$t_,this.Q$t_,this.E$t_,this.p$t_,this.m$t_,this.y$t_];this.UUt_.GY_(this.D$t_);this.M$t_=SU.ax_}v$t_(t){this.c$t_=t;return this}b$t_(){return this.c$t_}N$t_(){return this.M$t_}S$t_(t){this.M$t_!==t&&(this.M$t_=t);return this}Dgt_(){super.Dgt_();if(this.isEnabled()===!1)for(let t=0;t<this.D$t_.length;t++)this.D$t_[t].nf_(!1)}getSize(){return this.B$t_}setSize(t){this.B$t_=t;return this}rB_(t,i){this.D$t_[0].rB_(t,i);t=this.D$t_[0].gt_();for(let i=1;i<this.D$t_.length;i++)this.D$t_[i].rB_(t);return this}gt_(){return this.D$t_[0].gt_()}iQ_(t,i){this.D$t_[0].iQ_(t,i);t=this.D$t_[0].ct_();for(let i=1;i<this.D$t_.length;i++)this.D$t_[i].iQ_(t);return this}ct_(){return this.D$t_[0].ct_()}start(t){this.setActive(!0);if(t!=null){t.stopPropagation(!0,!0);this.Ezt_=t.getPlot()}for(let t=0;t<this.D$t_.length;t++)if(this.D$t_[t].$C_()){this.wgt_=this.D$t_[t];break}return this}stop(){this.setActive(!1);this.Ezt_!=null&&BG.Yb_(this.Ezt_,{cursor:null},this);this.wgt_!=null&&this.wgt_.at_(null).nf_(!1);this.Ezt_=null;this.wgt_=null;return this}Ct_(t){if(this.isActive()!==!1){t.stopPropagation(!0,!0);this.pFt_("pointermove",!1,Mi);this.pFt_("pointerup",!1,Mi);this.G$t_(t.getPlot(),this.bFt_(this.UUt_,t))}}G$t_(t,i){if(this.wgt_!=null){this.UUt_.if_().transformPoint(i,i);this.UUt_.dUt_().dUt_().if_().aI_(i,i);this.UUt_.if_().transformPoint(this.O_t_,this.O_t_);this.UUt_.dUt_().dUt_().if_().aI_(this.O_t_,this.O_t_);if(this.wgt_.WC_()==="tableview-splitter-vertical"){const t=i.getX()-this.O_t_.getX();this.wgt_===this.w$t_?this.f$t_.x=-1:this.wgt_===this.Q$t_&&this.f$t_.x>0&&(this.f$t_.x-=1);let s=this.f$t_.getX(),e=0,A=0;this.I$t_===!0&&this.UUt_.jTt_(s)<=0&&s--;if(s>=0){e=this.UUt_.jTt_(s);A=e+t}else{e=this.UUt_.ZTt_().Ie_();A=e+t;A=Math.min(A,this.UUt_.getBounds().Ie_()-1)}this.stop();A<15&&(A=15);this.UUt_._Tt_(s,A);this.notify(NU.e4_,this,{column:s,width:{current:e,new:A}})}else{const t=i.getY()-this.O_t_.getY();this.wgt_===this.p$t_?this.f$t_.y=-1:this.wgt_===this.m$t_&&this.f$t_.y>0&&(this.f$t_.y-=1);let s=this.f$t_.getY(),e=0,A=0;this.I$t_===!0&&this.UUt_.qTt_(s)<=0&&s--;if(s>=0){e=this.UUt_.qTt_(s);A=e+t}else{e=this.UUt_.WTt_().Ts_();A=e+t;A=Math.min(A,this.UUt_.getBounds().Ts_()-1)}this.stop();A<15&&(A=15);this.UUt_.JTt_(s,A);this.notify(NU.e4_,this,{row:s,height:{current:e,new:A}})}}}zFt_(t){let i=null;for(let t=0;t<this.D$t_.length;t++)if(this.D$t_[t].$C_()){i=this.D$t_[t];break}if(i!=null){this.pFt_("pointermove",!0,Mi);this.pFt_("pointerup",!0,Mi);const i=this.UUt_.getRoot(),s=this.bFt_(i,t),e=undefined,A=this.OSt_.select(i,s.x,s.y,this.B$t_).filter((t=>t instanceof dp&&(t.WC_()==="tableview-splitter-vertical"||t.WC_()==="tableview-splitter-horizontal")&&this.D$t_.indexOf(t)!==-1));if(A.length===0)return this;this.wgt_=A[0];this.P_t_=this.bFt_(this.UUt_,t);this.O_t_=this.P_t_;this.start(t)}return this}XFt_(t){this.wgt_!=null&&t.stopPropagation!=null&&t.stopPropagation(!0,!0);this.R_t_(t.getPlot(),this.bFt_(this.UUt_,t))}R_t_(t,i){if(this.wgt_!=null){this.wgt_.WC_()==="tableview-splitter-vertical"?this.wgt_.translate(i.getX()-this.P_t_.getX(),0):this.wgt_.translate(0,i.getY()-this.P_t_.getY());this.P_t_=i;return this}const s=i.clone();this.f$t_=this.UUt_.RKt_(s.getX(),s.getY());const e=this.UUt_.aKt_(this.f$t_.getY(),this.f$t_.getX());if(e==null)return this;const A=new lA(e.getX(),e.getY()),n=new lA(e.Qe_(),e.pe_());this.UUt_.dUt_().dUt_().if_().transformPoint(A,A);this.UUt_.if_().aI_(A,A);this.UUt_.dUt_().dUt_().if_().transformPoint(n,n);this.UUt_.if_().aI_(n,n);const h=this.UUt_.if_().aI_(GU),r=this.UUt_.if_().aI_(RU),o=lA.Ss_(h,r);let l=this.UUt_.rt_();if(this.c$t_){const t=Math.min(this.UUt_.OTt_(),l.Ts_());t<l.Ts_()&&(l=l.clone().Be_(t))}if(this.M$t_!==SU.ux_){if(this.UUt_.KKt_().$C_()){const t=this.UUt_.KKt_().getBounds();this.w$t_.ht_(new mA(t.Qe_(),l.Ee_(),t.Qe_(),l.pe_()).Le_(this.B$t_*o,0)).nf_(this.UUt_.KKt_().$C_())}this.f$t_.getX()!==0&&this.Q$t_.ht_(new mA(A.x,l.Ee_(),A.x,l.pe_()).Le_(this.B$t_*o,0)).nf_(!0);this.E$t_.ht_(new mA(n.x,l.Ee_(),n.x,l.pe_()).Le_(this.B$t_*o,0)).nf_(!0)}if(this.M$t_!==SU.ax_&&this.UUt_.HKt_()){this.UUt_.TKt_().$C_()&&this.p$t_.ht_(new mA(0,this.UUt_.iKt_(),l.Qe_(),this.UUt_.iKt_()).Le_(0,this.B$t_*o)).nf_(!0);this.f$t_.getY()!==0&&this.m$t_.ht_(new mA(0,A.y,l.Qe_(),A.y).Le_(0,this.B$t_*o)).nf_(!0);this.y$t_.ht_(new mA(0,n.y,l.Qe_(),n.y).Le_(0,this.B$t_*o)).nf_(!0)}const u=this.UUt_,a=undefined,g=this.OSt_.select(u,s.x,s.y,this.B$t_).filter((t=>t instanceof dp&&(t.WC_()==="tableview-splitter-vertical"||t.WC_()==="tableview-splitter-horizontal")&&this.D$t_.indexOf(t)!==-1));for(let t=0;t<this.D$t_.length;t++)this.D$t_[t].nf_(!1);if(g.length>0){if(g[0].WC_()==="tableview-splitter-vertical"&&this.UUt_.KKt_().$C_()&&g[0]!==this.w$t_&&g[0].getBounds().we_()<this.UUt_.KKt_().getBounds().Qe_())return this;this.d$t_=g[0];this.d$t_.nf_(!0);this.d$t_.WC_()==="tableview-splitter-horizontal"?BG.Yb_(t,{cursor:"ns-resize"},this):BG.Yb_(t,{cursor:"ew-resize"},this);this.C$t_=t}else BG.Yb_(t,{cursor:null},this);return this}R$t_(t){this.I$t_=t;return this}};i=t([_s("geotoolkit.controls.tools.tableview.Splitter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTcGxpdHRlck1vZGUiOiJOJHRfIiwic2V0U3BsaXR0ZXJNb2RlIjoiUyR0XyIsIm9uQWN0aXZlU3RhdGVDaGFuZ2VkIjoiRGd0XyIsInNldExpbmVTdHlsZSI6InJCXyIsImdldExpbmVTdHlsZSI6Imd0XyIsInNldEZpbGxTdHlsZSI6ImlRXyIsImdldEZpbGxTdHlsZSI6ImN0XyIsImFwcGx5TW91c2VNb3ZlIjoiUl90XyIsInNldElnbm9yZVplcm9TaXplIjoiUiR0XyJ9fX0g");const FU="#757575",xU="12px Roboto",LU=new lA(Number.NaN,Number.NaN),UU=["right","left","top"],YU=function(t){if(!t)return!1;for(let i=0;i<UU.length;++i)if(t[UU[i]]&&t[UU[i]]["visible"]===!0)return!0;return t["labels"]!=="none"&&t["labels"]!==!1},TU=function(t){return t&&(t["top"]!=null||t["left"]!=null||t["right"]!=null)};var KU=Ci(function(){let i=class t extends su{constructor(t){super(t=qi(t,{radius:0,ternarygrid:null},!0));this.fNt_=t["ternarygrid"];this.qC_("cross-hair-cursor");this.KC_(!1);this.Qgt_=new lA(Number.NaN,Number.NaN);this.pi_={right:Number.NaN,left:Number.NaN,top:Number.NaN};this.XO_={right:{from:null,to:null},left:{from:null,to:null},top:{from:null,to:null}};this.rB_(new hl(FU,1,[3,2]).qD_(!0));this.SVt_=null;this.Xz_=t["radius"];t["outlinestyle"]&&this.GVt_(t["outlinestyle"])}GVt_(t,i){if(this.SVt_===t)return this;this.SVt_=hl.jD_(this,this.SVt_,t,i,this.oQ_());this.vn_().td_();return this}RVt_(){return this.SVt_}rB_(t,i){super.rB_(t,i);if(i===!0){this.bHt_(t,i);this.NHt_(t,i);this.k$t_(t,i)}else{t=this.gt_();this.bHt_(t);this.NHt_(t);this.k$t_(t)}return this}setRadius(t){if(this.Xz_!==t){this.Xz_=t;this.TRt_().td_()}return this}xVt_(){return this.Xz_}fn_(){return this.DIt_}k6_(t){if(this.DIt_!==t){this.DIt_=t;this.TRt_().td_()}return this}bHt_(t,i){if(this.F$t_===t)return this;this.F$t_=hl.jD_(this,this.F$t_,t,i,this.oQ_());this.vn_().td_();return this}VHt_(){return this.F$t_}NHt_(t,i){if(this.x$t_===t)return this;this.x$t_=hl.jD_(this,this.x$t_,t,i,this.oQ_());this.vn_().td_();return this}PHt_(){return this.x$t_}k$t_(t,i){if(this.L$t_===t)return this;this.L$t_=hl.jD_(this,this.L$t_,t,i,this.oQ_());this.vn_().td_();return this}U$t_(){return this.L$t_}setPosition(t){if(this.Qgt_===t||this.Qgt_.bs_(t,NA.Je_))return this;this.td_();this.Qgt_=t==null?this.Qgt_.vs_(NaN,NaN):this.Qgt_.vs_(t.getX(),t.getY());this.TRt_().td_();return this}td_(t,i){const s=this.getParent();if(!(s instanceof Ic))return this;super.td_(s.ot_(),i);return this}TRt_(){if(this.getParent()==null||this.fNt_==null||isNaN(this.Qgt_.getX())||isNaN(this.Qgt_.getY()))return this;this.XO_.right.from=this.Qgt_.clone();this.XO_.left.from=this.Qgt_.clone();this.XO_.top.from=this.Qgt_.clone();const t=this.fNt_.JKt_()["center"];this.pi_=this.fNt_.OKt_(this.Qgt_.clone().translate(-t.x,-t.y));if(isNaN(this.pi_["right"])||isNaN(this.pi_["left"])||isNaN(this.pi_["top"]))return this;this.XO_.right.to=this.fNt_.VKt_({right:this.pi_["right"],top:this.fNt_.nA_("top")}).translate(t.x,t.y);this.XO_.left.to=this.fNt_.VKt_({left:this.pi_["left"],right:this.fNt_.nA_("right")}).translate(t.x,t.y);this.XO_.top.to=this.fNt_.VKt_({top:this.pi_["top"],left:this.fNt_.nA_("left")}).translate(t.x,t.y);if(this.Xz_>0||this.DIt_!=null){const t=.5,i=Math.cos(Math.PI/6),s=this.DIt_!=null?Math.max(this.DIt_.Ie_()/2,this.DIt_.Ts_()/2)/i:this.Xz_/2;this.XO_.right.from.translate(-s*t,s*i);this.XO_.left.from.translate(-s*t,-s*i);this.XO_.top.from.translate(s,0)}return this}getPosition(){return this.Qgt_}getValues(){return this.pi_}Y$t_(){return this.XO_}render(t){if(!(isNaN(this.Qgt_.x)||isNaN(this.Qgt_.y)||isNaN(this.pi_["right"])||isNaN(this.pi_["left"])||isNaN(this.pi_["top"]))){if(this.x$t_!=null){if(this.SVt_!=null){t.rB_(this.SVt_);t.oB_(this.XO_.right.from.getX(),this.XO_.right.from.getY(),this.XO_.right.to.getX(),this.XO_.right.to.getY())}t.rB_(this.x$t_);t.oB_(this.XO_.right.from.getX(),this.XO_.right.from.getY(),this.XO_.right.to.getX(),this.XO_.right.to.getY())}if(this.F$t_!=null){if(this.SVt_!=null){t.rB_(this.SVt_);t.oB_(this.XO_.left.from.getX(),this.XO_.left.from.getY(),this.XO_.left.to.getX(),this.XO_.left.to.getY())}t.rB_(this.F$t_);t.oB_(this.XO_.left.from.getX(),this.XO_.left.from.getY(),this.XO_.left.to.getX(),this.XO_.left.to.getY())}if(this.L$t_!=null){if(this.SVt_!=null){t.rB_(this.SVt_);t.oB_(this.XO_.top.from.getX(),this.XO_.top.from.getY(),this.XO_.top.to.getX(),this.XO_.top.to.getY())}t.rB_(this.L$t_);t.oB_(this.XO_.top.from.getX(),this.XO_.top.from.getY(),this.XO_.top.to.getX(),this.XO_.top.to.getY())}if(this.DIt_!=null)this.DIt_.$C_()&&this.DIt_.gR_(this.Qgt_).render(t);else if(this.Xz_>0){if(this.SVt_!=null){t.rB_(this.SVt_);t.yR_(this.Qgt_.getX()-this.Xz_/2,this.Qgt_.getY()-this.Xz_/2,this.Xz_,this.Xz_)}if(this.gt_()!=null||this.ct_()!=null){t.iQ_(this.ct_());t.rB_(this.gt_());t.yR_(this.Qgt_.getX()-this.Xz_/2,this.Qgt_.getY()-this.Xz_/2,this.Xz_,this.Xz_)}}}}N_(){const t=super.N_();t["radius"]=this.xVt_();t["outlinestyle"]=this.RVt_();return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["radius"]!==void 0&&this.setRadius(t["radius"]);t["outlinestyle"]!==void 0&&this.GVt_(t["outlinestyle"],!(t["outlinestyle"]instanceof hl));return this}};i=t([_s("geotoolkit.controls.tools.TernaryCrossHair.TernaryCrossHairCursor")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiaW52YWxpZGF0ZSI6InRkXyIsInNldExpbmVTdHlsZSI6InJCXyJ9fX0g"),HU=Ci(function(){let i=class t extends YC{constructor(t){super(t);this.yVt_=this.GE_()}SE_(t,i){super.SE_(t);i!==!1&&(this.yVt_=t);return this}DVt_(){return this.yVt_}};i=t([_s("geotoolkit.controls.tools.TernaryCrossHair.TernaryCrossHairText")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRBbmNob3JUeXBlIjoiU0VfIn19fSAg"),qU=function(){let i=class t extends sI{constructor(t,i){super();this.fNt_=i;this._dx=0;this._dy=0;this.JVt_=!1;this.PVt_=!1;this.KC_(!1);this.Qgt_=new lA(Number.NaN,Number.NaN);this._$_={};this.OVt_=(t,i,s)=>{this._$_[t]={border:{padding:0,visible:!1},text:new HU({text:"",alignment:i,rotationangle:s,ispointingup:!0}).qC_("cross-hair-label")};this.GY_(this._$_[t].text)};this.OVt_("right",dA.re_,0);this.OVt_("left",dA.le_,-Math.PI/3);this.OVt_("top",dA.le_,Math.PI/3);this.g_(t)}zVt_(t){this.XVt_=t;return this}g_(t){TU(t)||(t=qa.Wi_(t));t instanceof qa&&(this.fX_=t);let i;for(i in this._$_)if(this._$_.hasOwnProperty(i))if(t.hasOwnProperty(i)&&TU(t)){this._$_[i].text.g_(t[i]);this._$_[i].text.dt_(t[i])}else this._$_[i].text.g_(this.fX_);return this}FE_(){return this.fX_}x__(t){let i;for(i in this._$_)this._$_.hasOwnProperty(i)&&this._$_[i].text.nf_(t);return this}setPosition(t){if(this.Qgt_===t||this.Qgt_.bs_(t,NA.Je_))return this;this.Qgt_=t==null?this.Qgt_.vs_(NaN,NaN):this.Qgt_.vs_(t.getX(),t.getY());this.jVt_();return this}jVt_(){const t=this.XVt_.getValues(),i=this.XVt_.Y$t_();if(i.right.to==null||i.left.to==null||i.top.to==null)return this;this.ZVt_("right",i.right.to,t["right"]);this.ZVt_("left",i.left.to,t["left"]);this.ZVt_("top",i.top.to,t["top"]);return this}ZVt_(t,i,s){let e=i.getX(),A=i.getY();const n=this._$_[t];if(isNaN(this.Qgt_.getX())||isNaN(this.Qgt_.getY())||isNaN(e)||isNaN(A)||isNaN(s)){n.visibility==null&&(n.visibility=n.text.$C_());n.text.nf_(!1)}else if(n.visibility!=null){n.text.nf_(n.visibility);n.visibility=null}if(!n.text.$C_())return;const h=s.toFixed(2);n.text.a_(h);const r=n.text.XX_(),o=n.text.if_();let l=0,u=0;if(r!==0){l=bn.$c_(r,0,o);u=bn.$c_(0,r,o)}const a=bn.$c_(0,n.text.Ts_(),o);switch(t){case"right":A-=u;i.translate(-(-2*u-a)*Math.tan(Math.PI/6),-2*u-a);break;case"left":e+=l;A+=u;i.translate((2*u+a)*.5,2*u+a);break;case"top":e-=2*l;i.translate(-2*u-a,0);break}n.text.SE_(n.text.DVt_(),!1);n.text.gR_(e,A)}_Vt_(t){return this._$_[t]}getPosition(){return this.Qgt_}};i=t([_s("geotoolkit.controls.tools.TernaryCrossHair.TernaryCrossHairLabels")],i);return i}(),JU=Ci(function(){let i=class t extends OS{constructor(t,i){const s=t==null||t["textstyle"]==null?(new qa).setColor(FU).nF_(xU):null,e=Pi(t,{ternarygrid:null,layer:t instanceof Ic?t:null,name:typeof i=="string"&&i!==""?i:"cross-hair",linestyle:new hl(FU,1,[3,2]).qD_({x:!0,y:!0}),textstyle:s},!0);super(e);this.eFt_({pointermove:this.XFt_.bind(this),pointerup:this.Ct_.bind(this),pointerdown:this.zFt_.bind(this),"cg-enter":t=>{this.notify(xS.Vkt_,this,t)},"cg-leave":t=>{this.setPosition(LU,!1,t);this.notify(xS.Okt_,this,t)}});this.fNt_=e["ternarygrid"];this.$Vt_=!0;this.tOt_=null;this.sOt_=new KU({ternarygrid:this.fNt_}).rB_(e["linestyle"]).setPosition(LU);this.Jgt_.GY_(this.sOt_);this.eOt_=null;(YU(e)||e==null||e["labels"]!=="none")&&this.AOt_(e["textstyle"],this.fNt_);this.nOt_(e)}nOt_(t){if((t=Es(t))==null)return this;t["linestyle"]!=null&&this.sOt_.rB_(t["linestyle"]);t["fillstyle"]!=null&&this.sOt_.iQ_(t["fillstyle"]);t["outlinestyle"]!=null&&this.sOt_.GVt_(t["outlinestyle"]);t["top"]!==void 0&&this.sOt_.k$t_(t["top"]);t["right"]!==void 0&&this.sOt_.NHt_(t["right"]);t["left"]!==void 0&&this.sOt_.bHt_(t["left"]);t["radius"]!==void 0&&this.sOt_.setRadius(t["radius"]);t["symbol"]!==void 0&&this.sOt_.k6_(t["symbol"]);this.sOt_.TRt_();if(t["labels"]!=null&&(t["labels"]==="none"||t["labels"]===!1)){if((t["labels"]==="none"||t["labels"]===!1)&&this.eOt_){this.Jgt_.removeChild(this.eOt_);this.eOt_=null}return this}YU(t)&&!this.eOt_&&this.AOt_(t["textstyle"],this.fNt_);if(this.eOt_==null)return this;t["textstyle"]!==void 0&&this.eOt_.g_(t["textstyle"]);this.eOt_.jVt_();return this}Pkt_(){this.rOt_();super.Pkt_()}rB_(t,i){this.sOt_.rB_(t,i);return this}gt_(){return this.sOt_.gt_()}iQ_(t,i){this.sOt_.iQ_(t,i);return this}ct_(){return this.sOt_.ct_()}GVt_(t,i){this.sOt_.GVt_(t,i);return this}RVt_(){return this.sOt_.RVt_()}setRadius(t){this.sOt_.setRadius(t);return this}xVt_(){return this.sOt_.xVt_()}k6_(t){this.sOt_.k6_(t);return this}fn_(){return this.sOt_.fn_()}N_(){const t=super.N_();t["linestyle"]=this.sOt_.gt_();t["fillstyle"]=this.sOt_.ct_();t["outlinestyle"]=this.sOt_.RVt_();t["top"]=this.sOt_.U$t_();t["right"]=this.sOt_.PHt_();t["left"]=this.sOt_.VHt_();t["radius"]=this.sOt_.xVt_();t["symbol"]=this.sOt_.fn_();if(this.eOt_==null)return t;t["textstyle"]=this.eOt_.FE_();return t}dt_(t){super.dt_(t);this.nOt_(t);return this}g_(t){this.eOt_!=null&&this.eOt_.g_(t);return this}bHt_(t,i){this.sOt_.bHt_(t,i);return this}VHt_(){return this.sOt_.VHt_()}NHt_(t,i){this.sOt_.NHt_(t,i);return this}PHt_(){return this.sOt_.PHt_()}k$t_(t,i){this.sOt_.k$t_(t,i);return this}U$t_(){return this.sOt_.U$t_()}isVisible(){return this.sOt_.$C_()}nf_(t){if(this.$Vt_!==t){this.$Vt_=t;this.rOt_();this.notify(xS.Jkt_,this)}return this}getPosition(){return this.sOt_.getPosition()}lOt_(t){let i=this.getPosition();this.tOt_!=null&&(i=this.uOt_(this.tOt_));const s=this.tOt_;this.setPosition(i,t);this.tOt_=s;return this}setPosition(t,i,s){const e=this.sOt_.getPosition();if(e===t||e!=null&&e.bs_(t,NA.Je_))return this;this.sOt_.setPosition(t);this.eOt_!=null&&this.eOt_.setPosition(t);this.tOt_=null;if(i!==!0){const i=this.isActive();this.setActive(!0);this.notify(tF.EVt_,this,new $k(s,t));i||this.setActive(i)}return this}aOt_(t,i){if(this.eOt_==null)return this;const s=this.eOt_._Vt_(t);s!=null&&(s.WVt_=i);return this}XFt_(t){if(!this.isEnabled()||!this.Jgt_)return;const i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;t.preventDefault();let s=new lA(Number.NaN,Number.NaN);if(i instanceof Ic)if(ys(i,Vm)){s=i.uI_(t.Fkt_()).clone();(isNaN(s.getX())||isNaN(s.getY()))&&s.vs_(Number.NaN,Number.NaN)}else{s=this.bFt_(i,t);i.ot_().contains(s)||s.vs_(Number.NaN,Number.NaN)}const e=this.getPosition();if(e==null||e.bs_(s,NA.Je_)===!1){this.setPosition(s,!1,t);this.tOt_=this.IOt_(s)}}IOt_(t){if(this.Jgt_==null||isNaN(t.x)||isNaN(t.y))return t;const i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;return i&&i.if_()?i.if_().transformPoint(t):t}uOt_(t){if(this.Jgt_==null||isNaN(t.x)||isNaN(t.y))return t;const i=this.Jgt_ instanceof TQ?this.Jgt_.getParent():this.Jgt_;return i&&i.if_()?i.if_().aI_(t):t}Ct_(t){this.isEnabled()&&this.Jgt_&&this.notify(tF.pVt_,this,new $k(t,this.getPosition()))}zFt_(t){if(!this.isEnabled()||!this.Jgt_)return;let i=new lA(Number.NaN,Number.NaN);if(this.Jgt_ instanceof TQ){const s=this.Jgt_.getParent();if(s instanceof Ic){i=this.bFt_(this.Jgt_.getParent(),t);s.ot_().contains(i)||i.vs_(Number.NaN,Number.NaN)}}else if(this.Jgt_){i=this.bFt_(this.Jgt_,t);this.Jgt_.ot_().contains(i)||i.vs_(Number.NaN,Number.NaN)}this.notify(tF.mVt_,this,new $k(t,i))}dispose(){this.sOt_.dispose();if(this.eOt_!=null){this.eOt_.dispose();this.eOt_=null}super.dispose()}rOt_(){const t=this.isEnabled()&&this.$Vt_;this.sOt_.nf_(t);this.eOt_!=null&&this.eOt_.nf_(t);return this}AOt_(t,i){if(!this.eOt_){t||(t=(new qa).setColor(FU).nF_(xU));this.eOt_=new qU(t,i).zVt_(this.sOt_).setPosition(null).x__(!0).nf_(this.$Vt_);this.Jgt_.GY_(this.eOt_)}}};i=t([_s("geotoolkit.controls.tools.TernaryCrossHair")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIiwic2V0TGluZVN0eWxlIjoickJfIiwiZ2V0TGluZVN0eWxlIjoiZ3RfIiwic2V0RmlsbFN0eWxlIjoiaVFfIiwiZ2V0RmlsbFN0eWxlIjoiY3RfIiwic2V0T3V0TGluZVN0eWxlIjoiR1Z0XyIsImdldE91dExpbmVTdHlsZSI6IlJWdF8iLCJnZXRSYWRpdXMiOiJ4VnRfIiwic2V0U3ltYm9sIjoiazZfIiwiZ2V0U3ltYm9sIjoiZm5fIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsInNldFRleHRTdHlsZSI6ImdfIiwic2V0TGVmdExpbmVTdHlsZSI6ImJIdF8iLCJnZXRMZWZ0TGluZVN0eWxlIjoiVkh0XyIsInNldFJpZ2h0TGluZVN0eWxlIjoiTkh0XyIsImdldFJpZ2h0TGluZVN0eWxlIjoiUEh0XyIsInNldFRvcExpbmVTdHlsZSI6ImskdF8iLCJnZXRUb3BMaW5lU3R5bGUiOiJVJHRfIiwic2V0VmlzaWJsZSI6Im5mXyIsInVwZGF0ZUN1cnNvclBvc2l0aW9uIjoibE90XyIsInNldExhYmVsc1RleHRDb252ZXJ0ZXIiOiJhT3RfIn19fSAg");let PU=null;const VU=function(t,i){return t.target===i.r3_()};var OU=function(){var t=class{constructor(){this.Sxt_=[];this.T$t_=this.zxt_.bind(this);OS.oFt_("pointermove").forEach((t=>{const i=this.Sxt_.length===0?null:this.Sxt_[0].getPlot();Mi.addEventListener(t,this.T$t_,!0,i)}));this.K$t_=t=>{if(this.H$t_!=null){this.H$t_.q$t_(t);this.H$t_=null}};Mi.document.addEventListener("mouseleave",this.K$t_,!0);this.H$t_=null}zxt_(t){if(this.H$t_!=null&&VU(t,this.H$t_.getPlot()))return;let i=null;for(let s=0;s<this.Sxt_.length;s++)if(this.Sxt_[s].isEnabled()!==!1&&VU(t,this.Sxt_[s].getPlot())){i=this.Sxt_[s];break}if(this.H$t_!==i){this.H$t_!=null&&this.H$t_.q$t_(t);this.H$t_=i;this.H$t_!=null&&this.H$t_.J$t_(t)}}add(t){this.Sxt_.push(t);return this}remove(t){const i=this.Sxt_.indexOf(t);if(i!==-1){this.Sxt_.splice(i,1);this.H$t_===t&&(this.H$t_=null)}return this}static Ai_(){PU==null&&(PU=new t);return PU}};return t}();const WU={capture:!1,passive:!1},zU=function(t,i,s){s==null&&(s=[]);if(i==null||t==null)return s;if(t instanceof oG){const e=t.Rxt_();for(let t=0;t<e.length;t++)zU(e[t],i,s)}else if(t instanceof OS){const e=t.RFt_(i);e!=null&&e.forEach((t=>{s.indexOf(t)===-1&&s.push(t)}))}return s};var XU=Ci(function(){let i=class t{constructor(t,i){this.E8_=t;this.ojt_=t.r3_();this.yxt_=new lG(t.getRoot(),"root").lFt_(this.E8_);this.P$t_=new bF({plot:this.E8_});this.yxt_.add(this.P$t_);this.V$t_=this.O$t_.bind(this);this.yxt_.on(xS.sDt_,this.V$t_);this.W$t_=!1;OU.Ai_().add(this);this.vxt_={};this.Skt_={};this.z$t_=i;this.z$t_!==!0&&t.K3_()!=null&&t.K3_().Kv_(!1)}dispose(t){this.yxt_.off(xS.sDt_,this.V$t_);OU.Ai_().remove(this);for(const t in this.vxt_)this.detachEvent(t);t===!0&&this.yxt_.dispose();this.yxt_=null;this.E8_=null;this.ojt_=null;this.vxt_=null}Kv_(t){this.yxt_.Kv_(t);return this}isEnabled(){return this.yxt_.isEnabled()}C5_(t){return this.yxt_.C5_(t)}d5_(t){return this.yxt_.d5_(t)}B5_(){return this.yxt_.B5_()}J$t_(t){if(this.W$t_===!0)return this;this.W$t_=!0;const i=OS.MFt_(t,this.E8_),s=new lA(i.x,i.y),e=new FS("cg-enter",null,s,this.E8_.getRoot(),this.E8_);this.X$t_(e);this.yxt_.dispatchEvent("cg-enter",e);return this}q$t_(t){if(this.W$t_===!1)return this;this.W$t_=!1;const i=OS.MFt_(t,this.E8_),s=new lA(i.x,i.y),e=new FS("cg-leave",null,s,this.E8_.getRoot(),this.E8_);this.X$t_(e);this.yxt_.dispatchEvent("cg-leave",e);return this}getPlot(){return this.E8_}PP_(){return this.E8_.getRoot()}detachEvent(t){if(!this.vxt_[t])return this;this.vxt_[t].forEach((function(i){je.As_()?window.removeEventListener(t,i["callback"],WU):i["object"].removeEventListener(t,i["callback"],WU)}));return this}attachEvent(t){const i=i=>{const s=OS.MFt_(i,this.E8_),e=new FS(t,i,new lA(s.x,s.y),this.E8_.getRoot(),this.E8_);this.X$t_(e);this.yxt_.dispatchEvent(t,e);i.currentTarget===i.target&&i.type==="touchend"&&i.preventDefault()};this.vxt_[t]==null&&(this.vxt_[t]=[]);const s=zU(this.yxt_,t,[]);s!=null&&s.length>0&&s.forEach((s=>{const e=s==null?this.E8_.r3_():s,A=undefined;if(this.vxt_[t].filter((function(t){return t["object"]===e})).length===0){if(je.As_()){WU["object"]=e;Mi.addEventListener(t,i,WU,this.getPlot())}else e.addEventListener(t,i,WU);this.vxt_[t].push({object:e,callback:i})}}));return this}add(t){this.yxt_.add(t);this.O$t_();return this}O$t_(){const t=this.yxt_.xxt_();for(const i in t)this.attachEvent(i)}remove(t){this.yxt_.Fxt_(t)!==-1&&this.yxt_.remove(t);return this}K3_(){return this.yxt_}X$t_(t){const i=t.Lkt_();if(!i||!this.yxt_.dFt_(t))return;if(i["touches"]!=null){const s=[],e=t.getPlot(),A=e.getBoundingClientRect();for(let t=0;t<i["touches"].length;t++){const n=i["touches"][t];s.push(new lA((n["clientX"]-A["left"])/(A["right"]-A["left"])*e.Ie_(),(n["clientY"]-A["top"])/(A["bottom"]-A["top"])*e.Ts_()))}t.Kkt_(s);return}const s=i["pointerId"];switch(t.Dkt_()){case"pointerup":this.Skt_[s]!=null&&delete this.Skt_[s];break;case"pointerdown":this.Skt_[s]=t.Fkt_();break;case"pointermove":this.Skt_[s]!=null&&(this.Skt_[s]=t.Fkt_());break}const e=[];for(const t in this.Skt_)this.Skt_.hasOwnProperty(t)&&e.push(this.Skt_[t]);t.Kkt_(e)}};i=t([Zs(Rw),_s("geotoolkit.controls.tools.ToolsContainer")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRFbmFibGVkIjoiS3ZfIiwiZ2V0VG9vbEJ5TmFtZSI6IkM1XyIsImdldFRvb2xCeVR5cGUiOiJkNV8iLCJsaXN0VG9vbHNOYW1lcyI6IkI1XyIsImdldE5vZGUiOiJQUF8iLCJnZXRUb29sIjoiSzNfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var jU=Ci(function(){let i=class t{static start(){Rw.I5_((function(t){let i=null;const s=t.getRoot();if(s!=null&&XU!=null){i=new XU(t,!0);if(typeof s.K3_=="function"){const t=s.K3_();ys(t,Sw)&&i.add(t)}}return i}))}};i=t([_s("geotoolkit.controls.tools.Tools")],i);return i}(),2,"eyJnZXRDbGFzc05hbWUiOiJEXyJ9");const ZU=27,_U=Mi.setTimeout,$U=function(t,i){return i},tY=function(){return null};var iY=Ci(function(){let i=class t extends OS{constructor(t){const i=qi(t,{divelement:Py,style:null,name:"tooltip",callback:null,autoupdate:!0,autoflip:!1,delay:0,mode:CF.__,alignment:dA.ie_,orientation:fg.ax_,offsetx:10,offsety:10,slots:{},positionhandler:$U,sizehandler:tY},!0);super(i);this.Llt_=[];this.U$_=[];this.yC_=null;this.d4_=i["mode"];this.j$t_=i["delay"];this.eFt_({pointerup:this.Ct_.bind(this),pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),dblclick:this.WFt_.bind(this),"cg-enter":this.Vkt_.bind(this),"cg-leave":this.Okt_.bind(this),keydown:{callback:this.IPt_.bind(this),object:Mi,enabled:this.d4_!==CF.__}});typeof i["init"]=="function"&&i["init"](this);this.Z$t_=typeof i["divelement"]=="function"&&i["divelement"]!==Py?i["divelement"]:null;this.d4_=i["mode"];this.IK_=0;this.fK_=0;this.bF_(i["alignment"]);this.$K_=i["orientation"];this.yC_=i["cssclasses"];const s=this.Z$t_==null?Py:this.Z$t_;this._$t_=[Vy.Ai_().create(s,this.d4_===CF.__,this.yC_)];this.x0_=i["callback"];this.$$t_=!1;this.t0t_=!1;this.HPt_=null;this.i0t_=null;this.YOt_=null;this.gtt_=null;this.xM_=this.s0t_.bind(this);this.e0t_=null;this.A0t_=null;this.n0t_(i)}Qut_(t){if(t!=null){this._$t_.length!==0&&this._$t_.forEach((i=>{i.Qut_(t)}));this.IK_=t}return this}bK_(){return this.IK_}Eut_(t){if(t!=null){this._$t_.length!==0&&this._$t_.forEach((i=>{i.Eut_(t)}));this.fK_=t}return this}NK_(){return this.fK_}bF_(t){if(typeof t=="number"){t=wA(t);ki("ToolTipTool::setAlignment(number) is deprecated since 4.0, use AnchorType type instead of number")}this.Hk_=t;return this}vF_(){return this.Hk_}setOrientation(t){this.$K_=t;return this}KH_(){return this.$K_}jOt_(t){this.d4_=t;return this}ZOt_(){return this.d4_}h0t_(){this._$t_.forEach((t=>t.dispose()));this._$t_=[];this.Llt_=[]}r0t_(t){this.x0_=t;return this}o0t_(){return this.x0_}N_(){const t=super.N_();t["offsetx"]=this.bK_();t["offsety"]=this.NK_();t["alignment"]=this.vF_();t["orientation"]=this.KH_();t["mode"]=this.d4_;t["autoupdate"]=this.$$t_;t["autoflip"]=this.t0t_;t["delay"]=this.j$t_;t["cssclasses"]=this.yC_;return t}dt_(t){super.dt_(t);this.n0t_(t);return this}setOptions(t){return this.dt_(t)}s0t_(){if(!this.$$t_&&this.isEnabled()&&this.x0_!=null&&this.i0t_!=null)if(this.j$t_==null||this.j$t_<=0)this.l0t_(this.i0t_);else{this.gtt_!=null&&clearTimeout(this.gtt_);this.gtt_=_U((()=>{this.gtt_=null;this.l0t_(this.i0t_)}),this.j$t_)}return this}u0t_(){return this.e0t_}a0t_(t){if(typeof t=="function"){this.e0t_=t;return this}this.e0t_=$U;return this}g0t_(){return this.A0t_}c0t_(t){if(typeof t=="function"){this.A0t_=t;return this}this.A0t_=tY;return this}put_(t){this.yC_=t;this._$t_.length>0&&this._$t_.forEach((t=>{t.put_(this.yC_)}));return this}fd_(){return this.yC_}I0t_(){return this.Z$t_!=null?this.Z$t_:this._$t_[0].J2_()[0]}f0t_(t){if(t==null)return this;if(typeof t=="function"){const i=this._$t_.length;this.h0t_();this.Z$t_=t;this.C0t_(i);return this}if(Mi.HTMLElement!=null&&t instanceof Mi.HTMLElement){this.h0t_();this.C0t_(1,t);return this}this.h0t_();t=Array.isArray(t)?t:[t];this.C0t_(t.length);t.forEach(((t,i)=>{this._$t_[i]!=null&&this._$t_[i].flt_(t)}));return this}dispose(){const t=this.mgt_();t instanceof ch&&t.off(rh.sC_,this.xM_);this.YOt_&&clearTimeout(this.YOt_);this.gtt_&&clearTimeout(this.gtt_);this.h0t_();super.dispose()}Pkt_(){super.Pkt_();this.isEnabled()!==!0&&this.d0t_()}WFt_(t){this.d4_===CF.et_&&this.B0t_(t)}Vkt_(t){this.notify(xS.Vkt_,this,t)}Okt_(t){if(this.d4_===CF.__){this.d0t_();if(this.gtt_!=null){clearTimeout(this.gtt_);this.gtt_=null}this.i0t_=null}this.notify(xS.Okt_,this,t)}IPt_(t){if(t.Lkt_()["keyCode"]===ZU){this.d0t_();this.$$t_=!0}}C0t_(t,i){const s=this._$t_.length;if(t<=s)return this;const e=this.Z$t_==null?Py:this.Z$t_;for(let A=s;A<t;A++){const t=Vy.Ai_().create(i||e,this.d4_===CF.__,this.yC_);this._$t_.push(t);this._$t_[A].d$_(this.IK_,this.fK_);this._$t_[A].SE_(this.Hk_);this._$t_[A].setOrientation(this.$K_);this._$t_[A].put_(this.yC_)}return this}n0t_(t){if((t=Es(t))==null)return this;t["cssclasses"]!=null&&this.put_(t["cssclasses"]);t["divelement"]!=null&&this.f0t_(t["divelement"]);t["mode"]!==void 0&&(this.d4_=t["mode"]);t["offsetx"]!==void 0&&this.Qut_(t["offsetx"]);t["offsety"]!==void 0&&this.Eut_(t["offsety"]);if(t["alignment"]!==void 0){this.Hk_=t["alignment"];this._$t_[0].SE_(t["alignment"]);this._$t_.length!==0&&this._$t_.forEach((i=>{i.SE_(t["alignment"])}))}if(t["orientation"]!==void 0){this.$K_=t["orientation"];this._$t_[0].setOrientation(t["orientation"]);this._$t_.length!==0&&this._$t_.forEach((i=>{i.setOrientation(t["orientation"])}))}t["callback"]!==void 0&&this.r0t_(t["callback"]);if(t["autoupdate"]!==void 0){const i=this.mgt_();if(i instanceof ch){i.off(rh.sC_,this.xM_);t["autoupdate"]&&i.on(rh.sC_,this.xM_)}}t["autoflip"]!==void 0&&(this.t0t_=t["autoflip"]);t["delay"]!==void 0&&(this.j$t_=t["delay"]);t["positionhandler"]!==void 0&&this.a0t_(t["positionhandler"]);t["sizehandler"]!==void 0&&this.c0t_(t["sizehandler"]);return this}XFt_(t){this.d4_===CF.__&&this.B0t_(t,this.j$t_)}zFt_(t){this.HPt_=t.Fkt_();switch(this.d4_){case CF.__:return;case CF.tt_:this.B0t_(t);break;case CF.dOt_:this.YOt_&&clearTimeout(this.YOt_);this.YOt_=_U((()=>{this.B0t_(t);this.YOt_=null}),750);break;case CF.et_:case CF.st_:case CF.it_:break}}Ct_(t){switch(this.d4_){case CF.it_:this.B0t_(t);break;case CF.st_:this.HPt_!=null&&this.HPt_.bs_(t.Fkt_())&&this.B0t_(t);break;case CF.dOt_:if(this.YOt_){clearTimeout(this.YOt_);this.YOt_=null}break}this.HPt_=null}d0t_(){if(this._$t_.length!==0){this._$t_.forEach((t=>{t.hide()}));this.Llt_=[]}}A$_(t){const i=t.qkt_();this._$t_.forEach(((s,e)=>{this.Llt_[e]?s.show(i,this.Llt_[e],this.t0t_,t):s.hide()}))}l0t_(t,i){let s,e;if(t instanceof FS&&i instanceof lA){s=i;e=t}else{s=t;e=i}this.$$t_=!0;const A=e instanceof FS?e.qkt_():this.w0t_;this.w0t_=A;this.Llt_=[];let n=null,h=null,r=null,o=null,l=this.x0_(s,e,this);if(l==null||Array.isArray(l)&&l.length===0){this.d0t_();this.$$t_=!1;return this}const u=Array.isArray(l);l=Array.isArray(l)?l:[l];this.C0t_(l.length);let a=null;const g=[],c=[];l.forEach(((t,i)=>{const I=this._$t_[i];let f=null,C=null;if(typeof t=="object"&&t["content"]!=null&&t["content"].length!==0){n=u?t["clientpoint"]:t["clientpoint"]==null?A:t["clientpoint"];r=t["sizerange"];C=n instanceof lA?n:null;f=t["content"]}else if(typeof t=="string"&&t.length!==0){h==null&&(h=this.e0t_(s,A,e));o==null&&(o=this.A0t_(s,A,e,l));n=Array.isArray(h)?h[0]:h;r=Array.isArray(o)?o[0]:o;C=n instanceof lA?n:A;f=t}else{this.Llt_[i]="";I.hide()}g[i]=r;c[i]=C;this.Llt_[i]=f;if(this.t0t_===!1)I.Dut_(r).show(C,f,this.t0t_,e);else{I.SE_(this.Hk_);a==null&&(a=this.Hk_);const t=I.Dut_(r).Mut_(C,f,this.t0t_,e);t!==dA.W_&&t!==this.Hk_&&(a=t)}}));this.t0t_===!0&&l.forEach(((t,i)=>{if(this.Llt_[i]!==""){const t=undefined;this._$t_[i].SE_(a).Dut_(g[i]).show(c[i],this.Llt_[i],!1,e)}}));this.$$t_=!1;return this}B0t_(t,i){if(!this.isEnabled())return this;if(this.x0_==null){this.d0t_();return this}const s=t.PP_(),e=this.bFt_(null,t);this.i0t_=s?s.if_().aI_(e):e;this.w0t_=t.qkt_();if(i==null||i<=0)this.l0t_(this.i0t_,t);else{if(this.gtt_!=null){this.d4_===CF.__?this.A$_(t):this.d0t_();clearTimeout(this.gtt_)}this.gtt_=_U((()=>{this.gtt_=null;this.l0t_(this.i0t_,t)}),i)}return this}};i=t([_s("geotoolkit.controls.tools.ToolTipTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPZmZzZXRYIjoiUXV0XyIsImdldE9mZnNldFgiOiJiS18iLCJzZXRPZmZzZXRZIjoiRXV0XyIsImdldE9mZnNldFkiOiJOS18iLCJzZXRBbGlnbm1lbnQiOiJiRl8iLCJnZXRBbGlnbm1lbnQiOiJ2Rl8iLCJnZXRPcmllbnRhdGlvbiI6IktIXyIsInNldFBvaW50ZXJNb2RlIjoiak90XyIsImdldFBvaW50ZXJNb2RlIjoiWk90XyIsInNldENhbGxiYWNrIjoicjB0XyIsImdldENhbGxiYWNrIjoibzB0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJ1cGRhdGVJbmZvIjoiczB0XyIsImdldFRvb2x0aXBQb3NpdGlvbkhhbmRsZXIiOiJ1MHRfIiwic2V0VG9vbHRpcFBvc2l0aW9uSGFuZGxlciI6ImEwdF8iLCJnZXRUb29sdGlwU2l6ZUhhbmRsZXIiOiJnMHRfIiwic2V0VG9vbHRpcFNpemVIYW5kbGVyIjoiYzB0XyIsInNldENzc0NsYXNzZXMiOiJwdXRfIiwiZ2V0Q3NzQ2xhc3NlcyI6ImZkXyIsImdldERpdkVsZW1lbnQiOiJJMHRfIiwic2V0RGl2RWxlbWVudCI6ImYwdF8iLCJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIn19fSAg");var sY=function(){let i=class t extends OS{constructor(t){const i=qi(t,{group:void 0,name:"level-manipulator",chart:void 0,callback:null},!0);if(i["chart"]==null)throw new Error("value of chart is null");const s=undefined;super({slots:{},name:i["name"],layer:i["group"]});this.eFt_({mousedown:this.zFt_.bind(this),keydown:{callback:this.IPt_.bind(this),object:Mi,enabled:!0},keyup:{callback:this.fPt_.bind(this),object:Mi,enabled:!0}});this.L_t_=!1;this.Q0t_=i["chart"];this.$f_=i["callback"];this.E0t_=0;this.p0t_=[];this.Q0t_.vqt_(!0)}zFt_(t){if(this.isEnabled()){const i=this.bFt_(null,t);let s;const e=this.Q0t_.$X_(i);if(e.length>0)if(this.L_t_){this.Q0t_.Sqt_(e[0]["id"],!0);if(this.$f_&&this.E0t_>0){this.p0t_.pop();s={list:this.p0t_,action:"removed"};this.$f_.call(this,s);this.E0t_-=1}else this.E0t_>0&&(this.E0t_-=1)}else if(e[0]["children"]>=1){this.Q0t_.Sqt_(e[0]["id"],!1);this.E0t_+=1;this.p0t_.push(e[0]["name"]);if(this.$f_){s={list:this.p0t_,action:"added"};this.$f_.call(this,s)}}}}IPt_(t){this.L_t_!==!0&&t.Lkt_().ctrlKey===!0&&(this.L_t_=!0)}fPt_(){this.isActive()||this.L_t_===!1||this.L_t_&&(this.L_t_=!1)}};i=t([_s("geotoolkit.controls.tools.treemap.TreemapLevelTool")],i);return i}();var eY=Ci(function(){let i=class t extends WS{constructor(t,i){super(t);if(i){this.m0t_=i["visiblemodellimits"]||null;this.y0t_=i["scaling"]}else{this.m0t_=null;this.y0t_=null}}D0t_(){return this.y0t_}ot_(){return this.m0t_}};i=t([_s("geotoolkit.controls.tools.ZoomEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTY2FsaW5nIjoiRDB0XyIsImdldFZpc2libGVNb2RlbExpbWl0cyI6Im90XyJ9fX0g");const AY=Mi.setTimeout;var nY=Ci({X:"X",Y:"Y",XY:"XY",M0t_:"TouchPoint"},2,"eyJUb3VjaFBvaW50IjoiTTB0XyJ9");const hY=[nY.X,nY.Y,nY.XY,nY.M0t_];var rY=Ci({XZt_:"onZoomStart",v0t_:"onZoom",jZt_:"onZoomEnd",WFt_:"onDoubleClick"},2,"eyJvblpvb21TdGFydCI6IlhadF8iLCJvblpvb20iOiJ2MHRfIiwib25ab29tRW5kIjoialp0XyIsIm9uRG91YmxlQ2xpY2siOiJXRnRfIn0g");const oY=25,lY=1.25,uY=3,aY=new mA,gY=new mA,cY=new Gn;var IY=Ci(function(){let i=class t extends OS{constructor(t){(t=t?Es(t):{})["name"]==null&&(t["name"]="zoom");super(t);this.eFt_({wheel:this.jFt_.bind(this),pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),pointerup:{callback:this.Ct_.bind(this),object:Mi}});this.bft_=0;this.Nft_=1/0;this.b0t_=1.1;this.N0t_=0;this.d4_=nY.XY;this.Bi_=ve.ei_()[De.Lt_];t["mode"]!=null&&(this.d4_=t["mode"]);if(t["easing"]!=null)if(typeof t["easing"]=="function")this.Bi_=t["easing"];else{const i=ve.ei_();this.Bi_=i[t["easing"]]||this.Bi_}t["min"]!=null&&(this.bft_=Math.max(0,t["min"]));t["max"]!=null&&(this.Nft_=Math.max(this.bft_,t["max"]));t["speed"]!=null&&(this.b0t_=t["speed"]);t["time"]!=null&&(this.N0t_=Math.max(0,t["time"]));this.S0t_=0;this.G0t_=null;this.R0t_=new mA;this.xFt_([0,1,2])}Cxt_(t){if(this.G0t_!=null){clearTimeout(this.G0t_);this.S0t_=0;this.G0t_=null;this.notify(rY.jZt_,this,new eY(t,null))}return this}TZt_(t){if(typeof t=="number"){ki("setMode(mode) with mode as number is deprecated since 4.0, use Mode type instead");t=hY[t]}this.d4_=t;return this}start(t){this.isActive()||this.notify(rY.XZt_,this,new eY(t,null));return super.start(t)}zFt_(t){if(!this.dFt_(t))return;const i=this.mgt_(),s=t.Hkt_();if(i!=null&&s.length===2){this.k0t_(s[0],s[1],this.R0t_);t.stopPropagation(!0,!0);this.start(t)}}XFt_(t){if(!this.isActive()||!this.dFt_(t))return;const i=this.mgt_(),s=t.Hkt_();if(i==null||s.length!==2)return;const e=i.if_();this.k0t_(s[0],s[1],aY);gY.ce_(aY);e.gI_(aY,aY);e.gI_(this.R0t_,this.R0t_);Gn.xI_(aY,this.R0t_,!1,!1,!1,cY);const A=i.ot_(),n=cY.rn_(A);let h,r;switch(this.d4_){case nY.X:h=aY.Ie_()/this.R0t_.Ie_();r=1;n.setY(A.getY()).Be_(A.Ts_());break;case nY.Y:h=1;r=aY.Ts_()/this.R0t_.Ts_();n.setX(A.getX()).de_(A.Ie_());break;case nY.M0t_:h=aY.He_()/this.R0t_.He_();r=h;break;default:h=aY.Ie_()/this.R0t_.Ie_();r=aY.Ts_()/this.R0t_.Ts_()}this.R0t_.ce_(gY);t.stopPropagation(!0,!0);const o=t.Fkt_().bs_(s[0])?s[1]:s[0];this.notify(rY.v0t_,this,new eY(t,{visiblemodellimits:n,scaling:{x:h,y:r,point:o.N_()}}))}WFt_(t){t.Lkt_()["target"]===t.getPlot().getCanvas()&&this.notify(rY.WFt_,this,new eY(t,{scaling:{x:this.b0t_,y:this.b0t_,point:t.Fkt_()}}))}Ct_(t){if(this.isActive()&&this.dFt_(t)){const i=undefined;if(t.Hkt_().length<2){this.notify(rY.jZt_,this,new eY(t,null));this.stop()}}const i=this.rFt_();this.kFt_(t.Fkt_())&&i instanceof lG&&i.PP_().$Y_().contains(t.Fkt_())&&this.WFt_(t)}jFt_(t){const i=t.Lkt_(),s=i["deltaY"];if(!s)return;i.preventDefault();if(this.S0t_===0)this.S0t_=Math.sign(s);else{if(this.S0t_>0!=s>0){this.Cxt_();this.stop();return}this.S0t_=NA.clamp(this.S0t_*lY,-uY,uY)}let e=Math.pow(this.b0t_,-this.S0t_);const A=t.PP_(),n=A instanceof iu?A.ut_():null;if(n!=null&&(this.bft_>0||this.Nft_<1/0)){const t=n.BI_()*e;this.S0t_>0&&t>this.Nft_?e*=this.Nft_/t:this.S0t_<0&&t<this.bft_&&(e*=this.bft_/t)}this.d4_===nY.X?this.F0t_(e,1,t.Fkt_().N_(),t):this.d4_===nY.Y?this.F0t_(1,e,t.Fkt_().N_(),t):this.F0t_(e,e,t.Fkt_().N_(),t)}F0t_(t,i,s,e){this.G0t_!=null&&clearTimeout(this.G0t_);this.start(e);if(this.N0t_<=0){this.notify(rY.v0t_,this,new eY(e,{scaling:{x:t,y:i,point:s}}));this.notify(rY.jZt_,this,new eY(e,null));this.stop();this.S0t_=0;this.G0t_=null;return}const A=Date.now(),n=A+this.N0t_;let h=1,r=1;const o=()=>{const l=Math.min(Date.now(),n),u=this.Bi_(null,l-A,0,1,this.N0t_),a=1+u*(t-1),g=1+u*(i-1);this.notify(rY.v0t_,this,new eY(e,{scaling:{x:a/h,y:g/r,point:s}}));if(l===n){this.S0t_=0;this.G0t_=null;this.notify(rY.jZt_,this,new eY(e,null));this.stop()}else{h=a;r=g;this.G0t_=AY(o,oY)}};this.G0t_=AY(o,oY)}zoom(t,i,s,e){this.F0t_(t,i||t,{x:s,y:e})}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["mode"]!=null&&this.TZt_(t["mode"]);if(t["easing"]!=null)if(typeof t["easing"]=="function")this.Bi_=t["easing"];else{const i=ve.ei_();this.Bi_=i[t["easing"]]||this.Bi_}t["min"]!=null&&(this.bft_=Math.max(0,t["min"]));t["max"]!=null&&(this.Nft_=Math.max(this.bft_,t["max"]));t["speed"]>1&&(this.b0t_=t["speed"]);t["time"]!=null&&(this.N0t_=Math.max(0,t["time"]));return this}N_(){const t=super.N_();t["mode"]=this.d4_;t["easing"]=this.Bi_;t["min"]=this.bft_;t["max"]=this.Nft_;t["speed"]=this.b0t_;t["time"]=this.N0t_;return t}k0t_(t,i,s){s.ce_(t.getX(),t.getY(),i.getX(),i.getY());const e=s.Ie_(),A=s.Ts_();if(e<1||A<1){const t=s.ye_(),i=s.De_();e<1&&s.de_(1);A<1&&s.Be_(1);s.me_(t,i)}return s}Pkt_(){this.isEnabled()||this.Cxt_();super.Pkt_()}};i=t([_s("geotoolkit.controls.tools.Zoom")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzdG9wSW5lcnRpYSI6IkN4dF8iLCJzZXRNb2RlIjoiVFp0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJvbkVuYWJsZWRTdGF0ZUNoYW5nZWQiOiJQa3RfIn19fSAg");var fY=function(){let i=class t extends $n{};i=t([_s("geotoolkit.controls.util.LegendSource")],i);return i}();var CY=function(){let i=class t extends wS{constructor(t){super(t);this.SGt_=2}fit(t,i,s){super.fit(t,i,s);t=Array.isArray(t)?t:this.Us_["x"];i=Array.isArray(i)?i:this.Us_["y"];if(this.GGt_.length>=this.SGt_&&this.RGt_)this.NGt_=t=>this.GGt_[0]+this.GGt_[1]*Math.log(t);else{let e=[0,0,0,0,0],A=0;this.JGt_!=null&&(e=this.JGt_);const n=Math.min(t.length,i.length);for(;A<n;A++)if(i[A]!=null){const n=s&&s[A]!=null&&s[A]>0?s[A]:1;e[0]+=n*Math.log(t[A]);e[1]+=n*i[A]*Math.log(t[A]);e[2]+=n*i[A];e[3]+=n*Math.pow(Math.log(t[A]),2);e[4]+=n}const h=(e[4]*e[1]-e[2]*e[0])/(e[4]*e[3]-e[0]*e[0]),r=(e[2]-h*e[0])/e[4];this.JGt_=e;this.GGt_=[r,h];this.NGt_=t=>r+h*Math.log(t)}}};i=t([_s("geotoolkit.controls.util.regression.Logarithmic")],i);return i}();var dY=Ci(function(){let i=class t extends wS{constructor(t){super(t=qi(t,{order:2},!0));this._order=t["order"];this.x0t_=[];this.L0t_=[]}setOptions(t){super.setOptions(t);if(t["order"]!=null){this._order=t["order"];this.LGt_=!0}if(this.LGt_&&this.Us_["x"]&&this.Us_["y"]){this.fit(this.Us_["x"],this.Us_["y"],[]);this.notify(fS.bGt_,this,this);this.LGt_=!1}return this}JV_(){const t=super.JV_();t["order"]=this._order;return t}VGt_(){super.VGt_();this.x0t_=[];this.L0t_=[]}fit(t,i,s){super.fit(t,i,s);t=Array.isArray(t)?t:this.Us_["x"];i=Array.isArray(i)?i:this.Us_["y"];if(this.GGt_.length>=this.SGt_&&this.RGt_)this.NGt_=function(t){let i=0;for(let s=0;s<this.SGt_;s++)i+=this.GGt_[s]*Math.pow(t,s);return i};else{const e=this._order,A=this.x0t_,n=this.L0t_,h=e+1;let r=0,o=0,l=0,u,a;const g=Math.min(t.length,i.length);for(;l<h;l++){r=A[l]!=null?A[l]:0;for(u=0;u<g;u++){a=s&&s[u]!=null&&s[u]>0?s[u]:1;i[u]!=null&&(r+=a*Math.pow(t[u],l)*i[u])}A[l]=r;const e=n[l]!=null?n[l]:[];for(let A=0;A<h;A++){o=e[A]!=null?e[A]:0;for(u=0;u<g;u++){a=s&&s[u]!=null&&s[u]>0?s[u]:1;i[u]!=null&&(o+=a*Math.pow(t[u],l+A))}e[A]=o}n[l]=e}n[h]=A;const c=function(t,i){let s=0,e=0,A=0,n=0;const h=t.length-1,r=new Array(i);for(let i=0;i<h;i++){A=i;for(s=i+1;s<h;s++)Math.abs(t[i][s])>Math.abs(t[i][A])&&(A=s);for(e=i;e<h+1;e++){n=t[e][i];t[e][i]=t[e][A];t[e][A]=n}for(s=i+1;s<h;s++)for(e=h;e>=i;e--)t[e][s]-=t[e][i]*t[i][s]/t[i][i]}for(s=h-1;s>=0;s--){n=0;for(e=s+1;e<h;e++)n+=t[e][s]*r[e];r[s]=(t[h][s]-n)/t[s][s]}return r},I=undefined,f=c(JSON.parse(JSON.stringify(n)),h);this.SGt_=f.length;this.GGt_=f;this.NGt_=t=>{let i=0;for(let s=0;s<f.length;s++)i+=f[s]*Math.pow(t,s);return i}}}};i=t([_s("geotoolkit.controls.util.regression.Polynomial")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwicmVzZXRNb2RlbCI6IlZHdF8ifX19");var BY=function(){let i=class t extends wS{constructor(t){super(t);this.SGt_=2}fit(t,i,s){super.fit(t,i,s);t=Array.isArray(t)?t:this.Us_["x"];i=Array.isArray(i)?i:this.Us_["y"];this.GGt_.length>=this.SGt_&&this.RGt_&&(this.NGt_=t=>this.GGt_[0]*Math.pow(t,this.GGt_[1]));let e=[0,0,0,0,0],A=0;this.JGt_!=null&&(e=this.JGt_);const n=Math.min(t.length,i.length);for(;A<n;A++)if(i[A]!==null){const n=s&&s[A]!=null&&s[A]>0?s[A]:1;e[0]+=n*Math.log(t[A]);e[1]+=n*Math.log(i[A])*Math.log(t[A]);e[2]+=n*Math.log(i[A]);e[3]+=n*Math.pow(Math.log(t[A]),2);e[4]+=n}const h=(e[4]*e[1]-e[2]*e[0])/(e[4]*e[3]-e[0]*e[0]),r=Math.exp((e[2]-h*e[0])/e[4]);this.GGt_=[r,h];this.JGt_=e;this.NGt_=t=>r*Math.pow(t,h)}};i=t([_s("geotoolkit.controls.util.regression.Power")],i);return i}();export {tD,rD,oD,uD,aD,fD,dD,BD,wD,QD,mD,yD,DD,MD,vD,ND,SD,GD,RD,kD,FD,XD,jD,ZD,_D,BM,QM,GM,RM,FM,UM,YM,VM,OM,iv,sv,ev,Av,uv,av,gv,Qv,Ev,Gv,Uv,Yv,qv,Jv,Pv,Vv,Ov,Wv,zv,Xv,db,Eb,pb,mb,yb,Db,Mb,vb,Ob,_b,$b,iN,sN,eN,oN,lN,cN,fN,CN,BN,op,wN,WN,ZN,_N,$N,sS,eS,AS,IS,fS,CS,wS,QS,ES,DS,MS,NS,SS,RS,kS,FS,xS,OS,WS,zS,jS,sG,eG,AG,oG,lG,uG,cG,IG,BG,vG,bG,NG,RG,kG,FG,LG,YG,TG,KG,HG,sR,gR,DR,bR,LR,KR,qR,JR,PR,ZR,_R,$R,tk,uk,Ik,fk,Ck,Bk,Ek,mk,Dk,Fk,xk,Lk,Tk,Jk,Pk,Ok,Wk,zk,Xk,jk,Zk,_k,$k,fg,ha,tF,cF,IF,fF,CF,dF,BF,wF,MF,bF,NF,SF,GF,RF,kF,HF,WF,zF,XF,jF,ZF,_F,$F,tx,ix,sx,ex,Ax,nx,hx,rx,ox,lx,ux,ax,gx,cx,mx,yx,Dx,Mx,Nx,Sx,Gx,Rx,Ux,Jx,Px,Vx,Ox,Wx,zx,Xx,jx,Zx,_x,$x,iL,sL,eL,AL,fL,CL,QL,mL,DL,ML,vL,LL,UL,YL,qL,JL,PL,VL,zL,XL,jL,AU,nU,hU,rU,oU,gU,cU,IU,wU,QU,EU,pU,mU,yU,DU,MU,vU,bU,NU,SU,kU,JU,XU,jU,iY,sY,eY,nY,rY,IY,fY,CY,dY,BY};