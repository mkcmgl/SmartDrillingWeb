/* eslint-disable */
import {__decorate as t} from 'tslib';import {_s,Yu,yu,sI,nA,RA,Mi,Ic,ch,lA,mA,Gn,nl,Al,hl,wr,mr,Fo,xo,Nl,Fa,qa,ie,wh,dp,Au,rh,oe,Ss,nE,oE,ff,df,Gi,wo,ns,qi,ap,iu,Rd,YC,$o,ka,dA,NC,se,me,pe,Ee,ye,zn,Bh,LA,Fn,wE,Zs,qh,Ci} from '@int/impl/geotoolkit.base.js';import {FB} from '@int/impl/geotoolkit.http.js';var yj=function(){let i=class t{constructor(){this.evi_=null;this.ov_=null}dn_(){return this.ov_}};i=t([_s("geotoolkit.svg.ElementParser")],i);return i}();var Dj=function(){var i;let s=i=class t{constructor(t){this.Rf_={};this.oBi_={};if(t){let i;for(i in t.Rf_)t.Rf_.hasOwnProperty(i)&&(this.Rf_[i]=t.Rf_[i]);for(i in t.oBi_)t.oBi_.hasOwnProperty(i)&&(this.oBi_[i]=t.oBi_[i].clone())}this.ov_=""}HC_(t){this.ov_=t||"";return this}toString(){let t="";for(const i in this.Rf_)if(this.Rf_.hasOwnProperty(i)){t+=i;t+=":";t+=this.Rf_[i];t+=";"}return t}setStyle(t,i,s){if(t==null&&s==null)return this;s!=null?this.oBi_.hasOwnProperty(s)?this.oBi_[s].merge(i):this.oBi_[s]=i:this.Rf_[t]=i;return this}getStyle(t,i){return i?this.oBi_.hasOwnProperty(t)?this.oBi_[t]:null:this.Rf_.hasOwnProperty(t)?this.Rf_[t]:null}merge(t){if(t==null||t.Rf_===null)return this;let i;for(i in t.Rf_)t.Rf_.hasOwnProperty(i)&&(this.Rf_[i]=t.Rf_[i]);for(i in t.oBi_)t.oBi_.hasOwnProperty(i)&&(this.oBi_[i]==null||this.oBi_[i]===void 0?this.oBi_[i]=t.oBi_[i]:this.oBi_[i].merge(t.oBi_[i]));return this}clone(){return new i(this)}};s=i=t([_s("geotoolkit.svg.SvgStyle")],s);return s}();var Mj=function(){var t;return class{constructor(t){this.Oq_=t||new Yu}beginPath(){}bezierCurveTo(t,i,s,e,A,n){this.Oq_.bezierCurveTo(t,i,s,e,A,n);return this}moveTo(t,i){this.Oq_.moveTo(t,i);return this}vS_(){return this.Oq_}closePath(){}}}();var vj=function(){var t=class{static eS_(t,i,s,e,A,n,h,r,o,l){let u,a,g,c,I;u=r===1?yu.sS_(i,s,e,A,n,h):yu.sS_(i,s,e,A,h,n);if(!(u.length<1))if(r===1)for(g=0;g<u.length;++g){a=u[g];t.bezierCurveTo(a.x2,a.y2,a.x3,a.y3,a.x4,a.y4)}else for(g=u.length-1;g>=0;g--){a=u[g];if(g===0){c=o;I=l}else{c=u[g-1].x4;I=u[g-1].y4}t.bezierCurveTo(a.x3,a.y3,a.x2,a.y2,c,I)}}};return t}();var bj=function(){var i;let s=i=class t{constructor(t,i,s,e,A,n,h,r){this.Avi_=h||null;this.z9_=t||[];this.vQ_=i||null;this.li_=s||null;this.$q_=e||null;this.NY_=A||null;this.dgt_=n||null;this.nvi_=r}hvi_(t){if(!(t instanceof sI))return this;this.Avi_=t;return this}rvi_(){return this.Avi_}Ji_(){return this.vQ_}dI_(t){this.vQ_=t;return this}ovi_(){return this.z9_}getStyle(){return this.li_}setStyle(t){this.li_=t;return this}getArea(){return this.$q_}Lti_(t){this.$q_=t;return this}lvi_(){return this.NY_}uvi_(t){this.NY_=t;return this}e7_(){return this.dgt_}addShape(t){this.z9_.push(t);return this}avi_(t,s){return new i(s||[],this.Ji_(),this.getStyle(),this.getArea(),this.lvi_(),t,this.rvi_(),this)}cW_(t){return t==null?this:new i(this.ovi_(),this.Ji_(),t,this.getArea(),this.lvi_(),this.e7_(),this.rvi_(),this)}};s=i=t([_s("geotoolkit.svg.ParserContext")],s);return s}();const Nj=1,Sj=2,Gj=2,Rj=4,kj=new nA(0,0,0,0),Fj=20,xj=.001,Lj="ZzMmLlHhVvSsCcQqTtAa",Uj="0123456789.eE",Yj=undefined,Tj=","+" \t\n\r";var Kj=function(){let i=class t{constructor(t){this.iw_=t;this._i=0;this.uPt_=-1}gvi_(){if(this.uPt_!==-1){const t=this._i,i=this.cvi_();if(i!==""&&i!==null){this._i=t;return Lj[this.uPt_]==="M"?Lj[4]:Lj[this.uPt_]==="m"?Lj[5]:Lj[this.uPt_]}}if(this._i>=this.iw_.length)return"0";while((this.uPt_=Lj.indexOf(this.iw_[this._i]))===-1){this._i++;if(this._i>=this.iw_.length)return"0"}this._i++;return Lj[this.uPt_]}Ivi_(){if(this._i>=this.iw_.length)return"";while(Tj.indexOf(this.iw_[this._i])!==-1){this._i++;if(this._i>=this.iw_.length)return null}return this.iw_.substring(this._i++,this._i)}cvi_(){if(this._i>=this.iw_.length)return"";while(Tj.indexOf(this.iw_[this._i])!==-1){this._i++;if(this._i>=this.iw_.length)return null}const t=this._i;this.iw_[this._i]==="-"&&this._i++;let i=!1,s=!1;while(Uj.indexOf(this.iw_[this._i])!==-1||(this.iw_[this._i]==="+"||this.iw_[this._i]==="-")&&this._i>0&&(this.iw_[this._i-1]==="e"||this.iw_[this._i-1]==="E")){if(this.iw_[this._i]==="."){if(i||s)break;i=!0}if(this.iw_[this._i]==="e"||this.iw_[this._i]==="E"){if(s)break;s=!0}this._i++;if(this._i>=this.iw_.length)break}return this.iw_.substring(t,this._i)}};i=t([_s("geotoolkit.svg.PathTokenizer")],i);return i}(),Hj=function(){let i=class t extends yj{constructor(){super();this.fvi_=RA.gs_();this.evi_=null}Cvi_(){return this.evi_}dvi_(t){this.evi_=t}angle(t,i,s,e){const A=t*s+i*e,n=t*e-i*s,h=Math.atan2(n,A);return h<0?2*Math.PI+h:h}getAttribute(t,i){if(!t||!t.attributes)return"";const s=t.attributes.getNamedItem(i);return s?s.nodeValue:""}Bvi_(t,i){if(!i)return null;const s=this.evi_.wvi_()[t.nodeName];let e=new Dj(s);const A=i.getStyle().clone(),n=this.getAttribute(t,"class");if(this.Qvi_(n)){const t=n.split(" ");for(let i=0;i<t.length;i++)e=e.merge(this.evi_.getStyle("."+t[i]))}const h=this.getAttribute(t,"id");this.Qvi_(h)&&(e=e.merge(this.evi_.getStyle("#"+h)));const r=this.getAttribute(t,"style");if(this.Qvi_(r)){const t=this.evi_.Evi_().qp_(r);for(const i in t)t.hasOwnProperty(i)&&e.setStyle(i,t[i])}const o=undefined,l=this;["visibility","fill","fill-rule","int:stroke-fixedwidth","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke","stroke-dasharray","stroke-opacity","fill-opacity","vector-effect"].forEach((function(i){const s=l.getAttribute(t,i);l.Qvi_(s)&&e.setStyle(i,s)}));let u=this.getAttribute(t,"opacity");if(this.Qvi_(u)){const t=A.getStyle("opacity");if(this.Qvi_(t)){let i=parseFloat(t);(isNaN(i)||i>1)&&(i=1);let s=parseFloat(u);if(!isNaN(s)){s>1&&(s=1);i*=s}e.setStyle("opacity",i)}else e.setStyle("opacity",u)}u=this.getAttribute(t,"text-anchor");this.Qvi_(u)&&e.setStyle("text-anchor",u);u=this.getAttribute(t,"text-decoration");this.Qvi_(u)&&e.setStyle("text-decoration",u);let a=this.getAttribute(t,"font-family");const g=this.getAttribute(t,"font-style"),c=this.getAttribute(t,"font-size"),I=this.getAttribute(t,"font-weight"),f=this.getAttribute(t,"baseline-shift");if(this.Qvi_(a)){a.startsWith("'")&&a.endsWith("'")&&(a=a.replace(/'/g,""));e.setStyle("font-family",a)}this.Qvi_(g)&&e.setStyle("font-style",g);this.Qvi_(I)&&e.setStyle("font-weight",I);this.Qvi_(c)&&e.setStyle("font-size",c);this.Qvi_(f)&&e.setStyle("baseline-shift",f);return A.merge(e)}pvi_(t,i){if(this.Cvi_()==null)throw Error("Document parser was not found");if(!t||!i)throw Error("Invalid parameters");const s=i.e7_();let e=null;for(let A=t.firstChild;A!==null;A=A.nextSibling)if(A.nodeType===Mi.Node.ELEMENT_NODE){e=this.Cvi_().JCi_(A,i);e!=null&&e!==s&&s instanceof Ic&&e instanceof ch&&s.GY_(e)}return this}mvi_(t){let i=0,s=0,e,A,n,h,r=0,o=0,l=0,u=0,a="",g=!1,c=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;const f=undefined,C=new Kj(t),d=new Yu;while((a=C.gvi_())!=="0"){switch(a){case"Z":case"z":d.lineTo(l,u);d.close();i=l;s=u;continue;case"A":case"a":const t=this.yvi_(C.cvi_(),0),n=this.Dvi_(C.cvi_(),0),h=this.Dvi_(C.cvi_(),0)*(Math.PI/180),r=this.Dvi_(C.Ivi_(),0),o=this.Dvi_(C.Ivi_(),0);e=this.yvi_(C.cvi_(),0);A=this.Dvi_(C.cvi_(),0);if(a==="a"){e+=i;A+=s}if(t<1e-7||n<1e-7){d.moveTo(e+t,A+n);d.lineTo(e,A);break}const g=new Mj(d),c=this.Mvi_(t,n,h,!!r,!!o,{x:e,y:A},{x:i,y:s});vj.eS_(g,c.cx,c.cy,2*t,2*n,c.eSt_,c.eSt_+c.vvi_,o,e,A);i=e;s=A;continue}const t=a==="V"||a==="v"?this.yvi_(C.cvi_(),0):this.Dvi_(C.cvi_(),0);switch(a){case"h":d.lineTo(i=t+i,s);continue;case"H":d.lineTo(i=t,s);continue;case"v":d.lineTo(i,s=t+s);continue;case"V":d.lineTo(i,s=t);continue}const f=this.Dvi_(C.cvi_(),0);switch(a){case"m":if(g){l+=t;u+=f;i+=t;s+=f;d.moveTo(i,s);continue}l=t;u=f;i=t;s=f;o=t;r=f;d.moveTo(i,s);g=!0;continue;case"M":l=t;u=f;i=t;s=f;o=t;r=f;d.moveTo(i,s);g=!0;continue;case"L":i=t;s=f;o=t;r=f;d.lineTo(i,s);continue;case"l":i+=t;s+=f;d.lineTo(i,s);continue;case"T":c===Number.NEGATIVE_INFINITY&&(c=i);I===Number.NEGATIVE_INFINITY&&(I=s);n=i+(i-c);h=s+(s-I);this.quadTo(d,i,s,n,h,t,f);i=t;s=f;c=n;I=h;continue;case"t":c===Number.NEGATIVE_INFINITY&&(c=i);I===Number.NEGATIVE_INFINITY&&(I=s);n=i+(i-c);h=s+(s-I);this.quadTo(d,i,s,i+(i-c),s+(s-I),i=t+i,s=f+s);c=n;I=h;continue}e=this.yvi_(C.cvi_(),0);A=this.Dvi_(C.cvi_(),0);switch(a){case"S":Number.isFinite(o)===!1?d.bezierCurveTo(i,s,t,f,i=e,s=A):d.bezierCurveTo(i+(i-o),s+(s-r),t,f,i=e,s=A);o=e;r=A;continue;case"s":Number.isFinite(o)===!1?d.bezierCurveTo(i,s,t+i,f+s,e+i,A+s):d.bezierCurveTo(i+(i-o),s+(s-r),t+i,f+s,e+i,A+s);o=t+i;r=f+s;i=e+i;s=A+s;continue;case"Q":this.quadTo(d,i,s,t,f,i=e,s=A);c=t;I=f;continue;case"q":c=t+i;I=f+s;this.quadTo(d,i,s,t+i,f+s,i=e+i,s=A+s);continue}const B=this.yvi_(C.cvi_(),0),w=this.Dvi_(C.cvi_(),0);switch(a){case"C":d.bezierCurveTo(t,f,e,A,i=B,s=w);o=e;r=A;continue;case"c":d.bezierCurveTo(t+i,f+s,e+i,A+s,B+i,w+s);o=e+i;r=A+s;i=B+i;s=w+s;continue}}return d}Mvi_(t,i,s,e,A,n,h){s*=Math.PI/180;const r=new lA(Math.cos(s)*(h.x-n.x)/2+Math.sin(s)*(h.y-n.y)/2,-Math.sin(s)*(h.x-n.x)/2+Math.cos(s)*(h.y-n.y)/2),o=Math.pow(r.x,2)/Math.pow(t,2)+Math.pow(r.y,2)/Math.pow(i,2);if(o>1){t*=Math.sqrt(o);i*=Math.sqrt(o)}let l=(e===A?-1:1)*Math.sqrt((Math.pow(t,2)*Math.pow(i,2)-Math.pow(t,2)*Math.pow(r.y,2)-Math.pow(i,2)*Math.pow(r.x,2))/(Math.pow(t,2)*Math.pow(r.y,2)+Math.pow(i,2)*Math.pow(r.x,2)));isNaN(l)&&(l=0);const u=new lA(l*t*r.y/i,l*-i*r.x/t),a=new lA((h.x+n.x)/2+Math.cos(s)*u.x-Math.sin(s)*u.y,(h.y+n.y)/2+Math.sin(s)*u.x+Math.cos(s)*u.y),g=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},c=function(t,i){return(t[0]*i[0]+t[1]*i[1])/(g(t)*g(i))},I=function(t,i){return(t[0]*i[1]<t[1]*i[0]?-1:1)*Math.acos(c(t,i))},f=I([1,0],[(r.x-u.x)/t,(r.y-u.y)/i]),C=[(r.x-u.x)/t,(r.y-u.y)/i],d=[(-r.x-u.x)/t,(-r.y-u.y)/i];let B=I(C,d);c(C,d)<=-1&&(B=Math.PI);c(C,d)>=1&&(B=0);return{cx:a.x,cy:a.y,vvi_:B,eSt_:f}}quadTo(t,i,s,e,A,n,h){const r={bvi_:i,Nvi_:s,Svi_:0};this.Gvi_(t,e,A,n,h,r)}Gvi_(t,i,s,e,A,n){n.Svi_++;const h=undefined;if(this.Rvi_(i,s,n.bvi_,n.Nvi_,e,A)<=xj||n.Svi_>=Fj){n.bvi_=e;n.Nvi_=A;t.lineTo(e,A)}else{const h=(n.bvi_+i)*.5,r=(n.Nvi_+s)*.5,o=(e+i)*.5,l=(A+s)*.5,u=(h+o)*.5,a=(r+l)*.5;this.Gvi_(t,h,r,u,a,n);this.Gvi_(t,o,l,e,A,n)}n.Svi_--}Rvi_(t,i,s,e,A,n){const h=Math.sqrt((s-A)*(s-A)+(e-n)*(e-n));let r=0;h!==0&&(r=Math.abs((s-t)*(n-i)-(e-i)*(A-t))/h);return r}yvi_(t,i){return this.kvi_(t,i,Nj)}Dvi_(t,i){return this.kvi_(t,i,Nj)}Fvi_(t,i){return this.kvi_(t,i,Nj)}xvi_(t,i){return this.kvi_(t,i,Rj)}kvi_(t,i,s){if(typeof t!="string"||t.length===0)return i;const e=this.Cvi_().Evi_();return e!==null?this.Lvi_(e.Hp_(t),s):i}Uvi_(t){if(!t)return null;const i=this.Cvi_().Evi_();if(i!==null){let s=i.Hp_(t);const e=this.Lvi_(s,Nj);s=s.xp_();s.Gp_()===s.Gp_("CssOperatorComma")&&(s=s.xp_());const A=this.Lvi_(s,Sj);s=s.xp_();s.Gp_()===s.Gp_("CssOperatorComma")&&(s=s.xp_());const n=this.Lvi_(s,Nj);s=s.xp_();s.Gp_()===s.Gp_("CssOperatorComma")&&(s=s.xp_());const h=this.Lvi_(s,Nj);return new mA(e,A,e+n,A+h)}return null}Lvi_(t,i){switch(t.Gp_()){case t.Gp_("CssInteger"):return t.Fp_();case t.Gp_("CssReal"):return t.Fp_();case t.Gp_("CssPercentage"):const s=this.Cvi_().Yvi_(),e=t.Fp_()/100;switch(i){case Nj:return e*s.Ie_();case Sj:return e*s.Ts_();case Rj:return e*s.Ie_();case Gj:return e*s.Ts_();default:return e*Math.sqrt(s.Ie_()*s.Ie_()+s.Ts_()*s.Ts_())/2}}return t.Fp_()*this.Cvi_().gn_(t.kp_())}Tvi_(t,i){if(i==null||!this.Cvi_().Kvi_()||!t)return null;let s=this.Cvi_().Hvi_(t);if(s==null){const i=this.qvi_("url",t);if(!i.Hs_())return null;const e=i.Gnt_();s=this.Cvi_().Hvi_(e)}if(s==null)return null;let e=this.Cvi_().JCi_(s,i);i.lvi_()!==null&&(e!==null?e.union(i.lvi_()):e=i.lvi_().clone());return e}Jvi_(t,i,s,e){return t}Qvi_(t){return!!t}Pvi_(t){if(!this.Qvi_(t))return null;const i=t.split(")");let s=new Gn;for(let t=0;t<i.length;t++){if(!this.Qvi_(i[t]))continue;const e=i[t]+")";let A=this.qvi_("matrix",e);if(A!==null){const t=[];let i=null;for(let i=0;i<6;i++)t[i]=parseFloat(A.Gnt_());if(t.length>0){i=new Gn(t[0],t[1],t[2],t[3],t[4],t[5]);s=Gn.multiply(s,i)}}else if((A=this.qvi_("scale",e))!==null){const t=this.lw_(A.Gnt_(),1),i=A.Hs_()?this.lw_(A.Gnt_(),t):t;s.scale(t,i)}else if((A=this.qvi_("translate",e))!==null){const t=parseFloat(A.Gnt_()),i=A.Hs_()?this.lw_(A.Gnt_(),0):0;s.translate(t,i)}else if((A=this.qvi_("rotate",e))!==null){const t=parseFloat(A.Gnt_())*(Math.PI/180),i=A.Hs_()?this.lw_(A.Gnt_(),0):0,e=A.Hs_()?this.lw_(A.Gnt_(),0):0;s.translate(i,e);s.rotate(t);s.translate(-i,-e)}else(A=this.qvi_("skewX",e))!==null?s.bI_(Math.tan(parseFloat(A.Gnt_())*(Math.PI/180)),0):(A=this.qvi_("skewY",e))!==null&&s.bI_(0,Math.tan(parseFloat(A.Gnt_())*(Math.PI/180)))}return s}lw_(t,i){if(!this.Qvi_(t))return i;let s=parseFloat(t);isNaN(s)&&(s=i);return s}qvi_(t,i){const s=/\(([^)]+)\)/;if(i.indexOf(t)===-1)return null;class e{constructor(t){this.i=0;this.Vvi_=[];const i=s.exec(t);if(i[1]!=null){const t=i[1].split(/[ ,;\n\r\t]/);for(let i=0;i<t.length;i++)t[i]!==""&&this.Vvi_.push(t[i])}}Hs_(){return this.i<this.Vvi_.length}Gnt_(){return this.Vvi_[this.i++]||null}}return new e(i)}Ovi_(t,i){return t!=null&&i!=null?new Gn(i).vI_(t):t!=null?t.clone():i!=null?i.clone():null}Wvi_(t,i){i==null&&(i=t.getStyle());if(!i)return null;const s=new hl,e=undefined,A={linestyle:s,fillstyle:this.zvi_(this.UQi_(i,"fill"),t)||new wr,visible:!0};s.JD_(Al.ND_);i.getStyle("stroke-width")!==null||i.getStyle("stroke-linecap")!==null||i.getStyle("stroke-linejoin")!==null||i.getStyle("stroke-miterlimit")!==null?s.setColor("black"):s.setColor(kj);let n=this.UQi_(i,"int:stroke-fixedwidth");this.Qvi_(n)||this.Xvi_(s,!0);n=this.UQi_(i,"vector-effect");this.Qvi_(n)&&n.includes("non-scaling-stroke")&&this.Xvi_(s,!1);n=this.UQi_(i,"stroke-width");const h=this.Cvi_().Evi_();if(h&&typeof n=="string"&&n.length>0){const t=h.Hp_(n);t.Gp_()===t.Gp_("CssPixel")&&this.Xvi_(s,!1)}const r=this.xvi_(n,1);s.de_(r);n=this.jvi_(this.UQi_(i,"stroke-linecap"));n!==null&&s.VD_(n);n=this.Zvi_(this.UQi_(i,"stroke-linejoin"));n!==null&&s.JD_(n);const o=this.UQi_(i,"stroke-dasharray");if(this.Qvi_(o)&&o!=="none"){const t=o.split(/[ ,;\n\r\t]/),i=[];for(let s=0;s<t.length;s++){const e=t[s];e[s]!==""&&i.push(parseFloat(e))}this.Xvi_(s,!0);s.IQ_(i)}const l=this.UQi_(i,"stroke");if(this.Qvi_(l)&&l!=="none"){s.setColor(new nA(l));const e=this.zvi_(this.UQi_(i,"stroke"),t);e!=null&&s.iQ_(e)}else s.setColor(kj);n=this.UQi_(i,"fill-opacity");this.Qvi_(n)&&this._vi_(A["fillstyle"],n);n=this.UQi_(i,"opacity");if(this.Qvi_(n)){this._vi_(A["fillstyle"],n);l!=="none"&&this.$vi_(s,n)}n=this.UQi_(i,"stroke-opacity");this.Qvi_(n)&&l!=="none"&&this.$vi_(s,n);n=this.UQi_(i,"display");this.Qvi_(n)&&(A["visible"]=n!=="none");return A}Xvi_(t,i){t.zD_(i);return this}tbi_(t,i){i<0&&(i=0);i>1&&(i=1);(t=nA.Wi_(t)).setAlpha(t.ds_()*i);return t=t.Es_()}_vi_(t,i){const s=parseFloat(i);let e;if(t instanceof mr){const i=t.GQ_();for(let A=0;A<i;A++){e=t.YQ_(A);t.TQ_(A,this.tbi_(e,s))}}else if(t instanceof wr){e=t.getColor();t.setColor(this.tbi_(e,s))}return this}$vi_(t,i){let s=parseFloat(i),e=t.getColor();s<0&&(s=0);s>1&&(s=1);if(typeof e=="string"){const t=this.fvi_[e];e=t?t.clone():RA.cs_(e)}e instanceof nA&&e.setColor(e.Is_(),e.Cs_(),e.fs_(),s*255);t.setColor(e);return this}jvi_(t){return this.Qvi_(t)?t==="butt"?nl.SD_:t==="round"?nl._r_:t==="square"?nl.GD_:null:null}Zvi_(t){return this.Qvi_(t)?t==="miter"?Al.bD_:t==="bevel"?Al.ND_:t==="round"?Al._r_:null:null}ibi_(t,i){return this.kvi_(t,i,Rj)}UQi_(t,i){return t.getStyle(i)}zvi_(t,i){if(!this.Qvi_(t))return new wr("black");const s=this.qvi_("url",t);let e=wr.RB_;if(s===null){e=new wr;const i=t==="none"?kj:new nA(t);e.setColor(i);return e}const A=s.Gnt_();if(A===null)return e;const n=this.Cvi_().Hvi_(A);if(n!=null)switch(n.nodeName){case"linearGradient":e=this.sbi_(n,i);break;case"radialGradient":e=this.ebi_(n,i);break;case"pattern":e=this.Abi_(n,i);break;default:e=null;break}return e}sbi_(t,i){if(t.nodeName!=="linearGradient")return null;const s=[];let e=t,A="",n="",h="",r="",o="",l="",u="";while(e!=null){A=A||this.getAttribute(e,"gradientTransform");n=n||this.getAttribute(e,"gradientUnits");h=h||this.getAttribute(e,"spreadMethod");r=r||this.getAttribute(e,"x1");o=o||this.getAttribute(e,"x2");l=l||this.getAttribute(e,"y1");u=u||this.getAttribute(e,"y2");s.length===0&&this.nbi_(e,s);e=this.Cvi_().Hvi_(this.getAttribute(e,"xlink:href"))}const a=n==="userSpaceOnUse";let g,c,I,f;if(a){g=this.yvi_(r,0);I=this.Dvi_(l,0);c=this.yvi_(o,0);f=this.Dvi_(u,0)}else{g=this.hbi_(r,0);I=this.hbi_(l,0);c=this.hbi_(o,1);f=this.hbi_(u,0)}if(g===c&&I===f)return new wr(s.length>0?s[s.length-1].color:kj);const C=new lA(g,I),d=new lA(c,f),B=new Fo(s[0].color,s[s.length-1].color,C,d,null,h==="pad"||h==="reflect"||h==="repeat"?h:null,a===!0?"userSpaceOnUse":"objectBoundingBox"),w=this.Pvi_(A);w!==null&&B.dI_(w);for(let t=0;t<s.length;t++)B.LQ_(s[t].offset,s[t].color);const Q=new bj(null,i.Ji_(),new Dj,null,null,B,i.rvi_());this.pvi_(t,Q);return B}ebi_(t,i){if(t.nodeName!=="radialGradient")return null;let s=t,e="",A="",n="",h="",r="",o="",l="",u="";const a=[];while(s!=null){e=e||this.getAttribute(s,"gradientTransform");n=n||this.getAttribute(s,"gradientUnits");A=A||this.getAttribute(s,"spreadMethod");h=h||this.getAttribute(s,"cx");r=r||this.getAttribute(s,"cy");o=o||this.getAttribute(s,"r");l=l||this.getAttribute(s,"fx");u=u||this.getAttribute(s,"fy");a.length===0&&this.nbi_(s,a);s=this.Cvi_().Hvi_(this.getAttribute(s,"xlink:href"))}const g=n==="userSpaceOnUse";let c=0,I=0,f=0,C=0,d;if(g){const t=this.Cvi_().Yvi_();c=this.Qvi_(h)?this.yvi_(h,c):t.getCenter().getX();I=this.Qvi_(r)?this.Dvi_(r,I):t.getCenter().getY();d=this.Qvi_(o)?this.yvi_(o,100):t.Ts_()*.5;f=this.Qvi_(l)?this.yvi_(l,f):c;C=this.Qvi_(u)?this.Dvi_(u,C):I}else{c=this.hbi_(h,.5);I=this.hbi_(r,.5);d=this.hbi_(o,.5);f=this.hbi_(l,c);C=this.hbi_(u,I)}const B=new lA(c,I),w=new lA(f,C);a.sort((function(t,i){return t.offset-i.offset}));const Q=new xo({startcolor:a[0].color,endcolor:a[a.length-1].color,innercenter:w,innerradius:0,outercenter:B,outerradius:d,spreadmethod:A==="pad"||A==="reflect"||A==="repeat"?A:null,unittype:g===!0?"userSpaceOnUse":"objectBoundingBox"}),E=this.Pvi_(e);E!==null&&Q.dI_(E);for(let t=1;t<a.length-1;t++)Q.LQ_(a[t].offset,a[t].color);const p=new bj(null,i.Ji_(),new Dj,null,null,Q,i.rvi_());this.pvi_(t,p);return Q}nbi_(t,i){for(let s=0;s<t.childNodes.length;s++){const e=t.childNodes.item(s);if(e!=null&&e.nodeType===Mi.Node.ELEMENT_NODE&&e.nodeName==="stop"){const t=this.getAttribute(e,"offset"),s=this.Cvi_().Evi_().Hp_(t);let A=s.Fp_(),n,h;s.Gp_()===s.Gp_("CssPercentage")&&(A/=100);A=Math.max(0,Math.min(A,1));const r=this.getAttribute(e,"style");if(this.Qvi_(r)){const t=this.Cvi_().Evi_().qp_(r);n=t["stop-color"];h=t["stop-opacity"]}else{n=this.getAttribute(e,"stop-color");h=this.getAttribute(e,"stop-opacity")}const o=n==="none"?new nA(0,0,0,1):new nA(n),l=o.Is_(),u=o.Cs_(),a=o.fs_();let g=o.ds_()/255;if(this.Qvi_(h)){const t=undefined;g=this.Cvi_().Evi_().Hp_(h).Fp_()}const c="rgba("+[l,u,a,g].join(",")+")";i.push({offset:A,color:c})}}}hbi_(t,i){if(!this.Qvi_(t))return i;const s=this.Cvi_().Evi_().Hp_(t);return s.Gp_()===s.Gp_("CssPercentage")?s.Fp_()/100:s.Fp_()}Abi_(t,i){let s="",e="",A="",n="",h="",r="",o="",l="",u="",a="",g=t;while(t!=null){s.length===0&&(s=this.getAttribute(t,"x"));e.length===0&&(e=this.getAttribute(t,"y"));A.length===0&&(A=this.getAttribute(t,"height"));n.length===0&&(n=this.getAttribute(t,"width"));h.length===0&&(h=this.getAttribute(t,"viewBox"));r.length===0&&(r=this.getAttribute(t,"patternUnits"));o.length===0&&(o=this.getAttribute(t,"patternContentUnits"));l.length===0&&(l=this.getAttribute(t,"patternTransform"));u.length===0&&(u=this.getAttribute(t,"preserveAspectRatio"));a.length===0&&(a=this.getAttribute(t,"clip-path"));t.childNodes.length>0&&g.childNodes.length===0&&(g=t);t=this.Cvi_().Hvi_(this.getAttribute(t,"xlink:href"))}const c=r==="userSpaceOnUse";let I,f,C,d;if(c){I=this.yvi_(s,0);f=this.Dvi_(e,0);C=this.Fvi_(A,100);d=this.xvi_(n,100)}else{const t=i.e7_(),e=ie(t)?t.getBounds():new mA;I=e.getX()+e.Ie_()*this.yvi_(s,0);f=e.getY()+e.Ts_()*this.Dvi_(s,0);C=e.Ts_()*this.Fvi_(A,100);d=e.Ie_()*this.xvi_(n,100)}const B=new mA(I,f,I+d,f+C),w=this.Uvi_(h),Q=this.Pvi_(l)||new Gn,E=new wr,p=new sI;p.iQ_(new wr("white"));const m=new bj([],Q,new Dj,null,null,p,i.rvi_());this.pvi_(g,m);const y=o==="userSpaceOnUse";w!=null?p.Lq_(w):y||c?p.Lq_(B):p.Lq_(new mA(this.yvi_(s,0),this.Dvi_(e,0),this.xvi_(n,100),this.Fvi_(A,100)));p.ht_(B);if(m.ovi_().length>0){const t=Nl.Ai_().createPattern(p,{scalable:this.Cvi_().rbi_()});E.IQ_(t);return E}return null}Zy_(t,i){if(t==null)return i;let s=12;const e=t.getStyle();let A=e.getStyle("font-family"),n=e.getStyle("font-style");const h=e.getStyle("font-size");let r=e.getStyle("font-weight");if(A==null&&n==null&&h==null&&r==null)return i;let o=e.getStyle("text-align");switch(o){case"middle":o=Fa.ne_;break;case"end":o=Fa.End;break;default:o=Fa.Mk_}this.Qvi_(A)||(A="Arial");this.Qvi_(n)&&n!=="normal"||(n="");this.Qvi_(r)||(r="normal");if(this.Qvi_(h)){s=Number(h);Number.isNaN(s)&&(s=h)}else switch(h){case"xx-small":s/=1.2*1.2*1.2;break;case"x-small":s/=1.2*1.2;break;case"small":s/=1.2;break;case"xx-large":s*=1.2*1.2*1.2;break;case"x-large":s*=1.2*1.2;break;case"large":s*=1.2;break;default:s=this.ibi_(h,s)}Number(s)===s&&(s+="px");return(i||new qa).dt_({alignment:o,font:(n+" "+r+" "+s+" "+A).trim()})}};i=t([_s("geotoolkit.svg.AbstractParser")],i);return i}();var qj=function(){let i=class t extends Hj{obi_(t,i,s){if(t==null||i==null||s==null)return t;this.lbi_(t,i,s);const e=s.getStyle().getStyle("visibility"),A=!(this.Qvi_(e)&&e==="hidden");t.nf_(A);s.ovi_().push(t);this.ubi_(t,i,s);const n=this.getAttribute(i,"id");t.JC_(this.Qvi_(n)?n:null);return t}lbi_(t,i,s){if(!t)return;if(!this.Cvi_().Kvi_())return;const e=this.getAttribute(i,"clip-path");if(!this.Qvi_(e))return;const A=this.Tvi_(e,s);A&&t.xb_(new wh(A))}ubi_(t,i,s){const e=t.Bt_!==void 0?t.Bt_():null,A=t.wt_!==void 0?t.wt_():null;e!=null&&A!=null}};i=t([_s("geotoolkit.svg.ShapeParser")],i);return i}();var Jj=function(){let i=class t extends qj{constructor(){super();this.ov_="rect"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.yvi_(this.getAttribute(t,"x"),0),e=this.Dvi_(this.getAttribute(t,"y"),0),A=this.xvi_(this.getAttribute(t,"width"),100),n=this.Fvi_(this.getAttribute(t,"height"),100);let h=this.yvi_(this.getAttribute(t,"rx"),0),r=this.Dvi_(this.getAttribute(t,"ry"),0);const o=this.getAttribute(t,"id"),l=this.getAttribute(t,"class"),u=this.Pvi_(this.getAttribute(t,"transform"))||new Gn;h===0&&r!==0?h=r:r===0&&h!==0&&(r=h);h>A/2&&h!==0&&(h=A/2);r>n/2&&r!==0&&(r=n/2);const a=new dp({left:s,top:e,width:A,height:n}).JC_(this.Qvi_(o)?o:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(l)?l:null).at_(u);a.OX_(h||r);const g=this.Bvi_(t,i),c=new bj(i.ovi_(),new Gn,g,a,i.lvi_(),a,i.rvi_()),I=this.Wvi_(c);a.dt_(I);this.pvi_(t,c);return this.obi_(a,t,c)}};i=t([_s("geotoolkit.svg.parsers.RectParser")],i);return i}();var Pj=Ci(function(){let i=class t extends sI{constructor(t){super(t);this.abi_=()=>{this.dR_()}}GY_(t){super.GY_(t);this.gbi_(t);this.dR_();return this}xY_(t,i){super.xY_(t,i);this.gbi_(i);this.dR_();return this}removeChild(t){super.removeChild(t);this.cbi_(t);this.dR_();return this}gbi_(t){const i=undefined;(t instanceof Au?t:Au.cN_(Array.isArray(t)?t:[t])).forEach((t=>{t.on(rh.aC_,this.abi_);t.on(rh.oC_,this.abi_)}));return this}cbi_(t){const i=undefined;(t instanceof Au?t:Au.cN_(Array.isArray(t)?t:[t])).forEach((t=>{t.off(rh.aC_,this.abi_);t.off(rh.oC_,this.abi_)}));return this}vn_(t,i){if(this.Ibi_)return this;this.Ibi_=!0;this.dR_();super.vn_(t,i);this.Ibi_=!1;return this}KY_(t){for(let t=this.qY_()-1;t>=0;--t)this.cbi_(this.HY_(t));super.KY_(t);this.dR_();return this}dR_(){let t=null,i=null;for(let s=0;s<this.qY_();s++){const e=this.HY_(s);if(ie(e)&&oe(e)){i=e.getBounds();if(i!=null){const s=e.ut_();t=s!=null?t==null?s.rn_(i):t.union(s.rn_(i)):t==null?i.clone():t.union(i)}}}this.ht_(t===null?new mA:t)}};i=t([_s("geotoolkit.svg.SvgGroup")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRDaGlsZCI6IkdZXyIsImluc2VydENoaWxkIjoieFlfIiwidXBkYXRlU3RhdGUiOiJ2bl8iLCJjbGVhckNoaWxkcmVuIjoiS1lfIn19fSAg");var Vj=function(){let i=class t extends qj{constructor(){super();this.ov_="svg"}fbi_(t){const i=this.getAttribute(t,"overflow"),s=this.Uvi_(this.getAttribute(t,"viewBox")),e=this.Fvi_(this.getAttribute(t,"height"),100),A=this.xvi_(this.getAttribute(t,"width"),100);return Ss({overflow:i,viewbox:s,height:e,width:A},["viewBox"],"SVGParser.getMetaInfo")}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"overflow");s==="visible"&&this.Cvi_().Cbi_(!1);let e=null;const A=this.getAttribute(t,"viewBox");if(A!==null){e=this.Uvi_(A);this.Cvi_().dbi_(e!=null?e.clone():null)}let n=new Gn;if(i.Ji_()===null)i.dI_(new Gn);else{const i=this.yvi_(this.getAttribute(t,"x"),0),s=this.Dvi_(this.getAttribute(t,"y"),0);i===0&&s===0||(n=Gn.kI_(i,s))}let h=null;const r=this.getAttribute(t,"width");let o=null;r!=null&&r!==""&&(o=this.xvi_(r,null));const l=this.getAttribute(t,"height");let u=null;l!=null&&l!==""&&(u=this.Fvi_(l,null));o!=null&&u!=null&&(h=new mA(0,0,o,u));const a=i.e7_();let g=null;g=a==null||a instanceof Pj?(new sI).HC_("svg_root_group"):i.e7_();const c=[],I=g.YY_();while(I.Hs_())c.push(I.next());let f=i.avi_(g,c);const C=this.getAttribute(t,"clip-path");let d=null;if(C!=null&&C!==""){d=this.Tvi_(C,f);f.uvi_(d)}const B=this.Bvi_(t,f);B!=null&&(f=f.cW_(B));this.pvi_(t,f);if(e!=null){const i=this.getAttribute(t,"preserveAspectRatio");i!=null&&i!==""}g.at_(n);h!=null&&g.kY_(s!=="visible").ht_(h);e==null?g.aq_(!0):g.Lq_(e);d!=null&&g.xb_(new wh(d));return g}Bbi_(t,i,s,e){return new Gn}};i=t([_s("geotoolkit.svg.parsers.SvgParser")],i);return i}();var Oj=function(){let i=class t extends qj{constructor(){super();this.ov_="circle"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.yvi_(this.getAttribute(t,"cx"),0),e=this.Dvi_(this.getAttribute(t,"cy"),0),A=this.ibi_(this.getAttribute(t,"r"),0),n=this.getAttribute(t,"id"),h=this.getAttribute(t,"class"),r=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,o=new nE(s,e,A,A).JC_(this.Qvi_(n)?n:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(h)?h:null).at_(r),l=this.Ovi_(r,i.Ji_()),u=this.Bvi_(t,i),a=new bj(i.ovi_(),l,u,o,i.lvi_(),o,i.rvi_()),g=this.Wvi_(a);o.dt_(g);this.pvi_(t,a);return this.obi_(o,t,a)}};i=t([_s("geotoolkit.svg.parsers.CircleParser")],i);return i}();var Wj=function(){let i=class t extends qj{constructor(){super();this.ov_="polygon"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=undefined,e=this.getAttribute(t,"points").split(/[ ,;\n\r\t]/),A=[];let n;for(n=0;n<e.length;n++)e[n]!==""&&A.push(e[n]);const h=[],r=[];for(n=0;n<A.length;n++){const t=this.yvi_(A[n++],0),i=this.Dvi_(A[n],0);h.push(t);r.push(i)}const o=this.getAttribute(t,"id"),l=this.getAttribute(t,"class"),u=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,a=new oE({x:h,y:r}).JC_(this.Qvi_(o)?o:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(l)?l:null).at_(u),g=this.Bvi_(t,i),c=new bj(i.ovi_(),u,g,a,i.lvi_(),a,i.rvi_()),I=this.Wvi_(c);a.dt_(I);this.pvi_(t,c);return this.obi_(a,t,c)}};i=t([_s("geotoolkit.svg.parsers.PolygonParser")],i);return i}();var zj=function(){let i=class t extends qj{constructor(){super();this.ov_="g"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"id"),e=this.getAttribute(t,"class"),A=this.Bvi_(t,i),n=(new Pj).JC_(this.Qvi_(s)?s:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(e)?e:null),h=this.getAttribute(t,"transform");let r=null;if(h!=null&&h!==""){r=this.Pvi_(h);n.at_(r)}const o=this.getAttribute(t,"viewBox");if(o!=null&&o!==""){const t=this.Uvi_(o);n.Lq_(t)}const l=new bj([],new Gn,A,n,i.lvi_(),n,i.rvi_()),u=this.getAttribute(t,"clip-path");if(u!=null){const t=this.Tvi_(u,l);t&&n.xb_(new wh(t))}l.uvi_(null);this.pvi_(t,l);return n}};i=t([_s("geotoolkit.svg.parsers.GroupParser")],i);return i}();var Xj=function(){let i=class t extends Hj{constructor(){super();this.ov_="defs"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");let s=null;for(let e=t.firstChild;e!==null;e=e.nextSibling)if(e.nodeType===Mi.Node.ELEMENT_NODE)if(e.nodeName==="style")this.Cvi_().JCi_(e,i);else{s=this.getAttribute(e,"id");s!=null&&this.Cvi_().wbi_("#"+s,e)}return null}};i=t([_s("geotoolkit.svg.parsers.DefsParser")],i);return i}();var jj=function(){let i=class t extends qj{constructor(){super();this.ov_="ellipse"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.yvi_(this.getAttribute(t,"cx"),0),e=this.Dvi_(this.getAttribute(t,"cy"),0),A=this.xvi_(this.getAttribute(t,"rx"),0),n=this.Fvi_(this.getAttribute(t,"ry"),0),h=this.getAttribute(t,"id"),r=this.getAttribute(t,"class"),o=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,l=new nE(s,e,A,n);l.JC_(this.Qvi_(h)?h:null);l.HC_(this.ov_);l.PC_(this.ov_);l.qC_(this.Qvi_(r)?r:null);l.at_(o);const u=this.Bvi_(t,i),a=new bj(i.ovi_(),o,u,l,i.lvi_(),l,i.rvi_()),g=this.Wvi_(a);l.dt_(g);this.pvi_(t,a);return this.obi_(l,t,a)}};i=t([_s("geotoolkit.svg.parsers.EllipseParser")],i);return i}();var Zj=function(){let i=class t extends qj{constructor(){super();this.ov_="image"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"xlink:href");if(!this.Qvi_(s))return null;if(s.indexOf("data:")===-1)throw Error("External images are not yet supported");const e=this.yvi_(this.getAttribute(t,"x"),0),A=this.Dvi_(this.getAttribute(t,"y"),0),n=this.xvi_(this.getAttribute(t,"width"),100),h=this.Fvi_(this.getAttribute(t,"height"),100),r=this.getAttribute(t,"id"),o=this.getAttribute(t,"class"),l=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,u=new df({x:e,y:A,w:n,h:h,url:s}).JC_(this.Qvi_(r)?r:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(o)?o:null).at_(l),a=this.Bvi_(t,i),g=new bj(i.ovi_(),l,a,u,i.lvi_(),u,i.rvi_()),c=this.Wvi_(g);c["fillstyle"]!=null&&delete c["fillstyle"];u.dt_(c);u.on(ff.PV_,(function(){u.td_()}));this.pvi_(t,g);i.rvi_().PC_("isResourceBased");return this.obi_(u,t,g)}};i=t([_s("geotoolkit.svg.parsers.ImageParser")],i);return i}();var _j=function(){let i=class t extends Hj{constructor(){super();this.ov_="style"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");for(let s=0;s<t.childNodes.length;s++){const e=t.childNodes.item(s);let A=null;e.nodeType!==Mi.Node.CDATA_SECTION_NODE&&e.nodeType!==Mi.Node.TEXT_NODE||(A=e.data);if(!this.Qvi_(A))continue;const n=wo.parse(A);if(n.Ip_.fp_.length>0){Gi("Error occurred during CSS parsing");Gi(n.Ip_.fp_)}for(let t=0;t<n.Ip_.rules.length;t++)if(n.Ip_.rules[t].type!=="comment"){const s=new Dj,e=n.Ip_.rules[t].wp_;for(let t=0;t<e.length;t++)s.setStyle(e[t].dp_,e[t].value);for(let e=0;e<n.Ip_.rules[t].Ep_.length;e++){const A=s.clone().HC_(n.Ip_.rules[t].Ep_[e]);i.getStyle().setStyle(null,A,n.Ip_.rules[t].Ep_[e]);this.Cvi_().setStyle(A,n.Ip_.rules[t].Ep_[e])}}}}};i=t([_s("geotoolkit.svg.parsers.StyleParser")],i);return i}();var $j=function(){let i=class t extends ap{constructor(t,i,s,e){super(t=qi(t,{x:ns(t)?t:[],y:i,visible:s,linestyle:e,fillstyle:null}))}mR_(t,i,s,e){const A=this.getBounds();t.rB_(null,A);t.iQ_(this.ct_(),A);t.ER_(i,s,0,e-1);t.rB_(this.gt_(),A);t.mR_(i,s,0,e-1)}};i=t([_s(null)],i);return i}(),tZ=function(){let i=class t extends qj{constructor(){super();this.ov_="polyline"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=undefined,e=this.getAttribute(t,"points").split(/[ ,\n\r\t]/),A=[],n=this.getAttribute(t,"id"),h=this.getAttribute(t,"class"),r=this.Pvi_(this.getAttribute(t,"transform"))||new Gn;let o;for(o=0;o<e.length;o++)e[o]!==""&&A.push(e[o]);const l=[],u=[];for(o=0;o<A.length;o++){const t=this.yvi_(A[o++],0),i=this.Dvi_(A[o],0);l.push(t);u.push(i)}const a=new $j({x:l,y:u}).JC_(this.Qvi_(n)?n:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(h)?h:null).at_(r),g=this.Bvi_(t,i),c=new bj(i.ovi_(),r,g,a,i.lvi_(),a,i.rvi_()),I=this.Wvi_(c);a.dt_(I);this.pvi_(t,c);this.obi_(a,t,c);return a}};i=t([_s("geotoolkit.svg.parsers.PolylineParser")],i);return i}();var iZ=function(){let i=class t extends Hj{constructor(){super();this.ov_="use"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"xlink:href");s==null&&Gi('<use> should containes "xlink:href" attribute');const e=this.Cvi_().Hvi_(s);e==null&&Gi('There is no reference "'+s+'" found');const A=this.getAttribute(t,"transform");let n=null;A!=null&&A!==""&&(n=this.Pvi_(A));const h=this.yvi_(this.getAttribute(t,"x"),0),r=this.Dvi_(this.getAttribute(t,"y"),0),o=this.yvi_(this.getAttribute(t,"height"),0),l=this.Dvi_(this.getAttribute(t,"width"),0),u=new mA(h,r,h+l,r+o);let a=new Gn;h===0&&r===0||(a=Gn.kI_(h,r));const g=this.getAttribute(e,"viewBox");let c=null;if(g!=null&&g!==""){c=this.Uvi_(g);c!=null&&(a=Gn.xI_(c,u,!1,!1,!1))}const I=this.Ovi_(n,i.Ji_()),f=this.Bvi_(t,i),C=undefined,d=new bj([],I,f,i.getArea(),i.lvi_(),null,i.rvi_()),B=this.Cvi_().JCi_(e,d);if(B instanceof ch){if(B instanceof iu){a=this.Ovi_(a,n);B.at_(a)}i.addShape(B)}return B}};i=t([_s("geotoolkit.svg.parsers.UseParser")],i);return i}();var sZ=function(){let i=class t extends qj{constructor(){super();this.ov_="path"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"id"),e=this.getAttribute(t,"class"),A=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,n=this.mvi_(this.getAttribute(t,"d")).JC_(this.Qvi_(s)?s:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(e)?e:null).at_(A),h=new bj(i.ovi_(),A,i.getStyle(),n,i.lvi_(),n,i.rvi_()),r=this.Bvi_(t,h),o=this.Wvi_(h,r),l=r.getStyle("fill-rule");n.dt_(o);this.Qvi_(l)&&n.ct_()!=null&&l==="evenodd"&&n.ct_().mc_(!0);this.pvi_(t,h);return this.obi_(n,t,h)}};i=t([_s("geotoolkit.svg.parsers.PathParser")],i);return i}();var eZ=function(){let i=class t extends qj{constructor(){super();this.ov_="line"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.yvi_(this.getAttribute(t,"x1"),0),e=this.Dvi_(this.getAttribute(t,"y1"),0),A=this.yvi_(this.getAttribute(t,"x2"),0),n=this.Dvi_(this.getAttribute(t,"y2"),0),h=this.getAttribute(t,"id"),r=this.getAttribute(t,"class"),o=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,l=new Rd(new lA(s,e),new lA(A,n)).JC_(this.Qvi_(h)?h:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(r)?r:null).at_(o),u=this.Bvi_(t,i),a=new bj(i.ovi_(),o,u,l,i.lvi_(),l,i.rvi_()),g=this.Wvi_(a);l.dt_(g);this.pvi_(t,a);return this.obi_(l,t,a)}};i=t([_s("geotoolkit.svg.parsers.LineParser")],i);return i}();var AZ=function(){let i=class t extends zj{constructor(){super();this.ov_="a"}};i=t([_s("geotoolkit.svg.parsers.AParser")],i);return i}();var nZ=function(){let i=class t extends zj{constructor(){super();this.ov_="symbol"}};i=t([_s("geotoolkit.svg.parsers.SymbolParser")],i);return i}();var hZ=function(){let i=class t extends YC{vW_(t){if(t.tk_()!==!0){if(this.state!=null){if(this.state.uM_(t))return this;this.state.clear()}else this.state=t.jR_();t=this.state}const i=this.FE_();t.g_(i);const s=undefined,e=$o.measureText("Ag",i).Ts_();let A=0,n=0;if(this.TX_()===!1){const s=this.bX_();if(s!=null){s.vW_(this,t,A,n,i);return this}}switch(i.vF_()){case"left":A=0;break;case"right":A=this.CX_;break;case"center":A=this.CX_/2;break}this.dX_!==e&&(n-=this.dX_/2-e/2);t.drawText(A,n,this.JW_());return this}};i=t([_s("geotoolkit.svg.shapes.SvgText")],i);return i}();const rZ=function(t,i,s,e){let A,n={};const h=t.attributes;if(i<h.length){n=rZ(t,i+1,s,e);switch(h[i].value.trim()){case"italic":n.text="<i>"+n.text+"</i>";break;case"oblique":n.text="<em>"+n.text+"</em>";break;case"sub":n.text="<sub>"+n.text+"</sub>";break;case"super":n.text="<sup>"+n.text+"</sup>";break;case"underline":n.text='<ins color="'+(h.hasOwnProperty("fill")?h["fill"].value:s)+'">'+n.text+"</ins>";break;case"line-through":n.text='<del color="'+(h.hasOwnProperty("fill")?h["fill"].value:s)+'">'+n.text+"</del>"}switch(h[i].name){case"fill":n.style="font-color:"+h[i].value.trim()+";"+(n.style||"");break;case"font-size":n.style="font-size:"+h[i].value.trim()+"px;"+(n.style||"");break;case"font-weight":n.style="font-weight:"+h[i].value.trim()+";"+(n.style||"")}i++}else{const i=t.firstChild;if(i!=null){A=i.nodeValue.replace(/\s{2,}/g," ");i.nextSibling!=null&&(n=rZ(i.nextSibling,0,s,A.endsWith(" ")))}e&&(A=A.trimLeft());n.text=A+(n.text||"")}if(i===1&&n.style!=null){n.text='<font style="'+n.style+'">'+n.text+"</font>";n.style=null}return n},oZ=function(t,i){let s="";for(let i=t.firstChild;i!=null;i=i.nextSibling){i.nodeType===Mi.Node.ELEMENT_NODE&&i.nodeName==="tspan"&&(s+=rZ(i,0,t.attributes.fill!=null?t.attributes.fill.value:"black",s.endsWith(" ")).text);i.nodeType===Mi.Node.TEXT_NODE&&(s+=i.nodeValue.replace(/\s{2,}/g," "))}i.a_(s);return s};var lZ=function(){let i=class t extends qj{constructor(){super();this.ov_="text";this._x=null;this._y=null}Wvi_(t,i,s){const e=super.Wvi_(t,i);this.nF_(e,t,s);e["fillstyle"]=null;e["linestyle"]=null;return e}nF_(t,i,s){t["textstyle"]=this.Zy_(i,t["textstyle"]||s||new qa);t["textstyle"]&&t["fillstyle"]&&t["textstyle"].setColor(t["fillstyle"].getColor())}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.yvi_(this.getAttribute(t,"x"),0),e=this.Dvi_(this.getAttribute(t,"y"),0),A=this.xvi_(this.getAttribute(t,"width"),100),n=this.Fvi_(this.getAttribute(t,"height"),100);let h=this.getAttribute(t,"text-anchor");switch(h){case"middle":h=dA.ne_;break;case"end":h=dA.oe_;break;default:h=dA.se_}let r=this.getAttribute(t,"alignment-baseline")||ka.mk_;switch(r){case"text-before-edge":r=ka.Top;break;case"text-after-edge":r=ka.JQ_;break}const o=this.getAttribute(t,"id"),l=this.getAttribute(t,"class"),u=this.Pvi_(this.getAttribute(t,"transform"))||new Gn,a=new hZ({ax:s,ay:e,width:A,height:n,sizeisindevicespace:!1,textstyle:new qa({baseline:r})}).JC_(this.Qvi_(o)?o:null).HC_(this.ov_).PC_(this.ov_).qC_(this.Qvi_(l)?l:null).at_(u).PX_(NC.sX_).SE_(h);oZ(t,a);const g=this.Bvi_(t,i),c=new bj(i.ovi_(),u,g,a,i.lvi_(),a,i.rvi_()),I=this.Wvi_(c,null,a.FE_());a.dt_(I);this.pvi_(t,c);return this.obi_(a,t,c)}};i=t([_s("geotoolkit.svg.parsers.TextParser")],i);return i}();var uZ=function(){let i=class t extends Hj{constructor(){super();this.ov_="clipPath"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=[],e=this.Pvi_(this.getAttribute(t,"transform")),A=this.Ovi_(e,i.Ji_()),n=this.Bvi_(t,i),h=new bj(s,A,n,i.getArea());for(let i=t.firstChild;i!==null;i=i.nextSibling)i.nodeType===Mi.Node.ELEMENT_NODE&&this.Cvi_().JCi_(i,h);if(s.length===0)return null;let r=null;const o=this,l=function(t){let i;if(se(t))i=t.nt_();else if(t instanceof nE){const s=t.getBounds(),e=s.ye_(),A=s.De_(),n=s.Ie_()/2,h=s.Ts_()/2;let r="M"+(e-n)+","+A;r+="a"+n+","+h+" 0 1,0 "+2*n+",0";r+="a"+n+","+h+" 0 1,0 "+-2*n+",0";i=o.mvi_(r).nt_()}else{if(!ie(t))return;i=t.getBounds()}r?i&&ie(t)&&ie(i)&&(r=r.getBounds().union(i.getBounds())):r=i};for(let t=0;t<s.length;++t)s[t]&&l(s[t]);return r?A.transform(r):null}};i=t([_s("geotoolkit.svg.parsers.ClipPathParser")],i);return i}();var aZ={X:"x",Y:"y",W:"w",H:"h",Qbi_:"angle",Ebi_:"exact"},gZ={pbi_:"Begin",End:"End",Dur:"Dur"},cZ=function(){let i=class t extends Hj{mbi_(t){const i=undefined;return this.getAttribute(t,"fill")==="freeze"?me.pt_:me.mt_}ybi_(t){const i=this.getAttribute(t,"values"),s=[];if(this.Qvi_(i))i.split(";").forEach((function(t){s.push(RA.cs_(t.trim()))}));else{const i=this.getAttribute(t,"from"),e=this.getAttribute(t,"to");this.Qvi_(i)&&s.push(RA.cs_(i.split(";")[0].trim()));this.Qvi_(e)&&s.push(RA.cs_(e.split(";")[0].trim()))}return s}Dbi_(t){const i=this.getAttribute(t,"repeatCount"),s=this.getAttribute(t,"repeatDur");return this.Qvi_(i)||this.Qvi_(s)?i==="indefinite"||s==="indefinite"?1/0:Number.parseInt(i):1}Mbi_(t){const i=this.getAttribute(t,"values"),s=[];if(this.Qvi_(i))i.split(";").forEach((function(t){s.push(t.trim())}));else{const i=this.getAttribute(t,"from"),e=this.getAttribute(t,"to");this.Qvi_(i)&&s.push(i.trim());this.Qvi_(e)&&s.push(e.trim())}return s}vbi_(t,i){const s=this.getAttribute(i,"additive");if(this.Qvi_(s))switch(s){case"sum":t.ci_=pe.Sum;break;case"replace":t.ci_=pe.Et_;break}const e=this.getAttribute(i,"accumulate");if(this.Qvi_(e))switch(e){case"sum":t.gi_=Ee.Sum;break;case"none":t.gi_=Ee.W_;break}t.Ci_=this.mbi_(i);t._id=this.getAttribute(i,"id");t.di_=this.Dbi_(i);this.bbi_(i,t);const A=this.getAttribute(i,"calcMode");if(A&&this.Qvi_(A.trim()))switch(A){case"discrete":t.Ii_=ye.yt_;break;case"spline":t.Ii_=ye.vt_;break;case"paced":t.Ii_=ye.Mt_;break;default:t.Ii_=ye.Dt_;break}}Nbi_(t,i,s){const e=t.trim();switch(i){case aZ.X:return this.yvi_(e,0)*(s&&s.vQ_&&s.vQ_.BI_()||1);case aZ.Y:return this.Dvi_(e,0)*(s&&s.vQ_&&s.vQ_.sI_()||1);case aZ.W:return this.xvi_(e,0)*(s&&s.vQ_&&s.vQ_.BI_()||1);case aZ.H:return this.Fvi_(e,0)*(s&&s.vQ_&&s.vQ_.sI_()||1);default:return Number.parseFloat(e)}}Sbi_(t){const i=[],s=this.getAttribute(t,"keyTimes");if(this.Qvi_(s)){s.split(";").forEach((t=>{i.push(this.Nbi_(t,aZ.Ebi_,null))}));return i}return null}Gbi_(t,i,s){const e=[],A=this.getAttribute(t,"values");if(this.Qvi_(A))A.split(";").forEach((t=>{e.push(this.Nbi_(t.trim(),aZ.Ebi_,s))}));else{let A=0;const n=this.getAttribute(t,"from"),h=this.getAttribute(t,"to"),r=this.getAttribute(t,"by");if(this.Qvi_(n)){A=this.Nbi_(n.split(";")[0].trim(),aZ.Ebi_,s);e.push(A)}else{let t=new mA;const n=s.e7_();n&&(t=n.getBoundingBox(null,!1));switch(i){case aZ.X:A=t.x;break;case aZ.Y:A=t.y;break;case aZ.W:A=t.width;break;case aZ.H:A=t.height;break}e.push(A)}if(this.Qvi_(h)){const t=this.Nbi_(h.split(";")[0].trim(),aZ.Ebi_,s);e.push(t)}else{if(!this.Qvi_(r))throw new Error("NoValuesAttribute");{const t=this.Nbi_(r.split(";")[0].trim(),aZ.Ebi_,s);e.push(A+t)}}}return e}Rbi_(t){const i=[],s=this.getAttribute(t,"values");if(this.Qvi_(s))s.split(";").forEach((t=>{const s=this.kbi_(t);s.length!==0&&(s.length>1?i.push(new lA(s[0].Fp_(),s[1].Fp_())):i.push(new lA(s[0].Fp_(),s[0].Fp_())))}));else{const s=this.getAttribute(t,"from"),e=this.getAttribute(t,"to");let A=new lA,n;if(this.Qvi_(s)){const i=this.kbi_(this.getAttribute(t,"from"));A=i.length===0?new lA(1,1):i.length>1?new lA(i[0].Fp_(),i[1].Fp_()):new lA(i[0].Fp_(),i[0].Fp_())}if(!this.Qvi_(e))return i;{const i=this.kbi_(this.getAttribute(t,"to"));n=i.length===0?new lA(1,1):i.length>1?new lA(i[0].Fp_(),i[1].Fp_()):new lA(i[0].Fp_(),i[0].Fp_())}i.push(A);i.push(n)}return i}Fbi_(t){const i=[],s=this.getAttribute(t,"values");if(this.Qvi_(s))s.split(";").forEach((t=>{i.push(this.xbi_(t))}));else{const s=this.getAttribute(t,"from"),e=this.getAttribute(t,"to");this.Qvi_(s)&&i.push(this.xbi_(s));if(!this.Qvi_(e))throw new Error("NoValuesAttribute");i.push(this.xbi_(e))}return i}Lbi_(t){if(!this.Qvi_(t)){const i=undefined,s=this.Cvi_().Evi_().Hp_(t);switch(s.Gp_()){case s.Gp_("CssMillisecond"):return s.Fp_();case s.Gp_("CssSecond"):return s.Fp_()*1e3;case s.Gp_("CssMinute"):return s.Fp_()*6e4;case s.Gp_("CssHour"):return s.Fp_()*36e5;default:return s.Fp_()}}return 0}kbi_(t){const i=[];if(this.Qvi_(t)){const s=this.Cvi_().Evi_();t.split(",").forEach((function(t){i.push(s.Hp_(t))}))}return i}bbi_(t,i){if(!i||!t)return;const s={effect:i,Zb_:this.getAttribute(t,"begin"),end:this.getAttribute(t,"end"),dur:this.getAttribute(t,"dur")};this.Ubi_(s);if(i.sb_===0)throw new Error("WrongEndTime")}xbi_(t){const i=[],s=this.kbi_(t.trim());for(let t=0;t<3;t++)i[t]=t>=s.length?0:s[t].Fp_();return i}Ubi_(t){this.Qvi_(t.Zb_)?this.setTime(t,gZ.pbi_):t.effect.Zb_=0;this.Qvi_(t.dur)?this.setTime(t,gZ.Dur):t.effect.dur=0;this.Qvi_(t.end)&&this.setTime(t,gZ.End)}setTime(t,i){let s=0,e;switch(i){case gZ.pbi_:e=t.Zb_;break;case gZ.Dur:e=t.dur;break;case gZ.End:e=t.end;break}const A=undefined,n=this.Cvi_().Evi_().Hp_(e);switch(n.Gp_()){case n.Gp_("CssMillisecond"):s=n.Fp_();break;case n.Gp_("CssSecond"):s=n.Fp_()*1e3;break;case n.Gp_("CssMinute"):s=n.Fp_()*6e4;break;case n.Gp_("CssHour"):s=n.Fp_()*36e5;break;case n.Gp_("CssStringValue"):s=n.getStringValue();break}switch(i){case gZ.pbi_:t.effect.Di_=s;t.Zb_=null;break;case gZ.Dur:t.effect.fi_=s;t.dur=null;break;case gZ.End:t.Ybi_=!0;t.effect.fi_=s-t.effect.Di_>0?s-t.effect.Di_:0;t.end=null;break}}};i=t([_s("geotoolkit.svg.AnimationParser")],i);return i}();var IZ=function(){let i=class t extends cZ{constructor(){super();this.ov_="animate"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=i.e7_();if(!s)return;const e=this.getAttribute(t,"attributeName");let A=null;if(this.Qvi_(e)){A=zn.Ai_().lf_({attributename:e});switch(e){case"x":case"cx":A.setValues(this.Gbi_(t,aZ.X,i));break;case"y":case"cy":A.setValues(this.Gbi_(t,aZ.X,i));break;case"width":A.setValues(this.Gbi_(t,aZ.W,i));break;case"height":A.setValues(this.Gbi_(t,aZ.H,i));break;case"ry":case"rx":A.setValues(this.Gbi_(t,aZ.X,i));break;case"stroke-opacity":case"fill-opacity":case"opacity":A.setValues(this.Gbi_(t,aZ.Ebi_,i));break;case"fill":case"stroke":A.setValues(this.ybi_(t));break;case"x1":case"x2":A.setValues(this.Gbi_(t,aZ.X,i));break;case"y1":case"y2":A.setValues(this.Gbi_(t,aZ.Y,i));break;case"visibility":A.setValues(this.Mbi_(t));break;case"stroke-width":A.setValues(this.Gbi_(t,aZ.Ebi_,i));break;case"font-size":A.setValues(this.Gbi_(t,aZ.Ebi_,i));break;case"int:text":A.setValues(this.Mbi_(t));break;default:throw new Error("Not supported animated attribute: "+e)}this.vbi_(A,t);const n=this.Sbi_(t);n&&n.length>=2&&A.Vi_(n);const h=s.fB_()||new Bh;s.IB_(h);h.Ud_(A)}}};i=t([_s("geotoolkit.svg.parsers.AnimateParser")],i);return i}();var fZ=function(){let i=class t extends cZ{constructor(){super();this.ov_="animateTransform"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=i.e7_();if(!s)return;const e=this.getAttribute(t,"attributeName"),A=this.getAttribute(t,"type");if(e==="transform"||e==="patternTransform"||e==="gradientTransform"){const i=zn.Ai_().lf_({attributename:e,type:A});switch(A){case"scale":const s=this.Rbi_(t);for(const t in s)i.Oi_(s[t]);break;case"translate":i.setValues(this.Rbi_(t));break;case"rotate":i.setValues(this.Fbi_(t));break}this.vbi_(i,t);const n=s.fB_()||new Bh;s.IB_(n);n.Ud_(i)}}};i=t([_s("geotoolkit.svg.parsers.AnimateTransformParser")],i);return i}();var CZ=function(){let i=class t extends IZ{constructor(){super();this.ov_="animateColor"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=this.getAttribute(t,"attributeName");!this.Qvi_(s)||s!=="fill"&&s!=="stroke"||IZ.prototype.parse.call(this,t,i)}};i=t([_s("geotoolkit.svg.parsers.AnimateColorParser")],i);return i}();const dZ=10;var BZ=function(){let i=class t{constructor(t){this.Gz_=[];this.Tbi_=[];this.Ls_=t;this.dVt_=null;this.Kbi_=0}jv_(){return Math.min(this.Gz_.length,this.Tbi_.length)}reset(){this.Kbi_=0;this.Gz_=[];this.Tbi_=[]}Hbi_(){this.Tbi_[this.Tbi_.length-1]=LA.$A_}qbi_(t){this.dVt_=new lA(t);this.Gz_.push(this.dVt_);this.Tbi_.push(LA.ZA_)}Jbi_(t){this.dVt_=new lA(t);this.Gz_.push(this.dVt_);this.Tbi_.push(LA.jA_)}Pbi_(t,i,s){this.Kbi_++;const e=undefined,A=undefined;if(this.distance(t,this.dVt_,s)+this.distance(i,this.dVt_,s)<=this.Ls_||this.Kbi_>=dZ)this.Jbi_(s);else{const e=new lA(s),A=new lA((this.dVt_.getX()+t.getX())/2,(this.dVt_.getY()+t.getY())/2),n=new lA((i.getX()+s.getX())/2,(i.getY()+s.getY())/2),h=new lA(A.getX()/2+(t.getX()+i.getX())/4,A.getY()/2+(t.getY()+i.getY())/4),r=new lA((t.getX()+i.getX())/4+n.getX()/2,(t.getY()+i.getY())/4+n.getY()/2),o=new lA((h.getX()+r.getX())/2,(h.getY()+r.getY())/2);this.Pbi_(A,h,o);this.Pbi_(r,n,e)}this.Kbi_--}distance(t,i,s){const e=lA.Ss_(i,s);return e!==0?Math.abs((i.x-t.x)*(s.y-t.y)-(i.y-t.y)*(s.x-t.x))/e:0}};i=t([_s("geotoolkit.svg.parsers.PathInterpolator")],i);return i}();var wZ=function(){let i=class t extends cZ{constructor(){super();this.ov_="animateMotion"}parse(t,i){if(!t)throw Error("Passed node is not valid");if(!i)throw Error("Passed context is not valid");const s=i.e7_();if(!s)return;const e=zn.Ai_().lf_({attributename:"path"}),A=this.getAttribute(t,"path");let n;if(this.Qvi_(A)){const t=this.mvi_(A);this.Vbi_(e,t)}else if((n=this.Rbi_(t)).length>1)n.forEach((function(t){e.Oi_(t)}));else if(t.childNodes.length){const s=[];i.ovi_().forEach((function(t){s.push(t)}));const A=new bj(s,new Gn);this.pvi_(t,A);A.ovi_().forEach((t=>{this.Vbi_(e,t)}))}if(!e.zi_())throw new Error("NoValuesAttribute");e.WI_=Fn.Fl_;const h=this.getAttribute(t,"rotate");if(this.Qvi_(h))switch(h){case"auto":e.WI_=Fn.VI_;break;case"auto-reverse":e.WI_=Fn.OI_;break;default:e.zI_=this.Nbi_(h,aZ.Ebi_,i)*(Math.PI/180);break}else e.zI_=0;const r=this.getAttribute(t,"accumulate");if(this.Qvi_(r))switch(r){case"sum":e.gi_=Ee.Sum;break;case"none":e.gi_=Ee.W_;break}this.vbi_(e,t);const o=s.fB_()||new Bh;s.IB_(o);o.Ud_(e)}Vbi_(t,i){const s=new BZ(.1),e=[new lA,new lA,new lA];i=i.nt_();let A;for(A=0;A<i.getLength();A++){const t=i.nn_(A);switch(t["type"]){case LA.$A_:s.Hbi_();break;case LA.ZA_:s.qbi_(e[0].vs_(t["x"],t["y"]));break;case LA.jA_:s.Jbi_(e[0].vs_(t["x"],t["y"]));break;case LA._A_:s.Pbi_(e[0].vs_(t["cp1x"],t["cp1y"]),e[1].vs_(t["cp2x"],t["cp2y"]),e[2].vs_(t["x"],t["y"]));break}}const n=s.Gz_,h=[new lA],r=[0];let o=0,l=new lA,u=new lA,a=LA.ZA_;for(A=0;A<s.jv_();A++){let t;switch(s.Tbi_[A]){case LA.ZA_:if(LA.ZA_===a&&h.length>0){h.pop();r.pop()}h.push(new lA(n[A]));r.push(0);u=n[A];l=n[A];break;case LA.jA_:t=lA.Ss_(l,n[A]);r.push(t);h.push(new lA(n[A]));o+=t;l=n[A];break;case LA.$A_:t=lA.Ss_(l,n[A]);r.push(t);h.push(new lA(n[A]));o+=t;t=lA.Ss_(u,n[A]);h.push(new lA(u));r.push(t);o+=t;l=u;break}a=s.Tbi_[A]}for(A=1;A<r.length;A++)r[A]=r[A-1]+r[A]/o;t.setValues(h);t.Vi_(r)}};i=t([_s("geotoolkit.svg.parsers.AnimateMotionParser")],i);return i}();var QZ=Ci(function(){let i=class t{constructor(t,i){const s=qi(t,{xmldocument:typeof t=="string"?this.Ipi_(t):t,dpi:i!=null?i:96});this.fpi_=s["xmldocument"]||null;this.Obi_=s["dpi"];this.Wbi_=new wo;this.zbi_=!0;this.Xbi_=!0;this.jbi_=null;this.OMi_={};this.Rf_={};this.Zbi_={};this._bi_=!0;this.$bi_=!1;this.tNi_=.3937;this.iNi_=.03937;this.sNi_={px:1,cm:this.tNi_*this.Obi_,mm:this.iNi_*this.Obi_,pt:.0139*this.Obi_,pc:.167*this.Obi_,in:this.Obi_,em:1,ex:1};this.eNi_(new Jj);this.eNi_(new Vj);this.eNi_(new Oj);this.eNi_(new Wj);this.eNi_(new zj);this.eNi_(new Xj);this.eNi_(new jj);this.eNi_(new Zj);this.eNi_(new _j);this.eNi_(new tZ);this.eNi_(new iZ);this.eNi_(new sZ);this.eNi_(new eZ);this.eNi_(new AZ);this.eNi_(new nZ);this.eNi_(new lZ);this.eNi_(new uZ);this.eNi_(new IZ);this.eNi_(new fZ);this.eNi_(new CZ);this.eNi_(new wZ)}gn_(t){return this.sNi_.hasOwnProperty(t)?this.sNi_[t]:1}wbi_(t,i){this.Zbi_[t]=i;return this}Hvi_(t){return this.Zbi_[t]||null}KD_(t,i){this.sNi_[t]=i;return this}dbi_(t){this.jbi_=t;return this}Yvi_(){return this.jbi_}wvi_(){return this.Rf_}getStyle(t){return this.Rf_[t]||null}setStyle(t,i){i==null&&(i="*");this.Rf_.hasOwnProperty(i)?this.Rf_[i].merge(t):this.Rf_[i]=t;return this}Evi_(){return this.Wbi_}Ipi_(t){if(t==null||t==="")throw Error("Invalid XML Document");const i=undefined,s=(new Mi.DOMParser).parseFromString(t,"image/svg+xml");if(s.documentElement.nodeName==="parsererror"||s.getElementsByTagName("parsererror").length>0)throw new Error("Error while parsing SVG, invalid syntax");return s}eNi_(t){if(t==null||t.dn_()==null)throw Error("Invalid or null parameter passed");t.dvi_(this);this.OMi_[t.dn_()]=t;return this}Cbi_(t){this.zbi_=t;return this}Kvi_(){return this.zbi_}ANi_(t){return this}nNi_(){return null}hNi_(t){this.Xbi_=t;return this}rNi_(){return this.Xbi_}rbi_(){return this._bi_}oNi_(t){this._bi_=t;return this}parse(t,i){i==null?i=this.fpi_:typeof i=="string"&&(i=this.Ipi_(i));if(i==null)return null;for(let t=0;t<i.childNodes.length;t++){const s=i.childNodes.item!=null?i.childNodes.item(t):i.childNodes[t];s.nodeType===s.PROCESSING_INSTRUCTION_NODE&&s.target==="xml-stylesheet"&&Gi("External stylesheets are not supported")}const s=i.documentElement||i;s.normalize();const e=new Dj,A=[],n=t.YY_();while(n.Hs_())A.push(n.next());const h=new bj(A,null,e,null,null,t);t.at_(new Gn);h.hvi_(t);const r=this.JCi_(s,h);return r!==null?Ss({bounds:r.getBounds(),viewbox:this.Yvi_()},["viewBox"],"SVGParser.parse"):null}JCi_(t,i){if(t==null)return null;if(!(t instanceof Mi["SVGElement"]||this.$bi_)){if(t.localName!=="svg")return null;this.$bi_=!0}let s=null;this.OMi_.hasOwnProperty(t.localName)&&(s=this.OMi_[t.localName].parse(t,i));const e=Hj.prototype.getAttribute.call(null,t,"id");e!=null&&e!==""&&this.wbi_("#"+e,t);return s}lNi_(t){t==null?t=this.fpi_:typeof t=="string"&&(t=this.Ipi_(t));const i=t.documentElement;return i.nodeName==="svg"?this.OMi_[i.nodeName].fbi_(i):{}}};i=t([_s("geotoolkit.svg.SVGParser")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzY2FsYWJsZVBhdHRlcm5zIjoicmJpXyIsInNldFNjYWxhYmxlUGF0dGVybnMiOiJvTmlfIiwiZ2V0U3ZnTWV0YUluZm8iOiJsTmlfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var l3=Ci(function(){let i=class t{constructor(t){this.ytt_=t&&t["httpservice"]?t["httpservice"]:FB.Ai_().u1_()}s2i_(t,i){t!=null&&t!==""&&typeof i=="function"&&this.ytt_.get(t).then((t=>{i(null,t["data"])}),(t=>{i(t)}))}};i=t([_s("geotoolkit.svg.SvgDataProvider")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsb2FkWG1sRGF0YSI6InMyaV8ifX0sImdldENsYXNzTmFtZSI6IkRfIn0g");var u3=Ci(function(){var i;let s=i=class t extends wE{constructor(t){super(typeof t=="object"?t:null);this.e2i_=null;t==null||typeof t!="string"&&!t["xml"]||this.A2i_(typeof t=="string"?t:t["xml"])}clone(){const t=this.nt_(),s=(new i).Pd_(t!=null?t.clone():null);s.e2i_=this.n2i_();return s}n2i_(){return this.e2i_}A2i_(t){if(this.e2i_===t)return this;this.e2i_=t;let i=null;if(this.e2i_!=null){i=new sI;new QZ(this.e2i_).parse(i)}this.Pd_(i);return this}};s=i=t([Zs(qh),_s("geotoolkit.svg.SvgPainter")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTdmciOiJuMmlfIiwic2V0U3ZnIjoiQTJpXyJ9fX0g");export {yj,Dj,Mj,vj,bj,Kj,Hj,qj,Jj,Pj,Vj,Oj,Wj,zj,Xj,jj,Zj,_j,tZ,iZ,sZ,eZ,AZ,nZ,hZ,lZ,uZ,aZ,gZ,cZ,IZ,fZ,CZ,BZ,wZ,QZ,l3,u3};