/* eslint-disable */
import {__decorate as t} from 'tslib';import {Zi,_s,Zs,ys,iu,Gn,sI,ie,mA,dp,wr,hl,rh,lA,nA,Es,dA,Fa,NC,YC,nh,xA,ch,oe,Gi,qi,ki,bC,ap,oE,cE,Bp,Ic,Ih,xs,Us,Mi,pw,Kr,tI,md,nd,Dr,yr,fg,rQ,ha,zB,TQ,mw,nE,TA,Yu,su,Ci} from '@int/impl/geotoolkit.base.js';import {FB} from '@int/impl/geotoolkit.http.js';import {QZ,Pj} from '@int/impl/geotoolkit.svg.js';import {QD,DD,BD,mD,FS,BG,OS,RD,uD,bG,uG,NG,lG,jS,sG,wF,MF,Wk,fk,fF,xS} from '@int/impl/geotoolkit.controls.js';import {eK} from '@int/impl/geotoolkit.widgets.js';var Ost=Ci(function(){let i=class t{};i.prototype.Eu_=Zi;i.prototype.sPt_=Zi;i=t([_s("geotoolkit.flowcharts.commands.ICommand")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIiwidW5kbyI6InNQdF8ifX0sImdldENsYXNzTmFtZSI6IkRfIn0g");var Wst=Ci(function(){var t;return class{constructor(){this.Sos_=[]}on(t){this.Sos_.push(t)}off(t){this.Sos_=this.Sos_.filter((function(i){return i!==t}))}Gos_(t){this.Sos_.slice(0).forEach((function(i){return i(t)}))}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ0cmlnZ2VyIjoiR29zXyJ9fX0g");var zst=function(){var t;return class{constructor(){this.Lui_=0;this.Ros_=null;this.kos_=null}Fos_(t){const i={value:t},s=this.kos_;if(this.kos_){this.kos_=i;s.Ros_=i}else{this.Ros_=i;this.kos_=i}this.Lui_++}xos_(){const t=this.Ros_.value;this.Ros_=this.Ros_.Ros_;this.Ros_||(this.kos_=null);this.Lui_--;return t}Los_(){if(this.Ros_)return this.Ros_.value}isEmpty(){return this.kos_===null}jv_(){return this.Lui_}}}();var Xst=function(){var t=class{static Uos_(i){return i.reduce((function(i,s){return i.concat(Array.isArray(s)?t.Uos_(s):s)}),[])}static cc_(t,i,s,e,A){if(A==null){t.push(s);i.push(e)}else{t.splice(A,0,s);i.splice(A,0,e)}}static Yos_(t,i,s,e){e==null&&(e=1);t.splice(s,e);i.splice(s,e)}static Tos_(i,s,e){const A=[],n=[];for(let h=0;h<i.length;h++)if(A.length<2){A.push(i[h]);n.push(s[h])}else{const r=A.length;if(!e&&t.Kos_(A[r-2],n[r-2],A[r-1],n[r-1],i[h],s[h])||e&&t.Hos_(A[r-2],n[r-2],i[h],s[h],A[r-1],n[r-1],i[h],s[h],.5,!1)){A[r-1]=i[h];n[r-1]=s[h]}else{A.push(i[h]);n.push(s[h])}}return{x:A,y:n}}static Kos_(t,i,s,e,A,n){return Math.abs((i-e)*(t-A)-(i-n)*(t-s))<1}static Hos_(i,s,e,A,n,h,r,o,l,u){l===void 0&&(l=0);u===void 0&&(u=!0);return(Math.abs(i-e)<t.EPSILON||Math.abs(n-r)<t.EPSILON)&&Math.abs(s-A)<t.EPSILON&&Math.abs(h-o)<t.EPSILON?(s-A>0==h-o>0||!u)&&Math.abs((i-e)/(s-A)-(n-r)/(h-o))<.05*l:(Math.abs(s-A)<t.EPSILON||Math.abs(h-o)<t.EPSILON)&&Math.abs(i-e)>t.EPSILON&&Math.abs(n-r)>t.EPSILON?(i-e>0==n-r>0||!u)&&Math.abs((s-A)/(i-e)-(h-o)/(n-r))<.05*l:(!u||s-A>0==h-o>0&&i-e>0==n-r>0)&&(Math.abs((s-A)/(i-e)-(h-o)/(n-r))<.05*l||Math.abs((i-e)/(s-A)-(n-r)/(h-o))<.05*l)}static findIndex(t,i){if(this==null)throw new TypeError('"this" is null or not defined');const s=Object(t),e=s.length>>>0;if(typeof i!="function")throw new TypeError("predicate must be a function");const A=arguments[1];let n=0;while(n<e){const t=s[n];if(i.call(A,t,n,s))return n;n++}return-1}static find(t,i){if(this==null)throw new TypeError('"this" is null or not defined');const s=Object(t),e=s.length>>>0;if(typeof i!="function")throw new TypeError("predicate must be a function");const A=arguments[1];let n=0;while(n<e){const t=s[n];if(i.call(A,t,n,s))return t;n++}}};t.qos_=9007199254740991;t.Jos_=-9007199254740991;t.EPSILON=1e-14;return t}();var jst=function(){var t;return class{constructor(){this.reset()}reset(){this.Pos_=0;this.Vos_=0;this.Oos_=Xst.qos_}}}();var Zst=Ci(function(){let i=class t{};i.prototype.Wos_=Zi;i.prototype.zos_=Zi;i.prototype.Xos_=Zi;i.prototype.jos_=Zi;i.prototype.pV_=Zi;i.prototype.Zos_=Zi;i.prototype.nt_=Zi;i.prototype.DF_=Zi;i.prototype._os_=Zi;i.prototype.$os_=Zi;i.prototype.a_=Zi;i.prototype.tls_=Zi;i.prototype._V_=Zi;i.prototype.ils_=Zi;i=t([_s("geotoolkit.flowcharts.shapes.IComponent")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm90b3R5cGVJZCI6Ildvc18iLCJnZXRQcm90b3R5cGVOYW1lIjoiem9zXyIsImdldENhdGVnb3J5IjoiWG9zXyIsImdldFNlYXJjaEtleXdvcmRzIjoiam9zXyIsImdldERlZmF1bHRTaXplIjoicFZfIiwic2V0RGVmYXVsdFNpemUiOiJab3NfIiwiZ2V0R2VvbWV0cnkiOiJudF8iLCJnZXRPdXRsaW5lIjoiREZfIiwiZ2V0TGlua1BvaW50cyI6Il9vc18iLCJzZXRMaW5rUG9pbnRzIjoiJG9zXyIsInNldFRleHQiOiJhXyIsInNldFVybCI6InRsc18iLCJnZXRVcmwiOiJfVl8iLCJnZXREZWZhdWx0SWNvblNpemUiOiJpbHNfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var _st=Ci(function(){let i=class t extends Zst{};i.prototype.sls_=Zi;i.prototype.els_=Zi;i.prototype.Als_=Zi;i.prototype.nls_=Zi;i=t([_s("geotoolkit.flowcharts.shapes.connectors.ILink"),Zs(Zst)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb25uZWN0aW9ucyI6InNsc18iLCJ1cGRhdGVMaW5rcyI6ImVsc18iLCJjb25uZWN0VG8iOiJBbHNfIiwiZGlzY29ubmVjdEZyb20iOiJubHNfIn19fSAg");var $st=function(){var t=class{constructor(t,i){i===void 0&&(i=10);this.hls_=t;this.rls_=i;this.ols_=[];this.lls_=0;this.uls_=0;this.als_=[]}gls_(i,s){const e=new zst;let A=~~(i.getX()/this.hls_),n=~~(i.getY()/this.hls_);const h=~~(s.getX()/this.hls_),r=~~(s.getY()/this.hls_);A<0&&(A=0);A>=this.uls_&&(A=this.uls_-1);n<0&&(n=0);n>=this.lls_&&(n=this.lls_-1);e.Fos_({Row:n,Col:A});this.als_[n][A].Oos_=0;this.als_[n][A].Vos_=-100;this.als_[n][A].Oos_=-100;const o={state:!1};t.bfs(e,this.ols_,h,r,this.als_,0,o);let l;if(o.state){l=[];let t=r,i=h;for(;;){l.push({Row:t,Col:i});if(t===n&&i===A)break;const s=this.als_[t][i];t=s.Vos_;i=s.Pos_}}t.cls_&&this.Ils_(this.als_,A,n,h,r,l);return l}fls_(){return this.ols_}n5t_(t,i,s){let e,A;this.Cls_=i||[];this.dls_=s||[];const n=t.getBounds();this.lls_=Math.max(1,Math.ceil(n.Ts_()/this.hls_));this.uls_=Math.max(1,Math.ceil(n.Ie_()/this.hls_));if(this.ols_===null||this.lls_!==this.ols_.length||this.ols_[0]===null||this.uls_!==this.ols_[0].length){this.ols_=[];this.als_=[];for(e=0;e<this.lls_;e++){this.ols_[e]=[];this.als_[e]=[];for(A=0;A<this.uls_;A++){this.als_[e][A]=new jst;this.ols_[e][A]=1}}}else for(e=0;e<this.lls_;e++)for(A=0;A<this.uls_;A++){this.als_[e][A].reset();this.ols_[e][A]=1}for(let i=0;i<t.qY_();i++)this.Bls_(t.HY_(i),this.rls_)}Ils_(i,s,e,A,n,h){for(let s=0;s<i.length;s++)for(let e=0;e<i[0].length;e++)this.ols_[s][e]!==t.wls_&&(this.ols_[s][e]+=i[s][e].Oos_)}Bls_(t,i,s){if(!ys(t,Zst))return;if(this.dls_.indexOf(t)!==-1||t.Wos_()==="class-text")return;const e=t instanceof iu&&t.ut_()?t.ut_().clone():new Gn;s&&e.DI_(s);ys(t,Zst)&&this.Qls_(t,e,this.Cls_.indexOf(t)>=0?i*5:i);if(t instanceof sI)for(let s=0;s<t.qY_();s++)this.Bls_(t.HY_(s),i,e);else ys(t,_st)&&this.Els_(t,e,1)}Qls_(t,i,s){const e=ie(t)?t.getBounds().clone():new mA,A=i.rn_(e).Le_(this.hls_,this.hls_),n=Math.max(0,Math.min(Math.floor(A.we_()/this.hls_),this.uls_)),h=Math.max(0,Math.min(Math.floor(A.Ee_()/this.hls_),this.lls_)),r=Math.max(0,Math.min(Math.ceil(A.Qe_()/this.hls_),this.uls_)),o=Math.max(0,Math.min(Math.ceil(A.pe_()/this.hls_),this.lls_));for(let t=h;t<this.lls_&&t<o;t++)for(let i=n;i<this.uls_&&i<r;i++)this.ols_[t][i]+=s}Els_(t,i,s){}pls_(t,i,s){const e=~~(i/this.hls_),A=~~(t/this.hls_);A<0||A>=this.uls_||e<0||e>=this.lls_||(this.ols_[e][A]+=s)}mls_(t,i,s,e,A){let n=(e=~~e)-(i=~~i),h=(s=~~s)-(t=~~t),r,o,l;if(n<0){n=-n;o=-1}else o=1;if(h<0){h=-h;r=-1}else r=1;n<<=1;h<<=1;this.pls_(t,i,A);if(h>n){l=n-(h>>1);while(t!==s){if(l>=0){i+=o;l-=h}this.pls_(t,i,A);t+=r;l+=n}}else{l=h-(n>>1);while(i!==e){if(l>=0){t+=r;l-=n}this.pls_(t,i,A);i+=o;l+=h}}}static bfs(i,s,e,A,n,h,r){while(i.jv_()>0){const o=i.xos_(),l=o.Row,u=o.Col;h=n[l][u].Oos_!==-100?n[l][u].Oos_:0;l===A&&u===e&&(r.state=!0);if(l>0&&s[l-1][u]!==t.wls_&&h+s[l-1][u]<n[l-1][u].Oos_){n[l-1][u].Oos_=h+s[l-1][u];n[l-1][u].Pos_=u;n[l-1][u].Vos_=l;i.Fos_({Row:l-1,Col:u})}if(l+1<s.length&&s[l+1][u]!==t.wls_&&h+s[l+1][u]<n[l+1][u].Oos_){n[l+1][u].Oos_=h+s[l+1][u];n[l+1][u].Pos_=u;n[l+1][u].Vos_=l;i.Fos_({Row:l+1,Col:u})}if(u>0&&s[l][u-1]!==t.wls_&&h+s[l][u-1]<n[l][u-1].Oos_){n[l][u-1].Oos_=h+s[l][u-1];n[l][u-1].Pos_=u;n[l][u-1].Vos_=l;i.Fos_({Row:l,Col:u-1})}if(u+1<s[0].length&&s[l][u+1]!==t.wls_&&h+s[l][u+1]<n[l][u+1].Oos_){n[l][u+1].Oos_=h+s[l][u+1];n[l][u+1].Pos_=u;n[l][u+1].Vos_=l;i.Fos_({Row:l,Col:u+1})}}}};t.cls_=0;t.wls_=-1;return t}();var tet=function(){let i=class t extends dp{constructor(t,i,s){s===void 0&&(s=!0);super(t?t.rt_():new mA);this.yls_=s;this.Dls_=new wr({color:"rgba(0, 0, 0, 0.8)"});this.dt_({linestyle:new hl({color:"rgba(150, 150, 150, 0.4)",width:1,pixelsnapmode:!0}),fillstyle:new wr({color:"rgba(0, 200, 0, 0.05)"})});this.Mls_=i;this.N4_(t)}N4_(t){if(t!==this.vls_){if(this.vls_){this.vls_.off(rh.nC_,(()=>{this.ht_(this.vls_.rt_());this.n5t_(this.vls_)}));this.vls_.off(rh.eC_,(()=>{this.n5t_(this.vls_)}));this.vls_.off(rh.AC_,(()=>{this.n5t_(this.vls_)}));this.vls_.off(rh.rC_,(()=>{this.n5t_(this.vls_)}))}this.vls_=t;if(t){t.on(rh.nC_,(()=>{this.ht_(this.vls_.rt_())}));t.on(rh.eC_,(()=>{this.n5t_(this.vls_)}));t.on(rh.AC_,(()=>{this.n5t_(this.vls_)}));t.on(rh.rC_,(()=>{this.n5t_(this.vls_)}))}this.ht_(this.vls_.rt_());this.n5t_(this.vls_)}}n5t_(t){}bls_(t,i){const s=t.Bt_().slice(),e=t.wt_().slice();i.NI_(s,e,s.length);this.path=this.Mls_.gls_(new lA(s[0],e[0]),new lA(s[s.length-1],e[e.length-1]))}Nls_(t){const i=this.sd_()?t.uS_(this.sd_()):t;i.KR_();const s=this.getBounds();i.rB_(this.gt_());for(let t=s.we_();t<s.Qe_();t+=this.Mls_.hls_)i.oB_(t,s.Ee_(),t,s.pe_());for(let t=s.Ee_();t<s.pe_();t+=this.Mls_.hls_)i.oB_(s.we_(),t,s.Qe_(),t);i.HR_()}Sls_(t){if(t.tk_())return;const i=this.sd_()?t.uS_(this.sd_()):t;i.KR_();i.iQ_(this.ct_());i.rB_(null);const s=this.getBounds();let e=Xst.Jos_;const A=this.Mls_.fls_();A.forEach((function(t){t.forEach((function(t){e=Math.max(e,t)}))}));const n=255/e;for(let t=0;t<this.Mls_.lls_;t++)for(let e=0;e<this.Mls_.uls_;e++)if(A[t][e]){if(A[t][e]<0)i.iQ_(this.Dls_);else{const s=Math.min(A[t][e]*n,255),h=255-s,r=255-s;i.iQ_(new wr({color:new nA(s,r,h,1)}))}i.pR_(s.we_()+e*this.Mls_.hls_,s.Ee_()+t*this.Mls_.hls_,this.Mls_.hls_,this.Mls_.hls_)}i.HR_()}Gls_(t){if(!this.path)return;const i=this.sd_()?t.uS_(this.sd_()):t;i.KR_();i.iQ_(new wr({color:"rgba(0, 200, 0, 1)"}));i.rB_(new hl({color:"transparent"}));const s=this.getBounds();for(let t=0,e=this.path;t<e.length;t++){const A=e[t];i.pR_(s.we_()+A.Col*this.Mls_.hls_,s.Ee_()+A.Row*this.Mls_.hls_,this.Mls_.hls_,this.Mls_.hls_)}i.HR_()}render(t){if(!t.tk_()){super.render(t);this.Sls_(t);this.Gls_(t);this.yls_&&this.Nls_(t)}}};i=t([_s("geotoolkit.flowcharts.shapes.PathGrid")],i);return i}();var iet=Ci(function(){let i=class t extends sI{constructor(t){super(t=Es(t));this.pt=[];this.pt.length=5;this.aq_(!1);this.Rls_();this.dt_(t)}kls_(){if(this.qDt_&&!this.Fls_){const t=this.getBounds();if(!t)return;this.Fls_=!0;this.pt[0]=t.Me_();this.pt[1]=t.ve_();this.pt[2]=t.be_();this.pt[3]=t.Ne_();this.pt[4]=t.getCenter();const i=this.if_();if(i)for(let t=0;t<this.pt.length;t++)this.pt[t]=i.transformPoint(this.pt[t]);const s=lA.Ss_(this.pt[0],this.pt[1]),e=lA.Ss_(this.pt[0],this.pt[3]);this.qDt_.setSize(s,e);let A=t.getCenter(),n=dA.ne_;switch(this.qDt_.FE_().vF_()){case Fa.Mk_:case Fa.z_:A=t.Se_();n=dA.he_;break;case Fa.End:case Fa.X_:A=t.Ge_();n=dA.oe_;break;case Fa.ne_:A=t.getCenter();n=dA.ne_;break}this.qDt_.gR_(A);this.qDt_.SE_(n);this.Fls_=!1}}Rls_(){if(!this.qDt_){const t=new YC({text:""});t.FE_().bF_(Fa.ne_);t.FE_().aF_(1);t.mX_(!0);if(this.getBounds()){const i=this.getBounds();t.gR_(i.getCenter());t.setSize(i.width,i.height)}t.PX_(NC.rX_);t.JC_("TEXT_SHAPE");this.xls_(t)}}b_(t){this.Lls_=t.Lls_;this.Pd_(t.qd_?t.qd_.clone():null);this.Uls_=t.Uls_;this.Yls_=t.Yls_;this.Tls_=t.Tls_.clone();this.Kls_=t.Kls_?t.Kls_.slice():[];this.Hls_=t.Hls_?t.Hls_.slice().map((function(t){return new lA(t.getX(),t.getY())})):null;this.Xk_=t.Xk_?t.Xk_.clone():null;t.qDt_&&this.xls_(t.qDt_.clone());this.ht_(this.qd_&&ie(this.qd_)&&this.qd_.getBounds()?this.qd_.getBounds():new mA(0,0,1,1));this.tls_(t.qls_);this.JC_(nh.u_());return this}vn_(t,i){this.qd_!=null&&this.qd_.vn_(t,i);super.vn_(t,i);if(this.Jls_!==this.if_()){this.notify("StateUpdated",this);this.Jls_=this.if_()}return this}rwt_(t){if(this.qDt_){t._b_(t.Ji_().rn_(this.getBounds()));t.filter(this.qDt_)&&this.qDt_.render(t)}}Xb_(t,i){if(i)this.qd_!=null?this.qd_.ad_(t,(()=>{super.Xb_(t,i)})):super.Xb_(t,i);else{this.qd_!=null&&this.qd_.render(t);super.Xb_(t)}}iN_(t,i){const s=this.sd_()!=null?t.uS_(this.sd_()):t;s.save();this.rwt_(t);if(i)super.iN_(s,(function(){s.restore();i()}));else{super.iN_(s);s.restore()}}Wos_(){return this.Uls_}zos_(){return this.Lls_}Xos_(){return this.Yls_}jos_(){return this.Kls_}Zos_(t){this.Tls_=t||new xA(50,50);return this}pV_(){return this.Tls_}nt_(){return this.qd_}$os_(t){this.Hls_=t;return this}_os_(){return this.Hls_}DF_(){return this.Xk_}ils_(){}tls_(t){this.qls_=t;return this}_V_(){return this.qls_}u3i_(){return this.qDt_}a_(t){let i=!1;if(typeof t=="string"){if(t!==this.u3i_().SG_()){this.u3i_().a_(t);i=!0}}else{if(t.hasOwnProperty("text")&&t["text"]!==this.u3i_().SG_()){this.u3i_().a_(t["text"]);i=!0}if(t["style"]!==void 0){this.u3i_().g_(t["style"]);i=!0}}if(i){this.kls_();this.td_(this.u3i_().getBounds())}return this}SG_(){return{text:this.u3i_()?this.u3i_().SG_():null,style:this.u3i_()?this.u3i_().FE_():null}}static Pls_(t,i){i===void 0&&(i=!0);if(isNaN(t)||!isFinite(t))return t;const s=i?360:Math.PI*2;return t-Math.floor(t/s)*s}static Vls_(t,i){const s=i.getX()-t.getX(),e=i.getY()-t.getY();return Math.atan2(e,s)}Pd_(t){if(this.qd_!==t)if(t instanceof ch){this.qd_!=null&&this.qd_.jC_(null);this.qd_=t;this.qd_!=null&&this.qd_.jC_(this)}else if(t!=null&&t.constructor==={}.constructor){this.qd_!=null&&this.qd_.dt_(t);return}}xls_(t){this.qDt_&&this.off(rh.rC_,this.kls_.bind(this));this.qDt_=t;if(t){t.JC_("TEXT_SHAPE");this.kls_();this.on(rh.rC_,this.kls_.bind(this))}}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(t["prototypename"]!==void 0){this.Lls_=t["prototypename"];this.HC_(t["prototypename"])}t["geometry"]!==void 0&&this.Pd_(t["geometry"]);t["text"]!==void 0&&this.a_(t["text"]);t["prototypeid"]!==void 0&&(this.Uls_=t["prototypeid"]);t["category"]!==void 0&&(this.Yls_=t["category"]);t["defaultsize"]!==void 0&&(this.Tls_=t["defaultsize"]);t["searchkeywords"]!==void 0&&(this.Kls_=t["searchkeywords"]);t["linkpoints"]!==void 0&&(this.Hls_=t["linkpoints"]);t["outline"]!==void 0&&(this.Xk_=t["outline"]);!this.qd_||!t.hasOwnProperty("geometry")||t["geometry"]instanceof ch||this.qd_.dt_(t["geometry"]);this.ht_(this.qd_&&ie(this.qd_)&&this.qd_.getBounds()?this.qd_.getBounds():new mA(0,0,1,1));t["url"]!==void 0&&this.tls_(t["url"]);t["id"]===void 0&&(this.XC_()||this.JC_(nh.u_()));return this}N_(){const t=super.N_();this.qd_&&(t["geometry"]=this.qd_.N_());t["prototypename"]=this.Lls_;t["prototypeid"]=this.Uls_;t["category"]=this.Yls_;t["defaultsize"]=this.Tls_;t["searchkeywords"]=this.Kls_;t["linkpoints"]=this.Hls_?this.Hls_.slice().map((function(t){return new lA(t.getX(),t.getY())})):null;t["outline"]=this.DF_();t["text"]=this.SG_();t["url"]=this.qls_;return t}};i.Ols_=new xA(50,50);i=t([Zs(Zst),_s("geotoolkit.flowcharts.shapes.DiagramVisual")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInVwZGF0ZVN0YXRlIjoidm5fIiwicHJlUmVuZGVyaW5nIjoiWGJfIiwicG9zdFJlbmRlcmluZyI6ImlOXyIsImdldFByb3RvdHlwZUlkIjoiV29zXyIsImdldFByb3RvdHlwZU5hbWUiOiJ6b3NfIiwiZ2V0Q2F0ZWdvcnkiOiJYb3NfIiwiZ2V0U2VhcmNoS2V5d29yZHMiOiJqb3NfIiwic2V0RGVmYXVsdFNpemUiOiJab3NfIiwiZ2V0RGVmYXVsdFNpemUiOiJwVl8iLCJnZXRHZW9tZXRyeSI6Im50XyIsInNldExpbmtQb2ludHMiOiIkb3NfIiwiZ2V0TGlua1BvaW50cyI6Il9vc18iLCJnZXRPdXRsaW5lIjoiREZfIiwiZ2V0RGVmYXVsdEljb25TaXplIjoiaWxzXyIsInNldFVybCI6InRsc18iLCJnZXRVcmwiOiJfVl8iLCJzZXRUZXh0IjoiYV8iLCJnZXRUZXh0IjoiU0dfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyJ9fX0g");var set=Ci(function(){let i=class t extends iet{constructor(t){super(t||{});this.z9_=[]}Wls_(t){let i;if(this.z9_)for(i=0;i<this.z9_.length;i++){this.z9_[i].off(rh.oC_,this.zls_.bind(this));this.z9_[i].off(rh.aC_,this.zls_.bind(this))}this.z9_=t||[];for(i=0;i<this.z9_.length;i++){this.z9_[i].on(rh.oC_,this.zls_.bind(this));this.z9_[i].on(rh.aC_,this.zls_.bind(this))}this.zls_();return this}ovi_(){return this.z9_}zls_(){this.bf_=null;this.notify(rh.aC_,this,this.getBounds());return this}getBounds(){if(!this.bf_){if(!this.z9_||!this.z9_.length)return new mA;let t;for(let i=0;i<this.z9_.length;i++){const s=this.z9_[i];t=ie(s)?s.getBounds():null;if(t==null)continue;const e=oe(s)&&s.ut_?s.ut_():null;t=e?e.rn_(t):t;this.bf_?this.bf_.union(t):this.bf_=t.clone()}}return this.bf_}ut_(){return null}if_(){return this.Xls_&&this.Xls_.if_&&this.Xls_.if_()?this.Xls_.if_():new Gn}at_(t){t||(t=new Gn);this.td_();for(let i=0;i<this.z9_.length;i++){const s=this.z9_[i];oe(s)&&s.at_(Gn.multiply(t,s.ut_()?s.ut_():new Gn))}this.zls_();this.td_();return this}jls_(t){this.Xls_=t}};i=t([_s("geotoolkit.flowcharts.shapes.edit.VirtualGroupVisual")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTaGFwZXMiOiJXbHNfIiwiZ2V0U2hhcGVzIjoib3ZpXyIsImdldExvY2FsVHJhbnNmb3JtIjoidXRfIiwiZ2V0U2NlbmVUcmFuc2Zvcm0iOiJpZl8iLCJzZXRMb2NhbFRyYW5zZm9ybSI6ImF0XyJ9fX0g");let eet;const Aet=function(){eet||(eet=FB.Ai_().u1_());return eet};var net=function(){var i;let s=i=class t{static Zls_(t){if(i._ls_.get(t))return i._ls_.get(t);const s=new Promise(((s,e)=>{i.$ls_.has(t)?s(i.$ls_.get(t)):Aet().get(t).then((e=>{i.$ls_.set(t,e["data"]);i._ls_.delete(t);s(e["data"])}),(s=>{i._ls_.delete(t);e(s)}))}));i._ls_.set(t,s);return s}};s.$ls_=new Map;s._ls_=new Map;s=i=t([_s("geotoolkit.flowcharts.shapes.ResourceLoader")],s);return s}();var het=Ci(function(){var i;let s=i=class t extends iet{constructor(t){const i=qi(t,{islinkpointsrelative:!0},!0);super(i);this.yNi_=!1;i["islinkpointsrelative"]!==void 0&&(this.tus_=i["islinkpointsrelative"]);i["svgdata"]!==void 0&&this.setData(i["svgdata"]);i["justdeserialized"]!==void 0&&(this.ius_=i["justdeserialized"]);i["referencesize"]!==void 0&&(this.sus_=i["referencesize"])}setData(t){this.eus_=t;this.yNi_=!1;if(t)try{this.Aus_(t)}catch(i){ki("FlowCharts.SvgDiagramVisual#setData: could not parse SVG data",t)}}b_(t){this.tus_=t.tus_;this.yNi_=t.yNi_;this.nt_()||this.Pd_(t.nt_()?t.nt_().clone():new sI);t.eus_&&this.setData(t.eus_);t.tus_?this.$os_(t.nus_().slice().map((t=>new lA(t.getX(),t.getY())))):this.$os_(this._os_()?t._os_().slice().map((t=>new lA(t.getX(),t.getY()))):null);this.sus_=t.sus_?t.sus_.clone():this.pV_()?this.pV_().clone():new xA(100,100);return this}hus_(t){if(this._V_())net.Zls_(this._V_()).then((i=>{if(!this.Df_()){this.Aus_(i);t&&t()}})).catch((i=>{Gi("SvgVisual plugin: url '"+this._V_()+"' can not be resolved ("+i+")");t&&t(i)}));else{Gi("SvgVisual plugin: url is not defined");t&&t()}}Pd_(t){!(t instanceof ch)||t instanceof sI?super.Pd_(t):ki("FlowCharts.SvgDiagramVisual#setGeometry: geotoolkit/scene/Group is expected")}Aus_(t){const i=undefined;(new QZ).parse(this.nt_(),t);const s=this.nt_().getBounds();this.ht_(s);if(this.u3i_()&&this.getBounds()){this.u3i_().gR_(this.getBounds().getCenter());this.u3i_().setSize(s.width,s.height)}const e=s.Ie_()!==0?this.pV_().Ie_()/s.width:1,A=s.Ts_()!==0?this.pV_().Ts_()/s.height:1,n=this.ut_()?this.ut_().clone():new Gn;if(!this.ius_){this.at_(Gn.kI_(n.EI_(),n.pI_()).vI_(Gn.TI_(e,A)));this.ius_=!1}this.yNi_=!0;this.notify("StateUpdated",this,this.getBounds())}tls_(t){if(t!==this._V_()){this.nt_()||this.Pd_(new sI);super.tls_(t);this.yNi_=!1;this.hus_()}return this}render(t){this.yNi_&&super.render(t)}ad_(t,i){const s=this;this.yNi_?super.ad_(t,i):this.hus_((function(){iet.prototype.ad_.call(s,t,i)}))}rus_(){return this.tus_}nus_(){if(this.tus_)return super._os_();const t=this.getBounds();return this._os_().map((function(i){return new lA((i.getX()-t.getX())/t.Ie_(),(i.getY()-t.getY())/t.Ts_())}))}_os_(){if(this.tus_){let t=super._os_();t&&t.length||(t=i.ous_);const s=[],e=this.yNi_?this.getBounds():new mA(0,0,this.sus_.Ie_(),this.sus_.Ts_());for(let i=0;i<t.length;i++){const A=t[i];s.push(new lA(e.getX()+e.Ie_()*A.getX(),e.getY()+e.Ts_()*A.getY()))}return s}return super._os_()}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["islinkpointsrelative"]!==void 0&&(this.tus_=t["islinkpointsrelative"]);t["svgdata"]!==void 0&&this.setData(t["svgdata"]);t["referencesize"]!==void 0?this.sus_=t["referencesize"]:this.sus_||(this.sus_=t["defaultsize"]);return this}N_(){const t=super.N_();t["referencesize"]=this.sus_;t["islinkpointsrelative"]=this.tus_;t["svgdata"]=this.eus_;return t}};s.ous_=[new lA(.5,0),new lA(.5,1),new lA(0,.5),new lA(1,.5)];s=i=t([_s("geotoolkit.flowcharts.shapes.SvgDiagramVisual")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjb3B5Q29uc3RydWN0b3IiOiJiXyIsInNldFVybCI6InRsc18iLCJyZW5kZXJBc3luYyI6ImFkXyIsImdldElzTGlua1BvaW50c1JlbGF0aXZlIjoicnVzXyIsImdldFJlbGF0aXZlTGlua1BvaW50cyI6Im51c18iLCJnZXRMaW5rUG9pbnRzIjoiX29zXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8ifX19");var ret=function(){let i=class t extends QD{constructor(t,i,s,e){s===void 0&&(s=new xA(20,20));super(t+2,i-2,s);this.dat_(new wr({color:"rgba(100, 100, 100, 0.1)"}));this.Mat_(new wr({color:"rgba(100, 100, 100, 0.0)"}));this.lus_=new het({prototypeid:"class-cursors",prototypename:"RotateCursor",category:"cursors",searchkeywords:[],defaultsize:s,geometry:(new sI).HC_("svg_lazy_group"),linkpoints:[],svgdata:'<?xml version="1.0" encoding="UTF-8"?>\n'+'<svg  x="0px" y="0px" viewBox="0 0 286.374 286.374" >\n'+'<path style="clip-rule:evenodd;fill:#00aad4;fill-rule:evenodd" d="m 227.925,196.882 58.449,-62.644 -34.15,0 C 247.63,69.222 191.474,17.898 125.288,17.898 56.09,17.898 0,73.989 0,143.187 c 0,69.198 56.09,125.289 125.289,125.289 30.037,0 57.592,-10.592 79.171,-28.215 l -31.934,-31.935 c -13.276,9.643 -29.565,15.403 -47.237,15.403 -44.484,0 -80.543,-36.059 -80.543,-80.543 0,-44.484 36.058,-80.544 80.543,-80.544 41.455,0 75.562,31.327 80.018,71.594 l -35.272,0 z M 89.491,143.187 c 0,19.77 16.027,35.797 35.797,35.797 19.77,0 35.796,-16.027 35.796,-35.797 0,-19.77 -16.026,-35.797 -35.796,-35.797 -19.769,0 -35.797,16.027 -35.797,35.797 z"/>\n'+"</svg>",url:e});this.lus_.u3i_().a_("");this.lus_.on(rh.sC_,(()=>{this.td_()}))}render(t){const i=this.sd_()?t.uS_(this.sd_()):t,s=i.XR_().oI_(this.egt_()),e=this.lR_().clone(),A=new mA(e.getX()-s.Ie_()/2,e.getY()-s.Ts_()/2,e.getX()+s.Ie_()/2,e.getY()+s.Ts_()/2);A.ce_(e.getX()-s.Ie_()/2,e.getY()-s.Ts_()/2,e.getX()+s.Ie_()/2,e.getY()+s.Ts_()/2);i.rB_(new hl({color:"transparent"}));i.iQ_(this.Cat_());const n=new mA(A);n.Le_(-3,-3);i.yR_(n.getX(),n.getY(),n.Ie_(),n.Ts_());const h=this.lus_.ut_()?this.lus_.ut_():new Gn;h.setTranslate(A.getX(),A.getY());this.lus_.at_(h);this.lus_.render(i)}};i=t([_s("geotoolkit.flowcharts.shapes.edit.handles.RotateHandle")],i);return i}();var oet=Ci(function(){let i=class t extends DD{constructor(){super();this.uus_=new set;this.OSt_=new bC;this.uus_.on(rh.aC_,this.aus_.bind(this));this.uus_.on(rh.oC_,this.aus_.bind(this));super.ygt_(this.uus_)}ygt_(t){const i=Xst.Uos_([t]);this.uus_.Wls_(i);this.uus_.jls_(i.length>0?i[0].getParent():this.mgt_());this.Egt_()?this.Ngt_():this.initialize();this.Mgt_(this.Sgt_[0]);return this}aus_(){this.Ngt_()}Fgt_(){const t=this.e7_();return ie(t)?t.getBounds():null}Dgt_(t){this.Ngt_();for(let i=0;i<this.Sgt_.length;i++)this.Sgt_[i].nf_(t)}pgt_(){const t=this.Fgt_();this.Sgt_=[(new BD).ce_(t).bat_({x:1,y:1,width:0,height:0}).dat_(new wr("transparent")),new ret(t.Qe_(),t.Ee_()),new QD(0,0).bat_({x:1,y:1,width:-1,height:-1}),new QD(0,0).bat_({x:0,y:1,width:+1,height:-1}),new QD(0,0).bat_({x:0,y:0,width:+1,height:+1}),new QD(0,0).bat_({x:1,y:0,width:-1,height:+1}),new QD(0,0).bat_({x:1,y:0,width:-1,height:0}),new QD(0,0).bat_({x:0,y:0,width:1,height:0}),new QD(0,0).bat_({x:0,y:1,width:0,height:-1}),new QD(0,0).bat_({x:0,y:0,width:0,height:1})];for(let t=0;t<this.Sgt_.length;t++){this.mgt_().GY_(this.Sgt_[t]);this.Sgt_[t].Iat_(this)}this.Ngt_();this.setStyle({main:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr("transparent")},corners:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}})}});return!0}gus_(t,i,s,e,A,n){let h=0;const r=(t-s)*(A-s)+(i-e)*(n-e),o=(t-s)*(n-e)-(i-e)*(A-s);r===0&&o===0||(h=Math.atan2(o,r));return h}cus_(t,i){const s=6,e=this.e7_();if(e instanceof iu&&ie(e)){const A=e.if_().clone();e.ut_()&&A.vI_(e.ut_());const n=A.rn_(e.getBounds()),h=n.clone();h.Le_(s,s);const r=this.OSt_.select(e.getRoot(),h).filter((function(t){return t!==e&&t instanceof iet})).map((function(t){return e.if_().rn_(t.ut_().rn_(t.getBounds()))}));return this.Ius_(new lA(t,i),n,r,s)}return new lA(t,i)}Ius_(t,i,s,e){e===void 0&&(e=8);if(!s||s.length===0)return t;const A=i.pe_(),n=i.Ee_(),h=i.we_(),r=i.Qe_();let o=0,l=0;for(let t=0;t<s.length;t++){const i=s[t];Math.abs(i.pe_()-A)<e?l=i.pe_()-A:Math.abs(i.pe_()-n)<e?l=i.pe_()-n:Math.abs(i.Ee_()-A)<e?l=i.Ee_()-A:Math.abs(i.Ee_()-n)<e&&(l=i.Ee_()-n);Math.abs(i.we_()-h)<e?o=i.we_()-h:Math.abs(i.we_()-r)<e?o=i.we_()-r:Math.abs(i.Qe_()-h)<e?o=i.Qe_()-h:Math.abs(i.Qe_()-r)<e&&(o=i.Qe_()-r)}return new lA(t.getX()+o,t.getY()+l)}bgt_(t,i){const s=this.cus_(t,i);t=s.getX();i=s.getY();const e=this.vgt_();if(!e)return this;const A=this.e7_();if(e instanceof ret&&oe(A)&&ie(A)){const s=this.getPosition(),e=A.getBounds();let n=e,h=A.if_();const r=this.mgt_().if_().rI_();if(A instanceof set&&A.ovi_().length>0){const t=A.ovi_()[0];ie(t)&&(n=t.getBounds());h=t.if_()}if(t===this.getPosition().getX()&&i===this.getPosition().getY())return this;const o=Gn.multiply(r,h),l=r.transformPoint(s),u=r.transformPoint(new lA(t,i)),a=o.transformPoint(n.getCenter()),g=this.gus_(l.getX(),l.getY(),a.getX(),a.getY(),u.getX(),u.getY()),c=Gn.FI_(g,e.ye_(),e.De_());A.ut_()?A.at_(Gn.multiply(A.ut_(),c)):A.at_(c);A.td_();this.setPosition(t,i);return this}if(!e.Nat_())return this;this.Lgt_(t,i);this.Ngt_();this.setPosition(t,i);A.td_();return this}Lgt_(t,i){const s=this.getPosition();if(!s)return;if(s.getX()===t&&s.getY()===i)return;let e=this.e7_();const A=e instanceof set?e.ovi_():[e];for(let n=0;n<A.length;n++){e=A[n];if(!ie(e)||!oe(e))continue;const h=e.getBounds(),r=h.clone(),o=e.getParent().if_().rI_();let l=new lA(s.getX(),s.getY()),u=new lA(t,i);o.transformPoint(l,l);o.transformPoint(u,u);const a=e.ut_()?e.ut_():new Gn,g=a.rI_();l=g.transformPoint(l);u=g.transformPoint(u);const c=u.getX()-l.getX(),I=u.getY()-l.getY(),f=this.vgt_().Nat_();r.setX(h.x+f.x*c);r.setY(h.y+f.y*I);r.de_(h.width+f.width*c);r.Be_(h.height+f.height*I);e.at_(Gn.multiply(a,Gn.xI_(h,r,!1,!1,!1)))}e instanceof set&&e.zls_()}setStyle(t){const i=function(t){return qi({},t instanceof hl?{linestyle:t.N_()}:{linestyle:t})},s=function(t){return qi({},t instanceof wr?{fillstyle:t.N_()}:{fillstyle:t})};let e={};if(t["main"]!==void 0){t["main"]["linestyle"]!==void 0&&(e=qi(e,i(t["main"]["linestyle"])));t["main"]["fillstyle"]!==void 0&&(e=qi(e,s(t["main"]["fillstyle"])));this.Sgt_[0].dt_(e)}let A={};if(t["corners"]!==void 0){t["corners"]["linestyle"]!==void 0&&(A=qi(A,i(t["corners"]["linestyle"])));t["corners"]["fillstyle"]!==void 0&&(A=qi(A,s(t["corners"]["fillstyle"])));for(let t=2;t<this.Sgt_.length;++t)this.Sgt_[t].dt_(A)}return this}Ngt_(){if(!this.Egt_())return this;let t=this.Fgt_();if(!t)return this;let i=this.e7_().if_();const s=this.mgt_().if_().rI_();let e=i.rn_(t);const A=e.Me_();A.vs_(A.getX()-this.Sgt_[1].egt_().Ie_()/2-3,A.getY()-this.Sgt_[1].egt_().Ts_()/2-3);e=s.rn_(e);this.Sgt_[0].ce_(e);this.Sgt_[1].gR_(s.transformPoint(A));this.Sgt_[2].gR_(new lA(e.we_(),e.Ee_()));this.Sgt_[3].gR_(new lA(e.Qe_(),e.Ee_()));this.Sgt_[4].gR_(new lA(e.Qe_(),e.pe_()));this.Sgt_[5].gR_(new lA(e.we_(),e.pe_()));this.Sgt_[6].gR_(new lA(e.we_(),e.De_()));this.Sgt_[7].gR_(new lA(e.Qe_(),e.De_()));this.Sgt_[8].gR_(new lA(e.ye_(),e.Ee_()));this.Sgt_[9].gR_(new lA(e.ye_(),e.pe_()));const n=this.e7_();if(n instanceof set&&n.ovi_().length>0){if(n.ovi_().length===1){const i=n.ovi_()[0];ie(i)&&(t=i.getBounds())}else t=n.getBounds();const e=[t.Me_(),t.ve_(),t.be_(),t.Ne_(),t.Se_(),t.Ge_(),t.Re_(),t.ke_()];i=n.ovi_().length===1?n.ovi_()[0].if_():n.if_();const A=Gn.multiply(s,i);this.Sgt_[0].ce_(t);this.Sgt_[0].at_(A);const h=i.nI_(0,0).clone(),r=i.nI_(1,0).clone(),o=i.nI_(0,1).clone(),l=lA.Ss_(h,r),u=lA.Ss_(h,o),a=t.clone();if(l>Xst.EPSILON&&u>Xst.EPSILON){const t=1/l*(this.Sgt_[1].egt_().Ie_()/2+2),i=1/u*(this.Sgt_[1].egt_().Ts_()/2+2);a.Le_(t,i)}this.Sgt_[1].gR_(A.transformPoint(a.Me_()));for(let t=2;t<Math.min(this.Sgt_.length,e.length+2);t++)this.Sgt_[t].gR_(A.transformPoint(e[t-2]))}return this}};i=t([_s("geotoolkit.flowcharts.shapes.edit.VisualPluginAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTaGFwZSI6InlndF8iLCJnZXRTaGFwZUJvdW5kcyI6IkZndF8iLCJvbkFjdGl2ZVN0YXRlQ2hhbmdlZCI6IkRndF8iLCJvbkluaXRpYWxpemUiOiJwZ3RfIiwib25Nb3ZlIjoiYmd0XyIsInVwZGF0ZUhhbmRsZXMiOiJOZ3RfIn19fSAg");var uet=Ci({fus_:"NoLinks",Cus_:"SingleLink",dus_:"DoubleLink"},2,"eyJOb0xpbmtzIjoiZnVzXyIsIlNpbmdsZUxpbmsiOiJDdXNfIiwiRG91YmxlTGluayI6ImR1c18ifSAg");const aet=[uet.fus_,uet.Cus_,uet.dus_];var get=Ci({Line:"Line",CDt_:"Step"},2,"eyJTdGVwIjoiQ0R0XyJ9");const cet=[get.Line,get.CDt_];var Iet=Ci({pbi_:"Begin",End:"End",RB_:"Empty"},2,"eyJCZWdpbiI6InBiaV8iLCJFbXB0eSI6IlJCXyJ9");const fet=[Iet.pbi_,Iet.End];var Cet=Ci(function(){let i=class t{constructor(t,i,s,e){if(!(t instanceof ch))throw new Error("visual must inherit geotoolkit/scene/Node");this.Bus_=t;this.wus_=i;if(typeof s=="number"){ki("Construct LinkConnection with linkSide as number is deprecated since 4.0. Use enum LinkSide Instead");s=fet[s]}this.Qus_=s;this.Eus_=e;this.pus_=null;this.YC_={}}Id_(t){return this.YC_&&this.YC_.hasOwnProperty(t)?this.YC_[t]:null}setProperty(t,i){this.YC_||(this.YC_={});this.YC_[t]=i;return this}mus_(){return this.Bus_}yus_(){return this.wus_}Dus_(t){this.wus_=t;return this}Mus_(){return this.Qus_}vus_(){return this.Eus_}bus_(){return this.Bus_?this.Bus_.XC_():null}Nus_(){return this.pus_}Sus_(t){this.pus_=t;return this}};i=t([_s("geotoolkit.flowcharts.shapes.connectors.LinkConnection")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRWaXN1YWwiOiJtdXNfIiwiZ2V0TW9kZWxQb2ludCI6Inl1c18iLCJnZXRMaW5rU2lkZSI6Ik11c18iLCJnZXRMaW5rVmlzdWFsIjoidnVzXyIsImdldFJlbGF0ZWRWaXN1YWxJZCI6ImJ1c18ifX0sImdldENsYXNzTmFtZSI6IkRfIn0g");var det=Ci({Gus_:"Disconnected",Rus_:"Connected"},2,"eyJEaXNjb25uZWN0ZWQiOiJHdXNfIiwiQ29ubmVjdGVkIjoiUnVzXyJ9");var Bet=Ci(function(){var i;let s=i=class t extends ap{constructor(t){super(t);this.kus_=uet.Cus_;this.Fus_=0;this.xus_=get.CDt_;this.Kls_=[];this.Hls_=[new lA(0,0),new lA(0,0)];this.Lus_=10;this.Uus_=8;this.connections={};this.connections[Iet.pbi_]=null;this.connections[Iet.End]=null;if(t!=null&&typeof t["linkingmode"]=="number"){ki("Construct LinkVisual with options.linkingmode as number is deprecated since 4.0. Use enum LinkingMode Instead");t["linkingmode"]=aet[t["linkingmode"]]}this.initialize(t)}Wos_(){return this.Uls_}zos_(){return this.Lls_}Xos_(){return this.Yls_}jos_(){return this.Kls_}Yus_(t){this.Kls_=t;return this}pV_(){const t=this.getBounds();return new xA(t.Ie_(),t.Ts_())}Zos_(t){return this}a_(t){return this}nt_(){return this}_os_(){const t=this.Bt_().length-1;this.Hls_[0].vs_(this.Bt_()[0],this.wt_()[0]);this.Hls_[1].vs_(this.Bt_()[t],this.wt_()[t]);return[this.Hls_[0],this.Hls_[1]]}$os_(t){return this}DF_(){return this.Xk_}ils_(){return this.Tus_}tls_(t){this.qls_=t;return this}_V_(){return this.qls_}Kus_(){return this.xus_}Hus_(t){if(typeof t=="number"){ki("Call LinkVisual.setLinkType with number is deprecated since 4.0. Use enum LinkType instead");t=cet[t]}this.xus_=t;return this}qus_(t){this.Jus_=t;return this}Pus_(){return{width:this.Lus_,height:this.Uus_}}Vus_(t){if(t===null||t===void 0)this.kus_=uet.fus_;else{if(typeof t=="number"){ki("Call LinkVisual.setLinkingMode with number is deprecated since 4.0. Use enum LinkingMode Instead");t=aet[t]}this.kus_=t}return this}Ous_(){return this.kus_}Wus_(){return this.Fus_}zus_(t){(t===null||t===void 0||t<0)&&(t=0);if(this.Fus_!==t){this.td_();this.Fus_=t;this.td_()}return this}getBounds(){const t=super.getBounds().clone(),i=this.gt_()?this.gt_().Ie_()/2:.5;t.Le_(t.Ie_()<Xst.EPSILON?1e-5:i,t.Ts_()<Xst.EPSILON?1e-5:i);this.Fus_&&t.Le_(this.Fus_,this.Fus_);return t}initialize(t){if((t=Es(t))!=null){this.Lls_=t["prototypename"];this.qd_=t["geometry"];this.Uls_=t["prototypeid"];this.Yls_=t["category"];this.Tus_=t["defaulticonsize"];this.Kls_=t["searchkeywords"];this.Hls_=t["linkpoints"];this.Xk_=t["outline"];this.qls_=t["url"];this.Hus_(t["linktype"]);t["geometry"]instanceof ap&&this.dt_(t["geometry"].N_());this.HC_(t["prototypename"]);this.kus_=t["linkingmode"]!=null?t["linkingmode"]:uet.Cus_;this.Fus_=t["tubingwidth"];this.pc_()}this.Xus_=()=>{this.els_(!0)};this.JC_(t&&t["id"]?t["id"]:nh.u_())}clone(){const t=new i({prototypename:this.Lls_,geometry:this.qd_?this.qd_.clone():null,prototypeid:this.Uls_,category:this.Yls_,defaulticonsize:this.Tus_,searchkeywords:this.Kls_?this.Kls_.slice():[],linkpoints:this.Hls_?this.Hls_.slice():null,outline:this.Xk_?this.Xk_.clone():null,linkingmode:this.kus_,tubingwidth:this.Fus_,url:this.qls_,linktype:this.xus_});t.qus_(this.Jus_);return t}rt_(){let t=Xst.qos_,i=Xst.qos_,s=Xst.Jos_,e=Xst.Jos_;const A=this.Bt_(),n=this.wt_();for(let h=0;h<A.length;h++){t>A[h]&&(t=A[h]);i>n[h]&&(i=n[h]);s<A[h]&&(s=A[h]);e<n[h]&&(e=n[h])}return new mA(t,i,s,e)}render(t){super.render(t);this.jus_(t)}jus_(t){const i=this.sd_()?t.uS_(this.sd_()):t;this.Xb_(i);this.kus_!==uet.Cus_&&this.kus_!==uet.dus_||this.Zus_(i,!1);this.kus_===uet.dus_&&this.Zus_(i,!0);this.iN_(i)}Zus_(t,i){const s=this.if_()?this.if_():new Gn,e=s.rI_(),A=this.Bt_(),n=this.wt_(),h=i?s.nI_(A[0],n[0]).clone():s.nI_(A[A.length-1],n[n.length-1]).clone(),r=i?s.nI_(A[1],n[1]).clone():s.nI_(A[A.length-2],n[n.length-2]).clone(),o=Math.atan2(h.getY()-r.getY(),h.getX()-r.getX()),l=this.Lus_+this.gt_().Ie_()/2,u=this.Uus_+this.gt_().Ie_()/2,a=[-l,0,-l],g=[-u/2,0,u/2],c=Gn.FI_(o,0,0),I=Gn.kI_(h.getX(),h.getY());c.DI_(I).DI_(e).NI_(a,g,a.length);this.N6_?this.N6_.dt_({x:a,y:g,fillstyle:{color:this.gt_()?this.gt_().getColor():"gray"},linestyle:this.gt_()}):this.N6_=new oE({x:a,y:g,fillstyle:{color:this.gt_()?this.gt_().getColor():"gray"},linestyle:this.gt_()});this.N6_.render(t)}Als_(t,i,s){if(!s||!ys(t,Zst))return!1;let e;if(i!==null&&i!==void 0){if(typeof i=="number"){ki("Call LinkVisual.connectTo with linkSide as number is deprecated since 4.0. Use enum LinkSide Instead");i=fet[i]}if(this.connections[i]){e=this.connections[i].Nus_();this.nls_(i)}t.hasEventListener("StateUpdated",this.Xus_)||t.on("StateUpdated",this.Xus_);this.connections[i]=new Cet(t,s,i,this);this.connections[i].Sus_(e);this.els_(!0);this.notify(det.Rus_,this,{linkSide:i,visual:t,modelPoint:s});return!0}return!1}sls_(){return this.connections}nls_(t){if(t!==null){if(typeof t=="number"){ki("Call LinkVisual.disconnectFrom with number is deprecated since 4.0. Use enum LinkSide Instead");t=fet[t]}const i=this.connections[t];if(!i)return;if(!i.mus_()){this.connections[t]=null;this.notify(det.Gus_,this,{linkSide:t});return}this.connections[Iet.pbi_]&&this.connections[Iet.End]&&this.connections[Iet.pbi_].mus_()===this.connections[Iet.End].mus_()||i.mus_().off("StateUpdated",this.Xus_);this.connections[t]=null;this.notify(det.Gus_,this,{linkSide:t})}this.els_(!0)}_us_(t){const i=[];let s;for(s in this.connections){const e=this.connections[s];e&&e.bus_()===t.XC_()&&i.push(e.Mus_()===Iet.pbi_?0:this.Bt_().length-1)}return i}els_(t){if(!this.$us_){this.$us_=!0;let i=!1,s;for(s in this.connections){const e=this.connections[s];if(e&&e.mus_()&&e.yus_()){const s=e.mus_(),A=ie(s)?s.if_().rn_(s.getBounds()):new mA;if(t||!A.Ce_(e.Nus_(),1)){i||this.td_();const t=this.getParent()?this.getParent().if_().aI_(e.mus_().if_().transformPoint(e.yus_())):oe(s)&&s.ut_()?s.ut_().transformPoint(e.yus_()):e.yus_();this.rd_(!1);this.tas_(e.Mus_(),t);this.rd_(!0);e.Sus_(A);i=!0}}}if(i){this.td_();this.vn_()}this.$us_=!1}}tas_(t,i){let s=this.Bt_().slice(),e=this.wt_().slice();const A=Xst.cc_,n=Xst.Yos_;if(typeof t=="number"){ki("Call LinkVisual.moveLinkHandle with linkSide as number is deprecated since 4.0. Use enum LinkSide Instead");t=fet[t]}const h=t===Iet.pbi_,r=h?0:s.length-1,o=h?Math.min(3,s.length-1):Math.max(0,s.length-1-3),l=this.if_(),u=l.rI_(),a=this.Jus_?this.Jus_.LM_().if_():new Gn,g=a.rI_(),c=this.ut_().aI_(i),I=c.getX(),f=c.getY(),C=Gn.multiply(g,l);if(this.xus_===get.Line){s[r]=I;e[r]=f}else{const t=s[o],l=e[o],g=t+(I-t)/2,c=l+(f-l)/2;if(this.Jus_)if(this.Id_("userTouched")){const t=s.length>2?s[h?2:s.length-3]:s[h?0:s.length-1],r=e.length>2?e[h?2:e.length-3]:e[h?0:e.length-1];s.length>2&&n(s,e,h?0:s.length-2,2);const o=this.Jus_.gls_(C.nI_(t,r),i,[],[this]);let l;for(let t=0;t<o.length;t++){l=u.transformPoint(a.transformPoint(o[t]));A(s,e,l.x,l.y,h?0:void 0)}}else{const o=h?this.Jus_.gls_(i,C.transformPoint(new lA(s[s.length-1],e[e.length-1])),this.connections[Iet.pbi_]?[this.connections[Iet.pbi_].mus_()]:[],[this]):this.Jus_.gls_(C.transformPoint(new lA(s[0],e[0])),i,this.connections[Iet.End]?[this.connections[Iet.End].mus_()]:[],[this]);if(o&&o.length>=2){s=[];e=[];for(let t=0;t<o.length;t++){const i=u.transformPoint(a.transformPoint(o[t]));A(s,e,i.getX(),i.getY(),void 0)}}else{const o=Math.min(3,s.length-1);for(let t=0;t<o;t++)n(s,e,h?r:r-t);if(Math.abs(t-i.x)>Math.abs(t-i.y)){A(s,e,g,l,h?r:void 0);A(s,e,g,f,h?r:void 0)}else{A(s,e,t,c,h?r:void 0);A(s,e,I,c,h?r:void 0)}}}}const d=Xst.Tos_(s,e,!1);this.Qt_(d["x"],d["y"]);this.pc_()}ias_(t,i,s){if(!(t instanceof iu)||!ys(t,Zst)||!t.if_()||ys(t,_st))return null;const e=t._os_();if(e)for(let A=0;A<e.length;A++){const n=e[A],h=undefined;if(lA.Ss_(t.if_().transformPoint(n),t.if_().transformPoint(t.ut_().aI_(i)))<s)return n}return null}};s=i=t([Zs(_st),_s("geotoolkit.flowcharts.LinkVisual")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm90b3R5cGVJZCI6Ildvc18iLCJnZXRQcm90b3R5cGVOYW1lIjoiem9zXyIsImdldENhdGVnb3J5IjoiWG9zXyIsImdldFNlYXJjaEtleXdvcmRzIjoiam9zXyIsImdldERlZmF1bHRTaXplIjoicFZfIiwic2V0RGVmYXVsdFNpemUiOiJab3NfIiwic2V0VGV4dCI6ImFfIiwiZ2V0R2VvbWV0cnkiOiJudF8iLCJnZXRMaW5rUG9pbnRzIjoiX29zXyIsInNldExpbmtQb2ludHMiOiIkb3NfIiwiZ2V0T3V0bGluZSI6IkRGXyIsImdldERlZmF1bHRJY29uU2l6ZSI6Imlsc18iLCJzZXRVcmwiOiJ0bHNfIiwiZ2V0VXJsIjoiX1ZfIiwiZ2V0TGlua1R5cGUiOiJLdXNfIiwic2V0TGlua1R5cGUiOiJIdXNfIiwiZ2V0U3ltYm9sU2l6ZSI6IlB1c18iLCJzZXRMaW5raW5nTW9kZSI6IlZ1c18iLCJnZXRMaW5raW5nTW9kZSI6Ik91c18iLCJnZXRUdWJpbmdXaWR0aCI6Ild1c18iLCJzZXRUdWJpbmdXaWR0aCI6Inp1c18iLCJjb25uZWN0VG8iOiJBbHNfIiwiZ2V0Q29ubmVjdGlvbnMiOiJzbHNfIiwiZGlzY29ubmVjdEZyb20iOiJubHNfIiwiZ2V0Q29ubmVjdGVkSW5kZXhlcyI6Il91c18iLCJ1cGRhdGVMaW5rcyI6ImVsc18iLCJtb3ZlTGlua0hhbmRsZSI6InRhc18iLCJjYW5Db25uZWN0IjoiaWFzXyJ9fX0g");var wet=function(){var t;return class{constructor(t,i,s){this.Eus_=t;this.sas_=i;this.eas_=s}}}();var Qet={mY_:0,aL_:1,j_:2,Aas_:4,nas_:8,oVt_:12};var Eet=Ci(function(){let i=class t extends QD{constructor(t){const i=undefined;super(qi(t,{x:0,y:0,size:new xA(7,7),painter:cE,isindevicespace:!0}))}bat_(t){super.bat_(t);return this}};i=t([_s("geotoolkit.flowcharts.shapes.edit.handles.LinkHandle")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPcGVyYXRpb25JbmZvIjoiYmF0XyJ9fX0g");var pet=Ci(function(){let i=class t extends QD{constructor(t,i,s,e,A){super(t,i,s);this.has_=e;this.ras_=A;this.oas_=!1;this.las_=new wr("rgba(255, 0, 0, 1)");this.dat_(new wr("rgba(255, 197, 113, 1)"))}render(t){const i=this.sd_()?t.uS_(this.sd_()):t,s=i.Ji_().cI_(this.egt_()),e=this.lR_(),A=new mA(e.getX()-s.Ie_()/2,e.getY()-s.Ts_()/2,e.getX()+s.Ie_()/2,e.getY()+s.Ts_()/2);i.iQ_(this.oas_?this.las_:this.Cat_());i.rB_(this.Eat_());i.ER_([A.we_(),A.ye_(),A.Qe_(),A.ye_()],[A.De_(),A.Ee_(),A.De_(),A.pe_()],0,3)}bat_(t){super.bat_(t);return this}};i=t([_s("geotoolkit.flowcharts.shapes.edit.handles.LinkSplitHandle")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPcGVyYXRpb25JbmZvIjoiYmF0XyJ9fX0g");var met=function(){var t;return class{constructor(t,i){this.Eus_=t;this.Qus_=i}uas_(){return 0}aas_(){return this.Eus_!=null?this.Eus_.Bt_().length-1:0}IMi_(){return this.Qus_===Iet.pbi_}}}();function yet(t){return t!=null&&typeof t.XC_=="function"}const Det=Xst.Yos_,Met=Xst.cc_;var vet=Ci(function(){let i=class t extends DD{constructor(){super();this.gas_=null;this.Sgt_=[];this.cas_={};this.Ias_=[];this.Ggt_=8;this.fas_=[];this.Cas_=[];this.das_=10;this.OSt_=new bC;this.Bas_=!1;this.was_=20;this.Qas_=20;this.Ezt_=null}PPt_(t,i,s){this.Eas_();this.pgt_(!1);this.pas_("default");this.Ezt_=null}qPt_(t,i,s){t instanceof FS&&(this.Ezt_=t.getPlot());if(this.gas_){this.Eas_();this.pgt_(!1)}this.mas_();this.Bas_=!1}mas_(){const t=this.e7_();if(t!=null){this.gas_=t.clone();if(this.gas_ instanceof Bp||this.gas_ instanceof ap){this.gas_.HC_("CLONE-"+t.dn_());this.gas_.iQ_(t.ct_());this.gas_.rB_(t.gt_());this.gas_.nf_(!0);this.gas_.Qt_(t.Bt_(),t.wt_());this.gas_.at_(t.ut_().clone());this.gas_.setProperty("userTouched",t.Id_("userTouched"));const i=t.getParent();i instanceof Ic&&i.GY_(this.gas_);this.gas_ instanceof ap&&this.gas_.pc_()}t.nf_(!1)}}Eas_(){const t=this.e7_();if(this.gas_){this.gas_.nf_(!1);if(t!=null){const i=this.gas_.Bt_(),s=this.gas_.wt_(),e=Xst.Tos_(i,s,!1);t.Qt_(e["x"],e["y"]);t.setProperty("userTouched",this.gas_.Id_("userTouched"));t.pc_();const A=t.getParent();A instanceof Ic&&A.removeChild(this.gas_)}}this.gas_=null;t!=null&&t.nf_(!0)}cus_(t,i){const s=new lA(t,i),e=this.OSt_.select(this.e7_().getRoot(),s.getX(),s.getY(),4).filter((t=>t!==this.e7_()&&t!==this.gas_&&!ys(t,_st)&&ys(t,Zst)));this.yas_(e)}yas_(t){t||(t=[]);if(this.Das_(this.fas_,t)||t.length===0&&this.fas_.length===0)return this;this.fas_=t;const i=this.mgt_();this.Cas_.forEach((function(t){return i.removeChild(t)}));this.Cas_=[];let s,e,A,n,h,r,o;for(s=0;s<this.fas_.length;s++){r=this.fas_[s];const t=r instanceof ch?r.if_():Gn.JI_;o=Gn.multiply(t,i.if_().rI_());if(r._os_()&&Array.isArray(r._os_())){n=r._os_();for(e=0;e<n.length;e++){h=n[e];o&&(h=o.transformPoint(h));A=new Eet({x:h.x,y:h.y});this.Cas_.push(A);i.GY_(A)}}}return this}Mas_(t,i,s){if(!this.gas_)return;const e=this.e7_().Bt_().slice(),A=this.e7_().wt_().slice(),n=t.has_?t.has_:this.cas_[Iet.pbi_],h=t.ras_?t.ras_:this.cas_[Iet.End],r=t,o=this.gas_.if_().rI_(),l=o.transformPoint(n.if_().transformPoint(n.lR_())),u=o.transformPoint(r.if_().transformPoint(r.lR_())),a=o.transformPoint(h.if_().transformPoint(h.lR_())),g=Math.abs(l.getY()-u.getY())<1e-7&&Math.abs(u.getY()-a.getY())<1e-7;if(t.Nat_().eas_===Qet.j_){let i,n,h;for(h=t.has_;h;h=h.has_)if(h.Nat_().eas_&Qet.oVt_){i=h;break}for(h=t.ras_;h;h=h.ras_)if(h.Nat_().eas_&Qet.oVt_){n=h;break}if(!i||!n)return;const r=o.transformPoint(i.if_().transformPoint(i.lR_())),l=o.transformPoint(i.if_().transformPoint(n.lR_()));if(g){this.pas_("n-resize");if(i.Nat_().sas_!==0&&n.Nat_().sas_===e.length-1){Det(e,A,i.Nat_().sas_,n.Nat_().sas_-i.Nat_().sas_);Met(e,A,l.getX(),s.getY(),i.Nat_().sas_);Met(e,A,r.getX(),s.getY(),i.Nat_().sas_)}else if(i.Nat_().sas_===0&&n.Nat_().sas_!==e.length-1){Det(e,A,i.Nat_().sas_+1,n.Nat_().sas_-i.Nat_().sas_);Met(e,A,l.getX(),s.getY(),i.Nat_().sas_+1);Met(e,A,r.getX(),s.getY(),i.Nat_().sas_+1)}else{Det(e,A,i.Nat_().sas_,n.Nat_().sas_-i.Nat_().sas_);i.has_||Met(e,A,l.getX(),l.getY(),i.Nat_().sas_);Met(e,A,l.getX(),s.getY(),i.Nat_().sas_);Met(e,A,r.getX(),s.getY(),i.Nat_().sas_);n.ras_||Met(e,A,r.getX(),r.getY(),i.Nat_().sas_)}}else{this.pas_("e-resize");if(i.Nat_().sas_!==0&&n.Nat_().sas_===e.length-1){Det(e,A,i.Nat_().sas_,n.Nat_().sas_-i.Nat_().sas_);Met(e,A,s.getX(),l.getY(),i.Nat_().sas_);Met(e,A,s.getX(),r.getY(),i.Nat_().sas_)}else if(i.Nat_().sas_===0&&n.Nat_().sas_!==e.length-1){Det(e,A,i.Nat_().sas_+1,n.Nat_().sas_-i.Nat_().sas_);Met(e,A,s.getX(),l.getY(),i.Nat_().sas_+1);Met(e,A,s.getX(),r.getY(),i.Nat_().sas_+1)}else{Det(e,A,i.Nat_().sas_,n.Nat_().sas_-i.Nat_().sas_);i.has_||Met(e,A,l.getX(),l.getY(),i.Nat_().sas_);Met(e,A,s.getX(),l.getY(),i.Nat_().sas_);Met(e,A,s.getX(),r.getY(),i.Nat_().sas_);n.ras_||Met(e,A,r.getX(),r.getY(),i.Nat_().sas_)}}this.gas_.setProperty("userTouched",!0)}const c=Xst.Tos_(e,A,!1);this.gas_.Qt_(c["x"],c["y"]);this.gas_.pc_()}vas_(){let t;for(t=0;t<this.Sgt_.length;t++){this.Sgt_[t].Iat_(null);this.mgt_().removeChild(this.Sgt_[t])}this.yas_(null);this.Sgt_=[];this.Ias_=[];this.cas_={}}bas_(t,i,s){if(!i||!t)return;const e=t.Nat_(),A=e.sas_;if(A<0||A>=this.e7_().Bt_().length)return;const n=this.e7_().Bt_(),h=this.e7_().wt_(),r=A===0?n[A]:(n[A]+n[A-1])/2,o=A===0?h[A]:(h[A]+h[A-1])/2;switch(e.eas_){case Qet.Aas_:case Qet.nas_:t.gR_(s.transformPoint(i.nI_(n[A],h[A]).clone()));t.nf_(!1);break;case Qet.mY_:t.gR_(s.transformPoint(i.nI_((n[A-1]+r)/2,(h[A-1]+o)/2)).clone());t.nf_(!1);break;case Qet.j_:t.gR_(s.transformPoint(i.nI_(r,o)).clone());break;case Qet.aL_:t.gR_(s.transformPoint(i.nI_((n[A]+r)/2,(h[A]+o)/2)).clone());t.nf_(!1);break}}Ngt_(t){if(!t)return this;const i=t.getBounds(),s=t.Bt_(),e=t.wt_();let A,n,h;const r=t.ut_()!=null?t.ut_():new Gn,o=t.if_();if(!o)return this;const l=this.mgt_().if_().rI_();for(A=0;A<this.Sgt_.length;A++){n=this.Sgt_[A];h=n.Nat_();h.Eus_=t;if(n instanceof pet&&this.xus_!==get.Line)this.bas_(n,o,l);else if(n instanceof Eet){const t=h.Qus_===Iet.pbi_?0:s.length-1,i=o.nI_(s[t],e[t]);n.gR_(l.transform(i))}else if(n instanceof mD){n.zA_({from:new lA(i.we_(),i.Ee_()),to:new lA(i.Qe_(),i.pe_())});n.at_(r)}}return this}Nas_(){for(let t=0;t<this.Sgt_.length;t++)this.Sgt_[t].nf_(!1)}pgt_(t){t===void 0&&(t=!0);this.vas_();const i=this.e7_();if(!(i instanceof Bet))return!1;this.xus_=i.Kus_();const s=i.getBounds(),e=i.Bt_(),A=i.wt_();let n,h;this.Sgt_.push(new mD(s.we_(),s.Ee_(),s.Qe_(),s.pe_()).bat_(new met(i,Iet.RB_)));t&&this.Mgt_(this.Sgt_[0]);if(this.xus_===get.CDt_){let t,s,h,r,o,l,u,a,g;const c=new xA(this.Ggt_,this.Ggt_);for(n=1;n<e.length;n++){h=(e[n]+e[n-1])/2;r=(A[n]+A[n-1])/2;o=s||new pet(e[n-1],A[n-1],c).bat_(new wet(i,n-1,Qet.Aas_));o.nf_(!1);if(!s){this.Sgt_.push(o);this.Ias_.push(o)}u=new pet((e[n-1]+h)/2,(A[n-1]+r)/2,c).bat_(new wet(i,n,Qet.mY_));u.nf_(!1);this.Sgt_.push(u);this.Ias_.push(u);g=new pet(h,r,c).bat_(new wet(i,n,Qet.j_));this.Sgt_.push(g);this.Ias_.push(g);a=new pet((e[n]+h)/2,(A[n]+r)/2,c).bat_(new wet(i,n,Qet.aL_));a.nf_(!1);this.Sgt_.push(a);this.Ias_.push(a);l=new pet(e[n],A[n],c).bat_(new wet(i,n,Qet.nas_));l.nf_(!1);this.Sgt_.push(l);this.Ias_.push(l);if(!s){o.has_=t;o.ras_=u}u.has_=o;u.ras_=g;g.has_=u;g.ras_=a;a.has_=g;a.ras_=l;l.has_=a;s&&(s.ras_=u);s=l;t=a}}const r=e.length-1;for(let t=0,s=[Iet.pbi_,Iet.End];t<s.length;t++){h=new Eet({x:e[t*r],y:A[t*r],size:new xA(this.Ggt_,this.Ggt_)}).bat_(new met(i,s[t]));this.Sgt_.push(h);this.cas_[s[t]]=h}for(n=1;n<this.Sgt_.length;n++){this.mgt_().GY_(this.Sgt_[n]);this.Sgt_[n].Iat_(this)}this.setStyle({main:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr("transparent")},corners:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}})}});this.Ngt_(this.e7_());this.mgt_().td_();return!0}ygt_(t){if(t!=null&&!(t instanceof ap)){ki("FlowCharts.LinksAdapter#setShape: shape must inherit geotoolkit/scene/shapes/Polyline");return this}super.ygt_(t);this.initialize();return this}Dgt_(t){this.Egt_()||this.pgt_(!0);this.Ngt_(this.e7_());if(!t){this.Eas_();this.Nas_();this.pas_("default")}}Sas_(t,i,s,e){if(t instanceof Bet){this.cas_[i].setActive(!1);if(this.fas_&&this.fas_.length>0){let A,n,h,r;for(A=0;A<this.fas_.length;A++){n=this.fas_[A];if(!(n instanceof ch&&n.getParent()))return;r=n.getParent().if_().rI_();h=t.ias_(n,r.nI_(s,e),this.das_);for(let t=0;t<this.Cas_.length;t++){let s;const e=h&&this.Cas_[t].lR_().bs_(s=n.sd_().transformPoint(h));this.Cas_[t].setActive(e);e&&this.gas_&&this.gas_.tas_(i,s)}if(h){this.cas_[i].setActive(!0);if(t.Als_(n,i,h)){t.els_();return}}}}t.nls_(i)}}bgt_(t,i){const s=this.vgt_();if(!s)return this;const e=this.getPosition();if(e.getX()===t&&e.getY()===i)return this;this.Bas_=!0;this.Nas_();const A=this.gas_?this.gas_:this.e7_();if(A==null)return this;A.td_();const n=A.if_().rI_(),h=n.transformPoint(e),r=n.nI_(t,i).clone();if(s instanceof pet&&this.xus_!==get.Line)this.Mas_(s,h,r);else if(s instanceof Eet){this.cus_(t,i);const e=s.Nat_();if(e!=null&&e.Qus_!=null){A instanceof Bet&&A.tas_(e.Qus_,A.ut_().transformPoint(r));this.Sas_(e.Eus_,e.Qus_,t,i)}}else{this.pas_("move");this.Eas_();const t=Gn.kI_(r.getX()-h.getX(),r.getY()-h.getY());A.ut_()?A.at_(Gn.multiply(A.ut_(),t)):A.at_(t);for(let t=0,i=[Iet.pbi_,Iet.End];t<i.length;t++){const s=this.cas_[i[t]].if_().transformPoint(this.cas_[i[t]].lR_());this.Sas_(this.e7_(),this.cas_[i[t]].Nat_().Qus_,s.getX(),s.getY())}}this.Ngt_(this.e7_());A.td_();return this}setStyle(t){const i=function(t){return qi({},t instanceof hl?{linestyle:t.N_()}:{linestyle:t})},s=function(t){return qi({},t instanceof wr?{fillstyle:t.N_()}:{fillstyle:t})};let e={};if(t["main"]!==void 0){t["main"]["linestyle"]!==void 0&&(e=qi(e,i(t["main"]["linestyle"])));t["main"]["fillstyle"]!==void 0&&(e=qi(e,s(t["main"]["fillstyle"])));this.Sgt_[0].dt_(e)}let A={};if(t["corners"]!==void 0){t["corners"]["linestyle"]!==void 0&&(A=qi(A,i(t["corners"]["linestyle"])));t["corners"]["fillstyle"]!==void 0&&(A=qi(A,s(t["corners"]["fillstyle"])));let e;for(e=1;e<this.Sgt_.length;++e)this.Sgt_[e].dt_(A)}return this}Das_(t,i){if(!t&&!i)return!0;if(!t||!i||t.length!==i.length)return!1;let s;for(s=0;s<t.length;s++){const e=t[s],A=i[s];if(!yet(e)||!yet(A)||e.XC_()!==A.XC_())return!1}return!0}pas_(t){this.Ezt_!=null&&BG.Yb_(this.Ezt_,{cursor:t});return this}};i=t([_s("geotoolkit.flowcharts.shapes.edit.LinksAdapter")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTaGFwZSI6InlndF8iLCJ1cGRhdGVIYW5kbGVzIjoiTmd0XyJ9fX0g");var bet=Ci(function(){var i;let s=i=class t extends ap{constructor(t){const i=[];for(let t=1;t<arguments.length;t++)i[t-1]=arguments[t];super(i);this.Gas_=new hl("rgba(100, 100, 100, 1)",3);this.Ras_=new wr("rgba(100, 100, 100, 1)");this.Fus_=0;this.Kls_=[];this.Hls_=[new lA(0,0),new lA(0,0)];this.connections={};this.connections[Iet.pbi_]=null;this.connections[Iet.End]=null;this.initialize(t);this.setProperty("created",!1)}Wos_(){return this.Uls_}zos_(){return this.Lls_}Xos_(){return this.Yls_}jos_(){return this.Kls_}Yus_(t){this.Kls_=t;return this}pV_(){const t=this.getBounds();return new xA(t.Ie_(),t.Ts_())}Zos_(t){return this}Pd_(t){this.qd_=t}a_(t){return this}nt_(){return this}_os_(){const t=[],i=this.Bt_(),s=this.wt_();for(let e=0;e<i.length;e++)t.push(new lA(i[e],s[e]));return t}$os_(t){return this}DF_(){return this.Xk_}ils_(){return this.Tus_}tls_(t){this.qls_=t;return this}_V_(){return this.qls_}xls_(t){this.qDt_=t;return this}u3i_(){return this.qDt_}Wus_(){return this.Fus_}zus_(t){(!t||t<0)&&(t=0);if(this.Fus_!==t){this.td_();this.Fus_=t;this.td_()}}getBounds(){const t=super.getBounds().clone(),i=this.gt_()?this.gt_().Ie_()/2:.5;t.Le_(t.Ie_()<Xst.EPSILON?1e-5:i,t.Ts_()<Xst.EPSILON?1e-5:i);this.Wus_()&&t.Le_(this.Fus_,this.Fus_);return t}initialize(t){if(t=Es(t)){this.Lls_=t["prototypename"];this.qd_=t["geometry"];this.Uls_=t["prototypeid"];this.Yls_=t["category"];this.Tus_=t["defaulticonsize"];this.Kls_=t["searchkeywords"];this.$os_(t["linkpoints"]);this.Xk_=t["outline"];this.qls_=t["url"];this.kki_=t["polygon"];(t["geometry"]instanceof ap||t["geometry"]instanceof oE)&&this.dt_(t["geometry"].N_());this.HC_(t["prototypename"]);this.zus_(t["tubingwidth"]);this.pc_()}this.on(rh.rC_,(()=>{this.els_()}));this.JC_(t&&t["id"]?t["id"]:nh.u_())}clone(){const t=undefined;return new i({prototypename:this.Lls_,geometry:this.nt_(),prototypeid:this.Wos_(),category:this.Xos_(),defaultsize:this.pV_(),defaulticonsize:this.ils_(),searchkeywords:this.Kls_?this.Kls_.slice():[],linkpoints:this._os_()?this._os_().slice():null,outline:this.DF_()?this.DF_().clone():null,tubingwidth:this.Wus_(),url:this._V_()})}rt_(){let t=Xst.qos_,i=Xst.qos_,s=Xst.Jos_,e=Xst.Jos_;const A=this.Bt_(),n=this.wt_();for(let h=0;h<A.length;h++){t>A[h]&&(t=A[h]);i>n[h]&&(i=n[h]);s<A[h]&&(s=A[h]);e<n[h]&&(e=n[h])}return new mA(t,i,s,e)}render(t){if(this.qd_ instanceof oE){this.qd_.dt_(this.N_());this.qd_.render(t)}else super.render(t)}Als_(t,i,s){if(!s||!ys(t,Zst))return!1;let e;if(i!=null){if(this.connections[i]){e=this.connections[i].Nus_();this.nls_(i);this.connections[i]=null}t.on(rh.rC_,(()=>{this.els_()}));this.connections[i]=new Cet(t,s,i,this);this.connections[i].Sus_(e);this.els_(!0);return!0}return!1}sls_(){return this.connections}nls_(t,i,s){if(t!=null){if(typeof t=="number"){ki("Call PolylineVisual.disconnectFrom with linkSide as number is deprecated since 4.0. Use enum LinkSide Instead");t=fet[t]}const e=this.connections[t];if(!e)return;if(!e.mus_()){this.connections[t]=null;return}if(i!=null&&s!=null){const e=this.if_().aI_(new lA(i,s)),A=t===Iet.pbi_?0:this.Bt_().length-1;this.Bt_()[A]=e.getX();this.wt_()[A]=e.getY()}this.connections[t]=null;this.connections[Iet.pbi_]==null&&this.connections[Iet.End]==null&&e.mus_().off(rh.rC_,(()=>{this.els_()}))}this.els_()}_us_(t){const i=[];let s;for(s in this.connections){const e=this.connections[s];e&&e.bus_()===t.XC_()&&i.push(e.Mus_()===Iet.pbi_?0:this.Bt_().length-1)}return i}els_(t){t===void 0&&(t=!1);if(!this.$us_){this.$us_=!0;let i=!1,s;for(s in this.connections){const e=this.connections[s];if(e&&e.mus_()&&e.yus_()){const s=e.mus_(),A=ie(s)?s.if_().rn_(s.getBounds()):new mA;if(t||!A.Ce_(e.Nus_())){i||this.td_();const t=this.getParent().if_().aI_(e.mus_().if_().transformPoint(e.yus_()));this.tas_(e.Mus_(),t,!0,!0);e.Sus_(A);i=!0}}}if(i){this.pc_();this.td_();this.vn_()}this.$us_=!1}}tas_(t,i,s,e){const A=this.Bt_().slice(),n=this.wt_().slice();if(typeof t=="number"){ki("Call PolylineVisual.moveLinkHandle with linkSide as number is deprecated since 4.0. Use enum LinkSide Instead");t=fet[t]}const h=undefined,r=t===Iet.pbi_?0:A.length-1,o=this.ut_().aI_(i),l=o.x,u=o.y;if(s){A[r]=l;n[r]=u}else e||Xst.cc_(A,n,A[r],n[r],r+1);this.Qt_(A,n);this.pc_()}ias_(t,i,s){if(!t||!ys(t,Zst)||!t.if_()||ys(t,_st))return null;const e=t._os_();let A;const n=t.if_(),h=oe(t)&&t.ut_()!=null?t.ut_():Gn.JI_;if(e)for(let t=0;t<e.length;t++){A=e[t];const r=undefined;if(lA.Ss_(n.transformPoint(A),n.transformPoint(h.aI_(i)))<s)return A}return null}};s=i=t([Zs(_st),_s("geotoolkit.flowcharts.shapes.connectors.PolylineVisual")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm90b3R5cGVJZCI6Ildvc18iLCJnZXRQcm90b3R5cGVOYW1lIjoiem9zXyIsImdldENhdGVnb3J5IjoiWG9zXyIsImdldFNlYXJjaEtleXdvcmRzIjoiam9zXyIsImdldERlZmF1bHRTaXplIjoicFZfIiwic2V0RGVmYXVsdFNpemUiOiJab3NfIiwic2V0VGV4dCI6ImFfIiwiZ2V0R2VvbWV0cnkiOiJudF8iLCJnZXRMaW5rUG9pbnRzIjoiX29zXyIsInNldExpbmtQb2ludHMiOiIkb3NfIiwiZ2V0T3V0bGluZSI6IkRGXyIsImdldERlZmF1bHRJY29uU2l6ZSI6Imlsc18iLCJzZXRVcmwiOiJ0bHNfIiwiZ2V0VXJsIjoiX1ZfIiwiZ2V0VHViaW5nV2lkdGgiOiJXdXNfIiwic2V0VHViaW5nV2lkdGgiOiJ6dXNfIiwiY29ubmVjdFRvIjoiQWxzXyIsImdldENvbm5lY3Rpb25zIjoic2xzXyIsImRpc2Nvbm5lY3RGcm9tIjoibmxzXyIsImdldENvbm5lY3RlZEluZGV4ZXMiOiJfdXNfIiwidXBkYXRlTGlua3MiOiJlbHNfIiwiY2FuQ29ubmVjdCI6Imlhc18ifX19");var Net=Ci(function(){let i=class t extends vet{constructor(){super();this.kas_=!1}Fas_(){this.e7_().setProperty("created",!0);this.Eas_();this.pgt_(!0);this.pas_("default")}isConnected(){return this.kas_}PPt_(t,i,s){if(this.e7_().Id_("created")){this.Eas_();this.pgt_(!1);this.pas_("default")}else{this.mas_();this.Bas_=!1}}qPt_(t,i,s){if(this.e7_().Id_("created")){this.mas_();this.Bas_=!1}else{this.Eas_();this.pgt_(!1);this.pas_("default");this.kas_&&this.e7_().setProperty("created",!0)}}mas_(){super.mas_();this.gas_.setProperty("control",this.e7_().Id_("control"));this.gas_.setProperty("created",this.e7_().Id_("created"))}Eas_(t){t===void 0&&(t=!1);if(this.gas_){this.gas_.nf_(!1);if(this.e7_()&&!t){const t=this.gas_.Bt_(),i=this.gas_.wt_(),s=Xst.Tos_(t,i,!0);this.e7_().Qt_(s["x"],s["y"]);this.e7_().setProperty("userTouched",this.gas_.Id_("userTouched"));this.e7_().setProperty("created",this.gas_.Id_("created"));this.e7_().pc_()}const i=this.e7_().getParent();i instanceof Ic&&i.removeChild(this.gas_)}this.gas_=null;this.e7_().nf_(!0)}Mas_(t,i,s){if(!this.gas_||!t)return;const e=this.e7_().Bt_().slice(),A=this.e7_().wt_().slice(),n=t.Nat_().sas_,h=n===0?e[e.length-1]:e[n-1],r=n===0?A[A.length-1]:A[n-1],o=n===e.length-1?e[0]:e[n+1],l=n===A.length-1?A[0]:A[n+1];let u=s.getX(),a=s.getY(),g,c;if(u-h!=0&&a-r!=0){g=Math.sqrt(Math.pow(u-h,2)+Math.pow(a-r,2));c=Math.abs(u-h)/Math.abs(a-r);if(c<Math.tan(5*Math.PI/180)){u=h;a=r+(a-r>0?g:-1*g)}else if(c<Math.tan(48*Math.PI/180)&&c>Math.tan(42*Math.PI/180)){u=h+(u-h>0?g*Math.sin(45*Math.PI/180):g*Math.sin(45*Math.PI/180)*-1);a=r+(a-r>0?g*Math.sin(45*Math.PI/180):g*Math.sin(45*Math.PI/180)*-1)}else if(c>Math.tan(87*Math.PI/180)){a=r;u=h+(u-h>0?g:-1*g)}}if(u-o!=0&&a-l!=0){g=Math.sqrt(Math.pow(u-o,2)+Math.pow(a-l,2));c=Math.abs(u-o)/Math.abs(a-l);if(c<Math.tan(5*Math.PI/180)){u=o;a=l+(a-l>0?g:-1*g)}else if(c<Math.tan(50*Math.PI/180)&&c>Math.tan(40*Math.PI/180)){u=o+(u-o>0?g*Math.sin(45*Math.PI/180):g*Math.sin(45*Math.PI/180)*-1);a=l+(a-l>0?g*Math.sin(45*Math.PI/180):g*Math.sin(45*Math.PI/180)*-1)}else if(c>Math.tan(85*Math.PI/180)){a=l;u=o+(u-o>0?g:-1*g)}}Xst.Yos_(e,A,t.Nat_().sas_);Xst.cc_(e,A,u,a,t.Nat_().sas_);this.gas_.setProperty("userTouched",!0);const I=Xst.Tos_(e,A,!0);this.gas_.Qt_(I["x"],I["y"]);this.gas_.pc_()}bas_(t,i,s){if(!i)return;const e=undefined,A=t.Nat_().sas_;if(A<0||A>=this.e7_().Bt_().length)return;const n=this.e7_().Bt_(),h=this.e7_().wt_(),r=s.transformPoint(i.nI_(n[A],h[A]).clone());t.gR_(r)}pgt_(t){t===void 0&&(t=!0);this.vas_();const i=this.e7_(),s=i.getBounds(),e=i.Bt_(),A=i.wt_();this.kas_&&i.setProperty("created",!0);let n,h;this.Sgt_.push(new mD(s.we_(),s.Ee_(),s.Qe_(),s.pe_()).bat_(new met(i,Iet.RB_)));const r=new xA(this.Ggt_*1,this.Ggt_*1);let o=1;if(this.e7_().nt_()instanceof oE&&this.e7_().Id_("created"))o=0;else{const t=e.length-1;let s=0;const r=[Iet.pbi_,Iet.End];for(;s<r.length;s++){h=new Eet({x:e[n*t],y:A[n*t],size:new xA(this.Ggt_,this.Ggt_)}).bat_(new met(i,r[s]));this.Sgt_.push(h);this.cas_[r[s]]=h}}for(n=o;n<e.length-o;n++){const t=new pet(e[n],A[n],r).bat_(new wet(i,n,Qet.oVt_));this.Sgt_.push(t);this.Ias_.push(t)}t&&(this.e7_().Id_("created")?this.Mgt_(this.Sgt_[0]):this.Mgt_(this.cas_[Iet.End]));for(n=1;n<this.Sgt_.length;n++){this.mgt_().GY_(this.Sgt_[n]);this.Sgt_[n].Iat_(this)}this.setStyle({main:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr("transparent")},corners:{linestyle:new hl({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}})}});this.Ngt_(this.e7_());this.mgt_().td_();return!0}ygt_(t){super.ygt_(t);if(t.Id_("created"))this.pgt_();else{this.kas_=!1;this.initialize();this.mas_();this.Bas_=!1}return this}Dgt_(t){this.Egt_()||this.pgt_(!0);this.Ngt_(this.e7_());if(!t){this.Eas_(!0);this.e7_().setProperty("created",!0);this.Nas_();this.pas_("default")}}Sas_(t,i,s,e){if(t instanceof bet){this.cas_[i].setActive(!1);if(this.fas_&&this.fas_.length>0){let A=0,n,h;for(;A<this.fas_.length;A++){h=this.fas_[A];if(!(h instanceof ch&&h.getParent()))return;n=t.ias_(h,h.getParent().if_().aI_(new lA(s,e)),this.das_);for(let t=0;t<this.Cas_.length;t++){let s;const e=n&&this.Cas_[t].lR_().bs_(s=h.sd_().transformPoint(n));this.Cas_[t].setActive(e);e&&this.gas_ instanceof bet&&this.gas_.tas_(i,s,!0,this.gas_.Id_("created"))}if(n){this.cas_[i].setActive(!0);if(t.Als_(h,i,n)){t.els_();this.Ngt_(t)}this.kas_=!0;return}this.kas_=!1}}t.nls_(i)}}bgt_(t,i){this.cus_(t,i);const s=this.vgt_();if(s==null)return this;const e=this.getPosition();if(e.getX()===t&&e.getY()===i)return this;this.Nas_();const A=this.gas_?this.gas_:this.e7_();A.td_();const n=A.if_().rI_(),h=n.transformPoint(e),r=n.nI_(t,i).clone();if(s instanceof pet)this.Mas_(s,h,r);else if(s instanceof Eet){const e=s.Nat_();if(e!=null&&e.Qus_!=null&&A){A.tas_(e.Qus_,A.ut_().transformPoint(r),this.Bas_,this.e7_().Id_("created"));this.e7_().Id_("created")&&this.Sas_(e.Eus_,e.Qus_,t,i)}}else{this.pas_("move");this.Eas_();const t=A.getBounds(),i=t.clone(),s=r.getX()-h.getX(),e=r.getY()-h.getY();i.setX(i.getX()+s);i.setY(i.getY()+e);const n=Gn.xI_(t,i,!1,!1,!1),o=A.ut_()?A.ut_():new Gn;A.at_(Gn.multiply(o,n));let l=0;const u=[Iet.pbi_,Iet.End];for(;l<u.length;l++){const t=u[l];if(this.cas_[t]==null)continue;const i=this.cas_[t].if_().transformPoint(this.cas_[t].lR_());this.Sas_(this.e7_(),this.cas_[t].Nat_().Qus_,i.getX(),i.getY())}}this.Bas_=!0;this.Ngt_(this.e7_());A.td_();return this}};i=t([_s("geotoolkit.flowcharts.shapes.edit.PolylineAdapter")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRTaGFwZSI6InlndF8ifX19");var Get=Ci(function(){let i=class t extends OS{constructor(t,i){super(t=qi(t,{model:t instanceof sI?t:null,slots:{},name:"DiagramTool",layer:i},!0));this.xas_=null;this.Las_=null;this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),pointerup:this.Ct_.bind(this),dblclick:this.WFt_.bind(this)});this.Uas_=!0;this.Yas_=new Wst;this.Tas_=0;this.Kas_=()=>{this.Las_&&this.Has_(this.Las_)};this.T4_=t["model"];this.OSt_=new bC}lFt_(t){this.E8_=t;this.qas_(t);return this}Jas_(){return this.Pas_}qas_(t){this.Pas_||(this.Pas_=new RD(null,this.mgt_()).register(iet.D_(),new oet).register(het.D_(),new oet).register(Bet.D_(),new vet).register(bet.D_(),new Net).register(set.D_(),this.xas_=new oet).register(Pj.D_(),new oet));return this.Pas_}Vas_(){this.Pas_.Ogt_(null);return this}dispose(){this.Xxi_&&this.Xxi_.removeEventListener("keypress",this._xi_);super.dispose()}zFt_(t){let i;const s=this.bFt_(this.T4_,t),e=this.T4_.if_().transformPoint(s),A=this.OSt_.select(this.E8_.getRoot(),e.getX(),e.getY(),3).filter(Ih);let n;if(this.pei_ instanceof Net&&"n9t_"in(n=this.pei_.e7_())&&!n["created"]){this.pei_.qPt_(t,e,s);if(!this.pei_.isConnected())return}if(A&&A.length>0){for(i=A.length-1;i>=0;i--)if(A[i]instanceof Bet||A[i]instanceof bet){const n=this.Pas_.Wgt_();(n instanceof vet||n instanceof Net)&&n.isActive()&&n.e7_()===A[i]&&n.qPt_(t,e,s)}for(i=A.length-1;i>=1;i--){const s=A[i];if(s instanceof uD){if(s instanceof BD){const t=this.Oas_();if(t&&t.length===1&&t[0]!==A[i])continue}if(s.fat_()){this.pei_=s.fat_().Mgt_(s).setPosition(e.getX(),e.getY());this.Pas_.Ogt_(this.pei_);this.isActive()||this.start();t.stopPropagation(!0);return}}}}const h=this.Was_(A,e,t);if(h&&h.length){this.zas_!==h&&this.Xas_().Gos_(h);this.zas_=h}else this.OLi_()}Ct_(t){let i;if((!this.isActive()||!this.pei_)&&(!(this.pei_ instanceof Net&&"n9t_"in(i=this.pei_.e7_()))||i["created"]&&!this.pei_.isConnected()))return;const s=this.Pas_.Wgt_();if(s instanceof vet||s instanceof Net){const i=this.bFt_(this.T4_,t),e=this.T4_.if_().transformPoint(i);s.PPt_(t,e,i);s.yas_([])}const e=this.pei_.e7_();if(!(this.pei_ instanceof Net&&"n9t_"in(i=this.pei_.e7_()))||i["created"]){e instanceof Bet&&e.els_();this.pei_&&this.pei_.Mgt_(null);this.pei_=null;this.stop()}}WFt_(t){const i=this.bFt_(this.T4_,t),s=this.T4_.if_().transformPoint(i),e=this.OSt_.select(this.E8_.getRoot(),s.getX(),s.getY(),4).filter((t=>ys(t,Zst))),A=e.length>0?e[e.length-1]:null;ys(A,iet)&&this.jas_(A);if(this.pei_ instanceof Net){this.pei_.Fas_();this.OLi_()}}XFt_(t){if(!this.pei_)return;const i=this.bFt_(this.T4_,t),s=this.T4_.if_().transformPoint(i),e=this.Pas_.Wgt_();e&&e.move(s.getX(),s.getY())}OLi_(){this.zas_=null;this.Xas_().Gos_([]);this.Vas_()}Zas_(){let t;if(this.pei_ instanceof Net&&"n9t_"in(t=this.pei_.e7_())&&!t["created"]){this.pei_.Fas_();this.OLi_();return!0}return!1}Was_(t,i,s){const e=t;if(e&&e.length>0)for(let t=e.length-1;t>=0;t--){if(e[t].getParent()&&e[t].getParent().XC_()!=="ShapesContainer")continue;const A=this.Pas_.fat_(e[t]);if(A){e[t]instanceof bet&&e[t].dn_().indexOf("CLONE")!==-1||A.ygt_(e[t]).setPosition(i.getX(),i.getY());this.Pas_.Ogt_(null);this.Pas_.Ogt_(A);this.pei_=A;this.isActive()||this.start();s&&s.stopPropagation(!0);return[e[t]]}}return[]}_as_(){this.stop();this.pei_=null;this.Vas_()}Oas_(){const t=[];if(!this.Pas_.Wgt_())return[];let i;const s=this.Pas_.Wgt_().e7_();if(s instanceof set){const e=s.ovi_();for(i=0;i<e.length;i++)t.push(e[i])}else t.indexOf(s)<0&&t.push(s);return t}$as_(t){let i,s;if(this.pei_ instanceof Net&&"n9t_"in(i=this.pei_.e7_())&&!i["created"])return this;this.Pas_.Ogt_(null);if(t.length>1){s=this.xas_;if(s){s.ygt_(t);this.Pas_.Ogt_(s)}}else if(t.length===1)for(let i=0;i<t.length;i++){s=this.Pas_.fat_(t[i]);if(!s)return this;s.ygt_(t[i]);this.Pas_.Ogt_(s)}this.Xas_().Gos_(t);return this}tgs_(){return this.Uas_}igs_(t){this.Uas_=t;return this}jas_(t){if(this.tgs_()){if(this.Las_){this.Las_.off(rh.rC_,this.Kas_);if(this.Las_.u3i_&&this.Las_.u3i_()){this.Las_.u3i_().nf_(!0);this.Las_.td_()}}this.sgs_();this.Las_=t;if(t){t.on(rh.rC_,this.Kas_);if(t.u3i_&&t.u3i_()){t.u3i_().nf_(!1);t.td_()}this.Has_(t,!0);this.Xxi_.focus()}}}sgs_(){if(!this.zxi_){this.zxi_=xs("div");this.zxi_.style["position"]="absolute";this.zxi_.style["display"]="none";this.zxi_.style["border"]="0px solid transparent !important";this.zxi_.style["pointerEvents"]="none";this.zxi_.style["overflow"]="hidden";Mi.document.body.appendChild(this.zxi_);this.Xxi_=xs("div");this.Xxi_.style["overflow"]="hidden";this.Xxi_.style["position"]="absolute";this.Xxi_.style["border"]=this.Tas_+"px solid black";this.Xxi_.style["pointerEvents"]="all";this.Xxi_.style["display"]="flex";this.Xxi_.style["alignContent"]="center";this.Xxi_.style["alignItems"]="center";this.Xxi_.contentEditable="true";this.zxi_.appendChild(this.Xxi_);this._xi_=t=>{t.key!=="Enter"&&t.keyCode!==13||t.shiftKey||this.egs_()};this.Xxi_.addEventListener("keypress",this._xi_);this.$xi_=t=>{if(t.key!=="Escape"&&t.keyCode!==27){this.Has_(this.Las_,!1);t.stopPropagation()}else this.Ags_()};this.Xxi_.addEventListener("keydown",this.$xi_);this.Xxi_.addEventListener("blur",(()=>this.egs_()))}}Has_(t,i){const s=this.E8_?this.E8_.r3_():null;if(!s)return this;const e=Us(this.E8_.r3_()),A=new mA({x:e.x,y:e.y,width:s.clientWidth,height:s.clientHeight});if(!t||!t.getBounds()){this.zxi_.style["display"]="none";return this}const n=this.ngs_(t,!0);if(i){this.Xxi_.innerText=t.u3i_()&&t.u3i_().SG_()||"";this.Xxi_.style["wordBreak"]="break-all";this.Xxi_.style["font"]=t.u3i_().FE_().Zy_();this.Xxi_.style["textAlign"]=t.u3i_().FE_().vF_();this.Xxi_.style["justifyContent"]=t.u3i_().FE_().vF_()===Fa.X_?"flex-end":t.u3i_().FE_().vF_();this.Xxi_.style["color"]="red";this.Xxi_.style["lineHeight"]=t.u3i_().FE_().Wy_()+"";this.Xxi_.style["baselineShift"]=t.u3i_().FE_().AD_()}this.zxi_.style["display"]="block";this.zxi_.style["left"]=A.getX()+"px";this.zxi_.style["top"]=A.getY()+"px";this.zxi_.style["width"]=A.Ie_()+"px";this.zxi_.style["height"]=A.Ts_()+"px";this.Xxi_.style["left"]=n["left"]+"px";this.Xxi_.style["top"]=n["top"]+"px";this.Xxi_.style["width"]=n["width"]+this.Tas_*2+"px";this.Xxi_.style["height"]=n["height"]+this.Tas_*2+"px";this.Xxi_.style["transformOrigin"]="center";this.Xxi_.style["transform"]="rotate("+n["angle"]+"rad)";return this}ngs_(t,i){const s=t.getBounds(),e=[s.Me_(),s.ve_(),s.be_(),s.Ne_(),s.getCenter()],A=t.if_().clone(),n=[];for(let t=0;t<e.length;t++)n.push(A.transformPoint(e[t]));const h=iet.Pls_(iet.Vls_(n[0],n[1]),!1),r=lA.Ss_(n[0],n[1]),o=lA.Ss_(n[0],n[3]);return{angle:h,left:n[4].getX()-r/2,top:n[4].getY()-o/2,width:r,height:o}}egs_(){if(this.Las_ instanceof iet){this.Las_.u3i_().a_(this.Xxi_.innerText);this.Las_.td_()}this.hgs_();return this}Ags_(){if(this.Xxi_.style.display==="none")return this;this.hgs_();return this}hgs_(){this.zxi_.style.display="none";if(this.Las_){this.Las_.off(rh.rC_,this.Kas_);if(this.Las_.u3i_()){this.Las_.u3i_().nf_(!0);this.Las_.td_()}}this.Las_=null}Xas_(){this.Yas_||(this.Yas_=new Wst);return this.Yas_}};i=t([_s("geotoolkit.flowcharts.shapes.edit.DiagramTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTaGFwZUFkYXB0ZXJzIjoiSmFzXyIsImNsZWFyU2VsZWN0aW9uIjoiT0xpXyIsInN0YXJ0QWRhcHRlciI6Ildhc18iLCJnZXRBY3RpdmVTZWxlY3Rpb24iOiJPYXNfIiwic2VsZWN0VmlzdWFscyI6IiRhc18iLCJnZXRUZXh0RWRpdG9yRW5hYmxlZCI6InRnc18iLCJzZXRUZXh0RWRpdG9yRW5hYmxlZCI6Imlnc18iLCJnZXRPblNlbGVjdGlvbkNoYW5nZUV2ZW50IjoiWGFzXyJ9fX0g");var Ret=Ci({W_:"None",qK_:"Panning",rgs_:"RubberBandSelection"},2,"eyJOb25lIjoiV18iLCJQYW5uaW5nIjoicUtfIiwiUnViYmVyQmFuZFNlbGVjdGlvbiI6InJnc18ifSAg");let ket=null;var Fet=function(){var t=class{static Ai_(){ket||(ket=new t);return ket}o5_(t,i,s){return this.ogs_().o5_(t,i,s)}l5_(t){return this.ogs_().l5_(t)}lgs_(t,i){this.qw_().XE_(t);this.qw_().OE_(t,i)}jE_(t){return this.qw_().jE_(t)}ogs_(){this.ugs_||(this.ugs_=new pw(this.qw_()));return this.ugs_}qw_(){this.Jv_||(this.Jv_=new Kr);return this.Jv_}static ags_(t){return t&&typeof t.load=="function"&&typeof t.save=="function"}};return t}();function xet(t){return t!=null&&ys(t,_st)&&typeof t.nls_=="function"&&typeof t.pc_=="function"}var Let=Ci(function(){let i=class t extends eK{constructor(t){super(t);this.H$t_=Ret.qK_;this.ggs_=new mA(0,0,800,500);this.cgs_=new xA(1,1);this.Igs_=0;this.fgs_=10;this.Yas_=new Wst;this.oUt_=null;this.Cgs_=null;this.dgs_=t=>{t.keyCode===46&&this.Bgs_()};this.wgs_=t=>{t.keyCode===27&&this.OLi_()};this.initialize();this.Qgs_(Ret.rgs_)}Pei_(t,i,s){const e=t.LM_().rt_(),A=t.LM_().ot_();i&&i.Lq_(e,A,t.LM_().ZY_());s&&s.Lq_(e,A,t.LM_().jY_())}pan(t,i,s,e,A){t.P4_(i,s);this.Pei_(t,e,A);return this}Egs_(t){const i=new wr({color:new nA(255,255,255,1)}),s=new hl("gray",2),e=(new sI).iQ_(i).rB_(s).aq_(!1).Lq_(t.clone()).ht_(t.clone());this.lNt_=new sI;this.lNt_.Lq_(t.clone());this.lNt_.HC_("ShapesContainer");this.lNt_.JC_("ShapesContainer");this.lNt_.gk_(new tI);$st.cls_&&e.GY_(new tet(this.lNt_,this.Mls_));e.GY_([this.lNt_]);return e}pgs_(t){this.mgs_=(new md).C$_("major",100).C$_("minor",50).Hx_("minor",!0);this.mgs_.Vx_("major").setColor("blue");this.mgs_.Vx_("edge").setColor("darkblue");this.mgs_.Vx_("minor").setColor("orange");this.mgs_.Rx_("major").nF_("12px sans-serif");this.mgs_.Rx_("minor").nF_("12px sans-serif");this.mgs_.Rx_("edge").nF_("12px sans-serif");const i=new nd(this.mgs_).LE_(yr.JQ_).setOrientation(fg.ux_).KZ_(Dr.JQ_),s=new nd(this.mgs_).LE_(yr.Top).setOrientation(fg.ux_).KZ_(Dr.Top),e=new nd(this.mgs_).LE_(yr.X_).setOrientation(fg.ax_).KZ_(Dr.X_),A=new nd(this.mgs_).LE_(yr.z_).setOrientation(fg.ax_).KZ_(Dr.z_),n={fillstyle:new wr({color:"red"}),model:this.Egs_(t),keepvisiblelimits:!1,north:[i],south:[s],west:[e],east:[A]};this.s3t_=new rQ(n).oN_(null);this.s3t_.ft_({left:0,right:0,top:0,bottom:0});this.s3t_.v4_(ha.eG_).dq_(this.Igs_);this.s3t_.v4_(ha.nG_).dq_(0);this.s3t_.v4_(ha.sG_).Cq_(this.Igs_);this.s3t_.v4_(ha.AG_).Cq_(0);return this.s3t_}v4_(t){return t===ha.W_?null:this.s3t_.v4_(t)}ygs_(t){this.s3t_.LM_().Lq_(t);this.s3t_.LM_().ht_(t);this.LM_().Lq_(t);return this}initialize(){this.Mls_=new $st(this.fgs_);this.s3t_=this.pgs_(this.ggs_);this.cq_(new zB).GY_(this.s3t_);this.Dgs_(this.s3t_);this.A4t_();this.Pei_(this.s3t_,this.Yei_,this.Uei_)}Dgs_(t){const i=t.LM_(),s=(t,s,e)=>{const A=i.ot_(),n=e.ot_(),h=A.we_()-n.we_();this.pan(this.s3t_,h,0,s,null)},e=(t,s,e)=>{const A=i.ot_(),n=e.ot_(),h=A.Ee_()-n.Ee_();this.pan(this.s3t_,0,h,null,s)};this.Yei_=new bG({modellimits:i.rt_(),visiblelimits:i.ot_(),size:10,rounded:!0}).Wxt_(!0).on(uG.Kxt_,s);this.Uei_=new NG({modellimits:i.rt_(),visiblelimits:i.ot_(),size:10,rounded:!0}).Wxt_(!0).on(uG.Kxt_,e);t.K4_(this.Yei_,ha.nG_);t.K4_(this.Uei_,ha.AG_)}A4t_(){Mi.document.addEventListener("keydown",this.dgs_);Mi.document.addEventListener("keydown",this.wgs_);const t=new TQ;this.s3t_.L4_().GY_(t);this.Mgs_=new Get(this.s3t_.LM_(),t);this.Mgs_.Xas_().on((t=>{this.Xas_().Gos_(t)}));this.vgs_=[this.oUt_=this.bgs_()];this.Mgs_.Kv_(!0);this.h4t_([this.Yei_.K3_(),this.Uei_.K3_(),this.Mgs_,this.Cgs_=this.Ngs_(t),new lG(this.s3t_,"selectionTools").add(this.vgs_)]);return this}dispose(){if(!this.Df_()){Mi.document.removeEventListener("keydown",this.dgs_);Mi.document.removeEventListener("keydown",this.wgs_);super.dispose()}}bgs_(){return(new sG).Kv_(!0).on(jS.VFt_,((t,i,s)=>{const e=s.oc_();this.s3t_.P4_(e.x,e.y);this.Pei_(this.s3t_,this.Yei_,this.Uei_)}))}Ngs_(t){return new MF(t,Wk.tVt_).rWt_(!1).$qt_(fk.Xqt_).VOt_(fF.Kz_)._Ot_((function(t){return t.filter((function(t){return ys(t,Zst)||t instanceof Pj||ys(t,_st)}))})).HC_("RubberBandSelection").Kv_(!1).on(wF.mOt_,((t,i,s)=>{const e=s.getSelection().filter(Ih);if(!e)return;const A=[];for(let t=0;t<e.length;t++)e[t].getParent()&&e[t].getParent().XC_()==="ShapesContainer"&&A.push(e[t]);this.Mgs_.Kv_(!0);this.Mgs_.$as_(Xst.Uos_([A]))})).on(xS.Pkt_,((t,i)=>{this.Mgs_.Kv_(!0);if(i.isEnabled()===!1){this.Mgs_.Kv_(!0);this.Qgs_(Ret.qK_)}}))}Qgs_(t){this.vgs_.forEach((function(t){t.Kv_(!1)}));let i=Ret.qK_;if(t===Ret.rgs_){if(this.H$t_!==t){i=t;this.Cgs_.Kv_(!0);this.Mgs_.Kv_(!1)}}else{this.oUt_.Kv_(!0);this.Cgs_.Kv_(!1)}this.H$t_=i;return this}Sgs_(){return this.H$t_}qm_(){const t=this.s3t_.LM_().ut_();return{x:t?t.BI_():1,y:t?t.sI_():1}}setScale(t,i){t||(t=1);i||(i=t);const s=this.qm_()?this.qm_():{x:1,y:1};this.s3t_.O4_(t/s["x"],i/s["y"]);this.Pei_(this.s3t_,this.Yei_,this.Uei_);this.Ggs_();return this}BAi_(){this.O4_(2)}wAi_(){this.O4_(.5)}O4_(t){t?this.s3t_.O4_(t,t):this.s3t_.J4_(new Gn);this.Ggs_();this.Pei_(this.s3t_,this.Yei_,this.Uei_)}Ggs_(){this.Mgs_._as_();this.Mgs_.NFt_()}LM_(){return this.lNt_}Rgs_(){return this.lNt_.getBounds().clone()}gls_(t,i,s,e){this.Mls_.n5t_(this.lNt_,s,e);const A=this.Mls_.gls_(t,i),n=[];let h,r,o;if(A&&A.length>0){let s=[],e=A[A.length-1];s.push(e);for(h=A.length-2;h>=0;h--)if(e.Row!==A[h].Row&&e.Col!==A[h].Col){s.push(A[h+1]);e=A[h+1]}s[0].Row===A[0].Row&&s[0].Col===A[0].Col||s.push(A[0]);if(s.length>3)for(h=0;h<s.length;h++){const e=s[h],A=h<s.length-1?s[h+1]:e;let l=new lA(e.Col*this.fgs_,e.Row*this.fgs_);if(h===0){r=e.Col===A.Col?t.getX()-l.getX():0;o=e.Row===A.Row?t.getY()-l.getY():0;l=new lA(A.Col*this.fgs_+r,A.Row*this.fgs_+o);n.push(t,l);h++}else if(h===s.length-2){r=e.Col===A.Col?i.getX()-A.Col*this.fgs_:0;o=e.Row===A.Row?i.getY()-A.Row*this.fgs_:0;l=new lA(e.Col*this.fgs_+r,e.Row*this.fgs_+o);n.push(l,i);h++}else n.push(l)}else if(s.length===3){n.push(t);const e=new lA(s[1].Col*this.fgs_,s[1].Row*this.fgs_);r=s[0].Col===s[1].Col?Math.abs(t.getX()-e.getX()):0;o=s[2].Row===s[1].Row?Math.abs(i.getY()-e.getY()):0;if(!r&&!o){r=s[1].Col===s[2].Col?Math.abs(i.getX()-e.getX()):0;o=s[0].Row===s[1].Row?Math.abs(t.getY()-e.getY()):0}e.translate(r,o);n.push(e);n.push(i)}else s.length<2&&(s=[t,i]);if(s.length===2){n.push(t);Math.abs(t.getX()-i.getX())>Math.abs(t.getY()-i.getY())?n.push(new lA((t.getX()+i.getX())/2,t.getY()),new lA((t.getX()+i.getX())/2,i.getY())):n.push(new lA(t.getX(),(i.getY()+t.getY())/2),new lA(i.getX(),(i.getY()+t.getY())/2));n.push(i)}}return n}getSelection(){const t=[];if(this.Mgs_)return this.Mgs_.Oas_();this.zas_=t;return t}Zas_(){return!!this.Mgs_&&this.Mgs_.Zas_()}OLi_(){this.Mgs_&&this.Mgs_.OLi_();return this}$as_(t){this.Mgs_&&this.Mgs_.$as_(t);return this}kgs_(t,i){i===void 0&&(i="group of objects");if(t&&t.length){this.OLi_();const s=new Pj;s.GY_(t);s.HC_(i);s.JC_(nh.u_());this.LM_().GY_(s);this.$as_([s])}return this}Fgs_(t){if(t&&t.length){this.OLi_();for(let i=0;i<t.length;i++){const s=t[i];if(s instanceof Pj){while(s.qY_()>0){const t=s.HY_(0);if(t instanceof iu){t.at_(Gn.multiply(s.ut_()?s.ut_():new Gn,t.ut_()?t.ut_():new Gn));this.LM_().GY_(t)}}this.LM_().removeChild(s)}}}return this}b4t_(t){if(!t)return this;const i=Array.isArray(t)?t:[t];this.LM_().removeChild(i);for(let t=0;t<i.length;t++)this.LM_().xY_(this.LM_().qY_(),i[t]);return this}xgs_(t){if(!t)return this;const i=Array.isArray(t)?t:[t];this.LM_().removeChild(i);for(let t=0;t<i.length;t++)this.LM_().xY_(0,i[t]);return this}Lgs_(){this.OLi_();this.Ggs_();this.LM_().KY_();return this}Ugs_(){this.setScale(1,1);this.Lgs_();return this}Ygs_(){return Fet.Ai_().o5_("model",this.LM_())}Tgs_(t){if(!t){ki("FlowCharts.DiagramWidget#loadDiagram: data is not present");return}const i=Fet.Ai_().l5_(t);if(!i){ki("FlowCharts.DiagramWidget#loadDiagram: could not deserialize data");return}const s=i.Uw_(null,"model");this.Lgs_();const e=[];if(s instanceof sI)while(s.qY_()>0){const t=s.HY_(0);this.Kgs_(t);e.push(t)}const A=[this.LM_()];this.Hgs_(this.qgs_(e),this.qgs_(A));this.LM_().vn_();this.LM_().td_()}qgs_(t){const i=[];let s;for(let e=0;e<t.length;e++){s=t[e];i.push(s);if(s instanceof sI||s instanceof Pj){const t=[];for(let i=0;i<s.qY_();i++)t.push(s.HY_(i));i.push.apply(i,this.qgs_(t))}}return i}Hgs_(t,i){const s=function(s,e){if(s){let A=s.Id_("visuals");if(!A&&s.Id_("relatedVisualId")){A=t.find((function(t){return t instanceof ch&&t.XC_()===s.Id_("relatedVisualId")}));!A&&i&&(A=i.find((function(t){return t instanceof ch&&t.XC_()===s.Id_("relatedVisualId")})))}if(A){e.Als_(A,s.Mus_(),s.yus_());s.setProperty("relatedVisualId",null);s.setProperty("visuals",A)}else{e.nls_(s.Mus_());ki("FlowCharts.DiagramWidget: could not restore link to "+s.Id_("relatedVisualId"))}}};for(let i=0;i<t.length;i++){const e=t[i];if(e instanceof Bet||e instanceof bet){e.setProperty("userTouched",!0);if(e.sls_()!=null){let t;for(t in e.sls_()){const i=undefined;s(e.sls_()[t],e)}e.els_(!0)}}}}Jgs_(){return this.Pgs_(this.getSelection())}Vgs_(){const t=this.Jgs_();this.Bgs_();return t}Bgs_(){const t=undefined;this.Mgs_.Oas_().forEach((t=>this.Ogs_(t)));return this}Kgs_(t,i,s,e){if(!ys(t,Zst)){ki("FlowCharts.DiagramWidget#addVisual: geotoolkit/flowcharts/shapes/IComponent is expected");return null}s===void 0&&(s=!0);if(i){const A=i;if(t instanceof iu&&ie(t)){const i=t.ut_()?t.ut_().clone():new Gn;i.setTranslate(A.getX(),A.getY());const e=t.getBounds();s?i.translate(-e.ye_(),-e.De_()):i.translate(-e.we_(),-e.Ee_());t.at_(i)}this.Kgs_(t);if(t instanceof bet)if(e){const s=this.LM_().if_().transformPoint(i);this.Mgs_.Was_([t],s,null);this.Mgs_.Kv_(!0)}else t.setProperty("created",!0)}else this.LM_().GY_(t);this.VT_(t);return t}VT_(t,i){i=i===!0;if(t instanceof sI)for(let i=0;i<t.qY_();i++)this.VT_(t.HY_(i));t instanceof Bet&&t.qus_(i?null:this)}Ogs_(t){let i;if(t instanceof set){const s=t.ovi_();for(i=0;i<s.length;i++)this.Ogs_(s[i])}else if(t){for(i=0;i<this.LM_().qY_();i++){const t=this.LM_().HY_(i);if(xet(t)){t.nls_(Iet.pbi_);t.nls_(Iet.End)}}this.VT_(t,!0);this.LM_().removeChild(t);this.Mgs_._as_()}return this}Wgs_(t){for(let i=0;i<t.length;i++)this.Ogs_(t[i]);return this}Pgs_(t){return Fet.Ai_().o5_("visuals",t)}zgs_(t){const i=this.Pgs_(t);this.Wgs_(t);return i}Xgs_(t,i){try{const s=Fet.Ai_().l5_(t).getValue("visuals");let e=null,A;for(A=0;A<s.length;A++)if(s[A]){const t=s[A].ut_(),i=t?t.rn_(s[A].getBounds()):s[A].getBounds().clone();e?e.union(i):e=i}for(A=0;A<s.length;A++)if(s[A]){const t=s[A],n=e.Me_(),h=i.getX()-n.getX(),r=i.getY()-n.getY(),o=t.ut_()?t.ut_():new Gn;t.at_(Gn.multiply(Gn.kI_(h,r),o));xet(t)&&t.pc_();t.vn_();this.Kgs_(t)}const n=this.qgs_(s);this.Hgs_(n,[]);for(A=0;A<n.length;A++)n[A]&&n[A].JC_(nh.u_());this.Mgs_.$as_(s)}catch(t){}}Xas_(){this.Yas_||(this.Yas_=new Wst);return this.Yas_}};i=t([_s("geotoolkit.flowcharts.shapes.DiagramWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbm5vdGF0aW9uIjoidjRfIiwic2V0RGlhZ3JhbUxpbWl0cyI6Inlnc18iLCJpbml0aWFsaXplVG9vbHMiOiJBNHRfIiwidG9nZ2xlVG9vbCI6IlFnc18iLCJnZXRBY3RpdmVUb29sIjoiU2dzXyIsImdldFNjYWxlIjoicW1fIiwiem9vbUluIjoiQkFpXyIsInpvb21PdXQiOiJ3QWlfIiwic2NhbGVNb2RlbCI6Ik80XyIsImdldE1vZGVsIjoiTE1fIiwiZ2V0RGlhZ3JhbUxpbWl0cyI6IlJnc18iLCJzdG9wUG9seWxpbmVFZGl0IjoiWmFzXyIsImNsZWFyU2VsZWN0aW9uIjoiT0xpXyIsInNlbGVjdFZpc3VhbHMiOiIkYXNfIiwiZ3JvdXBWaXN1YWxzIjoia2dzXyIsInVuZ3JvdXBWaXN1YWxzIjoiRmdzXyIsImJyaW5nVG9Gcm9udCI6ImI0dF8iLCJzZW5kVG9CYWNrIjoieGdzXyIsInJlc2V0RGlhZ3JhbSI6IlVnc18iLCJzYXZlRGlhZ3JhbSI6Illnc18iLCJsb2FkRGlhZ3JhbSI6IlRnc18iLCJmbGF0dGVuVmlzdWFscyI6InFnc18iLCJjb3B5U2VsZWN0aW9uIjoiSmdzXyIsImN1dFNlbGVjdGlvbiI6IlZnc18iLCJkZWxldGVTZWxlY3Rpb24iOiJCZ3NfIiwiYWRkVmlzdWFsIjoiS2dzXyIsImRlbGV0ZVZpc3VhbCI6Ik9nc18iLCJkZWxldGVWaXN1YWxzIjoiV2dzXyIsImNvcHlWaXN1YWxzIjoiUGdzXyIsImN1dFZpc3VhbHMiOiJ6Z3NfIiwicGFzdGUiOiJYZ3NfIiwiZ2V0T25TZWxlY3Rpb25DaGFuZ2VFdmVudCI6Ilhhc18ifX19");var Uet=Ci(function(){let i=class t{constructor(t){this.jgs_=Array.isArray(t["visuals"])?t["visuals"]:t["visuals"]!=null?[t["visuals"]]:[];this.Zgs_=t["widget"];this.center=t["center"]||!0;this.location=t["location"]||new lA({x:0,y:0});this._gs_=!1}Eu_(){if(ys(this.Zgs_,Let)&&this.jgs_&&this.Zgs_){this.jgs_.forEach((t=>{t instanceof ch&&this.Zgs_.Kgs_(t,this._gs_?null:this.location,this.center)}));this._gs_=!0;return!0}return!1}sPt_(){if(this._gs_&&ys(this.Zgs_,Let)){this.jgs_.forEach((t=>{t instanceof ch&&this.Zgs_.Ogs_(t)}));return!0}return!1}};i=t([Zs(Ost),_s("geotoolkit.flowcharts.commands.AddVisual")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIiwidW5kbyI6InNQdF8ifX0sImdldENsYXNzTmFtZSI6IkRfIn0g");var Yet=Ci(function(){let i=class t{constructor(t){this.$gs_=new Map;if(t&&t["visual"]!==void 0){ki("geotoolkit.flowcharts.commands.TransformVisuals: parameter options.visual deprecated since 4.0. "+"Use parameter options.visuals instead");t["visuals"]=Array.isArray(t["visual"])?t["visual"]:[t["visual"]]}this.jgs_=t["visuals"]||[];this.LJ_=t["transformation"]||new Gn;this._gs_=!1;let i;if(this.jgs_)for(i=0;i<this.jgs_.length;i++){const t=this.jgs_[i];oe(t)&&t.ut_()&&this.$gs_.set(t,t.ut_())}}_Hi_(){return this.jgs_}tcs_(t){this.jgs_=t}ics_(t,i){if(t&&i){const s=t.ut_()?t.ut_():new Gn;t.td_();t.at_(s.rI_().vI_(i.rI_()).rI_());t.td_();return!0}return!1}Eu_(){if(!this._gs_&&this.jgs_.length&&this.LJ_){let t;for(t=0;t<this.jgs_.length;t++)this.ics_(this.jgs_[t],this.LJ_);this._gs_=!0;return!0}return!1}sPt_(){if(this._gs_){let t;for(t=0;t<this.jgs_.length;t++){const i=this.jgs_[t];if(oe(i)){const t=this.$gs_.has(i)?this.$gs_.get(i):null;i.at_(t)}}this._gs_=!1;return!0}return!1}};i=t([Zs(Ost),_s("geotoolkit.flowcharts.commands.TransformVisuals")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRWaXN1YWxzIjoiX0hpXyIsInNldFZpc3VhbHMiOiJ0Y3NfIiwiZXhlY3V0ZSI6IkV1XyIsInVuZG8iOiJzUHRfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var Tet=Ci(function(){let i=class t extends Yet{constructor(t){super(t);this.angle=t["angle"]||0;if(t["anchor"]!==void 0){ki("geotoolkit.flowcharts.commands.RotateVisuals: parameter options.anchor deprecated since 4.0. "+"Use parameter options.anchortype instead");t["anchortype"]=t["anchor"]}this.eE_=t["anchortype"]||dA.ne_}Eu_(){if(!this._gs_&&this._Hi_().length){let t,i,s,e;for(t=0;t<this._Hi_().length;t++){const A=this._Hi_()[t];if(ie(A)&&oe(A)){e=A.getBounds().clone();A.ut_()&&(e=A.ut_().rn_(e));s=e.Ye_(this.eE_);i=Gn.FI_(this.angle,s.x,s.y);this.ics_(A,i)}}this._gs_=!0;return!0}return!1}};i=t([_s("geotoolkit.flowcharts.commands.RotateVisuals")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIn19fSAg");var Ket=Ci(function(){let i=class t extends Yet{constructor(t){super(t);this.q8_=t["scalex"]||1;this.J8_=t["scaley"]||1;if(t["anchor"]!==void 0){ki("geotoolkit.flowcharts.commands.ScaleVisuals: parameter options.anchor deprecated since 4.0. "+"Use parameter options.anchortype instead");t["anchortype"]=t["anchor"]}this.eE_=t["anchortype"]||dA.ie_}Eu_(){if(!this._gs_&&this._Hi_().length){let t,i,s;for(t=0;t<this._Hi_().length;t++){const e=this._Hi_()[t];if(ie(e)&&oe(e)){i=e.getBounds();e.ut_()&&(i=e.ut_().rn_(i));s=i.clone();s.Le_(this.q8_>1?i.width*this.q8_/4:-(i.width-i.width*this.q8_)/2,this.J8_>1?i.height*this.J8_/4:-(i.height-i.height*this.J8_)/2);this.ics_(e,Gn.xI_(i,s))}}this._gs_=!0;return!0}return!1}};i=t([_s("geotoolkit.flowcharts.commands.ScaleVisuals")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIn19fSAg");var Het=Ci(function(){let i=class t extends Yet{constructor(t){super(t);this.delta=t["delta"]||new lA({x:0,y:0})}Eu_(){if(!this._gs_&&this._Hi_().length){let t;for(t=0;t<this._Hi_().length;t++)this.ics_(this._Hi_()[t],Gn.kI_(this.delta.x,this.delta.y));this._gs_=!0;return!0}return!1}};i=t([_s("geotoolkit.flowcharts.commands.TranslateVisuals")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleGVjdXRlIjoiRXVfIn19fSAg");var qet=function(){let i=class t extends mw{constructor(t){super();t===void 0&&(t=!0);this.scs_=!0;this.scs_=t}ecs_(t){return{prototypeName:t.getValue("prototypeName"),geometry:this.scs_?t.Uw_(null,"geometry"):null,prototypeId:t.getValue("prototypeId"),category:t.getValue("category"),defaultSize:t.Uw_(null,"defaultSize"),searchKeywords:t.Uw_(null,"searchKeywords"),linkPoints:t.Uw_(null,"linkPoints"),outline:t.Uw_(null,"outline"),text:t.Uw_(null,"text"),id:t.Uw_(null,"id")}}Acs_(t,i){t.HC_(i.getValue("name"));t.KC_(i.getValue("selectable"));t.PC_(i.Uw_(null,"tag"));t.at_(i.Uw_(null,"localtransform"));t.rB_(i.Uw_(null,"linestyle"));t.JC_(i.getValue("id"))}ncs_(t){return new iet(t)}load(t,i){const s=this.ecs_(t),e=this.ncs_(s);this.Acs_(e,t);return e}save(t,i){if(t instanceof iet){i.Oi_("prototypeName",t.zos_());this.scs_&&i.zE_("geometry",t.nt_());i.zE_("text",t.u3i_());i.Oi_("prototypeId",t.Wos_());i.Oi_("category",t.Xos_());i.zE_("defaultSize",t.pV_());i.zE_("searchKeywords",t.jos_());i.zE_("linkPoints",t._os_());i.zE_("outline",t.DF_());i.Oi_("id",t.XC_());i.Oi_("name",t.dn_());i.Oi_("selectable",t.OC_());i.zE_("tag",t.zC_());i.zE_("localtransform",t.ut_());i.zE_("linestyle",t.gt_());i.Oi_("ClassName",t.D_());i.commit()}else ki("FlowCharts.DiagramVisualSerializer#save: geotoolkit/flowcharts/shapes/DiagramVisual is expected")}};i=t([_s("geotoolkit.flowcharts.persistence.visuals.DiagramVisualSerializer")],i);return i}();Fet.Ai_().qw_().OE_(iet.D_(),new qet);var Jet=function(){let i=class t extends mw{constructor(t){super();t===void 0&&(t=!0);this.scs_=!0;this.scs_=t}ecs_(t){return t==null?{}:{prototypeName:t.getValue("prototypeName"),geometry:this.scs_?t.Uw_(null,"geometry"):null,prototypeId:t.getValue("prototypeId"),category:t.getValue("category"),defaultSize:t.Uw_(null,"defaultSize"),searchKeywords:t.Uw_(null,"searchKeywords"),linkPoints:t.Uw_(null,"linkPoints"),outline:t.Uw_(null,"outline")}}Acs_(t,i){t.HC_(i.getValue("name"));t.KC_(i.getValue("selectable"));t.PC_(i.Uw_(null,"tag"));t.at_(i.Uw_(null,"localtransform"));t.rB_(i.Uw_(null,"linestyle"));t.JC_(i.getValue("id"))}ncs_(t){return new iet(t)}load(t,i){const s=this.ecs_(t),e=this.ncs_(s);this.Acs_(e,t);return e}save(t,i){i.Oi_("prototypeName",t.zos_());if(t instanceof Bet){const s=Fet.Ai_().jE_("default");Fet.ags_(s)&&s.save(t,i)}else i.lp_(t.nt_(),null);i.zE_("localtransform",t.ut_());t instanceof Bet&&i.Oi_("ClassName","geotoolkit.scene.shapes.Polyline");i.commit()}};i=t([_s("geotoolkit.flowcharts.persistence.visuals.ExportDiagramVisualSerializer")],i);return i}();var Pet=function(){let i=class t extends mw{load(t,i){const s=Fet.Ai_().jE_("default");let e=null;if(!Fet.ags_(s))return null;e=s.load(t);const A=t.Uw_(null,"connections");if(A&&A.length&&e&&Array.isArray(e.connections))for(let t=0;t<A.length;t++){const i=A[t];e.connections[i.Qus_]=i}if(e instanceof Bet){e.Yus_(t.Uw_(null,"searchKeywords"));e.Vus_(t.getValue("linkingMode"));e.zus_(t.getValue("tubingWidth"));e.Hus_(t.getValue("linkType"))}return e}save(t,i){if(!(t instanceof Bet)){ki("FlowCharts.LinkVisualSerializer#save: geotoolkit/flowcharts/shapes/connectors/LinkVisual is expected");return}const s=Fet.Ai_().jE_("default");Fet.ags_(s)&&s.save(t,i);const e=[];let A;for(A in t.sls_()){const i=t.sls_()[A];if(i instanceof Cet){const t=new Cet(null,i.yus_(),i.Mus_(),null);t.setProperty("relatedVisualId",i.bus_());t.Dus_(new lA(i.yus_().getX(),i.yus_().getY()));e.push(t)}}i.zE_("connections",e);i.zE_("searchKeywords",t.jos_());i.Oi_("linkType",t.Kus_());i.Oi_("linkingMode",t.Ous_());i.Oi_("tubingWidth",t.Wus_());i.commit()}};i=t([_s("geotoolkit.flowcharts.persistence.visuals.LinkVisualSerializer")],i);return i}();Fet.Ai_().qw_().OE_(Bet.D_(),new Pet);var Vet=function(){let i=class t extends mw{load(t,i){const s=Fet.Ai_().jE_("default");let e=null;if(!Fet.ags_(s))return null;e=s.load(t);const A=t.Uw_(null,"connections");if(A&&A.length&&e&&Array.isArray(e.connections))for(let t=0;t<A.length;t++){const i=A[t];e.connections[i.Qus_]=i}if(e instanceof bet){e.Yus_(t.Uw_(null,"searchKeywords"));e.zus_(t.getValue("tubingWidth"));e.setProperty("created",t.getValue("created"))}return e}save(t,i){if(!(t instanceof bet)){ki("FlowCharts.PolylineVisualSerializer#save: geotoolkit/flowcharts/shapes/connectors/PolylineVisual is expected");return}const s=Fet.Ai_().jE_("default");Fet.ags_(s)&&s.save(t,i);const e=[];let A;for(A in t.sls_()){const i=t.sls_()[A];if(i instanceof Cet){const t=new Cet(null,i.yus_(),i.Mus_(),null);t.setProperty("relatedVisualId",i.bus_());t.Dus_(new lA(i.yus_().getX(),i.yus_().getY()));e.push(t)}}i.zE_("connections",e);i.zE_("searchKeywords",t.jos_());i.Oi_("tubingWidth",t.Wus_());i.Oi_("created",t.Id_("created"));i.commit()}};i=t([_s("geotoolkit.flowcharts.persistence.visuals.PolylineVisualSerializer")],i);return i}();Fet.Ai_().qw_().OE_(bet.D_(),new Vet);var Oet=function(){let i=class t extends qet{constructor(t){t===void 0&&(t=!1);super(t)}ncs_(t){const i=new het(t);i.tls_(t["url"]);return i}ecs_(t){const i=super.ecs_(t);i["url"]=t.getValue("url");i["isLinkPointsRelative"]=t.getValue("relativeLinkPoints");this.scs_||(i["geometry"]=new sI);i["justdeserialized"]=!0;return i}save(t,i){super.save(t,i);if(t instanceof het){i.Oi_("relativeLinkPoints",t.rus_());t.rus_()&&i.zE_("linkPoints",t.nus_());i.Oi_("url",t._V_());this.scs_||i.Oi_("loaded",!1);i.commit()}else ki("FlowCharts.SvgVisualPluginSerializer#save: geotoolkit/flowcharts/shapes/SvgDiagramVisual is expected")}};i=t([_s("geotoolkit.flowcharts.persistence.visuals.SvgVisualPluginSerializer")],i);return i}();Fet.Ai_().qw_().OE_(het.D_(),new Oet);var Wet=Ci(function(){var t=class{static hcs_(){return[new Bet({prototypeid:"class-link",prototypename:"Link",category:t.rcs_,searchkeywords:["link","arrow"],defaulticonsize:new xA(100,100),geometry:new ap({x:[0,100],y:[1,1],visible:!0}),linkpoints:[new lA(0,1),new lA(1,1)],linktype:get.Line,url:"assets/svg/standard/line.svg"}),new Bet({prototypeid:"class-steplink",prototypename:"Steplink",category:t.rcs_,searchkeywords:["link","step","arrow"],defaulticonsize:new xA(100,100),geometry:new ap({x:[0,100],y:[1,1],visible:!0}),linkpoints:[new lA(0,1),new lA(1,1)],linktype:get.CDt_,url:"assets/svg/standard/stepline.svg"}),new bet({prototypeid:"class-polyline",prototypename:"Polyline",category:t.rcs_,searchkeywords:["link","polyline"],defaulticonsize:new xA(100,100),geometry:new ap({x:[50],y:[1],visible:!0}),url:"assets/svg/standard/polyline.svg"}),new iet({prototypeid:"class-ellipse",prototypename:"Ellipse",category:t.rcs_,searchkeywords:["ellipse"],defaultsize:new xA(50,50),geometry:new nE({centerx:.5,centery:.5,radiusx:.5,radiusy:.5}),linkpoints:t.ocs_}),new iet({prototypeid:"class-rectangle",prototypename:"Rectangle",category:t.rcs_,searchkeywords:["rectangle"],defaultsize:new xA(50,50),geometry:new dp(0,0,1,1),linkpoints:t.ocs_}),new bet({prototypeid:"class-polygon",prototypename:"Polylgon",category:t.rcs_,searchkeywords:["polygon"],defaulticonsize:new xA(100,100),geometry:new oE({x:[50],y:[1],visible:!0}),url:"assets/svg/standard/polygon.svg"}),new iet({prototypeid:"class-text",prototypename:"Text",category:t.rcs_,searchkeywords:["text"],defaultsize:new xA(60,25),geometry:new dp(0,0,60,25),linkpoints:t.ocs_,url:"assets/svg/standard/text.svg"}).a_({text:"Text"})]}static get rcs_(){return this.lcs_}};t.lcs_="Standard";t.ucs_=new mA(0,0,1,1);t.ocs_=[t.ucs_.Se_(),t.ucs_.Re_(),t.ucs_.Ge_(),t.ucs_.ke_(),t.ucs_.getCenter()];return t}(),2,"eyJnZXRDb21wb25lbnRzIjoiaGNzXyIsIkNhdGVnb3J5IjoicmNzXyJ9");var zet=Ci(function(){var t=class{static hcs_(){let i;const s=undefined;return[new iet({prototypeid:"class-decision",prototypename:"Decision",category:t.rcs_,searchkeywords:["decision"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(.5,0).lineTo(1,.5).lineTo(.5,1).lineTo(0,.5).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1)]}),new iet({prototypeid:"class-input-output",prototypename:"Input/Output",category:t.rcs_,searchkeywords:["input","output"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(.1,0).lineTo(1,0).lineTo(.9,1).lineTo(0,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.05,.5),new lA(.5,0),new lA(.95,.5),new lA(.5,1)]}),new iet({prototypeid:"class-stored-data",prototypename:"Stored Data",category:t.rcs_,searchkeywords:["data","store"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,0).lineTo(50,0).bezierCurveTo(35,0,35,50,50,50).lineTo(0,50).bezierCurveTo(0-15,50,0-15,0,0,0).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(-11.2,25),new lA(18.2,0),new lA(38.8,25),new lA(18.2,50)]}),new iet({prototypeid:"class-internal-storage",prototypename:"Internal Storage",category:t.rcs_,searchkeywords:["storage","store","internal"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,0).lineTo(100,0).lineTo(100,50).lineTo(0,50).close().moveTo(10,0).lineTo(10,50).moveTo(0,10).lineTo(100,10),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,25),new lA(50,0),new lA(100,25),new lA(50,50)]}),new iet({prototypeid:"class-process",prototypename:"Process",category:t.rcs_,searchkeywords:["process"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,0).lineTo(1,0).lineTo(1,1).lineTo(0,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1),new lA(.5,.5)]}),new iet({prototypeid:"class-subprocess",prototypename:"Sub Process",category:t.rcs_,searchkeywords:["subprocess"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,0).lineTo(1,0).lineTo(1,1).lineTo(0,1).close().moveTo(.1,0).lineTo(.1,1).moveTo(.9,0).lineTo(.9,1),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1),new lA(.5,.5)]}),new iet({prototypeid:"class-delay",prototypename:"Delay",category:t.rcs_,searchkeywords:["delay"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,0).lineTo(50,0).bezierCurveTo(75,0,75,50,0+50,50).lineTo(0,50).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,25),new lA(40,0),new lA(70,25),new lA(40,50)]}),new iet({prototypeid:"class-reference-arrow",prototypename:"Reference Arrow",category:t.rcs_,searchkeywords:["arrow","reference"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(0,10).lineTo(75,10).lineTo(75,0).lineTo(100,25).lineTo(75,50).lineTo(75,40).lineTo(0,40).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,25),new lA(100,25)]}),new iet({prototypeid:"class-reference-point",prototypename:"Reference Point",category:t.rcs_,searchkeywords:["point","reference"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(5,10).lineTo(75,10).lineTo(75,0).lineTo(100,25).lineTo(75,50).lineTo(75,40).lineTo(5,40).bezierCurveTo(-5,30,-5,20,5,10).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(-2.7,25),new lA(100,25)]}),new iet({prototypeid:"class-merge",prototypename:"Merge",category:t.rcs_,searchkeywords:["merge","symbol"],defaultsize:new xA(25,25),outline:i=(new TA).moveTo(0,0).lineTo(1,0).lineTo(.5,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,0),new lA(.5,0),new lA(1,0),new lA(.5,1)]}),new iet({prototypeid:"class-extract",prototypename:"Extract",category:t.rcs_,searchkeywords:["extract","symbol"],defaultsize:new xA(25,25),outline:i=(new TA).moveTo(.5,0).lineTo(1,1).lineTo(0,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.5,0),new lA(1,1),new lA(.5,1),new lA(0,1)]}),new iet({prototypeid:"class-communication-line",prototypename:"Communication",category:t.rcs_,searchkeywords:["communication","line"],defaultsize:new xA(25,50),outline:i=(new TA).moveTo(1,0).lineTo(0,.55).lineTo(.5,.55).lineTo(0,1).lineTo(1,.45).lineTo(.5,.45).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(1,0),new lA(0,.55),new lA(1,.45),new lA(0,1)]})]}static get rcs_(){return this.lcs_}};t.lcs_="Flowchart";return t}(),2,"eyJnZXRDb21wb25lbnRzIjoiaGNzXyIsIkNhdGVnb3J5IjoicmNzXyJ9");var Xet=Ci(function(){var t=class{static hcs_(){let i;const s=undefined;return[new iet({prototypeid:"class-hr-arki-arrow",prototypename:"Arki Arrow",category:t.rcs_,searchkeywords:["arki arrow","arrow","hr"],defaultsize:new xA(40,50),outline:i=(new TA).moveTo(0,0).lineTo(1,.5).lineTo(0,1).lineTo(.7,.5).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,0),new lA(1,.5),new lA(0,1)]}),new iet({prototypeid:"class-hr-chevron-arrow",prototypename:"Chevron Arrow",category:t.rcs_,searchkeywords:["chevron arrow","arrow","hr"],defaultsize:new xA(40,50),outline:i=(new TA).moveTo(0,0).lineTo(.3,0).lineTo(1,.5).lineTo(.3,1).lineTo(0,1).lineTo(.7,.5).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.15,0),new lA(1,.5),new lA(.15,1)]}),new iet({prototypeid:"class-hr-triangle-arrow",prototypename:"Up Arrow",category:t.rcs_,searchkeywords:["triangle arrow","arrow","hr"],defaultsize:new xA(40,50),outline:i=(new TA).moveTo(0,0).lineTo(1,.5).lineTo(0,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,0),new lA(1,.5),new lA(0,1)]}),new iet({prototypeid:"class-hr-small-arrow",prototypename:"Small Arrow",category:t.rcs_,searchkeywords:["small arrow","arrow","hr"],defaultsize:new xA(50,40),outline:i=(new TA).moveTo(0,.4).lineTo(.72,.4).lineTo(.4,0).lineTo(.6,0).lineTo(1,.5).lineTo(.6,1).lineTo(.4,1).lineTo(.72,.6).lineTo(0,.6).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.5),new lA(1,.5),new lA(.5,0),new lA(.5,1)]}),new iet({prototypeid:"class-hr-fat-arrow",prototypename:"Fat Arrow",category:t.rcs_,searchkeywords:["fat arrow","arrow","hr"],defaultsize:new xA(100,40),outline:i=(new TA).moveTo(0,0).lineTo(.75,.2).lineTo(.75,.08).lineTo(1,.25).lineTo(.75,.42).lineTo(.75,.3).lineTo(0,.5).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.25),new lA(1,.25)]}),new iet({prototypeid:"class-hr-double-headed-arrow",prototypename:"Doubleheaded Arrow",category:t.rcs_,searchkeywords:["crossed arrow","arrow","hr"],defaultsize:new xA(100,50),outline:i=(new TA).moveTo(.2,0).lineTo(.2,.15).lineTo(.75,.15).lineTo(.75,0).lineTo(1,.25).lineTo(.75,.5).lineTo(.75,.35).lineTo(.2,.35).lineTo(.2,.5).lineTo(0,.25).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.25),new lA(1,.25)]}),new iet({prototypeid:"class-hr-crosss",prototypename:"Cross",category:t.rcs_,searchkeywords:["cross","hr"],defaultsize:new xA(100,100),outline:i=(new TA).moveTo(.4,0).lineTo(.6,0).lineTo(.6,.4).lineTo(1,.4).lineTo(1,.6).lineTo(.6,.6).lineTo(.6,1).lineTo(.4,1).lineTo(.4,.6).lineTo(0,.6).lineTo(0,.4).lineTo(.4,.4).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.5,.5),new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1)]}),new iet({prototypeid:"class-hr-crosssed-arrow",prototypename:"Crossed Arrow",category:t.rcs_,searchkeywords:["crossed arrow","arrow","hr"],defaultsize:new xA(100,100),outline:i=(new TA).moveTo(.3,.15).lineTo(.5,0).lineTo(.7,.15).lineTo(.6,.15).lineTo(.6,.4).lineTo(.85,.4).lineTo(.85,.3).lineTo(1,.5).lineTo(.85,.7).lineTo(.85,.6).lineTo(.6,.6).lineTo(.6,.85).lineTo(.7,.85).lineTo(.5,1).lineTo(.3,.85).lineTo(.4,.85).lineTo(.4,.6).lineTo(.15,.6).lineTo(.15,.7).lineTo(0,.5).lineTo(.15,.3).lineTo(.15,.4).lineTo(.4,.4).lineTo(.4,.15).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.5,.5),new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1)]}),new iet({prototypeid:"class-hr-split-arrow",prototypename:"Split Arrow",category:t.rcs_,searchkeywords:["cross","hr"],defaultsize:new xA(100,100),outline:i=(new TA).moveTo(0,.42).lineTo(.58,.42).lineTo(.9,0).lineTo(1,0).lineTo(1,.1).lineTo(.7,.5).lineTo(1,.9).lineTo(1,1).lineTo(.9,1).lineTo(.58,.58).lineTo(0,.58).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(.5,.5),new lA(0,.5),new lA(.5,0),new lA(1,.5),new lA(.5,1)]})]}static get rcs_(){return this.lcs_}};t.lcs_="HR Arrows";return t}(),2,"eyJnZXRDb21wb25lbnRzIjoiaGNzXyIsIkNhdGVnb3J5IjoicmNzXyJ9");var jet=Ci(function(){var t=class{static hcs_(){let i;const s=undefined;return[new iet({prototypeid:"industrial-valve",prototypename:"Valve",category:t.rcs_,searchkeywords:["valve","industrial"],defaultsize:new xA(70,50),outline:i=(new TA).moveTo(0,0).lineTo(1,1).lineTo(1,0).lineTo(0,1).close(),geometry:new Yu({geometry:i}),linkpoints:[new lA(0,.5),new lA(.5,.5),new lA(1,.5)]})]}static get rcs_(){return this.lcs_}};t.lcs_="Industrial";t.ucs_=new mA(0,0,1,1);return t}(),2,"eyJnZXRDb21wb25lbnRzIjoiaGNzXyIsIkNhdGVnb3J5IjoicmNzXyJ9");let Zet=null;var _et=Ci(function(){var t=class{constructor(){this.acs_=[];this.Wdt_=new hl("rgba(170, 177, 185, 1)",2);this.Odt_=new wr("rgba(240, 247, 255, 0.7)");this.un_()}static Ai_(){Zet||(Zet=new t);return Zet}un_(){const t=Wet.hcs_().concat(zet.hcs_(),Xet.hcs_(),jet.hcs_());for(let i=0;i<t.length;i++)this.gcs_(t[i])}ccs_(){return this.acs_}Ics_(){return this.Odt_}fcs_(t){this.Odt_=t;return this}Ccs_(){return this.Wdt_}dcs_(t){this.Wdt_=t;return this}gcs_(t){if(!t||!t.Wos_())return;function i(i){return i.Wos_()===t.Wos_()}const s=Xst.findIndex(this.acs_,i);s<0?this.acs_.push(t):this.acs_[s]=t}mus_(t,i,s){function e(i){return i.Wos_()===t}const A=Xst.find(this.acs_,e);if(A&&A.clone){const t=A.clone();t["id"]=nh.u_();t.Zos_&&i&&s&&t.Zos_(new xA(i,s));const e=t.getBounds!=null?t.getBounds():null;if(e!=null){let A=1,n=1;e.Ie_()!==0&&(A=(i||t.pV_().Ie_())/e.Ie_());e.Ts_()!==0&&(n=(s||t.pV_().Ts_())/e.Ts_());t.at_(Gn.TI_(A,n))}return this.Bcs_(t)}return null}Bcs_(t){if(t instanceof ch){const i=t.nt_();i instanceof su&&!ys(t,het)&&(t.Wos_&&t.Wos_()==="class-text"?i.dt_({linestyle:new hl("rgba(0, 0, 0, 0)"),fillstyle:new wr("rgba(0, 0, 0, 0)")}):i.dt_({linestyle:this.Wdt_?this.Wdt_.clone():new hl,fillstyle:this.Odt_?this.Odt_.clone():new wr}))}return t}};return t}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQbHVnaW5zIjoiY2NzXyIsImdldERlZmF1bHRGaWxsU3R5bGUiOiJJY3NfIiwic2V0RGVmYXVsdEZpbGxTdHlsZSI6ImZjc18iLCJnZXREZWZhdWx0TGluZVN0eWxlIjoiQ2NzXyIsInNldERlZmF1bHRMaW5lU3R5bGUiOiJkY3NfIiwicmVnaXN0ZXJQbHVnaW4iOiJnY3NfIiwiZ2V0VmlzdWFsIjoibXVzXyJ9fSwiZ2V0SW5zdGFuY2UiOiJBaV8ifSAg");export {Ost,Wst,zst,Xst,jst,Zst,_st,$st,tet,iet,set,net,het,ret,oet,uet,aet,get,cet,Iet,fet,Cet,det,Bet,wet,Qet,Eet,pet,met,vet,bet,Net,Get,Ret,Fet,Let,Uet,Yet,Tet,Ket,Het,qet,Jet,Pet,Vet,Oet,Wet,zet,Xet,jet,_et};