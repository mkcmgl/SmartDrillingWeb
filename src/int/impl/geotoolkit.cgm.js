/* eslint-disable */
import {__decorate as t} from 'tslib';import {nA,_s,mA,lA,fr,kI,Uo,Qa,Bs,ys,qi,vs,Gn,Ey,Mn,QA,TA,LA,bn,wr,$o,nI,hI,yu,gu,NA,nl,Al,hl,el,mr,Er,Fo,xo,sa,ka,Mi,Ls,gl,HI,ue,If,sI,Ic,KI,IQ,Ci} from '@int/impl/geotoolkit.base.js';const oP=function(t,i,s,e){return t&255|i<<8&65280|s<<16&16711680|e<<24&4278190080},lP=function(t){return oP(t.Is_(),t.Cs_(),t.fs_(),t.ds_())},uP=function(t){return new nA(t&255,(t&65280)>>8,(t&16711680)>>16,(t&4278190080)>>24)};var aP=function(){let i=class t{constructor(t,i){this.width=t;this.height=i;this.Us_=[].fill(0,0,this.width*this.height)}Ie_(){return this.width}Ts_(){return this.height}oai_(t,i){if(t<0||t>=this.width||i<0||i>=this.height)throw new TypeError("wrong x-y coordinates");return uP(this.Us_[t+i*this.width])}lai_(t,i,s){if(t<0||t>=this.width||i<0||i>=this.height)throw new TypeError("wrong x-y coordinates");if(s==null)throw new TypeError("color cannot be null or undefined");this.Us_[t+i*this.width]=typeof s=="number"?s:lP(s);return this}uai_(t){for(let i=0;i<t.length;i+=4)this.Us_[i/4]=oP(t[i],t[i+1],t[i+2],t[i+3]);return this}};i=t([_s("geotoolkit.cgm.Bitmap")],i);return i}();var gP=function(){let i=class t{constructor(){this.ip8=1;this.aai_=2;this.gai_=3;this.cai_=4;this.Iai_=0;this.fai_=1;this.Cai_=2;this.dai_=3;this.Bai_=1;this.wai_=2;this.Qai_=3;this.Eai_=4;this.pai_=5;this.mai_=1;this.yai_=2;this.Dai_=3;this.Mai_=4;this.vai_=5;this.bai_=1;this.Nai_=2;this.Sai_=3;this.Gai_=1;this.Rai_=2;this.kai_=3;this.Fai_=4;this.xai_=1;this.Lai_=2;this.Uai_=3;this.Yai_=4;this.Tai_=5;this.Kai_=0;this.Hai_=1;this.qai_=2;this.Jai_=3;this.Pai_=4;this.Vai_=5;this.Oai_=6;this.Wai_=1;this.zai_=2;this.Xai_=3;this.jai_=4;this.Zai_=5;this._ai_=6;this.$ai_=0;this.tgi_=1;this.igi_=2;this.sgi_=3;this.egi_=0;this.Agi_=1;this.ngi_=2;this.hgi_=0;this.rgi_=this.aai_;this.ogi_=this.Cai_;this.lgi_=this.aai_;this.ugi_=this.aai_;this.agi_=this.Cai_;this.ggi_=this.ip8;this.cgi_=-1;this.Igi_=0;this.fgi_=new mA(0,0,0,0);this.Cgi_=!1;this.dgi_=0;this.Bgi_=new nA(0,0,0);this.wgi_=!0;this.Qgi_=new nA(255,255,255,0);this.Egi_=!1;this.pgi_=0;this.mgi_=this.egi_;this.ygi_=!0;this.Dgi_=0;this.Mgi_=this.Bai_;this.vgi_=0;this.bgi_=1;this.Ngi_=new nA(0,0,0);this.Sgi_=0;this.Ggi_=this.mai_;this.Rgi_=this.bai_;this.kgi_=this.Gai_;this.Fgi_=32767;this.xgi_=0;this.Lgi_=this.Yai_;this.Ugi_=4;this.Ygi_=1;this.Tgi_=new nA(0,0,0);this.Kgi_=0;this.Hgi_=0;this.qgi_=Number.MAX_VALUE;this.Jgi_=this.aai_;this.Pgi_=new nA(0,0,0);this.Vgi_=0;this.Ogi_=0;this.Wgi_=0;this.zgi_=0;this.Xgi_=0;this.jgi_=0;this.Zgi_=0;this._gi_=1;this.$gi_=1;this.tci_=-1;this.ici_=0;this.sci_=0;this.eci_=0;this.Aci_=0;this.nci_=0;this.hci_=0;this.rci_=new nA(0,0,0);this.oci_=0;this.lci_=0;this.uci_=0;this.aci_=this.Kai_;this.gci_=this.Wai_;this.cci_=0;this.Ici_=255;this.fci_=0;this.Cci_=this.Bai_;this.dci_=0;this.Bci_=1;this.wci_=new nA(0,0,0);this.Qci_=0;this.Eci_=!1;this.pci_=this.mai_;this.mci_=this.bai_;this.yci_=this.Gai_;this.Dci_=0}};i=t([_s("geotoolkit.cgm.CgmAttribute")],i);return i}();var cP=function(){let i=class t extends gP{constructor(t){if(!t)throw new TypeError("cgmStream must be specified!");super();this.Mci_=t}i6t_(){return this.Mci_}s6t_(t){this.Mci_=t;return this}UI8(t){this.Mci_.out(t&255)}vci_(t){this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}bci_(t){this.Mci_.out(t>>16&255);this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}Nci_(t){this.Mci_.out(t>>24&255);this.Mci_.out(t>>16&255);this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}SI8(t){this.Mci_.out(t&255)}Sci_(t){this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}Gci_(t){this.Mci_.out(t>>16&255);this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}Rci_(t){this.Mci_.out(t>>24&255);this.Mci_.out(t>>16&255);this.Mci_.out(t>>8&255);this.Mci_.out(t&255)}kci_(t){const i=Math.abs(t);let s=Math.floor(i),e=Math.floor((i-s)*65536);if(t<0){e!==0&&s++;e=-e&65535;s=-s}this.Sci_(s);this.vci_(e)}Fci_(t){const i=Math.abs(t);let s=Math.floor(i),e=Math.floor(Math.pow(i-s,32));if(t<0){e!==0&&s++;e=-e;s=-s}this.Rci_(s);this.Nci_(e)}xci_(t){const i=new DataView(new ArrayBuffer(4));i.setFloat32(0,t);this.Nci_(i.getInt32(0))}Lci_(t){const i=new DataView(new ArrayBuffer(8));i.setFloat64(0,t);this.Nci_(i.getInt32(0));this.Nci_(i.getInt32(4))}CI(t){this._I(t,this.cgi_)}Uci_(){return this.cgi_}CCO(t){this._I(t,this.ggi_)}Yci_(){return this.ggi_}CD(t){const i=undefined,s=((128<<this.Yci_())-1)/255;this.CCO(Math.trunc(t.Is_()*s));this.CCO(Math.trunc(t.Cs_()*s));this.CCO(Math.trunc(t.fs_()*s))}Tci_(){return 3*this.Yci_()}Kci_(t,i){if(i!==255){this.UI8(i);this.Mci_.out(t,0,i)}}Hci_(t,i,s){if(i>32767)return;let e=i;s&&(e|=32768);this.vci_(e);this.Mci_.out(t,0,i)}D(t,i){if(i<255){this.Kci_(t,i);return}this.UI8(255);let s;for(s=i;s>32767;s-=32767)this.Hci_(t,s,!0);s>0&&this.Hci_(t,s,!1)}qci_(t){this.I(t*8)}Jci_(t){this.E(t>>1&1);switch(t){case this.Iai_:this.I(9);this.I(23);break;case this.fai_:this.I(12);this.I(52);break;case this.Cai_:this.I(16);this.I(16);break;case this.dai_:this.I(32);this.I(32);break}}Pci_(t){return t<255?t+1:t/32767*2+t+3}S(t){const i=this.Vci_(t);this.D(i,i.length)}Oci_(t){return typeof t=="number"?this.Pci_(t):this.Pci_(t.split("").length)}I(t){this._I(t,this.lgi_)}Wci_(){return this.lgi_}E(t){this.vci_(t)}zci_(){return 2}IX(t){this._I(t,this.ugi_)}Xci_(){return this.ugi_}R(t){this._R(t,this.agi_)}jci_(){return this.Zci_(this.agi_)}CO(t){t instanceof nA?this.CD(t):this.CI(t)}_ci_(){return this.Igi_!==0?this.Tci_():this.Uci_()}VDC(t){this.hgi_===1?this._R(t,this.ogi_):this._I(t,this.rgi_)}$ci_(){return this.hgi_>0?this.Zci_(this.ogi_):this.tIi_(this.rgi_)}P(t,i){if(t instanceof lA){i=t.getY();t=t.getX()}this.VDC(t);this.VDC(i)}iIi_(){return this.$ci_()*2}SS(t){this.R(t)}sIi_(){return this.jci_()}eIi_(){(this.Mci_.getPosition()&1)!=0&&this.UI8(0)}Vci_(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}_I(t,i){switch(i){case this.ip8:this.UI8(Math.trunc(t));break;case this.aai_:this.vci_(Math.trunc(t));break;case this.gai_:this.bci_(Math.trunc(t));break;case this.cai_:this.Nci_(Math.trunc(t));break}}tIi_(t){return t}_R(t,i){switch(i){case this.Iai_:this.xci_(t);break;case this.fai_:this.Lci_(t);break;case this.Cai_:this.kci_(t);break;case this.dai_:this.Fci_(t);break}}Zci_(t){return 4<<(t&1)}};i=t([_s("geotoolkit.cgm.CgmPrimitive")],i);return i}();const IP=32760,fP=32768|32760;var CP=function(){let i=class t extends cP{constructor(t){if(!t)throw new TypeError("cgmStream must be specified!");super(t)}command(t,i,s){this.eIi_();if(i<31)this.vci_(t|i);else{this.vci_(t|31);let e=i&32767;s&&(e|=32768);this.vci_(e)}}cmd(t,i){return(t<<7|i)<<5}lineTo(t,i,s){this.AIi_(t,(i?2:0)|(s?1:0))}nIi_(t){this.command(this.cmd(0,1),this.Oci_(t.length),!1);this.S(t)}hIi_(){this.command(this.cmd(0,2),0,!1)}rIi_(t){this.command(this.cmd(0,3),this.Oci_(t.length),!1);this.S(t)}oIi_(){this.command(this.cmd(0,4),0,!1)}lIi_(){this.command(this.cmd(0,5),0,!1)}uIi_(){this.command(this.cmd(0,8),0,!1)}aIi_(){this.command(this.cmd(0,9),0,!1)}gIi_(){++this.Dci_;this.command(this.cmd(0,13),this.Wci_(),!1);this.I(this.Dci_)}cIi_(){this.command(this.cmd(0,14),0,!1)}IIi_(t){this.command(this.cmd(1,1),this.Wci_(),!1);this.I(t>0?t&3:3)}fIi_(t){this.command(this.cmd(1,2),this.Oci_(t.length),!1);this.S(t)}CIi_(t){this.command(this.cmd(1,3),this.zci_(),!1);this.hgi_=t&1;this.E(this.hgi_)}dIi_(t){this.command(this.cmd(1,4),this.Wci_(),!1);this.lgi_=t;this.qci_(this.lgi_)}BIi_(t){this.command(this.cmd(1,5),this.zci_()+2*this.Wci_(),!1);this.agi_=t;this.Jci_(t)}wIi_(t){this.command(this.cmd(1,6),this.Wci_(),!1);this.ugi_=t;this.qci_(this.ugi_)}QIi_(t){if(this.EIi_(t)){this.command(this.cmd(1,7),this.Wci_(),!1);this.ggi_=t;this.qci_(this.ggi_)}}pIi_(t){if(this.EIi_(t)){this.command(this.cmd(1,8),this.Wci_(),!1);this.cgi_=t;this.qci_(this.cgi_)}}EIi_(t){return t===this.ip8||t===this.aai_||t===this.gai_||t===this.cai_}mIi_(t){this.command(this.cmd(1,9),this.Uci_(),!1);this.pgi_=t>0?t:1;this.CI(t)}yIi_(t,i){this.command(this.cmd(1,10),this.Tci_()*2,!1);this.CD(t);this.CD(i)}DIi_(t){this.command(this.cmd(1,11),this.Wci_()+2*this.Xci_(),!1);this.I(1);this.IX(-1);switch(t){case 1:this.IX(1);break;case 2:this.IX(2);break;case 3:this.IX(5);break;default:this.IX(0);break}}MIi_(t){this.eIi_();let i=0;for(let s=0;s<t.length;++s)i+=this.Oci_(t[s]);this.command(this.cmd(1,13),i,!1);for(let i=0;i<t.length;++i)this.S(t[i]);this.eIi_()}vIi_(t,i){const s=t>>0;if(!(s!==t||s<0||s>4)){this.command(this.cmd(1,14),this.zci_()+this.Oci_(i),!1);this.E(t);this.S(i)}}bIi_(t){const i=t>>0;if(!(i!==t||i<0||i>3)){this.command(this.cmd(1,15),this.zci_(),!1);this.E(t)}}NIi_(t){this.command(this.cmd(1,17),this.iIi_()*2,!1);this.P(new lA(t.getX(),t.getY()));this.P(new lA(t.getX()+t.Ie_(),t.getY()+t.Ts_()))}SIi_(t,i){this.command(this.cmd(2,1),this.zci_()+this.jci_(),!1);this.E(t&1);this.agi_===this.fai_?this.Lci_(i):this.xci_(i)}GIi_(t){this.command(this.cmd(2,2),this.zci_(),!1);this.Igi_=t&1;this.E(this.Igi_)}RIi_(){return this.Igi_}kIi_(t){if(this.bgi_!==(t&3)){this.bgi_=t&3;this.command(this.cmd(2,3),this.zci_(),!1);this.E(t)}}FIi_(t){this.Ygi_=t&3;this.command(this.cmd(2,4),this.zci_(),!1);this.E(t)}xIi_(t){if(this.Bci_!==(t&3)){this.Bci_=t&3;this.command(this.cmd(2,5),this.zci_(),!1);this.E(t)}}LIi_(t,i){this.ygi_=i;this.command(this.cmd(2,6),this.iIi_()*2,!1);this.P(new lA(t.getX(),t.getY()));this.P(new lA(t.getX()+t.Ie_(),t.getY()+t.Ts_()))}backgroundColor(t){this.command(this.cmd(2,7),this.Tci_(),!1);this.CD(t)}UIi_(t,i){if(this.mgi_===this.egi_){this.command(this.cmd(2,8),4*this.jci_(),!1);this.R(t.x);this.R(t.y);this.R(i.x);this.R(i.y)}else{this.command(this.cmd(2,8),4*this.Wci_(),!1);this.I(t.x);this.I(t.y);this.I(i.x);this.I(i.y)}}YIi_(t,i){this.mgi_=t;this.command(this.cmd(2,9),this.zci_()+this.jci_(),!1);this.E(t);this.R(i)}TIi_(t,i,s){this.command(this.cmd(2,10),3*this.zci_(),!1);this.E(t);this.E(i);this.E(s)}KIi_(t){this.rgi_=t;this.command(this.cmd(3,1),this.Wci_(),!1);this.qci_(t)}HIi_(t){this.ogi_=t;this.command(this.cmd(3,2),this.zci_()+2*this.Wci_(),!1);this.Jci_(t)}qIi_(t){t instanceof nA?this.Bgi_=t:this.dgi_=t;this.command(this.cmd(3,3),this._ci_(),!1);this.CO(t)}JIi_(t){this.wgi_=t;this.command(this.cmd(3,4),this.zci_(),!1);this.E(this.wgi_?1:0)}PIi_(t){if(!this.fgi_.Ce_(t)){this.fgi_=t;this.command(this.cmd(3,5),this.iIi_()*2,!1);this.P(new lA(t.getX(),t.getY()));this.P(new lA(t.getX()+t.Ie_(),t.getY()+t.Ts_()))}}VIi_(t){this.Cgi_=t;this.command(this.cmd(3,6),this.zci_(),!1);this.E(this.Cgi_?1:0)}OIi_(){this.command(this.cmd(3,10),0,!1)}WIi_(t,i){this.command(this.cmd(3,17),this.Wci_()*2,!1);this.I(t);this.I(i?2:1)}zIi_(t){if(this.Fgi_!==t){this.command(this.cmd(3,19),this.jci_());this.R(t);this.Fgi_=t}}XIi_(t){this.command(this.cmd(3,20),this.zci_()+this._ci_(),!1);this.E(1);this.CO(t);this.Qgi_=t}jIi_(t){const i=t.length*this.iIi_();this.command(this.cmd(4,1),i>IP?IP:i,i>IP);this.ZIi_(t)}text(t,i,s){this.command(this.cmd(4,4),this.iIi_()+this.zci_()+this.Oci_(s),!1);this.P(t);this.E(i?1:0);this.S(s);this.eIi_()}_Ii_(t,i,s,e,A){this.command(this.cmd(4,5),this.$ci_()*2+this.iIi_()+this.Oci_(A),!1);this.VDC(t);this.VDC(i);this.P(s);this.E(e?1:0);this.S(A)}$Ii_(t,i){this.command(this.cmd(4,6),this.zci_()+this.Oci_(i),!1);this.E(t?1:0);this.S(i)}tfi_(t){const i=t.length*this.iIi_();this.command(this.cmd(4,7),i>IP?IP:i,i>IP);this.ZIi_(t)}ifi_(t,i){const s=this.iIi_()+this.zci_();let e=t.length*s;if(e<=IP){this.command(this.cmd(4,8),e,!1);for(let s=0;s<t.length;s++)this.AIi_(t[s],i[s])}else{const A=IP/s,n=A*s;let h,r;this.command(this.cmd(4,8),n,!0);for(h=0;e>IP;h+=A){for(r=h;r<h+A;r++)this.AIi_(t[r],i[r]);e-=n;this.vci_(e>IP?32768|n:e)}for(r=h;r<t.length;r++)this.AIi_(t[r],i[r])}}sfi_(t,i,s,e){let A,n;this.XIi_(new nA(255,255,255,0));const h=e.Ie_(),r=e.Ts_(),o=h%2!=0;let l=3*this.iIi_()+3*this.Wci_()+this.zci_()+h*r*this._ci_(),u;o&&(l+=r-1);if(l<32767){this.command(this.cmd(4,9),l);this.P(t);this.P(i);this.P(s);this.I(h);this.I(r);this.I(8);this.E(1);for(n=0;n<r;n++){for(A=0;A<h;A++){u=e.oai_(A,n);u.ds_()<127&&(u=this.Qgi_);this.CO(u)}o&&n<r-1&&this.UI8(0)}}else{const l=h*this._ci_()+(o?1:0);if(32767-3*this.iIi_()-3*this.Wci_()-this.zci_()>l)for(n=0;n<r;n++){let l=h*this._ci_();o&&n<r-1&&l++;if(n===0){l+=3*this.iIi_()+3*this.Wci_()+this.zci_();this.command(this.cmd(4,9),l,!0);this.P(t);this.P(i);this.P(s);this.I(h);this.I(r);this.I(8);this.E(1)}else n<r-1?this.vci_(32768|l):this.vci_(l);for(A=0;A<h;A++){u=e.oai_(A,n);u.ds_()<127&&(u=this.Qgi_);this.CO(u)}o&&n<r-1&&this.UI8(0)}}}efi_(t,i){this.command(this.cmd(4,10),t,i)}DHt_(t){this.command(this.cmd(4,11),this.iIi_()*2,!1);this.P(new lA(t.getX(),t.getY()));this.P(new lA(t.getX()+t.Ie_(),t.getY()+t.Ts_()))}Afi_(t,i){this.command(this.cmd(4,12),this.iIi_()+this.$ci_(),!1);this.P(t);this.VDC(i)}nfi_(t,i,s){this.command(this.cmd(4,13),this.iIi_()*3,!1);this.P(t);this.P(i);this.P(s)}hfi_(t,i,s,e){this.command(this.cmd(4,14),this.iIi_()*3+this.zci_(),!1);this.P(t);this.P(i);this.P(s);this.E(e&1)}rfi_(t,i,s,e,A,n){this.command(this.cmd(4,15),this.iIi_()+5*this.$ci_(),!1);this.P(t);this.VDC(i);this.VDC(s);this.VDC(e);this.VDC(A);this.VDC(n)}ofi_(t,i,s,e,A,n,h){this.command(this.cmd(4,16),this.iIi_()+5*this.$ci_()+this.zci_(),!1);this.P(t);this.VDC(i);this.VDC(s);this.VDC(e);this.VDC(A);this.VDC(n);this.E(h&1)}ellipse(t,i,s){this.command(this.cmd(4,17),this.iIi_()*3,!1);this.P(t);this.P(i);this.P(s)}lfi_(t,i,s,e,A,n,h){this.command(this.cmd(4,18),this.iIi_()*3+this.$ci_()*4,!1);this.P(t);this.P(i);this.P(s);this.VDC(e);this.VDC(A);this.VDC(n);this.VDC(h)}ufi_(t,i,s,e,A,n,h,r){this.command(this.cmd(4,19),this.iIi_()*3+this.$ci_()*4+this.zci_(),!1);this.P(t);this.P(i);this.P(s);this.VDC(e);this.VDC(A);this.VDC(n);this.VDC(h);this.E(r&1)}afi_(t,i){this.command(this.cmd(4,26),this.Xci_()+this.iIi_()*t.length,!1);this.IX(i);for(let i=0;i<t.length;++i)this.P(t[i])}gfi_(t){this.command(this.cmd(5,1),this.Xci_(),!1);this.IX(t);this.Dgi_=t}cfi_(t){this.command(this.cmd(5,2),this.Xci_(),!1);this.IX(t);this.Mgi_=t}lineWidth(t){this.command(this.cmd(5,3),this.sIi_(),!1);this.SS(t);this.vgi_=t}Ifi_(t){this.command(this.cmd(5,4),this._ci_(),!1);this.CO(t);t instanceof nA?this.Ngi_=t:this.Sgi_=t}ffi_(t){this.command(this.cmd(5,5),this.Xci_(),!1);this.IX(t);this.xgi_=t}Cfi_(t){this.command(this.cmd(5,6),this.Xci_(),!1);this.IX(t);this.Lgi_=t}dfi_(t){this.command(this.cmd(5,7),this.sIi_(),!1);this.SS(t);this.Ugi_=t}Bfi_(t){this.command(this.cmd(5,8),this._ci_(),!1);this.CO(t);if(typeof t=="number")this.Kgi_=t;else{this.wfi_(t.ds_());this.Tgi_=t}}Qfi_(t){this.command(this.cmd(5,9),this.Xci_(),!1);this.IX(t);this.Hgi_=t}Efi_(t){this.command(this.cmd(5,10),this.Xci_(),!1);this.IX(t);this.qgi_=t}pfi_(t){this.command(this.cmd(5,11),this.zci_(),!1);this.E(t&3);this.Jgi_=t}mfi_(t){this.command(this.cmd(5,12),this.jci_(),!1);this.R(t);this._gi_=t}yfi_(t){this.command(this.cmd(5,13),this.jci_(),!1);this.R(t);this.$gi_=t}Dfi_(t){this.command(this.cmd(5,14),this._ci_());this.CO(t);if(typeof t=="number")this.Vgi_=t;else{this.wfi_(t.ds_());this.Pgi_=t}}Mfi_(t){this.command(this.cmd(5,15),this.$ci_());this.VDC(t);this.tci_=t}vfi_(t,i,s,e){this.command(this.cmd(5,16),this.$ci_()*4);this.VDC(t);this.VDC(i);this.VDC(s);this.VDC(e);this.ici_=t;this.sci_=i;this.eci_=s;this.Aci_=e}bfi_(t){this.command(this.cmd(5,17),this.zci_());this.E(t&3);this.Ogi_=t}Nfi_(t,i,s,e){this.command(this.cmd(5,18),2*(this.zci_()+this.jci_()));this.E(t);this.E(i);this.R(s);this.R(e);this.Wgi_=t;this.zgi_=i;this.Xgi_=s;this.jgi_=e}Sfi_(t){this.command(this.cmd(5,19),this.Xci_());this.IX(t);this.Zgi_=t}Gfi_(t){this.command(this.cmd(5,20),this.Xci_());this.IX(t);this.nci_=t}Rfi_(t){this.command(this.cmd(5,21),this.Xci_());this.IX(t);this.hci_=t}kfi_(t){this.command(this.cmd(5,22),this.zci_());this.E(t);this.aci_=t}Ffi_(t){this.command(this.cmd(5,23),this._ci_());this.CO(t);if(typeof t=="number")this.oci_=t;else{this.wfi_(t.ds_());this.rci_=t}}xfi_(t){this.command(this.cmd(5,24),this.Xci_());this.IX(t);this.gci_=t}Lfi_(t){this.command(this.cmd(5,25),this.Xci_());this.IX(t);this.cci_=t}Ufi_(t){this.command(this.cmd(5,26),this.Xci_());this.IX(t);this.fci_=t}Yfi_(t){this.command(this.cmd(5,27),this.Xci_());this.IX(t);this.Cci_=t}Tfi_(t){this.command(this.cmd(5,28),this.sIi_());this.SS(t);this.dci_=t}Kfi_(t){this.command(this.cmd(5,29),this._ci_());this.CO(t);typeof t=="number"?this.Qci_=t:this.wci_=t}Hfi_(t){this.command(this.cmd(5,30),this.zci_());this.E(t?1:0);this.Eci_=t}qfi_(t){this.command(this.cmd(5,31),this.iIi_());this.P(t);this.lci_=t.x;this.uci_=t.y}Jfi_(t,i,s){const e=s.Ie_(),A=s.Ts_(),n=this.Xci_()+3*this.Wci_()+e*A*this._ci_();let h,r,o;if(n<32767){this.Pfi_(t,e,A,i,n,!1);if(this.ygi_)for(o=A-1;o>=0;o--)for(r=0;r<e;r++){h=s.oai_(r,o);h.ds_()===0&&(h=this.Qgi_);this.CO(h)}else for(o=0;o<A;o++)for(r=0;r<e;r++){h=s.oai_(r,o);h.ds_()===0&&(h=this.Qgi_);this.CO(h)}}else{const n=e*this._ci_();if(32767-this.Xci_()-3*this.Wci_()>n){let n;if(this.ygi_)for(o=A-1;o>=0;o--){n=e*this._ci_();if(o===A-1){n+=this.Xci_()+3*this.Wci_();this.Pfi_(t,e,A,i,n,!0)}else o>0?this.vci_(32768|n):this.vci_(n);for(r=0;r<e;r++){h=s.oai_(r,o);h.ds_()===0&&(h=this.Qgi_);this.CO(h)}}else for(o=0;o<A;o++){n=e*this._ci_();if(o===0){n+=this.Xci_()+3*this.Wci_();this.Pfi_(t,e,A,i,n,!0)}else o<A-1?this.vci_(32768|n):this.vci_(n);for(r=0;r<e;r++){h=s.oai_(r,o);h.ds_()===0&&(h=this.Qgi_);this.CO(h)}}}}}Pfi_(t,i,s,e,A,n){this.command(this.cmd(5,32),A,n);this.IX(t);this.I(i);this.I(s);this.I(e)}Vfi_(t,i,s,e){this.command(this.cmd(5,33),4*this.$ci_());this.VDC(t);this.VDC(i);this.VDC(s);this.VDC(e)}Ofi_(t,i){this.command(this.cmd(5,34),t.length*this.Tci_()+this.Uci_());this.CI(i);for(let i=0;i<t.length;i++)this.CD(t[i])}Wfi_(t,i){this.command(this.cmd(5,35),t,i)}lineCap(t,i){if(this.Ggi_!==t||this.Rgi_!==i){this.command(this.cmd(5,37),2*this.Xci_());this.IX(t);this.IX(i);this.Ggi_=t;this.Rgi_=i}}lineJoin(t){if(this.kgi_!==t){this.command(this.cmd(5,38),this.Xci_());this.IX(t);this.kgi_=t}}zfi_(t,i,s,e){const A=s.length;if(t<1||t>2||e.length<A+1||i.length!==t)return;const n=this.Xci_()+2*i.length*this.sIi_()+this.Wci_()+A*this.jci_()+(A+1)*this._ci_();let h;this.command(this.cmd(5,43),n);this.IX(t);for(h=0;h<i.length;h++){this.SS(i[h].x-this.lci_);this.SS(i[h].y-this.uci_)}this.I(A);for(h=0;h<A;h++)this.R(s[h]);for(h=0;h<A+1;h++)this.CO(e[h])}Xfi_(t,i){if(this.pci_!==t||this.mci_!==i){this.command(this.cmd(5,44),2*this.Xci_());this.IX(t);this.IX(i);this.pci_=t;this.mci_=i}}jfi_(t){if(this.yci_!==t){this.command(this.cmd(5,45),this.Xci_());this.IX(t);this.yci_=t}}escape(t,i,s){if(t==null)this.command(this.cmd(6,1),i,s);else{this.command(this.cmd(6,1),i+this.Wci_(),s);this.I(t)}}message(t,i){this.command(this.cmd(7,1),this.zci_()+this.Oci_(i));this.E(t?1:0);this.S(i)}wfi_(t){if(t===this.Ici_)return;this.Ici_=t;const i=this.jci_()+this.Xci_()+this.Wci_();this.escape(45,i+1,!1);this.UI8(i);this.IX(12);this.I(1);this.R(t/255)}AIi_(t,i){this.P(t);this.E(i&3)}ZIi_(t){let i=t.length*this.iIi_(),s=0;for(let e=0;e<t.length;++e){this.P(t[e]);s+=this.iIi_();i-=this.iIi_();if(s>=IP){this.vci_(i<=IP?i:fP);s=0}}}};i=t([_s("geotoolkit.cgm.CgmCommand")],i);return i}();var dP={Zfi_:"Abstract",_fi_:"Metric"};var BP={Text:"Text",Shape:"Shape"};fr.jw_(kI);const wP={left:1,right:3,center:2},QP={$fi_:.66,tCi_:Uo.Uy_};var EP=Ci(function(){var i;let s=i=class t extends Qa{constructor(t){super();t.filters&&this.setFilters(t.filters);const i=qi(t,{kJ_:null,LJ_:null,parent:null,GJ_:null,fillStyle:null,iCi_:null,XQ_:null,jQ_:null,sCi_:null,clip:null,stream:null,eCi_:null,ACi_:null,cmd:null,fonts:null,nCi_:!1});if(i.stream===null){if(i.cmd===null||i.cmd.i6t_()===null)throw new TypeError("CgmStream can not be equal to null!");i.stream=i.cmd.i6t_()}if(i.kJ_===null)throw new TypeError("viewPort can not be equal to null!");this.hCi_=i.kJ_;this.rCi_=null;this.vQ_=i.LJ_!==null?i.LJ_:new Gn;this.oCi_=null;this.xC_=i.parent;this.hq_=i.fillStyle;this.lCi_=i.iCi_;this.CS_=i.XQ_;this.kD_=i.XQ_!==null?i.XQ_.Ie_():1;this.lJ_=null;this.fX_=i.jQ_;this.uCi_=-1;this.aCi_=i.sCi_;this.gCi_=i.ACi_;this.pP_=i.clip;this.cCi_=i.cmd||new CP(i.stream);this.ICi_=qi(i.eCi_,{SIi_:dP._fi_,fCi_:25.4/72,bgColor:new nA(255,255,255),CCi_:BP.Text,dCi_:0,version:3});this.BCi_=[];this.nj_=i.fonts||[];this.Ls_=.1;this.wCi_=i.nCi_;this.QCi_=null;this.ECi_=null;this.Iii_=!1}open(t){const i="Metafile",s="Picture1",e=this.cCi_.$ai_,A=this.cCi_.$ai_;this.pP_=t;this.aCi_=t;this.gCi_=(new Gn).II_(t,t,!1,!0,!1);this.cCi_.nIi_(i);this.cCi_.IIi_(this.ICi_.version);this.cCi_.fIi_(this.pCi_());this.cCi_.CIi_(1);this.cCi_.dIi_(this.cCi_.aai_);this.cCi_.BIi_(this.cCi_.Iai_);this.cCi_.wIi_(this.cCi_.aai_);this.cCi_.QIi_(this.cCi_.ip8);this.cCi_.pIi_(this.cCi_.aai_);this.mCi_(this.cCi_.Iai_);this.ICi_.version>1&&this.cCi_.NIi_(t);this.ICi_.dCi_>0&&this.cCi_.mIi_(this.ICi_.dCi_);const n=new nA(0,0,0),h=new nA(255,255,255);this.cCi_.yIi_(n,h);this.cCi_.DIi_(this.ICi_.version);this.cCi_.eIi_();this.QCi_=new Ey;this.ECi_=this.cCi_.i6t_();this.cCi_.s6t_(this.QCi_);this.cCi_.rIi_(s);this.cCi_.SIi_(this.ICi_.SIi_===dP._fi_?1:0,this.ICi_.fCi_);this.cCi_.GIi_(1);this.cCi_.kIi_(e);this.cCi_.xIi_(A);this.cCi_.backgroundColor(this.ICi_.bgColor);this.cCi_.LIi_(t,!1);this.cCi_.oIi_();this.cCi_.PIi_(this.gCi_.rn_(this.pP_));return this}close(){this.cCi_.s6t_(this.ECi_);this.nj_.length>0&&this.cCi_.MIi_(this.nj_);this.cCi_.i6t_().out(this.QCi_.xlt_());this.cCi_.eIi_();this.cCi_.lIi_();this.cCi_.hIi_();this.cCi_.i6t_().close();return this}qR_(t){t.RK_!=null&&(this.GR_.RK_=t.RK_);return this}ZR_(t,i,s){return fr.zw_(t,i,!1,!1,this.VR_())}vR_(t){this.lJ_=t;return this}save(){this.BCi_.push({clip:this.pP_!=null?this.pP_.clone():this.pP_});return this}restore(){if(this.BCi_.length>0){const t=this.BCi_.pop();this._b_(t["clip"])}return this}rS_(){if(this.rCi_==null){const t=this.XR_();this.rCi_=t!=null?t.rn_(this.cR_()):this.cR_()}return this.rCi_}Ji_(){return this.vQ_}dI_(t){this.vQ_=t;this.oCi_=null;this.rCi_=null;return this}XR_(){this.oCi_==null&&(this.oCi_=this.vQ_.rI_());return this.oCi_}_b_(t,i,s,e){t==null&&(t=this.cR_());t instanceof Mn&&(t=t.Kc_());const A=i!==void 0?i:QA.Et_,n=undefined;s!==void 0&&s&&!this.Ji_().isIdentity()&&(t=this.Ji_().transform(t));this.pP_ instanceof TA&&A===QA.ue_?this.pP_.intersect(t.getBounds()):this.pP_=bn.Xc_(this.pP_,t,A);if(t instanceof TA){if(A!==QA.ue_){const i=t.getTags(),s=t.getX(),e=t.getY();this.beginPath();for(let A=0;A<i.length;A++){const n=i[A],h=t.getIndex(A);switch(n){case LA.ZA_:this.moveTo(s[h],e[h]);break;case LA.jA_:this.lineTo(s[h],e[h]);break;case LA._A_:this.bezierCurveTo(s[h],e[h],s[h+1],e[h+1],s[h+2],e[h+2]);break;case LA.tn_:this.arcTo(s[h],e[h],s[h+1],e[h+1],s[h+2]);break;case LA.$A_:this.closePath();break}}this.yCi_=!0;this.cCi_.WIi_(this.cCi_.Dci_,!1);this.cCi_.gIi_();this.DCi_(this._paths);this.cCi_.cIi_();this.cCi_.WIi_(this.cCi_.Dci_,!0);this.pP_=t;this.yCi_=!1;this.MCi_=!0;return this}const i=this.pP_.getBounds();this.pP_=t.clone();this.pP_.intersect(i)}if(this.MCi_){this.cCi_.WIi_(this.cCi_.Dci_,!1);this.MCi_=!1}this.cCi_.PIi_(this.gCi_.rn_(this.pP_.getBounds()));return this}_R_(t){this.hCi_=t;this.rCi_=null;return this}$R_(t){if(t!=null){const i=this.Ji_();i!=null&&(t=i.rn_(t));this._R_(t)}return this}uS_(t){return new i({parent:this,cmd:this.cCi_,kJ_:this.hCi_,LJ_:Gn.multiply(this.Ji_(),t),fillStyle:this.hq_,iCi_:this.lCi_,XQ_:this.CS_,jQ_:this.fX_,sCi_:this.aCi_,clip:this.pP_,eCi_:this.ICi_,ACi_:this.gCi_,fonts:this.nj_,nCi_:this.wCi_}).setFilters(this.getFilters())}tk_(){return!1}rB_(t,i){if(this.CS_===t)return this;if(t==null){this.kD_=0;this.CS_=null;this.cCi_.Hfi_(!1)}else if(t instanceof Fo){this.kD_=1;this.CS_=null}else{this.CS_=t;this.kD_=t.Ie_()}return this}iQ_(t,i){if(t==null||t===wr.RB_){this.hq_=null;this.lCi_=null;return this}this.hq_=t;this.lCi_=i;return this}g_(t){if(t==null)return this;const i=t.an_();if(this.fX_!=null&&this.fX_===t&&this.uCi_===i)return this;this.fX_=t;this.uCi_=i;this.Wk_=t.hD_();this.qk_=t.Wy_();this.Jsi_=this.Wk_?$o.measureText("Ag",t).Ts_():0;return this}measureText(t,i){if(i)return $o.measureText(t,i);const s=undefined,e=this.getCanvas().getContext("2d").measureText(t);return new $o(e.width,20)}jR_(){return new nI}cR_(){return this.aCi_ instanceof mA?this.aCi_:this.hCi_}pR_(t,i,s,e){const A={},n={};if(t instanceof mA){A.x=t.x;A.y=t.y;n.x=t.x+t.width;n.y=t.y+t.height}else{A.x=t;A.y=i;n.x=t+s;n.y=i+e}const h=[A.x,n.x,n.x,A.x,A.x],r=[A.y,A.y,n.y,n.y,A.y];return this.ER_(h,r)}drawImage(t,i,s,e,A,n,h,r,o){if(t==null)return this;t instanceof kI&&(t=t.getCanvas());if(t instanceof hI)return this;if(arguments.length===3)this.image(t,0,0,t.width,t.height,i,s,t.width,t.height);else if(t.height!==A||t.width!==e){const l=this.ZR_(e,A),u=undefined;l.tQ_().drawImage(t,i,s,e,A,0,0,e,A);l.gM_();this.image(l.getCanvas(),0,0,e,A,n,h,r,o)}else this.image(t,i,s,e,A,n,h,r,o);return this}DR_(t,i,s,e,A,n,h,r){this.arc(t,i,s,e,A,n-A,0,r?1:0);return this}MR_(t,i,s,e,A,n,h){if(this.hq_!=null){yu.nS_(this,t,i,s,e,A,n,h);this.sQ_()}if(this.CS_!=null){yu.nS_(this,t,i,s,e,A,n,h);this.stroke()}return this}yR_(t,i,s,e){let A=new mA(t,i,t+s,i+e);A=this.gCi_.rn_(this.vQ_.rn_(A));this.vCi_(!0);this.bCi_(!0);this.cCi_.ellipse(new lA(A.ye_(),A.De_()),new lA(A.Qe_(),A.De_()),new lA(A.ye_(),A.pe_()));return this}oB_(t,i,s,e){const A=[t,s],n=[i,e];this.NCi_(A,n,!1);return this}mR_(t,i,s,e,A){if(t==null||i==null)return this;s==null&&(s=0);e==null&&(e=Math.min(t.length,i.length)-1);if(e<=s)return this;++e;this.NCi_(t.slice(s,e),i.slice(s,e),!1);return this}ER_(t,i,s,e){s==null&&(s=0);e==null&&(e=Math.min(t.length,i.length)-1);if(e<=s)return this;++e;this.NCi_(t.slice(s,e),i.slice(s,e),!0);return this}drawText(t,i,s){if(s==null)return this;this.ICi_.CCi_===BP.Text&&this.SCi_();if(this.Wk_){const e=(s+"").split(Uo.Ly_);if(e.length>1){const s=this.Jsi_,A=new lA;A.x=t;const n=e.length*s;A.y=s/2+i-n/2;for(let t=0;t<e.length;t++){this.eP_(A.x,A.y,e[t]);A.y+=s}return this}}this.eP_(t,i,s);return this}beginPath(){this._paths=[];this.Iii_=!1;return this}closePath(){this.Iii_=!0;return this}stroke(){this.GCi_("S");return this}sQ_(){const t=this.lJ_?"PF":"F";this.GCi_(t);return this}moveTo(t,i){if(isNaN(t)||isNaN(i))return this;this._paths.push([[t,i]]);return this}lineTo(t,i){if(isNaN(t)||isNaN(i))return this;if(this._paths.length===0)this._paths.push([[t,i]]);else{const s=undefined;this._paths[this._paths.length-1].push([t,i])}return this}arcTo(t,i,s,e,A){if(A<0)return this;if(this._paths.length===0)return this;const n=this._paths[this._paths.length-1];if(n.length===0)return this;const h=n[n.length-1],r=new gu(h[h.length-2],h[h.length-1]);if(r.getX()===t&&r.getY()===i||t===s&&i===e){this.lineTo(t,i);return this}const o=new gu(t,i),l=new gu(s,e),u=r.te_(o).normalize(),a=l.te_(o).normalize(),g=u.dot(a),c=Math.acos(g)/2,I=A/Math.sin(c),f=u.add(a).normalize(),C=o.add(f.DN_(I)),d=o.add(u.DN_(C.te_(o).dot(u))),B=o.add(a.DN_(C.te_(o).dot(a))),w=d.te_(C).normalize();let Q=Math.acos(w.dot(new gu(1,0))),E=Math.acos(w.dot(new gu(0,1))),p;p=E<=.5*Math.PI&&Q<=.5*Math.PI?Q:E>=.5*Math.PI&&Q<=.5*Math.PI||E>=.5*Math.PI&&Q>=.5*Math.PI?2*Math.PI-Q:Q;const m=B.te_(C).normalize();Q=Math.acos(m.dot(new gu(1,0)));E=Math.acos(m.dot(new gu(0,1)));let y;y=E<=.5*Math.PI&&Q<=.5*Math.PI?Q:E>=.5*Math.PI&&Q<=.5*Math.PI||E>=.5*Math.PI&&Q>=.5*Math.PI?2*Math.PI-Q:Q;this.moveTo(r.getX(),r.getY());this.lineTo(d.getX(),d.getY());yu.eS_(this,C.getX(),C.getY(),A*2,A*2,p,y,!0);return this}bezierCurveTo(t,i,s,e,A,n){const h=this._paths[this._paths.length-1],r=h.length>0?new lA(h[h.length-1][0],h[h.length-1][1]):new lA,o=new lA(t,i),l=new lA(s,e),u=new lA(A,n),a=undefined,g=NA.We_(r,o,l,u,this.Ls_).map((t=>[t.getX(),t.getY()]));this._paths[this._paths.length-1]=h.concat(g);return this}vCi_(t){if(this.CS_==null)return this;const i=this.CS_.$w_();t&&this.cCi_.Hfi_(!0);const s=el;let e=this.cCi_.Bai_;Bs(i,s.pD_)||Bs(i,s.yD_)||Bs(i,s.DD_)||Bs(i,s.vD_)?e=this.cCi_.wai_:Bs(i,s.Dot)?e=this.cCi_.Qai_:Bs(i,s.mD_)?e=this.cCi_.Eai_:Bs(i,s.MD_)&&(e=this.cCi_.pai_);e!==this.cCi_.Bai_&&this.cCi_.JIi_(!0);const A=this.CS_.Ie_(),n=new nA(this.CS_.getColor());let h;if(t){this.ICi_.version>1&&this.cCi_.xIi_(this.cCi_.$ai_);if(this.ICi_.version>2){const t=this.RCi_();h=this.kCi_(t);const i=this.FCi_();this.cCi_.Xfi_(t,h);this.cCi_.jfi_(i);i===this.cCi_.Rai_&&this.cCi_.zIi_(10)}this.cCi_.Yfi_(e);this.cCi_.Tfi_(A);this.cCi_.Kfi_(n)}else{this.ICi_.version>1&&this.cCi_.kIi_(this.cCi_.$ai_);if(this.ICi_.version>2){const t=this.RCi_();h=this.kCi_(t);const i=this.FCi_();this.cCi_.lineCap(t,h);this.cCi_.lineJoin(i);i===this.cCi_.Rai_&&this.cCi_.zIi_(10)}this.cCi_.cfi_(e);this.cCi_.lineWidth(A);this.cCi_.Ifi_(n)}return this}bCi_(t){if(!t){this.cCi_.JIi_(!0);return this}if(this.hq_==null){this.cCi_.kfi_(this.cCi_.Pai_);this.cCi_.JIi_(!0);return this}let i=this.cCi_.Hai_;switch(this.hq_.fQ_()){case"STYLE_TYPE_LINEAR_GRADIENT":case"STYLE_TYPE_RADIAL_GRADIENT":case"STYLE_TYPE_ELLIPTICAL_GRADIENT":i=this.cCi_.Oai_;break;case"STYLE_TYPE_PATTERN":i=this.cCi_.qai_;break}if(i===this.cCi_.qai_){const t=this.lsi_(this.hq_.$w_().image,this.hq_.getColor());if(t==null)return this;this.cCi_.Jfi_(1,8,t);this.cCi_.Vfi_(0,t.Ts_(),t.Ie_(),0);this.cCi_.kfi_(this.cCi_.qai_);this.cCi_.Lfi_(1);this.cCi_.JIi_(!1)}else if(i===this.cCi_.Oai_&&this.hq_ instanceof mr)this.fsi_(i);else{this.cCi_.kfi_(i);this.cCi_.Ffi_(new nA(this.hq_.getColor()));this.cCi_.JIi_(!1)}return this}fsi_(t){const i=undefined;let s,e,A,n;const h=[],r=[],o=[];let l=1,u=0;const a=this.hq_.xQ_()!==Er.DQ_;if(this.hq_ instanceof Fo){A=this.hq_.Vp_();n=this.hq_.Op_();h.push(n);e=1}else{if(!(this.hq_ instanceof xo))return this;{const t=this.hq_.Ey_(),i=this.hq_.my_(),s=this.hq_.vy_(),g=this.hq_.Dy_();A=new lA((t.getX()+i.getX())/2,(t.getY()+i.getY())/2);n=new lA(A.getX()+g-(a?s:0),A.getY());const c=new lA(A.getX(),A.getY()*2);h.push(n);h.push(c);if(s>0){u=a?s/g:s*2;r.push(u);o.push(new nA(this.hq_.YQ_(0)))}e=2;a||(l=2*(g-s))}}const g=this.hq_.Ji_();let c;if(a)c=Gn.multiply(this.Ji_(),g);else{const t=sa.RS_();if(this.lCi_.isEmpty())if(this.lCi_.Ts_()>0){this.lCi_.de_(1);c=Gn.xI_(t,this.lCi_,!1,!1,!1);this.lCi_.de_(0)}else if(this.lCi_.Ie_()>0){this.lCi_.Be_(1);c=Gn.xI_(t,this.lCi_,!1,!1,!1);this.lCi_.Be_(0)}else c=new Gn;else c=Gn.xI_(t,this.lCi_,!1,!1,!1);c=Gn.multiply(c,g);c=Gn.multiply(this.Ji_(),c)}c=Gn.multiply(this.gCi_,c);const I=c.transformPoint(A);for(s=0;s<h.length;s++)h[s]=c.transformPoint(h[s]);const f=this.hq_.GQ_();if(f<=2||this.wCi_){o.push(new nA(this.hq_.YQ_(0)));r.push(1);o.push(new nA(this.hq_.YQ_(f-1)))}else{const t=257;let i=1;f>t&&(i=f/t);let e=0,A;for(s=0;s<f;s+=i){e=Math.trunc(s);if(e!==0){A=this.hq_.KQ_(e);this.hq_ instanceof xo&&(A=u+A*l);r.push(A)}o.push(new nA(this.hq_.YQ_(e)))}if(e<f-1){r.push(this.hq_.KQ_(f-1));o.push(new nA(this.hq_.YQ_(f-1)))}}this.cCi_.kfi_(t);this.cCi_.qfi_(I);this.cCi_.zfi_(e,h,r,o);return this}RCi_(){let t=this.cCi_.mai_;if(this.xCi_)return t;const i=nl;switch(this.CS_.OD_()){case i.SD_:t=this.cCi_.yai_;break;case i._r_:t=this.cCi_.Dai_;break;case i.GD_:t=this.cCi_.Mai_;break}return t}kCi_(t){let i=this.cCi_.Nai_;this.xCi_&&(i=this.cCi_.bai_);return i}FCi_(){const t=Al;let i=this.cCi_.Gai_;if(this.xCi_)return i;switch(this.CS_.PD_()){case t._r_:i=this.cCi_.kai_;break;case t.ND_:i=this.cCi_.Fai_;break;case t.bD_:i=this.cCi_.Rai_;break}return i}arc(t,i,s,e,A,n,h,r){let o,l,u,a;if(Math.abs(n)>=Math.PI*2){this.yR_(t,i,s,e);return}A>=Math.PI*2?A%=Math.PI*2:A<0&&(A=-A%(Math.PI*2));let g=new mA(t,i,t+s,i+e);g=this.gCi_.rn_(this.vQ_.rn_(g));const c=g.x+g.width/2,I=g.y+g.height/2,f=g.x+g.width,C=I,d=g.y+g.height,B=c;o=Math.cos(A+n);l=-Math.sin(A+n);u=Math.cos(A);a=-Math.sin(A);if(n<0){let t;t=o;o=u;u=t;t=l;l=a;a=t}if(h===18){this.vCi_(!1);this.bCi_(!1);this.cCi_.lfi_(new lA(c,I),new lA(f,C),new lA(B,d),o,l,u,a)}else{this.vCi_(!0);this.bCi_(!0);this.cCi_.ufi_(new lA(c,I),new lA(f,C),new lA(B,d),o,l,u,a,r)}}NCi_(t,i,s){let e=[],A=new lA(0,0),n,h;this.vCi_(s);this.bCi_(s);for(let r=0;r<t.length;r++){n=t[r];h=i[r];if(n==null||isNaN(n)||h==null||isNaN(h)){e.length>1&&(s?this.cCi_.tfi_(e):this.cCi_.jIi_(e));e.length>0&&(e=[])}else{A.vs_(n,h);A=this.gCi_.transformPoint(this.yCi_?A:this.vQ_.transformPoint(A));e.push(A.clone())}}e.length>1&&(s?this.cCi_.tfi_(e):this.cCi_.jIi_(e))}mCi_(t){this.cCi_.command(this.cCi_.cmd(1,12),this.cCi_.zci_()+2*this.cCi_.Wci_()+2,!1);this.cCi_.HIi_(t)}pCi_(){return'"ProfileId: CGM","ColorClass: Colour","Source: (c) '+(new Date).getFullYear()+' Interactive Network Technologies Inc."'}SCi_(){this.xCi_=!1;if(this.CS_==null){this.CS_=new hl;this.xCi_=!0}this.vCi_(!1);if(this.xCi_){this.CS_=null;this.xCi_=!1}const t=new nA(this.fX_.getColor());this.cCi_.JIi_(!0);this.cCi_.Dfi_(t);const i=vs(this.fX_.Zy_());let s=i["fontfamily"];i._si_==="bold"&&(s+=" Bold");i._si_==="italic"&&(s+=" Italic");this.cCi_.Efi_(this.LCi_(s));const e=this.fX_.vF_();let A;switch(this.fX_.AD_()){case ka.Top:A=1;break;case ka.JQ_:A=5;break;default:A=3}this.cCi_.Nfi_(wP[e],A,0,0)}UCi_(t,i,s){const e=this.vQ_,A=new Gn(e.xx,e.yx,e.xy,e.yy,e.xx*t+e.xy*i+e.dx,e.yx*t+e.yy*i+e.dy),n=this.measureText(s,this.fX_);let h=e.sI_()<0?Gn.HI_(A):-Gn.HI_(A);h<0&&(h+=2*Math.PI);const r=A.rotate(h).rn_(new mA(0,0,n.Ie_(),n.Ts_())),o=QP.$fi_*r.Ts_(),l=r.Ie_()/r.Ts_()*n.Ts_()/n.Ie_();this.cCi_.Mfi_(o);this.cCi_.mfi_(l);typeof s=="number"&&(s+="");if(typeof s!="string"||s.length<1)return this;const u=Math.cos(h+Math.PI/2),a=Math.sin(h+Math.PI/2),g=Math.cos(h),c=Math.sin(h);this.cCi_.vfi_(u,a,g,c);const I=this.gCi_.transformPoint(e.transformPoint(new lA(t,i)));this.cCi_.text(I,!0,s);return this}LCi_(t){let i;for(i=0;i<this.nj_.length;++i)if(this.nj_[i]==="name")break;i>=this.nj_.length&&this.nj_.push(t);return i+1}lsi_(t,i){if(!(ys(t,gl)||t instanceof Mi.HTMLCanvasElement))return null;const s=ys(t,gl)?t.cM_():t,e=s.clientWidth||s.width,A=s.clientHeight||s.height;let n;if(!(s instanceof Mi.HTMLImageElement||s instanceof Mi.HTMLCanvasElement))return null;{const t=this.getCanvas();t.width=e;t.height=A;const h=t.getContext("2d",{willReadFrequently:!0});if(i){h.fillStyle=i;h.fillRect(0,0,e,A)}h.drawImage(s,0,0,e,A);n=h.getImageData(0,0,e,A).data}const h=new aP(e,A);h.uai_(n);return h}getCanvas(){this.ojt_||(this.ojt_=Ls(this.cR_().Ie_(),this.cR_().Ts_()));return this.ojt_}GCi_(t){if(t!=null&&this._paths.length!==0){t!=="S"&&(this.Iii_=!0);this.DCi_(this._paths)}}DCi_(t){let i,s,e,A;for(s=0;s<t.length;s++){e=[];A=[];for(i=0;i<t[s].length;i++){e.push(t[s][i][0]);A.push(t[s][i][1])}this.NCi_(e,A,this.Iii_)}}eP_(t,i,s){switch(this.ICi_.CCi_){case BP.Text:this.UCi_(t,i,s);break;case BP.Shape:break}}image(t,i,s,e,A,n,h,r,o){if(isNaN(n)||isNaN(h)||r<=0||o<=0)throw new Error("Illegal image drawing parameters");const l=this.lsi_(t);if(l==null)return this;const u=[n,n+r,n+r],a=[h,h,h+o];this.GR_.RK_||this.vQ_.NI_(u,a,3);const g=new lA(u[0],a[0]),c=new lA(u[1],a[1]),I=new lA(u[2],a[2]);this.gCi_.transformPoint(g,g);this.gCi_.transformPoint(c,c);this.gCi_.transformPoint(I,I);const f=this.cCi_.Ici_;this.cCi_.wfi_(255);this.cCi_.sfi_(g,I,c,l);this.cCi_.wfi_(f);return this}};s=i=t([_s("geotoolkit.cgm.CgmRenderingContext")],s);return s}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDbGlwIjoiX2JfIiwiZHJhd1JlY3RhbmdsZSI6InBSXyIsImRyYXdMaW5lIjoib0JfIiwiZHJhd1BvbHlsaW5lIjoibVJfIiwiZHJhd1BvbHlnb24iOiJFUl8iLCJkcmF3RWxsaXBzZSI6InlSXyIsImRyYXdBcmMiOiJEUl8iLCJkcmF3QW5udWx1c0FyYyI6Ik1SXyIsInNldEZpbGxTdHlsZSI6ImlRXyIsInNldEZpbGxQYXR0ZXJuIjoidlJfIiwic2V0TGluZVN0eWxlIjoickJfIiwic2V0VGV4dFN0eWxlIjoiZ18iLCJmaWxsUGF0aCI6InNRXyIsImdldFRyYW5zZm9ybWF0aW9uIjoiSmlfIiwic2V0VHJhbnNmb3JtYXRpb24iOiJkSV8iLCJnZXRJbnZlcnNlVHJhbnNmb3JtYXRpb24iOiJYUl8iLCJjcmVhdGVSZW5kZXJpbmdTdGF0ZSI6ImpSXyIsImNyZWF0ZVN1cmZhY2UiOiJaUl8iLCJwdXNoVHJhbnNmb3JtYXRpb24iOiJ1U18iLCJnZXREZXZpY2VSZWN0IjoiY1JfIiwiZ2V0TW9kZWxSZWN0IjoiclNfIiwic2V0RGV2aWNlUmVjdCI6Il9SXyIsInNldE1vZGVsUmVjdCI6IiRSXyIsImlzUGlja2luZyI6InRrXyJ9fX0g");var pP=Ci(function(){var t;return class{constructor(){this.YCi_=null;this.TCi_=null}KCi_(t){const i=qi(t,{root:null,stream:null,usesimplegradient:!1,exportbounds:null,exportoptions:{}},!0),s=i["stream"];let e=i["root"],A=i["exportbounds"],n;if(ys(e,HI)){n=e;n.DP_(i["exportoptions"]);e=n.XP_(i["exportoptions"])}const h=this.HCi_(e)||A;A=A||h;const r={stream:s,kJ_:h,nCi_:i["usesimplegradient"]},o=new lA,l=new EP(r);l.KR_();l.open(A);ue(e)&&e.render(l,o);l.close();l.HR_();n!=null&&n.yP_();this.qCi_(e);return s}HCi_(t){let i;if(t instanceof KI||t instanceof IQ){If.yV_(t);const s=t.MP_()["scaled"];i=new mA(0,0,s.Ie_(),s.Ts_())}else if(t instanceof sI){i=t.$Y_()||t.rt_();this.YCi_=t.getParent();this.YCi_ instanceof Ic&&this.YCi_.removeChild(t);this.TCi_=t.yq_();this.TCi_&&t.gk_(null)}return i}qCi_(t){if(t instanceof KI||t instanceof IQ)If.DV_(t);else if(t instanceof sI){this.YCi_ instanceof Ic&&this.YCi_.GY_(t);this.TCi_&&t.gk_(this.TCi_)}}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleHBvcnRUb0NnbVN0cmVhbSI6IktDaV8ifX19");export {aP,gP,cP,CP,dP,BP,EP,pP};