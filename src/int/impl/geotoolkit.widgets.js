/* eslint-disable */
import {__decorate as t} from 'tslib';import {hl,wr,El,qa,As,Kr,_s,fe,Ce,Ns,bs,qi,Es,mA,sI,TQ,OA,pw,fg,Ig,Pi,$g,Pm,Mi,_l,xA,lA,il,zB,dp,YC,tI,$B,rw,XB,_B,ha,bC,ie,ee,rh,Ih,ea,Ic,ys,ki,Sc,wc,HI,rQ,sQ,jQ,NA,nd,qI,sf,VI,cQ,Qy,by,ur,TI,Gn,KI,dQ,xB,Zs,ke,jn,el,WC,Rd,zn,Qg,vd,uc,md,sB,JA,dA,$o,Hn,Ew,fd,Cm,ua,Mo,lw,ww,ss,bo,na,JC,HC,nA,Sd,sc,ma,Yu,nl,Fa,ka,NC,xs,Us,Is,Ts,Uo,ch,ap,nh,$n,Zi,hh,Ah,Zn,TA,ks,Du,ff,df,Ea,wh,jf,eE,bn,gu,Au,ac,iu,ne,fA,he,oe,es,su,IE,fE,$E,tp,sp,da,cE,$i,Dr,yr,_a,oA,Bp,OC,Rs,YB,uw,aw,Zg,Ja,sg,Zd,Ci} from '@int/impl/geotoolkit.base.js';import {jU,lG,OS,sv,av,BG,WS,SD,RD,BD,cF,jS,sG,rY,nY,IY,MF,xS,fk,rU,gU,NG,bG,RG,LG,uG,BM,jD,_D,Db,fN,OM,wF,CF,DS,Qv,jL,AU,iN,oN,_k,Zk,KG,EU,QU,bU,bR,LR,NU,kU,mU,DU,MU,SU,rD,sN,$b,Wk,kS,mb,uD,tF,cG,FG} from '@int/impl/geotoolkit.controls.js';import {IK,fK,TH} from '@int/impl/geotoolkit.pdf.js';import {zD,UD,bM,xD,PD,vM,SM,qb,Lb,Pb,yM,HD,KD,pq,Yq,Cq,iJ,VD,op,IJ,tJ,$q,aJ,gJ,Bq,Fb,Jb} from '@int/impl/geotoolkit.data.js';const jT="cg_type",ZT=function(t){return typeof t=="string"&&t.match(/^#href\(.*\)$/)?/^#href\((.*)\)$/.exec(t)[1]:null};let _T=null;var $T=function(){var t=class{constructor(){this.map={};this._3t_={};this.$3t_("linestyle",hl.D_());this.$3t_("fillstyle",wr.D_());this.$3t_("imagepattern",El.D_());this.$3t_("textstyle",qa.D_())}static Ai_(){_T==null&&(_T=new t);return _T}$3t_(t,i){this.map[t]=i;this._3t_[i]=t}t4t_(){return this.map}getType(t){const i=t!=null&&fe(t)?t.D_():null;return i!=null?this._3t_[i]!=null?this._3t_[i]:i:null}i4t_(t){const i=this.map[t]!=null?this.map[t]:t;return i!=null?As(i):null}};return t}();const tK={save:function(t,i){const s=$T.Ai_().getType(t);s!=null&&i.Oi_(jT,s);const e=i.WE_(t);e!=null&&i.Oi_("cg_id",e);const A=Ce(t)?t.N_():t;for(const t in A)if(A.hasOwnProperty(t)&&t!=="cg_id"&&A[t]!==void 0){const s=A[t];if(typeof s=="object"&&s!==null){const e=i.WE_(s);e==null?i.zE_(t,s):i.Oi_(t,"#href("+e+")")}else typeof s!="function"&&i.Oi_(t,s)}i.commit()},load:function(t,i){let s=i!=null?i:null;if(s==null){const i=t.getValue(jT),e=t.Vw_();i!=null&&(s=e!=null&&$T.Ai_().getType(e)===i?e:$T.Ai_().i4t_(i));s==null&&(s={})}const e=Ce(s)?{}:s;t.Tw_((function(t,i){const A=i.getValue(),n=ZT(A);n==null?e[t]=A:i.Kw_(n)!=null?e[t]=i.Kw_(n):i.Yw_(n,(function(i){e[t]=i;Ce(s)&&s.dt_(e)}))}));Ce(s)&&s.dt_(e);const A=t.getValue("cg_id");A!=null&&t.Hw_(A,s);return s}};let iK=null;var sK=Ci(function(){var i;let s=i=class t extends Kr{constructor(){super();this.s4t_()}s4t_(){this.OE_("geotoolkit.widgets.BaseWidget",{save:function(t,i){i.Oi_("type",t.D_());i.zE_("data",t.getData({"no-data":!0}));i.commit()},load:function(t){const i=t.Kw_("#widget");if(i){const s=t.getValue("data");s!=null&&i.setData(s)}return i}});const t=$T.Ai_().t4t_();for(const i in t)t.hasOwnProperty(i)&&this.OE_(i,tK);this.OE_("default",tK)}static sx_(){iK==null&&(iK=new i);return iK}};s=i=t([_s("geotoolkit.widgets.templates.Registry")],s);return s}(),2,"eyJnZXREZWZhdWx0Ijoic3hfIn0g");bs({imports:[jU]});var eK=Ci(function(){let i=class t extends sI{constructor(t){const i=qi(t,{bounds:new mA(0,0,300,300)});i["children"]!==void 0&&delete i["children"];super(i);this.aq_(!0);this.jkt_=new lG(this,"compositeTool");this.y8_=null}e4t_(){this.y8_==null&&this.Gq_(this.y8_=new TQ({dynamic_layer:!0,name:"overlays",cssclass:"overlay"}));return this.y8_}A4t_(t){return this}n4t_(){return OA.Ai_()}h4t_(t){this.jkt_.add(t);return this}r4t_(t){this.jkt_.remove(t);return this}K3_(){return this.jkt_}o4t_(t){this.jkt_=t;return this}C5_(t){return t==null||t.length<1?null:this.jkt_.C5_(t)}d5_(t){return t==null?null:this.jkt_.d5_(t)}B5_(){return this.jkt_.B5_()}dispose(){if(!this.Df_()){this.jkt_.dispose();this.jkt_=null;super.dispose()}}l4t_(t,i){const s=undefined,e=new pw(i||sK.sx_()).l5_(t);e.Hw_("#widget",this);e.Uw_(this.D_(),"template")}u4t_(t){const i=undefined;return new pw(t||sK.sx_()).o5_("template",this)}getData(t){return{}}N_(){const t=super.N_();Ns(t,"children");return t}dt_(t){const i=Es(t);if(i==null)return this;delete i["children"];delete i["viewcache"];super.dt_(i);return this}};i=t([_s("geotoolkit.widgets.BaseWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPdmVybGF5TGF5ZXIiOiJlNHRfIiwiaW5pdGlhbGl6ZVRvb2xzIjoiQTR0XyIsImNvbm5lY3RUb29sIjoiaDR0XyIsImRpc2Nvbm5lY3RUb29sIjoicjR0XyIsImdldFRvb2wiOiJLM18iLCJzZXRUb29sIjoibzR0XyIsImdldFRvb2xCeU5hbWUiOiJDNV8iLCJnZXRUb29sQnlUeXBlIjoiZDVfIiwibGlzdFRvb2xzTmFtZXMiOiJCNV8iLCJsb2FkVGVtcGxhdGUiOiJsNHRfIiwic2F2ZVRlbXBsYXRlIjoidTR0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");var AK=Ci({EVt_:"onPositionChanged",id_:"onVisibilityChanged",a4t_:"onDropping",g4t_:"onDropped"},2,"eyJvblBvc2l0aW9uQ2hhbmdlZCI6IkVWdF8iLCJvblZpc2liaWxpdHlDaGFuZ2VkIjoiaWRfIiwib25Ecm9wcGluZyI6ImE0dF8iLCJvbkRyb3BwZWQiOiJnNHRfIn0g");const nK=new qa({font:"12px sans-serif"}),hK="#F1F1F1",rK={color:"#A8A8A8",pixelsnapmode:!1,width:2},oK={vertical:{width:35,height:100},horizontal:{width:100,height:35}},lK=3,uK={vertical:{left:10,top:3,right:10,bottom:3},horizontal:{left:4,top:10,right:4,bottom:10}},aK=5,gK=2;var cK=Ci(function(){let i=class t extends OS{constructor(t){t==null&&(t={});const i=t["orientation"]===fg.ux_,s=t["locale"]||Ig.sx_();(t=Pi(t,{name:"colorbar",layer:null,labelformat:new $g({locale:s,maximumfractiondigits:2}),padding:i?uK[fg.ux_]:uK[fg.ax_],size:i?oK[fg.ux_]:oK[fg.ax_],radius:5,orientation:fg.ax_,alignment:Pm.z_,linestyle:rK,fillstyle:hK,textstyle:nK,colorbar:null,textfillstyle:null},!0))["layer"]==null&&(t["layer"]=t["widget"]);super(t);this.c4t_=!1;this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.XFt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi,enabled:!1}]});this.I4t_=t["widget"];this.hx_=s;this.yL_=t["labelformat"];this.uy_=null;this.dVt_=null;t["padding"]=_l.Wi_(t["padding"]);t["size"]=xA.Wi_(t["size"]);this.UU_=t;this.f4t_=!1;this.C4t_()}setOptions(t){if(t==null)return this;t["name"]!==void 0&&this.HC_(t["name"]);t["enabled"]!==void 0&&this.Kv_(t["enabled"]);if(t.hasOwnProperty("locale")||t.hasOwnProperty("labelformat")){t["locale"]!==void 0&&(this.hx_=t["locale"]);t["labelformat"]!==void 0&&(this.yL_=t["labelformat"]);this.yL_!=null&&this.yL_.dt_({locale:this.hx_})}if(t["range"]!=null){const i=this.d4t_.JV_()["range"],s=t["range"]["min"]!=null?t["range"]["min"]:i["min"],e=t["range"]["max"]!=null?t["range"]["max"]:i["max"];if(i["min"]!==s||i["max"]!==e){this.d4t_.setOptions({range:{min:s,max:e}});this.B4t_.a_(this.yL_.format(s));this.w4t_.a_(this.yL_.format(e))}}if(t.hasOwnProperty("orientation")||t.hasOwnProperty("size")||t.hasOwnProperty("padding")){let i,s;const e=t.hasOwnProperty("orientation")&&t["orientation"]!==this.UU_["orientation"],A=(t["orientation"]!=null?t["orientation"]:this.UU_["orientation"])===fg.ax_,n=oK[A?fg.ax_:fg.ux_],h=uK[A?fg.ax_:fg.ux_];e===!0&&this.uy_!=null&&(this.uy_=new lA(this.uy_.getY(),this.uy_.getX()));if(t["size"]!==void 0){let s=t["size"];s instanceof xA||(s=e?qi(s,n):this.UU_["size"].dt_(s));i=xA.Wi_(s);t["size"]=i}else{i=e?xA.Wi_(n):this.UU_["size"];t["size"]=i}if(t["padding"]!==void 0){let i=t["padding"];i instanceof _l||typeof i=="string"||(i=e?qi(i,h):this.UU_["padding"].dt_(i));s=_l.Wi_(i);t["padding"]=s}else{s=e?_l.Wi_(h):this.UU_["padding"];t["padding"]=s}const r=A?i.Ie_()-s.we_()-s.Qe_():i.Ts_()-s.Ee_()-s.pe_();this.d4t_.setOptions({colorbox:{size:r},location:A?sv.sG_:sv.nG_});this.Q4t_(this.E4t_.getBounds().Me_())}t["colorprovider"]!==void 0&&this.UBt_(t["colorprovider"]);t["visible"]!==void 0&&(t["visible"]===!1?this.p4t_():this.m4t_());if(t["position"]!=null){let i;if(t["position"]instanceof lA)i=t["position"];else{const s=this.E4t_.getBounds().Me_().N_();i=lA.Wi_(Pi(t["position"],s))}this.Q4t_(i)}t["linestyle"]!==void 0&&this.USt_.rB_(t["linestyle"]);t["fillstyle"]!==void 0&&this.USt_.iQ_(t["fillstyle"]);if(t["textstyle"]!==void 0){const i=qa.Wi_(t["textstyle"]);this.B4t_.g_(i);this.w4t_.g_(i)}if(t["textfillstyle"]!==void 0){const i=il.BD_(t["textfillstyle"]);this.B4t_.iQ_(i);this.w4t_.iQ_(i)}this.UU_=Pi(t,this.UU_);this.y4t_();delete this.UU_["visible"];if(t["tickgenerator"]!==void 0){const i=this.B3t_();i!=null&&i.jZ_(t["tickgenerator"])}return this}JV_(){return{visible:this.E4t_.$C_(),layer:this.mgt_(),orientation:this.UU_["orientation"],padding:this.UU_["padding"].clone(),size:this.UU_["size"].clone(),position:this.E4t_.getBounds().Me_(),linestyle:this.USt_.gt_(),fillstyle:this.USt_.ct_(),textstyle:this.B4t_.FE_(),textfillstyle:this.B4t_.ct_()}}getBounds(){return this.E4t_.getBounds()}D4t_(){return this.E4t_}M4t_(){return this.d4t_}Q4t_(t){const i=xA.Wi_(this.UU_["size"]),s=_l.Wi_(this.UU_["padding"]),e=new mA(t.getX(),t.getY(),t.getX(),t.getY()),A=this.B4t_.Ts_(),n=this.w4t_.Ts_(),h=this.B4t_.Ie_(),r=this.w4t_.Ie_();let o,l;if(this.UU_["orientation"]===fg.ax_){o=Math.max(i.Ie_(),h+2*lK,r+2*lK);l=i.Ts_()-+s.Ee_()-+s.pe_()+A+n+4*lK}else{l=Math.max(i.Ts_(),A+2*lK,n+2*lK);o=i.Ie_()-+s.we_()-+s.Qe_()+h+r+4*lK}e.de_(o);e.Be_(l);this.E4t_.ht_(e);this.UU_!=null&&this.UU_.hasOwnProperty("position")&&(this.UU_["position"]=this.E4t_.getBounds().Me_());return this}C4t_(){const t=this.UU_,i=xA.Wi_(t["size"]),s=_l.Wi_(t["padding"]),e=t["orientation"]===fg.ax_,A=qa.Wi_(t["textstyle"]),n=il.BD_(t["textfillstyle"]);this.E4t_=(new sI).nf_(!1).aq_(!0).cq_(new zB).GY_([this.USt_=(new dp).qC_("floatingcolorbar-border").OX_(t["radius"]).ft_({left:0,top:0,right:0,bottom:0}).rB_(t["linestyle"]).iQ_(t["fillstyle"]),this.v4t_=(new sI).ft_({left:0,top:0,right:0,bottom:0}).cq_((new rw).f2_(XB.x1_).w2_($B.ne_).m2_(_B.K1_)).GY_([this.B4t_=new YC({sizeisindevicespace:!0,ispointingup:!0,textstyle:A}).iQ_(n),this.d4t_=new av({colorbox:{size:e?i.Ie_()-+s.we_()-+s.Qe_():i.Ts_()-+s.Ee_()-+s.pe_(),linestyle:null},location:e?sv.sG_:sv.nG_,axis:{size:0},namedcolors:{size:0,visible:!1},title:{visible:!1}}).gk_(new tI).Lq_(null).aq_(!0),this.w4t_=new YC({sizeisindevicespace:!0,ispointingup:!0,textstyle:A}).iQ_(n)])]);this.mgt_().GY_(this.E4t_);this.y4t_()}b4t_(){this.mgt_().removeChild(this.E4t_);this.mgt_().GY_(this.E4t_);return this}Pkt_(){super.Pkt_();if(this.isEnabled()===!1){this.isActive()&&this.stop();this.p4t_()}}N4t_(t){const i=t.Fkt_();if(this.E4t_!=null&&this.E4t_.$C_()&&this.E4t_.lt_().contains(i))return!0;const s=undefined,e=this.dFt_(t)?aK:gK,A=this.B3t_();if(A==null)return!1;const n=A.getParent();if(n==null||!n.$C_())return!1;const h=undefined;return n.if_().rn_(A.getBounds()).Le_(e).contains(i)}UBt_(t){this.d4t_.setOptions({colorprovider:t});if(this.E4t_.$C_()===!0){this.m4t_();this.setOptions(this.UU_)}return this}p4t_(){if(this.E4t_==null||this.E4t_.$C_()===!1)return this;this.E4t_.nf_(!1);this.notify(AK.id_,this);return this}m4t_(t){t==null&&(t=this.E4t_.if_().transformPoint(new lA(0,0)));const i=this.B3t_();if(i!=null&&this.B4t_.SG_()===""&&this.w4t_.SG_()===""){const t=i.JV_();t["range"]!==this.d4t_.JV_()["range"]&&this.d4t_.setOptions({range:t["range"]});this.B4t_.a_(this.yL_.format(t["range"]["min"]));this.w4t_.a_(this.yL_.format(t["range"]["max"]))}if(this.E4t_.$C_()===!0)return this;const s=this.mgt_().if_();if(t!=null){const i=s.uI_(t);this.Q4t_(i)}this.E4t_.nf_(!0);this.setOptions({orientation:this.JV_()["orientation"]});this.notify(AK.id_,this);return this}S4t_(t){this.uy_==null&&(this.uy_=this.E4t_.if_().uI_(t.Fkt_()));const i=this.E4t_.if_().uI_(t.Fkt_()),s=i.getX()-this.uy_.getX(),e=i.getY()-this.uy_.getY(),A=this.E4t_.getBounds().clone().translate(this.E4t_.ZY_()?-s:s,this.E4t_.jY_()?-e:e),n=this.mgt_().rt_();A.we_()<n.we_()&&A.setX(n.we_());A.Ee_()<n.Ee_()&&A.setY(n.Ee_());A.Qe_()>n.Qe_()&&A.setX(A.getX()-(A.Qe_()-n.Qe_()));A.pe_()>n.pe_()&&A.setY(A.getY()-(A.pe_()-n.pe_()));this.Q4t_(A.Me_());return this}XFt_(t){if(this.isEnabled()===!1)return;if(this.c4t_){this.c4t_=!1;if(this.N4t_(t)===!1)return;this.start(t)}if(this.isActive()===!1){if(this.N4t_(t)){BG.Yb_(t.getPlot(),{cursor:"grab"},this);this.f4t_=!0}else if(this.f4t_===!0){this.f4t_=!1;BG.Yb_(t.getPlot(),{cursor:null},this)}return}const i=t.Fkt_();let s=i.x-this.dVt_.x,e=i.y-this.dVt_.y;const A=this.mgt_().lt_();(i.x<A.we_()||i.x>A.Qe_())&&(s=0);(i.y<A.Ee_()||i.y>A.pe_())&&(e=0);this.dVt_=i.clone();if(s!==0||e!==0){this.S4t_(t);this.notify(AK.EVt_,this,t)}}zFt_(t){this.isEnabled()!==!1&&this.isActive()!==!0&&this.N4t_(t)!==!1&&(this.E4t_&&this.E4t_.$C_()?this.start(t):this.c4t_=!0)}Ct_(t){this.c4t_=!1;this.notify(AK.a4t_,this,t);if(this.isActive()!==!1){this.stop();this.XFt_(t);this.notify(AK.g4t_,this,t)}}start(t){super.start(t);BG.Yb_(this.E8_,{cursor:"grabbing"},this);OS.lock(t.getPlot(),this);this.pxt_(!0);this.E8_=t.getPlot();this.dVt_=t.Fkt_().clone();if(this.E4t_.$C_())this.uy_=this.E4t_.if_().aI_(this.dVt_);else{this.m4t_(this.dVt_);this.uy_=this.E4t_.rt_().getCenter();this.S4t_(t)}return this}stop(){super.stop();this.uy_=null;this.pxt_(!1);OS.unlock(this);BG.Yb_(this.E8_,{cursor:null},this);return this}pxt_(t){this.pFt_("pointermove",t,Mi);this.pFt_("pointerup",t,Mi);return this}B3t_(){return this.I4t_==null?null:this.UU_["colorbar"]||null}y4t_(){const t=this.UU_["orientation"]===fg.ax_,i=t?fg.ax_:fg.ux_,s=xA.Wi_(this.UU_["size"]),e=this.UU_["padding"]?this.UU_["padding"].N_():uK[i];this.v4t_.Iq_(e);const A=this.v4t_.bG_();if(!(A instanceof rw))return;const n=this.B3t_()!=null&&this.B3t_().JV_()["flip"]===!0;if(t){const t=this.B4t_.Ts_(),i=this.w4t_.Ts_();this.v4t_.pq_(!1).Eq_(n);this.B4t_.Ub_({[n?"bottom":"top"]:lK}).ft_({width:"100%",height:t});this.w4t_.Ub_({[n?"bottom":"top"]:lK}).ft_({width:"100%",height:i});A.f2_(XB.x1_)}else{const t=this.B4t_.Ie_(),i=this.w4t_.Ie_();this.v4t_.pq_(n).Eq_(!1);this.B4t_.Ub_({right:lK}).ft_({height:"100%",width:t});this.w4t_.Ub_({left:lK}).ft_({height:"100%",width:i});A.f2_(XB.Row)}this.d4t_.ft_({width:s.Ie_()-+e["left"]-+e["right"],height:s.Ts_()-+e["top"]-+e["bottom"]})}};i=t([_s("geotoolkit.widgets.tools.FloatingColorBarTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwib25FbmFibGVkU3RhdGVDaGFuZ2VkIjoiUGt0XyIsImhpZGVGbG9hdGluZ0NvbG9yQmFyIjoicDR0XyIsInNob3dGbG9hdGluZ0NvbG9yQmFyIjoibTR0XyJ9fX0g");var KH=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.rei_=i;this.oei_=s}lei_(){return this.rei_}uei_(){return this.oei_}};i=t([_s("geotoolkit.widget.tools.LegendToolEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGcm9tQW5ub3RhdGlvbiI6ImxlaV8iLCJnZXRUb0Fubm90YXRpb24iOiJ1ZWlfIn19fSAg");var HH=Ci({aei_:"onAnnotationChanged",gei_:"onMoveStart",cei_:"onMoveEnd",e4_:"onResize"},2,"eyJvbkFubm90YXRpb25DaGFuZ2VkIjoiYWVpXyIsIm9uTW92ZVN0YXJ0IjoiZ2VpXyIsIm9uTW92ZUVuZCI6ImNlaV8iLCJvblJlc2l6ZSI6ImU0XyJ9");var qH=Ci(function(){let i=class t extends OS{constructor(t){const i=qi(t,{widget:t["widget"],group:t["group"],layer:t["layer"],padding:t["padding"],name:"AbstractLegendTool"}),s=undefined;super({name:i["name"],layer:i["layer"]});this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),pointerup:{callback:this.Ct_.bind(this),object:Mi}});this.Us_=i;this.I4t_=this.Us_["widget"];this.HU_=this.Us_["group"];this.Iei_=(t,i)=>{i.$C_()===!1&&this.reset()};this.HU_.on(rh.cC_,this.Iei_);this.wX_=typeof this.Us_["padding"]=="number"?this.Us_["padding"]:10;this.fei_=ha.ne_;this.Cei_=ha.ne_;this.dei_={west:new sI,east:new sI,north:new sI,south:new sI};this.OSt_=bC.IO_();this.sFt_=5;this.iFt_=2;this.Bei_={east:this.I4t_.v4_(ha.AG_).getBounds().Ie_(),west:this.I4t_.v4_(ha.sG_).getBounds().Ie_(),north:this.I4t_.v4_(ha.eG_).getBounds().Ts_(),south:this.I4t_.v4_(ha.nG_).getBounds().Ts_()};this.wei_=!1;this.Qei_=new SD(t);this.Eei_=new RD(null,this.Jgt_);this.Eei_.dI_(this.Jgt_.sd_());this.Eei_.register(this.HU_.D_(),this.Qei_);this.pei_=null;this.setOptions(this.Us_)}mei_(t){this.I4t_=t;return this}yei_(){return this.I4t_}_Wt_(t){this.HU_=t;return this}ZWt_(){return this.HU_}Pgt_(t){this.Jgt_=t;this.Eei_.Pgt_(this.Jgt_);this.Eei_.dI_(this.Jgt_.sd_());return this}setOptions(t){this.Us_=Pi(t,this.Us_,!0);t["layer"]!==void 0&&this.Pgt_(t["layer"]);this.Qei_.setOptions({box:this.Us_["box"],handlestyle:this.Us_["handlestyle"]});return this}JV_(){return this.Us_}reset(){if(this.pei_){this.pei_.setPosition(null);this.pei_=null}this.Eei_.Ogt_(null);this.Qei_.reset()}setActive(t){t?this.Eei_.Ogt_(this.pei_):this.Eei_.Ogt_(null);return super.setActive(t)}Kv_(t){t||this.Eei_.Ogt_(null);return super.Kv_(t)}Dei_(t){return super.setActive(t)}Ngt_(){this.Eei_!=null&&this.Eei_.Wgt_()!=null&&this.Eei_.Wgt_().Ngt_();return this}zFt_(t){this.pei_=null;this.Eei_.Ogt_(null)}XFt_(t){this.pei_.e7_().td_();BG.Yb_(t.getPlot(),{cursor:"move"},this);this.Dei_(!0);t.stopPropagation(!0,!0)}Ct_(t){if(this.fei_===ha.ne_&&this.wei_&&this.Cei_===ha.ne_){this.wei_=!1;this.notify(HH.cei_,this,new KH(t,null,null))}t.stopPropagation(!1,!0);this.pei_.Mgt_(null);this.pei_.setPosition(null);this.pei_=null;BG.Yb_(t.getPlot(),{cursor:null},this);this.Dei_(!1)}Mei_(t){let i,s;const e={},A=this.pei_.e7_(),n=ie(A)?A.getBounds().clone():new mA,h=this.I4t_.getBounds(),r=this.I4t_.LM_().getParent().getBounds().clone();if(this.fei_===ha.eG_){i=this.I4t_.v4_(this.fei_);if(n.Ee_()>h.Ee_()){if(r.Ee_()-n.Ee_()>this.Bei_[this.fei_]){e[this.fei_]=r.Ee_()-n.Ee_()+this.wX_;this.dei_[this.fei_].dq_(e[this.fei_]-this.Bei_[this.fei_])}else{e[this.fei_]=this.Bei_[this.fei_];this.dei_[this.fei_].dq_(0)}s=i.getBounds().Ts_()-e[this.fei_];ee(A)&&A.ht_(n.setY(n.getY()-s));this.pei_.Ngt_();this.I4t_.vei_(e)}else{ee(A)&&A.ht_(n.setY(h.Ee_()+this.wX_));this.pei_.Ngt_()}this.notify(HH.cei_,this,new KH(t,null,this.fei_))}if(this.fei_===ha.nG_){i=this.I4t_.v4_(this.fei_);if(n.pe_()<h.pe_()){if(n.pe_()-r.pe_()>this.Bei_[this.fei_]){e[this.fei_]=n.pe_()-r.pe_()+this.wX_;this.dei_[this.fei_].dq_(e[this.fei_]-this.Bei_[this.fei_])}else{e[this.fei_]=this.Bei_[this.fei_];this.dei_[this.fei_].dq_(0)}s=i.getBounds().Ts_()-e[this.fei_];ee(A)&&A.ht_(n.setY(n.getY()+s));this.pei_.Ngt_();this.I4t_.vei_(e)}else{ee(A)&&A.ht_(n.setY(h.pe_()-n.Ts_()-this.wX_));this.pei_.Ngt_()}this.notify(HH.cei_,this,new KH(t,null,this.fei_))}}bei_(t){let i,s;const e={},A=this.pei_.e7_(),n=ie(A)?A.getBounds().clone():new mA,h=this.I4t_.getBounds(),r=this.I4t_.LM_().getParent().getBounds().clone();if(this.Cei_===ha.sG_){i=this.I4t_.v4_(this.Cei_);if(n.we_()>h.we_()){if(r.we_()-n.we_()>this.Bei_[this.Cei_]){e[this.Cei_]=r.we_()-n.we_()+this.wX_;this.dei_[this.Cei_].Cq_(e[this.Cei_]-this.Bei_[this.Cei_])}else{e[this.Cei_]=this.Bei_[this.Cei_];this.dei_[this.Cei_].Cq_(0)}s=i.getBounds().Ie_()-e[this.Cei_];ee(A)&&A.ht_(n.setX(n.getX()-s));this.pei_.Ngt_();this.I4t_.vei_(e)}else{ee(A)&&A.ht_(n.setX(h.we_()+this.wX_));this.pei_.Ngt_()}this.notify(HH.cei_,this,new KH(t,null,this.Cei_))}if(this.Cei_===ha.AG_){i=this.I4t_.v4_(this.Cei_);if(n.Qe_()<h.Qe_()){if(n.Qe_()-r.Qe_()>this.Bei_[this.Cei_]){e[this.Cei_]=n.Qe_()-r.Qe_()+this.wX_;this.dei_[this.Cei_].Cq_(e[this.Cei_]-this.Bei_[this.Cei_])}else{e[this.Cei_]=this.Bei_[this.Cei_];this.dei_[this.Cei_].Cq_(0)}s=i.getBounds().Ie_()-e[this.Cei_];ee(A)&&A.ht_(n.setX(n.getX()+s));this.pei_.Ngt_();this.I4t_.vei_(e)}else{ee(A)&&A.ht_(n.setX(h.Qe_()-n.Ie_()-this.wX_));this.pei_.Ngt_()}this.notify(HH.cei_,this,new KH(t,null,this.Cei_))}}Nei_(){this.I4t_.vei_(this.Bei_);return this}dispose(){if(!this.Df_()){this.HU_.off(rh.cC_,this.Iei_);super.dispose()}}};i=t([_s("geotoolkit.widgets.tools.AbstractLegendTool")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRFbmFibGVkIjoiS3ZfIn19fSAg");var JH=function(){let i=class t extends qH{constructor(t){super(t);this.Sei_=!1;this.Gei_=()=>{this.reset()};this.I4t_.on(rh.rC_,this.Gei_)}dispose(){if(!this.Df_()){this.I4t_.off(rh.rC_,this.Gei_);super.dispose()}}zFt_(t){const i=t.PP_(),s=undefined,e=this.dFt_(t)?this.sFt_:this.iFt_;let A,n=null,h=this.bFt_(i,t),r=this.OSt_.select(i,h.x,h.y,e).filter(Ih);r=r==null?null:r.filter((t=>t===this.HU_));h=this.bFt_(this.Jgt_,t);if(r&&r.length>0)for(A=r.length-1;A>=0;A--){n=this.Eei_.fat_(r[A]);if(n){n.ygt_(r[A]);n.setPosition(h.x,h.y);this.Eei_.Ogt_(n);this.pei_=n;t.stopPropagation(!1,!0);return}}super.zFt_(t)}XFt_(t){if(!this.pei_)return;const i=this.bFt_(this.Jgt_,t);if(this.pei_.getPosition().x!==i.x||this.pei_.getPosition().y!==i.y){this.pei_.move(i.x,i.y);this.wei_=!0}const s=this.pei_.e7_();let e=ie(s)?s.getBounds().clone():new mA;const A=this.I4t_.LM_().getParent().getBounds(),n=this.bFt_(this.mgt_(),t),h=e.Ie_(),r=e.Ts_();e=new mA(n.getX(),n.getY(),e.ye_(),e.De_());const o={};let l,u,a;if(!this.Sei_){this.fei_!==ha.ne_&&(this.Bei_[this.fei_]=this.I4t_.v4_(this.fei_).getBounds().Ts_()-this.dei_[this.fei_].cG_());this.Cei_!==ha.ne_&&(this.Bei_[this.Cei_]=this.I4t_.v4_(this.Cei_).getBounds().Ie_()-this.dei_[this.Cei_].gG_())}if(!this.Sei_&&this.pei_.vgt_()instanceof BD){if(this.fei_!==ha.ne_){this.dei_[this.fei_].dq_(r+this.wX_);o[this.fei_]=this.dei_[this.fei_].cG_()+this.Bei_[this.fei_];this.I4t_.vei_(o);this.notify(HH.gei_,this,new KH(t,this.fei_,null));this.Sei_=!0}if(this.Cei_!==ha.ne_){this.dei_[this.Cei_].Cq_(h+this.wX_);o[this.Cei_]=this.dei_[this.Cei_].gG_()+this.Bei_[this.Cei_];this.I4t_.vei_(o);this.notify(HH.gei_,this,new KH(t,this.Cei_,null));this.Sei_=!0}this.Sei_||this.notify(HH.gei_,this,new KH(t,null,null))}if(this.fei_!==ha.ne_&&(e.Ee_()<A.pe_()&&e.Ee_()>A.Ee_()||e.pe_()<A.pe_()&&e.pe_()>A.Ee_())){l=this.I4t_.v4_(this.fei_);l.bG_().remove(this.dei_[this.fei_]);l.removeChild(this.dei_[this.fei_]);o[this.fei_]=this.Bei_[this.fei_];this.I4t_.vei_(o);this.notify(HH.aei_,this,new KH(t,this.fei_,ha.ne_));this.fei_=ha.ne_;u=!0}if(this.Cei_!==ha.ne_&&(e.Qe_()<A.Qe_()&&e.Qe_()>A.we_()||e.we_()<A.Qe_()&&e.we_()>A.we_())){l=this.I4t_.v4_(this.Cei_);l.bG_().remove(this.dei_[this.Cei_]);l.removeChild(this.dei_[this.Cei_]);o[this.Cei_]=this.Bei_[this.Cei_];this.I4t_.vei_(o);this.notify(HH.aei_,this,new KH(t,this.Cei_,ha.ne_));this.Cei_=ha.ne_;a=!0}if(!u&&(e.Ee_()<A.Ee_()||e.pe_()>A.pe_())&&this.fei_===ha.ne_){e.Ee_()<A.Ee_()?this.fei_=ha.eG_:this.fei_=ha.nG_;l=this.I4t_.v4_(this.fei_);this.dei_[this.fei_].dq_(r+this.wX_);o[this.fei_]=l.getBounds().Ts_()+this.dei_[this.fei_].cG_();this.fei_===ha.eG_?l.bG_().g1_(0,this.dei_[this.fei_]):l.bG_().add(this.dei_[this.fei_]);l.GY_(this.dei_[this.fei_]);this.I4t_.vei_(o);this.notify(HH.aei_,this,new KH(t,ha.ne_,this.fei_))}if(!a&&(e.Qe_()>A.Qe_()||e.we_()<A.we_())&&this.Cei_===ha.ne_){e.Qe_()>A.Qe_()?this.Cei_=ha.AG_:this.Cei_=ha.sG_;l=this.I4t_.v4_(this.Cei_);this.dei_[this.Cei_].Cq_(h+this.wX_);o[this.Cei_]=l.getBounds().Ie_()+this.dei_[this.Cei_].gG_();this.Cei_===ha.sG_?l.bG_().g1_(0,this.dei_[this.Cei_]):l.bG_().add(this.dei_[this.Cei_]);l.GY_(this.dei_[this.Cei_]);this.I4t_.vei_(o);this.notify(HH.aei_,this,new KH(t,ha.ne_,this.Cei_))}this.Cei_===ha.ne_&&this.fei_===ha.ne_&&(this.Sei_=!1);super.XFt_(t)}Ct_(t){if(this.pei_){this.fei_!==ha.ne_&&this.Mei_(t);this.Cei_!==ha.ne_&&this.bei_(t);this.Sei_=!1;super.Ct_(t)}}reset(){this.Sei_=!1;super.reset()}};i=t([_s("geotoolkit.widgets.tools.LegendMoveTool")],i);return i}();var PH=function(){let i=class t extends qH{constructor(t){super(t);this.Rei_=!1;this.kei_=this.HU_.getBounds()}zFt_(t){const i=undefined,s=this.dFt_(t)?this.sFt_:this.iFt_;let e,A=null;const n=this.bFt_(this.Jgt_,t),h=this.OSt_.select(this.Jgt_,n.x,n.y,s);if(h&&h.length>0)for(e=h.length-1;e>=1;e--){const i=h[e];if(!(i instanceof BD)&&typeof i.fat_=="function"){A=i.fat_();i.isActive()||t.stopPropagation(!1,!0);A.Mgt_(i);A.setPosition(n.x,n.y);this.pei_=A;return}}super.zFt_(t)}XFt_(t){if(!this.pei_)return;const i=this.bFt_(this.Jgt_,t);if(this.pei_.getPosition().x!==i.x||this.pei_.getPosition().y!==i.y){this.pei_.move(i.x,i.y);this.wei_=!0}if(!this.Rei_){this.fei_!==ha.ne_&&(this.Bei_[this.fei_]=this.I4t_.v4_(this.fei_).getBounds().Ts_()-this.dei_[this.fei_].cG_());this.Cei_!==ha.ne_&&(this.Bei_[this.Cei_]=this.I4t_.v4_(this.Cei_).getBounds().Ie_()-this.dei_[this.Cei_].gG_())}this.Rei_=!0;this.notify(HH.e4_,this,new KH(t));super.XFt_(t)}Ct_(t){if(!this.pei_)return;const i=this.pei_.e7_(),s=ie(i)?i.getBounds().clone():new mA;let e,A;const n={};if(this.fei_!==ha.ne_){if(this.Rei_){e=this.I4t_.v4_(this.fei_);A=s.Ts_()-this.dei_[this.fei_].cG_();this.dei_[this.fei_].dq_(s.Ts_()+this.wX_);n[this.fei_]=e.getBounds().Ts_()+A;this.I4t_.vei_(n);if(this.fei_===ha.eG_&&s.getY()!==this.kei_.getY()){ee(i)&&i.ht_(s.setY(s.getY()+A));this.pei_.Ngt_()}if(this.fei_===ha.nG_&&s.pe_()!==this.kei_.pe_()){ee(i)&&i.ht_(s.setY(s.getY()-A));this.pei_.Ngt_()}}this.Mei_(t)}if(this.Cei_!==ha.ne_){if(this.Rei_){e=this.I4t_.v4_(this.Cei_);A=s.Ie_()-this.dei_[this.Cei_].gG_();this.dei_[this.Cei_].Cq_(s.Ie_()+this.wX_);n[this.Cei_]=e.getBounds().Ie_()+A;this.I4t_.vei_(n);if(this.Cei_===ha.AG_&&s.Qe_()!==this.kei_.Qe_()){ee(i)&&i.ht_(s.setX(s.getX()-A));this.pei_.Ngt_()}if(this.Cei_===ha.sG_&&s.we_()!==this.kei_.we_()){ee(i)&&i.ht_(s.setX(s.getX()+A));this.pei_.Ngt_()}}this.bei_(t)}this.Rei_=!1;this.kei_=ie(i)?i.getBounds().clone():new mA;super.Ct_(t)}reset(){this.Rei_=!1;super.reset()}};i=t([_s("geotoolkit.widgets.tools.LegendResizeTool")],i);return i}();function VH(t){return Object.keys(t).filter((t=>Number.isNaN(+t)))}var OH=Ci(function(){let i=class t extends lG{constructor(t){const i=qi(t,{widget:t["widget"],group:t["group"],layer:t["layer"],padding:t["padding"],name:"LegendTool"}),s=undefined;super({name:i["name"],layer:i["layer"]});this.Fei_=new JH(i).HC_("legend-move");this.xei_=new PH(i).HC_("legend-resize");this.add(this.xei_);this.add(this.Fei_);for(const t of VH(HH)){this.Fei_.on(HH[t],((i,s,e)=>this.notify(HH[t],this,e)));this.xei_.on(HH[t],((i,s,e)=>this.notify(HH[t],this,e)))}this.Us_=i;this.setOptions(this.Us_)}setOptions(t){this.Us_=Pi(t,this.Us_,!0);this.Fei_.setOptions(t).HC_("legend-move");this.xei_.setOptions(t).HC_("legend-resize");return this}JV_(){return this.Us_}setActive(t){this.Fei_.setActive(t);this.xei_.setActive(t);return super.setActive(t)}Kv_(t){this.Fei_.Kv_(t);this.xei_.Kv_(t);return super.Kv_(t)}Ngt_(){this.Fei_.Ngt_();this.xei_.Ngt_();return this}Nei_(){this.Fei_.Nei_();return this}mei_(t){this.Fei_.mei_(t);this.xei_.mei_(t);return this}_Wt_(t){this.Fei_._Wt_(t);this.xei_._Wt_(t);return this}reset(){this.Fei_.reset();this.xei_.reset()}};i=t([_s("geotoolkit.widgets.tools.LegendTool")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoiSlZfIiwic2V0RW5hYmxlZCI6Ikt2XyIsInVwZGF0ZUhhbmRsZXMiOiJOZ3RfIiwicmVzZXRBbm5vdGF0aW9uU2l6ZSI6Ik5laV8ifX19");var WH=Ci({Lei_:"ModelVisibleLimitsChanged"},2,"eyJNb2RlbFZpc2libGVMaW1pdHNDaGFuZ2VkIjoiTGVpXyJ9");const zH="#757575",XH=function(t,i,s){let e=null,A=null;for(let n=0;n<i.length;n++){e=i[n];A=t.v4_(e);s["constraint"]!==void 0?A.aq_(!0).ft_(s):A.ft_(s)}},jH=function(t,i){const s=t.v4_(i);if(s)return s.NS_()&&s.NS_().HS_()===ea.LS_?"auto":s.gG_()},ZH=function(t,i){const s=t.v4_(i);if(s)return s.NS_()&&s.NS_().HS_()===ea.US_?"auto":s.cG_()};var _H=Ci(function(){let i=class t extends eK{constructor(t){super(t=qi(t,{fillstyle:"white"}));this.USt_=new Sc;this.s3t_=null;this.Uei_=null;this.Yei_=null;this.RP_=null;this.Tei_=null;this.Kei_=null;this.GY_(this.C4t_(t));this.Hei_=null;this.qei_(t["tools"]);this.A4t_(t);this.Jei_(t["tools"]);this.iQ_(t["fillstyle"]);this.Pei_()}C4t_(t){t=qi(t,{model:new sI,annotationssizes:{}},!0);this.T4_=t["model"];const i=new hl(zH),s=hl.Wi_(t["border"])||i;this.LM_().Gq_([this.Jgt_=new TQ({dynamic_layer:!0,id:"manipulator_layer",name:"manipulator"}),this.e4t_()]);this.s3t_=new rQ(t).JC_("annotated_node").ft_({left:0,top:0,right:0,bottom:0}).oN_(new jQ);this.e4t_().GY_(this.USt_.NT_(wc.wT_).rB_(s.qD_({x:!0,y:!0})));t["border"]===null&&this.USt_.rB_(null);this.f3t_().W4_();this.vei_(t["annotationssizes"]);const e=(new sI).JC_(t["applicationid"]).aq_(!0).cq_(new zB).GY_(this.f3t_());this.f3t_().z4_();return e}Vei_(){return this.Yei_}Oei_(){return this.Uei_}f3t_(){return this.s3t_}Wei_(t,i){if(this.f3t_()!=null){const s=this.f3t_().v4_(t),e=s&&s.bG_();if(e instanceof xB){let t=-1,s=0;e.IN_().forEach((e=>{e===i&&(t=s);s++}));if(t!==-1&&t!==s-1){e.remove(i);e.add(i)}}}}zei_(t){if(this.f3t_()!=null){this.f3t_()._Y_(t);this.Pei_()}}ht_(t){const i=this.getBounds();if(i!=null&&i.Ce_(t,NA.Je_))return this;super.ht_(t);const s=this.getBounds();if(i!=null&&s!=null&&i.Ie_()===s.Ie_()&&i.Ts_()===s.Ts_())return this;this.Xei_();this.Pei_();return this}Xei_(){this.Wei_(ha.nG_,this.Yei_);this.Wei_(ha.AG_,this.Uei_);this.DG_();return this}J4_(t){this.f3t_().J4_(t);this.Pei_();return this}jei_(t,i){const s=this.C5_("panning");s instanceof sG&&s.Cxt_();const e=i.D0t_();this.O4_(e.x,e.y,e["point"].x,e["point"].y)}Zei_(t,i){const s=this.C5_("zoom");s instanceof IY&&s.Cxt_();const e=i.oc_();this.P4_(e.x,e.y)}A4t_(t){this._ei_=!0;const i=this.mgt_();this.$ei_=new cF(i);this.s3t_.on(sQ.w4_,(()=>{const t=this.C5_("cross-hair"),i=this.C5_("panning");t instanceof cF&&t.isEnabled()&&(i==null||i.isActive()===!1)&&t.lOt_()}));this.oUt_=(new sG).Kv_(!0).on(jS.VFt_,((t,i,s)=>{const e=s.Dkt_();s.Lkt_()&&s.Lkt_().ctrlKey&&(e==="wheel"||e==="mousewheel")||this.Zei_(i,s)}));this.tAi_=new IY({layer:i,mode:nY.XY}).Kv_(!0).on(rY.v0t_,((t,i,s)=>{if(s.ot_()){this._Y_(s.ot_());return}const e=s.Dkt_();(!s.Lkt_()||s.Lkt_().ctrlKey||e!=="wheel"&&e!=="mousewheel")&&this.jei_(i,s)}));this.JDt_=new MF(i).Kv_(!1).on(xS.Jkt_,((t,i)=>{const s=i.isEnabled()&&i.EOt_()===fk.Xqt_;this.C5_("panning")&&this.C5_("panning").Kv_(!s);this.C5_("zoom")&&this.C5_("zoom").Kv_(!s);i.isEnabled()&&this.C5_("rubberband")&&this.C5_("rubberband").Kv_(!1)}))._Ot_((function(t){return t})).$qt_(fk.Xqt_);this.iAi_=new gU(i).Kv_(!1).on(xS.Jkt_,((t,i)=>{if(i.isEnabled()){this.Hei_==null&&this.sAi_();this.C5_("panning")&&this.C5_("panning").Kv_(!1);this.C5_("pick")&&this.C5_("pick").Kv_(!1);this.C5_("zoom")&&this.C5_("zoom").Kv_(!1)}else{if(this.Hei_!=null){this.C5_("pick")&&this.C5_("pick").Kv_(this.Hei_.selection);this.Hei_=null}this.C5_("panning")&&this.C5_("panning").Kv_(!0);this.C5_("zoom")&&this.C5_("zoom").Kv_(!0)}})).on(rU.jZt_,((t,i,s)=>{const e=s.getArea();this.f3t_()._Y_(e);this.Pei_()}));this.eAi_=this.AAi_();this.h4t_([new lG(this).add([this.nAi_=new lG(i,"manipulatorTools").add([this.$ei_,new lG(this.e4t_()).HC_("overlay"),this.iAi_,this.JDt_,this.oUt_]),this.tAi_,this.eAi_])]);return this}AAi_(){return new cK({widget:this,layer:this}).Kv_(!1).on(AK.EVt_,((t,i,s)=>{let e;const A=this.if_().rn_(i.getBounds());let n=this.v4_(ha.ne_).getBounds();n=this.if_().rn_(n);const h=i.B3t_();n.Le_(-2);if(n.Fe_(A)){if(h!=null){h.nf_(!1);this.wq_()}}else{if(h!=null&&h.$C_())return;e=A.Qe_()>=n.Qe_()?ha.AG_:A.Ee_()<=n.Ee_()?ha.eG_:A.pe_()>=n.pe_()?ha.nG_:ha.sG_;e===ha.sG_||e===ha.AG_?i.setOptions({orientation:fg.ax_}).S4t_(s):i.setOptions({orientation:fg.ux_}).S4t_(s);if(h==null)return;const t=h.tQt_();if(n.Fe_(A)){if(t!==e){i.setOptions({orientation:t===ha.sG_||t===ha.AG_?fg.ax_:fg.ux_});i.S4t_(s)}}else{if(t!==e){this.f3t_().removeItem(h,t);e===ha.sG_?this.f3t_().H4_(0,h,e):this.f3t_().K4_(h,e);h.setOptions({location:e})}h.nf_(!0);this.wq_()}}})).on(xS.Jkt_,((t,i)=>{if(i.isActive())this.$ei_.setPosition(null);else{const t=i.B3t_();t&&t.$C_()&&i.p4t_()}}))}bgt_(){}_Y_(t){this.hAi_(t);return this}P4_(t,i){this.f3t_().P4_(t,i);this.Pei_();return this}O4_(t,i,s,e){this.f3t_().O4_(t,i,s,e);this.Pei_();return this}rAi_(t){const i=this.f3t_().LM_().rt_();if(i==null||i.Ce_(t,NA.Je_)===!1){this.f3t_().LM_().Lq_(t);this.Pei_()}return this}oAi_(){return this.f3t_()!=null&&this.f3t_().LM_()!=null?this.f3t_().LM_().rt_():null}lAi_(t){const i=this.LM_();if(!i)return null;const s=i.getParent(),e=i.rt_();let A=null;if(s instanceof Ic&&s.rt_()!=null){const t=i.if_();A=t==null?new mA(s.lt_()):t.gI_(s.lt_())}if(e==null||A==null)return e;t||A.intersect(e);return A}hAi_(t){this.f3t_()._Y_(t);this.Pei_();return this}Pei_(){const t=this.LM_().rt_(),i=this.LM_().ot_();this.Yei_&&this.Yei_.Lq_(t,i,this.LM_().ZY_());this.Uei_&&this.Uei_.Lq_(t,i,this.LM_().jY_());this.bgt_();this.notify(WH.Lei_,this,i.clone());return this}vei_(t){if(t==null)return this;const i=ha;let s=!1;if(t["west"]!=null){XH(this.f3t_(),[i.sG_,i.hG_,i.lG_],{constraint:t["west"]==="auto"?ea.LS_:void 0,width:t["west"]==="auto"?void 0:t["west"]});s=!0}if(t["east"]!=null){XH(this.f3t_(),[i.AG_,i.rG_,i.oG_],{constraint:t["east"]==="auto"?ea.LS_:void 0,width:t["east"]==="auto"?void 0:t["east"]});s=!0}if(t["north"]!=null){XH(this.f3t_(),[i.eG_,i.rG_,i.hG_],{constraint:t["north"]==="auto"?ea.US_:void 0,height:t["north"]==="auto"?void 0:t["north"]});s=!0}if(t["south"]!=null){XH(this.f3t_(),[i.nG_,i.oG_,i.lG_],{constraint:t["south"]==="auto"?ea.US_:void 0,height:t["south"]==="auto"?void 0:t["south"]});s=!0}if(s===!0){this.f3t_().wq_();this.f3t_().G4_({west:{size:t["west"]==="auto"?void 0:t["west"]},east:{size:t["east"]==="auto"?void 0:t["east"]},north:{size:t["north"]==="auto"?void 0:t["north"]},south:{size:t["south"]==="auto"?void 0:t["south"]}})}this.td_();return this}uAi_(t){const i={west:jH(this.f3t_(),ha.sG_),east:jH(this.f3t_(),ha.AG_),north:ZH(this.f3t_(),ha.eG_),south:ZH(this.f3t_(),ha.nG_)};return t?i[t]:i}G4_(t){t&&this.f3t_().G4_(t)&&this.Xei_();return this}aAi_(t,i){this.gAi_(t)!=null&&this.cAi_(t);i["location"]=i["location"]?i["location"]:t;rQ.j4_(this.f3t_(),i)}mV_(t){ki("getTitle(location) is deprecated since 4.0 use getTitleShape() for getting shape");return this.gAi_(t)}gAi_(t){const i=this.v4_(t);for(let t=0;t<i.qY_();t++){const s=i.HY_(t);if(s instanceof Ic){const t=s.HY_(0);if(t instanceof YC)return t}}return null}IAi_(t,i){const s=this.gAi_(t);s&&s.dt_(i);return this}cAi_(t){const i=this.gAi_(t);this.f3t_().removeItem(i.getParent(),t)}fAi_(t,i,s,e){let A;if(i instanceof nd){const t=i.getParent();t instanceof Ic&&this.f3t_().removeItem(t,s)}if(i instanceof nd){A=new sI;A.aq_(!0);A.GY_(i);i.ht_(A.rt_());t==null?this.f3t_().K4_(A,s):this.f3t_().H4_(t,A,s)}else{const e=qi(i,{location:s,connect:!1}),n=rQ.X4_(this.f3t_(),e,t);(i=n["axis"]).dt_(e);A=n["group"]}e&&this.f3t_().connect(i,e);return{axis:i,group:A}}CAi_(t,i,s){const e=this.v4_(i);return this.fAi_(e.qY_(),t,i,s)}dAi_(t){const i=t.getParent(),s=i.getParent();if(s===this.s3t_){if(!(i instanceof sI))return;i.removeChild(t);const s=i.bG_();s instanceof xB&&s.remove(t)}else{if(!(s instanceof sI))return;const t=s.bG_();t instanceof xB&&t.remove(i);s.removeChild(i)}this.f3t_().vn_();this.f3t_().disconnect(t)}connect(t,i,s,e){this.f3t_().connect(t,i,s,e);this.f3t_().y4_();return this}disconnect(t){this.f3t_().disconnect(t);return this}BAi_(){this.O4_(5/4,5/4);return this}wAi_(){this.O4_(4/5,4/5);return this}LM_(){return this.T4_}QAi_(){this.f3t_()._Y_(this.LM_().rt_());this.Pei_();return this}pan(t,i){this.P4_(t,i);return this}oN_(t){this.f3t_().oN_(t);return this}lN_(){return this.f3t_().lN_()}v4_(t){return this.f3t_().v4_(t)}mgt_(){return this.Jgt_}sei_(t){const i={top:.5,bottom:.5,left:1,right:1,units:"in",scaling:qI.jP_,keepaspectratio:!0,continuous:!1},s={save:!1,output:"PDF Output",printsettings:{},streamcompression:!0},e={mode:IK.R4t_,quality:1,speed:fK.k4t_},A=qi(t||{},s,!0);A["printsettings"]=qi(A["printsettings"],i,!0);A["imagecompression"]=qi(A["imagecompression"],e,!0);A["scale"]||(A["scale"]={x:Math.abs(this.f3t_().LM_().if_().BI_()),y:Math.abs(this.f3t_().LM_().if_().sI_())});if(A["printsettings"]["paperformat"]==null){const t=OA.Ai_().gn_("px"),i=sf.Ai_().BV_("Letter",t,VI.aV_);A["printsettings"]["paperformat"]=i}this.Kei_={};A["modellimits"]&&this.TP_(A["modellimits"]);this.EAi_(A["scale"]);this.DP_();const n=this.XP_(A),h=new cQ(n,A["header"],A["footer"],!0),r=new TH;let o;o=ys(A["pdfstream"],Qy)?A["pdfstream"]:new by;if(Array.isArray(A["embededfonts"])){const t=undefined;A["embededfonts"].forEach((t=>{t=qi(t,{},!0);r.ysi_(t["subtype"],t["fontname"],t["fontweight"],t["fontstyle"],t["fontbase64encodedfile"],t["encoding"])}))}A["imagecompression"]&&r.Ssi_(A["imagecompression"]["mode"],A["imagecompression"]["quality"],A["imagecompression"]["speed"]);r.Nsi_(A["streamcompression"]);return r.hei_(h,A["printsettings"],o,A["progress"]).then((t=>{this.yP_();t.save(A["output"],A["save"]);return t})).catch((t=>{this.yP_();throw t}))}KP_(){return this.RP_?this.RP_:this.f3t_().LM_().rt_()}TP_(t){this.RP_=t;return this}pAi_(){return this.Tei_}EAi_(t){this.Tei_=t;return this}mAi_(){return this.Kei_}DP_(){this.Kei_=this.Kei_||{};const t=[];this.Kei_.yAi_=this._C_();this.rd_(!1);ur(this).Gw_((t=>t!=null&&(t.dn_()!=null&&t.dn_().indexOf("manipulator")!==-1||t instanceof NG||t instanceof bG||t.XC_()!=null&&typeof t.XC_()=="string"&&t.XC_().toString().indexOf("manipulator")!==-1))).select((i=>{if(i.$C_()){t.push(i);i.nf_(!1)}}));this.wq_();this.Kei_.layers=t;this.Kei_.DAi_=!1;this.Kei_.MAi_=!1;if(this.Yei_!=null){this.Kei_.DAi_=this.Yei_.$C_();this.Yei_.nf_(!1)}if(this.Uei_!=null){this.Kei_.MAi_=this.Uei_.$C_();this.Uei_.nf_(!1)}const i=this.d5_(OH);if(i){this.Kei_.vAi_=i.isActive();i.setActive(!1)}const s=this.KP_();this.Kei_.bAi_=this.f3t_().LM_().ot_();this.USt_.NT_(wc.mT_);this.f3t_().LM_()._Y_(s);this.f3t_().y4_();return this}yP_(){this.Yei_!=null&&this.Yei_.nf_(this.Kei_.DAi_);this.Uei_!=null&&this.Uei_.nf_(this.Kei_.MAi_);this.USt_.NT_(wc.wT_);this.f3t_().LM_()._Y_(this.Kei_.bAi_);this.f3t_().y4_();this.f3t_().wq_();const t=this.Kei_.layers;for(let i=0;i<t.length;i++)t[i].nf_(!0);this.Kei_.vAi_&&this.d5_(OH).setActive(this.Kei_.vAi_);this.wq_();this.rd_(this.Kei_.yAi_);this.Kei_=null}XP_(t){const i=this.pAi_()?this.pAi_():{x:Math.abs(this.f3t_().LM_().if_().BI_()),y:Math.abs(this.f3t_().LM_().if_().sI_())},s=qi((t=t||{})["scale"],i,!0);let e=0,A=0;const n=[];if(t["documentheader"]!=null){const i=t["documentheader"],s=i.getBounds(),e=s.Ts_(),h=new TI(i,s.clone());h.ht_(new mA(0,0,i.getBounds().Ie_(),e));n.push(h);A+=e}const h=this.f3t_().LM_().if_(),r=Math.abs(h.BI_()),o=Math.abs(h.sI_()),l=Gn.TI_(s["x"]/r,s["y"]/o),u=this.NAi_(n,l,A);e+=u.Ie_();A+=u.Ts_();if(this.ct_()!=null){const i=new sI;i.ht_(new mA(0,t["documentheader"]!=null?t["documentheader"].getBounds().Ts_():0,e,A));i.iQ_(this.ct_());n.unshift(new TI(i,i.getBounds()).ht_(i.getBounds()))}this.YY_().filter((t=>ie(t)&&!(ys(t,sI)&&t.FY_(this.f3t_())!==-1))).forEach((function(t){n.push(new TI(t,t.getBounds()).ht_(t.getBounds()))}));return new KI(n,new dQ(e,A))}NAi_(t,i,s){let e,A,n,h,r,o,l,u,a=0,g=0,c=0,I=0;const f=Gn.TI_(i.BI_(),1),C=Gn.TI_(1,i.sI_()),d=this.f3t_().v4_(ha.ne_),B=new TI(d,d.getBounds()),w=i.transform(d.getBounds());t.push(B);const Q=this.f3t_().v4_(ha.eG_);if(Q!=null&&Q.getBounds().Ts_()!==0){e=new TI(Q,Q.getBounds());const i=undefined;I=f.transform(Q.getBounds()).Ts_();t.push(e)}const E=this.f3t_().v4_(ha.sG_);if(E!=null&&E.getBounds().Ie_()!==0){h=new TI(E,E.getBounds());const i=undefined;a=C.transform(E.getBounds()).Ie_();t.push(h)}const p=w.Ie_(),m=w.Ts_(),y=this.f3t_().v4_(ha.AG_);if(y!=null&&y.getBounds().Ie_()!==0){n=new TI(y,y.getBounds());const i=undefined;g=C.transform(y.getBounds()).Ie_();t.push(n)}const D=this.f3t_().v4_(ha.nG_);if(D!=null&&D.getBounds().Ts_()!==0){A=new TI(D,D.getBounds());const i=undefined;c=f.transform(D.getBounds()).Ts_();t.push(A)}const M=this.f3t_().v4_(ha.hG_);if(M!=null&&!M.getBounds().isEmpty()){r=new TI(M,M.getBounds());t.push(r)}const v=this.f3t_().v4_(ha.rG_);if(v!=null&&!v.getBounds().isEmpty()){o=new TI(v,v.getBounds());t.push(o)}const b=this.f3t_().v4_(ha.lG_);if(b!=null&&!b.getBounds().isEmpty()){l=new TI(b,b.getBounds());t.push(l)}const N=this.f3t_().v4_(ha.oG_);if(N!=null&&!N.getBounds().isEmpty()){u=new TI(N,N.getBounds());t.push(u)}const S=a,G=I,R=S+p,k=G+m,F=S+p+g,x=G+m+c;e!=null&&e.ht_(new mA(S,s,R,I+s));h!=null&&h.ht_(new mA(0,G+s,a,k+s));B.ht_(new mA(S,G+s,R,k+s));A!=null&&A.ht_(new mA(S,k+s,R,k+c+s));n!=null&&n.ht_(new mA(R,G+s,R+g,k+s));r!=null&&r.ht_(new mA(0,s,S,G+s));o!=null&&o.ht_(new mA(R,s,R+g,G+s));l!=null&&l.ht_(new mA(0,s+k,S,s+k+c));u!=null&&u.ht_(new mA(R,s+k,R+g,s+k+c));return new mA(0,0,F,x)}SAi_(){const t={};this.Uei_!=null&&(t["verticalscroll"]={visible:this.Uei_.$C_(),size:this.Yei_.gG_(),type:this.Uei_.D_(),options:this.Uei_.JV_()});this.Yei_!=null&&(t["horizontalscroll"]={visible:this.Yei_.$C_(),size:this.Yei_.cG_(),type:this.Yei_.D_(),options:this.Yei_.JV_()});this.C5_("panning")!=null&&(t["panning"]={enabled:this.C5_("panning").isEnabled()});this.C5_("zoom")!=null&&(t["zoom"]={enabled:this.C5_("zoom").isEnabled()});return t}Jei_(t){if(t==null)return this;(t.hasOwnProperty("horizontalscroll")||t.hasOwnProperty("verticalscroll"))&&this.qei_(t);t["crosshair"]!=null&&this.C5_("cross-hair")&&this.C5_("cross-hair").dt_(t["crosshair"]);t["panning"]!=null&&this.C5_("panning")&&t["panning"]["enabled"]!=null&&this.C5_("panning").Kv_(t["panning"]["enabled"]);t["zoom"]!=null&&this.C5_("zoom")&&this.C5_("zoom").dt_(t["zoom"]);t["rubberbandzoom"]!=null&&this.C5_("rubberband")&&this.C5_("rubberband").B_t_(t["rubberbandzoom"]);if(t["selection"]!=null&&this.C5_("pick")){this.C5_("pick").setOptions(t["selection"]);t["selection"]["resetselection"]!=null&&(this._ei_=t["selection"]["resetselection"])}return this}GAi_(t){const i=this.LM_().rt_(),s=this.LM_().ot_();let e,A;const n=t&&t["verticalscroll"];e=NG.D_();if(n!=null&&n["type"]!=null){const t=n["options"]&&n["options"]["resizable"];e=n["type"];n["options"]=RG.Ai_().ULt_(n["options"],e);e=n["options"]["type"];n["options"]=n["options"]["options"];!t&&n["options"]&&delete n["options"]["resizable"]}A="VerticalScroll";n!=null&&n["name"]!=null&&(A=n["name"]);if(this.Uei_!=null&&e!==this.Uei_.D_()){this.r4t_(this.Uei_.K3_());this.f3t_().removeItem(this.Uei_,ha.AG_);this.Uei_=null}if(this.Uei_==null){this.Uei_=LG.Ai_().hUt_(e,{name:A,modellimits:i,visiblelimits:s}).setOptions({resizable:!1});const t=(t,i,s)=>{const e=this.LM_().ot_(),A=s.ot_(),n=(e.Ee_()-A.Ee_())*this.LM_().if_().sI_();this.pan(0,n)};this.Uei_.on(uG.qxt_,t).on(uG.Kxt_,t);this.f3t_().K4_(this.Uei_,ha.AG_);this.h4t_([this.Uei_.K3_()])}if(n!=null){n["visible"]!=null&&this.Uei_.nf_(n["visible"]);n["options"]!=null&&this.Uei_.dt_(n["options"]);n["enabled"]!=null&&this.Uei_.K3_().Kv_(n["enabled"]);this.f3t_().v4_(ha.AG_).wq_()}this.Uei_.Eq_(this.LM_().jY_())}RAi_(t){const i=this.LM_().rt_(),s=this.LM_().ot_();let e,A;const n=t&&t["horizontalscroll"];e=bG.D_();if(n!=null&&n["type"]!=null){const t=n["options"]&&n["options"]["resizable"];e=n["type"];n["options"]=RG.Ai_().ULt_(n["options"],e);e=n["options"]["type"];n["options"]=n["options"]["options"];!t&&n["options"]&&delete n["options"]["resizable"]}A="HorizontalScroll";n!=null&&n["name"]!=null&&(A=n["name"]);if(this.Yei_!=null&&e!==this.Yei_.D_()){this.r4t_(this.Yei_.K3_());this.f3t_().removeItem(this.Yei_,ha.nG_);this.Yei_=null}if(this.Yei_==null){this.Yei_=LG.Ai_().hUt_(e,{name:A,modellimits:i,visiblelimits:s}).setOptions({resizable:!1});const t=(t,i,s)=>{const e=this.LM_().ot_(),A=s.ot_(),n=(e.we_()-A.we_())*this.LM_().if_().BI_();this.pan(n,0)};this.Yei_.on(uG.qxt_,t).on(uG.Kxt_,t);this.f3t_().K4_(this.Yei_,ha.nG_);this.h4t_([this.Yei_.K3_()])}this.Yei_.pq_(this.LM_().ZY_());if(n!=null){n["visible"]!=null&&this.Yei_.nf_(n["visible"]);n["options"]!=null&&this.Yei_.dt_(n["options"]);n["enabled"]!=null&&this.Yei_.K3_().Kv_(n["enabled"]);this.f3t_().v4_(ha.nG_).wq_()}}kAi_(){this.Uei_!=null&&this.r4t_(this.Uei_.K3_());this.Yei_!=null&&this.r4t_(this.Yei_.K3_())}FAi_(){this.Uei_!=null&&this.h4t_(this.Uei_.K3_());this.Yei_!=null&&this.h4t_(this.Yei_.K3_())}xAi_(){if(this.Uei_!=null){this.r4t_(this.Uei_.K3_());this.f3t_().removeItem(this.Uei_,ha.AG_);this.Uei_=null}if(this.Yei_!=null){this.r4t_(this.Yei_.K3_());this.f3t_().removeItem(this.Yei_,ha.nG_);this.Yei_=null}}qei_(t){this.GAi_(t);this.RAi_(t);let i=this.Yei_.cG_(),s=this.Uei_.gG_();t!=null&&t["horizontalscroll"]!=null&&t["horizontalscroll"]["size"]!=null&&(i=t["horizontalscroll"]["size"]);t!=null&&t["verticalscroll"]!=null&&t["verticalscroll"]["size"]!=null&&(s=t["verticalscroll"]["size"]);this.Uei_.ft_({width:s,right:0,bottom:0,top:0});this.Yei_.ft_({left:0,right:0,bottom:0,height:i});return this}N_(){const t=super.N_();t["annotationitemswrap"]=this.s3t_.U4_();t["annotationssizes"]=this.uAi_();t["border"]=this.USt_.gt_();return qi({tools:this.SAi_()},t)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["north"]===void 0&&t["east"]===void 0&&t["south"]===void 0&&t["west"]===void 0||this.G4_(t);t["annotationitemswrap"]!==void 0&&this.s3t_.Y4_(t["annotationitemswrap"]);t["annotationssizes"]!==void 0&&this.vei_(t["annotationssizes"]);t["border"]!==void 0&&this.USt_.rB_(hl.Wi_(t["border"]));t["tools"]!==void 0&&this.Jei_(t["tools"]);return this}sAi_(){this.Hei_={LAi_:this.C5_("cross-hair").isEnabled(),UAi_:this.C5_("rubberband").isEnabled(),selection:this.C5_("pick").isEnabled(),YAi_:this.C5_("panning").isEnabled(),zoom:this.C5_("zoom").isEnabled()};return this}dispose(){if(!this.Df_()){this.s3t_.off(sQ.w4_);super.dispose()}}};i=t([Zs(HI),_s("geotoolkit.widgets.AnnotatedWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpbml0aWFsaXplTGF5b3V0IjoiQzR0XyIsInpvb21Ub1JlY3QiOiJ6ZWlfIiwic2V0Qm91bmRzIjoiaHRfIiwicmVmcmVzaExheW91dCI6IlhlaV8iLCJzZXRNb2RlbFRyYW5zZm9ybWF0aW9uIjoiSjRfIiwiaW5pdGlhbGl6ZVRvb2xzIjoiQTR0XyIsInNldFZpc2libGVNb2RlbExpbWl0cyI6Il9ZXyIsInRyYW5zbGF0ZU1vZGVsIjoiUDRfIiwic2NhbGVNb2RlbCI6Ik80XyIsInNldENlbnRlck1vZGVsTGltaXRzIjoickFpXyIsImdldENlbnRlck1vZGVsTGltaXRzIjoib0FpXyIsImdldFZpc2libGVDZW50ZXJNb2RlbExpbWl0cyI6ImxBaV8iLCJzZXRWaXNpYmxlQ2VudGVyTW9kZWxMaW1pdHMiOiJoQWlfIiwic3luY2hyb25pemVWaWV3TGltaXRzIjoiUGVpXyIsInNldEFubm90YXRpb25TaXplIjoidmVpXyIsImdldEFubm90YXRpb25TaXplIjoidUFpXyIsInNldEFubm90YXRpb25zT3B0aW9ucyI6Ikc0XyIsImFkZFRpdGxlIjoiYUFpXyIsInNldFRpdGxlT3B0aW9ucyI6IklBaV8iLCJyZW1vdmVUaXRsZSI6ImNBaV8iLCJpbnNlcnRBeGlzIjoiZkFpXyIsImFkZEF4aXMiOiJDQWlfIiwicmVtb3ZlQXhpcyI6ImRBaV8iLCJ6b29tSW4iOiJCQWlfIiwiem9vbU91dCI6IndBaV8iLCJnZXRNb2RlbCI6IkxNXyIsImZpdFRvQm91bmRzIjoiUUFpXyIsInNldFNjYWxlU2Nyb2xsU3RyYXRlZ3kiOiJvTl8iLCJnZXRTY2FsZVNjcm9sbFN0cmF0ZWd5IjoibE5fIiwiZ2V0QW5ub3RhdGlvbiI6InY0XyIsImdldE1hbmlwdWxhdG9yTGF5ZXIiOiJtZ3RfIiwiZXhwb3J0VG9QZGYiOiJzZWlfIiwiZ2V0RXhwb3J0TGltaXRzIjoiS1BfIiwic2V0RXhwb3J0TGltaXRzIjoiVFBfIiwiZ2V0RXhwb3J0U2NhbGUiOiJwQWlfIiwic2V0RXhwb3J0U2NhbGUiOiJFQWlfIiwiZ2V0RXhwb3J0U3RhdGUiOiJtQWlfIiwiYmVnaW5FeHBvcnQiOiJEUF8iLCJlbmRFeHBvcnQiOiJ5UF8iLCJnZXRFeHBvcnRFbGVtZW50IjoiWFBfIiwiZ2V0VG9vbHNPcHRpb25zIjoiU0FpXyIsInNldFRvb2xzT3B0aW9ucyI6IkplaV8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwic2F2ZVRvb2xzU3RhdGUiOiJzQWlfIn19fSAg");const H_="#757575",q_="#e0e0e0",J_="12px Roboto",P_=2,V_=function(t){return{major:{tickvisible:!t,tickstyle:{color:H_,width:1,pattern:el.ED_},labelvisible:!0,labelstyle:{font:J_,color:H_}},minor:{tickvisible:!1,tickstyle:{color:q_,width:1,pattern:el.ED_},labelvisible:!1,labelstyle:{font:J_,color:q_}},edge:{tickvisible:!0,tickstyle:{color:H_,width:1,pattern:el.ED_},labelvisible:!1,labelstyle:{font:J_,color:H_}}}},O_=function(){return{shape:{barwidth:1,barpad:0,autogradient:!1,barvalues:{visible:!0,textstyle:(new qa).nF_(J_).setColor(H_)},orientation:_D.JQ_},border:{color:"transparent"},mirror:!1,referenceline:{visible:!1,value:Number.NaN,linestyle:new hl(H_)},neatlimits:!0,preciselimits:!1,grid:{values:V_(),groups:V_(!0)},annotations:{north:{size:50},south:{size:50},east:{size:50},west:{size:50}}}};var W_=Ci(function(){let i=class t extends _H{constructor(t,i){const s=O_();Pi(t,s);const e=undefined;super({isdatamodel:!1,annotationitemswrap:!1,bounds:s["bounds"],border:s["border"],tools:{verticalscroll:{visible:!1},horizontalscroll:{visible:!1}}});this.QRi_=new lA;this.ERi_=new lA;this.UU_=s;this.pRi_=new WC({orientation:fg.ux_});this.mRi_=new WC({orientation:fg.ax_});const A=this.UU_["shape"]["orientation"]!==void 0?this.UU_["shape"]["orientation"]:_D.JQ_,n=A===_D.Top||A===_D.JQ_;this.fNt_=this.yRi_(A);let h,r,o,l;const u=this.UU_["axistitles"];if(u==null)if(n){h="Groups";o="Values";r="Groups";l="Values"}else{h="Values";o="Groups";r="Values";l="Groups"}else{h=u["north"];o=u["west"];r=u["south"];l=u["east"]}this.DRi_=!1;rQ.j4_(this.s3t_,{location:ha.eG_,text:h});const a=rQ.X4_(this.s3t_,{tickgenerator:this.MRi_["north"],location:ha.eG_,connect:!1,annotationitemswrap:!1})["axis"];a.KE_(this.pRi_);n&&a.nf_(!1);rQ.j4_(this.s3t_,{location:ha.sG_,text:o});const g=rQ.X4_(this.s3t_,{tickgenerator:this.MRi_["west"],location:ha.sG_,connect:!1,annotationitemswrap:!1})["axis"];g.KE_(this.mRi_);const c=rQ.X4_(this.s3t_,{tickgenerator:this.MRi_["south"],location:ha.nG_,connect:!1,annotationitemswrap:!1})["axis"];c.KE_(this.pRi_);rQ.j4_(this.s3t_,{location:ha.nG_,text:r});const I=rQ.X4_(this.s3t_,{tickgenerator:this.MRi_["east"],location:ha.AG_,connect:!1,annotationitemswrap:!1})["axis"];I.KE_(this.mRi_);n||I.nf_(!1);rQ.j4_(this.s3t_,{location:ha.AG_,text:l});this._$_={north:h,south:r,east:l,west:o};this.D1t_={north:a,south:c,east:I,west:g};this.vRi_=null;this.bRi_=new BM;this.NRi_=this.bRi_.rt_();this.wzt_=(new TQ).JC_("data_layer");this.wzt_.GY_(this.bRi_);const f=(new sI).JC_("cache_group");this.s3t_.connect(this.D1t_["north"],f);this.s3t_.connect(this.D1t_["south"],f);this.s3t_.connect(this.D1t_["east"],f);this.s3t_.connect(this.D1t_["west"],f);this.s3t_.LM_().xY_(0,f);f.gk_(new tI);this.SRi_=f;const C=(new TQ).JC_("grid_layer");C.GY_(this.fNt_);const d=(new TQ).JC_("referenceline_layer");this.p5t_=new Rd;d.GY_(this.p5t_);f.GY_([d,C,this.wzt_]);this.bRi_.on(rh.nC_,(()=>{const t=this.GRi_();this.bRi_.ht_(this.bRi_.rt_());f.Lq_(t);this.s3t_.LM_().Lq_(t);this.s3t_.y4_();this.s3t_.td_()}));if(n){this.mRi_.setOptions({neatlimits:this.UU_["neatlimits"],preciselimits:this.UU_["preciselimits"]});this.pRi_.Vj_(!1)}else{this.pRi_.setOptions({neatlimits:this.UU_["neatlimits"],preciselimits:this.UU_["preciselimits"]});this.mRi_.Vj_(!1)}this.setOptions(t);if(i!=null&&i["mode"]===jD.IIt_){const t=i["datasets"][0];i=Pi({datasets:[t]},i)}if(i!=null&&i["datasets"]==null&&t["shape"]["valuelimits"]!=null){const i=t["shape"]["valuelimits"]["minvalue"],s=t["shape"]["valuelimits"]["maxvalue"];typeof i=="number"&&typeof s=="number"&&(this.R__()?this.s3t_.LM_().Lq_(new mA(i,0,s,1)):this.s3t_.LM_().Lq_(new mA(0,i,1,s)))}this.setData(i);return this}Q5t_(t){if(!t)return this;const i=t["value"];if(i===void 0||isNaN(i))return this;const s=this.bRi_.rt_();if(!s)return this;if(this.k__()){this.QRi_.vs_(s.we_(),i);this.ERi_.vs_(s.Qe_(),i)}else{this.QRi_.vs_(i,s.Ee_());this.ERi_.vs_(i,s.pe_())}this.p5t_.rd_(!1);this.p5t_.zA_({from:this.QRi_,to:this.ERi_}).nf_(t["visible"]);t["linestyle"]&&this.p5t_.rB_(t["linestyle"]);this.p5t_.rd_(!0);return this}N0_(){if(this.U$_!=null){let t=Number.MAX_VALUE,i=0;for(let s=0;s<this.U$_.length;s++)if(this.U$_[s]!=null){i=this.U$_[s-1]==null?i:this.U$_[s-1];const e=Math.abs(this.U$_[s]-i);e<t&&(t=e)}return t}return 1}yRi_(t){const i=this.UU_["grid"];this.RRi_={values:i["values"]instanceof Qg?i["values"]:vd.Ai_().create(i["values"]).Jx_("edge",!0),groups:i["groups"]instanceof Qg?i["groups"]:(new md).C$_("major",1)};let s;if(t===_D.Top||t===_D.JQ_){s=new sB(this.RRi_["values"],this.RRi_["groups"]);s.KE_(fg.ax_,this.mRi_);s.KE_(fg.ux_,this.pRi_)}else{s=new sB(this.RRi_["groups"],this.RRi_["values"]);s.KE_(fg.ax_,this.mRi_);s.KE_(fg.ux_,this.pRi_)}this.kRi_(t);return s}kRi_(t){const i=function(t){return t+1},s=vd.Ai_(),e=this.UU_["grid"];t==null||t===_D.Top||t===_D.JQ_?this.MRi_={north:e["groups"]instanceof uc?e["groups"]:(new md).C$_("major",1).Jx_("edge",!1).Hx_("minor",!1).hL_(i),east:e["values"]instanceof uc?e["values"]:s.create(e["values"]),west:e["values"]instanceof uc?e["values"]:s.create(e["values"]),south:e["groups"]instanceof uc?e["groups"]:(new md).C$_("major",1).Jx_("edge",!1).Hx_("minor",!1).hL_(i)}:this.MRi_={east:e["groups"]instanceof uc?e["groups"]:(new md).C$_("major",1).Jx_("edge",!1).Hx_("minor",!1).hL_(i),north:e["values"]instanceof uc?e["values"]:s.create(e["values"]),south:e["values"]instanceof uc?e["values"]:s.create(e["values"]),west:e["groups"]instanceof uc?e["groups"]:(new md).C$_("major",1).Jx_("edge",!1).Hx_("minor",!1).hL_(i)};return this}FRi_(){const t=this.UU_["shape"]["orientation"]!==void 0?this.UU_["shape"]["orientation"]:_D.JQ_,i=[];let s;if(!(this.UU_["grid"]["groups"]instanceof Qg))if(t===_D.Top||t===_D.JQ_){i.push(this.MRi_["north"]);i.push(this.MRi_["south"])}else{i.push(this.MRi_["east"]);i.push(this.MRi_["west"])}if(Array.isArray(this.vRi_)){const t=this.vRi_.reduce(((t,i)=>t.length>i.length?t:i));for(s=0;s<i.length;++s){i[s].Yx_(((t,i,s,e,A,n)=>this.vRi_&&A<this.vRi_.length?this.vRi_[A]:n.toString()));i[s].EY_((()=>[{type:"major",value:t}]))}}else for(s=0;s<i.length;++s){i[s].Yx_(null);i[s].EY_(null)}}k__(){return!this.bRi_||this.bRi_.k__()}R__(){return!!this.bRi_&&this.bRi_.R__()}tXt_(){return this.wzt_}GRi_(){let t=this.NRi_==null?this.bRi_.cft_():this.NRi_;const i=this.UU_["shape"]["valuelimits"]!=null&&typeof this.UU_["shape"]["valuelimits"]["maxvalue"]=="number"&&typeof this.UU_["shape"]["valuelimits"]["minvalue"]=="number";if(i){const i=this.UU_["shape"]["valuelimits"]["maxvalue"],s=this.UU_["shape"]["valuelimits"]["minvalue"];if(typeof i=="number"&&typeof s=="number"){const e=s,A=i;if(this.k__()){t.setY(e);t.Be_(A-e)}else{t.setX(e);t.de_(A-e)}}}this.pRi_.Wj_(t.we_(),t.Qe_(),this.bRi_.if_());this.mRi_.Wj_(t.Ee_(),t.pe_(),this.bRi_.if_());i||(t=t.clone().setX(this.pRi_.nA_()).de_(this.pRi_.hA_()-this.pRi_.nA_()).setY(this.mRi_.nA_()).Be_(this.mRi_.hA_()-this.mRi_.nA_()));return t}Pei_(){super.Pei_();if(!this.xRi_&&this.bRi_){this.xRi_=!0;let t=this.s3t_.LM_().rt_(),i=this.GRi_();for(let s=0;s<P_&&!i.Ce_(t);s++){this.SRi_.Lq_(i);this.s3t_.LM_().Lq_(i);this.s3t_.y4_();this.s3t_.td_();t=i;i=this.GRi_()}i.Ce_(t)||ki("BarChart view limits synchronization failed");this.xRi_=!1}return this}ht_(t){super.ht_(t);const i=this.GRi_();i&&!i.isEmpty()&&this.SRi_&&this.SRi_.Lq_(i);return this}Yx_(t){this.bRi_.Yx_(t);return this}setData(t){if(t){this.bRi_.setData(t);this.NRi_=this.bRi_.cft_();this.setOptions(this.UU_);if(t["labels"]!==void 0){this.vRi_=t["labels"];this.FRi_()}t["positions"]instanceof zD?this.U$_=t["positions"].toArray():Array.isArray(t["positions"])&&(this.U$_=t["positions"]);this.U$_!=null&&this.U$_.some((t=>typeof t!="number"))&&(this.U$_=null);this.LRi_();this.Q5t_(this.UU_["referenceline"])}this.vn_();return this}getData(){return this.bRi_.getData()}LRi_(){if(this.MRi_!=null&&this.U$_!=null){const t=this.N0_();if(this.k__()){this.MRi_["south"]instanceof md&&this.MRi_["south"].C$_("major",t);this.MRi_["north"]instanceof md&&this.MRi_["north"].C$_("major",t)}else{this.MRi_["west"]instanceof md&&this.MRi_["west"].C$_("major",t);this.MRi_["east"]instanceof md&&this.MRi_["east"].C$_("major",t)}}return this}Cft_(t,i){return this.bRi_.Cft_(t,i)}setOptions(t){if(!t)return this;let i=null;const s=this.UU_["shape"]["orientation"];this.UU_=Pi(t,this.UU_);t["shape"]!=null&&t["shape"]["valuelimits"]!=null&&(i=t["shape"]["valuelimits"]);if(this.UU_["shape"]!==void 0){this.bRi_.setOptions(this.UU_["shape"]);this.NRi_=this.bRi_.cft_();if(this.bRi_.qIt_()){this.URi_(this.UU_["shape"]["orientation"]);const t=this.GRi_();i={minvalue:this.R__()?t.we_():t.Ee_(),maxvalue:this.R__()?t.Qe_():t.pe_()}}const t=Pi(this.UU_["shape"],{});t["valuelimits"]=i;t["neatlimits"]=!1;this.bRi_.setOptions(t);this.YRi_();this.TRi_(s,this.UU_["shape"]["orientation"]);this.Pei_()}this.UU_["annotations"]!==void 0&&this.G4_(this.UU_["annotations"]);this.UU_["annotationssizes"]&&this.vei_(this.UU_["annotationssizes"]);this.UU_["grid"]!==void 0&&this.KRi_(this.UU_["grid"]);this.UU_["referenceline"]!==void 0&&this.Q5t_(this.UU_["referenceline"]);return this}URi_(t){const i=undefined;if(t===_D.Top||t===_D.JQ_||t===void 0){this.mRi_.setOptions({neatlimits:this.UU_["neatlimits"],minspan:this.UU_["minspan"]});this.pRi_.Vj_(!1)}else{this.pRi_.setOptions({neatlimits:this.UU_["neatlimits"],minspan:this.UU_["minspan"]});this.mRi_.Vj_(!1)}return this}TRi_(t,i){const s=i===_D.Top||i===_D.JQ_||i===void 0,e=t===_D.Top||t===_D.JQ_||t===void 0;this.URi_(this.UU_["shape"]["orientation"]);if(e!==s){const t={east:this.MRi_["east"],west:this.MRi_["west"],north:this.MRi_["north"],south:this.MRi_["south"]};if(s){this.fNt_.jZ_(fg.ux_,this.RRi_["values"]);this.fNt_.jZ_(fg.ax_,this.RRi_["groups"])}else{this.fNt_.jZ_(fg.ux_,this.RRi_["groups"]);this.fNt_.jZ_(fg.ax_,this.RRi_["values"])}this.MRi_["east"]=t["north"];this.MRi_["west"]=t["south"];this.MRi_["north"]=t["east"];this.MRi_["south"]=t["west"]}this.D1t_["east"].jZ_(this.MRi_["east"]);this.D1t_["west"].jZ_(this.MRi_["west"]);this.D1t_["north"].jZ_(this.MRi_["north"]);this.D1t_["south"].jZ_(this.MRi_["south"])}YRi_(){const t=this.s3t_.LM_();if(t){this.k__()?t.Eq_(!0):t.Eq_(!1);this.UU_["mirror"]&&(this.k__()?t.pq_(!0):t.Eq_(!0))}}KRi_(t){if(!t)return this;this.RRi_["groups"].dt_(t["groups"]);this.RRi_["values"].dt_(t["values"]);return this}G4_(t){if(!t)return this;super.G4_(t);this.D1t_["east"].jZ_(this.MRi_["east"]);this.D1t_["west"].jZ_(this.MRi_["west"]);this.D1t_["north"].jZ_(this.MRi_["north"]);this.D1t_["south"].jZ_(this.MRi_["south"]);return this}dft_(t,i){this.bRi_.dft_(t,i);return this}fft_(t,i,s){return this.bRi_.fft_(t,i,s)}JIt_(t){this.bRi_.JIt_(t);let i;this.NRi_=this.bRi_.cft_();if(this.bRi_.qIt_()){this.URi_(this.UU_["shape"]["orientation"]);const t=this.GRi_();i={minvalue:this.R__()?t.we_():t.Ee_(),maxvalue:this.R__()?t.Qe_():t.pe_()}}this.bRi_.setOptions({valuelimits:i});this.Pei_();return this}PIt_(){return this.bRi_.PIt_()}N_(){return Pi(this.getData(),Pi(this.UU_,super.N_()))}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);return this}};i=t([_s("geotoolkit.widgets.BarChartWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREYXRhTGF5ZXIiOiJ0WHRfIiwic3luY2hyb25pemVWaWV3TGltaXRzIjoiUGVpXyIsInNldEJvdW5kcyI6Imh0XyIsInNldEZvcm1hdExhYmVsSGFuZGxlciI6Ill4XyIsImdldFZhbHVlQXQiOiJDZnRfIiwic2V0QW5ub3RhdGlvbnNPcHRpb25zIjoiRzRfIiwiaGlnaGxpZ2h0QmFycyI6ImRmdF8iLCJzZWxlY3RCYXJzQXQiOiJmZnRfIiwic2V0RGF0YVNlcmllc1Zpc2libGUiOiJKSXRfIiwiZ2V0RGF0YVNlcmllc1Zpc2libGUiOiJQSXRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g"),z_=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(jn.Ai_())}bi_(t,i){return t["attributename"]==="datasets"&&i instanceof W_}Yi_(t){const i=t.getData();return i==null?null:i["datasets"].map((function(t){return t["values"]}))}apply(t){t.setData({datasets:this.Ti_().map((function(t){return{values:t}}))})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(z_);var X_=function(){let i=class t extends Db{constructor(t,i){super(t);const s=4;let e=s,A="";typeof i["unit"]=="string"&&(A=" ("+i["unit"]+") ");i["unit"]instanceof JA&&(A=" ("+i["unit"].fn_()+") ");const n=i["axisname"]+": "+i["value"]+A;this._q_=new YC;this._q_.dt_({text:n,ax:s,ay:e});this._q_.SE_(dA.ie_);this.fX_=i["textstyle"]instanceof qa?i["textstyle"]:new qa;const h=$o.measureText(n,this.fX_);e=e+h.Ts_()+s;const r=2*s+h.Ie_();this.aq_(!0);this.GY_(this._q_);this.dq_(e).Cq_(r).kY_(!0)}};i=t([_s("geotoolkit.widgets.BubbleWidgetTooltipLegendItem")],i);return i}();const j_="#e0e0e0",Z_="#f5f5f5",__="16px Roboto",$_="#757575",t$="13px Roboto";var i$=Ci(function(){let i=class t extends _H{constructor(t){t==null&&(t={});const i=15,s=20,e=15,A=20,n=15,h=5,r=s+A+n;t["viewcachesize"]=t["viewcache"]||t["viewcachesize"]!=null?qi(t["viewcachesize"],{width:256,height:256}):null;t["border"]=qi(t["border"],{color:"transparent"},!0);let o={bounds:t["bounds"],border:t["border"],north:null,south:null,west:null,east:null,viewcache:!0,viewcachesize:t["viewcachesize"],annotationssizes:{north:i+s,west:i+A+s,south:i+A+e+s,east:i+e+r+h}};o=qi(t,o);super(o);this.HRi_=r;this.qRi_=o["viewcache"];this.JRi_=null;this.PRi_={};if(o["viewcachesize"]!=null){this.qRi_=!0;this.PRi_=o["viewcachesize"]}this.VRi_=null;this.ORi_=[];this.WRi_={datax:[],datay:[],datas:[],selectable:!1,highlightcolor:new wr("pink").getColor()};this.zRi_=o["annotationssizes"];this.Cm_=o["colorprovider"]!=null?o["colorprovider"]:this.Cm_;const l=qi(o["z"]!=null&&o["z"]["axis"]!=null?o["z"]["axis"]["title"]:null,{text:"",visible:!1,textstyle:new qa({color:$_,font:t$}),alignment:dA.he_}),u={location:sv.AG_,componentsizes:{colorbox:n,axis:A,title:s},axis:{autolabelrotation:o["z"]!=null&&o["z"]["autolabelrotation"],title:l},colorprovider:this.Cm_,title:{text:"zlabel",textstyle:new qa({color:$_,font:t$})},flip:"true"};this.lVt_=new av(u).gk_(this.qRi_?this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]):new tI:null).kY_(!0);this.XRi_=!1;this.jRi_={x:null,y:null,z:null,s:null};this.Us_={x:null,y:null,z:null,s:null};this.ZRi_={x:[],y:[],z:[],s:[]};this._Ri_={x:!1,y:!1,z:!1,s:!1};this.$Ri_={x:null,y:null,z:null,s:null};this.sNi_={x:null,y:null,z:null};this.tki_={x:null,y:null,z:null,s:null};this.iki_={x:null,y:null,z:null,s:null};const a=this._C_();this.rd_(!1);this.s3t_.W4_();this.ski_=null;this.eki_=["x","y","z","s"];this.Aki_=new wr({color:"white"});this.nki_=new hl({color:"grey",width:1});this.hki_=new qa;this.rki_=new fN({data:null,sizeisindevicespace:!0,autosize:!0,autobounds:!0}).cq_(new Ew).nf_(!1).kY_(!0);this.rki_.ht_(new mA(0,0,1,1));this.GY_(this.rki_);this.pZ_=rQ.j4_(this.s3t_,{location:ha.eG_,text:"",textstyle:{font:__}});const g=rQ.X4_(this.s3t_,{location:ha.nG_,connect:!0,title:{text:"",visible:!1,textstyle:new qa({color:$_,font:t$}),alignment:dA.re_},annotationitemswrap:!1})["axis"],c=o["x"]!=null&&o["x"]["axis"]!=null&&o["x"]["axis"]["title"]!=null?null:rQ.j4_(this.s3t_,{location:ha.nG_,text:"x"}),I=o["y"]!=null&&o["y"]["axis"]!=null&&o["y"]["axis"]["title"]!=null?null:rQ.j4_(this.s3t_,{location:ha.sG_,text:"y"}),f=rQ.X4_(this.s3t_,{location:ha.sG_,connect:!0,autolabelrotation:!0,title:{text:"",visible:!1,textstyle:new qa({color:$_,font:t$}),alignment:dA.he_},annotationitemswrap:!1})["axis"];this.Fwt_={x:g,y:f,z:this.lVt_.JV_()["axis"]["item"]};this._$_={x:c,y:I,z:l.visible===!1?this.lVt_.JV_()["title"]["item"]:null};const C=new sI;C.Cq_(h);this.s3t_.K4_(C,ha.AG_);this.s3t_.K4_(this.lVt_,ha.AG_);this.oki_=new OM;g.KE_(this.oki_.jBt_());f.KE_(this.oki_.ZBt_());this.lki_=new sI;this.lki_.GY_([(new TQ).JC_("bubblechart_layer").GY_([this.oki_])]);this.VRi_=new OM({selectable:!1}).HC_("default");this.uki_=(new sI).GY_([(new TQ).JC_("highlight_layer").GY_([this.VRi_])]);this.F5t_=null;this.s3t_.LM_().xY_(0,this.uki_);this.s3t_.LM_().xY_(0,this.lki_);this.s3t_.LM_().Eq_(!0);this.Uei_.Eq_(!0);this.aki_();this.s3t_.z4_();this.Xei_();this.lVt_.nf_(!1);this.JRi_=this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]).wH_(null):(new tI).wH_(null);this.lki_.gk_(this.qRi_?this.JRi_:null);this.lki_.kY_(!1);this.Xei_();this.A4t_();this.Jei_(t["tools"]);this.setData(t);this.rd_(a);return this}aki_(){const t=vd.Ai_(),i=t.E$_(),s=t.E$_(),e=t.E$_(),A=new fd,n=new fd,h=new fd,r=function(t){t.Vx_("major").setColor(j_);t.Vx_("minor").setColor(Z_);t.Hx_("minor",!0);t.Hx_("edge",!1);t.Jx_("edge",!1)},o=t.create({ticks:{edge:{visible:!0}}}),l=t.E$_({ticks:{edge:{visible:!0}}}),u=new fd,a=new fd;r(i);r(s);r(o);r(l);r(u);r(a);this.$$_={x:i,y:s,z:e,xlog:A,ylog:n,zlog:h};this.gki_={x:o,y:l,xlog:u,ylog:a};if(this.fNt_==null){this.fNt_=new sB(o,l);this.fNt_.KE_(fg.ux_,this.oki_.jBt_());this.fNt_.KE_(fg.ax_,this.oki_.ZBt_());const t=new TQ;t.JC_("grid_layer");t.GY_(this.fNt_);this.s3t_.LM_().xY_(0,t)}this.cki_();return this}cki_(){this.Fwt_["x"].jZ_(this.$$_["x"+(this._Ri_["x"]?"log":"")]);this.Fwt_["y"].jZ_(this.$$_["y"+(this._Ri_["y"]?"log":"")]);this.Fwt_["z"].jZ_(this.$$_["z"+(this._Ri_["z"]?"log":"")]);this.fNt_.jZ_(fg.ax_,this.gki_["x"+(this._Ri_["x"]?"log":"")]);this.fNt_.jZ_(fg.ux_,this.gki_["y"+(this._Ri_["y"]?"log":"")]);const t=this._Ri_["z"]?Math.log(this.tki_["z"])/Math.LN10:this.tki_["z"],i=this._Ri_["z"]?Math.log(this.iki_["z"])/Math.LN10:this.iki_["z"];this.Fwt_["z"].Lq_(new mA(t,t,i,i))}A4t_(){if(this.lVt_==null)return this;super.A4t_();this.eAi_.setOptions({colorbar:this.lVt_});const t=this.mgt_();this.$ei_.on(xS.Okt_,(()=>{this.ski_=null;this.rki_.nf_(!1)}));this.JDt_._Ot_((t=>{for(let i=0;i<t.length;++i)if(t[i]["bubblechart"]===this.oki_||t[i]["colorbar"]===this.lVt_)return t[i];return[]})).on(wF.yOt_,((t,i,s)=>{const e=s.getSelection()["indices"];Array.isArray(e)&&this.vEt_({default:{indices:e}},this._ei_)})).HC_("selection");this.Iki_=new MF(t).Kv_(!1).jOt_(CF.__)._Ot_((t=>{for(let i=0;i<t.length;++i)if(t[i]["bubblechart"]===this.oki_||t[i]["colorbar"]===this.lVt_)return t[i];return[]})).on(wF.yOt_,((t,i,s)=>{const e=s.getSelection()["indices"];if(e instanceof Array){const t=e;if(t.length===0){this.rki_.nf_(!1);this.ski_=null;return}if(this.ski_===t[0]["index"])return;this.ski_=t[0]["index"];this.fki_()}})).HC_("bubbleHover");this.nAi_.add([this.Iki_]);return this}fki_(){const t=new Cm;this.eki_.forEach((i=>{const s=this.Us_[i]?this.Us_[i][this.ski_]:"",e=this.$Ri_[i]?this.$Ri_[i]:i,A=new X_(null,{axisname:e,value:s,unit:this.sNi_[i],textstyle:this.hki_});t.add(A)}));this.rki_.setOptions({data:t,linestyle:this.nki_,fillstyle:this.Aki_,autobounds:!0});const i=this.rki_.getBounds().clone(),s=this.s3t_.LM_().getParent().getBounds(),e=(new Gn).II_(this.T4_.ot_(),s,!1,!0);let A=new lA(this.Us_["x"][this.ski_],this.Us_["y"][this.ski_]);A=e.transform(A);const n=new lA(this.T4_.lt_().getX()+this.T4_.lt_().Ie_()/2,this.T4_.lt_().getY()+this.T4_.lt_().Ts_()/2),h=i.Ie_(),r=i.Ts_();if(A.getX()<=n.getX()&&A.getY()<=n.getY()){i.setX(A.getX());i.setY(A.getY())}if(A.getX()>=n.getX()&&A.getY()<=n.getY()){i.setX(A.getX()-h);i.setY(A.getY())}if(A.getX()<=n.getX()&&A.getY()>=n.getY()){i.setX(A.getX());i.setY(A.getY()-r)}if(A.getX()>=n.getX()&&A.getY()>=n.getY()){i.setX(A.getX()-h);i.setY(A.getY()-r)}this.rki_.ht_(i);this.rki_.nf_(!0)}setData(t){if(t==null)return this;this.Jei_(t["tools"]);t["bounds"]!=null&&this.ht_(t["bounds"]);const i={};t["header"]!=null&&this.Cki_(t["header"]);t["painter"]!=null&&this.rk_(t["painter"],i);if(t["colorprovider"]!==void 0){this.UBt_(t["colorprovider"],i);this.eAi_.UBt_(this.Swt_())}t["symbolcache"]!=null&&this.dki_(t["symbolcache"],i);t["labels"]!=null&&this.Bki_(t["labels"],i);this.wki_=!1;t["x"]!=null&&this.Qki_("x",t["x"],i);t["y"]!=null&&this.Qki_("y",t["y"],i);t["z"]!=null&&this.Qki_("z",t["z"],i);t["s"]!=null&&this.Qki_("s",t["s"],i);this.Jei_(t["tools"]);let s=this.s3t_.LM_().getParent().getBounds();this.oki_.zBt_(new mA(0,0,s.Ie_(),s.Ts_()));this.VRi_.zBt_(new mA(0,0,s.Ie_(),s.Ts_()));this.oki_.setData(i);const e=undefined;this.oki_.getData()["colorprovider"]==null?this.vei_({east:this.zRi_["east"]-this.HRi_}):this.vei_({east:this.zRi_["east"]});this.Xei_();s=this.s3t_.LM_().getParent().getBounds();this.oki_.zBt_(new mA(0,0,s.Ie_(),s.Ts_()));this.VRi_.zBt_(new mA(0,0,s.Ie_(),s.Ts_()));this.oki_.Wj_();this.x5t_(t["trendline"]);this.VRi_.Wj_();this.rAi_(this.oki_.getBounds());this.Xei_();this.vn_();return this}getData(t){const i={tools:this.SAi_()};this.getBounds()!=null&&(i["bounds"]=this.getBounds().N_());i["header"]=this.Eki_();i["x"]=this.pki_("x",t);i["y"]=this.pki_("y",t);this.Cm_&&this.Us_["z"]&&(i["z"]=this.pki_("z",t));i["s"]=this.pki_("s",t);this.Swt_()!=null&&(i["colorprovider"]=this.Swt_());i["painter"]=this.ak_();i["trendline"]=this.mki_();i["labels"]=this.lZt_();return i}setOptions(t){const i=Pi(t,this.JV_());return this.setData(i)}JV_(){return this.getData()}N_(){return qi(this.getData(),super.N_())}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.setOptions(t);return this}B3t_(){return this.lVt_}yki_(t,i,s){let e,A,n;s["value"]["range"]!=null&&s["value"]["range"]["changes"]===UD.pct_&&s["value"]["range"]["from"]===0&&(this.Dki_=!0);if(this.Dki_){const t={x:{datasource:this.jRi_["x"]},y:{datasource:this.jRi_["y"]},z:{datasource:this.jRi_["z"]},s:{datasource:this.jRi_["s"]}};this.setData(t)}else{const t=this.oki_.getData()["validlength"];let i;i=this.Us_["z"]==null?Math.min(this.Us_["x"].length,this.Us_["y"].length,this.Us_["s"].length):Math.min(this.Us_["x"].length,this.Us_["y"].length,this.Us_["z"].length,this.Us_["s"].length);if(i>t){A=i-t;for(n in this._Ri_)if(this._Ri_.hasOwnProperty(n)&&this._Ri_[n]===!0)for(let s=t-1;s<i;++s)this.ZRi_[n].push(Math.log(this.Us_[n][s])/Math.LN10);this.oki_.PBt_(A);this.rAi_(this.oki_.getBounds());this.wki_=!0;this.x5t_();this.Xei_()}else if(i<t){e=s["value"]["range"]["from"];A=s["value"]["range"]["amount"];for(n in this._Ri_)this._Ri_.hasOwnProperty(n)&&this._Ri_[n]===!0&&this.ZRi_[n].splice(e,A);this.oki_.VBt_(e,A);this.wki_=!0;this.x5t_();this.Xei_()}}}Mki_(){return this.F5t_.HRt_().pvt_()}x5t_(t){const i={};if(!this.F5t_){this.F5t_=(new DS).nf_(!1);this.e4t_().GY_(this.F5t_)}if(t!=null){t["enable"]!=null&&this.F5t_.nf_(t["enable"]);if(this.F5t_.$C_()){if(!t["regressionmodel"]&&(t["model"]||t["order"])){t["regressionmodel"]={};t["regressionmodel"]["type"]=t["model"];t["regressionmodel"]["order"]=t["order"]}if(!t["regressionline"]&&(t["visible"]||t["linestyle"])){t["regressionline"]={};t["regressionline"]["visible"]=t["visible"];t["regressionline"]["linestyle"]=t["linestyle"];t["visible"]=null}this.F5t_.Lq_(this.e4t_().rt_());this.F5t_.setOptions(t);i["datax"]=t["datax"]?t["datax"]:this.Us_["x"];i["datay"]=t["datay"]?t["datay"]:this.Us_["y"];this.F5t_.setData(i)}}else if(this.F5t_.$C_()){i["datax"]=this.Us_["x"];i["datay"]=this.Us_["y"];this.F5t_.setData(i)}return this}mki_(){let t={enable:this.F5t_.$C_()};t=qi(this.F5t_.JV_(),t);return t}vki_(t){const i=function(t){return Math.pow(10,t).toFixed(2)},s=function(t){return t.toFixed(2)};return this._Ri_[t]?i:s}Qki_(t,i,s){let e=!1;if(s==null){e=!0;s={}}const A={},n={x:"south",y:"west",z:"east"};if(typeof t!="string")return this;if((t=t.toLowerCase())!=="x"&&t!=="y"&&t!=="z"&&t!=="s")return this;if(i==null)return this;if(i["datasource"]!=null&&(i["datasource"]!==this.jRi_[t]||this.Dki_)&&(i["datasource"]instanceof zD||i["datasource"]instanceof bM)){this.jRi_[t]=i["datasource"];this.XRi_=!0;i["data"]=i["datasource"].toArray();i["datasource"].on(xD.gf_,this.yki_.bind(this));i["datasource"].gn_()!=null&&(i["unit"]=i["datasource"].gn_());i["datasource"].dn_()!=null&&(i["name"]=i["datasource"].dn_())}this.$Ri_[t]=i["name"]!=null?i["name"]:this.$Ri_[t];this.sNi_[t]=i["unit"]!=null?i["unit"]:this.sNi_[t];if(i["logarithmic"]!=null&&this._Ri_[t]!==i["logarithmic"]){this._Ri_[t]=i["logarithmic"];if(t==="x"){this.$ei_.hOt_(ha.eG_,{textconverter:this.vki_("x")});this.$ei_.hOt_(ha.nG_,{textconverter:this.vki_("x")});this.oki_.jBt_().setOptions({logarithmic:i["logarithmic"]})}if(t==="y"){this.$ei_.hOt_(ha.AG_,{textconverter:this.vki_("y")});this.$ei_.hOt_(ha.sG_,{textconverter:this.vki_("y")});this.oki_.ZBt_().setOptions({logarithmic:i["logarithmic"]})}}if(i["data"]!=null){this.Us_[t]=i["data"];this.ZRi_[t]=[];for(let s=0;s<i["data"].length;++s)this.ZRi_[t].push(Math.log(i["data"][s])/Math.LN10);this.wki_=!0}if(t==="z"){if(typeof i["min"]=="number"&&typeof i["max"]=="number"){this.tki_[t]=i["min"];this.iki_[t]=i["max"]}if(i["autominmax"]||this.tki_[t]==null||this.iki_[t]==null){this.tki_[t]=NA.nA_(this.Us_[t]);this.iki_[t]=NA.hA_(this.Us_[t])}const s=this.Cm_.Ww_(),e=this.Cm_.getValues(),n=[];e.forEach((i=>{const s=this.tki_[t]+this.iki_[t]*(i-this.Cm_.Em_())/(this.Cm_.pm_()-this.Cm_.Em_());n.push(s)}));this.Cm_.setColors(n,s);A["min"]=this.Cm_.Em_();A["max"]=this.Cm_.pm_()}if(this._Ri_[t]){i["min"]!=null&&(s["min"+t]=i["min"]===0?0:Math.log(i["min"])/Math.LN10);i["max"]!=null&&(s["max"+t]=i["max"]===0?0:Math.log(i["max"])/Math.LN10);s["data"+t]=this.ZRi_[t]}else{i["min"]!=null&&(s["min"+t]=i["min"]);i["max"]!=null&&(s["max"+t]=i["max"]);s["data"+t]=this.Us_[t]}i["autominmax"]!=null&&(s["autominmax"+t]=i["autominmax"]);i["neatlimit"]!=null&&(s["neatlimit"+t]=i["neatlimit"]);i["preciselimit"]!=null&&(s["preciselimit"+t]=i["preciselimit"]);if(t!=="s"){if((i["label"]==null||i["label"]["text"]==null)&&i["name"]&&i["unit"]){const t=i["name"]!=null?i["name"]:[];if(i["unit"]instanceof JA){t.push(" (");t.push(i["unit"].fn_());t.push(")")}else if(typeof i["unit"]=="string"){t.push(" (");t.push(i["unit"]);t.push(")")}i["label"]["text"]=t.join("")}if(i["label"]!=null){if(this._$_[t]!=null)if(t==="z")this._$_[t].dt_(i["label"]);else{this._$_[t]["text"].dt_(i["label"]);ua.NG_(this._$_[t]["text"],this._$_[t]["group"],n[t])}else if(t==="z")A["axis"]={title:{text:i["label"]["text"],textstyle:this.Fwt_[t].v__().clone().dt_(i["label"]["textstyle"])}};else{const s=i["label"]["textstyle"]?this.Fwt_[t].v__().clone().dt_(i["label"]["textstyle"]):this.Fwt_[t].v__();this.Fwt_[t].E__({title:i["label"]["text"],textstyle:s})}t==="z"&&i["label"]["text"]!=null&&(A["titletext"]=i["label"]["text"])}i["axis"]!=null&&i["axis"]["title"]!=null&&this.Fwt_[t].E__(i["axis"]["title"]);if(i["annotationsize"]!=null){const s={};s[n[t]]=i["annotationsize"];this.zRi_[n[t]]=i["annotationsize"];this.vei_(s)}if(i["axisticks"]!=null){this.$$_[t].dt_(i["axisticks"]);this.$$_[t+"log"].dt_(i["axisticks"])}if(i["gridticks"]!=null&&t!=="z"){this.gki_[t].dt_(i["gridticks"]);this.gki_[t+"log"].dt_(i["gridticks"])}if(i["reversed"]!=null){t==="x"&&this.s3t_.LM_().pq_(i["reversed"]);t==="y"&&this.s3t_.LM_().Eq_(i["reversed"]);t==="z"&&(A["flip"]=i["reversed"])}if(t==="z"){this.lVt_.dt_(A);i["legendvisible"]!=null&&this.lVt_.nf_(i["legendvisible"]);this.lVt_.zT_()}this.Xei_();t==="z"&&this.lVt_.wq_();i["tickgenerator"]!=null&&(this.$$_[t+(this._Ri_[t]?"log":"")]=i["tickgenerator"]);this.cki_()}this.oki_.LBt_();if(!e)return this;this.oki_.setData(s);return this}pki_(t,i){if((t=t.toLowerCase())!=="x"&&t!=="y"&&t!=="z"&&t!=="s")return{};const s={},e=this.oki_.getData();if(i!==!0){s["datasource"]=this.jRi_[t];s["data"]=this.Us_[t]}s["unit"]=this.sNi_[t];s["name"]=this.$Ri_[t];s["min"+t]=e["min"+t];s["max"+t]=e["max"+t];s["autominmax"]=e["autominmax"+t];s["neatlimit"]=e["neatlimit"+t];s["preciselimit"]=e["preciselimit"+t];s["logarithmic"]=this._Ri_[t];if(t!=="s"){this._$_[t]!=null?s["label"]=t==="z"?this._$_[t].N_():this._$_[t]["text"].N_():s["label"]={text:this.Fwt_[t].mV_(),textstyle:this.Fwt_[t].v__()};let i;if(this.$$_[t]){i=this.$$_[t].N_();s["axisticks"]=i}if(t!=="z"){i=this.gki_[t].N_();s["gridticks"]=i}const e={x:ha.nG_,y:ha.sG_,z:ha.AG_},A=this.s3t_.v4_(e[t]);s["annotationsize"]=t==="x"?A.cG_():A.gG_()}t==="z"&&(s["reversed"]=this.lVt_.JV_()["flip"]);t==="x"&&(s["reversed"]=this.s3t_.LM_().ZY_());t==="y"&&(s["reversed"]=this.s3t_.LM_().jY_());t==="z"&&(s["legendvisible"]=this.lVt_.$C_());return s}vEt_(t,i){const s=[];t["default"]["indices"].forEach((function(t){s.push(t["index"])}));if(s.length===0)this.ORi_=[];else if(s.length===1&&this.ORi_.indexOf(s[0])!==-1)this.ORi_.splice(this.ORi_.indexOf(s[0]),1);else if(i){const t=this.ORi_.concat(s);this.ORi_=t.filter((function(i,s){return t.indexOf(i)===s}))}else this.ORi_=s;const e=this.WRi_["highlightcolor"],A=this.oki_.getData(!0),n=A["labels"];this.WRi_=qi(A,this.WRi_);this.WRi_["datax"]=[];this.WRi_["datay"]=[];this.WRi_["datas"]=[];this.WRi_["dataz"]=null;this.WRi_["labels"]=[];const h=this.WRi_["minsize"]<4?2:4;this.WRi_["minsize"]=this.WRi_["minsize"]+h;this.WRi_["maxsize"]=this.WRi_["maxsize"]+h;this.WRi_["colorprovider"]=null;this.WRi_["defaultcolor"]=e;for(let t=0;t<this.ORi_.length;t++){this.WRi_["datax"].push(this._Ri_["x"]?this.ZRi_["x"][this.ORi_[t]]:this.Us_["x"][this.ORi_[t]]);this.WRi_["datay"].push(this._Ri_["y"]?this.ZRi_["y"][this.ORi_[t]]:this.Us_["y"][this.ORi_[t]]);this.WRi_["datas"].push(this._Ri_["s"]?this.ZRi_["s"][this.ORi_[t]]:this.Us_["s"][this.ORi_[t]]);n.length>0&&this.WRi_["labels"].push(n[this.ORi_[t]])}this.VRi_.LBt_();this.VRi_.setData(this.WRi_);this.VRi_.Wj_()}iRt_(){ki("BubbleChart.getRsquared() is deprecated since 3.4 not use")}bki_(){this.ORi_==null&&(this.ORi_=[]);return this.ORi_}Cki_(t){if(t==null)return this;const i={};if(t["title"]!=null){this.pZ_["text"].dt_(t["title"]);ua.NG_(this.pZ_["text"],this.pZ_["group"],ha.eG_)}t["annotationsize"]!=null&&(i["north"]=t["annotationsize"]);this.vei_(i);this.Xei_();return this}Eki_(){return{title:this.pZ_["text"].N_(),annotationsize:this.s3t_.v4_(ha.eG_).cG_()}}Bki_(t,i){let s=!1;if(i==null){s=!0;i={}}(t["data"]instanceof PD||t["data"]instanceof vM)&&(t["data"]=t["datasource"].toArray());Array.isArray(t["data"])&&(i["labels"]=t["data"]);i["labelvisible"]=t["visible"];i["labeltextstyle"]=t["textstyle"];i["labellocation"]=t["location"];i["secondarylocation"]=t["secondarylocation"];i["labelpadding"]=t["padding"];if(!s)return this;this.oki_.setData(i);return this}lZt_(){const t=this.oki_.getData();return{visible:t["labelvisible"],textstyle:t["labeltextstyle"],location:t["labellocation"],secondarylocation:t["secondarylocation"],padding:t["labelpadding"]}}rk_(t,i){let s=!1;if(i==null){s=!0;i={}}i=qi(t,i);this.WRi_=qi(t,this.WRi_);this.oki_.LBt_();if(!s)return this;this.oki_.setData(i);return this}ak_(){const t=this.oki_.getData();return{symbol:t["symbol"],minsize:t["minsize"],maxsize:t["maxsize"],sizebin:t["sizebin"],defaultfillstyle:t["defaultfillstyle"],defaultlinestyle:t["defaultlinestyle"]}}UBt_(t,i){if(t==null)return this;let s=!1;if(i==null){s=!0;i={}}if(t instanceof Mo)this.Cm_=t;else if(t["type"]!=null){const i=undefined,s=Mo.Dm_(t["type"]).Wi_(t);this.Cm_=s}i["colorprovider"]=this.Cm_;this.lVt_.setOptions({colorprovider:this.Cm_});this.lVt_.wq_();this.lVt_.zT_();this.oki_.LBt_();if(!s)return this;this.oki_.setData(i);return this}Swt_(){return this.Cm_}dki_(t,i){let s=!1;if(i==null){s=!0;i={}}t["width"]!=null&&(i["cachewidthlimit"]=t["width"]);t["height"]!=null&&(i["cacheheightlimit"]=t["height"]);this.oki_.LBt_();if(!s)return this;this.oki_.setData(i);return this}Jei_(t){if(t==null||this.lVt_==null)return this;if(t["crosshair"]!=null){t["crosshair"]["north"]!=null&&(t["crosshair"]["north"]["textconverter"]=null);t["crosshair"]["south"]!=null&&(t["crosshair"]["south"]["textconverter"]=null);t["crosshair"]["east"]!=null&&(t["crosshair"]["east"]["textconverter"]=null);t["crosshair"]["west"]!=null&&(t["crosshair"]["west"]["textconverter"]=null)}if(t["tooltip"]!=null){t["tooltip"]["enabled"]!=null&&(t["tooltip"]["enabled"]===!0?this.Iki_.Kv_(!0):this.Iki_.Kv_(!1));this.eki_=Array.isArray(t["tooltip"]["displayprops"])?t["tooltip"]["displayprops"]:this.eki_;this.Aki_=t["tooltip"]["fillstyle"]instanceof wr?t["tooltip"]["fillstyle"]:this.Aki_;this.nki_=t["tooltip"]["linestyle"]instanceof hl?t["tooltip"]["linestyle"]:this.nki_;this.hki_=t["tooltip"]["textstyle"]instanceof qa?t["tooltip"]["textstyle"]:this.hki_}super.Jei_(t);return this}SAi_(){const t=super.SAi_();t["selection"]={enable:this.JDt_.isEnabled(),resetselection:this._ei_};t["tooltip"]={enable:this.Iki_.isEnabled(),displayprops:this.eki_,fillstyle:this.Aki_,linestyle:this.nki_,textstyle:this.hki_};return t}dispose(){let t;for(t in this.jRi_)this.jRi_.hasOwnProperty(t)&&this.jRi_[t]!=null&&this.jRi_[t].off(xD.gf_,this.yki_);super.dispose()}};i=t([_s("geotoolkit.widgets.BubbleChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpbml0aWFsaXplVG9vbHMiOiJBNHRfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRSZWdyZXNzaW9uQW5hbHlzaXMiOiJNa2lfIiwidXBkYXRlUmVncmVzc2lvbkxpbmUiOiJ4NXRfIiwiZ2V0VHJlbmRsaW5lT3B0aW9ucyI6Im1raV8iLCJnZXRMYWJlbFRleHRDb252ZXJ0ZXIiOiJ2a2lfIiwic2V0QXhpc0RhdGEiOiJRa2lfIiwiZ2V0QXhpc0RhdGEiOiJwa2lfIiwiaGlnaGxpZ2h0SW5kaWNlcyI6InZFdF8iLCJnZXRSc3F1YXJlZCI6ImlSdF8iLCJnZXRIaWdobGlnaHRJbmRpY2VzIjoiYmtpXyIsInNldEhlYWRlck9wdGlvbnMiOiJDa2lfIiwiZ2V0SGVhZGVyT3B0aW9ucyI6IkVraV8iLCJzZXRMYWJlbHMiOiJCa2lfIiwiZ2V0TGFiZWxzIjoibFp0XyIsInNldFBhaW50ZXIiOiJya18iLCJnZXRQYWludGVyIjoiYWtfIiwic2V0Q29sb3JQcm92aWRlciI6IlVCdF8iLCJnZXRDb2xvclByb3ZpZGVyIjoiU3d0XyIsInNldFN5bWJvbENhY2hlIjoiZGtpXyIsInNldFRvb2xzT3B0aW9ucyI6IkplaV8iLCJnZXRUb29sc09wdGlvbnMiOiJTQWlfIn19fSAg"),s$=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(Hn.Ai_())}bi_(t,i){return t["attributename"]==="s-data"&&i instanceof i$}Yi_(t){const i=t.getData();return i?i["s"]["data"]:null}apply(t){t.setData({s:{data:this.Ti_()}})}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(s$);var e$={Off:"Off",On:"On"},A$=Ci(function(){let i=class t extends sI{constructor(t,i){super(t);const s={normal:{textstyle:new qa({font:"bold 8px Arial"}).setColor("black"),linestyle:new hl({color:"gray",width:1}),fillstyle:new wr("#f5f5f5")},disabled:{textstyle:new qa({font:"8px Arial"}).setColor("gray"),linestyle:new hl({color:"gray",width:1}),fillstyle:new wr("#DDDDDD")},pressed:{textstyle:new qa({font:"bold 8px Arial"}).setColor("black"),linestyle:new hl({color:"gray",width:3}),fillstyle:new wr("#d3d3d3")},hover:{textstyle:new qa({font:"bold 8px Arial"}).setColor("black"),linestyle:new hl({color:"gray",width:1}),fillstyle:new wr("#e3e3FF")}};t==null&&(t={});t["styles"]==null&&(t["styles"]={});t["styles"]["normal"]=qi(t["styles"]["normal"],s["normal"]);t["styles"]["disabled"]=qi(t["styles"]["disabled"],s["disabled"]);t["styles"]["pressed"]=qi(t["styles"]["pressed"],s["pressed"]);t["styles"]["hover"]=qi(t["styles"]["hover"],s["hover"]);const e=qi(t,{width:15,height:15,text:"",toggle:i!=null&&i.Nki_!=null&&i.Nki_(),textanchor:dA.ne_,disabled:!1,state:e$.Off});this.state=e["state"];this.disabled=e["disabled"];this.Ski_=!1;this.Gki_=e["toggle"];this.Rf_=e["styles"];this.Rki_=e["onclick"];this.wX_=[5,3,5,3];this.I4t_=i;this.initialize(e);this.kY_(!0);this.aq_(!0)}initialize(t){this.GY_([this.kki_=new dp({left:0,top:0,right:1,bottom:1}),this._q_=new YC({text:t["text"],ax:.5,ay:.5}).SE_(t["textanchor"])]);this.Fki_()}Fki_(){let t=this.Rf_["normal"];this.Ski_===!0&&(t=this.Rf_["hover"]);this.state===e$.On&&(t=this.Rf_["pressed"]);this.disabled&&(t=this.Rf_["disabled"]);this.kki_.rB_(t["linestyle"].clone()).iQ_(t["fillstyle"].clone());this._q_.g_(t["textstyle"].clone());const i=$o.measureText(this._q_.SG_(),this._q_.FE_()),s=i.Ie_()+this.wX_[0]+this.wX_[2]+1,e=i.Ts_()+this.wX_[1]+this.wX_[3]+1;this.Lq_(new mA(0,0,s,e)).Cq_(s).dq_(e);this.kki_.ce_(0,0,s,e);this._q_.$I_(s/2);this._q_.tf_(e/2);this.td_()}getState(){return this.state}SG_(){return this._q_==null?null:this._q_.SG_()}setState(t){this.state=t;this.Fki_();return this}Nki_(){return this.Gki_}xki_(t){this.Ski_=t;this.Fki_();return this}isDisabled(){return this.disabled}Lki_(t){this.disabled=t;this.Fki_();return this}Uki_(){this.I4t_!=null&&this.I4t_.Nki_()===!0&&this.I4t_.Yki_(e$.Off)}click(){if(this.disabled===!1){this.Uki_();const t=undefined;(this.state===e$.Off?e$.On:e$.Off)===e$.On&&this.Rki_!=null&&typeof this.Rki_=="function"&&this.Rki_.call(this,this);this.Tki_()}}Tki_(){}};i=t([_s("geotoolkit.widgets.Button")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUZXh0IjoiU0dfIiwiaXNUb2dnbGUiOiJOa2lfIiwic2V0SG92ZXIiOiJ4a2lfIiwic2V0RGlzYWJsZWQiOiJMa2lfIn19fSAg"),n$=Ci(function(){let i=class t extends eK{constructor(t){super(t);this.UU_=qi(t,{layout:new lw,toggle:!1});this.Zqt_=[];this.C4t_(t);this.A4t_();this.kY_(!0)}C4t_(t){const i=[];this.KY_();t["buttons"].forEach((t=>{const s=new A$(t,this);i.push(s)}));this.aq_(!0).GY_(i);this.Zqt_=i;this.Kki_();this.Hki_()}Hki_(){this.bG_().ce_(this.rt_()).add(this.Zqt_).eT_()}Kki_(){let t=0,i=0,s=0,e=0;this.Zqt_.forEach((A=>{const n=A.rt_().Ie_(),h=A.rt_().Ts_();t=t>n?t:n;i=i>h?i:h;s+=n;e+=h}));const A=this.UU_["layout"];if(A instanceof lw){this.Cq_(s);this.dq_(i)}else if(A instanceof ww){this.Cq_(t);this.dq_(e)}else{this.Cq_(s);this.dq_(e)}}A4t_(t){const i=new h$(this);this.h4t_(i);this.yxt_=i;return this}Nki_(){return this.UU_["toggle"]}Yki_(t){this.Zqt_.forEach((i=>{i.setState(t)}))}cUt_(){return this.yxt_}qki_(t){return t==null||this.Zqt_==null||this.Zqt_.length===0||this.Zqt_.length<t?null:this.Zqt_[t]}Jki_(t){if(t==null||this.Zqt_==null||this.Zqt_.length===0)return null;const i=this.Zqt_.filter((i=>t===i.SG_()));return i.length>0?i[0]:null}};i=t([_s("geotoolkit.widgets.ButtonWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpbml0aWFsaXplVG9vbHMiOiJBNHRfIiwiaXNUb2dnbGUiOiJOa2lfIiwidG9nZ2xlQWxsIjoiWWtpXyIsImdldEJ1dHRvbkJ5SW5kZXgiOiJxa2lfIiwiZ2V0QnV0dG9uQnlUZXh0IjoiSmtpXyJ9fX0g"),h$=function(){let i=class t extends OS{constructor(t){super(t=qi(t,{name:"buttongrouptool",layer:t instanceof Ic?t:null},!0));this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),pointerup:this.Ct_.bind(this)});this.OSt_=new bC}Pki_(t,i){const s=this.mgt_(),e=this.bFt_(s,t),A=undefined;Gn.xI_(s.rt_(),s.getBounds(),!1,!1).transformPoint(e,e);const n=undefined;return this.OSt_.select(s,e.getX(),e.getY(),2).filter((function(t){return t instanceof i}))}zFt_(t){const i=this.Pki_(t,A$),s=this.Pki_(t,n$);this.Vki_=i;if(i!=null&&i.length>0){i[0].click();s[0].Kki_()}}XFt_(t){const i=this.Pki_(t,A$),s=this.Pki_(t,n$);if(i!==this.Oki_){this.Oki_!=null&&this.Oki_[0].xki_(!1);if(i!=null&&i.length>0){i[0].xki_(!0);this.Oki_=i;Array.isArray(s)&&s.length>0&&s[0].Kki_()}}}Ct_(t){this.Vki_!=null&&this.Vki_.length!==0&&this.Vki_[0].Nki_()!==!0&&this.Vki_[0].setState(e$.Off)}};i=t([_s("geotoolkit.widgets.ButtonGroupTool")],i);return i}();const r$="#e0e0e0",o$="#f5f5f5",l$="16px Roboto",u$="#757575",a$="13px Roboto",g$=10,c$=function(t,i,s){if(t[i]!=null&&s[i]!=null&&t[i]["autominmax"]!==!0){s[i]["autominmax"]=!1;s[i]["min"]=t[i]["min"];s[i]["max"]=t[i]["max"]}},I$=function(t){switch(t){case ha.eG_:return{bottom:g$};case ha.nG_:return{top:g$};case ha.sG_:return{right:g$};case ha.AG_:return{left:g$}}return null},f$=function(t,i){return this.Wki_!=null?this.Wki_.format(Math.pow(10,t).toFixed(2)):Math.pow(10,t).toFixed(2)},C$=function(t,i){return this.Wki_!=null?this.Wki_.format(Math.pow(10,i).toFixed(2)):Math.pow(10,i).toFixed(2)},d$=function(t,i,s){return this.Wki_!=null?this.Wki_.format(t.toFixed(2)):t.toFixed(2)},B$=function(t,i){return this.Wki_!=null?this.Wki_.format(i.toFixed(2)):i.toFixed(2)};var w$=Ci(function(){let i=class t extends _H{constructor(t){t==null&&(t={});const i=15,s=25,e=15,A=30,n=15,h=s+A+n,r=50;t["viewcachesize"]=t["viewcache"]||t["viewcachesize"]!=null?qi(t["viewcachesize"],{width:256,height:256}):null;t["border"]=qi(t["border"],{color:"transparent"},!0);let o={bounds:t["bounds"],border:t["border"],north:null,south:null,west:null,east:null,viewcache:!0,viewcachesize:t["viewcachesize"],annotationssizes:{north:i+s,west:i+A+s,south:i+A+e+s,east:i+e+h+g$},annotationitemswrap:!1};o=qi(t,o);o["x"]=qi(o["x"],{neatlimits:!1,preciselimits:!1,minspan:r});o["y"]=qi(o["y"],{neatlimits:!1,preciselimits:!1,minspan:r});o["z"]=qi(o["z"],{neatlimits:!1,preciselimits:!1,minspan:r});super(o);this.yki_=this.zki_.bind(this);this.Xki_=this.jki_.bind(this);this.Zki_=this._ki_.bind(this);this.$ki_=this.tFi_.bind(this);this.qRi_=o["viewcache"];this.PRi_={};if(o["viewcachesize"]!=null){this.qRi_=!0;this.PRi_=o["viewcachesize"]}this.iFi_=null;this.xRi_=!1;const l=this._C_();this.rd_(!1);this.s3t_.W4_();this.NZ_={x:new WC({orientation:fg.ux_,neatlimits:o["x"]["neatlimits"],preciselimits:o["x"]["preciselimits"]}),y:new WC({orientation:fg.ax_,neatlimits:o["y"]["neatlimits"],preciselimits:o["y"]["preciselimits"]}),z:null};this.sFi_={x:null,y:null,z:null};this.eFi_=this.AFi_.bind(this);this.nFi_=this.hFi_.bind(this);this.rFi_={x:!1,y:!1,z:!1};this.oFi_={x:null,y:null,z:null};this.ZRi_={x:[],y:[],z:[]};this.lFi_={x:!1,y:!1,z:!1};this.uFi_={x:ha.nG_,y:ha.sG_,z:ha.AG_};this.sNi_={x:null,y:null,z:null};this.tki_={x:0,y:0,z:0};this.iki_={x:1,y:1,z:1};this.a3t_={x:null,y:null,z:null};this.NIt_={x:!1,y:!1,z:!1};this.pZ_=rQ.j4_(this.s3t_,{location:ha.eG_,text:"",textstyle:{font:l$}});this.pZ_["text"].qC_("crossplot-title");const u=rQ.X4_(this.s3t_,{location:this.uFi_["x"],connect:!0,title:{text:"",visible:!1,textstyle:new qa({color:u$,font:a$}),alignment:dA.re_},annotationitemswrap:!1})["axis"];u.qC_("crossplot-horizontal-axis");u.KE_(this.NZ_["x"]);const a=o["x"]!=null&&o["x"]["axis"]!=null&&o["x"]["axis"]["title"]!=null?null:rQ.j4_(this.s3t_,{location:this.uFi_["x"],text:"x"}),g=o["y"]!=null&&o["y"]["axis"]!=null&&o["y"]["axis"]["title"]!=null?null:rQ.j4_(this.s3t_,{location:this.uFi_["y"],text:"y"}),c=rQ.X4_(this.s3t_,{location:this.uFi_["y"],connect:!0,autolabelrotation:!0,autolabelrotationangle:-Math.PI/2,title:{text:"",visible:!1,textstyle:new qa({color:u$,font:a$}),alignment:dA.he_},annotationitemswrap:!1})["axis"];c.qC_("crossplot-vertical-axis");c.KE_(this.NZ_["y"]);const I=qi(o["z"]!=null&&o["z"]["axis"]!=null?o["z"]["axis"]["title"]:null,{text:"",visible:!1,textstyle:new qa({color:u$,font:a$}),alignment:dA.ne_}),f={location:this.uFi_["z"],componentsizes:{colorbox:n,axis:A,title:s},axis:{autolabelrotation:o["z"]==null||o["z"]["autolabelrotation"]==null||o["z"]["autolabelrotation"],autolabelrotationangle:-Math.PI/2,title:I},colorprovider:new bo({values:[0,1],colors:["black","black"]}),title:{text:"zlabel",textstyle:new qa({color:u$,font:a$})},flip:!1};this.Cm_=null;this.lVt_=new av(f).gk_(this.qRi_?this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]):new tI:null).kY_(!0).Ub_(I$(this.uFi_["z"]));this.aFi_=null;this.Fwt_={x:u,y:c,z:this.lVt_.JV_()["axis"]["item"]};this._$_={x:a,y:g,z:I.visible===!1?this.lVt_.JV_()["title"]["item"]:null};this.s3t_.K4_(this.lVt_,this.uFi_["z"]);this.gFi_=new Qv;this.lki_=new sI;this.lki_.GY_([(new TQ).JC_("xplot_layer").GY_(this.gFi_)]);this.cFi_=(new Qv).HC_("default");this.IFi_=(new TQ).JC_("highlight_layer").GY_(this.cFi_);this.uki_=(new sI).GY_(this.IFi_);this.fFi_={default:{"cross-plot":this.cFi_,"highlighted-indices":[],data:[],options:{}}};this.s3t_.LM_().xY_(0,this.uki_);this.s3t_.LM_().xY_(0,this.lki_);this.s3t_.LM_().Eq_(!0);this.Uei_.Eq_(!0);this.aki_();this.s3t_.z4_();this.Xei_();this.CFi_.nf_(!1);this.lVt_.nf_(!1);this.uki_.gk_(this.qRi_?this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]):new tI:null);this.lki_.gk_(this.qRi_?this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]).wH_(null):(new tI).wH_(null):null);this.lki_.kY_(!0);this.A4t_();this.setData(t);this.rd_(l);this.rAi_(this.dFi_());this.Xei_();this.BFi_=this.uAi_();this.wFi_=()=>{const t=this.lVt_.Nwt_();if(this.lVt_.$C_()){this.lVt_.Ub_(I$(t));this.uFi_["z"]=t;this.QFi_(t)}else{this.lVt_.Ub_(null);this.EFi_(t)}};this.pFi_=()=>{if(!this.lVt_.$C_())return;const t=this.uFi_["z"],i=this.lVt_.Nwt_();if(i!==t){this.lVt_.Ub_(I$(i));this.uFi_["z"]=i;this.EFi_(t);this.QFi_(i)}};this.lVt_.on(na.tG_,this.pFi_);this.lVt_.on(rh.cC_,this.wFi_);return this}dispose(){if(this.Us_!=null){if(this.Us_ instanceof SM)this.Us_.off("StateChanged",this.yki_);else if(this.Us_ instanceof qb||this.Us_ instanceof Pb){this.Us_.off(Lb.fyt_,this.Zki_);this.Us_.off(Lb.Cyt_,this.$ki_);this.Us_.off(Lb.Rct_,this.Xki_)}}else{let t;for(t in this.sFi_)if(this.sFi_.hasOwnProperty(t)&&this.sFi_[t]!=null){this.sFi_[t].off(xD.gf_,this.eFi_);this.sFi_[t].off(yM.jft_,this.nFi_)}}this.lVt_.off(na.tG_,this.pFi_);this.lVt_.off(rh.cC_,this.wFi_);super.dispose()}Xei_(){const t=this.dFi_();t&&!t.isEmpty()&&this.rAi_(t);super.Xei_();const i=this.s3t_.v4_(ha.ne_);this.CFi_.nf_(this.a3t_["x"].$C_()||this.a3t_["y"].$C_()||this.a3t_["z"].$C_());this.CFi_.ht_(i.rt_());return this}ht_(t){super.ht_(t);this.Pei_();return this}A4t_(){if(this.lVt_==null)return this;super.A4t_();this.eAi_.setOptions({colorbar:this.lVt_});const t=this.mgt_();this.JDt_._Ot_((t=>{for(let i=0;i<t.length;++i)if(t[i]["crossplot"]===this.gFi_)return t[i];return[]})).on(wF.yOt_,((t,i,s)=>{const e=s.getSelection()["indices"];e instanceof Array&&this.vEt_({default:{indices:e}},this._ei_)}));this.iFi_=new AU(t).on(jL.mOt_,((t,i,s)=>{const e=s.getSelection();for(let t=0;t<e.length;t++)e[t]["crossplot"]===this.gFi_&&this.vEt_(e[t]["indices"],this._ei_)})).on(xS.Jkt_,((t,i)=>{if(i.isEnabled()){this.JDt_.Kv_(!1);this.oUt_.Kv_(!1)}else this.oUt_.Kv_(!0)})).Kv_(!1);this.nAi_.add(this.iFi_);this.tAi_.Kv_(!0).on(rY.XZt_,(()=>{this.lki_.gk_(null)})).on(rY.jZt_,(()=>{this.lki_.gk_(this.qRi_?this.PRi_!=null?new tI(this.PRi_["width"],this.PRi_["height"]).wH_(null):(new tI).wH_(null):null)}));return this}aki_(){const t=vd.Ai_(),i=t.create(),s=t.create(),e=(new JC).xj_(HC.rj_),A=new fd,n=new fd,h=new fd,r=function(t){t.Vx_("major").setColor(r$);t.Vx_("minor").setColor(o$);t.Hx_("minor",!0);t.Hx_("edge",!1)},o=t.create({ticks:{edge:{visible:!0}}}),l=t.create({ticks:{edge:{visible:!0}}}),u=new fd,a=new fd;r(o);r(l);r(u);r(a);this.$$_={x:i,y:s,z:e,xlog:A,ylog:n,zlog:h};this.gki_={x:o,y:l,xlog:u,ylog:a};if(this.fNt_==null){this.fNt_=new sB(o,l);this.fNt_.KE_(fg.ux_,this.NZ_["x"]);this.fNt_.KE_(fg.ax_,this.NZ_["y"]);const t=new TQ;t.JC_("grid_layer");t.GY_(this.fNt_);this.lki_.xY_(0,t);this.a3t_["x"]=new oN({bounds:new mA(0,0,1,1),bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")}).nf_(!1);this.a3t_["y"]=new oN({bounds:new mA(0,0,1,1),bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")}).nf_(!1);this.a3t_["z"]=new oN({bounds:new mA(0,0,1,1),bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")}).nf_(!1);const i=(new sI).GY_(this.a3t_["x"]),s=(new sI).GY_(this.a3t_["y"]).rotate(-Math.PI/2,.5,.5),e=(new sI).GY_(this.a3t_["z"]).rotate(Math.PI/2,.5,.5);let A=null;this.qRi_&&(A=this.PRi_==null?new tI:new tI(this.PRi_["width"],this.PRi_["height"]));const n=this.s3t_.v4_(ha.ne_);this.CFi_=(new sI).gk_(A).nf_(!1).ht_(n.getBounds()).Lq_(new mA(0,0,1,1)).GY_([new dp({left:0,top:0,width:1,height:1,linestyle:new hl("transparent")}),i,s,e]);n.GY_(this.CFi_)}this.cki_();return this}cki_(){this.Fwt_["x"].jZ_(this.$$_["x"+(this.lFi_["x"]?"log":"")]);this.Fwt_["y"].jZ_(this.$$_["y"+(this.lFi_["y"]?"log":"")]);this.Fwt_["z"].jZ_(this.$$_["z"+(this.lFi_["z"]?"log":"")]);this.fNt_.jZ_(fg.ax_,this.gki_["x"+(this.lFi_["x"]?"log":"")]);this.fNt_.jZ_(fg.ux_,this.gki_["y"+(this.lFi_["y"]?"log":"")]);const t=this.lFi_["z"]?Math.log(this.tki_["z"])/Math.LN10:this.tki_["z"],i=this.lFi_["z"]?Math.log(this.iki_["z"])/Math.LN10:this.iki_["z"];this.Fwt_["z"].Lq_(new mA(t,t,i,i))}setData(t){Pi(t,this.getData());this.Jei_(t["tools"]);t["bounds"]!=null&&this.ht_(t["bounds"]);this.Cki_(t["header"]);if(t["datasource"]!=null){if(this.Us_!=null)if(this.Us_ instanceof SM)this.Us_.off("StateChanged",this.yki_);else if(this.Us_ instanceof qb||this.Us_ instanceof Pb){this.Us_.off(Lb.fyt_,this.Zki_);this.Us_.off(Lb.Cyt_,this.$ki_);this.Us_.off(Lb.Rct_,this.Xki_)}this.Us_=t["datasource"];if(this.Us_!=null)if(this.Us_ instanceof SM)this.Us_.on("StateChanged",this.yki_);else if(this.Us_ instanceof qb||this.Us_ instanceof Pb){this.Us_.on(Lb.fyt_,this.Zki_);this.Us_.on(Lb.Cyt_,this.$ki_);this.Us_.on(Lb.Rct_,this.Xki_)}}t["marker"]!=null&&this.mFi_(t["marker"]);if(t["colorprovider"]!==void 0){this.UBt_(t["colorprovider"]);this.eAi_.UBt_(this.Swt_())}t["x"]!=null&&this.yFi_("x",t["x"]);t["y"]!=null&&this.yFi_("y",t["y"]);t["z"]!=null&&this.yFi_("z",t["z"]);this.Jei_(t["tools"]);return this}getData(t){t=t||{};const i={tools:this.SAi_()};this.getBounds()!=null&&(i["bounds"]=this.getBounds().N_());i["header"]=this.Eki_();i["x"]=this.DFi_("x",t);i["y"]=this.DFi_("y",t);i["z"]=this.DFi_("z",t);this.Swt_()!=null&&(i["colorprovider"]=this.Swt_().N_());i["marker"]=this.MFi_();return i}N_(){return qi(super.N_(),this.getData())}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);return this.setOptions(t)}setOptions(t){const i=Pi(t,this.N_());this.Cki_(i["header"]);i["marker"]!=null&&this.mFi_(i["marker"]);if(i["colorprovider"]!==void 0){this.UBt_(i["colorprovider"]);this.eAi_.UBt_(this.Swt_())}i["tools"]!==void 0&&this.Jei_(i["tools"]);i["x"]!=null&&this.yFi_("x",i["x"]);i["y"]!=null&&this.yFi_("y",i["y"]);i["z"]!=null&&this.yFi_("z",i["z"]);return this}JV_(){const t=this.getData();t["header"]=this.Eki_();t["marker"]=this.MFi_();t["colorprovider"]=this.Swt_();t["tools"]=this.SAi_();return t}mFi_(t){if(t==null)return this;const i={},s={};t["defaultcolor"]!=null&&(i["defaultcolor"]=t["defaultcolor"]);if(t["defaultlinecolor"]!==void 0){i["defaultlinecolor"]=t["defaultlinecolor"];s["defaultlinecolor"]=t["defaultlinecolor"]}if(t["highlightcolor"]!=null){s["defaultcolor"]=t["highlightcolor"];i["highlightcolor"]=t["highlightcolor"]}t["size"]!=null&&(i["symbolsize"]=t["size"]);s["symbolsize"]=t["highlightsize"]!=null?t["highlightsize"]:t["size"];t["painter"]!=null&&(i["painter"]=typeof t["painter"]=="string"?ss(t["painter"]):t["painter"]);s["painter"]=t["highlightpainter"]!=null?typeof t["highlightpainter"]=="string"?ss(t["highlightpainter"]):t["highlightpainter"]:typeof t["painter"]=="string"?ss(t["painter"]):t["painter"];this.gFi_.setData(i);this.cFi_.setData(s);this.vFi_=s;return this}MFi_(){const t={},i=this.gFi_.getData(),s=this.cFi_.getData(),e=i["painter"];t["painter"]=typeof i["painter"]=="string"?i["painter"]:e.D_!=null?e.D_():i["painter"];t["size"]=i["symbolsize"];t["defaultcolor"]=i["defaultcolor"].ps_();t["defaultlinecolor"]=i["defaultlinecolor"]instanceof nA?i["defaultlinecolor"].ps_():null;t["highlightcolor"]=i["highlightcolor"].ps_();t["highlightsize"]=s["symbolsize"];return t}Cki_(t){if(t==null)return this;const i={};if(t["title"]!=null){this.pZ_["text"].dt_(t["title"]);ua.NG_(this.pZ_["text"],this.pZ_["group"],ha.eG_);this.pZ_["group"].nf_(this.pZ_["text"].$C_())}t["annotationsize"]!=null&&(i["north"]=t["annotationsize"]);this.vei_(i);this.Xei_();return this}Eki_(){return{title:this.pZ_["text"].N_(),annotationsize:this.s3t_.v4_(ha.eG_).cG_()}}bFi_(t){return t==="x"?this.lFi_[t]?f$.bind(this):d$.bind(this):t==="y"?this.lFi_[t]?C$.bind(this):B$.bind(this):this.lFi_[t]?f$.bind(this):d$.bind(this)}yFi_(t,i,s){const e=s!=null?s:{};if(i==null)return e;if((t=t.toLowerCase())!=="x"&&t!=="y"&&t!=="z")return e;let A=!1;const n={},h={};i["location"]!==void 0&&this.uFi_[t]!==i["location"]&&this.NFi_(t,i);if(i["neatlimits"]!==void 0){this.NIt_[t]=i["neatlimits"];if(this.NZ_[t]){i["minspan"]&&this.NZ_[t].setOptions({minspan:i["minspan"]});i["preciselimits"]!==void 0&&this.NZ_[t].setOptions({preciselimits:i["preciselimits"]});this.NZ_[t].Vj_(i["neatlimits"])}}if(i["datasource"]===void 0)if(this.Us_!=null&&i["name"]!=null){let t=null;this.Us_.query().Gw_('item => name(item) == "'+i["name"]+'"').select((function(i){t=i}));t!=null&&(i["datasource"]=t)}else this.sFi_[t]!=null&&(i["datasource"]=this.sFi_[t]);if(i["datasource"]!=this.sFi_[t]){A=!0;if(this.Us_==null&&this.sFi_[t]!=null){this.sFi_[t].off(xD.gf_,this.eFi_);this.sFi_[t].off(yM.jft_,this.nFi_)}this.sFi_[t]=i["datasource"];if(this.Us_==null&&this.sFi_[t]!=null){this.sFi_[t].on(xD.gf_,this.eFi_);this.sFi_[t].on(yM.jft_,this.nFi_)}}const r=this.sFi_[t];if(i["unit"]!==void 0&&(i["unit"]==null!=(this.sNi_[t]==null)||i["unit"]!=null&&!OA.Ai_().gn_(i["unit"]).pn_(this.sNi_[t]))){this.sNi_[t]=i["unit"];r!=null&&(A=!0)}if(r!=null)if(r.gn_()==null||r.gn_()!=null&&r.gn_().fn_()===""){if(this.sNi_[t]!=null){this.sNi_[t]=null;A=!0}}else if(!OA.Ai_().gn_(r.gn_()).Qn_(this.sNi_[t])){this.sNi_[t]=r.gn_();A=!0}i["autominmax"]!=null&&(this.rFi_[t]=i["autominmax"]);A&&(r!=null?i["data"]==null&&(i["data"]=r.toArray(!1,this.sNi_[t])):i["data"]=[]);let o=[];if(i["data"]!=null){A=!0;if(this.oFi_[t]==null&&i["data"].length>0){o=NA.oA_(i["data"]);i["min"]==null&&(i["min"]=o[0]);i["max"]==null&&(i["max"]=o[1]);i["reversed"]==null&&(i["reversed"]=t==="y"?i["min"]<i["max"]:i["min"]>i["max"])}this.oFi_[t]=i["data"];this.ZRi_[t]=[];for(let s=0;s<i["data"].length;++s)this.ZRi_[t].push(Math.log(i["data"][s])/Math.LN10)}if(this.rFi_[t]===!0)if(r!=null){i["min"]=r.nA_(this.sNi_[t]);i["max"]=r.hA_(this.sNi_[t])}else if(this.oFi_[t]!=null){o=NA.oA_(this.oFi_[t]);i["min"]=o[0];i["max"]=o[1]}if(i["logarithmic"]!=null&&this.lFi_[t]!==i["logarithmic"]){A=!0;this.lFi_[t]=i["logarithmic"];const s=this.bFi_(t);if(t==="x"){this.$ei_.hOt_(ha.eG_,{textconverter:s});this.$ei_.hOt_(ha.nG_,{textconverter:s})}if(t==="y"){this.$ei_.hOt_(ha.AG_,{textconverter:s});this.$ei_.hOt_(ha.sG_,{textconverter:s})}this.NZ_[t]!=null&&this.NZ_[t].iZ_(this.lFi_[t])}if(i["label"]!=null&&i["label"]["text"]==null&&r!=null){const s=[r.dn_()];if(this.sNi_[t]instanceof JA){s.push(" (");s.push(this.sNi_[t].fn_());s.push(")")}else if(typeof this.sNi_[t]=="string"){s.push(" (");s.push(this.sNi_[t]);s.push(")")}i["label"]["text"]=s.join("")}if(i["label"]!=null){if(this._$_[t]!=null)if(t==="z")this._$_[t].dt_(i["label"]);else{this._$_[t]["text"].dt_(i["label"]);ua.NG_(this._$_[t]["text"],this._$_[t]["group"],this.uFi_[t])}else if(t==="z"){const s=qa.jD_(this,this.Fwt_[t].v__(),i["label"]["textstyle"],!0,null);h["axis"]={title:{text:i["label"]["text"],textstyle:s!=null?s.clone():i["label"]["textstyle"]}}}else{const s=i["label"]["textstyle"]?qa.jD_(this,this.Fwt_[t].v__(),i["label"]["textstyle"],!0,null):this.Fwt_[t].v__();this.Fwt_[t].E__({text:i["label"]["text"],textstyle:s})}if(t==="z"&&i["label"]!=null){i["label"]["text"]!=null&&(h["titletext"]=i["label"]["text"]);i["label"]["textstyle"]!=null&&(h["titletextstyle"]=i["label"]["textstyle"])}}if(i["axis"]!=null){i["axis"]["title"]!=null&&this.Fwt_[t].E__(i["axis"]["title"]);i["axis"]["baseline"]!=null&&this.Fwt_[t].PZ_(i["axis"]["baseline"]);i["axis"]["autolabelrotation"]!=null&&(t==="z"?this.lVt_.setOptions({axis:{autolabelrotation:i["axis"]["autolabelrotation"]}}):this.Fwt_[t].Y__(i["axis"]["autolabelrotation"]));i["axis"]["autolabelrotationangle"]!=null&&(t==="z"?this.lVt_.setOptions({axis:{autolabelrotationangle:i["axis"]["autolabelrotationangle"]}}):this.Fwt_[t].U__(i["axis"]["autolabelrotationangle"]))}i["annotationsize"]!=null&&(n[this.uFi_[t]]=i["annotationsize"]);i["min"]!=null&&(this.tki_[t]=i["min"]);i["max"]!=null&&(this.iki_[t]=i["max"]);if(i["neatlimits"]===!0&&i["preciselimits"]!==!0){const i=NA.iA_(this.tki_[t],this.iki_[t],!1,!1);this.tki_[t]=i.Xs_();this.iki_[t]=i.zs_()}A===!0&&(e["data"+t]=this.lFi_[t]?this.ZRi_[t]:this.oFi_[t]);i["tickgenerator"]!=null&&(this.$$_[t+(this.lFi_[t]?"log":"")]=i["tickgenerator"]);i["gridtickgenerator"]!=null&&t!=="z"&&(this.gki_[t+(this.lFi_[t]?"log":"")]=i["gridtickgenerator"]);if(i["axisticks"]!=null){this.$$_[t].dt_(i["axisticks"]);this.$$_[t+"log"].dt_(i["axisticks"])}if(i["gridticks"]!=null&&t!=="z"){this.gki_[t].dt_(i["gridticks"]);this.gki_[t+"log"].dt_(i["gridticks"])}if(this.lFi_[t]){e["min"+t]=this.tki_[t]===0?0:Math.log(this.tki_[t])/Math.LN10;e["max"+t]=this.iki_[t]===0?0:Math.log(this.iki_[t])/Math.LN10}else{e["min"+t]=this.tki_[t];e["max"+t]=this.iki_[t]}if(t==="z"){h["min"]=e["minz"];h["max"]=e["maxz"]}const l={};if(i["histogram"]!=null){const s=this.a3t_[t];i["histogram"]["visible"]!=null&&s.nf_(i["histogram"]["visible"]);i["histogram"]["fillstyle"]!=null&&(l["fillstyle"]=i["histogram"]["fillstyle"]);i["histogram"]["linestyle"]!=null?l["linestyle"]=i["histogram"]["linestyle"]:i["histogram"]["linecolor"]!=null&&(l["linestyle"]=hl.Wi_(i["histogram"]["linecolor"]));i["histogram"]["bins"]!=null&&(l["bins"]=Number(i["histogram"]["bins"]))}if(s==null){this.cki_();this.gFi_.setData(e);this.SFi_(this.cFi_,this.yEt_());if(t!=="z"){const i={};i["min"+t]=e["min"+t];i["max"+t]=e["max"+t];for(const t in this.fFi_)this.fFi_.hasOwnProperty(t)&&this.fFi_[t]["cross-plot"].setData(i)}this.rAi_(this.dFi_())}else if(t!=="z"){s["min"+t]=e["min"+t];s["max"+t]=e["max"+t]}if(i["reversed"]!=null){t==="x"&&this.s3t_.LM_().pq_(i["reversed"]);t==="y"&&this.s3t_.LM_().Eq_(i["reversed"]);t==="z"&&(h["flip"]=i["reversed"])}this.vei_(n);if(t==="z"){this.Cm_ instanceof bo&&(this.Cm_.qm_()!=null?this.Cm_.setScale(this.Cm_.qm_(),h["min"],h["max"]):this.Cm_.Hm_(h["min"],h["max"]));this.lVt_.setOptions(h).Ub_(I$(this.uFi_["z"]));i["legendvisible"]!=null&&this.lVt_.nf_(i["legendvisible"]);this.lVt_.zT_()}this.Xei_().cki_();t==="z"&&this.lVt_.wq_();this.gFi_.Wj_();if(this.a3t_[t].$C_()===!0){this.a3t_[t].setData(l);this.d3t_(t)}return e}dFi_(){let t=this.gFi_.getBounds();this.NZ_["x"].Wj_(t.we_(),t.Qe_(),this.gFi_.if_());t=t.clone().setX(this.NZ_["x"].nA_()).de_(this.NZ_["x"].hA_()-this.NZ_["x"].nA_());this.NZ_["y"].Wj_(t.Ee_(),t.pe_(),this.gFi_.if_());t=t.clone().setY(this.NZ_["y"].nA_()).Be_(this.NZ_["y"].hA_()-this.NZ_["y"].nA_());return t}Pei_(){super.Pei_();if(!this.xRi_&&this.gFi_){this.xRi_=!0;const t=this.oAi_(),i=this.dFi_();i.Ce_(t)||this.rAi_(i);this.xRi_=!1}return this}DFi_(t,i){if((t=t.toLowerCase())!=="x"&&t!=="y"&&t!=="z")return{};const s={};s["unit"]=this.sNi_[t];this.sFi_[t]==null&&this.oFi_[t]==null||(s["autominmax"]=this.rFi_[t]);if(i!=null&&i["no-data"]!==!0){s["datasource"]=this.sFi_[t];s["data"]=this.oFi_[t]}this._$_[t]!=null?s["label"]=t==="z"?this._$_[t].N_():this._$_[t]["text"].N_():s["label"]={text:this.Fwt_[t].mV_(),textstyle:this.Fwt_[t].v__()};const e=this.s3t_.v4_(this.uFi_[t]);s["annotationsize"]=t==="x"?e.cG_():e.gG_();s["min"]=this.tki_[t];s["max"]=this.iki_[t];s["logarithmic"]=this.lFi_[t];s["neatlimits"]=this.NIt_[t];if(this.NZ_[t]){s["minspan"]=this.NZ_[t].JV_()["minspan"];s["preciselimits"]=this.NZ_[t].JV_()["preciselimits"]}else s["preciselimits"]=!1;let A;if(this.$$_[t]){A=this.$$_[t].N_();s["axisticks"]=A}if(t!=="z"){A=this.gki_[t].N_();s["gridticks"]=A}const n={},h=this.a3t_[t];n["visible"]=h.$C_();n["bins"]=h.cvt_();n["color"]=h.ct_().getColor();n["linecolor"]=h.gt_().getColor();s["histogram"]=n;t==="z"&&(s["reversed"]=this.lVt_.JV_()["flip"]);t==="x"&&(s["reversed"]=this.s3t_.LM_().ZY_());t==="y"&&(s["reversed"]=this.s3t_.LM_().jY_());t==="z"&&(s["legendvisible"]=this.lVt_.$C_());s["location"]=this.uFi_[t];return s}NFi_(t,i){let s=!1;if(t==="z"){this.lVt_.setOptions({location:i["location"]});this.s3t_.removeItem(this.lVt_,this.uFi_[t]);this.s3t_.K4_(this.lVt_,i["location"])}else{this.s3t_.disconnect(this.Fwt_[t]);this.s3t_.removeItem(this.Fwt_[t],this.uFi_[t]);const s=Sd.Ai_().p$_(i["location"]),e=qi(s,this.Fwt_[t].N_());this.Fwt_[t].setOptions(e);this.s3t_.connect(this.Fwt_[t],this.s3t_.LM_());this.s3t_.K4_(this.Fwt_[t],i["location"])}if(i["label"]==null){i["label"]={location:i["location"]};s=!0}else if(i["label"]["location"]==null){i["label"]["location"]=i["location"];s=!0}if(s&&this._$_[t]!=null){const s=this._$_[t]["text"];if(t!=="z")switch(i["location"]){case ha.sG_:s.at_(Gn.FI_(+Math.PI/2,s.uR_(),s.aR_()));break;case ha.AG_:s.at_(Gn.FI_(+Math.PI/2,s.uR_(),s.aR_()));break;default:s.at_(null)}else switch(i["location"]){case ha.sG_:this.lVt_.Mwt_(sv.sG_);break;case ha.AG_:this.lVt_.Mwt_(sv.AG_);break}if(t!=="z"){const s=this._$_[t]["group"];this.s3t_.removeItem(s,this.uFi_[t]);i["location"]===ha.eG_||i["location"]===ha.sG_?this.s3t_.H4_(0,s,i["location"]):this.s3t_.K4_(s,i["location"])}}this.uFi_[t]=i["location"]}d3t_(t){if(this.a3t_==null||this.a3t_[t]==null||this.a3t_[t].$C_()===!1)return this;const i=this.s3t_.LM_().ot_(),s=this.gFi_.NEt_(i).map((function(i){return i[t]}));let e,A;if(t!=="z"){e=t==="x"?i.getX():i.getY();A=e+(t==="x"?i.Ie_():i.Ts_())}else{e=this.lVt_.JV_()["range"]["min"];A=this.lVt_.JV_()["range"]["max"]}this.a3t_[t].setData({data:s,minvalue:e,maxvalue:A});t==="y"&&this.a3t_[t].getParent().pq_(this.s3t_.LM_().ZY_());t==="x"&&this.a3t_[t].getParent().Eq_(this.s3t_.LM_().jY_());t==="z"&&this.a3t_[t].getParent().pq_(this.s3t_.LM_().ZY_());this.a3t_[t].td_();return this}_ki_(t,i,s){this.eEt_(s["from"],s["count"])}tFi_(t,i,s){this.zQt_(s["from"],s["count"])}jki_(){const t={x:{axisname:"x",dataModified:!1,boundsChanged:!1,dataCommands:[],changed:!1,exists:!1,data:null},y:{axisname:"y",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null},z:{axisname:"z",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null}};let i;for(i in this.sFi_)this.sFi_.hasOwnProperty(i)&&(t[i]["exists"]=!0);const s=this.getData({"no-data":!0});c$(s,"x",t);c$(s,"y",t);c$(s,"z",t);this.setData(t)}zki_(t,i,s){if(!((s=s["mapdata"])instanceof Map))return;const e={x:{axisname:"x",dataModified:!1,boundsChanged:!1,dataCommands:[],changed:!1,exists:!1,data:null},y:{axisname:"y",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null},z:{axisname:"z",dataModified:!1,dataCommands:[],boundsChanged:!1,changed:!1,exists:!1,data:null}};let A,n;for(n in this.sFi_){if(!this.sFi_.hasOwnProperty(n))continue;e[n]["exists"]=!0;const t=this.sFi_[n];if(t==null)continue;const i=s.has(t)?s.get(t):null;let h;if(i!=null)for(A=0;A<i.length;A++){e[n]["changed"]=!0;const s=i[A]["data"];if(s)if(s["name"]==="state"){if(s["value"]["min"]!=null){e[n]["min"]=s["value"]["min"];e[n]["boundsChanged"]=!0}if(s["value"]["max"]!=null){e[n]["max"]=s["value"]["max"];e[n]["boundsChanged"]=!0}const i=s["value"]["range"];if(i!=null&&i["changes"]!=null){e[n]["dataModified"]=!0;if(i["changes"]==="shifted")e[n]["dataCommands"].push({name:"shifted",amount:i["amount"]});else if(i["changes"]===HD.Uct_)e[n]["dataCommands"].push({name:i["changes"],amount:i["amount"]});else if(i["changes"]===HD.Yct_)e[n]["dataCommands"].push({name:i["changes"],from:i["from"],amount:i["amount"]});else if(i["changes"]===UD.pct_){h=this.DFi_(n,{});if(h["datasource"]!=null){e[n]["name"]="reset";e[n]["data"]=h["datasource"];e[n]["src"]=t}}}}else if(s["name"]==="data"){e[n]["data"]=s["value"];e[n]["name"]="data";e[n]["src"]=t}}}const h=(t,i)=>{if(!t["exists"]||!i["exists"])return!1;let s=t["boundsChanged"]&&this.rFi_[t["axisname"]]||i["boundsChanged"]&&this.rFi_[i["axisname"]]||t["changed"]!==i["changed"]||t["dataModified"]!==i["dataModified"]||t["dataCommands"].length!==i["dataCommands"].length||t["name"]==="reset"||i["name"]==="reset";if(!s&&t["dataCommands"].length>0){const e=t["dataCommands"],A=i["dataCommands"];for(let t=0;t<e.length;++t)if(e[t]["name"]!==A[t]["name"]||e[t]["amount"]!==A[t]["amount"]||e[t]["name"]===HD.Yct_&&e[t]["from"]!==A[t]["from"]){s=!0;break}}return s};let r={};if(h(e["x"],e["y"])||h(e["x"],e["z"])){e["x"]["changed"]&&(r=this.AFi_(xD.gf_,e["x"]["src"],e["x"],r));e["y"]["changed"]&&(r=this.AFi_(xD.gf_,e["y"]["src"],e["y"],r));e["z"]["changed"]&&(r=this.AFi_(xD.gf_,e["z"]["src"],e["z"],r));this.cki_();this.gFi_.setData(r);this.rAi_(this.dFi_())}else{const t=e["x"]["dataCommands"];for(A=0;A<t.length;++A){const i=t[A];i["name"]==="shifted"?this.sEt_(i["amount"]):i["name"]===HD.Uct_?this.ZQt_(i["amount"]):i["name"]===HD.Yct_&&this.zQt_(i["from"],i["amount"])}if(t.length===0){const t=this.getData({"no-data":!0});c$(t,"x",e);c$(t,"y",e);c$(t,"z",e);this.setData(e)}}}AFi_(t,i,s,e){e=this.GFi_("x",t,i,s,e);e=this.GFi_("y",t,i,s,e);return e=this.GFi_("z",t,i,s,e)}GFi_(t,i,s,e,A){if(i!==xD.gf_)return A;if(!(s instanceof zD||s instanceof bM))return A;if(this.sFi_[t]!==s)return A;const n={data:s.toArray(!1,this.sNi_[t])};if(s["autominmax"]===!0){n["min"]=s.nA_(this.sNi_[t]);n["max"]=s.hA_(this.sNi_[t])}return this.yFi_(t,n,A)}hFi_(t,i){const s={};let e;for(e in this.sFi_)this.sFi_.hasOwnProperty(e)&&this.sFi_[e]instanceof KD&&(s[e]={data:this.sFi_[e].toArray(!1,this.sNi_[e])});this.setData(s)}RFi_(t,i){return this.sFi_[t].RFi_(i,this.sNi_[t])}getValue(t,i){if(this.sFi_[t]==null||this.sFi_[t].getLength()<=i)return;let s=this.sFi_[t].getValue(i);this.sFi_[t].gn_()!=null&&(s=this.sFi_[t].gn_().wn_(s,this.sNi_[t]));this.lFi_[t]&&(s=Math.log(s)/Math.LN10);return s}sEt_(t){let i;for(i in this.sFi_)if(this.sFi_.hasOwnProperty(i)){const s=this.lFi_[i]?this.ZRi_[i]:null;if(s!=null)for(let i=0;i<t;i++)s.shift()}this.gFi_.sEt_(t)}zQt_(t,i){let s;for(s in this.sFi_)if(this.sFi_.hasOwnProperty(s)){const e=this.lFi_[s]?this.ZRi_[s]:null;e!=null&&e.splice(t,i)}this.gFi_.zQt_(t,i)}ZQt_(t){const i=this.sFi_["x"].getLength();this.eEt_(i-t,t)}eEt_(t,i){for(let s=t;s<t+i;s++){const t={x:this.getValue("x",s),y:this.getValue("y",s),z:this.getValue("z",s)};this.lFi_["x"]?this.ZRi_["x"][s]=t["x"]:this.oFi_["x"][s]=t["x"];this.lFi_["y"]?this.ZRi_["y"][s]=t["y"]:this.oFi_["y"][s]=t["y"];this.lFi_["z"]?this.ZRi_["z"][s]=t["z"]:this.oFi_["z"][s]=t["z"]}this.gFi_.eEt_(t,i)}UBt_(t){if(t==null){const i=this.gFi_.getData()["defaultcolor"].ps_();t=new bo({values:[0,1],colors:[i,i]})}let i=null;if(t instanceof Mo)this.Cm_=t;else if(t["type"]!=null){i=Mo.Dm_(t["type"]);this.Cm_=i.Wi_(t)}else if(this.Cm_!=null){i=Mo.Dm_(this.Cm_.D_());const s=i.Wi_(t);s!=null&&(this.Cm_=s)}const s={colorprovider:this.Cm_};this.cki_();this.gFi_.setData(s);this.lVt_.setOptions(s);this.lVt_.wq_();this.lVt_.zT_();return this}Swt_(){return this.Cm_}yEt_(t){t==null&&(t="default");return this.fFi_[t]==null?null:this.fFi_[t]["highlighted-indices"]}kFi_(){const t=[];for(const i in this.fFi_)this.fFi_.hasOwnProperty(i)&&t.push(i);return t}FFi_(t){t==null&&(t="default");return this.fFi_[t]==null?null:this.fFi_[t]["options"]}MEt_(t,i){const s=this.gFi_.nwt_(t);this.vEt_(s,i)}SFi_(t,i){const s=[],e=[],A=this.lFi_["x"]?this.ZRi_["x"]:this.oFi_["x"],n=this.lFi_["y"]?this.ZRi_["y"]:this.oFi_["y"];if(Array.isArray(A)&&Array.isArray(n)){const t=i.slice().sort();for(let i=0;i<t.length;++i){const h=t[i];if(i===0||h!==t[i-1]){s.push(A[h]);e.push(n[h])}}}t.setData({datax:s,datay:e})}xFi_(t,i,s){const e=t["cross-plot"];if(i["options"]!=null){e.setData(i["options"]);t["options"]=i["options"]}if(i["indices"]==null)return;const A=s===!0?i["indices"]:t["highlighted-indices"].concat(i["indices"]);t["highlighted-indices"]=A;this.SFi_(e,A)}vEt_(t,i){let s=t;Array.isArray(t)&&(s={default:{indices:t}});const e=function(t,i,s){const e=t.getData(),A={};A["min"+s]=e["min"+s];A["max"+s]=e["max"+s];i.setData(A)};for(const t in s){if(!s.hasOwnProperty(t))continue;const A=undefined;if(this.fFi_[t]==null){const i=(new Qv).HC_(t).setData(this.vFi_).ht_(this.cFi_.getBounds().clone());e(this.cFi_,i,"x");e(this.cFi_,i,"y");this.IFi_.GY_([i]);this.fFi_[t]={"cross-plot":i,"highlighted-indices":[]}}this.xFi_(this.fFi_[t],s[t],i)}return this}nwt_(t){return this.gFi_.nwt_(t)}bgt_(){this.d3t_("x");this.d3t_("y");this.d3t_("z")}Jei_(t){if(t==null)return this;if(t["crosshair"]!=null){t["crosshair"]["north"]!=null&&(t["crosshair"]["north"]["textconverter"]=null);t["crosshair"]["south"]!=null&&(t["crosshair"]["south"]["textconverter"]=null);t["crosshair"]["east"]!=null&&(t["crosshair"]["east"]["textconverter"]=null);t["crosshair"]["west"]!=null&&(t["crosshair"]["west"]["textconverter"]=null)}t["crosshair"]!=null&&(t["crosshair"]["labelformat"]instanceof $g?this.Wki_=t["crosshair"]["labelformatter"]:this.Wki_=new sc({exponentialformat:"0.##E0"}));super.Jei_(t);return this}B3t_(){return this.lVt_}LFi_(t,i,s){if(this.aFi_){this.r4t_(this.aFi_);this.aFi_.dispose()}this.aFi_=new _k({offset:i||0,symbolalignment:t||Zk.v6_,group:this,colorbar:this.lVt_,callback:(t,i,s)=>{const e=new mA(t.x-5,t.y-5,t.x+5,t.y+5),A=this.LM_().if_().gI_(e),n=this.nwt_(A),h=this.getData()["z"]["data"];let r=h!=null&&n.length>0?h[n[n.length-1]]:null;this.lFi_["z"]&&(r=Math.log(r)/Math.LN10);return r}});s instanceof ma&&this.aFi_.k6_(s);this.h4t_(this.aFi_);return this}UFi_(){if(this.aFi_){this.r4t_(this.aFi_);this.aFi_=null}return this}YFi_(){return this.gFi_}vei_(t,i){super.vei_(t);i||this.uFi_==null||(this.BFi_=this.uAi_());return this}EFi_(t){const i=this.uAi_();i[t]=this.BFi_[t];this.vei_(i,!0);return this}QFi_(t){const i=this.uAi_(),s=this.lVt_.R__(),e=this.lVt_.sT_(),A=(s?e.Ts_():e.Ie_())+g$,n=this.BFi_[t],h=this.v4_(t);let r=0;const o=this;h.YY_().forEach((function(t){if(t===o.lVt_)return;const i=t.sT_!=null&&t.sT_();i&&(r+=s?i.Ts_():i.Ie_())}));i[t]=Math.max(NA.Ve_(n)?+n:0,A+r);this.lVt_.ft_({constraint:s?ea.US_:ea.LS_});this.vei_(i,!0);return this}};i=t([_s("geotoolkit.widgets.CrossPlot")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZWZyZXNoTGF5b3V0IjoiWGVpXyIsInNldEJvdW5kcyI6Imh0XyIsImluaXRpYWxpemVUb29scyI6IkE0dF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsInNldE1hcmtlck9wdGlvbnMiOiJtRmlfIiwiZ2V0TWFya2VyT3B0aW9ucyI6Ik1GaV8iLCJzZXRIZWFkZXJPcHRpb25zIjoiQ2tpXyIsImdldEhlYWRlck9wdGlvbnMiOiJFa2lfIiwic2V0QXhpc0RhdGFPcHRpb25zIjoieUZpXyIsInN5bmNocm9uaXplVmlld0xpbWl0cyI6IlBlaV8iLCJnZXRBeGlzRGF0YU9wdGlvbnMiOiJERmlfIiwic2V0Q29sb3JQcm92aWRlciI6IlVCdF8iLCJnZXRDb2xvclByb3ZpZGVyIjoiU3d0XyIsImdldEhpZ2hsaWdodGVkSW5kaWNlcyI6InlFdF8iLCJnZXRIaWdobGlnaHRTZWxlY3Rpb25OYW1lcyI6ImtGaV8iLCJnZXRIaWdobGlnaHRlZE9wdGlvbnMiOiJGRmlfIiwiaGlnaGxpZ2h0QXJlYSI6Ik1FdF8iLCJoaWdobGlnaHRJbmRpY2VzIjoidkV0XyIsImdldEluZGljZXNBdCI6Im53dF8iLCJzZXRUb29sc09wdGlvbnMiOiJKZWlfIiwic3dpdGNoT25DdXJzb3JUb29sIjoiTEZpXyIsInN3aXRjaE9mZkN1cnNvclRvb2wiOiJVRmlfIiwiZ2V0Q3Jvc3NQbG90U2hhcGUiOiJZRmlfIiwic2V0QW5ub3RhdGlvblNpemUiOiJ2ZWlfIn19fSAg");const Q$=sK.sx_();Q$.OE_("geotoolkit.widgets.CrossPlot",Q$.jE_("geotoolkit.widgets.BaseWidget"));let E$=0;var p$=Ci(function(){let i=class t extends KG{constructor(t){super();const i=qi(t,{datatable:null,sortingarrowoptions:null},!0);this.Us_=i["datatable"];this.TFi_=new Pb(i["datatable"]);this.KFi_="";this.HFi_="";if(typeof i["sortingarrowoptions"]=="string"){this.KFi_=i["sortingarrowoptions"];this.HFi_=i["sortingarrowoptions"];this.qFi_=i["sortingarrowoptions"];this.JFi_=i["sortingarrowoptions"]}else{const t=qi(i["sortingarrowoptions"],{uparrowfillcolor:"black",downarrowfillcolor:"black",uparrowlinecolor:"black",downarrowlinecolor:"black"},!0);this.KFi_=typeof t["uparrowfillcolor"]=="string"?t["uparrowfillcolor"]:"black";this.HFi_=typeof t["downarrowfillcolor"]=="string"?t["downarrowfillcolor"]:"black";this.qFi_=typeof t["uparrowlinecolor"]=="string"?t["uparrowlinecolor"]:"black";this.JFi_=typeof t["downarrowlinecolor"]=="string"?t["downarrowlinecolor"]:"black"}this.gQt_=null;this.PFi_=null;this.VFi_=[];this.OFi_()}getData(){return{indexvisible:!1,indextitle:"Index",dataprovider:this,rows:this.WFi_(),cols:this.zFi_()}}uDt_(){return this.Us_}XFi_(){return this.PFi_}WFi_(){return this.TFi_.iyt_()}zFi_(){return this.TFi_.syt_()}EUt_(t,i){this.jFi_=!0}pUt_(t,i){return this.TFi_.Ayt_(t).getValue(i)}BUt_(t,i){this.ZFi_=!0}mUt_(t){return this.VFi_[t]}DUt_(t,i){const s=this.XFi_();if(s==null||s["column"]!==t)return i;i["text"]["bounds"].Le_(-10,0);const e=i["icon"]["bounds"].Qe_(),A=i["icon"]["bounds"].setX(e-16).setY(4).de_(12),n=A.ye_(),h=A.Ts_();s["reverse"]===!0?i["icon"]["value"]=(new Yu).moveTo(n,6).lineTo(n+3,9).lineTo(n-3,9).lineTo(n,6).rB_({color:this.qFi_,pixelsnapmode:{x:!0,y:!0}}).iQ_(this.KFi_):i["icon"]["value"]=(new Yu).moveTo(n,h-6).lineTo(n+3,h-9).lineTo(n-3,h-9).lineTo(n,h-6).rB_({color:this.JFi_,pixelsnapmode:{x:!0,y:!0}}).iQ_(this.HFi_);return i}OFi_(){for(let t=0;t<this.Us_.syt_();++t){let i=this.Us_.Ayt_(t).dn_();i!==""&&i!=null||(i="Column "+(t+1));this.VFi_[t]=i}}_Fi_(t,i){this.PFi_==null||this.PFi_["column"]!==t?this.PFi_={column:t,reverse:!1}:this.PFi_["reverse"]=!this.PFi_["reverse"];this.PFi_["reverse"]===!0?this.Us_.sort(t,((t,s)=>i(s,t))):this.Us_.sort(t,i)}filter(t,i){this.TFi_.Ayt_(E$).xCt_();if(typeof i!="function"){const s=function(t,s){return s.toString().toLowerCase().indexOf(i.toLowerCase())!==-1};i!==""&&this.TFi_.Ayt_(t).addFilter(s.bind(this))}else this.TFi_.Ayt_(t).addFilter(i.bind(this));E$=t;return this}};i=t([_s("geotoolkit.widgets.data.DataTableAdapter")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREYXRhVGFibGUiOiJ1RHRfIiwiZ2V0U29ydGVkQnlDb2x1bW4iOiJYRmlfIiwiZ2V0Um93c0NvdW50IjoiV0ZpXyIsImdldENvbHVtbnNDb3VudCI6InpGaV8iLCJwcmVwYXJlQ29udGVudCI6IkVVdF8iLCJnZXRDb250ZW50RGF0YSI6InBVdF8iLCJwcmVwYXJlSW5kZXgiOiJCVXRfIiwiZ2V0SGVhZGVyRGF0YSI6Im1VdF8iLCJnZXRIZWFkZXJGb3JtYXQiOiJEVXRfIiwic29ydEJ5Q29sdW1uIjoiX0ZpXyJ9fX0g");var m$=function(){let i=class t extends dp{constructor(t){super(t=Pi(t,{border:{top:new hl({color:"white",width:1}),bottom:new hl({color:"white",width:1}),left:new hl({color:"white",width:1}),right:new hl({color:"white",width:1})}}));this.UU_=t}setOptions(t){this.UU_=Pi(t,this.UU_);this.td_();return this}render(t){super.render(t);const i=this.N_()["bounds"],s=i.getX(),e=i.getY(),A=i.Ie_(),n=i.Ts_();if(this.UU_["border"]==null)return this;if(this.UU_["border"]["top"]!=null){t.beginPath();t.rB_(hl.Wi_(this.UU_["border"]["top"]));t.moveTo(s,e);t.lineTo(s+A,e);t.stroke()}if(this.UU_["border"]["right"]!=null){t.beginPath();t.rB_(hl.Wi_(this.UU_["border"]["right"]));t.moveTo(s+A,e);t.lineTo(s+A,e+n);t.stroke()}if(this.UU_["border"]["bottom"]!=null){t.beginPath();t.rB_(hl.Wi_(this.UU_["border"]["bottom"]));t.moveTo(s+A,e+n);t.lineTo(s,e+n);t.stroke()}if(this.UU_["border"]["left"]!=null){t.beginPath();t.rB_(hl.Wi_(this.UU_["border"]["left"]));t.moveTo(s,e+n);t.lineTo(s,e);t.stroke()}return this}};i=t([_s(null)],i);return i}();var y$=Ci({FO_:"wrap",Cut:"cut"},2,"eyJXcmFwIjoiRk9fIn0g");const D$="12px Arial",M$=new hl({color:"gray",width:1,linecap:nl.GD_}),v$=2,b$=new wr("white");var N$=Ci(function(){var t=class{constructor(t,i,s,e,A){this.$Fi_=e;this.i$t_=t;this.s$t_=i;this.UU_=A;this.fX_=null;this.HYt_=s==null?this.txi_():s;this.hq_=new wr(this.HYt_["background"]["fillstyle"]);this.USt_=this.HYt_["border"];this.ixi_=null;this.sxi_=null;this.exi_();return this}Fyt_(){return this.i$t_}Ayt_(){return this.s$t_}isActive(){const t=this.$Fi_.Axi_();return t!=null&&t.Fyt_()===this.i$t_&&t.Ayt_()===this.s$t_}N_(){return this.HYt_}iQ_(t){if(this.ixi_!=null&&this.ixi_.nxi_()!==this||t==null)return this;this.hq_=il.BD_(t);this.HYt_["background"]["fillstyle"]=this.hq_.clone();this.ixi_!=null&&this.ixi_.vn_();this.$Fi_.td_();return this}ct_(){return this.hq_}g_(t,i){if(this.ixi_!=null&&this.ixi_.nxi_()!==this||t==null)return this;i===!0&&(t=Pi(this.fX_.N_(),qa.Wi_(t).N_()));this.fX_=qa.Wi_(t);this.hxi_();return this}FE_(){return this.fX_}Lqt_(t){if(t==null)return this;const i={left:hl.Wi_(t["left"]),right:hl.Wi_(t["right"]),top:hl.Wi_(t["top"]),bottom:hl.Wi_(t["bottom"])};if(this.ixi_!=null&&this.ixi_.nxi_()!==this)return this;this.HYt_["border"]={left:i["left"].clone(),right:i["right"].clone(),top:i["top"].clone(),bottom:i["bottom"].clone()};this.USt_=i;this.ixi_!=null&&this.ixi_.vn_();this.$Fi_.td_();return this}Wqt_(){return{left:this.USt_["left"],right:this.USt_["right"],top:this.USt_["top"],bottom:this.USt_["bottom"]}}rxi_(t,i){if(this.ixi_!=null&&this.ixi_.nxi_()!==this)return this;const s=this.HYt_["text"]["shape"];let e=0,A=0;if(i!=null){this.fX_.MF_(i);switch(i){case ka.j_:e=this.$Fi_.Fyt_(this.i$t_).Ts_()/2-s.Ts_()/2;break;case ka.Top:break;default:e=this.$Fi_.Fyt_(this.i$t_).Ts_()-s.Ts_();break}}if(t!=null){this.fX_.bF_(t);switch(t){case Fa.ne_:A=this.$Fi_.Ayt_(this.s$t_).Ie_()/2-s.Ie_()/2;break;case Fa.X_:A=this.$Fi_.Ayt_(this.s$t_).Ie_()-s.Ie_()-v$;break;default:A=v$;break}this.oxi_(t)}s.ht_(s.getBounds().clone().setX(Math.max(0,A)).setY(Math.max(0,e)));this.ixi_!=null&&this.ixi_.lxi_();return this}uxi_(t,i){if(this.ixi_!=null&&this.ixi_.nxi_()!==this)return this;if(this.axi_()==null||this.axi_()(t)){t=t==null?"":t.toString();this.gxi_(this.cxi_());this.HYt_["text"]["shape"].a_(t);this.$Fi_.Ixi_(this.i$t_,this.s$t_,t);if(i===!0){const t=this.$Fi_.Fyt_(this.i$t_).fxi_();t!==this.$Fi_.Fyt_(this.i$t_).Ts_()&&this.$Fi_.Fyt_(this.i$t_).Be_(t)}}this.hxi_();return this}gxi_(t){if(this.ixi_!=null&&this.ixi_.nxi_()!==this||t==null)return this;t===y$.FO_?this.HYt_["text"]["shape"].PX_(NC.hX_):this.HYt_["text"]["shape"].PX_(NC.sX_);this.ixi_!=null&&this.ixi_.Cxi_();return this}cxi_(){return this.HYt_["text"]["shape"].NX_()===NC.hX_?y$.FO_:y$.Cut}dxi_(t){if(this.ixi_!=null&&this.ixi_.nxi_()!==this)return this;t=typeof t=="string"?this.$Fi_.Bxi_(t):t;this.HYt_["validator"]=t;return this}axi_(){return this.HYt_["validator"]}pUt_(){return this.HYt_["text"]["shape"].SG_()}wxi_(){return this.ixi_}hxi_(){const t=this.fX_.clone();this.rxi_(this.fX_.vF_(),this.fX_.AD_());this.HYt_["text"]["shape"].g_(t);this.ixi_!=null&&this.ixi_.Cxi_();return this}aKt_(){return this.sxi_}exi_(){this.ixi_!=null&&this.ixi_.pc_();this.sxi_=new mA({x:this.$Fi_.Qxi_()[this.s$t_],y:this.$Fi_.Exi_()[this.i$t_],width:this.$Fi_.Ayt_(this.s$t_).Ie_(),height:this.$Fi_.Fyt_(this.i$t_).Ts_()});return this}pxi_(t){this.ixi_=t;return this}Hyt_(t){this.i$t_=t;return this}mxi_(t){this.s$t_=t;return this}yxi_(t){const i=this.$Fi_.Dxi_();if(i!=null){const s=i.Mxi_();if(s!=null)if(t!=null){s["style"]["color"]=t.getColor();s["style"]["font"]=t.Zy_();s["style"]["lineHeight"]=String(t.Wy_())}else{s["style"]["color"]="black";s["style"]["font"]=D$}}return this}oxi_(t){const i=this.$Fi_.Dxi_();if(i!=null){const s=i.Mxi_();if(s!=null)switch(t){case Fa.ne_:s.style.textAlign="center";break;case Fa.X_:s.style.textAlign="right";break;default:s.style.textAlign="left";break}}return this}txi_(){const t=qa.Wi_(this.UU_["content"]["textstyle"]);this.fX_=t.clone();const i=new YC({text:"",textstyle:this.fX_,alignment:dA.ie_,width:this.UU_["mincolumnwidth"],height:this.UU_["minrowheight"]});i.PX_(NC.sX_);const s=this.$Fi_.vxi_().dUt_().xlt_().uTt_(this.i$t_,this.s$t_),e=this.UU_["content"]["validator"];return{validator:typeof e!="string"&&e!=null||typeof e=="function"?e:this.$Fi_.Bxi_(e),background:{fillstyle:b$.clone(),linestyle:null,bounds:s},text:{fillstyle:null,linestyle:null,textstyle:this.fX_,bounds:s.clone(),shape:i},border:{top:M$.clone(),left:M$.clone(),bottom:M$.clone(),right:M$.clone()}}}};return t}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRSb3ciOiJGeXRfIiwiZ2V0Q29sdW1uIjoiQXl0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldEZpbGxTdHlsZSI6ImlRXyIsImdldEZpbGxTdHlsZSI6ImN0XyIsInNldFRleHRTdHlsZSI6ImdfIiwiZ2V0VGV4dFN0eWxlIjoiRkVfIiwic2V0Qm9yZGVyIjoiTHF0XyIsImdldEJvcmRlciI6IldxdF8iLCJzZXRUZXh0QWxpZ25tZW50IjoicnhpXyIsInNldENvbnRlbnREYXRhIjoidXhpXyIsInNldFdyYXBNb2RlIjoiZ3hpXyIsImdldFdyYXBNb2RlIjoiY3hpXyIsInNldFZhbGlkYXRvciI6ImR4aV8iLCJnZXRWYWxpZGF0b3IiOiJheGlfIiwiZ2V0Q29udGVudERhdGEiOiJwVXRfIiwiZ2V0TWVyZ2VkQ2VsbCI6Ind4aV8ifX19");var S$=Ci(function(){var t;return class{constructor(t,i,s,e,A,n){this.Ndt_=t;this.pZ_=i;this.$Fi_=A;this.bxi_=s;this.UUt_=e;this.UU_=n;this.Jp_=n["mincolumnwidth"];this.hq_=null}iQ_(t){if(t==null)return this;for(let i=0;i<this.$Fi_.iyt_();i++)this.$Fi_.lEi_(i,this.Ndt_).iQ_(t);this.hq_=il.BD_(t);return this}ct_(){return this.hq_}E__(t){this.pZ_=t;return this}mV_(){return this.pZ_}de_(t){if(this.Jp_!==t){this.bxi_._Tt_(this.Ndt_,t<0?0:t);this.Jp_=t;this.$Fi_.Nxi_()}return this}Ie_(){return this.Jp_<0?0:this.Jp_}nf_(t){if(t===!1){if(this.Jp_>0){this.Jp_*=-1;this.de_(this.Jp_);if(this.UU_["autotablesize"]){const t=this.$Fi_.Sxi_();this.UUt_.ht_(new mA({x:this.$Fi_.rt_().getX(),y:this.$Fi_.rt_().getY(),width:this.$Fi_.rt_().Ie_()<t.Ie_()?this.$Fi_.rt_().Ie_():t.Ie_(),height:this.$Fi_.rt_().Ts_()<t.Ts_()?this.$Fi_.rt_().Ts_():t.Ts_()}))}else this.UUt_.ht_(this.$Fi_.rt_())}}else if(this.Jp_<0){this.Jp_*=-1;this.de_(this.Jp_)}return this}$C_(){return this.Jp_>0}h3_(){this.UUt_.vYt_(this.Ndt_,!1);return this}Gxi_(t){for(let i=0;i<this.$Fi_.iyt_();i++)this.$Fi_.lEi_(i,this.Ndt_).dxi_(t);return this}setIndex(t){this.Ndt_=t;return this}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRGaWxsU3R5bGUiOiJpUV8iLCJnZXRGaWxsU3R5bGUiOiJjdF8iLCJzZXRUaXRsZSI6IkVfXyIsImdldFRpdGxlIjoibVZfIiwic2V0V2lkdGgiOiJkZV8iLCJnZXRXaWR0aCI6IkllXyIsInNldFZpc2libGUiOiJuZl8iLCJnZXRWaXNpYmxlIjoiJENfIiwiaGlnaGxpZ2h0IjoiaDNfIiwic2V0Q29sdW1uVmFsaWRhdG9yIjoiR3hpXyJ9fX0g");var G$=Ci({wTt_:"onColumnWidthChanged",ETt_:"onRowHeightChanged",Rxi_:"onTableSizeChanged",kxi_:"onTableAdjusted"},2,"eyJDb2x1bW5XaWR0aENoYW5nZWQiOiJ3VHRfIiwiUm93SGVpZ2h0Q2hhbmdlZCI6IkVUdF8iLCJUYWJsZVNpemVDaGFuZ2VkIjoiUnhpXyIsIlRhYmxlQWRqdXN0ZWQiOiJreGlfIn0g");var R$=Ci({Fxi_:"onValueChanged",xxi_:"onActiveCellChanged"},2,"eyJvblZhbHVlQ2hhbmdlZCI6IkZ4aV8iLCJvbkFjdGl2ZUNlbGxDaGFuZ2VkIjoieHhpXyJ9"),k$=Ci({et_:"doubleclick",Lxi_:"singleclick"},2,"eyJEb3VibGVDbGljayI6ImV0XyIsIlNpbmdsZUNsaWNrIjoiTHhpXyJ9"),F$=Ci(function(){let i=class t extends OS{constructor(t,i){i=i==null?{}:i;const s=undefined,e=undefined;super({slots:{},name:"TableViewInPlaceEditor",layer:t});this.UU_=qi(i,{highlight:i["highlight"]==null||i["highlight"],autosubmit:i["autosubmit"]!=null&&i["autosubmit"],focustrigger:i["focustrigger"]==null?k$.et_:i["focustrigger"],backgroundcolor:i["backgroundcolor"]==null?"white":i["backgroundcolor"]});this.Kv_(!1);this.Uxi_=t;this.nAi_=t.C5_("TableViewCompositeTool");this.UUt_=t.vxi_();this.E8_=null;this.f$t_=null;this.Yxi_();this.Txi_=(t,i,s)=>{if(this.isEnabled()===!1)return;this.E8_=s.getPlot();const e=this.nAi_.bFt_(this.UUt_,s),A=this.UUt_.RKt_(e.getX(),e.getY());this.Kxi_({row:A.getY(),column:A.getX()})};this.Hxi_=(t,i,s)=>{if(this.f$t_==null)return;const e=this.nAi_.bFt_(this.UUt_,s),A=this.UUt_.RKt_(e.getX(),e.getY(),!0);if(this.Uxi_.lKt_().contains(A.getX(),A.getY())!==!1){this.qxi_();this.Kxi_({row:Math.floor(A.getY()),column:Math.floor(A.getX())})}};const A=this.Uxi_.C5_("TableViewSelection");A instanceof MF&&A.on(wF.WFt_,this.Txi_).on(wF.pOt_,this.Hxi_);this.Jxi_=(t,i,s)=>{if(this.f$t_!=null&&!(s.from<this.f$t_["column"]&&s.to<this.f$t_["column"]||s.from>this.f$t_["column"]&&s.to>this.f$t_["column"])){s.from===this.f$t_["column"]?this.f$t_["column"]=s.to:s.from<this.f$t_["column"]?this.f$t_["column"]--:this.f$t_["column"]++;this.Pxi_()}};const n=this.Uxi_.C5_("TableViewColumnHandler");n instanceof EU&&n.on(QU.bgt_,this.Jxi_);this.Vxi_=(t,i,s)=>{if(this.f$t_!=null&&!(s.from<this.f$t_["row"]&&s.to<this.f$t_["row"]||s.from>this.f$t_["row"]&&s.to>this.f$t_["row"])){s.from===this.f$t_["row"]?this.f$t_["row"]=s.to:s.from<this.f$t_["row"]?this.f$t_["row"]--:this.f$t_["row"]++;this.Pxi_()}};const h=this.Uxi_.C5_("TableViewRowHandler");h instanceof bU&&h.on(QU.bgt_,this.Vxi_);this.Oxi_=this.Pxi_.bind(this);this.Wxi_=this.Pxi_.bind(this);Mi.addEventListener("resize",this.Wxi_);this.Uxi_.on(G$.kxi_,this.Oxi_);this.OYt_=null}lFt_(t){this.E8_=t;return this}Yxi_(){this.zxi_=xs("div");this.zxi_.style.position="absolute";this.zxi_.style.display="none";this.zxi_.style.border="1px solid black";this.zxi_.style.pointerEvents="none";this.zxi_.style.overflow="hidden";Mi.document.body.appendChild(this.zxi_);this.Xxi_=xs("div");this.Xxi_.style.position="absolute";this.Xxi_.style.border="0px solid black";this.Xxi_.style.pointerEvents="all";this.zxi_.appendChild(this.Xxi_);this.jxi_=xs("textarea");this.jxi_.className="geotoolkit-inlineeditor";this.jxi_.style.resize="none";this.jxi_.style.boxSizing="border-box";this.jxi_.style.overflow="hidden";this.jxi_.style.position="absolute";this.jxi_.style.border="1px solid black";this.jxi_.style.paddingTop="0px";this.jxi_.style.backgroundColor=this.UU_["backgroundcolor"];this.Zxi_=()=>{const t=this.jxi_.style.height;this.jxi_.style.height="5px";const i=this.jxi_.scrollHeight;if(this.sxi_.Ts_()>i)this.jxi_.style.height=t;else{this.Xxi_.style.height=i+"px";this.jxi_.style.height=i+"px"}};this._xi_=t=>{if(t.key==="Enter"||t.keyCode===13){t.preventDefault();this.UU_["autosubmit"]===!1&&this.qxi_();const i=this.UUt_.eKt_();this.Kxi_({row:Math.min(this.f$t_["row"]+1,i.Ts_()-1),column:Math.min(Math.max(0,this.f$t_["column"]),i.Ie_()-1)},this.UU_["highlight"])}};this.jxi_.addEventListener("keypress",this._xi_);this.$xi_=t=>{if(t.key!=="Escape"&&t.keyCode!==27){if(t.ctrlKey===!0){t.preventDefault();this.qxi_();let i=this.f$t_["row"],s=this.f$t_["column"];if(t.key==="ArrowLeft"||t.keyCode===37)s--;else if(t.key==="ArrowRight"||t.keyCode===39)s++;else if(t.key==="ArrowUp"||t.keyCode===38)i--;else{if(t.key!=="ArrowDown"&&t.keyCode!==40){if(t.key==="Enter"||t.keyCode===13){this.Kxi_(null);return}return}i++}const e=this.UUt_.eKt_();this.Kxi_({row:Math.min(Math.max(0,i),e.Ts_()-1),column:Math.min(Math.max(0,s),e.Ie_()-1)},this.UU_["highlight"])}}else{t.preventDefault();this.Kxi_(null)}};this.jxi_.addEventListener("keydown",this.$xi_);this.jxi_.addEventListener("input",this.Zxi_);this.Xxi_.appendChild(this.jxi_)}dispose(){Mi.removeEventListener("resize",this.Wxi_);this.jxi_.removeEventListener("keypress",this._xi_);this.jxi_.removeEventListener("keydown",this.$xi_);const t=this.Uxi_.C5_("TableViewSelection");t&&t.off(wF.WFt_,this.Txi_).off(wF.pOt_,this.Hxi_);const i=this.Uxi_.C5_("TableViewColumnHandler");i&&i.off(QU.bgt_,this.Jxi_);const s=this.Uxi_.C5_("TableViewRowHandler");s&&s.off(QU.bgt_,this.Vxi_);this.Uxi_.off(G$.kxi_,this.Oxi_);this.zxi_.parentNode&&this.zxi_.parentNode.removeChild(this.zxi_);this.zxi_=null;super.dispose()}start(t){super.start();if(this.UUt_.dUt_().xlt_().zYt_()!=null){this.OYt_=this.UUt_.dUt_().xlt_().zYt_();this.UUt_.dUt_().xlt_().XYt_(null);this.Uxi_.td_();this.jxi_.style.border="1px solid "+this.OYt_.getColor().toString()}return this}stop(){super.stop();if(this.OYt_!=null){this.UUt_.dUt_().xlt_().XYt_(this.OYt_);this.Uxi_.td_()}this.Kxi_(null);return this}qxi_(){if(this.jxi_.style.display==="none")return this;const t={cell:{column:this.f$t_["column"],row:this.f$t_["row"]},value:this.jxi_.value};this.notify(R$.Fxi_,this,t);this.jxi_.value=t["value"];this.UUt_.td_();return this}Axi_(){return this.f$t_}Kxi_(t,i,s){i==null&&(i=!0);if(this.f$t_==null&&t==null)return this;if(t!=null&&(t["row"]<0||t["column"]<0))return this;if(this.f$t_!=null&&t!=null){this.UU_["autosubmit"]&&this.qxi_();if(this.f$t_["row"]===t["row"]&&this.f$t_["column"]===t["column"])return this}this.f$t_=t;this.Pxi_(null,null,s);if(this.f$t_==null)return this.stop();const e=this.f$t_["column"],A=this.f$t_["row"];if(i){this.UUt_.vYt_(e);this.UUt_.NKt_([A])}this.Uxi_.uKt_(A,e);const n=undefined,h={cell:{column:e,row:A},value:this.UUt_.pUt_(e,A)};this.notify(R$.xxi_,this,h);this.jxi_.value=h["value"];this.Zxi_();setTimeout((()=>{this.jxi_.focus()}),1);return this.start()}Pxi_(t,i,s){if(this.f$t_==null){this.zxi_.style.display="none";return this}const e=Us(this.E8_.r3_()),A=s!=null?s:this.UUt_.aKt_(this.f$t_["row"],this.f$t_["column"]);if(A==null){this.zxi_.style.display="none";return this}this.sxi_=A;const n=new lA(A.getX(),A.getY()),h=new lA(A.Qe_(),A.pe_()),r=this.UUt_.dUt_().if_().rn_(this.UUt_.dUt_().ot_());this.zxi_.style.display="block";this.zxi_.style.left=r.we_()+e.x+"px";this.zxi_.style.top=r.Ee_()+e.y+"px";this.zxi_.style.width=r.Ie_()+"px";this.zxi_.style.height=r.Ts_()+"px";this.UUt_.dUt_().dUt_().if_().transformPoint(n,n);this.UUt_.dUt_().dUt_().if_().transformPoint(h,h);this.Xxi_.style.left=n.getX()-r.we_()-1+"px";this.Xxi_.style.top=n.getY()-r.Ee_()-1+"px";this.Xxi_.style.width=h.getX()-n.getX()-1+"px";this.Xxi_.style.height=h.getY()-n.getY()-1+"px";this.jxi_.style.width=h.getX()-n.getX()+"px";this.jxi_.style.height=h.getY()-n.getY()+"px";return this}tLi_(){this.jxi_.removeEventListener("keypress",this._xi_)}Mxi_(){return this.jxi_}iLi_(){return this.UU_["focustrigger"]}sLi_(){return this.UU_["autosubmit"]}};i=t([_s("geotoolkit.widgets.tools.InPlaceEditor")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBY3RpdmVDZWxsIjoiQXhpXyIsInNldEFjdGl2ZUNlbGwiOiJLeGlfIiwiZ2V0RWRpdG9ySW5wdXQiOiJNeGlfIn19fSAg");var x$=Ci({VI_:"auto",L$_:"default",FO_:"wrap",eLi_:"wrapsplitwords"},2,"eyJBdXRvIjoiVklfIiwiRGVmYXVsdCI6IkwkXyIsIldyYXAiOiJGT18iLCJXcmFwU3BsaXRXb3JkcyI6ImVMaV8ifSAg");const L$=5;var U$=Ci(function(){let i=class t extends _H{constructor(t){t===void 0&&(t={});t["horizontalscrollable"]===void 0&&t["horizontalscroll"]!==void 0&&(t["horizontalscrollable"]=t["horizontalscroll"]);t["verticalscrollable"]===void 0&&t["verticalscroll"]!==void 0&&(t["verticalscrollable"]=t["verticalscroll"]);const i=(t=Pi(t,{bounds:t["bounds"]instanceof mA?t["bounds"]:new mA(0,0,400,400),horizontalscroll:t["horizontalscrollable"]===void 0||t["horizontalscrollable"],verticalscroll:t["verticalscrollable"]===void 0||t["verticalscrollable"],keepvisiblelimits:!1,border:t["border"]!==void 0?t["border"]:{color:"transparent"},rows:t["rows"]!==void 0?t["rows"]:1,cols:t["cols"]!==void 0?t["cols"]:1,fixedsize:t["fixedsize"],scroll:{horizontal:{visible:!0,cssclass:"horizontal-scroll"},vertical:{visible:!0,cssclass:"vertical-scroll"}},headermode:x$.L$_}))["bounds"];t["bounds"]=i.clone().setX(0).setY(0);const s=t["fitborder"]===!0;s&&(t["drawlastgridline"]=!1);const e=new LR(t);t["bounds"]=i;t["model"]=e;t["annotationssizes"]={north:"0",west:"0",east:t["verticalscroll"]===!0?"15":"0",south:t["horizontalscroll"]===!0?"15":"0"};super(t);this.ALi_=!1;this.ALi_=s;this.ALi_===!0&&this.USt_.NT_(wc.dT_).UT_((t=>{const i=t.getParent();if(i==null)return null;const s=i.ot_();if(this.UUt_==null)return s;const e=Math.min(this.XTt_(),s.Ie_()),A=Math.min(this.OTt_(),s.Ts_());return s.clone().de_(e).Be_(A)}));this.Bgt_=!1;this.nLi_=null;this.hLi_=new YC;this.UUt_=e;this.rLi_=t["horizontalscroll"];this.oLi_=t["verticalscroll"];this.lLi_=(t,i)=>{this.Pei_(!1);this.notify(G$.wTt_,this,i)};this.uLi_=(t,i)=>{this.notify(G$.ETt_,this,i)};this.UUt_.on(bR.wTt_,this.lLi_).on(bR.ETt_,this.uLi_);this.setData({contentmeasure:t["contentmeasure"]!=null?t["contentmeasure"]:{measurecolumn:(t,i,s,e)=>this.aLi_(t,i,s,e),measurerow:function(t,i,s,e){return e}}});this.gLi_(t["headermode"]);this.v4_(ha.ne_).cq_(new zB);this.UUt_.ft_({left:0,top:0,right:0,bottom:0});this.UUt_.kY_(!0);if(this.oLi_==="floating"&&this.rLi_==="floating"){const t=this.v4_(ha.ne_);this.Uei_.Wxt_(this.oLi_==="floating");this.Yei_.Wxt_(this.rLi_==="floating");this.s3t_.removeItem(this.Yei_,ha.nG_);this.s3t_.removeItem(this.Uei_,ha.AG_);t.cq_(new zB);t.GY_(this.Uei_);t.GY_(this.Yei_)}this.A4t_();this.Pei_();this.Bgt_=!0}dispose(){super.dispose();this.UUt_!=null&&this.UUt_.off(bR.wTt_,this.lLi_).off(bR.ETt_,this.uLi_)}XTt_(t){return this.UUt_.XTt_(t)}cLi_(t,i){this.UUt_._Tt_(t,i);return this}gLi_(t){this.nLi_=t;this.nLi_===x$.FO_?this.UUt_.TKt_().xlt_().KYt_(NC.hX_):this.nLi_===x$.eLi_?this.UUt_.TKt_().xlt_().KYt_(NC.rX_):this.UUt_.TKt_().xlt_().KYt_(NC.sX_);this.UUt_.CUt_();this.td_();return this}ILi_(){return this.nLi_}aLi_(t,i,s,e){let A;switch(this.nLi_){case x$.VI_:A=$o.measureText(this.UUt_.mUt_(t),i);return{width:A.Ie_()+L$};case x$.FO_:case x$.eLi_:this.hLi_.g_(i).de_(e["width"]).PX_(this.nLi_===x$.FO_?NC.hX_:NC.rX_).a_(this.UUt_.mUt_(t));const s=this.hLi_.Ts_()+L$*2;this.UUt_.qTt_(-1)<s&&this.UUt_.JTt_(-1,s);return e;default:return e}}sKt_(t){this.UUt_.sKt_(t);return this}OTt_(){return this.UUt_.OTt_()}fLi_(){this.notify(G$.Rxi_,this);return this}ht_(t){super.ht_(t);if(this.Bgt_){this.UUt_.ht_(this.v4_(ha.ne_).rt_());this.UUt_.VTt_();this.Pei_()}return this}vxi_(){return this.UUt_}CUt_(t,i){this.UUt_.CUt_(t,i);this.Pei_();this.fLi_();this.td_();return this}cKt_(){return this.UUt_.cKt_()}eKt_(){return this.UUt_.eKt_()}lKt_(){return this.UUt_.lKt_()}uKt_(t,i){this.UUt_.uKt_(t,i);this.Pei_();return this}setData(t){if(t==null)return this;const i=t;if(i["headermode"]!=null&&this.ILi_()!==i["headermode"]){this.gLi_(i["headermode"]);i["fixedsize"]=this.nLi_}else i["fixedsize"]=null;this.UUt_.setData(t);this.UUt_.CUt_();this.Pei_(!1);this.fLi_();this.td_();return this}gKt_(t,i){this.UUt_.gKt_(t,i);return this}XUt_(t,i){this.UUt_.XUt_(t);if(i===!1)return this;this.UUt_.uKt_(t,this.oYt_()!==-1?this.oYt_():null);this.UUt_.VTt_();this.Pei_();return this}AYt_(){return this.UUt_.AYt_()}oYt_(){return this.UUt_.oYt_()}vYt_(t,i){this.UUt_.vYt_(t);if(i===!1)return this;this.UUt_.uKt_(this.AYt_()!==-1?this.AYt_():null,t);this.UUt_.VTt_();this.Pei_();return this}CLi_(t,i){this.UUt_.NKt_(t);if(i===!1)return this;const s=this.UUt_.nYt_()[0];this.UUt_.uKt_(s,this.oYt_()!==-1?this.oYt_():null);this.UUt_.VTt_();this.Pei_();return this}nYt_(){return this.UUt_.nYt_()}dLi_(){const t=this.USt_!=null?this.USt_.getParent():null,i=t==null?null:t.ot_();if(i==null)return this;const s=Math.min(this.XTt_(),i.Ie_()),e=Math.min(this.OTt_(),i.Ts_());this.Yei_!=null&&this.rLi_==="floating"&&this.Yei_.ft_({bottom:i.Ts_()-e},!1,!0);if(this.Uei_!=null&&this.oLi_==="floating"){const t=this.UUt_.WTt_();this.Uei_.ft_({top:t!=null?t.pe_():0,right:i.Ie_()-s},!1,!0)}return this}qei_(t){super.qei_(t);return this.ALi_===!0?this.dLi_():this}Pei_(t){if(this.UUt_==null)return this;const i=this.UUt_.zTt_(),s=this.UUt_.AKt_(),e=this.rt_().Ie_()>s.Ie_()?null:t;this.Yei_.Lq_(i,s,this.T4_.ZY_(),e);this.Uei_.Lq_(i,s,this.T4_.jY_(),t);if(i.Ce_(s)){if(this.rLi_==="floating"&&this.Yei_.iLt_()!==1){this.Yei_.hLt_();this.Yei_.nLt_(0)}if(this.oLi_==="floating"&&this.Uei_.iLt_()!==1){this.Uei_.hLt_();this.Uei_.nLt_(0)}}this.ALi_===!0&&this.dLi_();this.notify(G$.kxi_,this,null);return this}A4t_(){if(this.UUt_===void 0)return this;const t=(t,i,s)=>{const e=this.UUt_.AKt_(),A=s.ot_(),n=(e.we_()-A.we_())*this.T4_.if_().BI_();this.UUt_.gKt_(n,0);this.Yei_.Lq_(this.UUt_.zTt_(),this.UUt_.AKt_());this.notify(G$.kxi_,this)},i=(t,i,s)=>{const e=this.UUt_.AKt_(),A=s.ot_(),n=(e.Ee_()-A.Ee_())*this.T4_.if_().sI_();this.UUt_.gKt_(0,n);this.Uei_.Lq_(this.UUt_.zTt_(),this.UUt_.AKt_());this.notify(G$.kxi_,this)};this.oLi_===!0&&this.Uei_!=null&&this.Uei_.$C_()&&this.vei_({east:this.Uei_.uLt_()});this.rLi_===!0&&this.Yei_!=null&&this.Yei_.$C_()&&this.vei_({south:this.Yei_.uLt_()});this.Uei_.on(uG.qxt_,i).on(uG.Kxt_,i);this.Yei_.on(uG.Txt_,(()=>{this.BLi_.Kv_(!1)})).on(uG.qxt_,(()=>{this.BLi_.Kv_(!0)})).on(uG.qxt_,t).on(uG.Kxt_,t);const s=this.mgt_();this.h4t_([this.nAi_=new lG(s,"TableViewCompositeTool").add([this.BLi_=new kU(this.UUt_).v$t_(this.ALi_).HC_("TableViewSplitter").on(NU.e4_,(()=>{this.Pei_();this.fLi_();this.nLi_!==x$.FO_&&this.nLi_!==x$.eLi_||this.UUt_.HTt_()})),new EU(this.UUt_).HC_("TableViewColumnHandler").on(QU.Kxt_,(()=>{this.Pei_()})).Kv_(!1),new bU(this.UUt_).HC_("TableViewRowHandler").on(QU.Kxt_,(()=>{this.Pei_()})).Kv_(!1),new mU(this.UUt_).HC_("TableViewHeaderHandler").Kv_(!1),(new MF).HC_("TableViewSelection").Kv_(!0).on(wF.pOt_,((t,i,s)=>{const e=this.nAi_.bFt_(this.UUt_,s),A=this.UUt_.RKt_(e.getX(),e.getY());this.UUt_.vYt_(A.getX());let n;const h=s.Lkt_();if(h.ctrlKey===!0){n=this.UUt_.nYt_();if(n.indexOf(A.getY())===-1){n.push(A.getY());this.UUt_.NKt_(n)}}else if(h.shiftKey===!0&&this.UUt_.nYt_().length>0){const t=this.UUt_.nYt_()[this.UUt_.nYt_().length-1],i=Math.min(t,A.getY()),s=Math.max(t,A.getY());n=this.UUt_.nYt_();for(let t=i;t<=s;t++)n.indexOf(t)===-1&&n.push(t);this.UUt_.NKt_(n)}else this.UUt_.NKt_([A.getY()])})),(new sG).HC_("TableViewPanning").Kv_(!0).ukt_(this.UUt_,this.UUt_.gKt_).on(jS.VFt_,(()=>{this.Pei_()})),new MU(this.UUt_).HC_("TableViewHighlight").Kv_(!0).on(DU.h$t_,((t,i,s)=>{this.UUt_.XUt_(s.A$t_())})).on(xS.Okt_,(()=>{this.UUt_.XUt_(-1)}))])]);this.h4t_(new F$(this));return this}N_(){const t=super.N_(),i=this.eKt_();t["rows"]=i.Ie_();t["cols"]=i.Ts_();t["fixedsize"]=this.UUt_.nKt_();t["headermode"]=this.ILi_();return t}dt_(t){super.dt_(t);this.setData(t);return this}wLi_(t,i){const s=this.eKt_();let e="";t==null?t=[[0,s.Ie_()-1]]:typeof t=="number"&&(t=[t]);i==null?i=[[0,s.Ts_()-1]]:typeof i=="number"&&(i=[i]);for(let A=0;A<i.length;A++){let n,h;const r=i[A];if(typeof r=="number"){n=r;h=r}else{if(r.length<1)continue;if(r.length<2){n=r[0];h=r[0]}else{n=r[0];h=r[1]}}if(!(h<0||n>=s.Ie_())){n=Math.max(n,0);h=Math.min(h,s.Ie_()-1);for(let i=n;i<=h;i++){for(let A=0;A<t.length;A++){let n,h;const r=t[A];if(typeof r=="number"){n=r;h=r}else{if(r.length<1)continue;if(r.length<2){n=r[0];h=r[0]}else{n=r[0];h=r[1]}}if(!(h<0||n>=s.Ie_())){n=Math.max(n,0);h=Math.min(h,s.Ie_()-1);for(let t=n;t<=h;t++){e+=this.UUt_.pUt_(t,i);e+="\t"}}}e+="\n"}}}return e}QLi_(){let t;const i=this.UUt_.nYt_(),s=this.UUt_.oYt_();t=i[0]!==-1||i.length>1?this.wLi_(s===-1?null:s,i):this.wLi_(this.UUt_.oYt_());return t}};i=t([_s("geotoolkit.widgets.TableView")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb2x1bW5zU2l6ZSI6IlhUdF8iLCJzZXRDb2x1bW5zU2l6ZSI6ImNMaV8iLCJzZXRIZWFkZXJNb2RlIjoiZ0xpXyIsImdldEhlYWRlck1vZGUiOiJJTGlfIiwiZml0VG9XaWR0aCI6InNLdF8iLCJnZXRSb3dzU2l6ZSI6Ik9UdF8iLCJzZXRCb3VuZHMiOiJodF8iLCJnZXRUYWJsZVZpZXdTaGFwZSI6InZ4aV8iLCJzZXRUYWJsZUJvdW5kcyI6IkNVdF8iLCJnZXRUYWJsZUJvdW5kcyI6ImNLdF8iLCJnZXRUYWJsZVNpemUiOiJlS3RfIiwiZ2V0VmlzaWJsZVRhYmxlTGltaXRzIjoibEt0XyIsInNldFZpc2libGVUYWJsZUxpbWl0cyI6InVLdF8iLCJ0cmFuc2xhdGVUYWJsZSI6ImdLdF8iLCJoaWdobGlnaHRSb3ciOiJYVXRfIiwiZ2V0SGlnaGxpZ2h0ZWRSb3ciOiJBWXRfIiwiZ2V0SGlnaGxpZ2h0ZWRDb2x1bW4iOiJvWXRfIiwiaGlnaGxpZ2h0Q29sdW1uIjoidll0XyIsInNldEFjdGl2ZVJvdyI6IkNMaV8iLCJnZXRBY3RpdmVSb3dzIjoibll0XyIsInN5bmNocm9uaXplVmlld0xpbWl0cyI6IlBlaV8iLCJpbml0aWFsaXplVG9vbHMiOiJBNHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImNvcHlDb250ZW50Ijoid0xpXyIsImNvcHlTZWxlY3RlZENlbGxzIjoiUUxpXyJ9fX0g");var Y$=Ci(function(){let i=class t extends WS{constructor(t,i,s){super(t);this.ELi_=i;this.pLi_=s}mLi_(){return this.ELi_}yLi_(){return this.pLi_}};i=t([_s("geotoolkit.widgets.tools.DataSheetSelectionEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGaXJzdENlbGxQb3NpdGlvbiI6Im1MaV8iLCJnZXRMYXN0Q2VsbFBvc2l0aW9uIjoieUxpXyJ9fX0g");var T$=Ci({DLi_:"onHeaderClicked",MLi_:"onIndexClicked",vLi_:"onCellClicked",bLi_:"onPointerMoved"},2,"eyJIZWFkZXJDbGlja2VkIjoiRExpXyIsIkluZGV4Q2xpY2tlZCI6Ik1MaV8iLCJDZWxsQ2xpY2tlZCI6InZMaV8iLCJvblBvaW50ZXJNb3ZlZCI6ImJMaV8ifSAg");const K$=new hl({color:"rgba(0, 120, 194, 1)",width:1.25*Is()}),H$="rgba(172, 193, 250, 0.2)",q$=function(t,i){return t.wxi_()!=null&&t.wxi_()===i.wxi_()||t!=null&&i!=null&&t.Fyt_()===i.Fyt_()&&t.Ayt_()===i.Ayt_()};var J$=function(){var t;return class{constructor(t,i,s,e){this.ELi_=i;this.pLi_=s;this.NLi_=e;this.SLi_=t.GLi_();this.$Fi_=t.RLi_();this.zz_=new dp({linestyle:e["linestyle"],fillstyle:q$(i,s)?e["fillstyle"]:e["groupfillstyle"]});this.kLi_=t.FLi_();this.xLi_=new lA;this.LLi_=new lA;this.ULi_(i,s);this.SLi_.GY_(this.zz_)}dispose(){this.SLi_.removeChild(this.zz_);this.zz_.dispose()}ULi_(t,i,s){this.zz_.iQ_(q$(t,i)?this.NLi_["fillstyle"]:this.NLi_["groupfillstyle"]);s!=null&&(this.kLi_=s);if(this.kLi_!==!0){const s=this.$Fi_.YLi_(t,i);t=s[0];i=s[1]}const e=t.aKt_().clone(),A=i.aKt_().clone();if(this.kLi_===!0){let s=this.$Fi_.Ayt_(t.Ayt_()),n=this.$Fi_.Fyt_(t.Fyt_());e.de_(s.Ie_()).Be_(n.Ts_());s=this.$Fi_.Ayt_(i.Ayt_());n=this.$Fi_.Fyt_(i.Fyt_());A.de_(s.Ie_()).Be_(n.Ts_())}this.zz_.ce_(new mA(e.we_(),e.Ee_(),A.Qe_(),A.pe_()).Le_(-1,-1));this.ELi_=t;this.pLi_=i;this.xLi_.setX(t.Ayt_()).setY(t.Fyt_());this.LLi_.setX(i.Ayt_()).setY(i.Fyt_());return this}mLi_(){return this.xLi_}yLi_(){return this.LLi_}zT_(){this.ULi_(this.ELi_,this.pLi_);return this}}}();const P$=function(t){t.vs_(Math.floor(t.getX()),Math.floor(t.getY()))};var V$=Ci(function(){let i=class t extends OS{constructor(t,i){const s=undefined;super({name:"DataSheetSelection"});this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this)});this.$Fi_=t;this.UUt_=this.$Fi_.TLi_();this.bxi_=this.$Fi_.vxi_();this.KLi_=this.$Fi_.HLi_();i=i==null?{}:i;this.UU_=Pi(i,{selectionrect:{fillstyle:null,groupfillstyle:new wr(H$),linestyle:K$.clone()}});this.ELi_=null;this.pLi_=null;this.qLi_=null;this.JLi_=null;this.HC_("DataSheetSelection").Kv_(!0);this.UUt_.C5_("TableViewPanning").Kv_(!1);this.SLi_=(new sI).Lq_(this.bxi_.dUt_().rt_());this.IFi_=(new TQ).GY_(this.SLi_);this.bxi_.dUt_().GY_(this.IFi_);this.PLi_=null;this.kLi_=!1;this.VLi_=()=>{const t=this.bxi_.AKt_().clone(),i=this.bxi_.dUt_().rt_().clone();this.SLi_.Lq_(t);i.de_(t.Ie_()).Be_(t.Ts_());this.SLi_.ht_(i);this.PLi_!=null&&this.PLi_.zT_()};this.UUt_.on(G$.kxi_,this.VLi_)}zFt_(t){t.Lkt_().preventDefault();this.OLi_();const i=this.KLi_.bFt_(this.bxi_,t),s=this.bxi_.RKt_(i.getX(),i.getY());this.ELi_=this.WLi_(s);this.pLi_=this.ELi_;this.zLi_(t,this.kFt_(t.Fkt_()))}XFt_(t){if(t.Lkt_()["buttons"]===Ts.z_||this.dFt_(t)){t.Lkt_().preventDefault();this.zLi_(t,!1);if(this.PLi_!=null&&(this.ELi_!==this.qLi_||this.pLi_!==this.JLi_)){this.qLi_=this.ELi_;this.JLi_=this.pLi_;this.notify(T$.bLi_,this,new Y$(t,this.PLi_.mLi_(),this.PLi_.yLi_()))}}}zLi_(t,i){const s=this.$Fi_.Dxi_(),e=this.KLi_.bFt_(this.bxi_,t),A=this.bxi_.RKt_(e.getX(),e.getY());P$(A);this.pLi_=this.WLi_(A);if(this.ELi_==null||this.pLi_==null){if(A!=null)if(A.getY()===-1&&A.getX()>-1){this.ELi_=this.$Fi_.lEi_(0,A.getX());this.pLi_=this.$Fi_.lEi_(this.$Fi_.iyt_()-1,A.getX());this.kLi_=!0;this.XLi_(!1,this.UU_["selectionrect"]);this.$Fi_.Ayt_(A.getX()).h3_();this.notify(T$.DLi_,this,new Y$(t,this.PLi_.mLi_(),this.PLi_.yLi_()))}else if(A.getX()===-1&&A.getY()>-1){this.ELi_=this.$Fi_.lEi_(A.getY(),0);this.pLi_=this.$Fi_.lEi_(A.getY(),this.$Fi_.syt_()-1);this.kLi_=!0;this.XLi_(!1,this.UU_["selectionrect"]);this.$Fi_.Fyt_(A.getY()).h3_();this.notify(T$.MLi_,this,new Y$(t,this.PLi_.mLi_(),this.PLi_.yLi_()))}}else{let e=!1;(i===!0||s!=null&&s.iLi_()!==k$.et_)&&(e=!0);this.kLi_=!1;this.XLi_(e,this.UU_["selectionrect"]);this.notify(T$.vLi_,this,new Y$(t,this.PLi_.mLi_(),this.PLi_.yLi_()))}}XLi_(t,i){if(this.ELi_==null||this.pLi_==null)return this;this.jLi_(i);this.bxi_.NKt_(-1);this.bxi_.vYt_(-1);q$(this.ELi_,this.pLi_)&&this.$Fi_.Kxi_(this.ELi_.Fyt_(),this.ELi_.Ayt_(),t);return this}WLi_(t){if(!this.$Fi_.ZLi_(t.getY(),t.getX()))return null;const i=this.$Fi_.lEi_(t.getY(),t.getX());return i.wxi_()==null?i:i.wxi_().nxi_()}jLi_(t){if(this.ELi_==null||this.pLi_==null)return this;if(this.PLi_!=null){this.PLi_.ULi_(this.ELi_,this.pLi_,this.kLi_);return this}this.PLi_=new J$(this,this.ELi_,this.pLi_,t);return this}RLi_(){return this.$Fi_}GLi_(){return this.SLi_}FLi_(){return this.kLi_}OLi_(){if(this.PLi_!=null){this.PLi_.dispose();this.PLi_=null}return this}dispose(){for(const t in T$)this.off(T$[t]);this.UUt_.off(G$.kxi_,this.VLi_);super.dispose()}};i=t([_s("geotoolkit.widgets.tools.DataSheetSelection")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREYXRhU2hlZXQiOiJSTGlfIn19fSAg");const O$=2;var W$=Ci(function(){var t;return class{constructor(t,i,s,e,A){this.ELi_=t;this.pLi_=i;this._Li_=s;this.$Li_=e;this.$Fi_=A;this._D_=new sI({clipping:!0});this.tUi_=new m$({border:this.ELi_.Wqt_()}).iQ_(this.ELi_.ct_());this.iUi_=this.ELi_.N_()["text"]["shape"].clone();this.pc_();this._D_.GY_([this.tUi_,this.iUi_]);this._Li_.GY_(this._D_);this.$Li_.push(this)}nxi_(){return this.ELi_}sUi_(){return this.pLi_}iyt_(){return this.pLi_.Fyt_()-this.ELi_.Fyt_()+1}syt_(){return this.pLi_.Ayt_()-this.ELi_.Ayt_()+1}eUi_(t,i){return t>=this.ELi_.Fyt_()&&t<=this.pLi_.Fyt_()&&i>=this.ELi_.Ayt_()&&i<=this.pLi_.Ayt_()}ht_(t){this._D_.ht_(t);this.tUi_.ht_(t);return this}pc_(){const t=this.ELi_.aKt_(),i=this.pLi_.aKt_(),s=new mA(t.getX(),t.getY(),i.Qe_(),i.pe_());this.tUi_.ht_(s);this._D_.ht_(s.clone());return this}getBounds(){return this._D_.getBounds()}iM_(){return this._D_}lxi_(){const t=this.tUi_.getBounds();let i=t.getY(),s=t.getX();switch(this.iUi_.FE_().AD_()){case ka.j_:i+=t.Ts_()/2-this.iUi_.Ts_()/2;break;case ka.Top:break;default:i=t.pe_()-this.iUi_.Ts_();break}switch(this.iUi_.FE_().vF_()){case Fa.ne_:s+=t.Ie_()/2-this.iUi_.Ie_()/2;break;case Fa.X_:s+=t.Ie_()-this.iUi_.Ie_()-O$;break;default:s+=O$}this.iUi_.ht_(this.iUi_.getBounds().clone().setX(Math.max(0,s)).setY(Math.max(0,i)));return this}Cxi_(){const t=this.ELi_.N_()["text"]["shape"];this.iUi_.a_(t.SG_());this.iUi_.g_(t.FE_());this.iUi_.PX_(t.NX_());this.iUi_.de_(t.Ie_());this.lxi_();return this}vn_(){this.tUi_.iQ_(this.ELi_.ct_());this.tUi_.setOptions({border:this.ELi_.Wqt_()});return this}dispose(){for(let t=this.ELi_.Fyt_();t<=this.pLi_.Fyt_();++t)for(let i=this.ELi_.Ayt_();i<=this.pLi_.Ayt_();++i)this.$Fi_.lEi_(t,i).pxi_(null);this._Li_.removeChild(this._D_);this.$Li_.splice(this.$Li_.indexOf(this),1);this._D_.dispose();return this}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGaXJzdENlbGwiOiJueGlfIiwiZ2V0TGFzdENlbGwiOiJzVWlfIiwiZ2V0TnVtYmVyT2ZSb3dzIjoiaXl0XyIsImdldE51bWJlck9mQ29sdW1ucyI6InN5dF8iLCJjb250YWluc0NlbGwiOiJlVWlfIn19fSAg");var z$=Ci(function(){var t;return class{constructor(t,i,s,e,A,n){this.Ndt_=t;this.pZ_=i;this.bxi_=s;this.UUt_=e;this.$Fi_=A;this.UU_=n;this.Pp_=n["minrowheight"];this.hq_=null}iQ_(t){if(t==null)return this;for(let i=0;i<this.$Fi_.syt_();i++)this.$Fi_.lEi_(this.Ndt_,i).iQ_(t);this.hq_=il.BD_(t);return this}ct_(){return this.hq_}E__(t){this.pZ_=t;return this}mV_(){return this.pZ_}Be_(t){if(this.Pp_!==t){this.bxi_.JTt_(this.Ndt_,t<0?0:t);this.Pp_=t;this.$Fi_.Nxi_()}return this}Ts_(){return this.Pp_<0?0:this.Pp_}nf_(t){if(t===!1){if(this.Pp_>0){this.Pp_*=-1;this.Be_(this.Pp_);if(this.UU_["autotablesize"]){const t=this.$Fi_.Sxi_();this.UUt_.ht_(new mA({x:this.$Fi_.rt_().getX(),y:this.$Fi_.rt_().getY(),width:this.$Fi_.rt_().Ie_()<t.Ie_()?this.$Fi_.rt_().Ie_():t.Ie_(),height:this.$Fi_.rt_().Ts_()<t.Ts_()?this.$Fi_.rt_().Ts_():t.Ts_()}))}else this.UUt_.ht_(this.$Fi_.rt_())}}else if(this.Pp_<0){this.Pp_*=-1;this.Be_(this.Pp_)}return this}$C_(){return this.Pp_>0}h3_(){this.UUt_.CLi_(this.Ndt_,!1);return this}AUi_(t){for(let i=0;i<this.$Fi_.syt_();i++)this.$Fi_.lEi_(this.Ndt_,i).dxi_(t);return this}fxi_(){let t=this.UU_["minrowheight"];for(let i=0;i<this.$Fi_.syt_();i++){const s=this.$Fi_.lEi_(this.Ndt_,i).N_()["text"]["shape"].Ts_();s>t&&(t=s)}return t}setIndex(t){this.Ndt_=t;return this}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRGaWxsU3R5bGUiOiJpUV8iLCJnZXRGaWxsU3R5bGUiOiJjdF8iLCJzZXRUaXRsZSI6IkVfXyIsImdldFRpdGxlIjoibVZfIiwic2V0SGVpZ2h0IjoiQmVfIiwiZ2V0SGVpZ2h0IjoiVHNfIiwic2V0VmlzaWJsZSI6Im5mXyIsImdldFZpc2libGUiOiIkQ18iLCJoaWdobGlnaHQiOiJoM18iLCJzZXRSb3dWYWxpZGF0b3IiOiJBVWlfIiwiY2FsY3VsYXRlQXV0b1Jvd0hlaWdodCI6ImZ4aV8ifX19");var X$={Number:"number",All:"all"};const j$="rgba(190, 190, 190, 0.4)",Z$="rgba(243, 243, 243, 1)",_$=new hl({color:"#bdbdbd",width:1,pixelsnapmode:!0}),$$="rgba(51, 116, 235, 0.8)",t0="12px Arial",i0=50,s0=65,e0=26,A0=function(t){for(let i=t.length-1;i>=0;--i)if(t[i]<s0+e0-1)return!1;return!0},n0=function(t){for(let i=0;i<t.length;++i)t[i]=s0};var h0=Ci(function(){let i=class t extends eK{constructor(t){super(t=qi(t=t==null?{}:t,{autotablesize:t["autotablesize"]!=null&&t["autotablesize"],indextitle:t["indextitle"]==null?"":t["indextitle"],minrowheight:t["minrowheight"]==null?30:t["minrowheight"],mincolumnwidth:t["mincolumnwidth"]==null?120:t["mincolumnwidth"],headerheight:t["headerheight"]==null?30:t["headerheight"],indexwidth:t["indexwidth"]==null?i0:t["indexwidth"],highlightrowonhover:t["highlightrowonhover"]!=null&&t["highlightrowonhover"],highlightcolumnfillstyle:null,activecolumnfillstyle:null,highlightrowfillstyle:null,activerowfillstyle:null}));this.UU_=t;this.Vyt_=0;this.nUi_=0;this.hUi_(t);this.rUi_=null;this.f$t_=null;this.m0t_=new mA;this.oUi_=new mA;this.lUi_=!0;this.uUi_=[];this.aUi_=[];this.UU_["rows"]=this.Vyt_;this.UU_["cols"]=this.nUi_;this.UUt_=new U$(this.UU_);this.bxi_=this.UUt_.vxi_();this.$Li_=[];this._Li_=(new sI).Lq_(this.bxi_.AKt_());this.GY_(this.UUt_);this.UUt_.ft_({top:0,bottom:0,left:0,right:0});this.cq_(new zB);this.bxi_.dUt_().GY_(this._Li_);this.gUi_(this.Vyt_,this.nUi_,this.UUt_);this.Oxi_=()=>{const t=this.bxi_.AKt_().clone(),i=this.bxi_.dUt_().rt_().clone();this._Li_.Lq_(t);i.de_(t.Ie_()).Be_(t.Ts_());this._Li_.ht_(i);const s=this.Axi_();if(s!=null&&this.cUi_!=null){let t;const i=undefined;s.wxi_()!=null&&(t=s.wxi_().getBounds());this.cUi_.Pxi_(null,null,t)}};this.UUt_.on(G$.kxi_,this.Oxi_);this.IUi_=(t,i,s)=>{const e=s["width"]["new"]-s["width"]["old"];let A,n;const h=this.Ayt_(s["column"]),r=h.Ie_()+e;h.Jp_=r;this.fUi_(s["column"]);for(A=0;A<this.Vyt_;++A){n=this.lEi_(A,s["column"]);n.cxi_()===y$.FO_&&n.N_()["text"]["shape"].de_(r);for(let t=s["column"];t<this.nUi_;++t){n=this.lEi_(A,t);n.exi_();n.hxi_()}}for(A=0;A<this.$Li_.length;++A){const t=this.$Li_[A],i=t.getBounds().clone();t.eUi_(t.nxi_().Fyt_(),s["column"])&&i.de_(i.Ie_()+e);t.nxi_().Ayt_()>s["column"]&&i.setX(i.getX()+e);t.ht_(i)}};this.CUi_=(t,i,s)=>{const e=s["height"]["new"]-s["height"]["old"];let A,n;const h=this.Fyt_(s["row"]);h.Pp_=h.Ts_()+e;this.dUi_(s["row"]);for(A=0;A<this.nUi_;++A)for(let t=s["row"];t<this.Vyt_;++t){n=this.lEi_(t,A);n.exi_();n.hxi_()}for(A=0;A<this.$Li_.length;++A){const t=this.$Li_[A],i=t.getBounds().clone();t.eUi_(s["row"],t.nxi_().Ayt_())&&i.Be_(i.Ts_()+e);t.nxi_().Fyt_()>s["row"]&&i.setY(i.getY()+e);t.ht_(i)}};this.bxi_.on(bR.BTt_,this.IUi_);this.bxi_.on(bR.QTt_,this.CUi_);this.Sxi_();if(this.UU_["autotablesize"]){const t=this.Sxi_();this.UUt_.ht_(new mA({x:this.rt_().getX(),y:this.rt_().getY(),width:this.rt_().Ie_()<t.Ie_()?this.rt_().Ie_():t.Ie_(),height:this.rt_().Ts_()<t.Ts_()?this.rt_().Ts_():t.Ts_()}))}else this.UUt_.ht_(this.rt_());this.KLi_=this.BUi_(this.UUt_);this.wUi_=new V$(this);if(this.UU_["content"]["editable"]){this.cUi_=this.QUi_(this.UUt_);this.UUt_.C5_("TableViewSelection").Kv_(!1);this.KLi_.remove(this.UUt_.C5_("TableViewSelection"));this.KLi_.add(this.cUi_)}this.EUi_=this.pUi_(this.bxi_);this.KLi_.add([this.wUi_,this.EUi_]);this.h4t_(this.UUt_.K3_());if(this.cUi_!=null){this.UUt_.off(G$.kxi_,this.cUi_.Pxi_);const t=t=>{if(t.key==="Enter"||t.keyCode===13){t.preventDefault();this.cUi_.sLi_()===!1&&this.cUi_.qxi_();const i=this.Axi_();if(i!=null){const t=this.UUt_.eKt_(),s=i.wxi_()!=null?i.wxi_().getBounds().Ts_()-1:0;this.Kxi_(Math.min(i.Fyt_()+s+1,t.Ts_()-1),Math.min(Math.max(0,i.Ayt_()),t.Ie_()-1),!0)}}};this.cUi_.tLi_();this.cUi_.Mxi_().addEventListener("keypress",t)}}on(t,i){this.mUi_(t)&&this.yUi_(t);return super.on(t,i)}DUi_(){return this.UU_["data"]}MUi_(t){this.vUi_(t);this.UUt_.CUt_(this.Vyt_,this.nUi_);return this}bUi_(t){this.NUi_(t);this.UUt_.CUt_(this.Vyt_,this.nUi_);return this}iyt_(){return this.Vyt_}syt_(){return this.nUi_}Kxi_(t,i,s){if(this.cUi_!=null)if(this.ZLi_(t,i)){let e=this.lEi_(t,i),A=null;if(e.wxi_()!=null){e=e.wxi_().nxi_();A=e.wxi_().getBounds()}t=e.Fyt_();i=e.Ayt_();this.f$t_=this.lEi_(t,i);s===!0?this.cUi_.Kxi_({row:t,column:i},!0,A):this.cUi_.Kxi_(null,!1);const n=this.lEi_(t,i).ct_();this.cUi_.Mxi_().style.backgroundColor=new nA(n.getColor()).ms_();e.yxi_(e.FE_());e.oxi_(e.FE_().vF_())}else{this.cUi_.Kxi_(null,!1);this.f$t_=null}else if(this.ZLi_(t,i)){this.Fyt_(t).h3_();this.Ayt_(i).h3_();this.f$t_=this.lEi_(t,i)}else{this.bxi_.NKt_(-1);this.bxi_.vYt_(-1);this.f$t_=null}return this}Axi_(){return this.f$t_}lEi_(t,i){return t!=null&&t<this.Vyt_&&t>=0&&i!=null&&i<this.nUi_&&i>=0?this.SUi_[t][i]:null}GUi_(){if(this.lUi_===!0){const t=this.UUt_.lKt_(),i=Math.floor(t.Ts_()),s=Math.floor(t.Ie_());let e=0,A=0;const n=this.RUi_(),h=this.kUi_();let r=0;for(r=n;r<i;r++)e+=this.Fyt_(r).Ts_();e+=r+1<this.Vyt_?this.Fyt_(r+1).Ts_()*(t.Ts_()-i):0;for(r=h;r<s;r++)A+=this.Ayt_(r).Ie_();A+=r+1<this.nUi_?this.Ayt_(r+1).Ie_()*(t.Ie_()-s):0;this.m0t_.Be_(e);this.m0t_.de_(A);this.lUi_=!1}return this.m0t_}Sxi_(){if(this.lUi_===!0){let t=0,i=0,s;for(s=0;s<this.nUi_;s++)t+=this.Ayt_(s).Ie_();for(s=0;s<this.Vyt_;s++)i+=this.Fyt_(s).Ts_();const e=this.bxi_.TKt_().$C_()?this.bxi_.iKt_():0,A=this.bxi_.KKt_().$C_()?this.bxi_.tKt_():0;this.oUi_.ce_({x:this.getBounds().getX(),y:this.getBounds().getY(),width:t+A,height:i+e});this.lUi_=!1}return this.oUi_}FUi_(t){if(t!=null)for(let i=0;i<t.length&&i<this.Qyt_.length;i++)this.Ayt_(i).de_(t[i]);return this}xUi_(t){if(t!=null)for(let i=0;i<t.length&&i<this.LUt_.length;i++)this.Fyt_(i).Be_(t[i]);return this}LUi_(t){const i=[];if(t!=null&&t<this.nUi_&&t>=0)for(let s=0;s<this.Vyt_;s++)i.push(this.UU_["data"][s][t]);return i}UUi_(t){return t!=null&&t<this.Vyt_&&t>=0?this.UU_["data"][t].slice(0):[]}Ayt_(t){return this.Qyt_[t]}Fyt_(t){return this.LUt_[t]}YUi_(t){for(let i=0;i<t.length;i++)this.Ayt_(t[i]).nf_(!1);return this}TUi_(t){for(let i=0;i<t.length;i++)this.Fyt_(t[i]).nf_(!1);return this}KUi_(){for(let t=0;t<this.Vyt_;t++)this.Fyt_(t).nf_(!0);return this}HUi_(){for(let t=0;t<this.nUi_;t++)this.Ayt_(t).nf_(!0);return this}qUi_(t){for(let i=0;i<t.length;i++)this.Fyt_(t[i]).nf_(!0);return this}JUi_(t){for(let i=0;i<t.length;i++)this.Ayt_(t[i]).nf_(!0);return this}oYt_(){return this.UUt_.oYt_()}AYt_(){return this.UUt_.nYt_()[0]}PUi_(t){this.rUi_=t;this.td_();return this}VUi_(t){this.UU_["content"]["editable"]=t;if(t===!0){this.cUi_=this.QUi_(this.UUt_);this.KLi_.add(this.cUi_);this.KLi_.remove(this.wUi_);this.wUi_.dispose();this.wUi_=new V$(this);this.KLi_.add(this.wUi_)}else{this.cUi_!=null&&this.cUi_.dispose();this.KLi_.remove(this.cUi_);this.cUi_=null}return this}OUi_(t,i){if(t==null||i==null||t.Fyt_()===i.Fyt_()&&t.Ayt_()===i.Ayt_())return null;let s=null,e=null;const A=this.YLi_(t,i);t=A[0];i=A[1];let n,h;for(n=t.Fyt_();n<=i.Fyt_();++n)for(h=t.Ayt_();h<=i.Ayt_();++h){s=this.lEi_(n,h);e=s.wxi_();e!=null&&this.WUi_(e.nxi_())}e=new W$(t,i,this._Li_,this.$Li_,this);for(n=t.Fyt_();n<=i.Fyt_();++n)for(h=t.Ayt_();h<=i.Ayt_();++h){s=this.lEi_(n,h);s.pxi_(e)}return e}WUi_(t){if(t==null)return this;const i=t.wxi_();if(i==null)return this;i.dispose();return this}Gyt_(t){this.insertRow(this.Vyt_,t);return this}QEi_(t){if(t>=0&&t<this.Vyt_){for(let i=0;i<this.$Li_.length;++i){let s=this.$Li_[i];if(s.nxi_().Fyt_()<=t&&s.sUi_().Fyt_()>=t)if(s.iyt_()>2||s.syt_()>2){let e=s.nxi_(),A=s.sUi_();t===e.Fyt_()?e=this.lEi_(e.Fyt_()+1,e.Ayt_()):t===A.Fyt_()&&(A=this.lEi_(A.Fyt_()-1,A.Ayt_()));s.dispose();s=this.OUi_(e,A);this.$Li_.splice(i,0,s);this.$Li_.pop()}else{s.dispose();--i}}this.LUt_.splice(t,1);this.SUi_.splice(t,1);--this.Vyt_;this.dUi_(0);this.UUt_.CUt_(this.Vyt_,this.nUi_);this.zUi_(t,0);this.XUi_(t)}return this}pEi_(t){if(t>=0&&t<this.nUi_){let i;for(i=0;i<this.$Li_.length;++i){let s=this.$Li_[i];if(s.nxi_().Ayt_()<=t&&s.sUi_().Ayt_()>=t)if(s.iyt_()>2||s.syt_()>2){let e=s.nxi_(),A=s.sUi_();t===e.Ayt_()?e=this.lEi_(e.Fyt_(),e.Ayt_()+1):t===A.Ayt_()&&(A=this.lEi_(A.Fyt_(),A.Ayt_()-1));s.dispose();s=this.OUi_(e,A);this.$Li_.splice(i,0,s);this.$Li_.pop()}else{s.dispose();--i}}this.Qyt_.splice(t,1);for(i=0;i<this.Vyt_;++i)this.SUi_[i].splice(t,1);--this.nUi_;this.fUi_(0);this.UUt_.CUt_(this.Vyt_,this.nUi_);this.zUi_(0,t);this.jUi_(t)}return this}insertRow(t,i,s){if(t==null)return this;s==null&&(s=this.UU_["index"]["indexdata"][t]!=null?this.UU_["index"]["indexdata"][t]:t.toString());const e=new z$(this.Vyt_,s,this.bxi_,this.UUt_,this,this.UU_);++this.Vyt_;if(t>=this.Vyt_-1){this.LUt_.push(e);this.SUi_.push([])}else{this.LUt_.splice(t,0,e);this.SUi_.splice(t,0,[]);this.dUi_(0)}for(let s=0;s<this.nUi_;++s){this.SUi_[t][s]=new N$(t,s,null,this,this.UU_);this.SUi_[t][s].uxi_(i[s])}this.UUt_.CUt_(this.Vyt_,this.nUi_);this.zUi_(t,0);this.XUi_(t);this.ZUi_(t);return this}Dyt_(t){this.Syt_(this.nUi_,t);return this}Syt_(t,i,s){if(t==null)return this;s==null&&(s=this.UU_["index"]["indexdata"][t]!=null?this.UU_["index"]["indexdata"][t]:t.toString());const e=new S$(this.nUi_,s,this.bxi_,this.UUt_,this,this.UU_);let A;++this.nUi_;if(t>=this.nUi_-1){this.Qyt_.push(e);for(A=0;A<this.Vyt_;++A){this.SUi_[A][t]=new N$(A,t,null,this,this.UU_);this.SUi_[A][t].uxi_(i[A])}this.uUi_[t]=this.Qyt_[t-1].Ie_()}else{this.Qyt_.splice(t,0,e);for(A=0;A<this.Vyt_;++A){this.SUi_[A].splice(t,0,new N$(A,t,null,this,this.UU_));this.SUi_[A][t].uxi_(i[A])}this.fUi_(0)}this.UUt_.CUt_(this.Vyt_,this.nUi_);this.jUi_(t);this.zUi_(0,t);this._Ui_(t);return this}dispose(){if(this.Df_())return;let t;if(this.$Ui_)for(t in T$)this.off(T$[t]);if(this.cUi_!=null){this.cUi_.Mxi_().removeEventListener("input",this.tYi_);this.cUi_.dispose()}this.wUi_!=null&&this.wUi_.dispose();this.EUi_!=null&&this.EUi_.dispose();Mi.document.removeEventListener("mousedown",this.iYi_);this.bxi_.off(bR.BTt_,this.IUi_);this.bxi_.off(bR.QTt_,this.CUi_);this.UUt_.off(G$.kxi_,this.Oxi_);this.UUt_.dispose();super.dispose()}sYi_(){return this.wUi_}Nxi_(){this.lUi_=!0;return this}mUi_(t){let i;for(i in T$)if(T$.hasOwnProperty(i)&&t===T$[i])return!0;return!1}yUi_(t){this.$Ui_||(this.$Ui_={});if(!this.$Ui_[t]){this.$Ui_[t]=(i,s,e)=>this.notify(t,this,e);this.wUi_.on(t,this.$Ui_[t])}}XUi_(t){t=t==null?0:t;for(let t=0;t<this.Vyt_;++t)this.LUt_[t].setIndex(t);return this}jUi_(t){for(let i=t=t==null?0:t;i<this.nUi_;++i)this.Qyt_[i].setIndex(i);return this}_Ui_(t){for(let i=0;i<this.$Li_.length;++i){const s=this.$Li_[i];for(let i=s.nxi_().Fyt_();i<=s.sUi_().Fyt_();++i)s.eUi_(i,t)&&this.SUi_[i][t].pxi_(s)}}ZUi_(t){for(let i=0;i<this.$Li_.length;++i){const s=this.$Li_[i];for(let i=s.nxi_().Ayt_();i<=s.sUi_().Ayt_();++i)s.eUi_(t,i)&&this.SUi_[t][i].pxi_(s)}}zUi_(t,i){i=i==null?0:i;for(let s=t=t==null?0:t;s<this.Vyt_;++s){this.LUt_[s].setIndex(s);for(let t=i;t<this.nUi_;++t){const i=undefined;this.SUi_[s][t].Hyt_(s).mxi_(t).exi_().hxi_()}}return this}dUi_(t){if(t<0)return this;for(let i=t+1;i<this.Vyt_;++i)this.aUi_[i]=this.aUi_[i-1]+this.LUt_[i-1].Ts_();return this}fUi_(t){if(t<0)return this;for(let i=t+1;i<this.nUi_;++i)this.uUi_[i]=this.uUi_[i-1]+this.Qyt_[i-1].Ie_();return this}hUi_(t){let i;const s=t["data"];if(s!=null){const t=[];if(Array.isArray(s))for(i=0;i<s.length;i++)t.push(s[i].slice(0));else if(s instanceof qb)for(i=0;i<s.iyt_();i++)t.push(s.Fyt_(i).slice(0));this.UU_["data"]=t}this.UU_["rows"]!=null&&this.UU_["cols"]!=null||(this.UU_["autotablesize"]=!0);if(this.UU_["autotablesize"]===!0&&this.UU_["data"]!=null){this.Vyt_=this.UU_["data"].length;this.UU_["data"][0]!=null&&(this.nUi_=this.UU_["data"][0].length)}else{this.Vyt_=this.UU_["rows"]==null||this.UU_["rows"]<0?0:this.UU_["rows"];this.nUi_=this.UU_["cols"]==null||this.UU_["cols"]<0?0:this.UU_["cols"]}if(this.UU_["index"]!=null){this.UU_["index"]["textstyle"]==null&&(this.UU_["index"]["textstyle"]={alignment:Fa.ne_,baseline:ka.j_});this.UU_["index"]["activerowfillstyle"]==null&&(this.UU_["index"]["activerowfillstyle"]=j$);this.UU_["index"]["indexdata"]==null?this.UU_["index"]["indexdata"]=[]:this.UU_["index"]["indexdata"]=this.UU_["index"]["indexdata"].slice(0);this.UU_["index"]["evenfillstyle"]==null&&(this.UU_["index"]["evenfillstyle"]=Z$);this.UU_["index"]["oddfillstyle"]==null&&(this.UU_["index"]["oddfillstyle"]=Z$);this.UU_["index"]["gridstyle"]==null&&(this.UU_["index"]["gridstyle"]=_$)}else this.UU_["index"]={textstyle:{alignment:Fa.ne_,baseline:ka.j_},gridstyle:_$,evenfillstyle:Z$,oddfillstyle:Z$,indexdata:[],activerowfillstyle:new wr(j$)};if(this.UU_["header"]!=null){this.UU_["header"]["headerdata"]==null?this.UU_["header"]["headerdata"]=[]:this.UU_["header"]["headerdata"]=this.UU_["header"]["headerdata"].slice(0);this.UU_["header"]["evenfillstyle"]==null&&(this.UU_["header"]["evenfillstyle"]=Z$);this.UU_["header"]["oddfillstyle"]==null&&(this.UU_["header"]["oddfillstyle"]=Z$);this.UU_["header"]["gridstyle"]==null&&(this.UU_["header"]["gridstyle"]=_$);this.UU_["header"]["highlightcolumnfillstyle"]==null&&(this.UU_["header"]["highlightcolumnfillstyle"]=new wr(j$))}else this.UU_["header"]={evenfillstyle:Z$,oddfillstyle:Z$,gridstyle:_$,headerdata:[],highlightcolumnfillstyle:new wr(j$)};if(this.UU_["content"]!=null){this.UU_["content"]["textstyle"]==null&&(this.UU_["content"]["textstyle"]={alignment:Fa.ne_,baseline:ka.JQ_,font:t0});this.UU_["content"]["textsizemode"]==null&&(this.UU_["content"]["textsizemode"]=y$.Cut);this.UU_["content"]["evenfillstylecolumn"]==null&&(this.UU_["content"]["evenfillstylecolumn"]=Z$);this.UU_["content"]["oddfillstylecolumn"]==null&&(this.UU_["content"]["oddfillstylecolumn"]=Z$);this.UU_["content"]["activerowfillstyle"]==null&&(this.UU_["content"]["activerowfillstyle"]=j$);this.UU_["content"]["highlightcolumnfillstyle"]==null&&(this.UU_["content"]["highlightcolumnfillstyle"]=j$);this.UU_["content"]["activecelllinestyle"]==null&&(this.UU_["content"]["activecelllinestyle"]={color:$$,width:1,pixelsnapmode:!0});this.UU_["content"]["editable"]==null&&(this.UU_["content"]["editable"]=!0)}else this.UU_["content"]={textstyle:{alignment:Fa.ne_,baseline:ka.JQ_,font:t0},editable:!0,textsizemode:y$.FO_,evenfillstylecolumn:Z$,oddfillstylecolumn:Z$,activerowfillstyle:j$,highlightcolumnfillstyle:j$,activecelllinestyle:{color:$$,width:1,pixelsnapmode:!0}};return this}gUi_(t,i,s){this.eYi_(t,i);this.UU_["indextitlefillstyle"]!=null?this.bxi_.kKt_(this.UU_["indextitlefillstyle"]):this.bxi_.kKt_(Z$);const e=this;s.setData({dataprovider:new class extends KG{pUt_(t,i){return e.SUi_[i][t].pUt_()}mUt_(t){return t>-1?e.Qyt_[t].mV_():""}wUt_(t){return t>-1?e.LUt_[t].mV_():""}yUt_(t,i,s){if(e.SUi_[i][t]!=null&&e.SUi_[i][t].N_()!=null){const A=e.SUi_[i][t].N_();e.rUi_!=null?s["background"]["fillstyle"]=il.BD_(e.rUi_):s["background"]["fillstyle"]=A["background"]["fillstyle"]!=null?A["background"]["fillstyle"]:s["background"]["fillstyle"];s["border"]=Pi(A["border"],s["border"]);s["text"]["shape"]=A["text"]["shape"].clone();e.SUi_[i][t].exi_();e.SUi_[i][t].hxi_()}return s}},contentmeasure:{measurecolumn:(t,i,s,e)=>({width:this.Qyt_[t].Ie_()<0?0:this.Qyt_[t].Ie_()}),measurerow:(t,i,s,e)=>({height:this.LUt_[t].Ts_()<0?0:this.LUt_[t].Ts_()})}});return this}eYi_(t,i){this.SUi_=[];this.LUt_=[];this.Qyt_=[];this.uUi_=[];this.aUi_=[];let s;const e=[s0-1];let A=e.length-1,n=0;for(s=0;s<t;++s){this.SUi_.push([]);this.LUt_.push(new z$(s,this.UU_["index"]["indexdata"][s]!=null?this.UU_["index"]["indexdata"][s]:(s+1).toString(),this.bxi_,this.UUt_,this,this.UU_));this.aUi_[s]=n;n+=this.LUt_[s].Ts_()}let h=0;for(s=0;s<i;++s){let t="";if(this.UU_["header"]["headerdata"][s]!=null)t=this.UU_["header"]["headerdata"][s];else{if(e[A]>=s0+e0-1)if(A0(e)===!0){n0(e);e[++A]=s0}else{e[A]=s0;++e[A-1]}else++e[A];t=Uo.decodeText(e)}this.Qyt_.push(new S$(s,t,this.bxi_,this.UUt_,this,this.UU_));this.uUi_[s]=h;h+=this.Qyt_[s].Ie_()}for(s=0;s<t;++s)for(let t=0;t<i;++t){let i;this.UU_["data"]!=null&&this.UU_["data"][s]!=null&&this.UU_["data"][s][t]!=null&&(i=this.UU_["data"][s][t]);this.SUi_[s][t]=new N$(s,t,null,this,this.UU_);this.SUi_[s][t].uxi_(i)}return this}BUi_(t){const i=["TableViewSelection","TableViewHighlight"],s=t.K3_();i.forEach((i=>{t.C5_(i).Kv_(!1);s.remove(t.C5_(i))}));t.C5_("TableViewSplitter").S$t_(SU.v6_).on(NU.e4_,((t,i,s)=>{if(s["row"]!==void 0)s["row"]>=0?this.Fyt_(s["row"]).Be_(s["height"]["new"]):this.UU_["headerheight"]=s["height"]["new"];else if(s["column"]!==void 0){const t=s["column"];t>=0?this.Ayt_(t).de_(s["width"]["new"]):this.UU_["indexwidth"]=s["width"]["new"]}})).R$t_(!0).Kv_(!0);return s}QUi_(t){this.UUt_.C5_("TableViewInPlaceEditor").Kv_(!1);const i=new F$(t,{highlight:!1,autosubmit:!0,focustrigger:k$.et_,backgroundcolor:"white"}).Kv_(!0).on(R$.Fxi_,((t,i,s)=>{const e=s["cell"]["row"],A=s["cell"]["column"];this.SUi_[e][A].uxi_(s["value"])})),s=i.Mxi_();this.tYi_=t=>{if(this.f$t_!=null){const i=this.f$t_.Fyt_(),e=this.f$t_.Ayt_(),A=t["currentTarget"]["value"];this.ZLi_(i,e)===!0&&this.lEi_(i,e).axi_()(A)===!1&&(s["value"]=A.replace(/[^-?\d*\.?\d*$]/g,""))}};this.AYi_=t=>{if(t.altKey===!0&&(t.key==="Enter"||t.keyCode===13)&&this.f$t_!=null){const i=this.f$t_.Fyt_(),e=this.f$t_.Ayt_(),A=t["currentTarget"]["value"]+"\n";this.ZLi_(i,e)&&this.lEi_(i,e).axi_()(A)===!0&&(s["value"]+="\n")}};s.addEventListener("input",this.tYi_);s.addEventListener("keydown",this.AYi_);return i}pUi_(t){const i=new MU(t).Kv_(!0);let s=!1,e;i.on(DU.h$t_,((i,e,A)=>{this.UU_["highlightrowonhover"]===!0&&t.XUt_(A.A$t_());s=!1}));if(this.cUi_!=null){e=this.cUi_.Mxi_();this.nYi_=function(t){s=!1};e.addEventListener("mousedown",this.nYi_)}this.iYi_=i=>{if(s===!0){this.UU_["highlightrowonhover"]===!0&&t.XUt_(-1);this.Kxi_(null);t.vYt_(-1);t.NKt_(-1);this.wUi_.OLi_()}};Mi.document.addEventListener("mousedown",this.iYi_);i.on(xS.Okt_,(()=>{s=!0}));i.on(xS.Vkt_,(()=>{s=!1}));return i}ZLi_(t,i){return i<this.nUi_&&i>-1&&t<this.Vyt_&&t>-1}vUi_(t){if(t>=0&&this.UU_["autotablesize"]===!1){let i=0;if(t>=this.Vyt_)for(i=this.Vyt_;i<t;i++)this.LUt_.push(new z$(i,(i+1).toString(),this.bxi_,this.UUt_,this,this.UU_));else this.LUt_=this.LUt_.slice(0,t);this.Vyt_=t}return this}NUi_(t){if(t>=0&&this.UU_["autotablesize"]===!1){let i=0;if(t>=this.nUi_)for(i=this.nUi_;i<t;i++)this.Qyt_.push(new S$(i,"Column #"+i,this.bxi_,this.UUt_,this,this.UU_));else this.Qyt_=this.Qyt_.slice(0,t);this.nUi_=t}return this}RUi_(){return Math.floor(this.UUt_.lKt_().getY())}kUi_(){return Math.floor(this.UUt_.lKt_().getX())}Bxi_(t){return t===X$.Number?t=>t==null||isNaN(t)===!1&&t.toString().indexOf("\n")===-1:()=>!0}Ixi_(t,i,s){let e=this.DUi_(),A;e==null&&(e=[]);let n=0;if(e[t]==null){n=t+1-e.length;for(A=0;A<n;A++)e.push([])}if(e[t][i]==null){n=i+1-e[t].length;for(A=0;A<n;A++)e[t].push("")}e[t][i]=s;return this}YLi_(t,i){const s={row:t.Fyt_(),cp_:t.Ayt_()};t=this.lEi_(t.Fyt_()<i.Fyt_()?t.Fyt_():i.Fyt_(),t.Ayt_()<i.Ayt_()?t.Ayt_():i.Ayt_());i=this.lEi_(s.row>i.Fyt_()?s.row:i.Fyt_(),s.cp_>i.Ayt_()?s.cp_:i.Ayt_());let e=null,A=null;for(let s=t.Fyt_();s<=i.Fyt_();++s)for(let n=t.Ayt_();n<=i.Ayt_();++n){e=this.lEi_(s,n);A=e.wxi_();if(A!=null){const s=A.nxi_();t.Fyt_()>s.Fyt_()&&(t=this.lEi_(s.Fyt_(),t.Ayt_()));t.Ayt_()>s.Ayt_()&&(t=this.lEi_(t.Fyt_(),s.Ayt_()));const e=A.sUi_();i.Fyt_()<e.Fyt_()&&(i=this.lEi_(e.Fyt_(),i.Ayt_()));i.Ayt_()<e.Ayt_()&&(i=this.lEi_(i.Fyt_(),e.Ayt_()));return[t,i]}}return[t,i]}TLi_(){return this.UUt_}vxi_(){return this.bxi_}HLi_(){return this.KLi_}Dxi_(){return this.cUi_}Exi_(){return this.aUi_}Qxi_(){return this.uUi_}};i=t([_s("geotoolkit.widgets.datasheet.DataSheet")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREYXRhU2V0IjoiRFVpXyIsInNldE51bWJlck9mUm93cyI6Ik1VaV8iLCJzZXROdW1iZXJPZkNvbHVtbnMiOiJiVWlfIiwiZ2V0TnVtYmVyT2ZSb3dzIjoiaXl0XyIsImdldE51bWJlck9mQ29sdW1ucyI6InN5dF8iLCJzZXRBY3RpdmVDZWxsIjoiS3hpXyIsImdldEFjdGl2ZUNlbGwiOiJBeGlfIiwiZ2V0Q2VsbCI6ImxFaV8iLCJnZXREYXRhU2hlZXRWaXNpYmxlTW9kZWxMaW1pdHMiOiJHVWlfIiwiZ2V0RGF0YVNoZWV0TGltaXRzIjoiU3hpXyIsInNldENvbHVtbnNXaWR0aCI6IkZVaV8iLCJzZXRSb3dzSGVpZ2h0IjoieFVpXyIsImdldENvbHVtbkRhdGEiOiJMVWlfIiwiZ2V0Um93RGF0YSI6IlVVaV8iLCJnZXRDb2x1bW4iOiJBeXRfIiwiZ2V0Um93IjoiRnl0XyIsImhpZGVDb2x1bW5zIjoiWVVpXyIsImhpZGVSb3dzIjoiVFVpXyIsInVuaGlkZUFsbFJvd3MiOiJLVWlfIiwidW5oaWRlQWxsQ29sdW1ucyI6IkhVaV8iLCJ1bmhpZGVSb3dzIjoicVVpXyIsInVuaGlkZUNvbHVtbnMiOiJKVWlfIiwiZ2V0SGlnaGxpZ2h0ZWRDb2x1bW4iOiJvWXRfIiwiZ2V0SGlnaGxpZ2h0ZWRSb3ciOiJBWXRfIiwic2V0VGFibGVCYWNrZ3JvdW5kIjoiUFVpXyIsInNldENvbnRlbnRFZGl0YWJsZSI6IlZVaV8iLCJtZXJnZUNlbGxzIjoiT1VpXyIsInVubWVyZ2VDZWxscyI6IldVaV8iLCJhZGRSb3ciOiJHeXRfIiwicmVtb3ZlUm93IjoiUUVpXyIsInJlbW92ZUNvbHVtbiI6InBFaV8iLCJhZGRDb2x1bW4iOiJEeXRfIiwiaW5zZXJ0Q29sdW1uIjoiU3l0XyJ9fX0g");const r0="cg_type",o0=function(t){return typeof t=="string"&&t.match(/^#href\(.*\)$/)?/^#href\((.*)\)$/.exec(t)[1]:null};let l0=null;var u0=function(){var t=class{constructor(){this.map={};this.hYi_={};this.$3t_("linestyle",hl.D_());this.$3t_("fillstyle",wr.D_());this.$3t_("imagepattern",El.D_());this.$3t_("textstyle",qa.D_());this.$3t_("histogramtickgenerator",rD.D_())}static Ai_(){l0==null&&(l0=new t);return l0}$3t_(t,i){this.map[t]=i;this.hYi_[i]=t}t4t_(){return this.map}getType(t){const i=t!=null&&fe(t)?t.D_():null;return i!=null?this.hYi_[i]!=null?this.hYi_[i]:i:null}i4t_(t){const i=this.map[t]!=null?this.map[t]:t;return i!=null?As(i):null}};return t}();const a0={save:function(t,i){const s=u0.Ai_().getType(t);s!=null&&i.Oi_(r0,s);const e=i.WE_(t);e!=null&&i.Oi_("cg_id",e);const A=Ce(t)?t.N_():t;for(const t in A)if(A.hasOwnProperty(t)&&t!=="cg_id"&&A[t]!==void 0){const s=A[t];if(typeof s=="object"&&s!==null){const e=i.WE_(s);e==null?i.zE_(t,s):i.Oi_(t,"#href("+e+")")}else typeof s!="function"&&i.Oi_(t,s)}t instanceof ch&&!A.hasOwnProperty("visible")&&i.Oi_("visible",!0);i.commit()},load:function(t,i){let s=i!=null?i:null;if(s==null){const i=t.getValue(r0),e=t.Vw_();i!=null&&(s=e!=null&&u0.Ai_().getType(e)===i?e:u0.Ai_().i4t_(i));s==null&&(s={})}const e=Ce(s)?{}:s;t.Tw_(((t,i)=>{const A=i.getValue(),n=o0(A);n==null?e[t]=A:i.Kw_(n)!=null?e[t]=i.Kw_(n):i.Yw_(n,(function(i){e[t]=i;Ce(s)&&s.dt_(e)}))}));Ce(s)&&s.dt_(e);const A=t.getValue("cg_id");A!=null&&t.Hw_(A,s);return s}};let g0=null;var c0=Ci(function(){var i;let s=i=class t extends Kr{constructor(){super();this.s4t_()}s4t_(){this.OE_("geotoolkit.widgets.Histogram",{save:function(t,i){const s=i.up_("histograms","array"),e=ur(t.LM_()).Gw_('node => id(node) == "hplot_layer"').xw_();for(let i=0;i<e.qY_();++i){const e=t.rYi_(i);s.zE_(i,e)}s.commit();i.zE_("xaxis",t.$$_["x"].N_());i.zE_("xlogaxis",t.$$_["xlog"].N_());i.zE_("yaxis",t.$$_["y"].N_());i.zE_("xgrid",t.gki_["x"].N_());i.zE_("xloggrid",t.gki_["xlog"].N_());i.zE_("ygrid",t.gki_["y"].N_());i.zE_("xlabel",t._$_["x"]["text"].N_());i.zE_("ylabel",t._$_["y"]["text"].N_());i.zE_("header",t.Eki_());i.commit()},load:function(t){const i=t.Kw_("#widget");if(i){ur(i.LM_()).Gw_('node => id(node) == "hplot_layer"').xw_().KY_();t.Tw_((function(t,i){t==="histograms"&&i.Tw_((function(t,i){i.Uw_(oN.D_())}))}));i.$$_["x"].dt_(t.getValue("xaxis"));i.$$_["xlog"].dt_(t.getValue("xlogaxis"));i.$$_["y"].dt_(t.getValue("yaxis"));i.gki_["x"].dt_(t.getValue("xgrid"));i.gki_["xlog"].dt_(t.getValue("xloggrid"));i.gki_["y"].dt_(t.getValue("ygrid"));i._$_["x"]["text"].dt_(t.getValue("xlabel"));i._$_["y"]["text"].dt_(t.getValue("ylabel"));i.Cki_(t.getValue("header"));i.oYi_()}return i}});this.OE_("geotoolkit.controls.shapes.Histogram",{save:function(t,i){const s=t;i.Oi_("name",s.dn_());i.Oi_("id",s.XC_());i.Oi_("accumulatedmode",s._vt_());i.Oi_("histogrammode",s.tbt_());i.Oi_("autogradient",s.Ivt_());i.Oi_("binspacing",s.Vvt_());i.Oi_("verticalscaling",s.zvt_());i.Oi_("frequencytype",s.jvt_());i.zE_("linestyle",s.gt_(),"linestyle");i.zE_("fillstyle",s.ct_(),"fillstyle");i.zE_("highlightstyle",s.fvt_(),"fillstyle");i.Oi_("autobin",s.Yvt_());s.Yvt_()||i.Oi_("bincount",s.cvt_());const e=s.Evt_();i.Oi_("autolimits",!e);if(e){i.Oi_("minimum",s.Em_());i.Oi_("maximum",s.pm_())}i.commit()},load:function(t){const i=t.Kw_("#widget");let s=null;if(i){s=i.lYi_();s.HC_(t.getValue("name"));s.JC_(t.getValue("id"));s.Zvt_(t.getValue("accumulatedmode"));s.$vt_(t.getValue("histogrammode"));s.nvt_(t.getValue("autogradient"));s.Ovt_(t.getValue("binspacing"));s.Wvt_(t.getValue("verticalscaling"));s.Xvt_(t.getValue("frequencytype"));t.getValue("autobin")?s.Uvt_():s.Wut_(t.getValue("bincount"));s.rB_(t.Uw_("linestyle","linestyle"));s.iQ_(t.Uw_("fillstyle","fillstyle"));s.hvt_(t.Uw_("fillstyle","highlightstyle"));t.getValue("autolimits")?s.lvt_():s.Qvt_(t.getValue("minimum"),t.getValue("maximum"))}return s}});this.OE_("default",a0)}static Ai_(){g0==null&&(g0=new i);return g0}};s=i=t([_s("geotoolkit.widgets.templates.HistogramRegistry")],s);return s}(),2,"eyJnZXRJbnN0YW5jZSI6IkFpXyJ9");var I0=Ci({aMt_:"dataUpdated"},2,"eyJEYXRhVXBkYXRlZCI6ImFNdF8ifSAg");const f0="#e0e0e0",C0="#f5f5f5",d0="16px Roboto",B0=30;var w0=Ci(function(){let i=class t extends _H{constructor(t){t==null&&(t={});const i=15,s=25,e=15,A=B0;t["border"]=qi(t["border"],{color:"transparent"},!0);let n={bounds:t["bounds"],border:t["border"],north:null,south:null,west:null,east:null,annotationssizes:{north:i+s,west:i+A+s,south:i+A+e+s,east:i+A},annotationitemswrap:!1};n=qi(t,n,!0);n["fillstyle"]=n["backgroundfillstyle"];super(n);this.ldt_=null;this.Us_=null;this.ZRi_=null;this.uYi_=!1;this.ai_=null;this.aYi_={x:0,y:0};this.gYi_={x:1,y:null};this.cYi_={x:{axis:{},grid:{}},y:{axis:{},grid:{}}};this.tki_={x:0,y:0};this.iki_={x:1,y:null};this.IYi_=null;this.fYi_=!1;this.CYi_=!1;this.dYi_=!1;this.BYi_={x:!1,y:!1};this.wYi_=!1;this.QYi_=!1;this.IYi_=new TQ;this.IYi_.JC_("hplot_layer");this.EYi_=this.lYi_();this.pRi_=new WC({orientation:fg.ux_});this.mRi_=new WC({orientation:fg.ax_});this.pZ_=rQ.j4_(this.s3t_,{location:ha.eG_,text:"title",textstyle:{font:d0}});const h=rQ.X4_(this.s3t_,{location:ha.nG_,connect:!0,annotationitemswrap:!1})["axis"];h.KE_(this.pRi_);h.qC_("horizontalAxis");const r=rQ.j4_(this.s3t_,{location:ha.nG_,text:"xlabel"}),o=rQ.j4_(this.s3t_,{location:ha.sG_,text:"ylabel"}),l=rQ.X4_(this.s3t_,{location:ha.sG_,connect:!0,annotationitemswrap:!1})["axis"];l.KE_(this.mRi_);l.qC_("verticalAxis");const u=rQ.X4_(this.s3t_,{location:ha.AG_,connect:!0,annotationitemswrap:!1})["axis"];u.qC_("verticalAxis");this.Fwt_={x:h,west:l,east:u};this._$_={x:r,y:o};this.lki_=new sI;this.lki_.GY_(this.IYi_);this.s3t_.LM_().xY_(0,this.lki_);this.aki_();this.Xei_();this.lki_.gk_(new tI);this.pYi_=this.AFi_.bind(this);this.jmt_=this.$Mt_.bind(this);this.tvt_=this.$Mt_.bind(this);this.setData(t);this.s3t_.LM_().Eq_(!0);this.rAi_(this.EYi_.getBounds());this.mYi_()}dispose(){if(this.ldt_!=null){this.ldt_.off(xD.gf_,this.pYi_);this.ldt_.off(UD.pct_,this.jmt_);this.ldt_.off(yM.jft_,this.tvt_);this.ldt_=null}super.dispose()}lYi_(){const t=new oN;t.on($b.aMt_,((t,i,s)=>{this.notify(I0.aMt_,i,s)}));this.IYi_.GY_(t);return t}rYi_(t){return this.IYi_.HY_(t!=null?t:0)}A4t_(){super.A4t_();this.iAi_.TZt_(Wk.ux_);this.Uei_.nf_(!1);this.s3t_.oN_(new jQ({noverticalscalescroll:!0}));const t=new sc,i=(i,s)=>{const e=this.rYi_().Svt_(i);return e==null?"":"["+t.format(e["minvalue"])+":"+t.format(e["maxvalue"])+"] "},s=(i,s)=>{const e=this.rYi_().Svt_(i);return e==null?"":t.format(e["frequency"])+" "};this.$ei_.hOt_(ha.eG_,{textconverter:i});this.$ei_.hOt_(ha.nG_,{textconverter:i});this.$ei_.hOt_(ha.AG_,{textconverter:s});this.$ei_.hOt_(ha.sG_,{textconverter:s});this.JDt_._Ot_((t=>{for(let i=0;i<t.length;++i)if(t[i]["histogram"]===this.rYi_())return t[i];return[]})).on(wF.yOt_,((t,i,s)=>{const e=s.getSelection()["indices"];e instanceof Array&&this.Fvt_(e,this._ei_)}));this.tAi_.Kv_(!0).TZt_(nY.X).on(rY.XZt_,(()=>{this.lki_.gk_(null)})).on(rY.jZt_,(()=>{this.lki_.gk_(new tI)}));return this}mYi_(){const t=new sc,i=(i,s)=>{const e=this.R__()?this.rYi_().Svt_(s):this.rYi_().Svt_(i);return e==null?"":"["+t.format(e["minvalue"])+":"+t.format(e["maxvalue"])+"] "},s=(i,s)=>{const e=this.R__()?this.rYi_().Svt_(s):this.rYi_().Svt_(i);return e==null?"":t.format(e["frequency"])+" "};if(this.R__()){this.iAi_.TZt_(Wk.ax_);this.Yei_.nf_(!1);this.s3t_.oN_(new jQ({nohorizontalscalescroll:!0}));this.$ei_.hOt_(ha.eG_,{textconverter:s});this.$ei_.hOt_(ha.nG_,{textconverter:s});this.$ei_.hOt_(ha.AG_,{textconverter:i});this.$ei_.hOt_(ha.sG_,{textconverter:i});this.tAi_.TZt_(nY.Y)}else{this.iAi_.TZt_(Wk.ux_);this.Uei_.nf_(!1);this.s3t_.oN_(new jQ({noverticalscalescroll:!0}));this.$ei_.hOt_(ha.eG_,{textconverter:i});this.$ei_.hOt_(ha.nG_,{textconverter:i});this.$ei_.hOt_(ha.AG_,{textconverter:s});this.$ei_.hOt_(ha.sG_,{textconverter:s});this.tAi_.TZt_(nY.X)}}aki_(){const t=new rD(this.rYi_().cvt_()),i=new JC,s=new fd,e=function(t){t.Vx_("major").setColor(f0);t.Vx_("minor").setColor(C0);t.Hx_("minor",!0);t.Hx_("edge",!1);return t},A=new rD(this.rYi_().cvt_()),n=new JC,h=new fd;e(A).Hx_("major",!1);e(n);e(h);this.$$_={x:t,y:i,xlog:s};this.gki_={x:A,y:n,xlog:h};if(this.fNt_==null){const t=new JC;e(t);this.fNt_=new sB(t,n);const i=new TQ;i.JC_("grid_layer");i.GY_(this.fNt_);this.lki_.xY_(0,i)}this.yYi_=(new TQ).GY_((new sI).Eq_(!0).Lq_(new mA(0,0,1,1)).GY_(this.DYi_=new ap({x:[0,1],y:[0,0],linestyle:new hl("red"),visible:!1})));this.s3t_.v4_(ha.ne_).Gq_(this.yYi_);this.cki_();return this}vvt_(){return this.rYi_().vvt_()}KH_(){return this.rYi_().KH_()}setOrientation(t){t!==this.KH_()&&this.jVt_();this.rYi_().setOrientation(t);this.mYi_();this.cki_();this.oYi_();return this}bgt_(){if(this.DYi_==null||this.DYi_.$C_()===!1||this.Us_==null)return this;const t=this.R__(),i=this.s3t_.LM_().ot_(),s=t?i.getY():i.getX(),e=s+(t?i.Ts_():i.Ie_()),A=[],n=[],h=[];let r;for(r=0;r<this.Us_.length;++r){const t=this.Us_[r];t>=s&&t<=e?A.push(t):Math.abs(t-s)<NA.Je_?A.push(s):Math.abs(t-e)<NA.Je_&&A.push(e)}const o=A.length;h[0]=0;n[0]=0;if(o>0){A.sort((function(t,i){return t-i}));const t=e-s;let i=0,l=0;for(r=0;r<o;++r){i=(A[r]-s)/t;l=(r+1)/o;h.push(i,i);n.push(l-1/o,l)}h.push(1);n.push(1)}else{h[1]=1;n[1]=0}t?this.DYi_.Qt_(n,h):this.DYi_.Qt_(h,n);this.DYi_.td_();return this}cki_(){if(this.R__()){this.Fwt_["west"].jZ_(this.$$_["x"+(this.uYi_?"log":"")]);this.Fwt_["x"].jZ_(this.$$_["y"]);this.fNt_.jZ_(fg.ux_,this.gki_["x"+(this.uYi_?"log":"")]);this.fNt_.jZ_(fg.ax_,this.gki_["y"])}else{this.Fwt_["x"].jZ_(this.$$_["x"+(this.uYi_?"log":"")]);this.Fwt_["west"].jZ_(this.$$_["y"]);this.Fwt_["east"].jZ_(this.$$_["y"]);this.fNt_.jZ_(fg.ax_,this.gki_["x"+(this.uYi_?"log":"")]);this.fNt_.jZ_(fg.ux_,this.gki_["y"])}}setData(t){if(t==null)return this;this.Jei_(t["tools"]);t["bounds"]!=null&&this.ht_(t["bounds"]);this.Cki_(t["header"]);this.Jei_(t["tools"]);t["x"]==null&&(t["x"]={});t["datasource"]==null&&this.ldt_!=null&&(t["datasource"]=this.ldt_);const i=t["datasource"];if(i!==this.ldt_){if(this.ldt_!=null){this.ldt_.off(xD.gf_,this.pYi_);this.ldt_.off(UD.pct_,this.jmt_);this.ldt_.off(yM.jft_,this.tvt_)}this.ldt_=i;if(this.ldt_!=null){this.ldt_.on(xD.gf_,this.pYi_);this.ldt_.on(UD.pct_,this.jmt_);this.ldt_.on(yM.jft_,this.tvt_)}}if(i!=null){t["autominmax"]!=null&&(this.ldt_["autominmax"]=t["autominmax"]);this.ldt_["autominmax"]==null&&(this.ldt_["autominmax"]=!0);((t=Pi(t,{x:{min:i["autominmax"]===!0?i.nA_(t["unit"]):this.tki_["x"],max:i["autominmax"]===!0?i.hA_(t["unit"]):this.iki_["x"]},unit:this.ai_}))["unit"]==null||t["datasource"].gn_()!=null&&!this.n4t_().gn_(t["datasource"].gn_()).Qn_(t["unit"])||t["datasource"].gn_()==null)&&(t["unit"]=t["datasource"].gn_());t["x"]["min"]==null&&this.ldt_["autominmax"]===!0&&(t["x"]["min"]=t["datasource"].nA_(t["unit"]));t["x"]["max"]==null&&this.ldt_["autominmax"]===!0&&(t["x"]["max"]=t["datasource"].hA_(t["unit"]));t["data"]==null&&(t["data"]=t["datasource"].toArray(!1,t["unit"]));t["x"]["label"]==null&&(t["x"]["label"]={});if(t["x"]["label"]["text"]==null){t["x"]["label"]["text"]=t["datasource"].dn_();t["unit"]!=null&&(t["unit"]instanceof JA?t["x"]["label"]["text"]+=" ("+t["unit"].fn_()+")":t["x"]["label"]["text"]+=" ("+t["unit"]+")")}}t["unit"]!==void 0&&(this.ai_=t["unit"]);t["autominmax"]!=null&&this.ldt_!=null&&(this.ldt_["autominmax"]=t["autominmax"]);if(t["data"]!=null){if(t["x"]["min"]==null||t["x"]["max"]==null){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const e=t["data"].length,A=t["data"];for(let t=0;t<e;t++){const e=A[t];if(!isNaN(e)){i=Math.min(i,e);s=Math.max(s,e)}}t["x"]["min"]=t["x"]["min"]||i;t["x"]["max"]=t["x"]["max"]||s}t["x"]["reversed"]==null&&(t["x"]["reversed"]=t["x"]["min"]>t["x"]["max"]);this.Us_=t["data"]}const s={};t["data"]!=null&&(s["data"]=t["data"]);t["bins"]!=null&&(s["bins"]=t["bins"]);t["fillstyle"]!=null&&(s["fillstyle"]=t["fillstyle"]);t["linestyle"]!=null&&(s["linestyle"]=t["linestyle"]);t["autogradient"]!=null&&(s["autogradient"]=t["autogradient"]);t["frequencytype"]!=null&&(s["frequencytype"]=t["frequencytype"]);t["highlightcolor"]!=null&&(s["highlightstyle"]={color:t["highlightcolor"]});t["binspacing"]!=null&&(s["binspacing"]=t["binspacing"]);this.oYi_(s);if(t["accumulation"]!=null){t["accumulation"]["visible"]!=null&&this.DYi_.nf_(t["accumulation"]["visible"]);t["accumulation"]["linestyle"]!=null&&this.DYi_.rB_(t["accumulation"]["linestyle"])}this.yFi_("x",t["x"]);this.yFi_("y",t["y"]);this.bgt_();return this}getData(t){t=t||{};const i={};this.getBounds()!=null&&(i["bounds"]=this.getBounds().N_());i["header"]=this.Eki_();i["tools"]=this.SAi_();i["x"]=this.DFi_("x",t);i["y"]=this.DFi_("y",t);this.ldt_!=null&&(i["autominmax"]=this.ldt_["autominmax"]);if(t["no-data"]!==!0){i["datasource"]=this.ldt_;i["data"]=this.Us_}const s=this.rYi_();i["bins"]=s.cvt_();i["fillstyle"]=s.ct_().N_();i["autogradient"]=s.Ivt_();i["linestyle"]=s.gt_();i["frequencytype"]=s.jvt_();i["highlightcolor"]=s.fvt_().getColor();i["binspacing"]=s.Vvt_();i["accumulation"]={visible:this.DYi_.$C_(),linestyle:this.DYi_.gt_().N_()};return i}N_(){return qi(this.getData(),super.N_())}Cki_(t){if(t==null)return this;const i={};if(t["title"]!=null){this.pZ_["text"].dt_(t["title"]);ua.NG_(this.pZ_["text"],this.pZ_["group"],ha.eG_)}t["annotationsize"]!=null&&(i["north"]=t["annotationsize"]);this.vei_(i);this.Xei_();return this}pvt_(){return this.rYi_().pvt_()}yvt_(){return this.rYi_().yvt_()}Em_(){return this.rYi_().Em_()}pm_(){return this.rYi_().pm_()}Eki_(){const t={};t["title"]=this.pZ_["text"].N_();t["annotationsize"]=this.s3t_.v4_(ha.eG_).cG_();return t}yFi_(t,i){if(i==null)return this;if((t=t.toLowerCase())!=="x"&&t!=="y")return this;const s={},e={},A={x:"south",y:"west"};i["axistickgenerator"]!=null&&(this.$$_[t]=i["axistickgenerator"]);i["gridtickgenerator"]!=null&&(this.gki_[t]=i["gridtickgenerator"]);if(i["label"]!=null){this._$_[t]["text"].dt_(i["label"]);ua.NG_(this._$_[t]["text"],this._$_[t]["group"],A[t])}i["annotationsize"]!=null&&(e[A[t]]=i["annotationsize"]);if(i["min"]!=null){this.aYi_[t]=i["min"];this.tki_[t]=i["min"];t==="x"&&(s["minvalue"]=i["min"]);if(t==="y"&&this.tki_[t]<0){this.aYi_[t]=0;this.tki_[t]=0}}if(i["max"]!=null){this.gYi_[t]=i["max"];this.iki_[t]=i["max"];t==="x"&&(s["maxvalue"]=i["max"]);if(t==="y"&&this.iki_[t]<0){this.gYi_[t]=0;this.iki_[t]=0}}if(i["neatlimits"]!=null)if(t==="x"){this.EYi_.avt_(i["neatlimits"]);this.fYi_=i["neatlimits"];this.dYi_=i["neatlimitscenteredonzero"]}else if(t==="y"){this.EYi_.gvt_(i["neatlimits"]);this.CYi_=i["neatlimits"]}if(t==="x"){i["autominmax"]!=null&&(this.wYi_=i["autominmax"]);if(this.wYi_)s["autominmax"]=i["autominmax"];else{if(this.fYi_){const i=NA.iA_(this.tki_[t],this.iki_[t],!1,this.dYi_);this.tki_[t]=i.Xs_();this.iki_[t]=i.zs_()}else{this.tki_[t]=this.aYi_[t];this.iki_[t]=this.gYi_[t]}s["minvalue"]=this.tki_[t];s["maxvalue"]=this.iki_[t]}}if(t==="y"){i["autominmax"]!=null&&(this.QYi_=i["autominmax"]);if(this.QYi_){const t=this.rYi_().pvt_();this.tki_["y"]=t[12];this.iki_["y"]=t[13]}else{this.tki_["y"]=this.aYi_["y"];this.iki_["y"]=this.gYi_["y"]}}if(i["axisticks"]!=null){this.$$_[t].dt_(i["axisticks"]);this.cYi_[t]["axis"]["tick"]=this.$$_[t].qx_("edge");this.cYi_[t]["axis"]["label"]=this.$$_[t].qx_("edge")}if(i["gridticks"]!=null){this.gki_[t].dt_(i["gridticks"]);this.cYi_[t]["grid"]["tick"]=this.gki_[t].qx_("edge");this.cYi_[t]["grid"]["label"]=this.gki_[t].qx_("edge")}if(i["annotationside"]!=null&&t==="y"){const t=i["annotationside"]==="left"||i["annotationside"]==="both"||i["annotationside"]==="west",s=i["annotationside"]==="right"||i["annotationside"]==="both"||i["annotationside"]==="east";this.Fwt_["west"].$C_()!==t&&this.Fwt_["west"].nf_(t);this.Fwt_["east"].$C_()!==s&&this.Fwt_["east"].nf_(s)}this.cki_();this.oYi_(s);if(i["reversed"]!=null){t==="x"&&this.s3t_.LM_().pq_(i["reversed"]);t==="y"&&this.s3t_.LM_().Eq_(i["reversed"])}if(i["preciselimits"]!=null&&i["preciselimits"]!==this.BYi_[t]){this.BYi_[t]=i["preciselimits"];if(this.BYi_[t]){this.cYi_[t]["axis"]["tick"]==null&&(this.cYi_[t]["axis"]["tick"]=this.$$_[t].qx_("edge"));this.cYi_[t]["axis"]["label"]==null&&(this.cYi_[t]["axis"]["label"]=this.$$_[t].qx_("edge"));this.cYi_[t]["grid"]["tick"]==null&&(this.cYi_[t]["grid"]["tick"]=this.gki_[t].qx_("edge"));this.cYi_[t]["grid"]["label"]==null&&(this.cYi_[t]["grid"]["label"]=this.gki_[t].qx_("edge"));this.$$_[t].Hx_("edge",!1);this.$$_[t].Jx_("edge",!1);this.gki_[t].Hx_("edge",!1);this.gki_[t].Jx_("edge",!1)}else{this.$$_[t].Hx_("edge",this.cYi_[t]["axis"]["tick"]);this.$$_[t].Jx_("edge",this.cYi_[t]["axis"]["label"]);this.gki_[t].Hx_("edge",this.cYi_[t]["grid"]["tick"]);this.gki_[t].Jx_("edge",this.cYi_[t]["grid"]["label"])}}this.vei_(e);this.Xei_();return this}oYi_(t){const i=this.rYi_();i.setData(t);if(this.CYi_){let t=1;i.jvt_()===iN.IMt_&&(i._vt_()===sN.kv_?t=i.yvt_():i.cvt_()>0&&(t=i.Dvt_(i.cvt_()-1)));const s=NA.iA_(0,t,this.uYi_,!1);!isNaN(s.zs_())&&isFinite(s.zs_())?this.iki_["y"]=s.zs_():this.iki_["y"]=1}if(this.iki_["y"]!=null)if(this.R__()){i.rt_().setX(this.tki_["y"]);i.rt_().de_(this.iki_["y"]-this.tki_["y"])}else{i.rt_().setY(this.tki_["y"]);i.rt_().Be_(this.iki_["y"]-this.tki_["y"])}this.rAi_(i.getBounds());this.s3t_.LM_().td_();this.$$_["x"]instanceof rD&&this.$$_["x"].Wut_(i.cvt_());this.gki_["x"]instanceof rD&&this.gki_["x"].Wut_(i.cvt_());return this}DFi_(t,i){if((t=t.toLowerCase())!=="x"&&t!=="y"&&t!=="z")return{};const s={};if(t==="x"){s["unit"]=this.ai_;this.ldt_!=null?s["autominmax"]=this.ldt_["autominmax"]:s["neatlimits"]=this.fYi_;if(i["no-data"]!==!0){s["datasource"]=this.ldt_;s["data"]=this.Us_}}else t==="y"&&(s["neatlimits"]=this.CYi_);s["label"]=this._$_[t]["text"].N_();const e={x:ha.nG_,y:ha.sG_,z:ha.eG_},A=this.s3t_.v4_(e[t]);s["annotationsize"]=t==="x"?A.cG_():A.gG_();s["min"]=this.tki_[t];s["max"]=this.iki_[t];let n=this.$$_[t].N_();s["axisticks"]=n;n=this.gki_[t].N_();s["gridticks"]=n;t==="x"&&(s["reversed"]=this.s3t_.LM_().ZY_());t==="y"&&(s["reversed"]=this.s3t_.LM_().jY_());t==="x"&&(s["preciselimits"]=this.BYi_["x"]);t==="y"&&(s["preciselimits"]=this.BYi_["y"]);return s}AFi_(t,i,s){if(t!==xD.gf_)return this;if(!(i instanceof zD||i instanceof bM))return this;s.name==="data"&&this.setData({data:i.toArray(!1,this.ai_)});s.name==="min"&&i["autominmax"]===!0&&this.setData({min:i.nA_(this.ai_)});s.name==="max"&&i["autominmax"]===!0&&this.setData({max:i.hA_(this.ai_)});this.bgt_();return this}$Mt_(t,i,s){this.setData({data:i.toArray(!1,this.ai_),autominmax:this.ldt_["autominmax"],x:{min:this.ldt_["autominmax"]===!0?i.nA_(this.ai_):this.tki_["x"],max:this.ldt_["autominmax"]===!0?i.hA_(this.ai_):this.iki_["x"]}});this.bgt_();return this}xvt_(){return this.rYi_().xvt_()}MYi_(t,i){const s=this.rYi_().kvt_(t).map((function(t){return t["binnumber"]}));this.Fvt_(s,i)}Fvt_(t,i){this.rYi_().Fvt_(t,i);return this}Jei_(t){if(t==null)return this;if(t["crosshair"]!=null){t["crosshair"]["north"]!=null&&(t["crosshair"]["north"]["textconverter"]=null);t["crosshair"]["south"]!=null&&(t["crosshair"]["south"]["textconverter"]=null);t["crosshair"]["east"]!=null&&(t["crosshair"]["east"]["textconverter"]=null);t["crosshair"]["west"]!=null&&(t["crosshair"]["west"]["textconverter"]=null)}super.Jei_(t);return this}l4t_(t,i){const s=undefined,e=new pw(i||c0.Ai_()).l5_(t);e.Hw_("#widget",this);e.Uw_("geotoolkit.widgets.Histogram","template");this.wq_()}u4t_(t){const i=undefined;return new pw(t||c0.Ai_()).o5_("template",this)}R__(){return this.KH_()===fg.ux_}jVt_(){const t=this._$_["x"]["text"].N_(),i=this._$_["y"]["text"].N_();this._$_["x"]["text"].dt_({text:i["text"],textstyle:i["textstyle"]});ua.NG_(this._$_["x"]["text"],this._$_["x"]["group"],ha.nG_);this._$_["y"]["text"].dt_({text:t["text"],textstyle:t["textstyle"]});ua.NG_(this._$_["y"]["text"],this._$_["y"]["group"],ha.sG_)}dt_(t){if((t=Es(t))==null)return this;this.setData(t);delete t["fillstyle"];if(t["backgroundfillstyle"]!==void 0){t["fillstyle"]=t["backgroundfillstyle"];delete t["backgroundfillstyle"]}super.dt_(t);return this}};i=t([_s("geotoolkit.widgets.Histogram")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRIaXN0b2dyYW0iOiJsWWlfIiwiZ2V0SGlzdG9ncmFtIjoicllpXyIsImluaXRpYWxpemVUb29scyI6IkE0dF8iLCJnZXRCaW5zIjoidnZ0XyIsImdldE9yaWVudGF0aW9uIjoiS0hfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0SGVhZGVyT3B0aW9ucyI6IkNraV8iLCJnZXRTdGF0aXN0aWNzIjoicHZ0XyIsImdldE1heEZyZXF1ZW5jeSI6Inl2dF8iLCJnZXRNaW5WYWx1ZSI6IkVtXyIsImdldE1heFZhbHVlIjoicG1fIiwiZ2V0SGVhZGVyT3B0aW9ucyI6IkVraV8iLCJzZXRBeGlzRGF0YU9wdGlvbnMiOiJ5RmlfIiwiZ2V0QXhpc0RhdGFPcHRpb25zIjoiREZpXyIsImdldEhpZ2hsaWdodGVkQmlucyI6Inh2dF8iLCJoaWdobGlnaHRSYW5nZSI6Ik1ZaV8iLCJoaWdobGlnaHRCaW5zIjoiRnZ0XyIsInNldFRvb2xzT3B0aW9ucyI6IkplaV8iLCJsb2FkVGVtcGxhdGUiOiJsNHRfIiwic2F2ZVRlbXBsYXRlIjoidTR0XyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");let Q0=null;var E0=Ci(function(){var i;let s=i=class t extends Kr{constructor(){super();this.s4t_()}s4t_(){const t=[ha.nG_,ha.sG_,ha.AG_];this.OE_("geotoolkit.widgets.MultiHistograms",{save:function(t,i){i.Oi_("type","multihistogram");i.zE_("options",t.N_());const s=i.up_("histograms","array"),e=t.vYi_();let A;for(A=0;A<e.length;A++)s.zE_(A,{hist:e[A],widget:t},"histogram");s.commit();const n=i.up_("groups","array"),h=t.bYi_();for(A=0;A<h.length;A++)n.zE_(A,{id:h[A],widget:t},"group");n.commit();i.commit()},load:function(t){const i=t.Kw_("#widget");if(i){i.dt_(t.getValue("options"));t.Tw_(((t,i)=>{t==="histograms"&&i.Tw_(((t,i)=>{i.Uw_("histogram")}))}));t.Tw_(((t,i)=>{t==="groups"&&i.Tw_(((t,i)=>{i.Uw_("group")}))}))}return i}});this.OE_("group",{save:function(t,i){const s=t["widget"],e=t["id"],A={id:e,models:s.NYi_(e,!1,!0),location:s.SYi_(e)},n=i.lp_(A);s.GYi_(e,A["location"])&&n.zE_("axis",s.GYi_(e,A["location"]),"axis");n.commit()},load:function(t){const i=t.Kw_("#widget"),s=t.getValue("models"),e=t.getValue("id"),A=t.getValue("location"),n=t.Uw_("axis","axis");i.RYi_(s,A,n,e)}});this.OE_("histogram",{save:function(i,s){const e=i["hist"],A=e.XC_(),n=i["widget"],h={id:A},r=s.lp_(h);r.zE_("shape",e,oN.D_());n.GYi_(e,t[0])&&r.zE_(t[0],n.GYi_(e,t[0]),"axis");n.GYi_(e,t[1])&&r.zE_(t[1],n.GYi_(e,t[1]),"axis");n.GYi_(e,t[2])&&r.zE_(t[2],n.GYi_(e,t[2]),"axis");r.commit()},load:function(i){const s=i.Kw_("#widget"),e=i.getValue("id"),A=i.Uw_(oN.D_(),"shape"),n=s.lYi_(A.N_(),{xaxis:null,yaxis:null},e),h=i.Uw_("axis",t[0]),r=i.Uw_("axis",t[1]),o=i.Uw_("axis",t[2]);h&&s.kYi_(t[0],h,n);r&&s.kYi_(t[1],r,n);o&&s.kYi_(t[2],o,n)}});function i(t,i){i.Oi_("length",t["length"]);i.Oi_("flip",t["flip"]);i.Oi_("accumulative",t["accumulative"]);const s=(new nd).dt_(t);i.zE_("axis",s,"geotoolkit.axis.Axis");i.commit()}this.OE_("axis",{save:i,load:function(t){let i={length:t.getValue("length"),flip:t.getValue("flip"),accumulative:t.getValue("accumulative")};const s=t.Uw_("geotoolkit.axis.Axis","axis");s&&(i=qi(i,s.N_()));return i}})}static Ai_(){Q0==null&&(Q0=new i);return Q0}};s=i=t([_s("geotoolkit.widgets.templates.MultiHistogramsRegistry")],s);return s}(),2,"eyJnZXRJbnN0YW5jZSI6IkFpXyJ9");var p0=Ci({FYi_:"histogramsselected",xYi_:"binsselected",LYi_:"axisselected",aMt_:"dataupdated"},2,"eyJIaXN0b2dyYW1zU2VsZWN0ZWQiOiJGWWlfIiwiQmluc1NlbGVjdGVkIjoieFlpXyIsIkF4aXNTZWxlY3RlZCI6IkxZaV8iLCJEYXRhVXBkYXRlZCI6ImFNdF8ifSAg");const m0="16px Roboto",y0="#e0e0e0",D0="#efefef";var M0=Ci(function(){let i=class t extends _H{constructor(t){t==null&&(t={});const i=20,s=25,e=15,A=30;t["viewcachesize"]=t["viewcache"]||t["viewcachesize"]!=null?qi(t["viewcachesize"],{width:256,height:256}):null;t["border"]=qi(t["border"],{color:"transparent"},!0);let n={bounds:t["bounds"],border:t["border"],north:null,south:null,west:null,east:null,axiswidth:40,axisheight:40,annotationssizes:{north:i+s,west:i+A+s,south:i+A+e+s,east:i+A}};n=qi(t,n,!0);super(n);this.UYi_=null;this.YYi_=!1;this.TYi_=!0;this.KYi_=[];this.HYi_={};this.HYi_[ha.sG_]=n["annotationssizes"]["west"];this.HYi_[ha.AG_]=n["annotationssizes"]["east"];this.HYi_[ha.nG_]=n["annotationssizes"]["south"];this.HU_={};this.HU_[ha.sG_]={};this.HU_[ha.AG_]={};this.HU_[ha.nG_]={};this.qYi_={};this.JYi_={};this.JYi_[ha.sG_]={};this.JYi_[ha.AG_]={};this.JYi_[ha.nG_]={};this.PYi_={};this.PYi_[ha.sG_]=(new sI).Cq_(0);this.PYi_[ha.AG_]=(new sI).Cq_(0);this.PYi_[ha.nG_]=(new sI).dq_(0);this.VYi_={};this.VYi_[ha.nG_]=(new TQ).JC_("south_layer");this.VYi_[ha.sG_]=(new TQ).JC_("West_layer");this.VYi_[ha.AG_]=(new TQ).JC_("east_layer");this.m4_=this.OYi_.bind(this);this.WYi_=this.zYi_.bind(this);this.A4t_();this.s3t_.K4_(this.PYi_[ha.sG_],ha.sG_);this.s3t_.H4_(0,this.PYi_[ha.AG_],ha.AG_);this.s3t_.H4_(0,this.PYi_[ha.nG_],ha.nG_);this.iQ_(new wr("white"));this.rB_(new hl("white").qD_({x:!1,y:!1}));this.s3t_.W4_();this.qRi_=n["viewcache"];this.PRi_={};if(n["viewcachesize"]!=null){this.qRi_=!0;this.PRi_=n["viewcachesize"]}this.lki_=new sI;this.lki_.Lq_(new mA(0,0,1,1));this.lki_.gk_(this.qRi_?new tI(this.PRi_["width"],this.PRi_["height"]):null);this.XYi_=!0;this.jYi_=null;this.ZYi_=new wr({color:"lightgrey"});this._Yi_=n["axiswidth"];this.$Yi_=n["axisheight"];const h=this.s3t_.LM_();h.xY_(0,this.lki_);h.Eq_(!0);this.fNt_=new sB;h.xY_(0,(new sI).GY_(this.fNt_));this.Uei_.Eq_(!0);this.IYi_=new TQ;this.tTi_=(new sI).ht_(new mA(0,0,1,1));this.lki_.xY_(0,this.e4t_());this.lki_.xY_(0,this.IYi_);this.lki_.xY_(0,this.tTi_);this.Us_=null;this.iTi_=pq.Ai_();this.pZ_=rQ.j4_(this.s3t_,{location:ha.eG_,text:"",textstyle:{font:m0}});this.s3t_.z4_();this.Xei_();this.setOptions(n)}sTi_(){return this.tTi_}A4t_(){if(this.VYi_==null)return this;super.A4t_();const t=this.s3t_.v4_(ha.nG_);t&&t.GY_((new sI).GY_(this.VYi_[ha.nG_]));const i=this.s3t_.v4_(ha.sG_);i&&i.GY_((new sI).GY_(this.VYi_[ha.sG_]));const s=this.s3t_.v4_(ha.AG_);s&&s.GY_((new sI).GY_(this.VYi_[ha.AG_]));this.eTi_=new MF(this.VYi_[ha.nG_]).HC_("north-axis-selection").Kv_(!1)._Ot_((t=>{for(let i=t.length;i>=0;i--){if(t[i]===this.s3t_.LM_())break;if(t[i]instanceof nd)return t[i]}return[]})).on(wF.yOt_,((t,i,s)=>{this.ATi_(ha.nG_,!0,!0,i,s);this.notify(p0.LYi_,this,{location:ha.nG_,histogram:this.qYi_[this.jYi_]?this.qYi_[this.jYi_]["shape"]:null,group:this.HU_[ha.nG_][this.jYi_]?this.jYi_:null})}));this.nTi_=new MF(this.VYi_[ha.sG_]).HC_("west-axis-selection").Kv_(!1)._Ot_((t=>{for(let i=t.length;i>=0;i--){if(t[i]===this.s3t_.LM_())break;if(t[i]instanceof nd)return t[i]}return[]})).on(wF.yOt_,((t,i,s)=>{this.ATi_(ha.sG_,!0,!0,i,s);this.notify(p0.LYi_,this,{location:ha.sG_,histogram:this.qYi_[this.jYi_]?this.qYi_[this.jYi_]["shape"]:null,group:this.HU_[ha.sG_][this.jYi_]?this.jYi_:null})}));this.JDt_._Ot_((t=>{const i=[];for(let s=0;s<t.length;s++)t[s]["histogram"]&&this.qYi_[t[s]["histogram"].XC_()]!=null&&i.push(t[s]);return i})).on(wF.yOt_,((t,i,s)=>{const e=s.getSelection();let A=!1,n,h;const r=[],o=[];for(h=0;h<e.length;h++)if(e[h]["hittest"]!=null&&e[h]["hittest"]["bins"].length!==0){n=e[h]["histogram"];const t=e[h]["hittest"]["bins"].map((t=>t["binnumber"]));r.push(n);if(this.hTi_(n,t)){A=!0;this.rTi_(n,!0);o.push(t)}}if(A)this.notify(p0.xYi_,this,{histograms:r,bins:o});else{this.oTi_(this.KYi_);if(n){this.lTi_(this.KYi_,!1);this.uTi_(n);this.rTi_(n,!0);this.aTi_();this.notify(p0.FYi_,this,n)}}}));this.h4t_([new lG(this.VYi_[ha.nG_],"southTools").add([this.eTi_]),new lG(this.VYi_[ha.sG_],"westTools").add([this.nTi_])]);const e=NG.D_();this.UYi_=LG.Ai_().hUt_(e,{name:"southverticalscrollbar",modellimits:t.rt_(),visiblelimits:t.ot_()});const A=(t,i,s)=>{const e=this.v4_(ha.nG_),A=s.ot_();this.UYi_.Lq_(e.rt_(),A)};this.UYi_.on(uG.qxt_,A).on(uG.Kxt_,A);this.UYi_.nf_(!0);this.s3t_.K4_(this.UYi_,ha.oG_);this.h4t_([this.UYi_.K3_()]);return this}aTi_(){const t=ur(this.IYi_).Gw_((function(t){return t instanceof oN&&t.getParent().$C_()===!0})).Fw_(),i=t.length>0?t[t.length-1]:null;if(i==null)return;this.lTi_(i,!0);const s=this.gTi_(i)[0];let e=i.XC_(),A=i.XC_(),n,h,r,o,l;(n=s["groupid"][ha.nG_])!=null&&this.JYi_[ha.nG_][n]!=null&&(A=n);(n=s["groupid"][ha.sG_])!=null&&this.JYi_[ha.sG_][n]!=null&&(e=n);(n=s["groupid"][ha.AG_])!=null&&this.JYi_[ha.AG_][n]!=null&&(e=n);if(this.JYi_[ha.sG_][e]!=null){h=this.JYi_[ha.sG_][e];r=h.ZZ_()}else if(this.JYi_[ha.AG_][e]!=null){h=this.JYi_[ha.AG_][e];r=h.ZZ_()}else{r=new JC;h=new nd(r).Lq_(new mA(0,0,1,1))}if(this.JYi_[ha.nG_][A]!=null){o=this.JYi_[ha.nG_][A];l=o.ZZ_()}else{l=new JC;o=new nd(l).Lq_(new mA(0,0,1,1))}const u=r.clone().Px_("major",y0).Px_("minor",D0).Hx_("minor",r.qx_("minor")).Hx_("edge",!1),a=l.clone().Px_("major",y0).Px_("minor",D0).Hx_("minor",l.qx_("minor")).Hx_("edge",!1);this.fNt_.jZ_(fg.ax_,a);this.fNt_.jZ_(fg.ux_,u);const g=h.rt_(),c=o.rt_(),I=new mA(c.we_(),g.pe_(),c.Qe_(),g.Ee_());this.fNt_.getParent().Lq_(I)}Pei_(){super.Pei_();this.aTi_();return this}rTi_(t,i,s){const e=this.gTi_(t);for(let t=0;t<e.length;t++){const A=e[t]["shape"].XC_();for(const t in this.JYi_)if(this.JYi_.hasOwnProperty(t)){const e=this.qYi_[A]["groupid"][t];if(e&&this.JYi_[t][e]){this.cTi_(this.JYi_[t][e],t);i&&t!==s&&this.ITi_(this.JYi_[t][e],t)}else if(this.JYi_[t][A]){this.cTi_(this.JYi_[t][A],t);i&&t!==s&&this.ITi_(this.JYi_[t][A],t)}else this.cTi_(null,t)}}return this}ITi_(t,i){let s,e,A,n;if(i===ha.nG_){s=this.v4_(i);e=t.getParent().getBounds();n=this.PYi_[i].getBounds().Ts_();A=new mA(e.we_(),e.Ee_()+s.getBounds().Ts_()-n,e.Qe_(),e.Ee_()-n);A.pe_()>s.rt_().pe_()&&A.setY(s.rt_().pe_()-s.getBounds().Ts_());this.UYi_.Lq_(s.rt_(),A)}}cTi_(t,i){for(const t in this.JYi_[i])this.JYi_[i].hasOwnProperty(t)&&this.JYi_[i][t]!=null&&this.JYi_[i][t].getParent().iQ_(new wr("white"));if(t!=null){t.getParent().iQ_(this.ZYi_);this.v4_(i).td_()}return this}hTi_(t,i){if(this.qYi_[t.XC_()]["highlightable"]===!0){t.Fvt_(i,!0);return!0}return!1}ATi_(t,i,s,e,A){i=i==null||i;const n=this.JYi_[t];let h;h=e instanceof nd?e:A.getSelection();if(h!=null)for(const e in n)if(n.hasOwnProperty(e)&&n[e]===h&&this.jYi_!==e){this.oTi_(this.KYi_);this.lTi_(this.KYi_,!1);this.qYi_[e]?this.uTi_(e):this.HU_[t][e]&&this.fTi_(e);this.aTi_();i&&this.rTi_(this.jYi_,s,t)}return this}oTi_(t){const i=this.gTi_(t);for(let t=0;t<i.length;t++)i[t]["shape"].Fvt_([],!0);return this}lYi_(t,i,s){t==null&&(t={});const e=new oN(t);let A,n,h;s=s!=null?s.toString():this.CTi_();e.JC_(s);e.on(rh.uC_,this.m4_);e.on($b.gMt_,this.m4_);e.on($b.cMt_,this.WYi_);this.qYi_[s]={shape:e,highlightable:!1,groupid:{}};this.qYi_[s]["groupid"][ha.sG_]=null;this.qYi_[s]["groupid"][ha.AG_]=null;this.qYi_[s]["groupid"][ha.nG_]=null;const r=new sI;r.ht_(new mA(0,0,1,1));r.GY_(e);const o=e.ct_().getColor();this.IYi_.GY_(r);this.iTi_&&this.Us_&&this.iTi_.bind(e,this.Us_);this.lTi_(null,!1).lTi_(e,!0);if(i&&i["xaxis"]===null)A=null;else{h=new rD(e.cvt_());h.Hx_("minor",!1);h.Hx_("edge",!0);h.Vx_("major").setColor(o);h.Vx_("minor").setColor(o);h.Vx_("edge").setColor(o);let t=e.Bvt_();t=t!=null?" ( "+t.fn_()+" )":"";const s=e.dn_()+t;A=rQ.X4_(this.s3t_,{location:ha.nG_,connect:!1,title:{text:s,visible:!0,textstyle:new qa({color:"#757575"}),alignment:dA.re_},annotationitemswrap:!1})["axis"];A.jZ_(h);A.VZ_().setColor(o);i&&i["xaxis"]!=null&&A.dt_(i["xaxis"])}if(i&&i["yaxis"]===null)n=null;else{n=rQ.X4_(this.s3t_,{location:ha.sG_,connect:!1,title:{text:"Frequency",visible:!0,textstyle:new qa({color:"#757575"}),alignment:dA.he_},annotationitemswrap:!1})["axis"];h=new JC;h.Vx_("major").setColor(o);n.jZ_(h);n.VZ_().setColor(o);i&&i["yaxis"]!=null&&n.dt_(i["yaxis"])}if(A){let t=i?i["xaxis"]:{};t=qi({axis:A},t);this.dTi_(ha.nG_,t,e);this.JYi_[ha.nG_][s]=A}if(n){let t=i?i["yaxis"]:{};t=qi({axis:n},t);this.dTi_(ha.sG_,t,e);this.JYi_[ha.sG_][s]=n}this.BTi_=e;this.aTi_();this.wq_();return e}wTi_(t){const i=this.gTi_(t);for(let t=0;t<i.length;t++){const s=i[t]["shape"];this.QTi_(s);this.ETi_(s.XC_());const e=this.KYi_.indexOf(s);e!==-1&&this.KYi_.splice(e,1);this.qYi_[s.XC_()]=null;this.IYi_.removeChild(s.getParent());this.iTi_&&this.Us_&&this.iTi_.unbind(s,this.Us_);s.off($b.gMt_,this.m4_);s.off(rh.uC_,this.m4_)}this.pTi_(ha.sG_);this.pTi_(ha.AG_);this.pTi_(ha.nG_);this.aTi_();return this}gTi_(t){let i,s=null;const e=[];if(t===void 0)return e;t===null&&(t=Object.keys(this.qYi_));i=Array.isArray(t)?t:[t];for(let t=0;t<i.length;t++){typeof i[t]=="string"?s=this.qYi_[i[t]]:i[t]instanceof oN&&(s=this.qYi_[i[t].XC_()]);s&&e.push(s);s=null}return e}lTi_(t,i){const s=this.gTi_(t);for(let t=0;t<s.length;t++){s[t]["highlightable"]=i;const e=this.KYi_.indexOf(s[t]["shape"]);i===!0&&e===-1?this.KYi_.push(s[t]["shape"]):i===!1&&e!==-1&&this.KYi_.splice(e,1)}return this}mTi_(){return this.KYi_}xvt_(t){const i=this.gTi_(t),s=[];for(let t=0;t<i.length;t++){const e=i[t]["shape"];s.push(e.xvt_())}return s}vYi_(t){const i=[];for(const s in this.qYi_)this.qYi_.hasOwnProperty(s)&&this.qYi_[s]!=null&&(t?i.push(this.qYi_[s]["shape"].XC_()):i.push(this.qYi_[s]["shape"]));return i}bYi_(){const t=[];for(const i in this.HU_)if(this.HU_.hasOwnProperty(i))for(const s in this.HU_[i])this.HU_[i].hasOwnProperty(s)&&this.HU_[i][s]!=null&&t.push(s);return t}dTi_(t,i,s){const e=(i=Pi(i,{title:{visible:!0,textstyle:new qa({color:"#757575"}),alignment:dA.ne_}}))["axis"]!=null?i["axis"]:i,A=super.CAi_(e,t,null),n=A["axis"],h=A["group"];!i["tickgenerator"]||i["tickgenerator"]instanceof Qg||n.ZZ_().dt_(i["tickgenerator"]);i["flip"]!=null&&(t===ha.nG_||t===ha.eG_?h.pq_(i["flip"]):h.Eq_(i["flip"]));const r=typeof i["length"]!="number"?t===ha.nG_?this.$Yi_:this._Yi_:i["length"];t===ha.nG_?h.dq_(r):h.Cq_(r);if(t===ha.sG_){this.s3t_.removeItem(h,t);this.s3t_.H4_(0,h,t)}this.s3t_.vn_();if(i["accumulative"]){n.Lq_(new mA(0,0,100,100));const i=new sI;i.ht_(new mA(0,0,1,1));i.Lq_(n.rt_());this.IYi_.GY_(i);this.s3t_.connect(n,i);for(const i in this.qYi_)this.qYi_.hasOwnProperty(i)&&this.qYi_[i]!=null&&this.qYi_[i]["shape"]._vt_()===sN.Rv_&&(this.JYi_[t][i]=n)}else s&&this.yTi_(t,n,s);this.pTi_(t);this.aTi_();return n}kYi_(t,i,s){i instanceof nd==!1&&typeof i=="object"&&this.dTi_(t,i,s)}yTi_(t,i,s){if(s){if(this.gTi_(s).length!==0){this.s3t_.connect(i,s.getParent());this.JYi_[t][s.XC_()]=i}else if(typeof s=="string"){this.s3t_.connect(i,this.HU_[t][s]["sharedmodel"]);this.JYi_[t][s]=i;this.HU_[t][s]["axis"]=i}else if(s["groupid"]!==void 0){const e=s["groupid"];this.s3t_.connect(i,this.HU_[t][e]["sharedmodel"]);this.JYi_[t][e]=i;this.HU_[t][e]["axis"]=i}else if(s instanceof ch){this.s3t_.connect(i,s);this.JYi_[t][s.XC_()]=i}this.aTi_()}}DTi_(t){let i;const s=[];let e;if(typeof t=="string"){for(e in this.JYi_)if(this.JYi_.hasOwnProperty(e)&&this.JYi_[e].hasOwnProperty(t)){i={};i["axis"]=this.JYi_[e][t];i["id"]=t;i["location"]=e;s.push(i)}return s}if(t instanceof nd){for(e in this.JYi_)if(this.JYi_.hasOwnProperty(e))for(const A in this.JYi_[e])if(this.JYi_[e].hasOwnProperty(A)&&this.JYi_[e][A]===t){i={};i["axis"]=t;i["id"]=A;i["location"]=e;s.push(i)}return s}return null}ETi_(t){const i=this.DTi_(t);if(i)for(let t=0;t<i.length;t++){const s=i[t];this.JYi_[s["location"]][s["id"]]=null;const e=s["axis"];if(e){this.s3t_.removeItem(e.getParent(),s["location"]);this.s3t_.disconnect(e);this.pTi_(s["location"])}}return this}MTi_(t,i){let s;if(t!=null){const e=this.gTi_(t);if(this.JYi_.hasOwnProperty(i)&&this.JYi_[i])if(e.length!==0){const t=e[0]["shape"].XC_();s=this.JYi_[i][t]}else if(this.HU_[i][t]!=null)s=this.JYi_[i][t];else{if(this.HU_[i][t["groupid"]]==null)return null;s=this.JYi_[i][t["groupid"]]}this.ETi_(s);return this}return null}dispose(){if(!this.Df_()){this.wTi_(this.vYi_());super.dispose()}}pTi_(t,i){const s=this.s3t_.v4_(t),e=s.bG_().IN_(),A=s.getBounds().clone();let n=s.getBounds().clone(),h=1;const r={};while(e.Hs_()){const i=e.next();i.$C_()&&i instanceof sI&&(t===ha.nG_?h+=i.cG_():h+=i.gG_())}if(isNaN(h))return this;if(t===ha.nG_){if(h>this.HYi_[t]&&!this.TYi_){r[t]=this.HYi_[t];this.vei_(r);n=s.getBounds().clone();this.YYi_?s.Lq_(A.Be_(h)):s.Lq_(n);if(this.YYi_){this.UYi_.nf_(!0);this.UYi_.Lq_(s.rt_(),n)}}else if(this.TYi_){r[t]=h;this.vei_(r);n=s.getBounds().clone();s.Lq_(n);this.UYi_.nf_(!1)}else{r[t]=this.HYi_[t];this.vei_(r);n.Be_(this.HYi_[t]);s.Lq_(n);this.UYi_.Lq_(n,n)}if(!i){this.pTi_(ha.sG_,!0);this.pTi_(ha.AG_,!0)}}else{t===ha.AG_&&this.UYi_.N_()["size"]>h?r[t]=this.UYi_.N_()["size"]:r[t]=h;this.vei_(r);n=s.getBounds().clone();s.Lq_(n);i||this.pTi_(ha.nG_,!0)}return this}CTi_(){return nh.u_()}OYi_(t,i){const s=this.qYi_[i.XC_()]["groupid"][ha.nG_],e=this.qYi_[i.XC_()]["groupid"][ha.sG_],A=this.qYi_[i.XC_()]["groupid"][ha.AG_];if(this.JYi_[ha.nG_][i.XC_()]!=null){let t=i.Bvt_();t=t!=null?" ( "+t.fn_()+" ) ":"";const s=i.dn_()+t;this.JYi_[ha.nG_][i.XC_()].E__(s)}this.uvt_(i);s&&this.vTi_(this.HU_[ha.nG_][s],ha.nG_);e&&this.vTi_(this.HU_[ha.sG_][e],ha.sG_);A&&this.vTi_(this.HU_[ha.AG_][A],ha.AG_);this.notify(p0.aMt_,this,{event:t,src:i});this.s3t_.y4_();this.aTi_();this.wq_()}zYi_(t,i,s){const e=this.JYi_[ha.nG_][i.XC_()];if(e){e.ZZ_().Wut_(s);this.aTi_();this.wq_()}}uvt_(t,i){const s=t.getParent().rt_().clone(),e=t.rt_().clone();i!==ha.nG_&&i!=null||t.getParent().Lq_(new mA(e.we_(),s.pe_(),e.Qe_(),s.Ee_()));if(i!==ha.nG_||i==null)if(t.jvt_()===iN.IMt_&&t._vt_()===sN.kv_){const i=NA.iA_(e.Ee_(),e.pe_());e.setY(i.Xs_()).Be_(i.zs_()-i.Xs_());t.getParent().Lq_(e)}else t.getParent().Lq_(new mA(s.we_(),e.pe_(),s.Qe_(),e.Ee_()))}vTi_(t,i){const s=t["models"];let e=!1,A,n=null,h,r;for(A=0;A<s.length;A++){r=s[A]["shape"];r instanceof oN&&r.jvt_()===iN.IMt_&&r._vt_()===sN.kv_&&(e=!0);n==null?n=new mA(r.rt_()):n.union(r.rt_())}if(e){const t=NA.iA_(n.Ee_(),n.pe_());n.setY(t.Xs_()).Be_(t.zs_()-t.Xs_())}t["sharedmodel"].rt_().Ce_(n)||t["sharedmodel"].Lq_(n);for(A=0;A<s.length;A++){r=s[A]["shape"];h=r.getParent().rt_();i===ha.nG_?r.getParent().Lq_(new mA(n.we_(),h.pe_(),n.Qe_(),h.Ee_())):r.getParent().Lq_(new mA(h.we_(),n.pe_(),h.Qe_(),n.Ee_()));r.getParent().td_()}}bTi_(t,i){const s=this.gTi_(t);let e;if(typeof i=="string")e=i;else{if(i["groupid"]===void 0)return null;e=i["groupid"]}for(const t in this.HU_)if(this.HU_.hasOwnProperty(t)&&this.HU_[t][e]){const i=this.HU_[t][e];for(let A=0;A<s.length;A++){const n=s[A]["shape"],h=undefined;if(i["models"].indexOf(this.qYi_[n.XC_()])===-1){i["models"].push(this.qYi_[n.XC_()]);s[A]["groupid"][t]=e;const h=this.JYi_[t][n.XC_()];h&&this.s3t_.removeItem(h.getParent(),t)}}this.vTi_(i,t);this.pTi_(t);this.aTi_()}return this}QTi_(t){const i=this.gTi_(t);for(let t=0;t<i.length;t++){const s=i[t]["groupid"],e=i[t]["shape"];let A;for(A in s)s.hasOwnProperty(A)&&s[A]!=null&&this.NTi_(e,s[A])}return this}NTi_(t,i){const s=this.gTi_(t);let e;if(typeof i=="string")e=i;else{if(i["groupid"]===void 0)return null;e=i["groupid"]}for(const t in this.HU_)if(this.HU_.hasOwnProperty(t)&&this.HU_[t][e]){const i=this.HU_[t][e];for(let A=0;A<s.length;A++){const n=s[A]["shape"],h=i["models"].indexOf(this.qYi_[n.XC_()]);if(h!==-1){i["models"].splice(h,1);s[A]["groupid"][t]=null;this.uvt_(n);const r=this.JYi_[t][n.XC_()];r&&this.s3t_.K4_(r.getParent(),t);this.NYi_(e).length===0&&this.STi_(e)}}this.vTi_(i,t);this.pTi_(t);this.aTi_()}return this}RYi_(t,i,s,e){const A=this.gTi_(t);i=i||ha.sG_;let n,h,r,o,l;e=e!=null?e:this.CTi_();for(o=0;o<A.length;o++){r=A[o];if(r["groupid"][i]!=null)return null;n=r["shape"];h==null?h=new mA(n.rt_()):h.union(n.rt_())}let u="",a,g;this.Uq_();for(o=0;o<A.length;o++){r=A[o];n=r["shape"];l=this.JYi_[i][n.XC_()];if(l){u=u+" "+l.mV_();this.s3t_.removeItem(l.getParent(),i)}r["groupid"][i]=e}const c=new sI;c.Lq_(h);c.ht_(new mA(0,0,1,1));this.IYi_.GY_(c);this.HU_[i][e]={models:A,sharedmodel:c};s==null&&(s={});if(!s.hasOwnProperty("axis")){s["linestyle"]==null&&(s["linestyle"]=new hl);s["textstyle"]==null&&(s["textstyle"]=new qa);s["baselinestyle"]==null&&(s["baselinestyle"]=new hl);if(!(s["tickgenerator"]instanceof Qg)&&l){a=l.ZZ_().clone();s["tickgenerator"]=a.Jx_("major",!0).dt_(s["tickgenerator"])}if(i===ha.nG_&&(s["title"]==null||s["title"]["text"]==null)){s["title"]=s["title"]==null?{}:s;s["title"]["text"]=u}l&&(s=Pi(s,l.N_(),!0));g=this.dTi_(i,s,e)}this.Yq_();this.HU_[i][e]["axis"]=g;this.JYi_[i][e]=g;this.vTi_(this.HU_[i][e],i);this.pTi_(i);return{groupid:e}}dt_(t){this.setOptions(t);this.PRi_={};t["viewcache"]!==void 0&&(this.qRi_=t["viewcache"]);if(t["viewcachesize"]!==void 0){this.qRi_=!0;this.PRi_=t["viewcachesize"];this.lki_.gk_(this.qRi_?new tI(this.PRi_["width"],this.PRi_["height"]):null)}return this}setOptions(t){if(t==null)return this;super.dt_(t);t["header"]!=null&&this.Cki_(t["header"]);t["axiswidth"]==null||isNaN(t["axiswidth"])||(this._Yi_=t["axiswidth"]);t["axisheight"]==null||isNaN(t["axisheight"])||(this.$Yi_=t["axisheight"]);t["tools"]!=null&&this.Jei_(t["tools"]);t["annotationsgaps"]!=null&&this.GTi_(t["annotationsgaps"]);t["autoannotationsize"]!=null&&(this.TYi_=t["autoannotationsize"]);t["annotationssizes"]!=null&&t["annotationssizes"]["south"]!=null&&(this.HYi_[ha.nG_]=t["annotationssizes"]["south"]);this.s3t_.vn_();this.pTi_(ha.sG_);this.pTi_(ha.AG_);this.pTi_(ha.nG_);return this}GYi_(t,i){let s=null,e,A;if(t!=null){const s=this.gTi_(t);if(s.length!==0){A=s[0]["shape"].XC_();e=this.JYi_[i][A]}else if(this.HU_[i][t]!=null){A=t;e=this.JYi_[i][t]}else{if(this.HU_[i][t["groupid"]]==null)return null;A=t["groupid"];e=this.JYi_[i][t["groupid"]]}}if(e){const t=e.getParent();s=e.N_();if(i===ha.nG_){s["length"]=t.cG_();s["flip"]=t.ZY_()}else{s["length"]=t.gG_();s["flip"]=t.jY_()}this.qYi_[A]&&this.qYi_[A]["shape"]._vt_()===sN.Rv_?s["accumulative"]=!0:s["accumulative"]=!1}return s}RTi_(t,i,s){let e,A;if(t!=null){i=i||ha.nG_;const n=this.gTi_(t);if(n.length!==0){A=n[0]["shape"].XC_();e=this.JYi_[i][A]}else if(this.HU_[i][t]!=null)e=this.JYi_[i][t];else{if(this.HU_[i][t["groupid"]]==null)return this;e=this.JYi_[i][t["groupid"]]}if(e!=null){e.dt_(s);const t=e.getParent();!s["tickgenerator"]||s["tickgenerator"]instanceof Qg||e.ZZ_().dt_(s["tickgenerator"]);typeof s["length"]=="number"&&(i===ha.nG_?t.dq_(s["length"]):t.Cq_(s["length"]));typeof s["flip"]=="boolean"&&(i===ha.nG_?t.pq_(s["flip"]):t.Eq_(s["flip"]))}}return this}N_(){let t=super.N_();t=qi(t,this.getData());t["header"]=this.Eki_();t["axiswidth"]=this._Yi_;t["axisheight"]=this.$Yi_;t["autoannotationsize"]=this.TYi_;t["tools"]=t["tools"]!=null?t["tools"]:{};t["tools"]["axisselection"]=this.kTi_();t["tools"]["southscroll"]=this.FTi_();return t}Cki_(t){if(t==null)return this;if(t["title"]!==void 0){this.pZ_["text"].dt_(t["title"]);ua.NG_(this.pZ_["text"],this.pZ_["group"],ha.eG_);this.Xei_()}return this}Eki_(){return{title:this.pZ_["text"].N_()}}xTi_(t,i){const s=this.DTi_(t);if(i==null||isNaN(i)||!s||s.length===0)return this;const e=s[0];e["location"]===ha.nG_?e["axis"].getParent().dq_(i):e["axis"].getParent().Cq_(i);return this}Jei_(t){if(!t)return this;super.Jei_(t);t["axisselection"]!=null&&this.LTi_(t["axisselection"]);t["southscroll"]!=null&&this.UTi_(t["southscroll"],ha.nG_);return this}SAi_(){let t=super.SAi_();t=qi(t,{axisselection:this.kTi_(),southscroll:this.FTi_()});return t}LTi_(t){if(t["enabled"]!==null){this.XYi_=t["enabled"];this.eTi_.Kv_(this.XYi_);this.nTi_.Kv_(this.XYi_)}t["highlightstyle"]!==null&&(t["highlightstyle"]instanceof wr?this.ZYi_=t["highlightstyle"]:this.ZYi_=new wr(t["highlightstyle"]));return this}kTi_(){const t={};t["enabled"]=this.XYi_;t["highlightstyle"]=this.ZYi_.N_();return t}UTi_(t,i){const s=this.UYi_;t["size"]!=null&&typeof t["size"]=="number"&&s.ft_({width:t["size"]});if(t["visible"]!=null){s.nf_(t["visible"]);this.YYi_=t["visible"];this.pTi_(ha.nG_);this.pTi_(ha.sG_);this.pTi_(ha.AG_)}t["options"]!=null&&s.dt_(t["options"]);this.v4_(i).wq_();return this}FTi_(){return this.UYi_.N_()}GTi_(t){if(t[ha.nG_]!=null){this.PYi_[ha.nG_]=t[ha.nG_];this.v4_(ha.nG_).wq_()}if(t[ha.sG_]!=null){this.PYi_[ha.sG_]=t[ha.sG_];this.v4_(ha.sG_).wq_()}if(t[ha.AG_]!=null){this.PYi_[ha.AG_]=t[ha.AG_];this.v4_(ha.AG_).wq_()}return this}YTi_(t){let i,s,e,A;if(typeof t=="string")i=t;else{if(!t||!t.hasOwnProperty("groupid"))return null;i=t["groupid"]}for(const t in this.HU_)if(this.HU_.hasOwnProperty(t)&&this.HU_[t][i]!=null){s=this.HU_[t][i]["models"];e=this.JYi_[t][i];A=t}return{models:s,axis:e,id:i,location:A}}STi_(t){const i=this.YTi_(t),s=i["models"],e=i["axis"],A=i["id"],n=i["location"];this.Uq_();if(s){this.ETi_(e);for(let t=0;t<s.length;t++){s[t]["groupid"][n]=null;const i=s[t]["shape"];this.uvt_(i,n);i.getParent().td_();this.JYi_[n][i.XC_()]&&this.s3t_.K4_(this.JYi_[n][i.XC_()].getParent(),n)}this.Yq_();this.pTi_(n)}this.HU_[n][A]=null;return this}TTi_(t,i){const s=this.DTi_(t)[0],e=s["id"],A=s["location"],n=[];if(this.JYi_[A][e])for(const t in this.JYi_)if(this.JYi_.hasOwnProperty(t)&&this.JYi_[A][t]===this.JYi_[A][e]){const s=this.qYi_[t]["shape"].getParent().$C_();i&&!s||n.push(this.qYi_[t]["shape"])}return n}KTi_(t,i){const s=this.gTi_(t);let e,A;for(let t=0;t<s.length;t++){const n=s[t];if(n){const t=n["shape"].XC_();if(i||n["shape"].getParent().$C_()!==!0){if(i===!0&&n["shape"].getParent().$C_()===!1){for(A in this.JYi_)if(this.JYi_.hasOwnProperty(A)){e=n["groupid"][A];this.JYi_[A][e]?this.NYi_(e,!0).length===0&&this.s3t_.K4_(this.JYi_[A][e].getParent(),A):this.JYi_[A][t]&&this.TTi_(t,!0).length===0&&this.s3t_.K4_(this.JYi_[A][t].getParent(),A)}n["shape"].getParent().nf_(i);n["shape"].KC_(i)}}else{n["shape"].getParent().nf_(i);n["shape"].KC_(i);for(A in this.JYi_)if(this.JYi_.hasOwnProperty(A)){e=n["groupid"][A];this.JYi_[A][e]?this.NYi_(e,!0).length===0&&this.s3t_.removeItem(this.JYi_[A][e].getParent(),A):this.JYi_[A][t]&&this.TTi_(t,!0).length===0&&this.s3t_.removeItem(this.JYi_[A][t].getParent(),A)}}}}this.pTi_(ha.sG_);this.pTi_(ha.AG_);this.pTi_(ha.nG_);this.aTi_();return this}HTi_(t){if(t==null){this.HTi_(ha.sG_);this.HTi_(ha.AG_);this.HTi_(ha.nG_);return this}for(const i in this.HU_[t])this.HU_[t].hasOwnProperty(i)&&this.STi_(i);return this}uTi_(t){const i=this.gTi_(t)[0]["shape"];this.IYi_.removeChild(i.getParent());this.IYi_.GY_(i.getParent());this.lTi_(i,!0);this.jYi_=i.XC_();return this}fTi_(t){const i=this.YTi_(t)["models"];let s;const e=[];for(s=0;s<i.length;s++){this.IYi_.removeChild(i[s]["shape"].getParent());e.push(i[s]["shape"])}for(s=0;s<i.length;s++)this.IYi_.GY_(e.pop().getParent());const A=i[0]["shape"].XC_();this.lTi_(A,!0);this.jYi_=A;return this}bind(t){if(this.iTi_!=null)for(const i in this.qYi_)this.qYi_.hasOwnProperty(i)&&this.iTi_.bind(this.qYi_[i],t)}unbind(t){if(this.iTi_!=null)for(const i in this.qYi_)this.qYi_.hasOwnProperty(i)&&this.iTi_.unbind(this.qYi_[i],t)}setData(t){this.unbind(this.Us_);this.Us_=t;this.bind(this.Us_);return this}getData(){return this.Us_}qTi_(t,i){if(this.iTi_!==t){this.unbind(this.getData());this.iTi_=t;i!==!0&&this.bind(this.getData())}return this}JTi_(){return this.iTi_}PTi_(t,i){const s=this.gTi_(t),e=[];let A;for(let t=0;t<s.length;t++){const n=s[t];A={};for(const t in this.JYi_)if(this.JYi_.hasOwnProperty(t)){A[t]=this.JYi_[t][n["shape"].XC_()];if(i){const i=n["groupid"][t];i!=null&&this.JYi_[t][i]!=null&&(A[t]=this.JYi_[t][i])}}e.push(A)}return e}NYi_(t,i,s){let e;if(typeof t=="string")e=t;else{if(t["groupid"]===void 0)return null;e=t["groupid"]}let A=[];const n=[];for(const t in this.HU_)this.HU_.hasOwnProperty(t)&&this.HU_[t][e]!=null&&(A=this.HU_[t][e]["models"]);for(let t=0;t<A.length;t++)i&&!A[t]["shape"].getParent().$C_()||(s?n.push(A[t]["shape"].XC_()):n.push(A[t]["shape"]));return n}SYi_(t){return this.YTi_(t)["location"]}VTi_(t){const i={},s=this.qYi_[t.XC_()];for(const t in s["groupid"])s["groupid"].hasOwnProperty(t)&&s["groupid"][t]!=null&&(i[t]=s["groupid"][t]);return i}OTi_(t){const i=this.gTi_(t)[0];let s;i!=null&&(s=i["shape"].getParent().rt_().clone());return s}WTi_(t){let i,s;if(typeof t=="string")i=t;else{if(t["groupid"]===void 0)return null;i=t["groupid"]}for(const t in this.HU_)if(this.HU_.hasOwnProperty(t)&&this.HU_[t][i]!=null){const e=undefined;s=this.HU_[t][i]["sharedmodel"].rt_().clone()}return s}l4t_(t,i){super.l4t_(t,i||E0.Ai_())}u4t_(t){return super.u4t_(t||E0.Ai_())}};i=t([_s("geotoolkit.widgets.MultiHistograms")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRVbmRlcmxheUxheWVyIjoic1RpXyIsImluaXRpYWxpemVUb29scyI6IkE0dF8iLCJzeW5jaHJvbml6ZVZpZXdMaW1pdHMiOiJQZWlfIiwiYWRkSGlzdG9ncmFtIjoibFlpXyIsInJlbW92ZUhpc3RvZ3JhbXMiOiJ3VGlfIiwic2V0SGlnaGxpZ2h0YWJsZUhpc3RvZ3JhbXMiOiJsVGlfIiwiZ2V0SGlnaGxpZ2h0YWJsZUhpc3RvZ3JhbXMiOiJtVGlfIiwiZ2V0SGlnaGxpZ2h0ZWRCaW5zIjoieHZ0XyIsImdldEhpc3RvZ3JhbXMiOiJ2WWlfIiwiZ2V0R3JvdXBzSWQiOiJiWWlfIiwiYWRkQXhpc1RvIjoia1lpXyIsInJlbW92ZUF4aXNGcm9tIjoiTVRpXyIsImFkZEhpc3RvZ3JhbXNUb0dyb3VwIjoiYlRpXyIsInJlbW92ZUhpc3RvZ3JhbXNGcm9tQWxsR3JvdXAiOiJRVGlfIiwicmVtb3ZlSGlzdG9ncmFtc0Zyb21Hcm91cCI6Ik5UaV8iLCJjcmVhdGVHcm91cCI6IlJZaV8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0QXhpc09wdGlvbnMiOiJHWWlfIiwic2V0QXhpc09wdGlvbnMiOiJSVGlfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0SGVhZGVyT3B0aW9ucyI6IkNraV8iLCJnZXRIZWFkZXJPcHRpb25zIjoiRWtpXyIsInNldEF4aXNXaWR0aE9ySGVpZ2h0IjoieFRpXyIsInNldFRvb2xzT3B0aW9ucyI6IkplaV8iLCJnZXRUb29sc09wdGlvbnMiOiJTQWlfIiwic2V0QXhpc1NlbGVjdGlvbiI6IkxUaV8iLCJnZXRBeGlzU2VsZWN0aW9uT3B0aW9ucyI6ImtUaV8iLCJzZXRBbm5vdGF0aW9uc1Njcm9sbEJhciI6IlVUaV8iLCJnZXRBbm5vdGF0aW9uU2Nyb2xsQmFyT3B0aW9ucyI6IkZUaV8iLCJzZXRHYXBzIjoiR1RpXyIsInJlbW92ZUdyb3VwIjoiU1RpXyIsInNldEhpc3RvZ3JhbXNWaXNpYmxlIjoiS1RpXyIsInJlbW92ZUFsbEdyb3VwIjoiSFRpXyIsInNldEluRnJvbnRIaXN0b2dyYW0iOiJ1VGlfIiwic2V0SW5Gcm9udEdyb3VwIjoiZlRpXyIsInNldERhdGFCaW5kaW5nIjoicVRpXyIsImdldERhdGFCaW5kaW5nIjoiSlRpXyIsImdldFJlbGF0ZWRIaXN0b2dyYW1zQnlHcm91cCI6Ik5ZaV8iLCJnZXRMb2NhdGlvbk9mR3JvdXAiOiJTWWlfIiwiZ2V0R3JvdXBJZEJ5SGlzdG9ncmFtIjoiVlRpXyIsImdldEhpc3RvZ3JhbU1vZGVsTGltaXRzIjoiT1RpXyIsImdldEdyb3VwTW9kZWxMaW1pdHMiOiJXVGlfIiwibG9hZFRlbXBsYXRlIjoibDR0XyIsInNhdmVUZW1wbGF0ZSI6InU0dF8ifX19");var v0=Ci({TCt_:"StateChanged"},2,"eyJTdGF0ZUNoYW5nZWQiOiJUQ3RfIn0g"),b0=Ci(function(){let i=class t extends $n{constructor(t){super();this.I4t_=t;this.$Vt_=!0;this.xv_=!1}dispose(){const t=this;super.dispose();for(const i in t)t.hasOwnProperty(i)&&typeof t[i]=="object"&&(t[i]=null)}yei_(){return this.I4t_}Jkt_(t){this.notify(v0.TCt_,this,t);return this}$C_(){return this.$Vt_}nf_(t){if(this.$Vt_===t)return this;this.$Vt_=t;this.Jkt_("Visible");return this}kyi_(){return this.xv_}Kv_(t){if(this.xv_===t)return this;this.xv_=t;this.Jkt_("Enabled");return this}};i=t([_s(null)],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXaWRnZXQiOiJ5ZWlfIiwib25TdGF0ZUNoYW5nZWQiOiJKa3RfIiwiZ2V0VmlzaWJsZSI6IiRDXyIsInNldFZpc2libGUiOiJuZl8iLCJnZXRFbmFibGVkIjoia3lpXyIsInNldEVuYWJsZWQiOiJLdl8ifX19");var N0=Ci(function(){let i=class t{};i.prototype.dn_=Zi;i.prototype.HC_=Zi;i.prototype.SG_=Zi;i.prototype.a_=Zi;i.prototype.fn_=Zi;i.prototype.k6_=Zi;i.prototype.gt_=Zi;i.prototype.rB_=Zi;i.prototype.ct_=Zi;i.prototype.iQ_=Zi;i.prototype.FE_=Zi;i.prototype.g_=Zi;i.prototype.lR_=Zi;i.prototype.gR_=Zi;i.prototype.akt_=Zi;i.prototype.ukt_=Zi;i.prototype.JV_=Zi;i.prototype.setOptions=Zi;i=t([_s("geotoolkit.widgets.overlays.IAnnotation")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROYW1lIjoiZG5fIiwic2V0TmFtZSI6IkhDXyIsImdldFRleHQiOiJTR18iLCJzZXRUZXh0IjoiYV8iLCJnZXRTeW1ib2wiOiJmbl8iLCJzZXRTeW1ib2wiOiJrNl8iLCJnZXRMaW5lU3R5bGUiOiJndF8iLCJzZXRMaW5lU3R5bGUiOiJyQl8iLCJnZXRGaWxsU3R5bGUiOiJjdF8iLCJzZXRGaWxsU3R5bGUiOiJpUV8iLCJnZXRUZXh0U3R5bGUiOiJGRV8iLCJzZXRUZXh0U3R5bGUiOiJnXyIsImdldEFuY2hvciI6ImxSXyIsInNldEFuY2hvciI6ImdSXyIsImdldFRhcmdldCI6ImFrdF8iLCJzZXRUYXJnZXQiOiJ1a3RfIiwiZ2V0T3B0aW9ucyI6IkpWXyJ9fSwiZ2V0Q2xhc3NOYW1lIjoiRF8ifSAg");const S0="#1565c0",G0="#fdd835";var R0=Ci(function(){var i;let s=i=class t extends $n{constructor(t){super();this.Rf_=null;this.rQ_=null;this.fX_=void 0;this.hq_=void 0;this.CS_=void 0;this.UU_=Pi(t?t["options"]:null,{textstyle:new qa,linestyle:{color:S0,width:1,pixelsnapmode:{x:!0,y:!0}},fillstyle:G0},!0);t=qi(t,{name:"",text:"",target:null,anchor:null},!0);this.ov_=t["name"];this._q_=t["text"];this.eb_=null;this._at_=t["anchor"];this.DIt_=t["symbol"];this.zTi_=()=>{this.dispose()};this.XTi_=()=>{this.notify(Zn.gf_,this,"Target")};this.ukt_(t["target"]);this.hUi_(this.UU_)}dispose(){if(this.Df_()!==!0){this.Rf_!=null&&this.Rf_.clear();this.ukt_(null);super.dispose()}}hUi_(t){if(t["textstyle"]!==void 0){this.g_(t["textstyle"],t["textstyle"]instanceof qa==!1);t["textstyle"]=this.FE_()}if(t["fillstyle"]!==void 0){this.iQ_(t["fillstyle"],t["fillstyle"]instanceof wr==!1);t["fillstyle"]=this.ct_()}if(t["linestyle"]!==void 0){this.rB_(t["linestyle"],t["linestyle"]instanceof hl==!1);t["linestyle"]=this.gt_()}this.UU_=qi(t,this.UU_||{});return this}gt_(){return this.CS_}rB_(t,i){if(this.CS_===t)return this;this.CS_=hl.jD_(this,this.CS_,t,i,this.oQ_());this.notify(Zn.gf_,this,"LineStyle");return this}ct_(){return this.hq_}iQ_(t,i){if(this.hq_===t)return this;this.hq_=il.wD_(this,this.hq_,t,i,this.oQ_());this.notify(Zn.gf_,this,"FillStyle");return this}FE_(){return this.fX_}g_(t,i){if(this.fX_===t)return this;this.fX_=qa.jD_(this,this.fX_,t,i,this.oQ_());this.notify(Zn.gf_,this,"TextStyle");return this}dn_(){return this.ov_}HC_(t){if(this.ov_===t)return this;this.ov_=t;this.notify(Zn.gf_,this);return this}SG_(){return this._q_}a_(t){if(this._q_===t)return this;this._q_=t;this.notify(Zn.gf_,this);return this}fn_(){return this.DIt_}k6_(t){if(this.DIt_===t)return this;this.DIt_=t;this.notify(Zn.gf_,this,"Symbol");return this}lR_(){return this._at_}gR_(t){if(this._at_.bs_(t))return this;this._at_=t;this.notify(Zn.gf_,this);return this}akt_(){return this.eb_}ukt_(t){if(this.eb_===t)return this;if(this.eb_!=null){this.eb_.off(Zn.cf_,this.zTi_);this.eb_.off(rh.CC_,this.XTi_)}this.eb_=t;if(this.eb_!=null){this.eb_.on(Zn.cf_,this.zTi_);this.eb_.on(rh.CC_,this.XTi_)}this.notify(Zn.gf_,this);return this}JV_(){return this.UU_}setOptions(t){this.hUi_(t);this.notify(Zn.gf_,this,"Options");return this}static Wi_(t){return ys(t,N0)?t:new i(t)}Bd_(t){return this}Qd_(t){return this}tC_(t,i,s){if(t==null)return this;this.Rf_==null&&(this.Rf_=new Ah);this.Rf_.on(t,i,s);return this}iC_(t,i,s){if(t==null||s==null||this.Rf_==null)return this;this.Rf_.off(t,i,s);return this}oQ_(){this.rQ_===null&&(this.rQ_=(t,i,s)=>{let e="Options";i instanceof qa?e="TextStyle":i instanceof hl?e="LineStyle":i instanceof wr&&(e="FillStyle");this.notify(Zn.gf_,this,e)});return this.rQ_}dt_(t){if(t==null)return this;t["text"]!==void 0&&this.a_(t["text"]);this.setOptions(t);return this}N_(){return qi(this.JV_(),{text:this.SG_()})}};s=i=t([Zs(N0),Zs(hh),_s("geotoolkit.widgets.overlays.Annotation")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRMaW5lU3R5bGUiOiJndF8iLCJzZXRMaW5lU3R5bGUiOiJyQl8iLCJnZXRGaWxsU3R5bGUiOiJjdF8iLCJzZXRGaWxsU3R5bGUiOiJpUV8iLCJnZXRUZXh0U3R5bGUiOiJGRV8iLCJzZXRUZXh0U3R5bGUiOiJnXyIsImdldE5hbWUiOiJkbl8iLCJzZXROYW1lIjoiSENfIiwiZ2V0VGV4dCI6IlNHXyIsInNldFRleHQiOiJhXyIsImdldFN5bWJvbCI6ImZuXyIsInNldFN5bWJvbCI6Ims2XyIsImdldEFuY2hvciI6ImxSXyIsInNldEFuY2hvciI6ImdSXyIsImdldFRhcmdldCI6ImFrdF8iLCJzZXRUYXJnZXQiOiJ1a3RfIiwiZ2V0T3B0aW9ucyI6IkpWXyIsImNvbm5lY3RTdHlsZSI6InRDXyIsImRpc2Nvbm5lY3RTdHlsZSI6ImlDXyIsImdldEludmFsaWRhdGVNZXRob2QiOiJvUV8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIn19LCJmcm9tT2JqZWN0IjoiV2lfIn0g");var k0=Ci(function(){let i=class t extends WS{constructor(t,i){super(i);this.aE_=!1;this.jTi_=t}cancel(){this.aE_=!0;return this}qE_(){return this.aE_}v4_(){return this.jTi_}ZTi_(t){this.jTi_=t;return this}};i=t([_s("geotoolkit.controls.tools.AnnotationEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0NhbmNlbGVkIjoicUVfIiwiZ2V0QW5ub3RhdGlvbiI6InY0XyIsInNldEFubm90YXRpb24iOiJaVGlfIn19fSAg");const F0=/*#__PURE__*/function(){const t=undefined;return function(t,i,s,e,A){let n=null;const h=undefined;if(e.contains(i.x,i.y)===!1){n=(new Yu).rB_(A["linestyle"]).iQ_(A["fillstyle"]);const t=A["connectorsize"]||10,e=i.clone(),h=t*Math.tan(Math.PI/6),r=e.clone().setX(e.getX()-t).setY(e.getY()-h),o=e.clone().setX(e.getX()-t).setY(e.getY()+h),l=e.clone().setX(e.getX()-t),u=Math.atan2(s.getY()-i.getY(),s.getX()-i.getX())-Math.PI,a=Gn.FI_(u,e.getX(),e.getY()),g=a.aI_(s);(l.getX()<g.getX()&&g.getX()<e.getX()||l.getX()>g.getX()&&g.getX()>e.getX())&&(s=a.transformPoint(l));a.transformPoint(r,r);a.transformPoint(l,l);a.transformPoint(o,o);n.moveTo(s.getX(),s.getY()).lineTo(l.getX(),l.getY()).lineTo(r.getX(),r.getY()).lineTo(e.getX(),e.getY()).lineTo(o.getX(),o.getY()).lineTo(l.getX(),l.getY()).close()}return{geometry:n}}}();const x0=function(){const t=undefined;return function(t,i,s,e,A){const n=(new Yu).rB_(A["linestyle"]).iQ_(A["fillstyle"]);let h=Math.abs(A["radius"]);e.Ie_()/2<h&&(h=e.Ie_()/2);e.Ts_()/2<h&&(h=e.Ts_()/2);const r=A["connectorsize"],o=e.contains(i.x,i.y),l=i.getX(),u=i.getY(),a=s.getX(),g=s.getY();if(o){n.moveTo(e.getX()+h,e.getY()).lineTo(e.Qe_()-h,e.getY());h>0&&n.arcTo(e.Qe_(),e.Ee_(),e.Qe_(),e.Ee_()+h,h);n.lineTo(e.Qe_(),e.pe_()-h);h>0&&n.arcTo(e.Qe_(),e.pe_(),e.Qe_()-h,e.pe_(),h);n.lineTo(e.getX()+h,e.getY()+e.Ts_());h>0&&n.arcTo(e.we_(),e.pe_(),e.we_(),e.pe_()-h,h);n.lineTo(e.getX(),e.getY()+h);h>0&&n.arcTo(e.we_(),e.Ee_(),e.we_()+h,e.Ee_(),h);n.close()}else{const t={top:{position:"top",value:e.Ee_(),_Ti_:e.we_(),pTo:e.Qe_(),$Ti_:h,rTo:h},right:{position:"right",value:e.Qe_(),_Ti_:e.Ee_(),pTo:e.pe_(),$Ti_:h,rTo:h},bottom:{position:"bottom",value:e.pe_(),_Ti_:e.Qe_(),pTo:e.we_(),$Ti_:h,rTo:h},left:{position:"left",value:e.we_(),_Ti_:e.pe_(),pTo:e.Ee_(),$Ti_:h,rTo:h}};t.top.next=t.right;t.right.next=t.bottom;t.bottom.next=t.left;t.left.next=t.top;const i=r/2;let s=null;const A=function(t,i,s){const e=i.tKi_,A=Math.min(i._Ti_,i.pTo),n=Math.max(i._Ti_,i.pTo);let h=i._Ti_<i.pTo?i.$Ti_:i.rTo,r=i._Ti_<i.pTo?i.rTo:i.$Ti_,o=Math.min(i.iKi_,i.cTo),l=Math.max(i.iKi_,i.cTo),u=null,a=null;if(A+h<o&&l<n-r)return;if(o<A+h){h=Math.max(o-A,0);if(o<A){u=e<A?A-o:null;o=A;h=null}}if(l>n-r){r=Math.max(n-l,0);if(l>n){a=e>n?l-n:null;l=n;r=null}}if(i._Ti_<i.pTo){i.iKi_=o;i.$Ti_=h;i.cTo=l;i.rTo=r}else{i.iKi_=l;i.$Ti_=r;i.cTo=o;i.rTo=h}const g=function(t,i,s,e){return Math.min(i+s,e)},c=function(t,i,s,e){return Math.max(e,i-s)};if(u!=null)if(i.position==="top"||i.position==="right"){i.iKi_=null;i._Ti_=null;t.position==="left"?t.iKi_=g(t,t.pTo,u,t._Ti_-t.$Ti_):t.iKi_=c(t,t.pTo,u,t._Ti_+t.$Ti_)}else{i.cTo=null;i.pTo=null;s.position==="left"?s.cTo=c(s,s._Ti_,u,s.pTo+s.rTo):s.cTo=g(s,s._Ti_,u,s.pTo-s.rTo)}if(a!=null)if(i.position==="top"||i.position==="right"){i.cTo=null;i.pTo=null;s.position==="right"?s.cTo=g(s,s._Ti_,a,s.pTo-s.rTo):s.cTo=c(s,s._Ti_,a,s.pTo+s.rTo)}else{i.iKi_=null;i._Ti_=null;t.position==="right"?t.iKi_=c(t,t.pTo,a,t._Ti_+t.$Ti_):t.iKi_=g(t,t.pTo,a,t._Ti_-t.$Ti_)}t.rTo=i.$Ti_;i._Ti_==null&&(t.pTo=null);s.$Ti_=i.rTo;i.pTo==null&&(s._Ti_=null)};let o=[];if(Math.abs(g-t.top.value)<NA.Je_){s=t.top;s.tKi_=l;s.sKi_=a;s.iKi_=a-i;s.cTo=a+i;A(t.left,t.top,t.right);o=[t.top,t.right,t.bottom,t.left]}else if(Math.abs(a-t.right.value)<NA.Je_){s=t.right;s.tKi_=u;s.sKi_=g;s.iKi_=g-i;s.cTo=g+i;A(t.top,t.right,t.bottom);o=[t.right,t.bottom,t.left,t.top]}else if(Math.abs(g-t.bottom.value)<NA.Je_){s=t.bottom;s.tKi_=l;s.sKi_=a;s.iKi_=a+i;s.cTo=a-i;A(t.right,t.bottom,t.left);o=[t.bottom,t.left,t.top,t.right]}else{s=t.left;s.tKi_=u;s.sKi_=g;s.iKi_=g+i;s.cTo=g-i;A(t.bottom,t.left,t.top);o=[t.left,t.top,t.right,t.bottom]}const c=undefined;(function(t){n.moveTo(l,u);const i=t[0];i.cTo!=null&&(i.position==="top"||i.position==="bottom"?n.lineTo(i.cTo,i.value):n.lineTo(i.value,i.cTo));let s=i,e=s.next;do{s!==i&&s.iKi_!=null&&(s.position==="top"||s.position==="bottom"?n.lineTo(s.iKi_,s.value):n.lineTo(s.value,s.iKi_));s.rTo>0?s.position==="top"||s.position==="bottom"?n.arcTo(s.pTo,s.value,s.pTo,e._Ti_+(e.position==="right"?+1:-1)*e.$Ti_,s.rTo):n.arcTo(s.value,s.pTo,e._Ti_+(e.position==="top"?+1:-1)*e.$Ti_,s.pTo,s.rTo):s.pTo!=null&&(s.position==="top"||s.position==="bottom"?n.lineTo(s.pTo,s.value):n.lineTo(s.value,s.pTo));e!==i&&e.cTo!=null&&(e.position==="top"||e.position==="bottom"?n.lineTo(e.cTo,e.value):n.lineTo(e.value,e.cTo));s=e;e=s.next}while(s!==i);i.position==="top"||i.position==="right"?i._Ti_+i.$Ti_<i.iKi_&&(i.position==="top"?n.lineTo(i.iKi_,i.value):n.lineTo(i.value,i.iKi_)):i._Ti_+i.$Ti_>i.iKi_&&(i.position==="bottom"?n.lineTo(i.iKi_,i.value):n.lineTo(i.value,i.iKi_));n.lineTo(l,u);return n})(o)}let c=n.getBounds(),I=null;if(o===!1&&t==null){this.gt_()!=null&&(c=c.clone().Le_(this.gt_().Ie_()));I=(new TA).moveTo(c.we_(),c.Ee_()).lineTo(c.Qe_(),c.Ee_()).lineTo(c.Qe_(),c.pe_()).lineTo(c.we_(),c.pe_()).lineTo(c.we_(),c.Ee_()).moveTo(l-1,u-1).lineTo(l+1,u-1).lineTo(l+1,u+1).lineTo(l-1,u+1).lineTo(l-1,u-1).close()}return{geometry:n,clip:I}}}();let L0=null;var U0=Ci(function(){var i;let s=i=class t{constructor(){this.eKi_={}}nt_(t){return this.eKi_[t]}AKi_(t,i){this.eKi_[t]=i;return this}static Ai_(){L0==null&&(L0=new i);return L0}};s=i=t([_s("geotoolkit.widgets.overlays.annotationgeometry.Registry")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6Im50XyIsInJlZ2lzdGVyR2VvbWV0cnkiOiJBS2lfIn19LCJnZXRJbnN0YW5jZSI6IkFpXyIsImdldENsYXNzTmFtZSI6IkRfIn0g");var Y0={nKi_:"GeometryChanged"};const T0="#1565c0",K0="#fdd835";var H0=Ci(function(){let i=class t extends sI{KH_(){return this.$K_}setOrientation(t){if(this.$K_===t)return this;this.$K_=t;return this}It_(){const t=undefined;if(this.getBounds()==null||this.$K_!==fg.ux_)return sI.prototype.It_.call(this);const i=this.getParent().rt_().Ts_();return Gn.multiply(Gn.kI_(0,i),Gn.FI_(-Math.PI/2,0,0))}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb250ZW50c1RyYW5zZm9ybSI6Ikl0XyJ9fX0g"),q0=Ci(function(){let i=class t extends Du{constructor(t){const i=ys(t,N0)?t.JV_():null,s=qi(i||t,{annotation:ys(t,N0)?t:null,offset:null,frame:null,radius:0,connectorsize:1,orientation:fg.ax_,visible:!0,textstyle:new qa({color:"black",alignment:Fa.z_,font:"12px Arial",baseline:ka.Top}),linestyle:{color:T0,width:1,pixelsnapmode:{x:!0,y:!0}},fillstyle:K0,geometrytype:"rectangle-callouts",cssclass:"AnnotationShape"},!0);super(s);this.jTi_=s["annotation"];this.hKi_=null;this.rKi_=null;if(this.jTi_ instanceof $n){this.hKi_=(t,i,s)=>{s==="Symbol"&&this.oKi_(i.fn_());s!=="Options"&&s!=="TextStyle"&&s!=="FillStyle"&&s!=="LineStyle"||this.lKi_(i.JV_());if(s==="Target"){const t=this.akt_(),i=this.getParent();if(t.getParent()==null){if(i instanceof Ic){this.uKi_=i;i.removeChild(this)}}else if(this.getParent()===null&&this.uKi_!=null){this.uKi_.GY_(this);this.uKi_=null}}this.vW_().td_()};this.rKi_=(t,i)=>{const s=this.getParent();s instanceof Ic&&s.removeChild(this);this.dispose()};this.jTi_.on(Zn.gf_,this.hKi_);this.jTi_.on(Zn.cf_,this.rKi_)}this.nf_(s["visible"]);this.T2_=s["offset"];this.aKi_=s["frame"];this.Xz_=Math.abs(s["radius"]);this.$K_=s["orientation"];this.gKi_=s["connectorsize"];this.cKi_=s["geometrytype"];this.Oq_=null;this._q_=new YC({text:this.jTi_.SG_(),ax:0,ay:0,width:150,height:50,textstyle:s["textstyle"],alignment:dA.ie_,sizeisindevicespace:!0}).SE_(dA.ie_).PX_(NC.rX_).mX_(!0);this.oJ_=null;this.Yjt_=null;this.IKi_=(new sI).kY_(!0).GY_([this.fKi_=(new H0).aq_(!0).GY_([this.CKi_=(new sI).aq_(!0).ht_(new mA(0,0,16,16)).nf_(!1),this._q_])]);this.bf_=null;this.dKi_=null;this.BKi_=null;this.wKi_=null;this.QKi_=null;this.EKi_=null;this.oKi_(this.jTi_.fn_());this.lKi_(this.jTi_.JV_())}dispose(){if(!this.Df_()){if(this.jTi_ instanceof $n){this.jTi_.off(Zn.gf_,this.hKi_);this.jTi_.off(Zn.cf_,this.rKi_);this.jTi_=null}this.oKi_(null);if(this.Oq_!=null){if(Array.isArray(this.Oq_))for(let t=0;t<this.Oq_.length;t++)this.Oq_[t].dispose();else this.Oq_.dispose();this.Oq_=null}if(this.IKi_!=null){this.IKi_.dispose();this.IKi_=null}super.dispose()}}v4_(){return this.jTi_}KH_(){return this.$K_}setOrientation(t){if(this.$K_===t)return this;this.td_();this.$K_=t;this.fKi_.setOrientation(t);const i=this.T2_.clone(),s=this.aKi_.clone();this.$K_===fg.ux_?this.T2_.vs_(i.y,-1*i.x):this.T2_.vs_(-1*i.y,i.x);this.aKi_.setSize(s.Ts_(),s.Ie_());this.vW_().td_();return this}a_(t){if(this.SG_()===t)return this;this.td_();this.jTi_.a_(t);this.vW_().td_();return this}SG_(){return this.jTi_.SG_()}oKi_(t){if(this.oJ_!=null&&this.Yjt_!=null){this.oJ_.off(ff.PV_,this.Yjt_);this.Yjt_=null}this.pKi_==null&&(this.pKi_=()=>{this.td_()});this.DIt_!=null&&this.DIt_ instanceof sI&&this.DIt_.off(rh.sC_,this.pKi_);this.DIt_=t;this.CKi_.KY_().Lq_(null).nf_(!1);this.oJ_=null;if(t==null)return this;if(typeof t=="string"||t instanceof df)this.CM_(t);else if(t instanceof sI){t.on(rh.sC_,this.pKi_);this.CKi_.GY_(t).ht_(new mA(0,0,t.getBounds().Ie_(),t.getBounds().Ts_())).Lq_(t.getBounds().clone()).nf_(!0)}else{const i=t["width"],s=t["height"];t["url"]!=null&&typeof t["url"]=="string"?this.CM_(t["url"],i,s,t["keepaspectratio"]):t["node"]!=null&&t["node"]instanceof ch&&(t["node"]instanceof df?this.CM_(t["node"],i,s,t["keepaspectratio"]):this.CKi_.GY_(t["node"]).ht_(new mA(0,0,i,s)).Lq_(new mA(0,0,i,s)).nf_(!0))}this.CKi_.$C_()&&this.vW_().td_();return this}CM_(t,i,s,e){let A=null;A=t instanceof df?t.clone().SE_(dA.ie_).gR_(0,0).OG_(!1):new df({x:0,y:0,alignment:dA.ie_,url:t,sizeisindevicespace:!1});this.oJ_=A;this.CKi_.GY_(this.oJ_);const n=()=>{i=i||this.oJ_.Ie_();s=s||this.oJ_.Ie_();this.CKi_.ht_(new mA(0,0,i,s)).Lq_(new mA(0,0,this.oJ_.Ie_(),this.oJ_.Ts_())).nf_(!0);if(e!==!1&&(i!==this.oJ_.Ie_()||s!==this.oJ_.Ts_())){const t=this.oJ_.Ie_()/this.oJ_.Ts_(),e=undefined,A=i/s>t?new xA(this.oJ_.Ie_()*s/this.oJ_.Ts_(),s):new xA(i,this.oJ_.Ts_()*i/this.oJ_.Ie_());this.oJ_.setSize(A.Ie_(),A.Ts_());this.CKi_.Lq_(null)}this.vW_().td_()};if(A.loaded===!1){this.Yjt_=()=>{this.oJ_.off(ff.PV_,this.Yjt_);this.Yjt_=null;n()};this.oJ_.on(ff.PV_,this.Yjt_)}else n()}fn_(){return this.jTi_.fn_()}k6_(t){if(this.fn_()===t)return this;this.td_();this.jTi_.k6_(t);this.oKi_(t).vW_().td_();return this}akt_(){return this.jTi_.akt_()}ukt_(t){if(this.akt_()===t)return this;this.jTi_.ukt_(t);this.vW_().td_();return this}B$_(){return this.T2_}d$_(t){if(this.T2_!=null&&this.T2_.bs_(t,NA.Je_))return this;this.td_();this.T2_=lA.Wi_(t);this.jTi_!=null&&this.jTi_.setOptions({offset:this.T2_});this.vW_().td_();return this}mKi_(t){if(this.gKi_===t)return this;this.td_();this.gKi_=t;this.vW_().td_();return this}yKi_(){return this.gKi_}lR_(){return this.jTi_.lR_()}gR_(t){if(this.lR_()!=null&&this.lR_().bs_(t,NA.Je_))return this;this.td_();this.jTi_.gR_(t);this.vW_().td_();return this}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}t=this.if_().uI_(t,t);e=bC.select(this.getParent(),t.x,t.y,i||10).filter(s);return e.length>0?e[0].getData():null}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;if(t instanceof Ea){if(this.EKi_==null){this.vW_(t.Ji_());this.EKi_={path:this.Oq_,textarea:this.IKi_}}}else if(this.bf_==null||this.EKi_!=null){this.EKi_=null;this.vW_()}this.Xb_(i);const s=t.tk_(),e=s?[]:null,A=function(t){e.indexOf(this)===-1&&e.push(this)};if(this.Oq_!=null)if(Array.isArray(this.Oq_))for(let e=0;e<this.Oq_.length;e++)s?t.pO_(this.Oq_[e],A.bind(this.Oq_[e])):this.Oq_[e].render(i);else this.Oq_.render(i);this.IKi_.render(i);if(i.tk_()){t.iQ_(wr.EQ_);t.rB_(null);t.pR_(this.DKi_)}this.iN_(i);if(s&&e.length>0){t.mO_(ks({visual:this,paths:e},["visual","paths"]));t.mO_(new jf(this,[{visual:this,paths:e}]))}}getBounds(){this.bf_==null&&this.vW_();return this.bf_}vW_(t){if(this.EKi_!=null)return this;const i=this.akt_(),s=this.lR_();if(this.getParent()==null||s==null||i==null||this.T2_==null||this.aKi_==null)return this;if(i.getParent()==null)return this.nf_(!1);this.nf_(!0);this._q_.a_(this.jTi_.SG_());let e=i.if_()||Gn.JI_,A=this.if_();if(t!=null){const i=Gn.divide(t,this.if_());A=Gn.multiply(i,A);e=Gn.multiply(i,e)}const n=e.transformPoint(s),h=this.aKi_.clone(),r=new xA(h.width/2,h.height/2),o=n.clone().vs_(n.getX()+this.T2_.getX(),n.getY()+this.T2_.getY()),l=new mA(o.x-r.width,o.y-r.height,o.x+r.width,o.y+r.height),u=l.clone().Le_(-4),a=new lA(Number.NaN,Number.NaN),g=new lA(Number.NaN,Number.NaN),c=undefined,I=l.xe_(n,o,a,g)!==0?a:o;let f=U0.Ai_().nt_(this.cKi_);f==null&&(f=U0.Ai_().nt_("rectangle-callouts"));const C=qi(this.UU_,this.N_(),!0);C["annotation"]=this.jTi_;const d=f.call(this,t,n,I,l,C);this.Oq_=d!=null?d["geometry"]:null;let B=null;if(this.Oq_!=null){const t=Array.isArray(this.Oq_)?this.Oq_:[this.Oq_];let i=null;for(let s=0;s<t.length;s++){i=t[s].getBounds();if(A!=null){i=A.gI_(i);t[s].nt_().transform(A.rI_())}B=i}}const w=d!=null?d["clip"]:null;let Q=null;w!=null&&(Q=new wh(A?w.transform(A.rI_()):w));this.xb_(Q);this.DKi_=A!=null?A.gI_(l):l;this.bf_=B!=null?B.union(this.DKi_):this.DKi_;this.dKi_=l;this.wKi_=u;this.IKi_.ht_(u.clone()).at_(A!=null?A.rI_():null).Lq_(new mA(0,0,u.Ie_(),u.Ts_()));const E=undefined,p=this._q_.FE_().vF_(),m=this.fKi_.rt_();let y=0;this.CKi_.$C_()&&(y=this.CKi_.getBounds().Ie_()+2);if(m!=null){switch(p){case Fa.z_:this._q_.SE_(dA.ie_).gR_(m.we_()+y,0);break;case Fa.ne_:this._q_.SE_(dA.le_).gR_(m.ye_()+y/2,0);break;case Fa.X_:this._q_.SE_(dA.ee_).gR_(m.Qe_(),0);break}u.setX(u.getX()+y).de_(u.Ie_()-y)}this.$K_===fg.ax_?this._q_.pX_(u.Ie_(),u.Ts_()):this._q_.pX_(u.Ts_()-y,u.Ie_()+y);this.QKi_={"top-left":new lA(this.wKi_.we_(),this.wKi_.Ee_()),"top-right":new lA(this.wKi_.Qe_(),this.wKi_.Ee_()),"bottom-right":new lA(this.wKi_.Qe_(),this.wKi_.pe_()),"bottom-left":new lA(this.wKi_.we_(),this.wKi_.pe_())};this.BKi_={anchor:n,offset:I,center:new lA(this.dKi_.ye_(),this.dKi_.De_()),"top-left":new lA(this.dKi_.we_(),this.dKi_.Ee_()),"top-right":new lA(this.dKi_.Qe_(),this.dKi_.Ee_()),"bottom-right":new lA(this.dKi_.Qe_(),this.dKi_.pe_()),"bottom-left":new lA(this.dKi_.we_(),this.dKi_.pe_())};this.MKi_();return this}MKi_(){this.notify(Y0.nKi_,this)}vKi_(t){if(t===void 0)return this.BKi_;const i={};let s;for(s in this.BKi_)this.BKi_.hasOwnProperty(s)&&(i[s]=t.aI_(this.BKi_[s]));return i}bKi_(t){if(t===void 0)return this.QKi_;const i={};let s;for(s in this.QKi_)this.QKi_.hasOwnProperty(s)&&(i[s]=t.aI_(this.QKi_[s]));return i}NKi_(){return this.aKi_}SKi_(t){if(this.aKi_!=null&&this.aKi_.XA_(t,NA.Je_))return this;this.td_();this.aKi_=xA.Wi_(t);this.jTi_!=null&&this.jTi_.setOptions({frame:this.aKi_});this.vW_().td_();return this}xVt_(){return this.Xz_}setRadius(t){if(t==null)throw new Error("radius can not be null");if(this.Xz_===t)return this;this.td_();this.Xz_=t;this.vW_().td_();return this}GKi_(t){if(this.cKi_===t)return this;this.td_();this.cKi_=t;this.vW_().td_();return this}lKi_(t){this.UU_=t;this.dt_(t);return this}N_(){const t=super.N_();t["annotation"]=this.v4_();t["textstyle"]=this._q_.FE_();t["connectorsize"]=this.yKi_();t["geometrytype"]=this.cKi_;t["radius"]=this.xVt_();t["frame"]=this.NKi_();t["offset"]=this.B$_();return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["annotation"]!==void 0&&(this.jTi_=t["annotation"]);if(t["textstyle"]!==void 0){if(t["textstyle"]!=null){const i=t["textstyle"].hD_(),s=undefined,e=this._q_.NX_()===NC.sX_;if(e===i){const t=e?NC.oX_:NC.sX_;this._q_.PX_(t)}}this._q_.g_(t["textstyle"],t["textstyle"]instanceof qa==!1).vn_()}t["connectorsize"]!==void 0&&this.mKi_(t["connectorsize"]);t["geometrytype"]!==void 0&&this.GKi_(t["geometrytype"]);t["radius"]!==void 0&&this.setRadius(t["radius"]);t["frame"]!==void 0&&this.SKi_(t["frame"]);t["offset"]!==void 0&&this.d$_(t["offset"]);return this}RKi_(){return this.oJ_!=null?this.oJ_.Ie_():0}};i=t([_s("geotoolkit.widgets.overlays.AnnotationShape")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");U0.Ai_().AKi_("none",(function(){return null}));const J0="#fdd835",P0=new Gn;var V0=function(){var i;let s=i=class t extends eE{constructor(t,i,s,e,A,n,h){const r=qi(t,{centerx:typeof t=="number"?t:0,centery:typeof i=="number"?i:0,radiusx:typeof s=="number"?s:10,radiusy:typeof e=="number"?e:10,visible:typeof A!="boolean"||A,linestyle:n instanceof hl?n:null,fillstyle:h instanceof wr?h:null},!0),o=new lA(r["centerx"],r["centery"]),l=new xA(r["radiusx"],r["radiusy"]),u=undefined,a=undefined,g=undefined,c=undefined;super(o.x-l.Ie_(),o.y-l.Ts_(),o.x+l.Ie_(),o.y+l.Ts_(),0,0,r["visible"],r["linestyle"],r["fillstyle"]);this.Gi_=!1;this.qz_=o;this.Xz_=l}clone(){return new i({centerx:this.qz_.x,centery:this.qz_.y,radiusx:this.Xz_.Ie_(),radiusy:this.Xz_.Ts_(),visible:this.$C_(),linestyle:this.gt_(),fillstyle:this.ct_()})}USi_(){return this.Gi_}setActive(t){if(this.Gi_===t)return this;this.Gi_=t;this.td_();return this}me_(t){if(this.qz_.bs_(t,NA.Je_))return this;this.td_();this.qz_.x=t.x;this.qz_.y=t.y;const i=bn.$c_(this.Xz_.Ie_(),0,this.if_()),s=bn.$c_(0,this.Xz_.Ts_(),this.if_()),e=this.qz_.x-i,A=this.qz_.y-s,n=this.qz_.x+i,h=this.qz_.y+s;this.ce_(e,A,n,h);this.vn_();this.td_();return this}getCenter(){return this.qz_}render(t){const i=this.sd_()!=null?t.uS_(this.sd_()):t;this.Xb_(i);const s=bn.$c_(this.Xz_.Ie_(),0,i.Ji_()),e=bn.$c_(0,this.Xz_.Ts_(),i.Ji_());i.iQ_(this.ct_(),this.bounds);i.rB_(this.gt_());i.yR_(this.qz_.x-s,this.qz_.y-e,s*2,e*2);this.iN_(i)}};s=i=t([_s("geotoolkit.widgets.overlays.AnnotationTool.Handle")],s);return s}(),O0={kKi_:"AnnotationChanging",FKi_:"AnnotationChanged",xKi_:"AnnotationEditing",LKi_:"AnnotationEdited"},W0=function(){let i=class t extends OS{constructor(t){let i,s;t instanceof b0?i=t:t!=null&&t["annotationoverlay"]!=null&&(i=t["annotationoverlay"]);super(t=Pi(t,{annotationoverlay:i,name:"annotation",cancreate:!0,candelete:!0,canedit:!0,canmove:!0,annotationcontainer:null},!0));this.UKi_=null;this.YKi_=null;this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:[{callback:this.XFt_.bind(this),object:null},{callback:this.zxt_.bind(this),object:Mi,enabled:!1}],pointerup:[{callback:this.Ct_.bind(this),object:null},{callback:this.Ct_.bind(this),object:Mi,enabled:!1}],dblclick:this.TKi_});this.OSt_=new bC;this.E8_=null;this.KKi_=i;this.I4t_=this.KKi_.yei_();this.y8_=this.KKi_.HKi_();this.y8_.GY_([this.Jgt_=new TQ({name:"overlay-annotation-manipulator",dynamic_layer:!0})]);this.uy_=new lA(0,0);this.NLt_=new lA(0,0);this.dVt_=new lA(0,0);this.qKi_=new V0({centerx:0,centery:0,radiusx:4,radiusy:4,linestyle:{color:"#1565c0",width:1,pixelsnapmode:{x:!0,y:!0}},fillstyle:"#C1E3E8",visible:!1});this.Sgt_={anchor:this.qKi_.clone().iQ_("#8BE73D"),topleft:this.qKi_.clone(),topright:this.qKi_.clone(),bottomleft:this.qKi_.clone(),bottomright:this.qKi_.clone()};this.qKi_.iQ_(J0);this.Jgt_.GY_([this.qKi_]);for(s in this.Sgt_)this.Sgt_.hasOwnProperty(s)&&this.Jgt_.GY_(this.Sgt_[s]);this.JKi_=!1;this.PKi_=null;this.VKi_=null;this.wgt_=null;this.UKi_=t["annotationcontainer"];this.setOptions(t);this.OKi_=(t,i,s)=>{this.Pxi_(!1);this.Ngt_()};this.Zqt_=Ts.z_}dispose(){this.WKi_(null);if(this.jxi_!=null){this.jxi_.removeEventListener("keydown",this.$xi_);this.jxi_.removeEventListener("focusout",this.zKi_);this.jxi_=null}this.zxi_!=null&&this.zxi_.parentNode!=null&&this.zxi_.parentNode.removeChild(this.zxi_);this.zxi_=null;this.Jgt_.dispose();super.dispose()}lFt_(t){this.E8_=t;t!=null&&this.XKi_();return super.lFt_(t)}XKi_(){this.zxi_==null&&this.jKi_(this.UKi_);return this.zxi_}setOptions(t){this.UU_=qi(t,this.UU_);if(this.UU_.hasOwnProperty("handles")&&this.UU_["handles"]!=null){const t=this.UU_["handles"];let i;for(i in t)t.hasOwnProperty(i)&&this.Sgt_.hasOwnProperty(i)&&this.Sgt_[i].dt_(t[i])}return this}JV_(){return this.UU_}jKi_(t){this.zxi_=xs("div");this.zxi_.style.position="absolute";this.zxi_.style.display="none";this.zxi_.style.border="0px solid transparent";this.zxi_.style.backgroundColor="transparent";this.zxi_.style.pointerEvents="none";this.zxi_.style.overflow="unset";if(t!=null){this.YKi_=typeof t=="string"?Mi.document.getElementById(t):t;this.YKi_ instanceof HTMLCanvasElement&&(this.YKi_=this.YKi_.parentElement)}this.YKi_!=null?this.YKi_.appendChild(this.zxi_):Mi.document.body.appendChild(this.zxi_);this.Xxi_=xs("div");this.Xxi_.style.position="absolute";this.Xxi_.style.border="0px solid transparent";this.Xxi_.className="geotoolkit-inlinecontainer";this.Xxi_.style.pointerEvents="all";this.zxi_.appendChild(this.Xxi_);this.jxi_=xs("textarea");this.jxi_.className="geotoolkit-inlineeditor";this.jxi_.style.position="absolute";this.jxi_.style.resize="none";this.jxi_.style.border="0px solid transparent !important";this.jxi_.style.boxShadow="none";this.jxi_.style.borderWidth="0px";this.jxi_.style.borderColor="transparent";this.jxi_.style.borderStyle="inset";this.jxi_.style.outline="0px";this.jxi_.style.fontFamily="sans-serif";this.jxi_.style.fontSize="small";this.jxi_.style.lineHeight="normal";this.jxi_.style.backgroundColor=J0;this.$xi_=t=>{t.key!=="Escape"&&t.keyCode!==27?t.ctrlKey!==!0||t.key!=="Enter"&&t.keyCode!==13||this.FZt_(!0):this.FZt_(!1)};this.zKi_=()=>{this.FZt_(!0)};this.jxi_.addEventListener("keydown",this.$xi_);this.jxi_.addEventListener("focusout",this.zKi_);this.Xxi_.appendChild(this.jxi_)}FZt_(t){if(this.JKi_===!1)return this;this.zxi_.style.display="none";this.JKi_=!1;if(t===!0&&this.VKi_!=null){const t=this.VKi_.SG_(),i=this.jxi_.value.replace(/\n/g,"<br/>");if(t!==i){this.VKi_.a_(i);const s=this.VKi_!=null?this.VKi_.v4_():null,e=new k0(s,null);this.notify(O0.xKi_,this,e);e.qE_()?this.VKi_.a_(t):this.notify(O0.LKi_,this,e)}}return this}ZKi_(){this.VKi_!=null&&this.VKi_.vW_();this.Pxi_(!1);this.Ngt_();return this}Pxi_(t){if(this.E8_==null)return this;if(this.VKi_==null){this.zxi_.style.display="none";return this}const i=Us(this.E8_.r3_()),s=this.VKi_.getParent(),e=undefined,A=s.if_().rn_(s.ot_()),n=this.VKi_.bKi_(P0),h=new mA({x:n["top-left"].getX(),y:n["top-left"].getY(),width:n["bottom-right"].getX()-n["top-left"].getX(),height:n["bottom-right"].getY()-n["top-left"].getY()});let r=A.we_(),o=A.Ee_();if(this.YKi_==null){r+=i.x;o+=i.y}this.zxi_.style.left=r+"px";this.zxi_.style.top=o+"px";this.zxi_.style.width=A.Ie_()+"px";this.zxi_.style.height=A.Ts_()+"px";if(this.VKi_.KH_()===fg.ax_){this.Xxi_.style.left=Math.round(h.getX()-A.we_())+"px";this.Xxi_.style.top=Math.round(h.getY()-A.Ee_())+"px";this.Xxi_.style.width=Math.round(h.Ie_())+"px";this.Xxi_.style.height=Math.round(h.Ts_())+"px";this.Xxi_.style.transform="rotate(0deg)";this.jxi_.style.width=Math.round(h.Ie_())+"px";this.jxi_.style.height=Math.round(h.Ts_())+"px"}else{const t=this.VKi_.RKi_(),i=h.ye_()-t/2,s=h.De_()-t/2,e=h.Ts_()-t,n=h.Ie_()+t;this.Xxi_.style.left=Math.round(i-e/2-A.we_())+"px";this.Xxi_.style.top=Math.round(s-n/2-A.Ee_())+"px";this.Xxi_.style.width=Math.round(e)+"px";this.Xxi_.style.height=Math.round(n)+"px";this.Xxi_.style.transform="rotate(-90deg)";this.jxi_.style.width=Math.round(e)+"px";this.jxi_.style.height=Math.round(n)+"px"}if(t!==!1){this.zxi_.style.display="block";const t=this.VKi_.N_()["textstyle"]||new qa;this.jxi_.style.font=t.Zy_();this.jxi_.style.lineHeight=t.Wy_().toString();this.jxi_.style.textAlign="justify";this.jxi_.style.textAlignLast="auto";this.jxi_.style.whiteSpace="normal";t.hD_()?this.jxi_.style.wordBreak="break-all":this.jxi_.style.wordBreak="normal";this.jxi_.focus();this._Ki_()!=null&&this._Ki_().ct_()!=null&&this._Ki_().ct_().getColor!=null&&this._Ki_().ct_().getColor()!=null?this.jxi_.style.backgroundColor=this._Ki_().ct_().getColor():this.jxi_.style.backgroundColor=J0}return this}Pkt_(){this.Jgt_.nf_(this.isEnabled());if(this.isEnabled()===!1){this.qKi_.nf_(!1);this.FZt_(!1).$Ki_(null).Mgt_(null).WKi_(null)}super.Pkt_()}Ngt_(){if(this.VKi_==null){let t;for(t in this.Sgt_)this.Sgt_.hasOwnProperty(t)&&this.Sgt_[t].nf_(!1)}else{const t=this.VKi_.if_(),i=this.VKi_.vKi_(t);for(const t in i){let s=t;t.indexOf("-")!==-1&&(s=t.replace("-",""));i.hasOwnProperty(t)&&this.Sgt_.hasOwnProperty(s)&&this.Sgt_[s].me_(i[t]).nf_(!0)}}}yei_(){return this.I4t_}WKi_(t,i){if(this.VKi_===t)return this;this.FZt_(!0);if(i!==!0){const i=new k0(t!=null?t.v4_():null,null);this.notify(O0.kKi_,this,i);if(i.qE_())return this}const s=this.VKi_;this.VKi_=t;t!=null&&this.$Ki_(t.v4_().akt_());s!=null&&s.off(Y0.nKi_,this.OKi_).vW_();if(i!==!0){const t=new k0(this.VKi_!=null?this.VKi_.v4_():null,null);this.notify(O0.FKi_,this,t)}if(this.VKi_!=null){this.VKi_.vW_().on(Y0.nKi_,this.OKi_);this.KKi_.tHi_(this.VKi_)}this.VKi_==null&&this.Mgt_(null);this.Ngt_();return this}_Ki_(){return this.VKi_}Mgt_(t){if(this.wgt_===t)return this;this.wgt_!=null&&this.wgt_.setActive(!1);this.wgt_=t;if(this.wgt_!=null){this.FZt_(!0);this.wgt_.setActive(!0)}return this}iHi_(){return this.PKi_}sHi_(){return this.KKi_.sHi_()}$Ki_(t){if(this.PKi_===t)return this;const i=this.sHi_();i!=null&&i!==""&&this.PKi_!=null&&this.PKi_.Qd_(i);this.PKi_=t;i!=null&&i!==""&&this.PKi_!=null&&this.PKi_.Bd_(i);return this}eHi_(t){return this.y8_}TKi_(t){if(this.isEnabled()===!1||this.VKi_==null)return this;t.stopPropagation(!0,!0);this.KKi_.AHi_(this.VKi_.v4_());return this}KXt_(){return this.JKi_}AHi_(t){if(t==null){this.JKi_&&this.FZt_(!0);return this}if(t===this.VKi_&&this.JKi_===!0)return this;this.JKi_&&this.FZt_(!0);this.WKi_(t);this.jxi_.value=this.VKi_.SG_().replace(/<br>/g,"\n").replace(/<br\/>/g,"\n");this.Pxi_(!0);this.JKi_=!0;return this}nHi_(t,i,s){let e=null;if(this.wgt_)if(this.wgt_===this.Sgt_["anchor"]){e=this.eHi_(s);this.$Ki_(e);if(e==null)return;const t=this.bFt_(e,s),i=this.VKi_.akt_(),A=this.VKi_.lR_();this.VKi_.ukt_(e).gR_(t);const n=new k0(this.VKi_!=null?this.VKi_.v4_():null,s);this.notify(O0.xKi_,this,n);n.qE_()?this.VKi_.ukt_(i).gR_(A):this.notify(O0.LKi_,this,n)}else{const e=this.VKi_.NKi_().clone();let A=e.Ie_(),n=e.Ts_();const h=this.VKi_.B$_().clone();h.vs_(h.getX()+t/2,h.getY()+i/2);if(this.wgt_===this.Sgt_["topleft"]){A-=t;n-=i}else if(this.wgt_===this.Sgt_["topright"]){A+=t;n-=i}else if(this.wgt_===this.Sgt_["bottomleft"]){A-=t;n+=i}else if(this.wgt_===this.Sgt_["bottomright"]){A+=t;n+=i}const r=this.Sgt_,o=function(t,i){const s=r[t];r[t]=r[i];r[i]=s};if(A<=0){if(t<0){o("topright","topleft");o("bottomright","bottomleft")}if(t>0){o("topleft","topright");o("bottomleft","bottomright")}}if(n<=0){if(i<0){o("topright","bottomright");o("topleft","bottomleft")}if(i>0){o("bottomright","topright");o("bottomleft","topleft")}}const l=this.VKi_.B$_(),u=this.VKi_.NKi_();this.VKi_.d$_(h).SKi_({width:A,height:n});const a=new k0(this.VKi_!=null?this.VKi_.v4_():null,s);this.notify(O0.xKi_,this,a);a.qE_()?this.VKi_.d$_(l).SKi_(u):this.notify(O0.LKi_,this,a)}else if(t!==0||i!==0){const e=this.VKi_.B$_().clone();e.x=e.x+t;e.y=e.y+i;this.VKi_.d$_(e);const A=new k0(this.VKi_!=null?this.VKi_.v4_():null,s);this.notify(O0.xKi_,this,A);if(A.qE_()){e.x=e.x-t;e.y=e.y-i;this.VKi_.d$_(e)}else this.notify(O0.LKi_,this,A)}this.VKi_.vW_();this.Pxi_(!1);this.Ngt_()}zxt_(t){if(this.isActive()===!1||this.UU_["canmove"]!==!0)return;t.stopPropagation(!0,!0);const i=this.bFt_(this.y8_,t),s=this.y8_.if_().transformPoint(i);let e=s.x-this.dVt_.x,A=s.y-this.dVt_.y;const n=this.y8_.lt_();(s.getX()<n.we_()||s.getX()>n.Qe_())&&(e=0);(s.getY()<n.Ee_()||s.getY()>n.pe_())&&(A=0);this.nHi_(e,A,t);this.dVt_=s.clone()}XFt_(t){const i=this.bFt_(this.y8_,t);let s=null;if(this.isActive()){if(this.UU_["canmove"]!==!0)return;t.stopPropagation(!0,!0);const s=this.y8_.if_().transformPoint(i),e=s.x-this.dVt_.x,A=s.y-this.dVt_.y;this.nHi_(e,A,t);this.dVt_=s.clone();return}const e=t.Fkt_();this.OSt_.dI_(this.y8_.if_());const A=this.OSt_.select(this.y8_,e.x,e.y,2);let n=null,h=null;for(let t=A.length-1;t>=0;t--)if(A[t]!==this.qKi_){A[t]instanceof V0&&(h=A[t]);if(A[t]instanceof q0){n=A[t];break}}if(n||h!=null)t.stopPropagation(!0,!0);else if(this.UU_["cancreate"]){s=this.eHi_(t);s==null&&this._Ki_()!=null&&this._Ki_().v4_()!=null&&(s=this._Ki_().v4_().akt_());this.$Ki_(s)}this.qKi_.me_(i).nf_(n==null&&h===null&&this.UU_!==null&&this.UU_["cancreate"]===!0)}Ct_(t){const i=t.Fkt_();this.kFt_(i)&&this.dFt_(t)&&this.TKi_(t);this.OSt_.dI_(this.y8_.if_());const s=this.OSt_.select(this.y8_,i.x,i.y,2).filter(Ih);let e,A;for(A=s.length-1;A>=0;A--)if(s[A]instanceof q0&&s[A]===this._Ki_()){e=s[A];break}if(e!=null){const i=e.$X_(t.Fkt_(),5);if(i!=null&&i.length>0)for(A=0;A<i.length;A++){const t=i[A];for(let i=0;i<t["paths"].length;i++)t["paths"][i].notify("click",t["paths"][i])}}this.isActive()&&this.stop()}zFt_(t){if(!(this.hVt_()&t.Lkt_()["buttons"]||this.dFt_(t)))return;const i=t.Fkt_();this.OSt_.dI_(this.y8_.if_());const s=this.OSt_.select(this.y8_,i.x,i.y,2);let e=null,A=null,n;for(n=s.length-1;n>=0;n--)if(s[n]!==this.qKi_){s[n]instanceof V0&&(A=s[n]);s[n]instanceof q0&&e==null&&(e=s[n])}this.Mgt_(A);A==null&&this.WKi_(e);if(this.VKi_==null){this.iHi_()==null&&this.$Ki_(this.eHi_(t));if(this.iHi_()!=null){const i=this.bFt_(this.iHi_(),t);e=this.KKi_.hHi_({target:this.iHi_(),anchor:i,text:"Anchor : "+i.toString()});if(e!=null){this.KKi_.WKi_(e);t.stopPropagation(!0,!0)}}}else{this.start(t);const i=this.bFt_(this.y8_,t);this.y8_.if_().transformPoint(i,i);this.uy_=i.clone();this.dVt_=i.clone()}}start(t){t.stopPropagation();this.setActive(!0);OS.lock(t.getPlot(),this);this.pxt_(!0);return this}stop(){this.setActive(!1);OS.unlock(this);this.pxt_(!1);return this}pxt_(t){this.pFt_("pointermove",t,Mi);this.pFt_("pointerup",t,Mi);return this}hVt_(){return this.Zqt_}rVt_(t){this.Zqt_=t;return this}};i=t([_s("geotoolkit.widgets.overlays.AnnotationTool")],i);return i}();var z0=Ci({rHi_:"CreateAnnotation",oHi_:"RemoveAnnotation",lHi_:"EditAnnotation",uHi_:"ChangeActiveAnnotation",aHi_:"AnnotationRemoving",gHi_:"AnnotationRemoved",cHi_:"AnnotationAdding",IHi_:"AnnotationAdded",xKi_:"AnnotationEditing",LKi_:"AnnotationEdited",fHi_:"ActiveAnnotationChanging",CHi_:"ActiveAnnotationChanged"},2,"eyJDcmVhdGVBbm5vdGF0aW9uIjoickhpXyIsIlJlbW92ZUFubm90YXRpb24iOiJvSGlfIiwiRWRpdEFubm90YXRpb24iOiJsSGlfIiwiQ2hhbmdlQWN0aXZlQW5ub3RhdGlvbiI6InVIaV8iLCJBbm5vdGF0aW9uUmVtb3ZpbmciOiJhSGlfIiwiQW5ub3RhdGlvblJlbW92ZWQiOiJnSGlfIiwiQW5ub3RhdGlvbkFkZGluZyI6ImNIaV8iLCJBbm5vdGF0aW9uQWRkZWQiOiJJSGlfIiwiQW5ub3RhdGlvbkVkaXRpbmciOiJ4S2lfIiwiQW5ub3RhdGlvbkVkaXRlZCI6IkxLaV8iLCJBY3RpdmVBbm5vdGF0aW9uQ2hhbmdpbmciOiJmSGlfIiwiQWN0aXZlQW5ub3RhdGlvbkNoYW5nZWQiOiJDSGlfIn0g");const X0=new xA(150,50),j0=new gu(-10,-10);U0.Ai_().AKi_("simple-arrow",F0);U0.Ai_().AKi_("rectangle-callouts",x0);var Z0=Ci(function(){let i=class t extends b0{constructor(t,i){super(t);this.dHi_=null;this.$K_=fg.ax_;this.y8_=null;this.BHi_=null;this.Jgt_=null;this.wHi_=null;this.QHi_=null;i=qi(i,{overlay:null,cancreate:!0,candelete:!0,canedit:!0,canmove:!0});this.EHi_=i["overlay"];this.pHi_=null;this.mHi_=null;this.initialize(i);this.setOptions(i);this.yHi_=()=>{this.DHi_()};this.LM_().on(rh.oC_,this.yHi_);Mi.addEventListener("resize",this.yHi_)}K3_(){return this.QHi_}XKi_(){return this.K3_()!=null?this.K3_().XKi_():null}MHi_(t){t===z0.rHi_&&ki("AnnotationOverlay.Events.CreateAnnotation is deprecated since 2023 (4.0). "+"Use AnnotationOverlay.Events.AnnotationAdding + AnnotationAdded instead");t===z0.oHi_&&ki("AnnotationOverlay.Events.RemoveAnnotation is deprecated since 2023 (4.0). "+"Use AnnotationOverlay.Events.AnnotationRemoving + AnnotationRemoved instead");t===z0.lHi_&&ki("AnnotationOverlay.Events.EditAnnotation is deprecated since 2023 (4.0). "+"Use AnnotationOverlay.Events.AnnotationEditing + AnnotationEdited instead");t===z0.uHi_&&ki("AnnotationOverlay.Events.ChangeActiveAnnotation is deprecated since 2023 (4.0). "+"Use AnnotationOverlay.Events.ActiveAnnotationChanging + ActiveAnnotationChanged instead");return this}on(t,i){this.MHi_(t);return super.on(t,i)}off(t,i){this.MHi_(t);return super.off(t,i)}notify(t,i,s){this.MHi_(t);return super.notify(t,i,s)}dispose(){if(!this.Df_()){this.LM_().off(rh.oC_,this.yHi_);Mi.removeEventListener("resize",this.yHi_);this.wHi_!=null&&this.wHi_.dispose();if(this.BHi_!=null){this.BHi_.off(rh.eC_,this.pHi_);this.BHi_.off(rh.AC_,this.mHi_);this.BHi_.dispose();this.BHi_=null}this.y8_!=null&&this.y8_.dispose();super.dispose()}}initialize(t){this.EHi_==null&&(this.EHi_=ur(this.yei_()).Gw_((function(t){return t instanceof TQ})).Gw_((function(t){return t.dn_()==="overlays"})).xw_());this.EHi_.GY_([this.y8_=new TQ({name:"overlay-annotations"}).GY_([this.BHi_=new TQ({name:"overlay-annotation-shapes"})])]);const i=function(t){return t.filter((t=>t instanceof q0)).map((t=>t.v4_()))};this.pHi_=(t,s,e)=>{const A=new k0(null,null);if(e instanceof q0){A.ZTi_(e.v4_());this.notify(z0.IHi_,this,A)}else{const t=i(e.toArray());t.length>0&&t.forEach((t=>{A.ZTi_(t);this.notify(z0.IHi_,this,A)}))}};this.mHi_=(t,s,e)=>{const A=new k0(null,null);if(e instanceof q0){this._Ki_()===e.v4_()&&this.vHi_(null);A.ZTi_(e.v4_());this.notify(z0.gHi_,this,A)}else{const t=i(e.toArray());t.length>0&&t.forEach((t=>{this._Ki_()===t&&this.vHi_(null);A.ZTi_(t);this.notify(z0.gHi_,this,A)}))}};this.BHi_.on(rh.eC_,this.pHi_);this.BHi_.on(rh.AC_,this.mHi_);this.A4t_(t)}sHi_(){return this.dHi_}LM_(){return this.yei_().LM_()}HKi_(){return this.y8_}Yb_(t,i){this.y8_.Yb_(t,i);return this}Yv_(){return this.y8_.Yv_()}A4t_(t){this.yei_().C5_("overlay").add([this.wHi_=new lG(this.y8_).Kv_(!0).add([this.QHi_=new W0(this).Kv_(!1).on(O0.kKi_,((t,i,s)=>{this.Ef_(z0.uHi_)&&this.notify(z0.uHi_,this,s);this.notify(z0.fHi_,this,s)})).on(O0.FKi_,((t,i,s)=>{this.notify(z0.CHi_,this,s)})).on(O0.xKi_,((t,i,s)=>{this.notify(z0.xKi_,this,s)})).on(O0.LKi_,((t,i,s)=>{this.hasEventListener(z0.lHi_)&&this.notify(z0.lHi_,this,s);this.notify(z0.LKi_,this,s)}))])])}DHi_(){ur(this.BHi_).Gw_((function(t){return t instanceof q0})).select((function(t){t.vW_()}))}Jkt_(t){super.Jkt_(t);this.y8_.nf_(this.$C_());this.QHi_.Kv_(this.kyi_());return this}bHi_(t){return t==null?null:ur(this.BHi_).Gw_((function(t){return t instanceof q0})).Gw_((function(i){return i.v4_()===t})).xw_()}setOptions(t){this.UU_=qi(t,this.UU_);this.dHi_=t["highlight"]!=null?t["highlight"]["cssclass"]:null;this.QHi_.setOptions(this.UU_);return this}JV_(){return this.UU_}hHi_(t){if(t===null)throw new Error("annotation can not be null");if(this.UU_["cancreate"]!==!0)return null;let i=null;if(!ys(t,N0)){i=qi(t["options"],{frame:X0.clone(),offset:new lA(j0.getX()-X0.Ie_()/2,j0.getY()-X0.Ts_()/2)});t["options"]=i}if(this.mf_()===!1){const i=new k0(t,null);this.notify(z0.cHi_,this,i);this.hasEventListener(z0.rHi_)&&this.notify(z0.rHi_,this,i);if(i.qE_())return null}if(ys(t,N0)&&this.bHi_(t)!=null)throw new Error("annotation already exist");t=R0.Wi_(t);this.BHi_.GY_([new q0(t).setOrientation(this.$K_)]);if(ch._C_(this.BHi_)===!1&&this.mf_()===!1){const i=new k0(t,null);this.notify(z0.IHi_,this,i)}return t}s6_(t){this.BHi_.s6_(t);return this}e6_(){return this.BHi_.e6_()}NHi_(t){this.QHi_.WKi_(null);const i=this.BHi_.qY_(),s=this.BHi_._C_(),e=this.BHi_.mf_();if(!t){this.BHi_.yf_(!0);this.BHi_.rd_(!1)}for(let t=i-1;t>=0;t--){const i=this.BHi_.HY_(t);i instanceof q0&&this.BHi_.removeChild(i)}if(!t){this.BHi_.yf_(e);this.BHi_.rd_(s,!1)}return this}SHi_(t){if(this.UU_["candelete"]!==!0)return this;const i=this.bHi_(t);if(i==null)return this;let s=null;if(this.mf_()===!1){s=new k0(i.v4_(),null);this.notify(z0.aHi_,this,s);this.hasEventListener(z0.oHi_)&&this.notify(z0.oHi_,this,s);if(s.qE_())return this}if(this.QHi_._Ki_()===i){this.QHi_.WKi_(null);if(this.QHi_._Ki_()===i)return this}this.BHi_.removeChild(i);if(ch._C_(this.BHi_)===!1&&this.mf_()===!1){const i=new k0(t,null);this.notify(z0.gHi_,this,i)}return this}AHi_(t){if(this.UU_["canedit"]!==!0)return this;if(t==null&&this.QHi_.KXt_()===!1)return this;const i=this.bHi_(t);if(t!=null&&i==null)return this;if(this.mf_()===!1){const i=new k0(t,null);this.notify(z0.xKi_,this,i);this.hasEventListener(z0.lHi_)&&this.notify(z0.lHi_,this,i);if(i.qE_())return this}this.QHi_.AHi_(i);return this}GHi_(t){const i=undefined;return this.bHi_(t)==null,this}RHi_(t){const i=[];ur(this.BHi_).Gw_((function(t){return t instanceof q0})).select((function(t){i.push(t.v4_())}));return Au.cN_(i,t)}_Ki_(){const t=this.QHi_._Ki_();return t!=null?t.v4_():null}WKi_(t){if(this._Ki_()===t)return this;let i;if(this.mf_()===!1){i=new k0(t,null);this.notify(z0.fHi_,this,i);this.hasEventListener(z0.uHi_)&&this.notify(z0.uHi_,this,i);if(i.qE_())return this}this.vHi_(t,i);return this}vHi_(t,i){const s=this.bHi_(t);this.QHi_.WKi_(s,!0);if(this.mf_()===!1){i==null?i=new k0(t,null):i.ZTi_(t);i.ZTi_(this._Ki_());this.notify(z0.CHi_,this,i)}return this}tHi_(t){this.BHi_.VY_(t,ac.MY_)}setOrientation(t){if(this.$K_===t)return this;this.$K_=t;ur(this.BHi_).Gw_((function(t){return t instanceof q0})).Fw_().forEach((function(i){i.setOrientation(t)}));return this}static AKi_(t,i){U0.Ai_().AKi_(t,i)}static nt_(t){return U0.Ai_().nt_(t)}};i=t([_s("geotoolkit.widgets.overlays.AnnotationOverlay")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRFZGl0b3JDb250YWluZXIiOiJYS2lfIiwiZ2V0TW9kZWwiOiJMTV8iLCJzZXRDc3MiOiJZYl8iLCJnZXRDc3MiOiJZdl8iLCJvblVwZGF0ZUdlb21ldHJ5IjoiREhpXyIsIm9uU3RhdGVDaGFuZ2VkIjoiSmt0XyIsImdldE9wdGlvbnMiOiJKVl8iLCJhZGRBbm5vdGF0aW9uIjoiaEhpXyIsImNsZWFyQW5ub3RhdGlvbnMiOiJOSGlfIiwicmVtb3ZlQW5ub3RhdGlvbiI6IlNIaV8iLCJlZGl0QW5ub3RhdGlvbiI6IkFIaV8iLCJzY3JvbGxUb0Fubm90YXRpb24iOiJHSGlfIiwiZ2V0QW5ub3RhdGlvbnMiOiJSSGlfIiwiZ2V0QWN0aXZlQW5ub3RhdGlvbiI6Il9LaV8iLCJzZXRBY3RpdmVBbm5vdGF0aW9uIjoiV0tpXyJ9fSwicmVnaXN0ZXJHZW9tZXRyeSI6IkFLaV8iLCJnZXRHZW9tZXRyeSI6Im50XyJ9");var _0=Ci(function(){let i=class t extends kS{constructor(t,i,s){super(t);this._id=i;this.Qi_=s}XC_(){return this._id}getType(){return this.Qi_}};i=t([_s("geotoolkit.widgets.SelectionChangeEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRJZCI6IlhDXyJ9fX0g");var $0=Ci({kHi_:"ItemChanged"},2,"eyJJdGVtQ2hhbmdlZCI6ImtIaV8ifSAg");var t1=function(){var t;return class{constructor(t,i){this.obj=t;this.options=i;this.direction=[];i["vertical"]===!0&&this.direction.push(fg.ax_);i["horizontal"]===!0&&this.direction.push(fg.ux_);this.actions={}}oc_(){return this.direction}JV_(){return this.options}connect(t){if(this.obj instanceof $n)for(const i in this.actions)this.actions.hasOwnProperty(i)&&this.actions[i].connect(this.options["events"],this.obj,t)}disconnect(t){if(this.obj instanceof $n)for(const i in this.actions)this.actions.hasOwnProperty(i)&&this.actions[i].disconnect(this.options["events"],this.obj,t)}Yqt_(t,i){this.actions[t]=i}Uqt_(t){return this.actions[t]}Uw_(){return this.obj}}}();var i1=Ci({FHi_:"visiblerange",xHi_:"scale",LHi_:"model",Jy_:"custom"},2,"eyJWaXNpYmxlUmFuZ2UiOiJGSGlfIiwiU2NhbGUiOiJ4SGlfIiwiTW9kZWwiOiJMSGlfIiwiQ3VzdG9tIjoiSnlfIn0g");var s1=Ci(function(){var t;return class{constructor(t){this.name=t}dn_(){return this.name}connect(t,i,s){if(i instanceof $n)for(let e=0;e<t.length;++e)i.on(t[e],s)}disconnect(t,i,s){if(i instanceof $n)for(let e=0;e<t.length;++e)i.on(t[e],s)}getData(t,i,s){const e=s[this.dn_()];return e&&e["getdata"]?e["getdata"].call(t,t,i):null}setData(t,i,s,e){const A=e[this.dn_()];return A&&A["setdata"]?A["setdata"].call(this,i,t,s):null}}}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROYW1lIjoiZG5fIn19fSAg");const e1="Object cannot be connected. It does not have method to get/set model limits",A1=function(t,i,s,e){const A=t.if_();let n=A!=null?A:new Gn;const h=i.getParent(),r=h.if_();if(r!=null){if(!s){const i=t.lt_(),s=h.lt_();if(i!=null&&s!=null&&i.Ie_()>0&&i.Ts_()>0&&s.Ie_()>0&&s.Ts_()>0&&(e&&(i.Ee_()!==s.Ee_()||i.Ts_()!==s.Ts_())||!e&&(i.we_()!==s.we_()||i.Ie_()!==s.Ie_()))){n=Gn.xI_(i,s);n=Gn.multiply(n,n)}}n=Gn.multiply(r.rI_(),n)}let o=null;const l=i.rt_(),u=i.getBounds();l&&l.Ie_()>0&&l.Ts_()>0&&u&&u.Ie_()>0&&u.Ts_()>0&&(o=Gn.xI_(l,u));o!=null&&(n=Gn.multiply(n,o.rI_()));return n};var n1=function(){let i=class t extends s1{constructor(){super(i1.LHi_)}getData(t,i,s){return{limits:ne(t)?t.rt_():null,source:t}}setData(t,i,s,e){const A=e[this.dn_()];if(!A||!A["setdata"]){const e=t.ut_();let A=1,n=0,h=1,r=0;if(e!=null){A=e.BI_();n=e.EI_();h=e.sI_();r=e.pI_()}const o=t.rt_(),l=i["limits"],u=A1(i["source"],t,!0,s===fg.ax_);if(s===fg.ax_){if(u){h=u.sI_();r=u.pI_()}t.gq_!==void 0&&t.gq_()||t.Lq_(new mA(o.we_(),l.Ee_(),o.Qe_(),l.pe_()))}else if(s===fg.ux_){if(u){A=u.BI_();n=u.EI_()}o.we_()===l.we_()&&o.Qe_()===l.Qe_()||t.gq_!==void 0&&t.gq_()||t.Lq_(new mA(l.we_(),o.Ee_(),l.Qe_(),o.pe_()))}const a=t.ut_();if(a&&a.BI_()===A&&a.sI_()===h)t.translate(n-a.EI_(),r-a.pI_());else{const i=new Gn(A,0,0,h,n,r);t.at_(i)}}}connect(t,i,s){if(typeof i.rt_!="function"||typeof i.Lq_!="function"||!(i instanceof iu))throw new TypeError(e1);super.connect(t,i,(t=>{s.call(i,t,i)}))}disconnect(t,i,s){super.disconnect(t,i,(t=>{s.call(i,t,i)}))}};i=t([_s(null)],i);return i}();var h1=function(){let i=class t extends s1{constructor(){super(i1.FHi_)}getData(t,i,s){let e=super.getData(t,i,s);if(e==null&&he(t)){const A=t.ot_();if(A!=null){const t=i===fg.ux_;e=s["orientation"]===fg.ax_?new fA(t?A.we_():A.Ee_(),t?A.Qe_():A.pe_()):new fA(t?A.Ee_():A.we_(),t?A.pe_():A.Qe_())}}return e}};i=t([_s(null)],i);return i}();var r1=function(){let i=class t extends s1{constructor(){super(i1.xHi_)}getData(t,i,s){let e=super.getData(t,i,s);if(e===null&&oe(t)){e=t.ut_();if(e!=null){const t=i===fg.ux_,A=s["orientation"]===fg.ax_;e=t?new Gn(A?e.BI_():e.sI_(),0,0,1,A?e.EI_():e.pI_(),0):new Gn(1,0,0,A?e.sI_():e.BI_(),0,A?e.pI_():e.EI_())}}return e}};i=t([_s(null)],i);return i}();var o1=function(){let i=class t extends r1{constructor(){super();this.vQ_=new Gn}getData(t,i,s){return super.getData(t.LM_(),i,s)}setData(t,i,s,e){const A=e[this.dn_()];if((!A||!A["setdata"])&&t.LM_()){const e=t.LM_().ut_()?t.LM_().ut_():new Gn;let A=e.BI_(),n=e.EI_(),h=e.sI_(),r=e.pI_();if(s===fg.ax_){h=i.sI_();r=i.pI_()}else if(s===fg.ux_){A=i.BI_();n=i.EI_()}this.vQ_.dI_(A,0,0,h,n,r);t.J4_(this.vQ_)}}connect(t,i,s){super.connect(t,i.LM_(),(t=>{s.call(i,t,i)}))}disconnect(t,i,s){super.disconnect(t,i.LM_(),(t=>{s.call(i,t,i)}))}};i=t([_s(null)],i);return i}();var l1=function(){let i=class t extends h1{getData(t,i,s){let e=super.getData(t.LM_(),i,s);if(e==null&&typeof t.lAi_=="function"){const A=t.lAi_(!!s&&s["ignoremodellimits"]);if(A!=null){const t=i===fg.ux_;e=s["orientation"]===fg.ax_?new fA(t?A.we_():A.Ee_(),t?A.Qe_():A.pe_()):new fA(t?A.Ee_():A.we_(),t?A.pe_():A.Qe_())}}return e}setData(t,i,s,e){const A=e[this.dn_()];if(!A||!A["setdata"]){let e;const A=t.lAi_();if(A!=null){e=s===fg.ax_?new mA(A.we_(),i.Xs_(),A.Qe_(),i.zs_()):new mA(i.Xs_(),A.Ee_(),i.zs_(),A.pe_());t.hAi_(e)}}}connect(t,i,s){super.connect(t,i.LM_(),(t=>{s.call(i,t,i)}))}disconnect(t,i,s){super.disconnect(t,i.LM_(),(t=>{s.call(i,t,i)}))}};i=t([_s(null)],i);return i}();const u1="*",a1=function(t,i){while(i!=null){if(t[i])return t[i];i=es(i)}return null};let g1=null;var c1=Ci(function(){var t=class{constructor(){this.actions={};this.UHi_(new h1);this.UHi_(new r1);this.UHi_(new n1);this.UHi_(new s1(i1.Jy_));this.UHi_(new o1,_H.D_());this.UHi_(new l1,_H.D_())}UHi_(t,i){if(t){const s=t.dn_();this.actions[s]===void 0&&(this.actions[s]={});i===void 0&&(i=u1);this.actions[s][i]=t}}UWt_(t,i){const s=this.actions[t];if(s){const t=a1(s,i);return t||s[u1]}return null}static Ai_(){g1==null&&(g1=new t);return g1}};return t}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJyZWdpc3Rlck9wZXJhdGlvbiI6IlVIaV8iLCJnZXRPcGVyYXRpb24iOiJVV3RfIn19LCJnZXRJbnN0YW5jZSI6IkFpXyJ9");var I1=Ci(function(){let i=class t extends $n{constructor(t){super();this.options=qi(t,{mode:[i1.FHi_],registry:null},!0);this.YHi_=this.options["registry"]?this.options["registry"]:c1.Ai_();this.items=[];this.THi_=!1;this.KHi_=!1}connect(t,i){if(t instanceof $n){const s=qi(i,{sender:!0,receiver:!0,vertical:!1,horizontal:!1,events:[rh.oC_,rh.nC_],orientation:fg.ax_,typename:typeof t.D_=="function"?t.D_():""},!0),e=new t1(t,s),A=this.options["mode"];for(let t=0;t<A.length;++t){const i=this.YHi_.UWt_(A[t],s["typename"]);i&&e.Yqt_(i.dn_(),i)}this.items.push(e);s["sender"]===!0&&e.connect(this.HHi_.bind(this))}return this}send(t,i){if(t){t["vertical"]!==void 0&&this.qHi_(t["vertical"],fg.ax_,i);t["horizontal"]!==void 0&&this.qHi_(t["horizontal"],fg.ux_,i)}}qHi_(t,i,s){if(t){for(let e=0;e<this.items.length;++e)if(this.items[e].oc_().indexOf(i)!==-1){const A=this.items[e].Uqt_(s);A&&A.setData(this.items[e].Uw_(),t,i,this.items[e].JV_())}this.notify($0.kHi_,this,{data:t,action:s,orientation:i})}}yCt_(t,i){if(this.THi_)return this;this.THi_=!0;const s=this.indexOf(t);if(s!==-1){const t=this.items[s],e=t.Uqt_(i);if(e!=null)for(let s=0;s<t.oc_().length;++s){const A=e.getData(t.Uw_(),t.oc_()[s],t.JV_());if(A){for(let e=0;e<this.items.length;++e)if(this.items[e]!==t&&this.items[e].oc_().indexOf(t.oc_()[s])!==-1){const n=this.items[e].Uqt_(i);n&&n.setData(this.items[e].Uw_(),A,t.oc_()[s],this.items[e].JV_())}this.notify($0.kHi_,this,{data:A,action:i,orientation:t.oc_()[s]})}}}this.THi_=!1;return this}JHi_(t){this.KHi_=t;return this}HHi_(t,i){if(this.KHi_)return;this.KHi_=!0;const s=this.options["mode"];for(let t=0;t<s.length;++t)this.yCt_(i,s[t]);this.KHi_=!1}indexOf(t){let i=-1;for(let s=0;s<this.items.length;++s)if(this.items[s].Uw_()===t){i=s;break}return i}disconnect(t){const i=this.indexOf(t);if(i!==-1){this.items[i].JV_()["sender"]===!0&&this.items[i].disconnect(this.HHi_.bind(this));this.items.splice(i,1)}}};i=t([_s("geotoolkit.widgets.sync.ViewSynchronizer")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzeW5jaHJvbml6ZSI6InlDdF8ifX19");var f1=Ci({PHi_:"curvetocurve",VHi_:"curvetoreferenceline",OHi_:"curvetobaseline"},2,"eyJDdXJ2ZVRvQ3VydmUiOiJQSGlfIiwiQ3VydmVUb1JlZmVyZW5jZUxpbmUiOiJWSGlfIiwiQ3VydmVUb0Jhc2VMaW5lIjoiT0hpXyJ9");var C1=Ci({Top:"top",JQ_:"bottom"},2,"eyJCb3R0b20iOiJKUV8ifSAg");const d1=.7,B1=function(t){return t.reduce((function(t,i){return i.length>t?i.length:t}),Number.MIN_VALUE)},w1=function(t,i,s){return(1-s)*t+s*i},Q1=function(t){const i={top:null,bottom:null};let s;for(s in t){const e=t[s];i[s]=e==null?null:{filldirection:e["filldirection"],fillstyle:il.BD_(e["fillstyle"]),filltype:e["filltype"],id1:e["id1"],id2:e["id2"]}}return i},E1=function(t,i){if(t!=null)for(const s in t)if(i.indexOf(s)===-1&&t[s]!=null){t[s]["fillstyle"]instanceof wr&&t[s]["fillstyle"].dispose();delete t[s]}};var p1=function(){let i=class t{constructor(t,i){this.I4t_=t;this.WHi_=t.zHi_();this.UU_=qi(i,{enabled:!1,fillstyles:null});this.XHi_={}}jHi_(){const t=[];for(let i=0;i<this.WHi_.jv_();++i)t.push(this.WHi_.get(i).getData().Ayt_(1).toArray(!0));return t}mCt_(){return this.XHi_}ZHi_(t){for(let i=0;i<this.WHi_.jv_();++i){const s=undefined,e=this.WHi_.get(i)._Hi_()["curve"].XC_();this.XHi_[e]={x:t.x,y:t.y[i]}}return this}$Hi_(){let t,i;const s=[];for(t=0;t<this.WHi_.jv_();++t)s.push(this.WHi_.get(t).getData().Ayt_(0).toArray());const e=B1(s),A=[];for(i=0;i<e;++i)for(t=0;t<s.length;++t)isNaN(s[t][i])||A.indexOf(s[t][i])!==-1||A.push(s[t][i]);A.sort((function(t,i){return t-i}));const n=[],h=this.jHi_();for(t=0;t<h.length;++t){n[t]=[];let e=0;for(i=0;i<A.length;++i){n[t][i]=h[t][s[t].indexOf(A[i])];if(n[t][i]!=null){if(e<i){const s=undefined;if(i-e>1)for(let s=e+1;s<i;++s){const h=(A[s]-A[e])/(A[i]-A[e]);n[t][s]=w1(n[t][e],n[t][i],h)}}e=i}}}return{x:A,y:n}}tqi_(t){const i=t.map((t=>this.I4t_.iqi_(t))),s=this.sqi_(i),e=i.some((function(t){return t.eqi_()["neatlimits"]})),A=i.some((function(t){return t.eqi_()["neatlimitscenteredonzero"]}));let n=new fA(s.Ee_(),s.pe_());e===!0&&(n=NA.iA_(s.Ee_(),s.pe_(),!1,A));i.forEach((t=>{this.I4t_.Aqi_(t,{min:n.Xs_(),max:n.zs_(),autoscale:!1})}));return this}nqi_(t){const i=t.map((t=>this.I4t_.iqi_(t).cft_()));if(this.UU_["enabled"]===!0)for(let s=1;s<t.length;++s){const e=t[s],A=this.I4t_.iqi_(e);i[s].ce_(A.rqi_().hqi_)}return i}oqi_(t){const i=undefined;if(this.nqi_(t).length===0)return this;if(this.WHi_.jv_()===0)return this;t.forEach((t=>{const i=this.I4t_.iqi_(t);this.I4t_.Aqi_(i,{min:i.rqi_().min,max:i.rqi_().max,autoscale:i.rqi_().lqi_},!1)}));return this}uqi_(t){this.UU_["fillstyles"]==null&&(this.UU_["fillstyles"]={});if(this.UU_["fillstyles"][t]==null){let i=hl.Wi_(this.I4t_.aqi_(t)["linestyle"]).getColor();i=nA.Wi_(i).setAlpha(d1);this.UU_["fillstyles"][t]=i}return this}gqi_(t,i){E1(this.UU_["fillstyles"],t);for(let s=0;s<t.length;++s){const e=t[s],A=this.I4t_.iqi_(e),n=A.rqi_().hqi_;A.setData(new Pb(new qb({cols:[{type:"number",data:i.x},{type:"number",data:i.y[s]}]})));A.rqi_().hqi_=n;const h=t[s-1],r=Q1(A._Hi_()["fillstyles"]);this.uqi_(e);this.I4t_.cqi_(e,h,il.BD_(this.UU_["fillstyles"][e]),h!=null?f1.PHi_:f1.OHi_,C1.JQ_);A.rqi_().Pbt_=r}return this}Iqi_(t){const i=this.I4t_.iqi_(t).rqi_();for(const s in i["fillstyles"]){const e=i["fillstyles"][s];e!=null?this.I4t_.cqi_(e["id1"],e["id2"],e["fillstyle"],e["filltype"],s):this.I4t_.fqi_(t,s)}return this}kh_(){const t=this.I4t_.Cqi_();this.oqi_(t);t.forEach((t=>{const i=undefined;this.I4t_.iqi_(t).setData(new Pb(new qb({cols:[{type:"number",data:this.XHi_[t]["x"]},{type:"number",data:this.XHi_[t]["y"]}]})));this.Iqi_(t)}));return this}apply(){if(this.WHi_.jv_()===0)return this;const t=this.$Hi_();this.ZHi_(t);const i=this.I4t_.Cqi_();this.gqi_(i,this.dqi_(t));this.tqi_(i);return this}};i=t([_s("geotoolkit.widgets.timeseries.AbstractDataProcessor")],i);return i}();var m1=Ci({Bqi_:"axispositionchanged",wqi_:"legenditemchanged",Qqi_:"curveaxischanged",Eqi_:"dataset",pqi_:"limitsupdated",mqi_:"legendvaluechanged"},2,"eyJBeGlzUG9zaXRpb25DaGFuZ2VkIjoiQnFpXyIsIkxlZ2VuZEl0ZW1DaGFuZ2VkIjoid3FpXyIsIkN1cnZlQXhpc0NoYW5nZWQiOiJRcWlfIiwiRGF0YVNldCI6IkVxaV8iLCJMaW1pdHNVcGRhdGVkIjoicHFpXyIsIkxlZ2VuZFZhbHVlQ2hhbmdlZCI6Im1xaV8ifSAg");const y1=new qa({font:"12px Arial",color:"black"}),D1=new hl({color:"black",width:1,pixelsnapmode:{x:!0,y:!0}}),M1=new wr({color:"transparent"}),v1=new wr({color:"transparent"});var b1=Ci(function(){let i=class t extends su{constructor(t){t==null&&(t={});super(t=qi(t,{id:"",point:new lA(0,0),label:"",symbol:null,linestyle:t["linestyle"]!=null?t["linestyle"]:D1.clone(),textbackground:t["textbackground"]!=null?t["textbackground"]:M1.clone(),fillstyle:t["fillstyle"]!=null?t["fillstyle"]:v1.clone(),textstyle:t["textstyle"]!=null?t["textstyle"]:y1.clone(),symbolsize:10,timeseriesobject:null},!0));this.UU_=t;this._jt_=null;this.DIt_=null;this.yqi_=null;this.Dqi_(this.UU_["timeseriesobject"]);this.Mqi_();this.vqi_()}Mqi_(){this._jt_=new YC({sizeisindevicespace:!0});this._jt_.PX_(NC.sX_);this._jt_.SE_(dA.le_)}vqi_(){if(this.UU_["symbol"]!=null){this.DIt_=new ma({sizeisindevicespace:!0,painter:this.UU_["symbol"]});this.DIt_.SE_(dA.ne_)}}bqi_(){this.yqi_==null&&(this.yqi_=()=>{if(this.Nqi_==null)return;const t=this.Nqi_._Hi_();if(t.curve==null||t.curve.getData()==null)return;let i=this.UU_["point"].getX();const s=undefined,e=t.curve.getData(),A=e.Ayt_(0).toArray(),n=e.Ayt_(1).toArray(),h=A.indexOf(i);let r=n[h];i=A[h];const o=t.Sqi_.rt_();r=t.Sqi_.jY_()?(r-o.Ee_())/o.Ts_():(o.pe_()-r)/o.Ts_();this.setOptions({point:new lA(i,r)})});return this.yqi_}update(){const t=this.UU_["point"],i=this.if_();let s=.01;const e=this.UU_["linestyle"]!=null?this.UU_["linestyle"].Ie_():1;i!=null&&(s=i.cI_(new xA(0,5+e)).Ts_());let A=dA.le_;if(t.getY()>.1){A=dA.re_;s*=-1}this.DIt_==null&&this.UU_["symbol"]!=null&&this.vqi_();if(this.DIt_!=null&&this.UU_["symbol"]!=null){this.DIt_.gR_(t.clone());this.DIt_.rk_(this.UU_["symbol"]);this.DIt_.rB_(this.UU_["linestyle"]);this.DIt_.iQ_(this.UU_["fillstyle"]);this.DIt_.setSize(this.UU_["symbolsize"],this.UU_["symbolsize"])}else this.DIt_=null;this._jt_==null&&this.UU_["label"]!==""&&this.Mqi_();if(this._jt_!=null&&this.UU_["label"]!==""){this._jt_.a_(this.UU_["label"]);this._jt_.gR_(t.clone().setY(t.getY()+s));this._jt_.g_(this.UU_["textstyle"]);this._jt_.iQ_(this.UU_["textbackground"]);this._jt_.SE_(A)}else this._jt_=null;return this}Dqi_(t){this.Nqi_!=null&&this.Nqi_.off(m1.pqi_,this.bqi_());this.Nqi_=t;this.Nqi_!=null&&this.Nqi_.on(m1.pqi_,this.bqi_());return this}setOptions(t){if(t==null)return this;this.UU_=qi(t,this.UU_);t["timeseriesobject"]!=null&&this.Dqi_(t["timeseriesobject"]);this.update();return this}JV_(){return this.UU_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["point"]!==void 0&&(this.UU_["point"]=t["point"]);t["label"]!==void 0&&(this.UU_["label"]=t["label"]);t["textstyle"]!==void 0&&(this.UU_["textstyle"]=t["textstyle"]);t["textbackground"]!==void 0&&(this.UU_["textbackground"]=t["textbackground"]);t["symbol"]!==void 0&&(this.UU_["symbol"]=t["symbol"]);t["linestyle"]!==void 0&&(this.UU_["linestyle"]=t["linestyle"]);t["fillstyle"]!==void 0&&(this.UU_["fillstyle"]=t["fillstyle"]);t["symbolsize"]!==void 0&&(this.UU_["symbolsize"]=t["symbolsize"]);t["timeseriesobject"]!==void 0&&this.Dqi_(t["timeseriesobject"]);this.update();return this}N_(){const t=super.N_();t["point"]=this.UU_["point"];t["label"]=this.UU_["label"];t["textstyle"]=this.UU_["textstyle"];t["textbackground"]=this.UU_["textbackground"];t["symbol"]=this.UU_["symbol"];t["linestyle"]=this.UU_["linestyle"];t["fillstyle"]=this.UU_["fillstyle"];t["symbolsize"]=this.UU_["symbolsize"];t["timeseriesobject"]=this.UU_["timeseriesobject"];return t}render(t){this.DIt_!=null&&this.DIt_.render(t);this._jt_!=null&&this._jt_.render(t)}dispose(){this.Nqi_!=null&&this.Nqi_.off(m1.pqi_,this.bqi_());super.dispose()}};i=t([_s("geotoolkit.widgets.timeseries.Annotation")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const N1=new qa({font:"12px Arial",color:"black"}),S1=new hl({color:"black",width:1,pixelsnapmode:{x:!0,y:!0}}),G1=new wr({color:"transparent"});var R1=Ci(function(){let i=class t extends su{constructor(t){t==null&&(t={});super(t=qi(t,{id:"",point:new lA(0,0),text:"",textvisible:!0,linevisible:!0,linestyle:S1,fillstyle:G1,textstyle:N1,alignment:dA.le_,angle:0}));this.UU_=t;this._jt_=null;this.Gqi_=null;this.initialize()}setOptions(t){if(t==null)return this;this.UU_=qi(t,this.UU_);this.update();return this}JV_(){return this.UU_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["point"]!==void 0&&(this.UU_["point"]=t["point"]);t["text"]!==void 0&&(this.UU_["text"]=t["text"]);t["textvisible"]!==void 0&&(this.UU_["textvisible"]=t["textvisible"]);t["linevisible"]!==void 0&&(this.UU_["linevisible"]=t["linevisible"]);t["textstyle"]!==void 0&&(this.UU_["textstyle"]=t["textstyle"]);t["linestyle"]!==void 0&&(this.UU_["linestyle"]=t["linestyle"]);t["fillstyle"]!==void 0&&(this.UU_["fillstyle"]=t["fillstyle"]);t["alignment"]!==void 0&&(this.UU_["alignment"]=t["alignment"]);t["angle"]!==void 0&&(this.UU_["angle"]=t["angle"]);this.update();return this}N_(){const t=super.N_();t["point"]=this.UU_["point"];t["text"]=this.UU_["text"];t["textvisible"]=this.UU_["textvisible"];t["linevisible"]=this.UU_["linevisible"];t["textstyle"]=this.UU_["textstyle"];t["linestyle"]=this.UU_["linestyle"];t["fillstyle"]=this.UU_["fillstyle"];t["alignment"]=this.UU_["alignment"];t["angle"]=this.UU_["angle"];return t}initialize(){const t=this.UU_["point"];this._jt_=new YC({text:this.UU_["text"],ax:t.getX(),ay:t.getY(),fillstyle:this.UU_["fillstyle"],textstyle:this.UU_["textstyle"],alignment:this.UU_["alignment"]}).nf_(this.UU_["textvisible"]);this._jt_.at_(Gn.FI_(this.UU_["angle"],this._jt_.uR_(),this._jt_.aR_()));this.Gqi_=new Rd({from:new lA(t.getX(),0),to:new lA(t.getX(),1),linestyle:this.UU_["linestyle"]}).nf_(this.UU_["linevisible"]).HC_("annotation")}update(){const t=this.UU_["point"];if(this._jt_!=null){this._jt_.a_(this.UU_["text"]);this._jt_.$I_(t.getX());this._jt_.tf_(t.getY());this._jt_.SE_(this.UU_["alignment"]);this._jt_.g_(this.UU_["textstyle"]);this._jt_.iQ_(this.UU_["fillstyle"]);this._jt_.at_(Gn.FI_(this.UU_["angle"],this._jt_.uR_(),this._jt_.aR_()));this._jt_.nf_(this.UU_["textvisible"])}if(this.Gqi_!=null){this.Gqi_.zA_({from:new lA(t.getX(),0),to:new lA(t.getX(),1)});this.Gqi_.rB_(this.UU_["linestyle"]);this.Gqi_.nf_(this.UU_["linevisible"])}}render(t){this.Gqi_&&this.UU_["linevisible"]&&this.Gqi_.render(t);this._jt_&&this.UU_["textvisible"]&&this._jt_.render(t)}};i=t([_s("geotoolkit.widgets.timeseries.AnnotationLine")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var k1=Ci(function(){let i=class t{constructor(t){t=Es(t);this.Rqi_(t)}Rqi_(t){t=qi(t,{datapointindex:this.kqi_,lineindex:this.Fqi_,barleft:this.xqi_,barbottom:this.Lqi_,barheight:this.Uqi_,barwidth:this.uft_,barvalue:this.Yqi_,text:this._q_,textax:this.Tqi_,textay:this.Kqi_,textwidth:this.Hqi_,textheight:this.qqi_},!0,!0);this.kqi_=t["datapointindex"];this.Fqi_=t["lineindex"];this.xqi_=t["barleft"];this.Lqi_=t["barbottom"];this.Uqi_=t["barheight"];this.uft_=t["barwidth"];this.Yqi_=t["barvalue"];this._q_=t["text"];this.Tqi_=t["textax"];this.Kqi_=t["textay"];this.Hqi_=t["textwidth"];this.qqi_=t["textheight"];return this}Jqi_(){return{datapointindex:this.kqi_,lineindex:this.Fqi_,barleft:this.xqi_,barbottom:this.Lqi_,barheight:this.Uqi_,barwidth:this.uft_,barvalue:this.Yqi_,text:this._q_,textax:this.Tqi_,textay:this.Kqi_,textwidth:this.Hqi_,textheight:this.qqi_}}vh_(t){const i=t.Jqi_();return this.kqi_===i["datapointindex"]&&this.Fqi_===i["lineindex"]&&this.Uqi_===i["barheight"]&&this.uft_===i["barwidth"]&&this.Yqi_===i["barvalue"]}};i=t([_s("geotoolkit.widgets.timeseries.barmode.BarSeries")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRCYXJTZXJpZXMiOiJKcWlfIiwiY29tcGFyZVRvIjoidmhfIn19LCJnZXRDbGFzc05hbWUiOiJEXyJ9");var F1=Ci({Pqi_:"micropositionChanged"},2,"eyJtaWNyb3Bvc2l0aW9uQ2hhbmdlZCI6IlBxaV8ifSAg"),x1=Ci(function(){let i=class t extends su{constructor(t){super(t);this.bf_=null;this.rq_=null;this.nq_=null;this.rQ_=null;this.Vqi_={top:1,bottom:0}}getBounds(){return this.bf_}pc_(){const t=this.getBounds();if(t==null)return this;this.bf_=new mA(t.we_(),this.Vqi_["bottom"],t.Qe_(),this.Vqi_["top"]);this.rq_=null;this.Ad_();return this}It_(){if(this.rq_!=null)return this.rq_;const t=this.getBounds();if(t==null)return null;const i=new mA(t.we_(),0,t.Qe_(),1);t.isEmpty()||i.isEmpty()||(this.rq_=Gn.xI_(i,t,!1,!1,!1));return this.rq_}sd_(){const t=this.ut_(),i=this.It_();return i==null?t:t==null?i:Gn.multiply(t,i)}Oqi_(t,i){let s,e;if(t>=0&&t<=1&&i>=0&&i<=1){e=Math.min(t,i);s=Math.max(t,i)}else{e=0;s=1}if(this.Vqi_["top"]!==s||this.Vqi_["bottom"]!==e){this.Vqi_["top"]=s;this.Vqi_["bottom"]=e;this.notify(F1.Pqi_,this)}this.vn_();return this}Wqi_(){return{top:this.Vqi_["top"],bottom:this.Vqi_["bottom"]}}lQi_(t,i){if(this.nq_===t)return this;this.nq_=hl.jD_(this,this.nq_,t,i,this.oQ_());this.vn_().td_(this.getBounds());return this}uQi_(){return this.nq_}oQ_(){this.rQ_===null&&(this.rQ_=()=>this.zf_());return this.rQ_}render(t){const i=t.uS_(new Gn),s=this.getBounds();if(s!=null&&this.nq_!=null){i.iQ_(null);i.rB_(this.nq_,s);i.pR_(s)}}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesShape")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVCb3VuZHMiOiJwY18iLCJnZXRDb250ZW50c1RyYW5zZm9ybSI6Ikl0XyIsImdldFdvcmxkVHJhbnNmb3JtIjoic2RfIiwic2V0TWljcm9Qb3NpdGlvbiI6Ik9xaV8iLCJnZXRNaWNyb1Bvc2l0aW9uIjoiV3FpXyIsInNldEJvcmRlckxpbmVTdHlsZSI6ImxRaV8iLCJnZXRCb3JkZXJMaW5lU3R5bGUiOiJ1UWlfIiwiZ2V0SW52YWxpZGF0ZU1ldGhvZCI6Im9RXyJ9fX0g");const L1="#6b6b6b",U1={maximumfractiondigits:2,round:!0};var Y1=function(){var i;let s=i=class t{static zqi_(){return{curveaxis:{visible:!1,compact:!1,position:"right",autolabelrotation:!1,autocoloraxis:!0,autocolorlabel:!0,titlevisible:!0,textcolor:L1,axiscolor:L1,axiswidth:40,textwidth:20,font:"10px Arial",axisvisible:!0,titlerotateangle:-Math.PI/2,tickgeneratoroptions:{edge:{tickvisible:!0,labelvisible:!0},major:{tickvisible:!1,labelvisible:!1},minor:{tickvisible:!1,labelvisible:!1}}}}}static Xqi_(){return Pi({id:null,name:"",curve:{data:null,properties:{linestyle:{},visible:!0,autoscale:!0,logarithmicscale:!1,min:null,max:null,neatlimits:!1,neatlimitscenteredonzero:!1,spline:!1,unit:"",values:{visible:!1,anchor:dA.se_,offset:7,color:"#757575",font:"12px Roboto",format:new $g,fillstyle:wr.RB_,linestyle:hl.RB_}}},curvesymbol:{visible:!0,width:8,height:8,painter:cE,fillstyle:null},curvelimits:{visible:!0,margin:5,width:60,font:"bold 10px Arial"},legenditem:{formatter:new $g(U1),margintext:2,font:"bold 12px Arial",height:25,internalpadding:4,linestyle:new hl({color:"rgba(128, 128, 128, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:null,autocolorlabel:!0,labelcolor:L1},tooltipitem:{formatter:new $g(U1),margintext:4,font:"12px Arial",textcolor:"black",symbolsize:10,internalpadding:2,externalpadding:5,linestyle:null,fillstyle:null,fixedwidth:null,nanvisibility:!0}},i.zqi_())}static jqi_(){return Pi({id:null,min:0,max:1,curveids:[],curveaxis:{visible:!0},sharelimits:!0},i.zqi_())}static Zqi_(t,i){let s=null,e=0;while(s==null){t.indexOf(i+e.toString())===-1&&(s=i+e.toString());e+=1}return s}static _qi_(t){let i;switch(t){case"cross":i=IE;break;case"diamond":i=fE;break;case"plus":i=$E;break;case"square":i=tp;break;case"star":i=sp;break;case"triangle":i=da;break;default:i=cE;break}return i}static Hni_(t,s,e){const A=t.Ayt_(i.$qi_),n=t.Ayt_(i.tJi_),h=A.toArray(),r=n.toArray(),o=[],l=[],u=e-s;for(let t=0;t<A.getLength();t++){l.push((r[t]-s)/u);o.push(new Yq(h[t],l[t],0,!0,t).Qhi_(r[t]))}return{samples:o,iJi_:l,D9_:h,values:r}}static findIndex(t,i,s){let e=0;const A=s-1;if(A>=0){let s,n=A;while(e<=n){s=e+n>>1;if(Math.abs(t[s].getPosition()-i)<=1e-10)return s;t[s].getPosition()<i?e=s+1:n=s-1}}return~e}static Pni_(t,s,e){const A=t.length>0&&t[t.length-1].getPosition()<t[0].getPosition();A&&t.reverse();let n=i.findIndex(t,s,t.length);n<0&&(n=~n);n>0&&n--;let h=i.findIndex(t,e,t.length);if(h<0){h=~h;h>=t.length&&(h=t.length-1)}h<t.length&&h++;if(A){t.reverse();return new fA(n,h)}return new fA(n,h)}static sJi_(t,i,s){s==null&&(s=!1);let e,A;if(isNaN(t))return null;let n=NA.findIndex(t,i,0,i.length-1,((t,i)=>Math.abs(t.getPosition()-i)<NA.Je_?0:t.getPosition()<i?-1:+1));if(n<0){n=~n;A=n;if(s===!1)while(A<i.length&&isNaN(i[A].getValue()))++A;e=n-1;if(s===!1)while(e>=0&&isNaN(i[e].getValue()))--e;n=e>=0&&A<i.length?i[e].getPosition()+i[A].getPosition()>2*t?e:A:e<0&&A<i.length?A:e>=0&&A>=i.length?e:0}return n}};s.$qi_=0;s.tJi_=1;s=i=t([_s("geotoolkit.widgets.timeseries.Util")],s);return s}();var T1=Ci(function(){let i=class t extends sI{constructor(t){super(t);this.eJi_=null;this.AJi_={top:1,bottom:0}}ht_(t){super.ht_(t);this.pc_();return this}pc_(){this.eJi_=null;this.Ad_();return this}nJi_(t){if(!t)return null;const i=this.AJi_["top"],s=this.AJi_["bottom"],e=t.we_(),A=t.Qe_(),n=t.Ee_(),h=t.pe_();return new mA(e,n+(h-n)*s,A,n+(h-n)*i)}It_(){const t=super.It_();if(this.eJi_!==null)return this.eJi_;const i=this.getBounds();if(i==null)return null;const s=this.nJi_(i);if(s!==null&&!s.isEmpty()&&!i.isEmpty()){const e=Gn.xI_(i,s,!1,!1,!1);this.eJi_=t===null?e:Gn.multiply(e,t)}return this.eJi_}Oqi_(t,i){let s,e;if(t>=0&&t<=1&&i>=0&&i<=1){e=Math.min(t,i);s=Math.max(t,i)}else{e=0;s=1}if(this.AJi_["top"]!==s||this.AJi_["bottom"]!==e){this.AJi_["top"]=s;this.AJi_["bottom"]=e}this.vn_();return this}vn_(t,i){super.vn_(t,i);this.pc_();return this}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesGroup")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVTdGF0ZSI6InZuXyIsImdldENvbnRlbnRzVHJhbnNmb3JtIjoiSXRfIiwic2V0Qm91bmRzIjoiaHRfIn19fSAg");var K1=Ci({Bqi_:"AxisPositionChanged",hJi_:"AxisUpdated"},2,"eyJBeGlzUG9zaXRpb25DaGFuZ2VkIjoiQnFpXyIsIkF4aXNVcGRhdGVkIjoiaEppXyJ9");const H1="curveaxisgroup",q1=-1;var J1=Ci(function(){let i=class t extends $n{constructor(t){super();this.rJi_=null;this.oJi_=null;this.Fwt_=null;this.lJi_=null;this.JLt_=null;this.uJi_=null;this._id=null;this.ov_=null;this.aJi_=!1;this.initialize(t)}initialize(t){if(t==null||t["id"]==null)throw new Error("TimeSeriesObject requires a unique id for initialization");t=Pi(t,{});this.UU_=Pi(t,this.UU_);this._id=this.UU_["id"];this.ov_=this.UU_["name"];this.Fwt_=(new nd).JC_(this._id);this.JLt_=(new T1).JC_(H1).Lq_(new mA(0,0,1,1)).GY_(this.Fwt_);const i=isFinite(this.UU_["curveaxis"]["titlerotateangle"])?this.UU_["curveaxis"]["titlerotateangle"]:q1*Math.PI/2;this.uJi_=(new T1).JC_(H1).Lq_(new mA(0,0,1,1)).GY_([this.lJi_=new YC({ax:.5,ay:.5,alignment:dA.ne_}).PX_(NC.sX_).rotate(i,.5,.5).JC_(this._id)]);this.RTi_(this.UU_["curveaxis"]);return this}XC_(){return this._id}dn_(){return this.ov_}HC_(t){this.ov_=t}_Hi_(){return{id:this._id,name:this.ov_,axis:this.Fwt_,gJi_:this.lJi_,cJi_:this.JLt_,IJi_:this.uJi_,fJi_:this.UU_["curveaxis"]["position"]}}_1t_(){return this.Fwt_}GYi_(){return this.UU_["curveaxis"]}RTi_(t){t==null&&(t={});const i=this.UU_["curveaxis"]["position"],s=this.UU_["curveaxis"]["axiswidth"];if(t!==this.UU_["curveaxis"]){t=Pi(t,{});this.UU_["curveaxis"]=Pi(t,this.UU_["curveaxis"])}const e=this.UU_["curveaxis"],A=this.Fwt_,n=this.rJi_,h=this.lJi_,r=this.JLt_,o=this.uJi_;if(A==null)return this;let l=e["textcolor"];n!=null&&(l=e["autocolorlabel"]===!0&&n.gt_()!=null?n.gt_().getColor():e["textcolor"]);const u=r.$C_();let a=e["position"]==="left"?dA.oe_:dA.he_,g=null;if(e["title"]!=null){e["title"]["anchor"]!=null&&(a=e["title"]["anchor"]);e["title"]["offset"]!=null&&(g=e["title"]["offset"])}A.B__(e["compact"]===!0&&e["titlevisible"]).p__(new qa({font:e["font"],color:l})).C__(a).m__(g);if(e["position"]==="left"){A.KZ_(Dr.X_);h.dt_({textstyle:new qa({font:e["font"],color:l}),alignment:dA.ne_}).nf_(e["titlevisible"])}else{A.KZ_(Dr.z_);h.dt_({textstyle:new qa({font:e["font"],color:l}),alignment:dA.ne_}).nf_(e["titlevisible"])}A.LE_(e["position"]==="left"?yr.X_:yr.z_);A.Y__(e["autolabelrotation"]);A.nf_(e["axisvisible"]);let c=e["textcolor"];n!=null&&(c=e["autocoloraxis"]===!0&&n.gt_()!=null?n.gt_().getColor():e["axiscolor"]);e["baselinestyle"]?e["baselinestyle"]instanceof hl?A.VZ_().dt_(e["baselinestyle"].N_()):A.VZ_().dt_(e["baselinestyle"]):A.VZ_().setColor(c);h.FE_().setColor(l);A.rt_()!=null&&A.Lq_(A.rt_().clone().de_(e["axiswidth"]));r.Cq_(e["axiswidth"]);o.Cq_(e["textwidth"]);let I=A.ZZ_(),f=I?A.TE_():null;if(e["tickgenerator"]instanceof Qg)I=e["tickgenerator"];else{const t=undefined;if(this.aJi_!==e["logarithmicscale"]){const t=A.ZZ_();this.aJi_=e["logarithmicscale"];if(e["logarithmicscale"]){I=new fd;f=null}else I=new JC;const i=t.N_();I.dt_(i)}}A.jZ_(I);I=A.ZZ_();const C=e["autocoloraxis"]===!0&&n!=null&&n.gt_()!=null?n.gt_().getColor():e["axiscolor"],d=l;I.Mx_().forEach((function(t){I.Vx_(t)!=null&&I.Vx_(t).setColor(C);I.Rx_(t)!=null&&I.Rx_(t).setColor(d);if(e["tickgeneratoroptions"]!=null&&e["tickgeneratoroptions"]["format"]!==void 0){const i=e["tickgeneratoroptions"]["format"];i instanceof _a?I.wY_(t,i):typeof i=="function"&&I.Yx_(i)}}));let B=e["tickgeneratoroptions"];if(f&&f.Oj_()&&f._j_()){B=Pi(B,{});B["edge"]={tickvisible:!1,labelvisible:!1}}I.dt_(B);const w=e["axisautolabelrotation"]?"auto":e["labelorientation"],Q=A.ZZ_(),E=Q.Mx_();if(w==="auto"){A.Y__(!0);A.U__(q1*Math.PI/2)}else if(w===fg.ux_){A.Y__(!1);E.forEach((function(t){Q.Wx_(t,0)}))}else if(w===fg.ax_){A.Y__(!1);E.forEach((function(t){Q.Wx_(t,q1*Math.PI/2)}))}else if(NA.Ve_(w)||typeof w=="number"){A.Y__(!1);E.forEach((t=>{Q.Wx_(t,w)}))}const p=this.oJi_==null&&this.UU_["curveaxis"]["visible"];r.nf_(p);const m=o.$C_();o.nf_(e["compact"]===!1&&e["titlevisible"]&&e["visible"]&&p);i!==this.UU_["curveaxis"]["position"]?this.notify(K1.Bqi_,this,{id:this._id,oldposition:i,axisposition:this.UU_["curveaxis"]["position"]}):u===this.UU_["curveaxis"]["visible"]&&s===this.UU_["curveaxis"]["axiswidth"]&&m===o.$C_()||this.notify(K1.hJi_,this,this);if(e["microposition"]!==void 0){const t={top:e["microposition"]["top"]!==void 0?e["microposition"]["top"]:1,bottom:e["microposition"]["bottom"]!==void 0?e["microposition"]["bottom"]:0};this.JLt_.Oqi_(1-t["top"],1-t["bottom"]);this.uJi_.Oqi_(1-t["top"],1-t["bottom"])}return this}dispose(){this.Fwt_!=null&&this.Fwt_.dispose();this.lJi_!=null&&this.lJi_.dispose();this.JLt_!=null&&this.JLt_.dispose();this.uJi_!=null&&this.uJi_.dispose();super.dispose()}wq_(){return $i()}N_(){return{id:this.XC_(),name:this.ov_,curveaxis:this.GYi_()}}dt_(t){t["id"]!==void 0&&(this._id=t["id"]);t["name"]!==void 0&&this.HC_(t["name"]);t["curveaxis"]!==void 0&&this.RTi_(t["curveaxis"]);return this}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesObjectBase")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRJZCI6IlhDXyIsImdldE5hbWUiOiJkbl8iLCJzZXROYW1lIjoiSENfIiwiZ2V0QXhpcyI6Il8xdF8iLCJnZXRBeGlzT3B0aW9ucyI6IkdZaV8iLCJzZXRBeGlzT3B0aW9ucyI6IlJUaV8iLCJ1cGRhdGVMYXlvdXQiOiJ3cV8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const P1=Y1.$qi_,V1=Y1.tJi_;var O1=Ci(function(){var i;let s=i=class t extends Cq{constructor(t,i,s,e){super();this.CJi_=!0;const A=qi(t,{data:t instanceof Pb||t instanceof qb?t:null,scaledsamples:null,minwraplevel:0,maxwraplevel:0,conversion:i,interpolation:s!=null?s:null},!0);this.dJi_=[];this.BJi_=[];this.wJi_=e===!0;this.data=A["data"];this.timeStamp=-1;this.QJi_=A["scaledsamples"];this.EJi_=[];this.noi_=A["minwraplevel"];this.hoi_=A["maxwraplevel"];this.dhi_=A["conversion"];this.pJi_=A["interpolation"];this.mJi_=!0;this.roi_=0;this.CJi_=!0}Kni_(t){this.mJi_=!0;this.timeStamp=-1;this.dhi_=t;return this}setInterpolation(t){this.mJi_=!0;this.timeStamp=-1;this.pJi_=t!=null?t:null;return this}gkt_(){return this.data}Wni_(){return this.data.Ayt_(P1).nA_()}zni_(){return this.data.Ayt_(P1).hA_()}Em_(){return this.data.Ayt_(V1).nA_()}pm_(){return this.data.Ayt_(V1).hA_()}Hni_(){this.yJi_();return this.QJi_!=null?this.QJi_:[]}qni_(t){this.yJi_();return this.QJi_!=null?this.QJi_[t]:null}getLength(){this.yJi_();return this.QJi_!=null?this.QJi_.length:0}Jni_(){return this.xct_()===oA.Ds_}xct_(){return this.CJi_?oA.Ds_:this.data.Ayt_(P1).xct_()}DJi_(t){if(this.CJi_===t)return this;let i=!1;t&&this.xct_()!==oA.Ds_&&(i=!0);this.CJi_=t;if(i){this.mJi_=!0;this.timeStamp=-1}return this}MJi_(){return this.CJi_}jni_(t,i){return this.dhi_==null?t:Array.isArray(t)?t.map((t=>this.dhi_.Chi_(t))):this.dhi_.Chi_(t)}Zni_(t){return this.dhi_==null?t:Array.isArray(t)?t.map((t=>this.dhi_.reverse(t))):this.dhi_.reverse(t)}an_(){return this.timeStamp}vJi_(){return this.data.Ayt_(P1).an_()}yJi_(){if(this.vJi_()!==this.timeStamp||!this.QJi_){const t=this.data.Ayt_(P1),i=this.data.Ayt_(V1);let s;if(i==null||t==null||i.getLength()<1||t.getLength()<1){this.QJi_=[];return}this.QJi_==null&&(this.QJi_=[]);const e=this.EJi_.length;let A,n=this.roi_,h,r;if(this.mJi_)for(A=0;A<e;A++){s=i.getValue(A);this.EJi_[A].setPosition(t.getValue(A));this.EJi_[A].setValue(s);this.EJi_[A].Qhi_(s);this.EJi_[A].Mhi_(0);this.EJi_[A].rK_(!0);this.EJi_[A].mhi_(A)}for(A=e;A<t.getLength();A++){s=i.getValue(A);this.EJi_.push(new Yq(t.getValue(A),s,0,!0,A))}e>t.getLength()&&this.EJi_.splice(t.getLength(),e-t.getLength());this.CJi_&&t.xct_()!==oA.Ds_&&(this.EJi_=this.EJi_.sort(((t,i)=>t.getPosition()===i.getPosition()?0:t.getPosition()<i.getPosition()?-1:1)));if(this.pJi_!=null){const t=new iJ(this.EJi_),i=new iJ;let s=this.EJi_.length-n;if(this.mJi_){n=0;s=this.EJi_.length}if(s!==0&&this.pJi_.ihi_(n,s,t,i)){this.roi_=i.ooi_();const t=i.Hni_();if(this.mJi_){this.QJi_=t;this.noi_=i.Vni_();this.hoi_=i.Oni_()}else{for(A=this.QJi_.length-1;A>=0;A--)if(this.QJi_[A].yhi_()===n){n=A;break}s=Math.min(this.QJi_.length,t.length+n);for(A=n;A<s;A++)this.QJi_[A]=t[A-n];if(A<this.QJi_.length)this.QJi_.splice(A,this.QJi_.length-A);else for(A=s-n;A<t.length;A++)this.QJi_.push(t[A]);this.noi_=Math.min(this.noi_,i.Vni_());this.hoi_=Math.max(this.hoi_,i.Oni_())}}}else if(this.mJi_){n=0;this.QJi_=[];for(A=0;A<this.EJi_.length;A++)this.QJi_[A]=this.EJi_[A].clone()}else{n=this.QJi_.length;for(A=this.QJi_.length;A<this.EJi_.length;A++)this.QJi_.push(this.EJi_[A].clone())}if(this.dhi_!=null){n=this.mJi_?0:n;for(A=n;A<this.QJi_.length;++A){s=this.dhi_.Chi_(this.QJi_[A].getValue());this.wJi_&&isNaN(s)&&!isNaN(this.QJi_[A].Ehi_())?this.QJi_[A].setValue(0):this.QJi_[A].setValue(s)}}if(this.mJi_){h=this.BJi_?this.BJi_.length:0;r=this.QJi_.length;this.BJi_=this.BJi_||[];this.dJi_=this.dJi_||[];for(A=0;A<r;++A){this.BJi_[A]=this.QJi_[A].getValue();this.dJi_[A]=this.QJi_[A].getPosition()}if(h>r){this.BJi_.splice(r,h-r);this.dJi_.splice(r,h-r)}}else{h=this.BJi_?this.BJi_.length:0;r=this.QJi_.length;if(h<r){this.BJi_=this.BJi_||[];this.dJi_=this.dJi_||[];for(A=h;A<r;++A){this.BJi_[A]=this.QJi_[A].getValue();this.dJi_[A]=this.QJi_[A].getPosition()}}}this.timeStamp=t.an_();this.mJi_=!1}}_ni_(){return this.BJi_}$ni_(){return this.dJi_}Pni_(t,i){if(this.QJi_==null){this.yJi_();if(this.QJi_==null)throw new Error("scaled is empty")}return this.bJi_(this.QJi_,t,i)}bJi_(t,s,e){if(t==null)throw new Error("samples is empty");const A=t.length>0&&t[t.length-1].getPosition()<t[0].getPosition();A&&t.reverse();let n=i.findIndex(t,s,t.length);n<0&&(n=~n);n>0&&n--;let h=i.findIndex(t,e,t.length);if(h<0){h=~h;h>=t.length&&(h=t.length-1)}h<t.length&&h++;if(A){t.reverse();return new fA(n,h)}return new fA(n,h)}static findIndex(t,i,s){return Y1.findIndex(t,i,s)}Vni_(){return this.noi_}bhi_(t){this.noi_=t;return this}Oni_(){return this.hoi_}Nhi_(t){this.hoi_=t;return this}getValue(t){this.yJi_();const i=this.Hni_();return this.NJi_(t,i)}NJi_(t,i){this.yJi_();if(i==null||i.length===0||i[0].getPosition()>t||i[i.length-1].getPosition()<t)return Number.NaN;if(t<this.Wni_()||t>this.zni_())return Number.NaN;if(i[0].getPosition()===t)return i[0].getValue();if(i[i.length-1].getPosition()===t)return i[i.length-1].getValue();for(let s=1;s<i.length;++s)if(!(i[s].getPosition()<t))return i[s].getPosition()===t?i[s].getValue():this.SJi_(i,t,s-1,s);return Number.NaN}Cft_(t){this.yJi_();let s=i.findIndex(this.QJi_,t,this.QJi_.length);if(s>=0)return this.QJi_[s].getValue();s=~s;s>0&&--s;if(this.QJi_.length===0)return Number.NaN;if(s+1>=this.QJi_.length)return this.QJi_[this.QJi_.length-1].getValue();const e=this.SJi_(this.QJi_,t,s,s+1);return this.Zni_(e)}SJi_(t,i,s,e){if(i<t[s].getPosition()||i>t[e].getPosition())return Number.NaN;const A=t[e].getValue()-t[s].getValue();let n;if(A===0)n=t[e].getValue();else{const h=t[e].getPosition()-t[s].getPosition();n=t[s].getValue()+(i-t[s].getPosition())*A/h}return n}N_(){const t=super.N_();t["data"]=this.data;t["scaledsamples"]=this.Hni_();t["minwraplevel"]=this.Vni_();t["maxwraplevel"]=this.Oni_();t["conversion"]=this.dhi_;t["interpolation"]=this.pJi_;return t}dt_(t){if((t=Es(t))==null)return this;t["data"]!==void 0&&(this.data=t["data"]);t["scaledsamples"]!==void 0&&(this.QJi_=t["scaledsamples"]);t["minwraplevel"]!==void 0&&this.bhi_(t["minwraplevel"]);t["maxwraplevel"]!==void 0&&this.Nhi_(t["maxwraplevel"]);t["conversion"]!==void 0&&this.Kni_(t["conversion"]);t["interpolation"]!==void 0&&(this.pJi_=t["interpolation"]);return this}Xni_(){return this.an_()!==this.vJi_()}};s=i=t([_s("geotoolkit.widgets.timeseries.ScaledData")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDb252ZXJzaW9uIjoiS25pXyIsImdldFNvdXJjZSI6ImdrdF8iLCJnZXRNaW5Qb3NpdGlvbiI6IlduaV8iLCJnZXRNYXhQb3NpdGlvbiI6InpuaV8iLCJnZXRNaW5WYWx1ZSI6IkVtXyIsImdldE1heFZhbHVlIjoicG1fIiwiZ2V0U2FtcGxlcyI6IkhuaV8iLCJnZXRTYW1wbGUiOiJxbmlfIiwiaXNGb3J3YXJkT25seSI6IkpuaV8iLCJnZXREYXRhT3JkZXIiOiJ4Y3RfIiwiY29udmVydFZhbHVlRnJvbVNvdXJjZSI6ImpuaV8iLCJjb252ZXJ0VmFsdWVUb1NvdXJjZSI6IlpuaV8iLCJnZXREYXRhVGltZVN0YW1wIjoidkppXyIsImdldFZhbHVlQXJyYXkiOiJfbmlfIiwiZ2V0UG9zaXRpb25BcnJheSI6IiRuaV8iLCJnZXRJbmRleFJhbmdlIjoiUG5pXyIsImdldE1pbldyYXBMZXZlbCI6IlZuaV8iLCJzZXRNaW5XcmFwTGV2ZWwiOiJiaGlfIiwiZ2V0TWF4V3JhcExldmVsIjoiT25pXyIsInNldE1heFdyYXBMZXZlbCI6Ik5oaV8iLCJnZXRWYWx1ZUludGVybmFsIjoiTkppXyIsImdldFZhbHVlQXQiOiJDZnRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImlzT3V0ZGF0ZWQiOiJYbmlfIn19fSAg");var W1=Ci({pct_:"updated",GJi_:"limitschanged"},2,"eyJVcGRhdGVkIjoicGN0XyIsIkxpbWl0c0NoYW5nZWQiOiJHSmlfIn0g");const z1=Y1.$qi_,X1=Y1.tJi_,j1=1e-5,Z1=function(t,i,s){return i==null?t.Ayt_(s):typeof i=="string"?t.tyt_(i):typeof i=="number"?t.Ayt_(i):ys(i,VD)?i:null};var _1=Ci(function(){let i=class t extends x1{constructor(t){const i=qi(t,{data:t["data"]!=null?t["data"]:null,linestyle:t["linestyle"]!=null?t["linestyle"]:{},markervisible:t["markervisible"]!=null&&t["markervisible"],curvevisible:t["curvevisible"]==null||t["curvevisible"],marker:t["marker"]!=null?t["marker"]:null,decimationspacing:typeof t["decimationspacing"]=="number"?t["decimationspacing"]:1,spline:t["spline"]!=null&&t["spline"],values:t["values"]!=null?t["values"]:null,autosort:t["autosort"]==null||t["autosort"]},!0);super(i);this.CJi_=!0;this.CJi_=i["autosort"];this.bf_=null;this.Us_=null;this.bft_=null;this.Nft_=null;this.RJi_=null;this.kJi_=null;this.FJi_=null;this.xJi_=null;this.x9_=op.y9_;this.L9_=!0;this.eoi_=$q.Dt_;this.joi_=null;this.LJi_=null;this.UJi_=!1;this.YJi_=!1;this.setData(i["data"]);this.TJi_=i["markervisible"];this.KJi_=i["curvevisible"];this.HJi_(i["marker"]);this.qJi_=i["decimationspacing"]>=1?i["decimationspacing"]:1;this.JJi_=i["spline"];this.pi_=i["values"]["visible"];this.ubt_=i["values"]["anchor"]||dA.se_;this.PJi_=new YC({textstyle:i["values"]["textstyle"]||{color:i["values"]["color"],font:i["values"]["font"]},padding:i["values"]["padding"]||2,alignment:this.ubt_}).tR_(!0).iQ_(i["values"]["fillstyle"]).rB_(i["values"]["linestyle"]);this.j_t_=i["values"]["offset"];this.VJi_=i["values"]["offsetx"];this.OJi_=i["values"]["offsety"];this.WJi_=i["values"]["format"]}zJi_(t,i){t||(t=this.getBounds());i===void 0&&(i=!0);this.XJi_(t,i);this.jJi_();this.pc_();return this}nA_(){return this.bft_}ZJi_(t){if(this.bft_!==t){this.bft_=t;this.zJi_()}return this}hA_(){return this.Nft_}_Ji_(t){if(this.Nft_!==t){this.Nft_=t;this.zJi_()}return this}V9_(t){this.x9_=t;return this}O9_(t){this.L9_=t;return this}Hni_(){const t=this.$Ji_();return t?t.Hni_():[]}tPi_(){const t=this.$Ji_(),i=t.Hni_();return{values:t._ni_(),indices:t.$ni_(),samples:i}}getData(){return this.Us_}setData(t){if(this.Us_!=null){if(this.kJi_){this.kJi_.off(xD.gf_,this.iPi_());this.kJi_=null}if(this.RJi_){this.RJi_.off(xD.gf_,this.sPi_());this.RJi_=null}}let i=z1,s=X1;this.Us_=null;if(t instanceof qb||t instanceof Pb)this.Us_=t;else if(t!=null){const e=qi(t,{depths:null,values:null,indices:null,datatable:null,name:null},!0);this.Us_=e["datatable"];i=e["indices"];s=e["values"]}if(this.Us_!=null){this.RJi_=Z1(this.Us_,i,0);this.kJi_=Z1(this.Us_,s,1);if(this.RJi_==null||this.kJi_==null)throw new Error("Wrong input parameters. indices or values are not specified.");this.kJi_&&this.kJi_.on(xD.gf_,this.iPi_());this.RJi_&&this.RJi_.on(xD.gf_,this.sPi_())}this.jJi_();this.zJi_();return this}ePi_(){return this.eoi_}soi_(t){if(t){const i=t.toLowerCase();if(i==="linear")t=$q.Dt_;else if(i==="middlestep")t=$q.$ri_;else if(i==="endstep")t=$q.toi_;else{if(i!=="startstep")throw new Error("Interpolation type "+t+" is not defined!");t=$q.ioi_}if(t!==this.eoi_){this.eoi_=t;this.APi_=!0;this.td_()}}return this}XJi_(t,i){const s=this.getBounds();if(!s||s.isEmpty())return this;if(this.Us_!==null){this.APi_=t==null||i;this.td_(t)}return this}nPi_(t){if(this.YJi_!==t){this.YJi_=t;this.APi_=!0;this.td_()}return this}hPi_(){return this.YJi_}rPi_(){return this.UJi_}oPi_(t){if(this.UJi_!==t){this.UJi_=t;this.APi_=!0;this.td_()}return this}DJi_(t){if(this.CJi_===t)return this;this.joi_!=null&&this.joi_.DJi_(this.CJi_);this.CJi_=t;this.td_();return this}MJi_(){return this.CJi_}lPi_(t){if(this.joi_===t)return this;this.joi_=t;this.joi_!=null&&this.joi_.DJi_(this.CJi_);this.LJi_=new IJ(this.joi_);this.LJi_.O9_(this.L9_);this.LJi_.V9_(this.x9_);return this}$Ji_(t){t===void 0&&(t=this.L9_);return t===!0?this.LJi_:this.joi_}uPi_(t){const i=t.Ji_(),s=this.L9_;this.LJi_.gli_(i);this.LJi_.O9_(s);this.LJi_.V9_(this.x9_);this.LJi_.Hni_()}jJi_(){if(this.Us_==null||this.joi_!=null&&this.joi_.gkt_()===this.Us_&&!this.APi_)return;let t=null;const i=this.bft_,s=this.Nft_,e=this.Wqi_(),A=e["bottom"],n=e["top"];t=this.UJi_?i>=j1?new aJ(1,10,i,s,A,n,j1,new gJ(i,s)):s>=j1?new aJ(1,10,j1,s,A,n,j1,new gJ(j1,s)):new aJ(1,10,Number.NaN,Number.NaN,A,n,j1,new gJ(Number.NaN,Number.NaN)):new gJ(i,s);let h=new Bq;this.eoi_===$q.$ri_?h.ehi_(new tJ($q.$ri_)):this.eoi_===$q.toi_?h.ehi_(new tJ($q.toi_)):this.eoi_===$q.ioi_&&h.ehi_(new tJ($q.ioi_));const r=this.Us_;h.rhi_()===0&&(h=null);if(this.joi_!=null&&this.joi_.gkt_()===r)this.joi_.Kni_(t).setInterpolation(h);else{const i=new O1(r,t,h,this.rPi_()&&this.hPi_());this.lPi_(i)}this.LJi_.R9_();this.APi_=!1}svt_(){this.zJi_()}sPi_(){this.FJi_==null&&(this.FJi_=(t,i,s)=>{const e=undefined;(s!=null?s["name"]:null)==="unit"&&this.svt_()});return this.FJi_}iPi_(){this.xJi_==null&&(this.xJi_=(t,i,s)=>{const e=undefined;(s!=null?s["name"]:null)==="unit"&&this.svt_()});return this.xJi_}pc_(){this.bf_=null;if(this.Us_==null||this.$C_()===!1)return this;const t=(this.joi_.Em_()-this.bft_)/(this.Nft_-this.bft_),i=(this.joi_.pm_()-this.bft_)/(this.Nft_-this.bft_);this.bf_=new mA(this.joi_.Wni_(),t,this.joi_.zni_(),i);super.pc_();return this}getBounds(){return this.bf_!=null?this.bf_.lock():null}ud_(t){if(!this.$C_())return!1;let i=this.getBounds();if(!i)return!0;const s=i.Ie_(),e=i.Ts_();if(e<=Number.MIN_VALUE&&s<=Number.MIN_VALUE)return!1;if(e>Number.MIN_VALUE&&s>Number.MIN_VALUE)return su.gN_(i,this.ut_(),t.rS_());const A=this.ut_();A&&(i=A.rn_(i));const n=t.rS_(),h=Math.max(n.we_(),i.we_()),r=Math.min(n.Qe_(),i.Qe_()),o=Math.max(n.Ee_(),i.Ee_()),l=Math.min(n.pe_(),i.pe_());return!(r<h||l<o)}aPi_(t){this.KJi_=t;return this}gPi_(){return this.KJi_}render(t){super.render(t);if(this.$C_()===!1||this.gt_()==null||this.Us_==null||this.Us_.iyt_()<=0)return;const i=this.sd_()!=null?t.uS_(this.sd_()):t,s=this.gt_();i.rB_(s);const e=i.cR_(),A=i.Ji_(),n=i.UR_(s),h=mA.Ue_(e,n,n),r=A.gI_(h);this.jJi_();this.uPi_(i);const o=this.$Ji_(),l=o._ni_(),u=o.$ni_(),a=o.Hni_();if(l==null||u==null||a==null)return;let g=-1,c=-1,I,f;const C=o.Pni_(r.we_(),r.Qe_()),d=C.Xs_(),B=C.zs_();if(this.KJi_){for(I=d;I<B;I++)if(!isNaN(l[I])||g!==-1){g===-1&&(g=I);if(isNaN(l[I])){if(this.JJi_){f=new Bp(u.slice(g,c+1),l.slice(g,c+1));f.rB_(s);f.render(i)}else i.mR_(u,l,g,c);g=c+1}c=I}if(g!==-1&&c!==-1&&g!==c)if(this.JJi_){const t=Array.prototype.slice.call(u,g,c+1),e=Array.prototype.slice.call(l,g,c+1);f=new Bp(t,e);f.rB_(s);f.render(i)}else i.mR_(u,l,g,c)}if((this.TJi_||this.pi_)===!1)return;let w=this.ubt_,Q=this.VJi_,E=this.OJi_;if(this.VJi_==null&&this.OJi_==null&&this.j_t_!=null){const t=Number(this.j_t_);Q=0;E=0;OC.jj_(w)?Q=t:OC.Zj_(w)&&(Q=-t);OC.zj_(w)?E=t:OC.Xj_(w)&&(E=-t)}Q=Math.sign(Q)*bn.$c_(Q,0,i.Ji_());E=Math.sign(E)*bn.$c_(0,E,i.Ji_());if(this.getParent()&&this.getParent().getParent()&&this.getParent().getParent().jY_()){E*=-1;OC.zj_(w)?w=OC.jj_(w)?dA.se_:OC.Zj_(w)?dA.Ae_:dA.re_:OC.Xj_(w)&&(w=OC.jj_(w)?dA.ie_:OC.Zj_(w)?dA.ee_:dA.le_)}if(this.TJi_||this.pi_)for(I=d;I<B;I++)if(I%this.qJi_==0){this.TJi_&&this.cPi_.gR_(u[I],l[I]).render(i);if(this.pi_){const t=a[I].Ehi_();this.PJi_.gR_(u[I]+Q,l[I]+E).SE_(w).a_(this.WJi_.format(t)).render(i)}}}HJi_(t){if(t instanceof ma){this.cPi_=t;return this}const i=qi(t,{alignment:dA.ne_,width:7,height:7,sizeisindevicespace:!0,painter:IE,linestyle:new hl({color:"black"}),fillstyle:new wr({color:"black"})});this.IPi_={width:i["width"],height:i["height"]};this.cPi_=new ma(i);return this}fPi_(){return{visible:this.TJi_,shape:this.cPi_}}CPi_(t){t.hasOwnProperty("visible")&&(this.TJi_=t["visible"]);t.hasOwnProperty("marker")&&(t["marker"]instanceof ma?this.cPi_=t["marker"]:this.HJi_(t["marker"]));this.td_();return this}Tri_(){return this.RJi_}dPi_(){return this.kJi_}dispose(){if(!this.Df_()){if(this.Us_!=null){if(this.kJi_){this.kJi_.off(xD.gf_,this.iPi_());this.kJi_=null}if(this.RJi_){this.RJi_.off(xD.gf_,this.sPi_());this.RJi_=null}}super.dispose()}}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesLine")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVTYW1wbGVzIjoiekppXyIsImdldE1pbiI6Im5BXyIsInNldE1pbiI6IlpKaV8iLCJnZXRNYXgiOiJoQV8iLCJzZXRNYXgiOiJfSmlfIiwic2V0T3B0aW1pemF0aW9uVHlwZSI6IlY5XyIsInNldE9wdGltaXphdGlvbiI6Ik85XyIsImdldFNhbXBsZXMiOiJIbmlfIiwiZ2V0U2FtcGxlc0V4dCI6InRQaV8iLCJnZXRJbnRlcnBvbGF0aW9uVHlwZSI6ImVQaV8iLCJzZXRJbnRlcnBvbGF0aW9uVHlwZSI6InNvaV8iLCJ1cGRhdGVGcm9tRGF0YSI6IlhKaV8iLCJzZXREcmF3T3V0T2ZSYW5nZVZhbHVlcyI6Im5QaV8iLCJnZXREcmF3T3V0T2ZSYW5nZVZhbHVlcyI6ImhQaV8iLCJpc0xvZ2FyaXRobWljU2NhbGUiOiJyUGlfIiwic2V0TG9nYXJpdGhtaWNTY2FsZSI6Im9QaV8iLCJ1cGRhdGVTY2FsZWREYXRhIjoiakppXyIsInVwZGF0ZUJvdW5kcyI6InBjXyIsImNoZWNrQ29sbGlzaW9uIjoidWRfIiwic2V0Q3VydmVWaXNpYmxlIjoiYVBpXyIsImdldEN1cnZlVmlzaWJsZSI6ImdQaV8iLCJjcmVhdGVNYXJrZXIiOiJISmlfIn19fSAg");var $1=Ci({mot_:"change"},2,"eyJDaGFuZ2UiOiJtb3RfIn0g"),t2=function(){let i=class t extends $n{constructor(t){super();this.Us_=null;this.setData(t)}setData(t){t==null&&(t={});this.Us_=qi(t,{id:t["id"],color:t["color"],name:t["name"],indextext:t["indextext"],valuetext:t["valuetext"],unittext:t["unittext"]});this.notify($1.mot_,this);return this}getData(){return this.Us_}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesTooltipObject")],i);return i}();var i2=Ci(function(){let i=class t extends Db{constructor(t){t==null&&(t={});const i=qi(t,{visual:t instanceof t2?t:null,formatter:null,margintext:2,font:"12px Arial",textcolor:"black",symbolsize:0,height:20,internalpadding:4,externalpadding:4,valuevisible:!0,linestyle:new hl({color:"rgba(0, 0, 0, 0)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr({color:"rgba(0, 0, 0, 0)"}),fixedwidth:0,nanvisibility:!0,formatdatahandler:null,singlerow:!1},!0);super(i["visual"]);this.DIt_=null;this.ZF_=i["formatter"];this.BPi_=i["margintext"];this.Tk_=i["font"];this.ov_="";this.wPi_=i["textcolor"];this.BQt_=i["symbolsize"];this.QPi_=i["externalpadding"];this.Pp_=i["height"];this.kSt_=0;this.EPi_=i["valuevisible"];this.pPi_=i["fixedwidth"];this.mPi_=i["internalpadding"];this.yPi_=i["nanvisibility"];this.DPi_=this.MPi_.bind(this);this.vPi_=i["singlerow"];this.initialize();this.bPi_(i)}bPi_(t){if((t=Es(t))==null)return this;t["visual"]!==void 0&&this.lp_(t["visual"]);t["height"]!==void 0&&(this.Pp_=t["height"]);t["formatter"]&&(this.ZF_=t["formatter"]);t["margintext"]!=null&&(this.BPi_=t["margintext"]);t["font"]!=null&&(this.Tk_=t["font"]);t["textcolor"]!=null&&(this.wPi_=t["textcolor"]);t["symbolsize"]!=null&&(this.BQt_=t["symbolsize"]);t["externalpadding"]!=null&&(this.QPi_=t["externalpadding"]);t["internalpadding"]!=null&&(this.mPi_=t["internalpadding"]);t["fixedwidth"]!==void 0&&(this.pPi_=t["fixedwidth"]);t["valuevisible"]!==void 0&&(this.EPi_=t["valuevisible"]);t["nanvisibility"]!==void 0&&(this.yPi_=t["nanvisibility"]);t["formatdatahandler"]&&(this.DPi_=t["formatdatahandler"]);t["singlerow"]!==void 0&&(this.vPi_=t["singlerow"]);this.vW_();return this}initialize(){this.aq_(!0);this.kY_(!1);this.NPi_();this.vW_()}N_(){const t=super.N_();t["visual"]=this.Uw_();t["height"]=this.Pp_;t["formatter"]=this.ZF_;t["margintext"]=this.BPi_;t["font"]=this.Tk_;t["textcolor"]=this.wPi_;t["symbolsize"]=this.BQt_;t["externalpadding"]=this.QPi_;t["internalpadding"]=this.mPi_;t["fixedwidth"]=this.pPi_;t["valuevisible"]=this.EPi_;t["nanvisibility"]=this.yPi_;t["formatdatahandler"]=this.DPi_;t["singlerow"]=this.vPi_;return t}dt_(t){super.dt_(t);this.bPi_(t);return this}setOptions(t){return this.dt_(t)}NPi_(){this.wX_=10;const t=[];this.KY_();t.push(this.DIt_=new ma({alignment:dA.ne_,width:this.BQt_,height:this.BQt_,sizeisindevicespace:!0}));t.push(this.ov_=new YC);t.push(this.kSt_=new YC);this.GY_(t)}SPi_(t){return this.ZF_!=null?this.ZF_.format(t):t}MPi_(t){return{id:t["id"],name:t["name"],symbol:t["symbol"],valuetext:""+this.SPi_(t["valuetext"]),additionaltext:t["additionaltext"]||"",unittext:t["unittext"]}}vW_(){let t=0,i=0,s=0,e,A;const n=this.Uw_(),h=this.DPi_(n.getData()),r=this.DIt_!=null&&h["symbol"]!=null?this.BQt_:0,o=new qa({color:this.wPi_,font:this.Tk_}),l=this.QPi_+this.mPi_,u=h["additionaltext"]!=null&&h["additionaltext"]!=="",a=h["unittext"]!=null&&h["unittext"]!=="";if(this.ov_!=null){A=h["name"];if(this.vPi_){A+=" - "+h["valuetext"]+h["additionaltext"];A+=a?u?" ":" (":"";A+=h["unittext"];A+=a?")":""}e=$o.measureText(A,o);t=r>e.Ts_()?r:e.Ts_();s+=t;i=e.Ie_();this.ov_.dt_({text:A,ax:l+r+(r!==0?this.BPi_:0),ay:l+t/2,textstyle:o});this.ov_.SE_(dA.he_)}if(this.DIt_!=null&&h["symbol"]!=null){this.DIt_.dt_({ax:l+r/2,ay:l+s/2,alignment:dA.ne_,width:r,height:r,sizeisindevicespace:!0,painter:h["symbol"].ak_().D_(),linestyle:h["symbol"].gt_(),fillstyle:h["symbol"].ct_()});i+=this.BPi_+r}s+=this.BPi_;this.kSt_.nf_(!this.vPi_&&this.EPi_);if(this.kSt_!=null&&this.EPi_===!0&&!this.vPi_){A="";h["valuetext"]&&(A+=h["valuetext"]+h["additionaltext"]);A+=a?u?" ":" (":"";A+=h["unittext"];A+=a?")":"";e=$o.measureText(A,o);t=e.Ts_();i=e.Ie_()>i?e.Ie_():i;this.kSt_.dt_({text:A,ax:l,ay:l+s+t/2,textstyle:o});s+=e.Ts_();this.kSt_.SE_(dA.he_)}this.yPi_===!1&&isNaN(h["valuetext"])?this.nf_(!1):this.nf_(!0);i=this.pPi_!=null?this.pPi_-(this.QPi_+this.mPi_)*2:i;i+=(this.QPi_+this.mPi_)*2;s=this.vPi_?s+(this.QPi_+this.mPi_):s+(this.QPi_+this.mPi_)*2;this.Cq_(i).dq_(s).kY_(!0);this.notify(mb.mot_,this)}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesTooltipLegendItem")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwidXBkYXRlR2VvbWV0cnkiOiJ2V18ifX19");var s2=Ci(function(){let i=class t extends Db{constructor(t){t==null&&(t={});const i=qi(t,{visual:t instanceof J1?t:null,formatter:null,margintext:2,font:"9px Arial",height:20,internalpadding:4,linestyle:new hl({color:"rgba(128, 128, 128, 0.5)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:null,labelcolor:null},!0);super(i["visual"]);this.Pmt_=null;this.Gqi_=null;this.DIt_=null;this._jt_=null;this.GPi_=[];this.RPi_=null;this.Pp_=i["height"];this.BPi_=i["margintext"];this.Tk_=i["font"];this.wX_=i["internalpadding"];this.CS_=i["linestyle"];this.pPi_=i["fixedwidth"];this.kPi_=i["labelcolor"];this.ZF_=i["formatter"];this.initialize();this.FPi_(i)}FPi_(t){if((t=Es(t))==null)return this;t["visual"]!==void 0&&this.lp_(t["visual"]);t["height"]!=null&&(this.Pp_=t["height"]);t["formatter"]!==void 0&&(this.ZF_=t["formatter"]);t["margintext"]!=null&&(this.BPi_=t["margintext"]);t["font"]!=null&&(this.Tk_=t["font"]);t["internalpadding"]!=null&&(this.wX_=t["internalpadding"]);t["linestyle"]!==void 0&&(this.CS_=hl.Wi_(t["linestyle"]));t["fillstyle"]!==void 0&&this.iQ_(t["fillstyle"]);t["fixedwidth"]!==void 0&&(this.pPi_=t["fixedwidth"]);t["labelcolor"]!==void 0&&(this.kPi_=t["labelcolor"]);this.vW_();return this}initialize(){this.aq_(!0);this.kY_(!0);this.NPi_();this.vW_();this.Uw_().on(m1.mqi_,this.xPi_())}N_(){const t=super.N_();t["visual"]=this.Uw_();t["formatter"]=this.ZF_;t["margintext"]=this.BPi_;t["font"]=this.Tk_;t["height"]=this.Pp_;t["internalpadding"]=this.wX_;t["fixedwidth"]=this.pPi_;t["labelcolor"]=this.kPi_;return t}dt_(t){const i=qi(t,{});i["linestyle"]=null;i["fillstyle"]=null;super.dt_(i);this.FPi_(t);return this}setOptions(t){return this.dt_(t)}NPi_(){const t=[];this.KY_();this.Pmt_=new dp;t.push(this.Pmt_);this.Gqi_=new Rd;t.push(this.Gqi_);this.DIt_=(new ma).nf_(!1);t.push(this.DIt_);t.push(this._jt_=new YC);this.GY_(t)}SPi_(t){return this.ZF_!=null?this.ZF_.format(t):t}vW_(){const t=this.Pp_,i=t,s=this.wX_,e=s/2,A=s*2,n=this.Uw_(),h=n._Hi_(),r=n.eqi_()["unit"],o=r instanceof JA?r.fn_():r,l={name:h.name,unit:n.eqi_()==null||r==null?"":o,Dn_:h.Dn_,value:"",marker:h.curve==null?null:h.curve.fPi_(),color:h.curve==null?null:h.curve.gt_().getColor(),Jvt_:h.curve==null?null:h.curve.gt_().clone(),Pbt_:h.Pbt_,z6_:new qa({color:"black",font:this.Tk_}),label:""};l.value=this.SPi_(h.curve==null?null:n.LPi_());const u=l.unit!=null&&l.unit!=="",a=n.UPi_()!=null&&n.UPi_()!=="";l.label=l.name;l.label+=l.value==null?"":" "+l.value+(a||!u?"":" (")+n.UPi_();l.label+=a?" ":"";l.label+=l.unit==null?"":l.unit;l.label+=u?")":"";const g=this.pPi_!=null?this.pPi_:$o.measureText(l.label,l.z6_).Ie_()+i+A+this.BPi_*2;this.Cq_(g).dq_(t).kY_(!0);this.Pmt_.ce_(new mA(e,e,g-e,t-e)).rB_(this.CS_).iQ_(this.ct_());let c=1;this.GPi_.forEach((t=>{c=this.FY_(t);this.removeChild(t)}));this.GPi_=[];if(l.Pbt_!=null){const e=(t-A+1)/2;let n=null,h=0;n=l.Pbt_["top"]==null?null:l.Pbt_["top"]["fillstyle"];const r=new dp({left:s,top:s+e*h,width:i-A,height:e}).rB_(null).iQ_(n);this.xY_(c,r);this.GPi_.push(r);h=1;n=l.Pbt_["bottom"]==null?null:l.Pbt_["bottom"]["fillstyle"];const o=new dp({left:s,top:s+e*h,width:i-A,height:e}).rB_(null).iQ_(n);this.xY_(c,o);this.GPi_.push(o)}this.Gqi_!=null&&this.Gqi_.zA_({from:new lA(s,t/2),to:new lA(i-s,t/2)}).rB_(new hl({color:l.color}));this.DIt_!=null&&(l.marker==null||l.marker.visible!==!0?this.DIt_.nf_(!1):this.DIt_.dt_(l.marker.shape.N_()).SE_(dA.ne_).gR_(i/2,t/2).nf_(!0));if(this._jt_!=null){this._jt_.dt_({text:l.label,ax:i+this.BPi_,ay:t/2,textstyle:l.z6_});this._jt_.SE_(dA.he_)}this.kPi_==null?this._jt_.FE_().setColor(l.color):this._jt_.FE_().setColor(this.kPi_)}xPi_(){this.RPi_==null&&(this.RPi_=(t,i,s)=>{this.vW_()});return this.RPi_}dispose(){this.Uw_()!=null&&this.Uw_().off(m1.mqi_,this.xPi_());super.dispose()}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesLineLegendItem")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwidXBkYXRlR2VvbWV0cnkiOiJ2V18ifX19");var e2=Ci({Top:"top",Fl_:"value",JQ_:"bottom"},2,"eyJWYWx1ZSI6IkZsXyIsIkJvdHRvbSI6IkpRXyJ9"),A2=function(){var i;let s=i=class t extends $n{constructor(t,s,e){super();const A=qi({},{value:t!=null?t:Number.MIN_VALUE,originalCurve:s!=null?s:null,type:e!=null?e:i.YPi_.Fl_});this.Aoi_=null;this.TPi_=null;this.kSt_=A["value"];this.Qi_=A["type"];this.KPi_=A["originalCurve"];this.Us_=null;this.HPi_=null;this.rQ_=null;this.qPi_=null;this.KPi_!=null&&this.KPi_.on(W1.GJi_,this.oQ_());this.JPi_()}JPi_(){const t=this.KPi_.nA_(),s=this.KPi_.hA_();let e=this.rt_();this.qPi_=e.clone();e=new mA(e.we_(),t,e.Qe_(),s);const A=mA.Ue_(e,2,2),n=s<=t,h=n?A.pe_():A.Ee_(),r=n?A.Ee_():A.pe_();switch(this.Qi_){case i.YPi_.Top:this.kSt_=r;break;case i.YPi_.JQ_:this.kSt_=h;break;default:break}const o=A.we_(),l=A.Qe_();if(this.Us_==null){this.Us_=new qb({cols:[{type:"number",data:[o,l]},{type:"number",data:[this.kSt_,this.kSt_]}]});this.HPi_=new Pb(this.Us_)}else{this.Us_.Lyt_(0,2);this.Us_.myt_([[o,this.kSt_],[l,this.kSt_]])}this.bf_=null;this.Aoi_=null}Hni_(){const t=this.rt_();t!=null&&t.Ce_(this.qPi_)||this.JPi_();if(this.Aoi_==null&&this.Us_!=null){const t=Y1.Hni_(this.Us_,this.KPi_.nA_(),this.KPi_.hA_());this.Aoi_=t.samples;this.TPi_=t.iJi_}return this.Aoi_}pc_(){this.bf_=null;if(this.Us_==null||this.KPi_==null)return;const t=this.Us_.Ayt_(Y1.$qi_),i=this.Us_.Ayt_(Y1.tJi_),s=this.KPi_.nA_(),e=this.KPi_.hA_(),A=(i.nA_()-s)/(e-s),n=(i.hA_()-s)/(e-s);this.bf_=new mA(t.nA_(),A,t.hA_(),n)}getBounds(){this.bf_==null&&this.pc_();return this.bf_!=null?this.bf_.lock():null}getData(){return this.HPi_}rt_(){return this.KPi_.getParent().rt_()}oQ_(){this.rQ_==null&&(this.rQ_=(t,i,s)=>{this.Aoi_=null;this.JPi_()});return this.rQ_}dispose(){this.KPi_!=null&&this.KPi_.off(W1.GJi_,this.oQ_());super.dispose()}};s.YPi_=e2;s=i=t([_s("geotoolkit.widgets.timeseries.ReferenceLine")],s);return s}();var n2=Ci({IIt_:"single",PPi_:"dual",VPi_:"positive",OPi_:"negative",WPi_:"positiveandnegative"},2,"eyJTaW5nbGUiOiJJSXRfIiwiRHVhbCI6IlBQaV8iLCJQb3NpdGl2ZSI6IlZQaV8iLCJOZWdhdGl2ZSI6Ik9QaV8iLCJQb3NpdGl2ZUFuZE5lZ2F0aXZlIjoiV1BpXyJ9"),h2=function(){var t;return class{constructor(t,i){this.zPi_=t;this.IT_=i;this.rKt_=i;this.XPi_=null}reset(){this.zPi_=null;this.IT_=-1;this.rKt_=-1;this.XPi_=null}}}(),r2=function(){var t;return class{constructor(t,i,s,e){this.jPi_=new h2(t,i);this.ZPi_=new h2(s,e);this.empty=!1}initialize(t,i,s,e){this.jPi_.zPi_=t;this.jPi_.IT_=i;this.jPi_.rKt_=i;this.ZPi_.zPi_=s;this.ZPi_.IT_=e;this.ZPi_.rKt_=e;this.empty=!1}zj_(t,i){const s=undefined,e=undefined;return(this.jPi_.IT_===-1?this.jPi_.zPi_.y:t[this.jPi_.IT_])<=(this.ZPi_.IT_===-1?this.ZPi_.zPi_.y:i[this.ZPi_.IT_])}jj_(t,i){const s=undefined,e=undefined;return(this.jPi_.IT_===-1?this.jPi_.zPi_.x:t[this.jPi_.IT_])<=(this.ZPi_.IT_===-1?this.ZPi_.zPi_.x:i[this.ZPi_.IT_])}reset(){this.empty=!0;this.jPi_.reset();this.ZPi_.reset()}}}(),o2=function(){var t;return class{constructor(t){this.Aoi_=t;this.yBt_=t.length;this.E1_=this.yBt_<1?1:t[t.length-1].getPosition()<t[0].getPosition()?-1:1;this._Pi_=this.yBt_<1?0:t[0].getPosition();this.$Pi_=this.yBt_<1?0:t[t.length-1].getPosition()}getLength(){return this.yBt_}get(t){return this.E1_===1?this.Aoi_[t]:this.Aoi_[this.yBt_-1-t]}}}(),l2=function(){var t;return class{constructor(t,i,s){this.tVi_=t;this.samples=new o2(t);this.gT_=-1;this.iVi_=s;this.GP_=i;this.uM_=!0;this.minValue=0;this.maxValue=1;this.sVi_=-1e-10;this.eVi_=1+1e-10}static AVi_(t,i,s){const e=i.x,A=i.y,n=s.x,h=s.y,r=h-A;let o=h;if(r!==0){const i=undefined;o=A+(t-e)*r/(n-e)}return o}nVi_(){return this.gT_}hVi_(t){if(this.gT_!==t){this.gT_=t;if(this.gT_!==-1){this.rVi_=this.samples.get(this.gT_).getPosition();this.oVi_=this.samples.get(this.gT_+1).getPosition();this.Ym_=this.getValue(this.gT_);this.Tm_=this.getValue(this.gT_+1)}}}ht_(t,i){this.minValue=t;this.maxValue=i}getValue(t){return isNaN(this.samples.get(t).getValue())?Number.NaN:this.samples.get(t).getValue()}Ji_(){return this.GP_}reset(t,i,s){this.iVi_=0;this.next(t,i);this.gT_>0&&!isNaN(this.samples.get(this.gT_-1).getValue())&&this.hVi_(this.gT_-1)}next(t,i){let s=!0;this.lVi_=null;if(!this.uM_)return s;if(this.gT_===-1){const s=Y1.Pni_(this.tVi_,t,i).Xs_();this.gT_=s-1}if(this.gT_>-1&&this.samples.get(this.gT_).getPosition()>i){this.uM_=!1;return s}for(let i=this.gT_+1;i<this.samples.yBt_-1;i++)if(!(this.samples.get(i+1).getPosition()<t)){if(!isNaN(this.samples.get(i).getValue())&&!isNaN(this.samples.get(i+1).getValue())){this.hVi_(i);return s}s=!1}this.uM_=!1;return s}uVi_(t){const i=this.rVi_,s=this.Ym_,e=this.oVi_,A=this.Tm_;if(t<i||t>e)throw new Error("Target depth should be inside Samples range ["+i+" <= "+t+" => "+e);const n=A-s;let h=A;if(n!==0){const A=undefined;h=s+(t-i)*n/(e-i)}return new lA(t,h)}aVi_(t){this.lVi_=this.uVi_(t)}gVi_(t){return!(t.oVi_<this.rVi_||t.rVi_>this.oVi_)}intersect(t){const i=this.lVi_!=null?this.lVi_.x:this.rVi_,s=this.lVi_!=null?this.lVi_.y:this.Ym_,e=t.lVi_!=null?t.lVi_.x:t.rVi_,A=t.lVi_!=null?t.lVi_.y:t.Ym_,n=this.cVi_(i,s,this.oVi_,this.Tm_,e,A,t.oVi_,t.Tm_);if(n!=null){this.lVi_=n;t.lVi_=n;return!0}return!1}cVi_(t,i,s,e,A,n,h,r){if(t===s&&A===h){const t=Math.min(i,e),s=Math.max(i,e),h=Math.min(n,r),o=Math.max(n,r);return s<=h||o<=t?null:new lA(A,(s+h)/2)}const o=(r-n)*(s-t)-(h-A)*(e-i);if(o!==0){let l=((s-t)*(i-n)-(e-i)*(t-A))/o;if(l<this.sVi_||l>this.eVi_)return null;l=((h-A)*(i-n)-(r-n)*(t-A))/o;return l<this.sVi_||l>this.eVi_?null:new lA(t+l*(s-t),i+l*(e-i))}return null}}}(),u2=function(){var i;let s=i=class t extends x1{constructor(t,s,e,A,n){const h=qi(t,{curve1:t instanceof _1?t:null,curve2:s instanceof _1||s instanceof A2?s:null,fillstyle:e instanceof wr?e:null,positivefillstyle:A instanceof wr?A:null,negativefillstyle:n instanceof wr?n:null,filltype:null});super(h);h["filltype"]==null&&(h["negativefillstyle"]!=null?h["filltype"]=h["positivefillstyle"]!=null?i.IVi_.PPi_:i.IVi_.OPi_:h["filltype"]=h["positivefillstyle"]!=null?i.IVi_.VPi_:i.IVi_.IIt_);switch(h["filltype"]){case i.IVi_.IIt_:h["fillstyle"]==null&&(h["fillstyle"]=null);h["negativefillstyle"]==null&&(h["negativefillstyle"]=h["fillstyle"]);h["positivefillstyle"]==null&&(h["positivefillstyle"]=h["fillstyle"]);break;case i.IVi_.PPi_:h["fillstyle"]==null&&(h["fillstyle"]=null);h["negativefillstyle"]==null&&(h["negativefillstyle"]=null);h["positivefillstyle"]==null&&(h["positivefillstyle"]=null);break;case i.IVi_.OPi_:h["negativefillstyle"]==null&&(h["negativefillstyle"]=h["fillstyle"]!=null?h["fillstyle"]:null);h["positivefillstyle"]==null&&(h["positivefillstyle"]=h["negativefillstyle"]);h["fillstyle"]==null&&(h["fillstyle"]=h["negativefillstyle"]);break;case i.IVi_.VPi_:h["positivefillstyle"]==null&&(h["positivefillstyle"]=h["fillstyle"]!=null?h["fillstyle"]:null);h["negativefillstyle"]==null&&(h["negativefillstyle"]=h["positivefillstyle"]);h["fillstyle"]==null&&(h["fillstyle"]=h["positivefillstyle"]);break;default:break}this.fVi_=h["positivefillstyle"];this.CVi_=h["negativefillstyle"];this.dVi_=h["filltype"]==null?null:h["filltype"];this.iQ_(h["fillstyle"]!=null?h["fillstyle"]:null);this.BVi_=h["curve1"];this.wVi_=h["curve2"];this.tC_(this.CVi_,rh.sC_,this.oQ_());this.tC_(this.fVi_,rh.sC_,this.oQ_());this.QVi_=(t,i,s)=>{if(this.BVi_===null||i!==this.BVi_)return;const e=this.BVi_.Wqi_();this.Oqi_(e["top"],e["bottom"])};this.BVi_.on(F1.Pqi_,this.QVi_);const r=this.BVi_.Wqi_();this.Oqi_(r["top"],r["bottom"])}EVi_(){return this.dVi_}setFillType(t){this.dVi_=t;return this}pVi_(){return this.fVi_}mVi_(t,i){if(this.fVi_===t)return this;this.fVi_=il.wD_(this,this.fVi_,t,i,this.oQ_());this.vn_().td_();return this}yVi_(){return this.CVi_}DVi_(t,i){if(this.fVi_===t)return this;this.CVi_=il.wD_(this,this.CVi_,t,i,this.oQ_());this.vn_().td_();return this}MVi_(t,i,s){const e=this.BVi_.Hni_(),A=this.wVi_.Hni_(),n=new l2(e,this.getParent().It_(),0),h=new l2(A,this.getParent().It_(),0);n.reset(i,s,0);h.reset(i,s,0);let r=null;while(n.uM_&&h.uM_){for(let t=!0;n.uM_&&h.uM_&&t;){while(n.uM_&&n.oVi_<h.rVi_)n.next(i,s);t=!1;while(h.uM_&&h.oVi_<n.rVi_){h.next(i,s);t=!0}}if(!n.uM_||!h.uM_)break;if(r==null||r.empty===!0)if(n.rVi_!==h.rVi_)if(n.rVi_<h.rVi_){n.aVi_(h.rVi_);r==null?r=new r2(n.lVi_,n.nVi_(),null,h.nVi_()):r.initialize(n.lVi_,n.nVi_(),null,h.nVi_())}else{h.aVi_(n.rVi_);r==null?r=new r2(null,n.nVi_(),h.lVi_,h.nVi_()):r.initialize(null,n.nVi_(),h.lVi_,h.nVi_())}else r==null?r=new r2(null,n.nVi_(),null,h.nVi_()):r.initialize(null,n.nVi_(),null,h.nVi_());else{if(n.intersect(h)){r.jPi_.XPi_=n.lVi_;r.ZPi_.XPi_=h.lVi_;this.vVi_(t,r,e,A);r=new r2(n.lVi_,n.nVi_()+1,h.lVi_,h.nVi_()+1)}let o=!1;if(n.oVi_===h.oVi_){r.jPi_.rKt_=n.nVi_()+1;r.ZPi_.rKt_=h.nVi_()+1;const t=n.next(i,s),e=h.next(i,s);o=!t||!e}else{let t;if(n.oVi_<h.oVi_){r.jPi_.rKt_=n.nVi_()+1;t=n.oVi_;o=!n.next(i,s);!o&&n.uM_||(r.ZPi_.XPi_=h.uVi_(t))}else{r.ZPi_.rKt_=h.nVi_()+1;t=h.oVi_;o=!h.next(i,s);!o&&h.uM_||(r.jPi_.XPi_=n.uVi_(t))}}if(o){r.empty||this.vVi_(t,r,e,A);r.reset()}}}r==null||r.empty||this.vVi_(t,r,e,A)}vVi_(t,i,s,e){if(this.gt_()&&this.gt_().$w_()){const A=this.gt_(),n=this.ct_(),h=this.yVi_(),r=this.pVi_();this.XQ_=null;this.bVi_(t,i,s,e);this.XQ_=A;this.fillStyle=null;this.NVi_=null;this.SVi_=null;this.bVi_(t,i,s,e);this.fillStyle=n;this.NVi_=h;this.SVi_=r}else this.bVi_(t,i,s,e)}bVi_(t,s,e,A){const n=new lA(0,0),h=new o2(e),r=new o2(A),o=new lA(Number.NaN,Number.POSITIVE_INFINITY),l=new lA(Number.NaN,Number.POSITIVE_INFINITY);t.rB_(this.gt_());t.beginPath();if(s.jPi_.zPi_!=null){n.x=s.jPi_.zPi_.x;n.y=s.jPi_.zPi_.y;t.moveTo(n.x,n.y)}else{n.x=h.get(s.jPi_.IT_).getPosition();n.y=h.get(s.jPi_.IT_).getValue();if(n.y<o.y){o.x=n.x;o.y=n.y}t.moveTo(n.x,n.y)}let u,a,g,c;for(a=s.jPi_.zPi_!=null?s.jPi_.IT_:s.jPi_.IT_+1;a<=s.jPi_.rKt_;a++){u=h.get(a);n.x=u.getPosition();n.y=u.getValue();if(!(s.jPi_.zPi_!=null&&s.jPi_.zPi_.x>n.x||s.jPi_.XPi_!=null&&s.jPi_.XPi_.x<n.x)){if(n.y<o.y){o.x=n.x;o.y=n.y}t.lineTo(n.x,n.y)}}if(s.jPi_.XPi_!=null){n.x=s.jPi_.XPi_.x;n.y=s.jPi_.XPi_.y;t.lineTo(n.x,n.y)}if(s.ZPi_.XPi_!=null){n.x=s.ZPi_.XPi_.x;n.y=s.ZPi_.XPi_.y;t.lineTo(n.x,n.y)}for(a=s.ZPi_.rKt_;a>=s.ZPi_.IT_;a--){g=r.get(a);n.x=g.getPosition();n.y=g.getValue();if(!(s.ZPi_.zPi_!=null&&s.ZPi_.zPi_.x>n.x||s.ZPi_.XPi_!=null&&s.ZPi_.XPi_.x<n.x)){if(n.y<l.y){l.x=n.x;l.y=n.y}t.lineTo(n.x,n.y)}}if(s.ZPi_.zPi_!=null){n.x=s.ZPi_.zPi_.x;n.y=s.ZPi_.zPi_.y;t.lineTo(n.x,n.y)}t.closePath();if(isNaN(o.x)&&isNaN(l.x))c=this.ct_();else if(this.dVi_===i.IVi_.IIt_)c=this.GVi_(0);else{c=void 0;if(isNaN(o.x))if(s.jPi_.zPi_==null||s.jPi_.XPi_==null)c=null;else{o.x=l.x;o.y=l2.AVi_(l.x,s.jPi_.zPi_,s.jPi_.XPi_)}if(isNaN(l.x))if(s.ZPi_.zPi_==null||s.ZPi_.XPi_==null)c=null;else{l.x=o.x;l.y=l2.AVi_(o.x,s.ZPi_.zPi_,s.ZPi_.XPi_)}c===void 0&&(c=o.y<=l.y?this.GVi_(-1):this.GVi_(+1))}if(c){t.iQ_(c,this.getBounds());t.sQ_();t.vR_(null)}this.XQ_&&t.stroke()}getBounds(){const t=this.BVi_!=null?this.BVi_.getBounds():null,i=this.wVi_!=null?this.wVi_.getBounds():null,s=Math.min(t!=null?t.we_():Number.POSITIVE_INFINITY,i!=null?i.we_():Number.POSITIVE_INFINITY),e=Math.max(t!=null?t.Qe_():Number.NEGATIVE_INFINITY,i!=null?i.Qe_():Number.NEGATIVE_INFINITY);if(isFinite(s)&&isFinite(e)){const t=this.Wqi_();return new mA(s,t["bottom"],e,t["top"])}return null}GVi_(t){return t===0?this.ct_():t===-1?this.dVi_===i.IVi_.VPi_?null:this.CVi_:this.dVi_===i.IVi_.OPi_?null:this.fVi_}render(t){super.render(t);const i=this.sd_()!=null?t.uS_(this.sd_()):t,s=i.cR_(),e=i.Ji_();if(e.yI_()===0)return;const A=mA.Ue_(s,2,0),n=e.gI_(A);this.BVi_ instanceof _1?this.BVi_.jJi_():this.BVi_.JPi_();this.wVi_ instanceof _1?this.wVi_.jJi_():this.wVi_.JPi_();const h=n.we_(),r=n.Qe_();this.MVi_(i,h,r)}dispose(){this.BVi_!=null&&this.BVi_.off(F1.Pqi_,this.QVi_);super.dispose()}};s.IVi_=n2;s=i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesFill")],s);return s}();const a2="#6b6b6b",g2=function(t,i,s){return i==null?t.Ayt_(s):typeof i=="string"?t.tyt_(i):typeof i=="number"?t.Ayt_(i):ys(i,VD)?i:null},c2=new $g({maximumfractiondigits:2}),I2=Y1.$qi_,f2=Y1.tJi_,C2=-1;var d2=Ci(function(){let i=class t extends J1{constructor(t){let i=Y1.Xqi_();i=Pi(t,i);super(i);this.RVi_=null;this.kVi_=null;this.FVi_={top:null,bottom:null};this.GPi_={top:null,bottom:null};this.xVi_=null;this.DIt_=null;this.LVi_=null;this.UVi_="";this.YVi_=null;this.xJi_=null;this.TVi_=null;this.kJi_=null;this.RJi_=null;this.KVi_=null;this.HVi_={lqi_:!0,min:null,max:null,hqi_:null,Pbt_:{top:null,bottom:null}};this.initialize(i);this.HVi_.hqi_=this.cft_(!0)}initialize(t){if(this.HVi_==null)return this;super.initialize(t);if(t==null||t["id"]==null)throw new Error("TimeSeriesObject requires a unique id for initialization");t=Pi(t,{});this.UU_=Pi(t,this.UU_);this.RVi_=this.UU_["uri"];this.updating=0;const i={markervisible:this.UU_["curve"]["properties"]["markervisible"],marker:this.UU_["curve"]["properties"]["marker"],decimationspacing:this.UU_["curve"]["properties"]["decimationspacing"],spline:this.UU_["curve"]["properties"]["spline"],values:this.UU_["curve"]["properties"]["values"],autosort:this.UU_["curve"]["properties"]["autosort"]};this.rJi_=new _1(i).JC_(this.XC_()).HC_(this.dn_());this.kVi_=(new sI).Eq_(!0).nf_(!1);this.DIt_=(new ma).KC_(!1);this.xVi_=(new T1).dq_("100%").GY_((new nd).HC_("curvelimitsaxis").JC_(this.XC_())).HC_("curvelimitsgroup");const s=new t2({color:null,name:this.ov_,indextext:"",valuetext:"",unittext:""});this.qVi_=new i2(s);this.LVi_=new s2(this);this.setData(this.UU_["curve"]["data"]);this.JVi_(this.UU_["curve"]["properties"]);this.PVi_(this.UU_["curvesymbol"]);this.VVi_(this.UU_["curvelimits"]);this.RTi_(this.UU_["curveaxis"]);this.OVi_(this.UU_["legenditem"]);this.WVi_(this.UU_["tooltipitem"]);return this}zVi_(t){this.oJi_=t;this.XVi_();return this}wq_(){const t=undefined;this.UU_["curve"]["properties"]["neatlimits"]&&this.UU_["curve"]["properties"]["neatlimitscenteredonzero"]!==!0&&this.XVi_()}jVi_(){return this.oJi_}iPi_(){this.xJi_==null&&(this.xJi_=(t,i,s)=>{const e=undefined;if((s!=null?s["name"]:null)==="unit"&&this.kJi_!=null&&this.kJi_.gn_()!=null){this.UU_["curve"]["properties"]["unit"]=this.kJi_.gn_().fn_();this.ZVi_();this.XVi_();this.rJi_.td_()}});return this.xJi_}_Vi_(t,i,s){this.FVi_[t]=i;this.GPi_[t]=s;this.HVi_.Pbt_[t]=i==null?null:{filldirection:i["filldirection"],fillstyle:i["fillstyle"],filltype:i["filltype"],id1:i["id1"],id2:i["id2"]};this.LVi_.vW_();return this}getData(){return this.UU_["curve"]["data"]instanceof Fb?this.UU_["curve"]["data"]:this.UU_["curve"]["data"]["datatable"]}setData(t){if(t==null)return this;const i=this.UU_["curve"]["data"];this.UU_["curve"]["data"]=t;if(this.YVi_!=null){this.YVi_.off(Lb.Iyt_,this.$Vi_());this.YVi_.off(Lb.fyt_,this.tOi_());this.YVi_.off(Lb.Cyt_,this.$Vi_());this.YVi_.off(Lb.dyt_,this.iOi_());this.YVi_.off(Lb.Rct_,this.xPi_());this.YVi_.off(Jb.wC_,this.xPi_());if(this.kJi_){this.kJi_.off(xD.gf_,this.iPi_());this.kJi_=null}this.KVi_=null}let s=I2,e=f2,A=null;if(this.UU_["curve"]["data"]!=null){let t=this.UU_["curve"]["data"];if(t instanceof qb||t instanceof Pb){A=t;t={}}const i=qi(t,{indices:s,values:e,datatable:A},!0);A=i["datatable"];s=i["indices"];e=i["values"];if(A){this.RJi_=g2(A,s,0);this.kJi_=g2(A,e,1);if(this.RJi_==null||this.kJi_==null)throw new Error("Wrong input parameters. indices or values are not specified.");this.HVi_.hqi_=this.cft_(!0);this.YVi_=new Pb(A);this.KVi_=g2(this.YVi_,e,1);this.RJi_.KD_("ms");this.kJi_.KD_(null);this.YVi_.on(Lb.Iyt_,this.$Vi_());this.YVi_.on(Lb.fyt_,this.tOi_());this.YVi_.on(Lb.Cyt_,this.$Vi_());this.YVi_.on(Lb.dyt_,this.iOi_());this.YVi_.on(Lb.Rct_,this.xPi_());this.YVi_.on(Jb.wC_,this.xPi_());this.kJi_.on(xD.gf_,this.iPi_())}}this.rJi_!=null&&this.rJi_.setData({indices:s,values:e,datatable:this.YVi_});this.XVi_();this.notify(m1.Eqi_,this,{old:i,new:A});return this}_Hi_(){return qi(super._Hi_(),{curve:this.rJi_,Dn_:this.DIt_,sOi_:this.xVi_,Pbt_:this.FVi_,eOi_:this.GPi_,AOi_:this.LVi_,nOi_:this.qVi_,Sqi_:this.kVi_})}JVi_(t){t==null&&(t={});if(t!==this.UU_["curve"]["properties"]){t=Pi(t,{});this.UU_["curve"]["properties"]=Pi(t,this.UU_["curve"]["properties"]);this.UU_["curve"]["properties"]=Pi(this.UU_["curve"]["properties"],{barmode:{enabled:!1,fillstyle:this.rJi_.gt_().getColor(),linestyle:this.rJi_.gt_().clone(),barwidth:20,barvalues:{formatter:c2,margins:{left:0,top:10},rotationangle:0,textstyle:null}}})}const i=this.UU_["curve"]["properties"],s=this._Hi_();if(s!=null){const e=s.curve,A=OA.Ai_().gn_(t["unit"]);if(A!=null&&this.kJi_!=null&&(this.kJi_.gn_()==null||!this.kJi_.gn_().pn_(A))){this.kJi_.KD_(A);this.KVi_.KD_(A)}(i.hasOwnProperty("markervisible")||i.hasOwnProperty("marker"))&&e.CPi_({visible:i["markervisible"],marker:i["marker"]});typeof i["visible"]=="boolean"&&e.nf_(i["visible"]);i["name"]!==void 0&&this.HC_(i["name"]);typeof i["curvevisible"]=="boolean"&&e.aPi_(i["curvevisible"]);this.XVi_();if(i["linestyle"]!==void 0){e.gt_()!=null&&e.iC_(e.gt_(),rh.sC_,this.hOi_());if(i["linestyle"]!=null){const t=hl.Wi_(i["linestyle"]);e.rB_(t)}else e.rB_(null);if(e.gt_()!=null){e.tC_(e.gt_(),rh.sC_,this.hOi_());this.hOi_().call(this)}}if(i["microposition"]!==void 0){const t={top:i["microposition"]["top"]!==void 0?i["microposition"]["top"]:1,bottom:i["microposition"]["bottom"]!==void 0?i["microposition"]["bottom"]:0};e.Oqi_(t["top"],t["bottom"]);this.xVi_.Oqi_(1-t["top"],1-t["bottom"])}i["logarithmicscale"]!==void 0&&e.oPi_(i["logarithmicscale"]);i["interpolationtype"]!==void 0&&e.soi_(i["interpolationtype"]);i["borderlinestyle"]!==void 0&&e.lQi_(i["borderlinestyle"],!(i["borderlinestyle"]instanceof hl));i["autoscale"]!=null&&(this.HVi_.lqi_=i["autoscale"]);this.HVi_.min=i["min"];this.HVi_.max=i["max"];this.ZVi_()}this.rJi_.td_();return this}ZVi_(){let t=null;const i=this._Hi_();if(this.GYi_()["labeltext"]!=null)t=this.GYi_()["labeltext"];else{if(i==null)return this;const s=i.curve;if(s==null)return this;const e=[s.dn_()],A=this.kJi_?this.kJi_.gn_():null,n=this.kJi_?this.kJi_.MCt_():null;if(A!=null&&A.fn_()!==""){e.push(" (");e.push(A.fn_());e.push(")")}else if(n!=null&&n.fn_()!==""){e.push(" (");e.push(n.fn_());e.push(")")}t=e.join("")}if(t!=null){const i=this._Hi_();if(i!=null){i.axis!=null&&i.axis.E__(t);i.gJi_!=null&&i.gJi_.dt_({text:t})}}return this}HC_(t){if(t!==this.dn_()){super.HC_(t);const i=this._Hi_();if(i!=null&&i.curve!=null){i.curve.HC_(t);i.curve.td_()}this.ZVi_();if(i!=null&&i.AOi_!=null){i.AOi_.vW_();i.AOi_.td_()}}}cft_(t){const i=this.RJi_,s=this.kJi_;if(i==null||s==null)return new mA;const e=new mA(i.nA_(),s.nA_(),i.hA_(),s.hA_());if(t===!0)return e;let A,n,h=this.UU_["curve"]["properties"]["neatlimits"];typeof h=="boolean"&&(h={enable:h});if(typeof h!="boolean"&&h["enable"]!==!1){A=h["min"];n=h["max"]}(typeof A!="number"||Number.isNaN(A))&&(A=s.nA_());(typeof n!="number"||Number.isNaN(n))&&(n=s.hA_());const r=h&&h["enable"]!==!1&&this.UU_["curve"]["properties"]["neatlimitscenteredonzero"]!==!0&&this.UU_["curve"]["properties"]["autoscale"]===!0,o=this._Hi_();if(r){this.rOi_==null?this.rOi_=new WC({orientation:fg.ax_,neatlimits:!0,preciselimits:h["precise"]===!0,logarithmic:this.UU_["curve"]["properties"]["logarithmicscale"]===!0}):this.rOi_._j_()===h["precise"]&&this.rOi_.tZ_()===this.UU_["curve"]["properties"]["logarithmicscale"]||this.rOi_.setOptions({preciselimits:h["precise"]===!0,logarithmic:this.UU_["curve"]["properties"]["logarithmicscale"]===!0});if(!isFinite(A)&&!isFinite(n)){A=-.5;n=.5}const t=this.rJi_&&this.rJi_.getParent(),s=t instanceof Ic?t.$Y_():null,r=s&&s.Ts_()>0?s.Ts_():null;if(o!=null&&o.axis!=null){o.axis.KE_(this.rOi_);if(r){if(this.UU_["curve"]["properties"]["logarithmicscale"]===!0){A=NA.log10(A,null,!0);n=NA.log10(n,null,!0)}o.axis.V__(A,n,s.Ts_())}}else r&&this.rOi_.Wj_(A,n,{size:r});return this.UU_["curve"]["properties"]["logarithmicscale"]===!0?e.ce_(i.nA_(),Math.pow(10,this.rOi_.nA_()),i.hA_(),Math.pow(10,this.rOi_.hA_())):e.ce_(i.nA_(),this.rOi_.nA_(),i.hA_(),this.rOi_.hA_())}o!=null&&o.axis!=null&&o.axis.KE_(null);if(this.UU_["curve"]["properties"]["neatlimits"]!==!1){const t=NA.iA_(A,n,!1,this.UU_["curve"]["properties"]["neatlimitscenteredonzero"]);return e.ce_(i.nA_(),t.Xs_(),i.hA_(),t.zs_())}return e}XVi_(){const t=this.UU_["curve"]["properties"];if(this.rJi_!=null){if(this.kVi_!=null){let i=this.kVi_.jY_();const s=new mA(this.kVi_.rt_());let e,A;if(this.oJi_!=null&&this.oJi_.oOi_()){e=this.oJi_.nA_();A=this.oJi_.hA_();s.ce_(s.we_(),e,s.Qe_(),A)}else if(t["autoscale"]===!0){const t=this.cft_();if(t!=null){if(!isFinite(t.getY())||isNaN(t.getY())||!isFinite(t.Ts_())||isNaN(t.Ts_())){s.setY(-.5);s.Be_(1)}else if(NA.equals(t.Ts_(),0)){s.setY(t.getY()-NA.Je_/2);s.Be_(NA.Je_)}else{s.setY(t.getY());s.Be_(t.Ts_())}i=!1}}else if(!isNaN(t["min"])&&t["min"]!=null&&!isNaN(t["max"])&&t["max"]!=null){s.ce_(s.we_(),t["min"],s.Qe_(),t["max"]);i=t["max"]<=t["min"]}const n=this.cft_();if(t["logarithmicscale"]&&n.getY()===s.getY()&&n.Ts_()===s.Ts_()){const t=s.getY(),i=t+s.Ts_();if(s.getY()!==0){s.setY(NA.log10(t));s.Be_(NA.log10(i)-NA.log10(t))}else s.Be_(NA.log10(i))}s.Ce_(this.kVi_.rt_())||this.kVi_.Lq_(s);if(this.kVi_.jY_()!==i){this.kVi_.Eq_(i);this.kVi_.td_()}this.rJi_.ZJi_(i?s.pe_():s.Ee_());this.rJi_._Ji_(i?s.Ee_():s.pe_());const h=this._Hi_();if(h!=null&&h.axis!=null){h.axis.U__(C2*Math.PI/2);h.axis.Lq_(s)}this.rJi_.notify(W1.GJi_,this.rJi_)}this.notify(m1.pqi_,this,this)}}eqi_(){const t=this._Hi_();if(t!=null){const i={},s=t.curve;i["id"]=t.id;i["name"]=s.dn_();const e=this.kVi_==null?null:this.kVi_.rt_();i["autoscale"]=this.UU_["curve"]["properties"]["autoscale"];i["neatlimits"]=this.UU_["curve"]["properties"]["neatlimits"];i["neatlimitscenteredonzero"]=this.UU_["curve"]["properties"]["neatlimitscenteredonzero"];i["visible"]=s.$C_();i["unit"]=this.UU_["curve"]["properties"]["unit"];i["flip"]=this.kVi_==null?null:this.kVi_.jY_();i["max"]=e==null?null:i["flip"]?e.Ee_():e.pe_();i["min"]=e==null?null:i["flip"]?e.pe_():e.Ee_();i["axisposition"]=t.fJi_;i["linestyle"]=this.rJi_.gt_();i["microposition"]=this.UU_["curve"]["properties"]["microposition"];i["interpolationtype"]=this.UU_["curve"]["properties"]["interpolationtype"];i["logarithmicscale"]=this.UU_["curve"]["properties"]["logarithmicscale"];i["borderlinestyle"]=s.uQi_();i["barmode"]=this.UU_["curve"]["properties"]["barmode"];return i}return null}PVi_(t){t==null&&(t={});t!==this.UU_["curvesymbol"]&&(this.UU_["curvesymbol"]=Pi(t,this.UU_["curvesymbol"]));const i=this.UU_["curvesymbol"];typeof i["type"]=="string"&&ki('Symbol option "type" for TimeSeriesObject is deprecated since 4.0, use "painter" instead');const s=i["painter"]||Y1._qi_(i["type"]);let e=il.BD_(this.rJi_.gt_().getColor());i["fillstyle"]!=null&&(e=i["fillstyle"]);this.DIt_.dt_({alignment:dA.ne_,width:i["width"],height:i["height"],sizeisindevicespace:!0,fillstyle:e});this.DIt_.rk_(s);return this}lOi_(){this.UU_["curvesymbol"]&&this.UU_["curvesymbol"]["type"]&&Rs(this.UU_["curvesymbol"],[{name:"type",value:this.UU_["curvesymbol"]["type"],alt:"painter"}],"TimeSeriesObject#getSymbolOptions");return this.UU_["curvesymbol"]}uOi_(){return this.UU_["curvelimits"]}VVi_(t){t==null&&(t={});if(t!==this.UU_["curvelimits"]){t=Pi(t,{});this.UU_["curvelimits"]=Pi(t,this.UU_["curvelimits"])}const i=this.UU_["curvelimits"];let s;s=this.rJi_!=null&&this.rJi_.gt_()!=null&&this.rJi_.gt_().getColor()!=null?this.rJi_.gt_().getColor():"rgba(0, 0, 0, 0)";this.xVi_.Cq_(i["width"]).nf_(i["visible"]);const e=this.xVi_.HY_(0);e.PZ_(null);const A=e.ZZ_();A.Px_("edge",null);A.Px_("major",null);A.Px_("minor",null);A.Ox_("major",null);A.Ox_("minor",null);A.Ox_("edge",new qa({font:i["font"],color:s}));this.notify(m1.Qqi_,this,this.xVi_);return this}hOi_(){this.TVi_==null&&(this.TVi_=()=>{this.RTi_({});this.VVi_({});this.OVi_({});this.PVi_({})});return this.TVi_}aOi_(){return this.UU_["legenditem"]}OVi_(t){t==null&&(t={});if(t!==this.UU_["legenditem"]){t=Pi(t,{});t=Pi(t,{});this.UU_["legenditem"]=Pi(t,this.UU_["legenditem"])}this.UU_["legenditem"]["autocolorlabel"]===!0?this.UU_["legenditem"]["labelcolor"]=null:this.UU_["legenditem"]["labelcolor"]||(this.UU_["legenditem"]["labelcolor"]=a2);this.LVi_.setOptions(this.UU_["legenditem"]);this.notify(m1.wqi_,this,this.LVi_);return this}WVi_(t){t==null&&(t={});if(t!==this.UU_["tooltipitem"]){t=Pi(t,{});this.UU_["tooltipitem"]=Pi(t,this.UU_["tooltipitem"])}this.qVi_.setOptions(this.UU_["tooltipitem"]);return this}gOi_(){return this.UU_["tooltipitem"]}cOi_(t){this.IOi_=t;this.notify(m1.mqi_,this);return this}LPi_(){return this.IOi_}fOi_(t){this.UVi_=t||"";return this}UPi_(){return this.UVi_}rqi_(){return this.HVi_}dispose(){this.LVi_!=null&&this.LVi_.dispose();this.xVi_!=null&&this.xVi_.dispose();this.DIt_!=null&&this.DIt_.dispose();this.GPi_!=null&&Object.keys(this.GPi_).forEach((t=>{this.GPi_[t]!=null&&this.GPi_[t].dispose!=null&&this.GPi_[t]instanceof u2&&this.GPi_[t].dispose()}));if(this.YVi_!=null){this.YVi_.off(Lb.Iyt_,this.$Vi_());this.YVi_.off(Lb.fyt_,this.tOi_());this.YVi_.off(Lb.Cyt_,this.$Vi_());this.YVi_.off(Lb.dyt_,this.iOi_());this.YVi_.off(Lb.Rct_,this.xPi_());this.YVi_.off(Jb.wC_,this.xPi_());if(this.kJi_){this.kJi_.off(xD.gf_,this.iPi_());this.kJi_=null}this.YVi_=null}this.rJi_!=null&&this.rJi_.dispose();super.dispose()}$Vi_(){this.COi_==null&&(this.COi_=()=>{this.updating++;this.state={dOi_:this.BOi_(),wOi_:this.QOi_(),EOi_:this.Em_(),pOi_:this.pm_()}});return this.COi_}tOi_(){this.mOi_==null&&(this.mOi_=(t,i,s)=>{this.updating>0&&this.updating--;if(this.Jni_()){if(s["from"]===0){const t=this.BOi_();return this.yOi_(t,this.state.dOi_,t,t,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_)}if(s["from"]+s["count"]===this.RJi_.getLength())return this.yOi_(this.BOi_(),this.QOi_(),this.state.dOi_,this.state.wOi_,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_,!0)}return this.updating===0?this.yOi_():this});return this.mOi_}iOi_(){this.DOi_==null&&(this.DOi_=(t,i,s)=>{this.updating>0&&this.updating--;if(this.Jni_()){if(s["from"]===0)return this.yOi_(this.state.dOi_,this.BOi_(),this.state.dOi_,this.state.dOi_,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_);if(s["from"]===this.RJi_.getLength()){const t=this.QOi_();return this.yOi_(t,this.state.wOi_,t,t,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_)}}return this.updating===0?this.yOi_():this});return this.DOi_}xPi_(){this.MOi_==null&&(this.MOi_=(t,i,s)=>{this.updating>0&&this.updating--;if(this.updating!==0)return this;let e,A,n,h,r;if(t===Lb.Rct_){h=this.BOi_();r=this.QOi_();this.yOi_(h,r,h,r,!0);return this}if(!Array.isArray(s)&&s&&this.state!=null)switch(s["type"]){case"updated":if(s["count"]===0)return this;if(this.Jni_()){A=s["index"];n=Math.min(s["index"]+s["count"],this.RJi_.getLength()-1);h=this.RJi_.getValue(A);r=this.RJi_.getValue(n);this.yOi_(h,r,h,r,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_);return this}break;case"added":if(s["count"]===0)return this;if(this.Jni_()){if(s["index"]===0){e=this.BOi_();return this.yOi_(e,this.state.dOi_,e,e,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_)}return this.yOi_(this.BOi_(),this.QOi_(),this.state.dOi_,this.state.wOi_,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_,s["index"]+s["count"]===this.RJi_.getLength())}break;case"removed":if(this.Jni_()){if(s["index"]===0)return this.yOi_(this.state.dOi_,this.BOi_(),this.state.dOi_,this.state.dOi_,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_,!1,!0,!1);if(s["index"]===this.RJi_.getLength()){const t=this.QOi_();return this.yOi_(t,this.state.wOi_,t,t,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_,!1,!1,!0)}A=s["index"];n=Math.min(s["index"]+s["count"],this.RJi_.getLength()-1);h=this.RJi_.getValue(A);r=this.RJi_.getValue(n);return this.yOi_(h,r,h,r,this.Em_()!==this.state.EOi_||this.pm_()!==this.state.pOi_)}break}return this.yOi_()});return this.MOi_}yOi_(t,i,s,e,A,n,h,r){let o=null;A==null&&(A=!0);n==null&&(n=!1);h==null&&(h=!1);r==null&&(r=!1);const l=this.UU_["curve"]["properties"];if(n){o=new mA(0,e,1,i);A&&l["autoscale"]!==!0&&(o=this.cft_())}else if(this.Jni_()&&isFinite(s)&&isFinite(e)&&isFinite(t)&&isFinite(i)){t=t<e?t:Math.min(e,t);i=i<e?i:Math.max(e,i);o=new mA(0,t,1,i)}else{t=isNaN(s)?t:Math.min(s,t);i=isNaN(e)?i:Math.max(e,i);isFinite(t)&&isFinite(i)&&(o=new mA(0,t,1,i))}l["autoscale"]===!0&&this.XVi_();const u=!n||A;if(this.rJi_){o&&!o.isEmpty()&&this.rJi_&&this.rJi_.sd_()!=null&&this.rJi_.sd_().rn_(o,o);this.rJi_.zJi_(o,u)}return this}Em_(){if(this.oJi_!=null&&this.oJi_.oOi_())return this.oJi_.nA_();const t=this.UU_["curve"]["properties"];if(t["autoscale"]===!0){const t=undefined;return this.cft_().Ee_()}return Math.min(t["min"],t["max"])}pm_(){if(this.oJi_!=null&&this.oJi_.oOi_())return this.oJi_.hA_();const t=this.UU_["curve"]["properties"];if(t["autoscale"]===!0){const t=undefined;return this.cft_().pe_()}return Math.max(t["min"],t["max"])}BOi_(){return this.RJi_?this.RJi_.nA_():Number.NaN}QOi_(){return this.RJi_?this.RJi_.hA_():Number.NaN}Jni_(){return this.RJi_&&this.RJi_.xct_()===oA.Ds_}N_(){const t=super.N_();t["uri"]=this.RVi_;t["curve"]={properties:this.eqi_()};t["curvesymbol"]=this.lOi_();t["curvelimits"]=this.uOi_();t["legenditem"]=this.aOi_();t["tooltipitem"]=this.gOi_();return t}dt_(t){super.dt_(t);t["uri"]!==void 0&&(this.RVi_=t["uri"]);if(t["curve"]!==void 0){t["curve"]["data"]!==void 0&&this.setData(t["curve"]["data"]);t["curve"]["properties"]!==void 0&&this.JVi_(t["curve"]["properties"])}t["curvesymbol"]!==void 0&&this.PVi_(t["curvesymbol"]);t["curvelimits"]!==void 0&&this.VVi_(t["curvelimits"]);t["legenditem"]!==void 0&&this.OVi_(t["legenditem"]);t["tooltipitem"]!==void 0&&this.WVi_(t["tooltipitem"]);return this}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesObject")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVMYXlvdXQiOiJ3cV8iLCJzZXRDdXJ2ZU9wdGlvbnMiOiJKVmlfIiwic2V0TmFtZSI6IkhDXyIsImdldEN1cnZlT3B0aW9ucyI6ImVxaV8iLCJzZXRTeW1ib2xPcHRpb25zIjoiUFZpXyIsImdldFN5bWJvbE9wdGlvbnMiOiJsT2lfIiwiZ2V0Q3VydmVMaW1pdHNHcm91cE9wdGlvbnMiOiJ1T2lfIiwic2V0Q3VydmVMaW1pdHNHcm91cE9wdGlvbnMiOiJWVmlfIiwiZ2V0TGVnZW5kT3B0aW9ucyI6ImFPaV8iLCJzZXRMZWdlbmRPcHRpb25zIjoiT1ZpXyIsInNldFRvb2x0aXBPcHRpb25zIjoiV1ZpXyIsImdldFRvb2x0aXBPcHRpb25zIjoiZ09pXyIsImdldFByb3BlcnRpZXMiOiJOXyIsInNldFByb3BlcnRpZXMiOiJkdF8ifX19");const B2=function(t){return t},w2=function(t,i,s){return{linestyle:i,fillstyle:s}};var Q2=Ci(function(){let i=class t extends x1{constructor(t,i){super(t=Pi(t,{renderingorder:B2,highlightingmethod:w2,barvaluevisibility:30},!0));this.bf_=null;this._q_=(new YC).sR_(!0).tR_(!0).AR_(!0).hR_(!0).rd_(!1);this.vOi_=w2;this.bOi_=B2;this.NOi_=[];this.SOi_=null;this.XO_=[];this.GOi_=0;this.ROi_=0;this.kOi_=null;this.FOi_=null;this.UU_=t;this.xOi_=[];this.LOi_=[];this.UOi_(i);this.dt_(t)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.UU_=Pi(t,this.UU_,!0);this.YOi_(this.UU_["renderingorder"]);this.TOi_(this.UU_["highlightingmethod"]);this.KOi_(this.UU_["barvaluevisibility"]);this.td_();return this}N_(){const t=super.N_();return Pi(this.UU_,t)}KOi_(t){this.HOi_=typeof t=="boolean"?t===!0?0:1/0:t;this.UU_["barvaluevisibility"]=t;this.td_();return this}qOi_(){return this.UU_["barvaluevisibility"]}UOi_(t){if(t!=null&&t.some((function(t){return!(t instanceof d2)})))return this;this.XO_!=null&&this.XO_.forEach((t=>{t.dPi_()!=null&&t.dPi_().off(xD.gf_,this.JOi_);t.Tri_()!=null&&t.Tri_().off(xD.gf_,this.JOi_)}));this.POi_=t||[];this.XO_=this.POi_.map((function(t){return t._Hi_().curve}));if(this.XO_!=null){this.XO_.forEach((t=>{t.dPi_()!=null&&t.dPi_().on(xD.gf_,this.JOi_);t.Tri_()!=null&&t.Tri_().on(xD.gf_,this.JOi_)}));this.GOi_=0;this.ROi_=0}this.td_();return this}YOi_(t){t==null&&(this.bOi_=B2);if(typeof t=="function"){this.bOi_=t;this.UU_["renderingorder"]=this.bOi_;this.td_();return this}this.td_();return this}VOi_(){return this.bOi_}TOi_(t){t==null&&(this.vOi_=w2);if(typeof t=="function"){this.vOi_=t;this.UU_["highlightingmethod"]=this.vOi_;this.td_();return this}this.td_();return this}OOi_(){return this.vOi_}getBounds(){return this.bf_!=null?this.bf_.lock():null}render(t){super.render(t);if(this.$C_()===!1||this.XO_==null||this.XO_.length===0)return;const i=this.sd_()!=null?t.uS_(this.sd_()):t,s=this.HOi_===1/0?0:this.HOi_,e=i.cR_().clone().Le_(s,s),A=undefined,n=i.Ji_().gI_(e),h=this.WOi_(i,n),r=i.Ji_();if(this.kOi_==null||!this.kOi_.RI_(r)){this.xOi_=[];this.kOi_=r}this.zOi_(i,h);this.XOi_(i,h,n)}dft_(t){this.NOi_=t;this.td_();return this}jOi_(t,i){return this.NOi_.find((function(s){return s!=null&&s["lineindex"]===t&&s["datapointindex"]===i}))}dispose(){if(!this.Df_()){this.XO_!=null&&this.XO_.forEach((t=>{t.dPi_()!=null&&t.dPi_().off(xD.gf_,this.JOi_);t.Tri_()!=null&&t.Tri_().off(xD.gf_,this.JOi_)}));super.dispose()}}JOi_(){this.SOi_=this.SOi_==null?function(){this.td_()}:this.SOi_;return this.SOi_}Dft_(t,i){const s=new lA(i["textax"],i["textay"]);if(this.xOi_.length===0){this.xOi_.push(s);return!0}let e,A,n=!0;for(e=this.xOi_.length-1;e>=0;--e){A=bn.jc_(s.getX()-this.xOi_[e].getX(),s.getY()-this.xOi_[e].getY(),t.Ji_());if(A<=this.HOi_){n=!1;break}}n===!0&&this.xOi_.push(s);return n}ZOi_(t,i){return i===0?(t[i+1]-t[i])/2:t[i]-t[i-1]}zOi_(t,i){i.forEach((i=>{if(i!=null){let s=[];i.forEach(function(t,i){this._Oi_.push({order:i,value:t.Jqi_()["barvalue"],height:t.Jqi_()["barheight"]})}.bind({_Oi_:s}));s=this.VOi_()(s);for(let e=0;e<s.length;++e){const A=undefined,n=s[e]["order"],h=i[n].Jqi_();let r=hl.Wi_(this.POi_[n].eqi_()["barmode"]["linestyle"]).clone(),o=il.BD_(this.POi_[n].eqi_()["barmode"]["fillstyle"]).clone();r=hl.Wi_(r).clone();o=il.BD_(o).clone();const l=this.jOi_(n,h["datapointindex"]);if(l!=null){const t=this.OOi_()(l,r,o);r=hl.Wi_(t["linestyle"]);o=il.BD_(t["fillstyle"])}t.rB_(r);t.iQ_(o);t.pR_(h["barleft"],h["barbottom"],h["barwidth"],h["barheight"])}}}));return this}XOi_(t,i,s){t.g_(new qa);this.LOi_.forEach((i=>{this.vdt_(t,i,i["lineindex"],s)}));this.xOi_=this.LOi_.map((function(t){return new lA(t["textax"],t["textay"])})).concat(this.xOi_);this.LOi_=[];i.forEach((i=>{if(i!=null)for(let e=0;e<i.length;++e){const A=i[e].Jqi_();this.Dft_(t,A)&&this.vdt_(t,A,e,s)}}));return this}vdt_(t,i,s,e){const A=undefined,n=this.POi_[s].eqi_()["barmode"]["barvalues"]["formatter"].format(i["barvalue"]),h=this.POi_[s].eqi_()["barmode"]["barvalues"]["margins"];let r=h["left"]*Math.abs(t.XR_().BI_()),o=h["top"]*Math.abs(t.XR_().sI_());r+=i["barleft"]+i["barwidth"]/2;o+=i["barheight"];let l=this.POi_[s].eqi_()["barmode"]["barvalues"]["textstyle"];l=qa.Wi_(l);l=l instanceof qa?l:new qa;let u=this.POi_[s].eqi_()["barmode"]["barvalues"]["rotationangle"];u*=Math.PI/180;this._q_.a_(n).g_(l).gR_(r,o).rotate(u,r,o).render(t);this._q_.rotate(-u,r,o);const a=this.HOi_*Math.abs(t.XR_().BI_());r>e.Qe_()-a*2&&this.LOi_.push(i)}$Oi_(t,i){const s=$o.measureText(i,this._q_.FE_()),e=s.Ie_()*Math.abs(t.XR_().BI_()),A=s.Ts_()*Math.abs(t.XR_().sI_());return new xA(e,A)}WOi_(t,i){const s=[];for(let e=0;e<this.XO_.length;++e){if(this.POi_[e].eqi_()["barmode"]["enabled"]!==!0)continue;const A=this.XO_[e];A.jJi_();A.uPi_(t);const n=A.$Ji_(),h=n._ni_(),r=n.$ni_(),o=n.Hni_();if(h==null||r==null||o==null)return s;let l=-1,u=-1,a=0,g=h.length-1,c;if(i!=null){const t=n.Pni_(i.we_(),i.Qe_());a=t.Xs_();g=t.zs_()}for(c=a;c<g;c++)if(!isNaN(h[c])||l!==-1){l===-1&&(l=c);isNaN(h[c])&&(l=u+1);u=c}if(l!==-1&&u!==-1&&l!==u)for(c=l;c<=u;++c){const i=this.ZOi_(r,c);let A=this.POi_[e].eqi_()["barmode"]["barwidth"];A=typeof A=="number"?A*Math.abs(t.XR_().BI_()):i;A=Math.min(A,i);s[c]==null&&(s[c]=[]);const n=new k1({datapointindex:c,lineindex:e,barleft:r[c]-A/2,barbottom:0,barwidth:A,barheight:h[c],barvalue:o[c].Ehi_()}),l=n.Jqi_(),u=undefined,a=this.POi_[e].eqi_()["barmode"]["barvalues"]["formatter"].format(l["barvalue"]),g=this.POi_[e].eqi_()["barmode"]["barvalues"]["margins"],I=this.$Oi_(t,a);let f=g["left"]*Math.abs(t.XR_().BI_()),C=g["top"]*Math.abs(t.XR_().sI_());f+=l["barleft"]+l["barwidth"]/2;C+=l["barheight"];n.Rqi_({text:a,textax:f,textay:C,textwidth:I.Ie_(),textheight:I.Ts_()});s[c][e]=n}}return s}};i=t([_s("geotoolkit.widgets.timeseries.barmode.TimeSeriesBar")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var E2=Ci({tWi_:"onVisibleRangeChanged",iWi_:"onVisibleRangeChanging",sWi_:"onCursorChanged",DOt_:"beforeSelectionChange",yOt_:"onSelectionChanged",eWi_:"onAnnotationLineClick",AWi_:"onAnnotationClick"},2,"eyJvblZpc2libGVSYW5nZUNoYW5nZWQiOiJ0V2lfIiwib25WaXNpYmxlUmFuZ2VDaGFuZ2luZyI6ImlXaV8iLCJvbkN1cnNvckNoYW5nZWQiOiJzV2lfIiwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIjoiRE90XyIsIm9uU2VsZWN0aW9uQ2hhbmdlZCI6InlPdF8iLCJvbkFubm90YXRpb25MaW5lQ2xpY2siOiJlV2lfIiwib25Bbm5vdGF0aW9uQ2xpY2siOiJBV2lfIn0g");var p2=function(){let i=class t extends OS{constructor(t){t==null&&(t={});super(t=qi(t,{name:"groupTool"}));this.eFt_({pointerdown:this.zFt_.bind(this),pointermove:this.XFt_.bind(this),pointerup:this.Ct_.bind(this)});this.HU_=t["group"];this.OSt_=new bC;this.Eei_=new RD(null,this.Jgt_);this.Eei_.dI_(this.Jgt_.sd_());this.Eei_.register(this.HU_.D_(),new SD)}zFt_(t){const i=t.PP_(),s=undefined,e=this.dFt_(t)?this.fFt_():this.aFt_();this.W$t_=!1;let A,n=null,h=this.bFt_(this.Jgt_,t);const r=this.OSt_.select(this.Jgt_,h.x,h.y,e);if(r&&r.length>0)for(A=r.length-1;A>=1;A--){const i=r[A];if(i instanceof uD){n=i.fat_();n.Mgt_(i);n.setPosition(h.x,h.y);this.pei_=n;this.W$t_=!0;t.stopPropagation(!0);return}}h=this.bFt_(i,t);let o=this.OSt_.select(i,h.x,h.y,e).filter(Ih);o=o==null?null:o.filter((t=>t===this.HU_));h=this.bFt_(this.Jgt_,t);if(o&&o.length>0)for(A=o.length-1;A>=0;A--){n=this.Eei_.fat_(o[A]);if(n){n.ygt_(o[A]);n.setPosition(h.x,h.y);this.Eei_.Ogt_(n);this.pei_=n;this.W$t_=!0;t.stopPropagation(!0);return}}this.pei_=n;this.Eei_.Ogt_(null)}XFt_(t){if(!this.pei_)return;const i=this.bFt_(this.Jgt_,t);this.pei_.move(i.x,i.y);this.pei_.e7_().td_();t.stopPropagation(!0,!0)}Ct_(t){if(this.pei_){t.stopPropagation(!0);this.pei_.setPosition(null);this.pei_=null}}};i=t([_s("geotoolkit.widgets.timeseries.GroupTool")],i);return i}();var m2=Ci({Hz_:"outside",Kz_:"inside"},2,"eyJPdXRzaWRlIjoiSHpfIiwiSW5zaWRlIjoiS3pfIn0g");var y2=function(){let i=class t extends p1{constructor(t,i){super(t,i);this.nWi_=[]}dqi_(t){const i=t.x,s=t.y.map((t=>t.slice(0)));let e;this.nWi_=[];for(let t=0;t<s[0].length;++t){this.nWi_[t]=s[0][t];for(e=1;e<s.length;++e)this.nWi_[t]+=isNaN(s[e][t])?0:s[e][t];s[0][t]=s[0][t]*100/this.nWi_[t];for(e=1;e<s.length;++e){s[e][t]=isNaN(s[e][t])?0:s[e][t];s[e][t]=s[e][t]*100/this.nWi_[t]+(isNaN(s[e-1][t])?0:s[e-1][t])}}return{x:i,y:s}}sqi_(t){let i=Number.MAX_VALUE,s=0;t.forEach((t=>{const e=t.getData();i=Math.min(i,e.Ayt_(0).nA_());s=Math.max(s,e.Ayt_(0).hA_())}));return new mA(i,0,s,100)}};i=t([_s("geotoolkit.widgets.timeseries.PercentDataProcessor")],i);return i}();var D2=Ci({hWi_:"advanced",rWi_:"compact",oWi_:"simple"},2,"eyJBZHZhbmNlZCI6ImhXaV8iLCJDb21wYWN0IjoicldpXyIsIlNpbXBsZSI6Im9XaV8ifSAg");var M2=Ci(function(){let i=class t extends YB{ce_(t){if(!t)throw new Error("Invalid layout area");super.ce_(t);return this}IN_(t){const i=this.c1_.length>0||t===null?this.c1_:t;return Array.isArray(i)?Au.cN_(i):i}sT_(t,i){const s=this.B1_()!==null?this.B1_():t,e=undefined;return this.IN_(i)===null?t:!s||s.Ie_()<=0?null:s}eT_(t,i){const s=this.B1_()?this.B1_():t,e=this.IN_(i);if(!e||!s||s.Ie_()<=0)return this;e.forEach((t=>{t.ht_(s)}));return this}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJlVF8iLCJnZXRQcmVmZXJyZWRTaXplIjoic1RfIiwiZ2V0SXRlcmF0b3IiOiJJTl8iLCJzZXRSZWN0IjoiY2VfIn19fSAg");var v2=function(){let i=class t extends p1{dqi_(t){const i=t.x,s=t.y.map((t=>t.slice(0)));for(let t=1;t<s.length;++t)for(let i=0;i<s[t].length;++i){s[t][i]=isNaN(s[t][i])?0:s[t][i];s[t][i]+=isNaN(s[t-1][i])?0:s[t-1][i]}return{x:i,y:s}}sqi_(t){let i=Number.MAX_VALUE,s=0,e=Number.MAX_VALUE,A=0;t.forEach((t=>{const n=t.getData();i=Math.min(i,n.Ayt_(0).nA_());e=Math.min(e,n.Ayt_(1).nA_());s=Math.max(s,n.Ayt_(0).hA_());A=Math.max(A,n.Ayt_(1).hA_())}));return new mA(i,e,s,A)}};i=t([_s("geotoolkit.widgets.timeseries.StackDataProcessor")],i);return i}();const b2=-1;var N2=Ci(function(){let i=class t extends J1{constructor(t){const i=Y1.jqi_();Pi(t,i);super(i);this._objects=[];this.ai_=null}initialize(t){super.initialize(t);this.RTi_(this.UU_["curveaxis"]);this.lWi_();this.uWi_();return this}ZJi_(t){this.UU_["min"]=t;this.lWi_();this.aWi_();this.uWi_();return this}nA_(){return this.UU_["min"]}_Ji_(t){this.UU_["max"]=t;this.lWi_();this.aWi_();this.uWi_();return this}hA_(){return this.UU_["max"]}gWi_(t){this.UU_["sharelimits"]=t;this.lWi_();this.aWi_();this.uWi_();return this}oOi_(){return this.UU_["sharelimits"]}aWi_(){this._objects.forEach((t=>{t.XVi_()}))}RTi_(t){super.RTi_(t);this.uWi_();return this}checkValidity(t){if(Array.isArray(t)){let i=!1;for(let s=0;s<t.length;s++){i=this.checkValidity(t[s]);if(i===!1)return i}return i}if(t==null||t.jVi_==null||t.jVi_()!=null)return!1;const i=t.eqi_()["unit"];this.ai_==null&&t.eqi_!=null&&t.eqi_()!=null&&(this.ai_=i);return this.ai_ instanceof JA?this.ai_.pn_(i):i instanceof JA?i.pn_(this.ai_):OA.Ai_().gn_(this.ai_).pn_(i)}zE_(t){const i=undefined;if(this.checkValidity(t)===!1)return this;if(Array.isArray(t))for(let i=0;i<t.length;i++)this.zE_(t[i]);if(t!=null&&t instanceof d2&&this._objects.indexOf(t)===-1){t.zVi_(this);this._objects.push(t);t.RTi_({})}this.ZVi_();return this}cWi_(t){if(Array.isArray(t))for(let i=t.length;i>-1;i--)this.cWi_(t[i]);if(t instanceof d2&&this._objects.indexOf(t)!==-1){const i=this._objects.indexOf(t);t.zVi_(null);this._objects.splice(i,1);t.RTi_({})}this.ZVi_();return this}get(){return this._objects}IWi_(){this.cWi_(this._objects);return this}ZVi_(){let t=null;const i=this._Hi_();if(this.GYi_()["labeltext"]!=null)t=this.GYi_()["labeltext"];else{if(i==null)return this;const s=[];this._objects.forEach((t=>{const i=t._Hi_();i!=null&&i.curve!=null&&i.curve.dn_!=null&&s.push(i.curve.dn_())}));let e=s.join(", ");const A=this.ai_ instanceof JA?this.ai_.fn_():this.ai_;this.ai_!=null&&(e+=" ("+A+")");t=e}if(t!=null){const i=this._Hi_();if(i!=null){i.axis!=null&&i.axis.E__(t);i.gJi_!=null&&i.gJi_.dt_({text:t})}}return this}uWi_(){const t=this.nA_(),i=this.hA_(),s=this._Hi_();if(s!=null){s.cJi_.Eq_(t<i);s.axis.U__(b2*Math.PI/2)}return this}lWi_(){const t=this._Hi_();if(t!=null){t.cJi_.Lq_(new mA(0,this.nA_(),1,this.hA_()));t.axis.Lq_(new mA(0,this.nA_(),1,this.hA_()))}return this}};i=t([_s("geotoolkit.widgets.timeseries.TimeSeriesObjectGroup")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNaW4iOiJaSmlfIiwiZ2V0TWluIjoibkFfIiwic2V0TWF4IjoiX0ppXyIsImdldE1heCI6ImhBXyIsInNldFNoYXJlTGltaXRzIjoiZ1dpXyIsImdldFNoYXJlTGltaXRzIjoib09pXyIsInNldEF4aXNPcHRpb25zIjoiUlRpXyIsImFkZE9iamVjdCI6InpFXyIsInJlbW92ZU9iamVjdCI6ImNXaV8ifX19");var S2=Ci(function(){let i=class t extends kS{constructor(t,i){super(t);this.fWi_=i}CWi_(){return this.fWi_}};i=t([_s("geotoolkit.controls.tools.scroll.VisibleRangeChangeEventArgs")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRWaXNpYmxlUmFuZ2UiOiJDV2lfIn19fSAg");const G2=function(t,i,s){i=Pi(i,{});s=Pi(s,{});let e,A;e=t.iqi_(s["id"]);if(s["id"]!=null&&e!=null){A=e.eqi_();A!=null&&A["linestyle"]!=null&&A["linestyle"]instanceof hl&&A["linestyle"].de_(A["linestyle"].Ie_()-1)}e=t.iqi_(i["id"]);if(i["id"]!=null&&e!=null){A=e.eqi_();A!=null&&A["linestyle"]!=null&&A["linestyle"]instanceof hl&&A["linestyle"].de_(A["linestyle"].Ie_()+1)}},R2=function(t,i,s){return t.ex_({format:i})},k2=1,F2="M j, Y H:i:s",x2="curveaxisgroup",L2=36e5,U2=864e5,Y2="#6b6b6b",T2=2e6,K2={major:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}},minor:{color:"#ededed",width:1,pixelsnapmode:{x:!0,y:!0}},edge:{color:"#c4c4c4",width:1,pixelsnapmode:{x:!0,y:!0}}},H2="Arial",q2={small:"9px",medium:"10px",large:"14px"},J2=5,P2=q2["small"]+" "+H2,V2=q2["medium"]+" "+H2,O2=q2["large"]+" "+H2,W2=function(){return Pi({automodellimitsmode:!0,cursor:{linestyle:new hl({color:"rgba(237, 28, 36, 0.75)",width:1,pattern:el.yD_})},margin:[8,8,8,8],title:{visible:!0,height:40,text:"",font:O2,color:Y2,padding:[0,0,0,0],centered:!1},legends:{alignwithcentermodel:!0,direction:uw.D2_,height:25,position:m2.Hz_,visible:!0,width:100,linestyle:null,fillstyle:null,margintext:5,marginbottom:5,autocolorlabel:!0,legendoptions:{formatter:new $g({maximumfractiondigits:2,round:!0}),margintext:2,font:"bold 12px Arial",height:25,internalpadding:4,linestyle:new hl({color:"rgba(128, 128, 128, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new wr({color:"rgba(250, 250, 250, 0.95)"}),fixedwidth:null,labelcolor:Y2}},lastupdatedate:{visible:!0,followcursor:!1,font:"bold "+V2,color:Y2,formatter:F2},curve:{linestyle:{},visible:!0,autoscale:!0,min:null,max:null,neatlimits:!1,neatlimitscenteredonzero:!1,unit:""},curvelimits:{visible:!0,margin:5,width:60,font:"bold "+V2},curvesymbol:{visible:!0,width:8,height:8,painter:cE},modelgrid:{horizontaltickgenerator:(new JC).Px_("major",new hl(K2["major"])).Px_("minor",new hl(K2["minor"])).Px_("edge",new hl(K2["edge"])).yj_(20),verticaltickgenerator:new Zg(0).Px_("major",new hl(K2["major"])).Px_("minor",new hl(K2["minor"])).Px_("edge",new hl(K2["edge"])).Hx_("edge",!1).Hx_("minor",!1).Hx_("major",!1),horizontalvisibility:{major:!0,minor:!1,edge:!1},verticalvisibility:{major:!1,minor:!1,edge:!1}},modelaxis:{visible:!0,tickgenerator:null,baselinestyle:new hl(Y2)},southaxis:{visible:!0,height:20,font:"bold "+V2,color:Y2,tickgenerator:new Zg(0).Hx_("edge",!1).Jx_("edge",!0).Px_("major",null).Hx_("minor",!1).Jx_("minor",!1)},visiblerange:{visible:!0,height:20,font:"bold "+V2,color:Y2,formatter:F2},scrollbar:{type:D2.hWi_,visible:!0,height:30,options:{font:"bold "+P2,color:Y2,tickgenerator:null,formatter:"M j, Y"}},viewcache:!0,intervalbuttons:{visible:!0,intervals:{"1h":1e3*3600,"8h":1e3*3600*8,"1d":1e3*3600*24,"1w":1e3*3600*24*7,"1m":1e3*3600*24*30}},scrolltonowbutton:{visible:!1},tooltips:{visible:!0,linestyle:new hl({color:"rgba(175,175,175,0.5)",width:3}),fillstyle:new wr({color:"rgba(255,255,255, 0.85)"}),symbollinestyle:new hl({color:"rgba(225,225,225, 0.95)",width:2}),selectionradius:30,tooltipoptions:{formatter:new $g({maximumfractiondigits:2,round:!0}),margintext:4,font:"12px Arial",textcolor:"black",symbolsize:10,internalpadding:2,externalpadding:5,linestyle:null,fillstyle:null,fixedwidth:null,nanvisibility:!0,index:{visible:!1,textcolor:"black",symbol:null,name:"Time",indextext:"",unittext:""},singlerow:!1}},cursorselectionlimit:25,timezone:Ja.UTC,stack:{enabled:!1,fillstyles:null},percent:{enabled:!1,fillstyles:null,tooltip:{showoriginalvalue:!1}}},Y1.zqi_(),!0)};var z2=Ci(function(){let i=class t extends eK{constructor(t){super(t);this.hx_=Ig.sx_();this.dWi_=sg.sx_();this.BWi_=R2(this.dWi_,F2,this.hx_);this.wWi_=null;this.QWi_=null;this.EWi_=null;this.pWi_=null;this.mWi_=null;this.yWi_=W2();this.WHi_=new Cm;this.DWi_=new Cm;this.MWi_=new Cm;this.vWi_=null;this.bWi_=null;this.NWi_=null;this.SWi_=null;this.GWi_=null;this.RWi_=null;this.kWi_=null;this.FWi_=null;this.xWi_=null;this.LWi_=[];this.UWi_=[];this.YWi_=null;this.TWi_=null;this.wUi_=null;this.KWi_=null;this.HWi_=null;this.qWi_=this.yWi_["stack"];this.JWi_=this.yWi_["percent"];this.OIt_=null;this.PWi_=null;this.VWi_=G2;this.C4t_();this.A4t_();const i=this.yWi_["tooltips"]["tooltipoptions"];i["visual"]=new t2;this.OWi_=new i2(i);this.WWi_=new Q2(this.OIt_,null);this.zWi_=null;this.XWi_=()=>{this.vn_();this.Pei_();this.td_()};this.setOptions(t);this.jWi_.getData().add(this.OWi_)}$L_(t){if(this.hx_!==t){this.hx_=t;this.wWi_=null;this.QWi_=null;this.BWi_=R2(this.dWi_,F2,this.hx_)}return this}lx_(){return this.hx_}ZWi_(){const t=this.yWi_["intervalbuttons"]["intervals"],i=Object.keys(t),s=[];i.forEach((i=>{s.push({text:i,onclick:s=>{this._Wi_=t[i];this.$Wi_(t[i]);Math.abs(t[i]-(this.CWi_().zs_()-this.CWi_().Xs_()))>1?s.setState(e$.Off):s.setState(e$.On)}})}));const e={layout:new lw,toggle:!0,buttons:s};this.tzi_==null?this.tzi_=new n$(e):this.tzi_.C4t_(e);const A={layout:new ww,buttons:[{text:"Now",toggle:!0,styles:{pressed:{textstyle:new qa({font:"bold 8px Arial"}).setColor("white"),linestyle:new hl({color:"429529",width:3}),fillstyle:new wr("#50b432")}},onclick:t=>{this.izi_()}}]};this.szi_==null?this.szi_=new n$(A):this.szi_.C4t_(A)}C4t_(){this.ZWi_();this.T4_=(new sI).GY_([this.ezi_=(new sI).qC_("gridandaxesgroup").GY_([(new sI).Eq_(!0).qC_("gridandaxesgroup").GY_([this.Azi_=new sB(this.yWi_["modelgrid"]["horizontaltickgenerator"],this.yWi_["modelgrid"]["verticaltickgenerator"])]),this.nzi_=(new nd).setOrientation(fg.ux_)]),this.HWi_=new sI,this.hzi_=(new sI).Eq_(!0).gk_(this.yWi_["viewcache"]===!0?new tI:null),this.KWi_=new sI,this.Jgt_=(new sI).JC_("manipulator_layer").GY_([this.rzi_=(new sI).Eq_(!0)]),this.ozi_=new sI,this.lzi_=new sI,this.e4t_().GY_(this.uzi_=(new sI).GY_([(new sI).cq_(new zB).GY_([this.azi_=(new sI).aq_(!0).cq_(new lw).kY_(!0)])]))]);this.nzi_.LE_(yr.JQ_);this.aq_(!0).cq_(new zB).GY_([this.gzi_=(new sI).aq_(!0).qC_("layoutgroup").cq_(new zB).GY_([this.czi_=(new sI).Lq_(new mA(0,0,1,1)).qC_("titlelayoutgroup").GY_([this.pZ_=new YC({text:"",ax:0,ay:.5,alignment:dA.he_}).BX_({visible:!0}),this.Izi_=new YC({text:"",ax:1,ay:.5,alignment:dA.oe_})]),this.fzi_=new rQ({model:this.T4_,south:[this.Czi_=(new nd).LE_(yr.Top).setOrientation(fg.ux_)]}).oN_(new jQ),this.dzi_=(new sI).aq_(!0).qC_("rangelayoutgroup").GY_([(new sI).Lq_(new mA(0,0,1,1)).GY_([this.Bzi_=new YC({text:"min",ax:0,ay:.5,alignment:dA.he_}),this.wzi_=new YC({text:"max",ax:1,ay:.5,alignment:dA.oe_})])]),this.Qzi_=(new sI).aq_(!0)])]);this.jWi_=new fN({data:new Cm,linestyle:hl.Wi_(this.yWi_["tooltips"]["linestyle"]),fillstyle:il.BD_(this.yWi_["tooltips"]["fillstyle"]),autosize:!0,sizeisindevicespace:!0}).cq_(new Ew).nf_(!1).kY_(!0);this.GY_(this.jWi_);this.jWi_.wq_();this.dzi_.GY_([this.tzi_,this.szi_]);this.Ezi_=[];this.pzi_=[];this.fzi_.v4_(ha.eG_).nf_(!1);this.fzi_.v4_(ha.sG_).nf_(!0);this.fzi_.v4_(ha.AG_).nf_(!0);this.fzi_.v4_(ha.sG_).Cq_(0);this.fzi_.v4_(ha.AG_).Cq_(0);this.Czi_.PZ_(null);return this.gzi_}A4t_(){this.tzi_!=null&&this.h4t_(this.tzi_.cUt_());this.szi_!=null&&this.h4t_(this.szi_.cUt_());this.h4t_(this.tAi_=new IY({layer:this.hzi_,mode:nY.X}).on(rY.v0t_,((t,i,s)=>{const e=s.ot_();if(!e)return;const A=new fA(e.we_(),e.Qe_());this.mzi_(A);this.hzi_.zT_();const n=new S2(E2.tWi_,A);this.yzi_(E2.tWi_,this,n)})));this.TWi_=new cF(this.Jgt_,"cursor").FVt_(null).kVt_(this.yWi_["cursor"]["linestyle"]).on(xS.Okt_,(()=>{this.jWi_.nf_(!1);this.wUi_!=null&&this.wUi_.uFt_(1).gFt_(1)})).on(xS.Vkt_,(()=>{this.wUi_!=null&&this.wUi_.uFt_(2).gFt_(5)})).on(tF.EVt_,((t,i,s)=>{this.jWi_.nf_(!1);const e=s.getPosition().getX();isNaN(e)?this.rzi_.nf_(!1):this.rzi_.nf_(this.yWi_["curvesymbol"]["visible"]);this.yWi_["lastupdatedate"]["followcursor"]&&(isNaN(e)?this.Izi_.a_(""):this.Izi_.a_(this.Dzi_(e)));this.wVt_(s.getPosition(),s.Fkt_());this.Mzi_(s.getPosition(),s.Fkt_());this.B0t_(s.getPosition(),s.Fkt_());this.notify(E2.sWi_,this,i.getPosition())})).on(xS.Jkt_,(()=>{if(!this.TWi_.isEnabled()){this.jWi_.nf_(!1);this.rzi_.nf_(!1);this.Izi_.a_(this.Dzi_(this.T4_.rt_().Qe_()))}}));this.YWi_=new gU(this.Jgt_).HC_("rubberband").Kv_(!1).TZt_(Wk.ux_).rWt_(!0).on(xS.Jkt_,((t,i)=>{if(i.isEnabled()){this.nRi_.Kv_(!1);this.wUi_.Kv_(!1);this.tAi_.Kv_(!1)}else{this.nRi_.Kv_(!0);this.tAi_.Kv_(!0)}})).on(rU.jZt_,((t,i,s)=>{const e=s.getArea(),A=new fA(e.we_(),e.Qe_());this.mzi_(A);const n=new S2(E2.tWi_,A);this.yzi_(E2.tWi_,this,n)}));this.h4t_(new lG(this.Jgt_,"manipulatorTools").add([this.TWi_,this.YWi_]));this.h4t_(this.wUi_=(new MF).HC_("picking").on(wF.pOt_,((t,i,s)=>{const e=s.getSelection(),A=this.Cqi_();let n=0;const h={line:null,fill:null,legend:null,axis:null,annotation:null};let r;const o=function(t){return t instanceof YC||t instanceof nd};for(n=e.length-1;n>=0;--n)if(e[n]instanceof _1)h["line"]==null&&A.indexOf(e[n].XC_())>=0&&(h["line"]=e[n].XC_());else if(e[n]instanceof u2){let t=null;e[n].BVi_!=null&&e[n].BVi_ instanceof _1?t=e[n].BVi_:e[n].wVi_!=null&&e[n].wVi_ instanceof _1&&(t=e[n].wVi_);h["fill"]==null&&t!=null&&A.indexOf(t.XC_())>=0&&(h["fill"]=t.XC_())}else if(e[n]instanceof s2){if(h["legend"]==null&&A.indexOf(e[n].Uw_()._Hi_().id)>=0){h["legend"]=e[n].Uw_()._Hi_().id;r="legend"}}else if(e[n]instanceof b1){h["annotation"]=e[n].JV_()["id"];this.notify(E2.AWi_,this,e[n].JV_()["id"])}else if(e[n]instanceof R1)this.notify(E2.eWi_,this,e[n].JV_()["id"]);else if(h["axis"]==null&&e[n]instanceof sI&&e[n].XC_()===x2){const t=ur(e[n]).Gw_(o).xw_();t!=null&&A.indexOf(t.XC_())>=0&&(h["axis"]=t.XC_())}else e[n]instanceof nd&&e[n]["name"]==="curvelimitsaxis"&&h["axis"]==null&&A.indexOf(e[n].XC_())>=0&&(h["axis"]=e[n].XC_());const l=h["legend"]||h["line"]||h["fill"]||h["axis"]||h["annotation"];if(l==null){const t=undefined;if(e.filter((function(t){return t instanceof cG||t instanceof n$})).length>0)return}this.vzi_({id:l,type:r});h["line"]!=null&&this.B0t_(i.bFt_(this.Jgt_,s),s.Fkt_())})));this.h4t_(this.nRi_=(new sG).HC_("panning").fxt_(T2).on(jS.VFt_,((t,i,s)=>{let e;const A=s.oc_();if(s.JFt_()){const t=this.CWi_();if(!t)return;if(s.Lkt_().ctrlKey===!0){const i=t.getSize();let s=A.y;i<2*A.y?s=i/10:s/i<-.5&&(s=-i/10);e=new fA(t.Xs_()+s,t.zs_()-s)}else e=new fA(t.Xs_()+A.y,t.zs_()+A.y);this.mzi_(e);this.hzi_.zT_()}else{this.P4_(A.x);e=this.CWi_()}const n=new S2(E2.tWi_,e);this.yzi_(E2.tWi_,this,n)})));return this}B0t_(t,i){if(t==null||i==null||this.yWi_["tooltips"]["visible"]===!1)return;let s,e;const A=t.getX(),n=this.pWi_!=null&&this.bzi_(this.pWi_)!=null,h=new lA(this.T4_.lt_().getX()+this.T4_.lt_().Ie_()/2,this.T4_.lt_().getY()+this.T4_.lt_().Ts_()/2),r=this.yWi_["tooltips"]["tooltipoptions"]["index"];this.OWi_.nf_(r["visible"]);if(r["visible"]===!0){s=t.getX();const i=undefined;this.OWi_.Uw_().setData({textcolor:r["textcolor"],symbol:r["symbol"],name:r["name"],indextext:r["indextext"],valuetext:s,unittext:r["unittext"],singlerow:this.yWi_["tooltips"]["tooltipoptions"]["singlerow"]});this.OWi_.vW_()}const o=this.yWi_["cursorselectionlimit"],l=this.yWi_["tooltips"]["selectionradius"];this.WHi_.IN_().forEach((t=>{const h=t.XC_(),r=t._Hi_().curve,u=t._Hi_().Dn_,a=t._Hi_().nOi_;if(r.$C_()===!0&&r.getData()!=null){const g=r.tPi_();e=g["samples"];s=Y1.sJi_(A,e,!0);if(s===null)return;u.rB_(null);if(e[s]!=null&&(this.pWi_==null||n||this.pWi_===h)){const A=r.if_(),n=new lA(e[s].getPosition(),e[s].getValue()),g=A.transformPoint(n),c=i.getX()-g.getX(),I=i.getY()-g.getY(),f=Math.sqrt(c*c+I*I);if(Math.abs(c)<o&&f<l||isNaN(f)){let i="";if(t.eqi_()!=null&&t.eqi_()["unit"]!=null){const s=t.eqi_()["unit"];i=s instanceof JA?s.fn_():s}a.Uw_().setData({id:h,textcolor:r.gt_().getColor(),symbol:u,name:r.dn_(),indextext:"",valuetext:this.Ehi_(r.XC_().toString(),e,s),additionaltext:this.Nzi_(r.XC_().toString(),s,t.gOi_()["formatter"]),unittext:i});a.vW_();this.yWi_["curvesymbol"]["visible"]&&u.rB_(hl.Wi_(this.yWi_["tooltips"]["symbollinestyle"]));this.jWi_.nf_(!0)}else a.nf_(!1)}}}));const u=this.jWi_.getBounds().clone(),a=16,g=4;(i=new lA(Math.round(i.getX()),Math.round(i.getY()))).getX()<h.getX()?u.setX(i.getX()-this.T4_.getBounds().getX()+a):u.setX(i.getX()-this.jWi_.getBounds().Ie_()-g);i.getY()<h.getY()?u.setY(i.getY()-this.T4_.getBounds().getY()+a):u.setY(i.getY()-this.jWi_.getBounds().Ts_()-g);this.jWi_.ht_(u);this.jWi_.wq_()}wVt_(t,i){if(t==null||i==null||this.yWi_["curvesymbol"]["visible"]===!1)return this;const s=t.getX();let e,A,n;this.WHi_.IN_().forEach((t=>{const h=t._Hi_(),r=h.curve,o=h.Sqi_;if(r instanceof _1&&r.$C_()&&r.getData()!=null){const t=h.Dn_,l=undefined,u=r.tPi_()["samples"];if(isNaN(s)||u==null||u.length<1)this.yWi_["curvesymbol"]["visible"]&&t.nf_(!1);else{e=Y1.sJi_(s,u,!0);n=u[e].getValue();const h=this.yWi_["cursorselectionlimit"],l=r.if_(),a=new lA(u[e].getPosition(),u[e].getValue()),g=l.transformPoint(a),c=i.getX()-g.getX();A=o.jY_()?(n-o.rt_().Ee_())/o.rt_().Ts_()*this.rzi_.rt_().Ts_():(o.rt_().pe_()-n)/o.rt_().Ts_()*this.rzi_.rt_().Ts_();if(Math.abs(c)<h&&this.yWi_["curvesymbol"]["visible"]&&u[e]!=null&&!isNaN(u[e].getPosition())&&A!=null&&!isNaN(A)){t.nf_(!0);let i=new lA(u[e].getPosition(),n);r.sd_()!=null&&(i=r.sd_().transformPoint(i,i));t.$I_(i.getX());t.tf_(i.getY())}else t.nf_(!1)}}}));return this}Mzi_(t,i){if(t==null||i==null)return;const s=t.getX();let e,A;this.WHi_.IN_().forEach((t=>{const n=undefined,h=t._Hi_().curve;if(h instanceof _1&&h.$C_()&&h.getData()!=null){const n=h.tPi_();A=n["samples"];if(isNaN(s)||A==null||A.length<1){if(this.yWi_["legends"]["visible"]){t.cOi_(null);t.fOi_(null)}}else{e=Y1.sJi_(s,A,!0);const n=this.yWi_["cursorselectionlimit"],r=this.hzi_.if_(),o=new lA(A[e].getPosition(),A[e].getValue()),l=r.transformPoint(o),u=i.getX()-l.getX();if(Math.abs(u)<n&&this.yWi_["legends"]["visible"]){t.cOi_(this.Ehi_(h.XC_().toString(),A,e));t.fOi_(this.Nzi_(h.XC_().toString(),e,t.aOi_()["formatter"]))}else{t.cOi_(null);t.fOi_(null)}}}}));this.Szi_&&this.Szi_.wq_()}Gzi_(t){if((t==null||this.Cqi_().indexOf(t)!==-1)&&this.pWi_!==t){const i=this.pWi_;this.pWi_=t;this.mWi_=null;this.Rzi_({id:t},{id:i})}}vzi_(t){t=Pi(t,{});const i=new _0(E2.DOt_,t["id"],t["type"]);this.notify(E2.DOt_,this,i);if(!i.Mkt_()){const i=this.pWi_,s=this.mWi_;this.pWi_=t["id"];this.mWi_=t["type"];this.Rzi_(t,{id:i,type:s})}}Rzi_(t,i){t=Pi(t,{});const s=new _0(E2.yOt_,t["id"],t["type"]);this.notify(E2.yOt_,this,s);s.Mkt_()||typeof this.VWi_=="function"&&this.VWi_(this,t,i)}kzi_(t){if(t===D2.rWi_||t===D2.hWi_||t===D2.oWi_)switch(t){case D2.rWi_:t="geotoolkit.controls.tools.scroll.CompactHorizontalScroll";break;case D2.hWi_:t=FG.D_();break;case D2.oWi_:t=bG.D_();break}if(!this.Fzi_||this.Fzi_.D_()!==t){if(this.Fzi_!=null){this.r4t_(this.Fzi_.K3_());this.Fzi_=null;this.Qzi_.KY_()}this.Fzi_=LG.Ai_().hUt_(t,{name:"scroll",modellimits:this.T4_.rt_(),visiblelimits:this.T4_.rt_()});if(this.Fzi_!=null){this.Qzi_.GY_(this.Fzi_);this.Fzi_.on(uG.Kxt_,((t,i,s)=>{const e=s.ot_(),A=new fA(e.we_(),e.Qe_()),n=new S2(E2.iWi_,A);this.yzi_(E2.iWi_,this,n)})).on(uG.qxt_,((t,i,s)=>{const e=s.ot_(),A=new fA(e.we_(),e.Qe_()),n=new S2(E2.tWi_,A);this.yzi_(E2.tWi_,this,n)})).on(uG.Jxt_,((t,i,s)=>{const e=s.ot_(),A=new fA(e.we_(),e.Qe_()),n=new S2(E2.tWi_,A);this.yzi_(E2.tWi_,this,n)})).on(uG.Hxt_,((t,i,s)=>{const e=s.ot_(),A=new fA(e.we_(),e.Qe_()),n=new S2(E2.iWi_,A);this.yzi_(E2.iWi_,this,n)}));this.h4t_(this.Fzi_.K3_());this.Pei_()}}}yzi_(t,i,s){t!==E2.tWi_&&this.notify(t,i,s);if(!s.Mkt_()){this.mzi_(s.CWi_());t===E2.tWi_&&this.notify(t,i,s)}}xzi_(t){let i=null;this.Szi_!=null&&(i=t?null:this.Szi_.getBounds());this.Lzi_();this.Szi_=new fN({data:this.MWi_,linestyle:hl.Wi_(this.yWi_["legends"]["linestyle"]),fillstyle:il.BD_(this.yWi_["legends"]["fillstyle"])}).qC_("legendlayoutgroup").cq_((new aw).setDirection(this.yWi_["legends"]["direction"]));this.Szi_.nf_(this.yWi_["legends"]["visible"]);if(this.yWi_["legends"]["position"]===m2.Hz_)this.gzi_.xY_(1,this.Szi_);else{this.uzi_.GY_(this.Szi_);i!=null?this.Szi_.ht_(i.clone()):this.Szi_.ht_(new mA(0,0,this.yWi_["legends"]["width"],this.yWi_["legends"]["height"]));this.Uzi_=(new sI).aq_(!0).HC_("legendManipulator");const t=this.Szi_.getParent();t instanceof Ic&&t.GY_(this.Uzi_);this.Yzi_=new p2({layer:this.Uzi_,group:this.Szi_});const s=this.C5_("panning");if(s!=null){const t=s.rFt_(),i=t.Fxt_(s);t.g1_(i,this.Yzi_)}else this.h4t_(this.Yzi_)}}Lzi_(){if(this.Szi_==null)return;if(this.Yzi_!=null){this.Yzi_.dispose();this.Yzi_=null}const t=this.Szi_.getParent();if(t instanceof Ic){if(this.Uzi_!=null){t.removeChild(this.Uzi_);this.Uzi_=null}if(this.Szi_!=null){t.removeChild(this.Szi_);this.Szi_=null}}}N_(){return this.JV_()}JV_(){const t=this.yWi_;this.zWi_==null?delete t["modeloffsets"]:this.zWi_["modeloffsets"]={left:this.zWi_.we_(),right:this.zWi_.Qe_()};return t}dt_(t){return this.setOptions(t)}setOptions(t){let i=!1,s=!1,e,A=!0;if(t!=null){if((t=Pi(t,{}))["model"]!=null){if(t["model"]!==this.EWi_){this.EWi_!==null&&this.T4_.removeChild(this.EWi_);this.EWi_=t["model"];i=!0}}else if(this.EWi_===null){const t=new Date,s=new Date;t.setMonth(t.getMonth()-1);this.EWi_=(new sI).Lq_(new mA(t.getTime(),0,s.getTime(),1));i=!0}t["modeloffsets"]&&this.Tzi_(t["modeloffsets"]);typeof t["automodellimitsmode"]=="boolean"&&(this.yWi_["automodellimitsmode"]=t["automodellimitsmode"]);t["margin"]instanceof Array&&t["margin"].length===4&&(this.yWi_["margin"]=t["margin"]);typeof t["viewcache"]=="boolean"&&(this.yWi_["viewcache"]=t["viewcache"]);if(t["alignaxis"]!==this.yWi_["alignaxis"]){s=!0;this.yWi_["alignaxis"]=t["alignaxis"]}t["legends"]!=null&&(A=this.yWi_["legends"]["position"]!==t["legends"]["position"]);const e=Pi(this.yWi_,{});this.yWi_=Pi(t,e)}else t={};let n=0,h=0;this.aq_(this.yWi_["automodellimitsmode"]);if(i){this.T4_.Lq_(this.EWi_.rt_());this.T4_.xY_(this.T4_.FY_(this.Jgt_),this.EWi_)}this.gzi_.ft_({top:this.yWi_["margin"][0],right:this.yWi_["margin"][1],bottom:this.yWi_["margin"][2],left:this.yWi_["margin"][3]});if(this.yWi_["title"]["visible"]||this.yWi_["lastupdatedate"]["visible"]){this.czi_.nf_(!0);this.czi_.ft_({left:this.yWi_["title"]["padding"][3],top:this.yWi_["title"]["padding"][0],right:this.yWi_["title"]["padding"][1],height:this.yWi_["title"]["height"]});n+=this.yWi_["title"]["height"]}else this.czi_.nf_(!1);this.pZ_.nf_(this.yWi_["title"]["visible"]).a_(this.yWi_["title"]["text"]).g_(new qa({font:this.yWi_["title"]["font"],color:this.yWi_["title"]["color"]}));this.pZ_.$I_(0);this.pZ_.SE_(dA.he_);this.Izi_.nf_(this.yWi_["lastupdatedate"]["visible"]).g_(new qa({font:this.yWi_["lastupdatedate"]["font"],color:this.yWi_["lastupdatedate"]["color"]}));this.xzi_(A);this.Szi_.ft_({left:0,right:0});if(this.yWi_["legends"]["visible"]&&this.yWi_["legends"]["position"]===m2.Hz_){this.Szi_.ft_({left:0,top:n,height:this.yWi_["legends"]["height"]});n+=this.yWi_["legends"]["height"]+this.yWi_["legends"]["marginbottom"]}this.jWi_.rB_(hl.Wi_(this.yWi_["tooltips"]["linestyle"])).iQ_(il.BD_(this.yWi_["tooltips"]["fillstyle"]));if(this.yWi_["modelgrid"]["horizontaltickgenerator"]!==void 0&&this.vWi_==null)this.Azi_.jZ_("Horizontal",this.yWi_["modelgrid"]["horizontaltickgenerator"]);else if(this.vWi_!=null&&this.yWi_["modelgrid"]["horizontaltickgenerator"].constructor==={}.constructor){this.Azi_.jZ_("Horizontal",this.yWi_["modelgrid"]["horizontaltickgenerator"]);const t=this.Azi_.ZZ_(fg.ux_);t!=null&&this.yWi_["modelgrid"]["horizontalvisibility"]!=null&&t.Hx_("major",this.yWi_["modelgrid"]["horizontalvisibility"]["major"]).Hx_("minor",this.yWi_["modelgrid"]["horizontalvisibility"]["minor"]).Hx_("edge",this.yWi_["modelgrid"]["horizontalvisibility"]["edge"])}if(this.yWi_["modelgrid"]["verticaltickgenerator"]!==void 0){(this.yWi_["modelgrid"]["verticaltickgenerator"]instanceof Zg||this.yWi_["modelgrid"]["verticaltickgenerator"]instanceof Zd)&&this.yWi_["modelgrid"]["verticaltickgenerator"].uU_(this.yWi_["timezone"]);this.Azi_.jZ_(fg.ax_,this.yWi_["modelgrid"]["verticaltickgenerator"]);const t=this.Azi_.ZZ_(fg.ax_);t!=null&&this.yWi_["modelgrid"]["verticalvisibility"]!=null&&t.Hx_("major",this.yWi_["modelgrid"]["verticalvisibility"]["major"]).Hx_("minor",this.yWi_["modelgrid"]["verticalvisibility"]["minor"]).Hx_("edge",this.yWi_["modelgrid"]["verticalvisibility"]["edge"])}this.nzi_.nf_(this.yWi_["modelaxis"]["visible"]);if(this.yWi_["modelaxis"]["tickgenerator"]==null){e=new Zg;e.$L_(this.hx_);e.Jx_("edge",!1);e.Jx_("major",!1);e.Jx_("minor",!1);e.Ox_("edge",null);e.Ox_("major",null);e.Ox_("minor",null);e.Px_("edge",null);e.Px_("major",new hl(Y2));this.yWi_["modelaxis"]["tickgenerator"]=e}(this.yWi_["modelaxis"]["tickgenerator"]instanceof Zg||this.yWi_["modelaxis"]["tickgenerator"]instanceof Zd)&&this.yWi_["modelaxis"]["tickgenerator"].uU_(this.yWi_["timezone"]);this.nzi_.jZ_(this.yWi_["modelaxis"]["tickgenerator"]);this.nzi_.PZ_(this.yWi_["modelaxis"]["baselinestyle"],this.yWi_["modelaxis"]["baselinestyle"]instanceof hl==!1);this.Qzi_.nf_(this.yWi_["scrollbar"]["visible"]);this.kzi_(this.yWi_["scrollbar"]["type"]);if(this.yWi_["scrollbar"]["visible"]){this.Qzi_.ft_({left:0,bottom:0,right:0,height:this.yWi_["scrollbar"]["height"]});h+=this.yWi_["scrollbar"]["height"];this.yWi_["scrollbar"]["options"]&&(this.yWi_["scrollbar"]["options"]["size"]=this.yWi_["scrollbar"]["options"]["size"]||this.yWi_["scrollbar"]["height"])}if(this.yWi_["scrollbar"]["tickgenerator"]==null){e=new Zg;e.$L_(this.hx_);this.yWi_["scrollbar"]["tickgenerator"]=e}else e=this.yWi_["scrollbar"]["tickgenerator"];if(e instanceof Zg){e.SU_("edge",this.yWi_["scrollbar"]["options"]["formatter"]);e.SU_("major",this.yWi_["scrollbar"]["options"]["formatter"])}e.Rx_("major").nF_(this.yWi_["scrollbar"]["options"]["font"]);e.Rx_("edge").nF_(this.yWi_["scrollbar"]["options"]["font"]);e.Rx_("major").setColor(this.yWi_["scrollbar"]["options"]["color"]);e.Rx_("edge").setColor(this.yWi_["scrollbar"]["options"]["color"]);e.Vx_("major").setColor(this.yWi_["scrollbar"]["options"]["color"]);e.Vx_("edge").setColor(this.yWi_["scrollbar"]["options"]["color"]);e.Jx_("minor",!1);if(this.Fzi_ instanceof FG){(this.yWi_["scrollbar"]["tickgenerator"]instanceof Zg||this.yWi_["scrollbar"]["tickgenerator"]instanceof Zd)&&this.yWi_["scrollbar"]["tickgenerator"].uU_(this.yWi_["timezone"]);this.Fzi_.jZ_(this.yWi_["scrollbar"]["tickgenerator"])}this.Fzi_&&this.Fzi_.setOptions&&this.yWi_["scrollbar"]["options"]&&this.Fzi_.setOptions(this.yWi_["scrollbar"]["options"]);this.wWi_=null;this.QWi_=null;if(typeof this.yWi_["visiblerange"]["visible"]=="boolean"){this.dzi_.nf_(this.yWi_["visiblerange"]["visible"]);this.Bzi_.nf_(!0);this.wzi_.nf_(!0)}else{this.yWi_["visiblerange"]["visible"]["min"]!=null&&this.Bzi_.nf_(this.yWi_["visiblerange"]["visible"]["min"]);this.yWi_["visiblerange"]["visible"]["max"]!=null&&this.wzi_.nf_(this.yWi_["visiblerange"]["visible"]["max"])}if(this.yWi_["visiblerange"]["visible"]){this.dzi_.ft_({left:0,bottom:h,right:0,height:this.yWi_["visiblerange"]["height"]});h+=this.yWi_["visiblerange"]["height"];this.tzi_!=null&&this.tzi_.cUt_().Kv_(!0);this.szi_!=null&&this.szi_.cUt_().Kv_(!0)}else{this.dzi_.ft_({left:0,bottom:h,right:0,height:0});this.tzi_!=null&&this.tzi_.cUt_().Kv_(!1);this.szi_!=null&&this.szi_.cUt_().Kv_(!1)}this.Bzi_.g_(new qa({font:this.yWi_["visiblerange"]["font"],color:this.yWi_["visiblerange"]["color"]}));this.wzi_.g_(new qa({font:this.yWi_["visiblerange"]["font"],color:this.yWi_["visiblerange"]["color"]}));this.OWi_.setOptions(this.yWi_["tooltips"]["tooltipoptions"]["index"]);const r=undefined;this.WHi_.IN_().forEach((i=>{t["curvelimits"]!=null&&i.VVi_(t["curvelimits"]);t["curvesymbol"]!=null&&i.PVi_(t["curvesymbol"]);t["curveaxis"]!=null&&i.RTi_(t["curveaxis"]);t["tooltips"]!=null&&t["tooltips"]["tooltipoptions"]!=null&&i.WVi_(t["tooltips"]["tooltipoptions"]);t["curvelimits"]!=null&&t["curvelimits"]["visible"]!=null&&i.VVi_({visible:t["curvelimits"]["visible"]});if(t["legends"]!=null&&t["legends"]["legendoptions"]!=null){this.yWi_["legends"]["autocolorlabel"]===!0?t["legends"]["legendoptions"]["labelcolor"]=null:this.yWi_["legends"]["legendoptions"]["labelcolor"]==null&&(t["legends"]["legendoptions"]["labelcolor"]=Y2);i.OVi_(t["legends"]["legendoptions"])}}));this.rzi_.nf_(this.yWi_["curvesymbol"]["visible"]);this.azi_.ft_({width:this.Kzi_()});s&&this.Hzi_(this.yWi_["alignaxis"]);this.qzi_();this.fzi_.ft_({left:0,top:n,right:0,bottom:h});if(this.yWi_["southaxis"]["visible"]){this.fzi_.v4_(ha.nG_).nf_(!0);this.fzi_.v4_(ha.nG_).dq_(this.yWi_["southaxis"]["height"])}else this.fzi_.v4_(ha.nG_).nf_(!1);this.azi_.ft_({left:this.yWi_["curvelimits"]["margin"],top:this.yWi_["curvelimits"]["margin"],bottom:this.yWi_["curvelimits"]["margin"]});if(this.yWi_["southaxis"]["tickgenerator"]!=null){e=this.yWi_["southaxis"]["tickgenerator"];e.Ox_("major",new qa({font:this.yWi_["southaxis"]["font"],color:this.yWi_["southaxis"]["color"],alignment:Fa.ne_}));e.Ox_("edge",e.Rx_("major"))}(this.yWi_["southaxis"]["tickgenerator"]instanceof Zg||this.yWi_["southaxis"]["tickgenerator"]instanceof Zd)&&this.yWi_["southaxis"]["tickgenerator"].uU_(this.yWi_["timezone"]);this.Czi_.jZ_(this.yWi_["southaxis"]["tickgenerator"]);this.Czi_.nf_(this.yWi_["southaxis"]["visible"]);this.yWi_["viewcache"]===!0?this.hzi_.yq_()==null&&this.hzi_.gk_(new tI):this.hzi_.yq_()!=null&&this.hzi_.gk_(null);i&&this.mzi_(new fA(this.EWi_.rt_().we_(),this.EWi_.rt_().Qe_()));this.yWi_["intervalbuttons"]=qi(t["intervalbuttons"],this.yWi_["intervalbuttons"]);this.yWi_["intervalbuttons"]["visible"]?this.tzi_.nf_(!0):this.tzi_.nf_(!1);this.yWi_["scrolltonowbutton"]["visible"]?this.szi_.nf_(!0):this.szi_.nf_(!1);t["selectionstrategy"]!==void 0&&(this.VWi_=t["selectionstrategy"]);this.Jzi_(t["stack"]);this.Pzi_(t["percent"]);this.Vzi_(t["barmode"]);this.ZWi_();this.hzi_.zT_();this.gzi_.wq_();this.fzi_.wq_();this.Ozi_();return this}Aqi_(t,i,s){let e,A;if(s!==!1){e=t.rqi_().lqi_;A={min:t.rqi_().min,max:t.rqi_().max}}t.JVi_(i);if(s!==!1){t.rqi_().lqi_=e;t.rqi_().min=A.min;t.rqi_().max=A.max}return this}Jzi_(t){if(t==null)return this;t["enabled"]=t["enabled"]===!0;if(this.qWi_["enabled"]===t["enabled"])return this;this.qWi_=qi(t,this.qWi_);if(this.qWi_["enabled"]===!1&&this.PWi_!=null){this.PWi_.kh_();this.PWi_=null;return this}this.PWi_=new v2(this,this.qWi_);this.PWi_.apply();return this}Wzi_(){return this.qWi_}Pzi_(t){if(t==null)return this;t["enabled"]=t["enabled"]===!0;if(this.JWi_["enabled"]===t["enabled"])return this;this.JWi_=Pi(t,this.JWi_);if(this.JWi_["enabled"]===!1&&this.PWi_!=null){this.PWi_.kh_();this.PWi_=null;return this}this.PWi_=new y2(this,this.JWi_);this.PWi_.apply();return this}zzi_(){return this.JWi_}Vzi_(t){this.OIt_=Pi(t,this.OIt_);this.hzi_.qY_()===0&&this.hzi_.GY_(this.WWi_);this.Xzi_();this.WWi_.dt_(this.OIt_);return this}jzi_(){return this.OIt_}dft_(t){if(t==null){this.WWi_.dft_([]);return this}t=Array.isArray(t)?t:[t];this.WWi_.dft_(t);return this}Hzi_(t){if(t){this.Zzi_(this.fzi_.v4_(ha.sG_),new M2);this.Zzi_(this.fzi_.v4_(ha.AG_),new M2);this._zi_(new M2)}else{this.Zzi_(this.fzi_.v4_(ha.sG_),new lw);this.Zzi_(this.fzi_.v4_(ha.AG_),new lw);this._zi_(new lw)}}Zzi_(t,i){let s;for(let e=0;e<t.qY_();++e){s=t.HY_(e);i.add(s)}t.cq_(i);return this}_zi_(t){let i;for(let s=0;s<this.azi_.qY_();++s){i=this.azi_.HY_(s);t.add(i)}this.azi_.cq_(t);return this}Cqi_(){const t=[];this.hzi_.YY_().forEach((i=>{typeof i.XC_=="function"&&i.XC_()!=null&&t.push(i.XC_())}));return t}iqi_(t){if(t==null)return null;const i=undefined,s=this.WHi_.IN_().filter((i=>i._Hi_().curve.XC_()===t));return s==null||s.length===0?null:s[0]}$zi_(t){if(t==null)return null;const i=this.iqi_(t);return i!=null?i.getData():null}Kzi_(){let t=0;this.WHi_.IN_().forEach((i=>{t+=i.uOi_()["width"]}));return t}tXi_(t,i,s,e,A){return this.iXi_(t,i,s,e,null,A)}iXi_(t,i,s,e,A,n){const h=Pi(t,{name:typeof t=="string"?t:"",id:n!=null?n:"",uri:i!=null?i:"",data:s!=null?s:null,properties:e!=null?e:{},position:typeof A=="number"?A:null},!0),r=this.qWi_["enabled"]===!0,o=this.JWi_["enabled"]===!0;r&&this.Jzi_({enabled:!1,fillstyles:this.qWi_["fillstyles"]});o&&this.Pzi_({enabled:!1,fillstyles:this.JWi_["fillstyles"]});n=this.sXi_(h,!1);r&&this.Jzi_({enabled:!0,fillstyles:this.qWi_["fillstyles"]});o&&this.Pzi_({enabled:!0,fillstyles:this.JWi_["fillstyles"]});this.qzi_();this.gzi_.wq_();this.fzi_.wq_();this.hzi_.zT_();this.Ozi_();return n}eXi_(t){return this.AXi_(t)}AXi_(t){if(!Array.isArray(t))return-1;const i=[];this.fzi_.Uq_();this.azi_.Uq_();this.gzi_.Uq_();for(let s=0;s<t.length;s++){const e=qi(t[s],{name:"",id:"",uri:"",data:null,properties:{},position:null},!0),A=this.sXi_(e,!0);i.push(A)}this.fzi_.Yq_();this.azi_.Yq_();this.qzi_();this.gzi_.Yq_();this.gzi_.wq_();this.fzi_.wq_();this.hzi_.zT_();this.Ozi_();return i.length>0?i:-1}sXi_(t,i){const s=qi(this.yWi_["curve"],{},!0);t["properties"]=qi(t["properties"],s,!0);if(t["data"]!=null&&!(t["data"]instanceof Pb))throw new Error('Data must be of type "geotoolkit.data.DataTableView" only.');if(!t["id"])if(t["properties"]["id"])t["id"]=t["properties"]["id"];else{t["id"]=t["uri"];t["properties"]["id"]=t["id"]}const e=t["id"],A=undefined;if(this.Cqi_().indexOf(e)<0){this.nXi_(t,i);this.Xzi_()}return e}nXi_(t,i,s){const e=t["data"],A=qi(this.yWi_["curveaxis"],{},!0);t["properties"]["axisposition"]!==void 0&&(A["position"]=t["properties"]["axisposition"]);t["properties"]["axisautolabelrotation"]!==void 0&&(A["autolabelrotation"]=t["properties"]["axisautolabelrotation"]);t["properties"]["titlerotateangle"]!==void 0&&(A["titlerotateangle"]=t["properties"]["titlerotateangle"]);t["properties"]["labelorientation"]!==void 0&&(A["labelorientation"]=t["properties"]["labelorientation"]);t["properties"]["title"]!==void 0&&(A["title"]=t["properties"]["title"]);t["properties"]["axisvisible"]!==void 0&&(A["visible"]=t["properties"]["axisvisible"]);t["properties"]["tickgeneratoroptions"]!==void 0&&(A["tickgeneratoroptions"]=qi(A["tickgeneratoroptions"],t["properties"]["tickgeneratoroptions"]));t["properties"]["microposition"]!==void 0&&(A["microposition"]=t["properties"]["microposition"]);t["properties"]["logarithmicscale"]&&(A["logarithmicscale"]=t["properties"]["logarithmicscale"]);const n=new d2({id:t["id"],uri:t["uri"],name:t["name"],autosort:t["autosort"],curve:{data:e,properties:t["properties"]},curvesymbol:t["curvesymbol"]||this.yWi_["curvesymbol"],curvelimits:this.yWi_["curvelimits"],curveaxis:A,legenditem:this.yWi_["legends"]["legendoptions"],tooltipitem:this.yWi_["tooltips"]["tooltipoptions"]});i&&n.yf_(!0);n.on(K1.Bqi_,this.hXi_());n.on(K1.hJi_,this.rXi_());n.on(m1.wqi_,this.oXi_());n.on(m1.Qqi_,this.lXi_());n.on(m1.Eqi_,this.uXi_());n.setData(e);n._Hi_().Sqi_.Lq_(this.T4_.rt_());const h=(new sI).JC_(t["id"]);this.hzi_.GY_(h);h.GY_(n._Hi_().Sqi_);if(!s){h.GY_(n._Hi_().curve);this.rzi_.GY_(n._Hi_().Dn_);this.Aqi_(n,t["properties"]);if(typeof t["position"]=="number"){this.WHi_.g1_(t["position"],n);this.jWi_.getData().g1_(t["position"],n._Hi_().nOi_)}else{this.WHi_.add(n);this.jWi_.getData().add(n._Hi_().nOi_)}this.azi_.ft_({width:this.Kzi_()}).GY_(n._Hi_().sOi_);this.fzi_.connect(n._Hi_().sOi_.HY_(0),n._Hi_().Sqi_,fg.ax_,!1);this.azi_.bG_().add(n._Hi_().sOi_);this.gzi_.wq_()}const r=n._Hi_().axis,o=n._Hi_().cJi_,l=n._Hi_().IJi_;t["properties"]["axisposition"]===void 0&&(t["properties"]["axisposition"]=this.yWi_["curveaxis"]["position"]);let u,a;if(t["properties"]["axisposition"]==="left"){u=this.Ezi_;a=ha.sG_}else if(t["properties"]["axisposition"]==="right"){u=this.pzi_;a=ha.AG_}u&&u.push(t["properties"]["id"]);if(t["properties"]["axisposition"]==="left"){this.fzi_.H4_(0,o,a);this.fzi_.H4_(0,l,a)}else{this.fzi_.K4_(o,a);this.fzi_.K4_(l,a)}this.fzi_.connect(r,n._Hi_().Sqi_,fg.ax_,!1);if(!s){const i=n._Hi_().AOi_;typeof t["position"]=="number"?this.MWi_.g1_(t["position"],i):this.MWi_.add(i);const s=this.Cqi_();s!=null&&s.length===1&&this.aXi_(s[0])}i&&n.yf_(!1);return n}gXi_(){this.bWi_==null&&(this.bWi_=()=>{let t;const i=this.vWi_,s=this.Azi_.getParent();if(this.vWi_!=null){t=this.iqi_(i);if(t!=null&&t._Hi_()!=null){const i=t._Hi_().Sqi_;if(i!=null){const t=s.rt_(),e=new mA(t.we_(),i.rt_().Ee_(),t.Qe_(),i.rt_().pe_());s.Lq_(e)}}}});return this.bWi_}cXi_(){this.NWi_==null&&(this.NWi_=(t,i,s)=>{s["old"]!=null&&s["old"].off(UD.pct_,this.gXi_());s["new"]!=null&&s["new"].on(UD.pct_,this.gXi_())});return this.NWi_}hXi_(){this.SWi_==null&&(this.SWi_=(t,i,s)=>{if(i==null||s==null)return;const e=i._Hi_(),A=e.cJi_,n=e.IJi_;let h,r,o;if(s["oldposition"]==="left"){h=this.Ezi_;r=ha.sG_}else if(s["oldposition"]==="right"){h=this.pzi_;r=ha.AG_}h&&h.splice(h.indexOf(s["id"]),1);if(s["axisposition"]==="left"){h=this.Ezi_;o=ha.sG_}else if(s["axisposition"]==="right"){h=this.pzi_;o=ha.AG_}h&&h.push(s["id"]);this.fzi_.removeItem(A,r);this.fzi_.removeItem(n,r);if(o===ha.sG_){this.fzi_.H4_(0,A,o);this.fzi_.H4_(0,n,o)}else if(o===ha.AG_){this.fzi_.K4_(A,o);this.fzi_.K4_(n,o)}this.qzi_();this.gzi_.wq_();this.fzi_.wq_();this.hzi_.zT_()});return this.SWi_}rXi_(){this.GWi_==null&&(this.GWi_=(t,i,s)=>{this.qzi_();this.gzi_.wq_();this.fzi_.wq_();this.azi_.wq_();this.hzi_.zT_();this.Ozi_()});return this.GWi_}oXi_(){this.RWi_==null&&(this.RWi_=()=>{this.Szi_.wq_()});return this.RWi_}lXi_(){this.kWi_==null&&(this.kWi_=()=>{this.azi_.wq_();this.fzi_.y4_()});return this.kWi_}uXi_(){this.FWi_==null&&(this.FWi_=(t,i,s)=>{this.hzi_.td_();this.td_();const e=s["old"],A=s["new"];e!=null&&e.off(UD.pct_,this.IXi_());A!=null&&A.on(UD.pct_,this.IXi_())});return this.FWi_}IXi_(){this.xWi_==null&&(this.xWi_=()=>{this.hzi_.td_()});return this.xWi_}aXi_(t){if(this.Azi_==null||this.vWi_===t)return this;let i;const s=undefined;this.Azi_.getParent().Lq_(new mA(0,0,1,1));if(this.vWi_!=null){i=this.iqi_(this.vWi_);if(i!=null&&i._Hi_()!=null){i.off(m1.Eqi_,this.cXi_());i.getData().off(UD.pct_,this.gXi_());i._Hi_().curve.off(W1.GJi_,this.gXi_())}this.vWi_=null}this.vWi_=t;if(t!=null){i=this.iqi_(t);if(i!=null&&i._Hi_()!=null){this.gXi_().call(this);i.on(m1.Eqi_,this.cXi_());i.getData().on(UD.pct_,this.gXi_());i._Hi_().curve.on(W1.GJi_,this.gXi_());if(this.Azi_!=null&&i._Hi_().axis!=null){const t=i._Hi_().axis.ZZ_().clone();t.Px_("major",new hl(K2["major"])).Px_("minor",new hl(K2["minor"])).Px_("edge",new hl(K2["edge"]));t.Hx_("major",this.yWi_["modelgrid"]["horizontalvisibility"]["major"]).Hx_("minor",this.yWi_["modelgrid"]["horizontalvisibility"]["minor"]).Hx_("edge",this.yWi_["modelgrid"]["horizontalvisibility"]["edge"]);this.Azi_.jZ_(fg.ux_,t)}}}else this.Azi_.jZ_(fg.ux_,this.yWi_["modelgrid"]["horizontaltickgenerator"]);this.Azi_.ZZ_(fg.ax_).Hx_("major",this.yWi_["modelgrid"]["verticalvisibility"]["major"]).Hx_("minor",this.yWi_["modelgrid"]["verticalvisibility"]["minor"]).Hx_("edge",this.yWi_["modelgrid"]["verticalvisibility"]["edge"]);this.Pei_();return this}cqi_(t,i,s,e,A,n){const h=qi(t,{id1:typeof t=="string"?t:null,id2:i,fillstyle:s!=null?s:null,filltype:e!=null?e:null,filldirection:A!=null?A:C1.JQ_});if(h["id1"]==null||h["fillstyle"]==null||h["filltype"]==null||h["filldirection"]==null)return;let r=null,o=null,l;h["fillstyle"]=il.BD_(h["fillstyle"]);switch(h["filldirection"]){case C1.Top:o=h["fillstyle"];break;case C1.JQ_:r=h["fillstyle"];break;default:return}this.fqi_(h["id1"],h["filldirection"]);switch(e){case f1.PHi_:l=this.fXi_(t,i,null,r,o);break;case f1.VHi_:l=this.CXi_(t,i,null,r,o);break;case f1.OHi_:l=this.CXi_(t,Number.MAX_VALUE,null,r,o,h["filldirection"]);break;default:return}const u=undefined;this.iqi_(h["id1"])._Vi_(A,h,l);const a=n!=null?ur(this.hzi_).Gw_((function(t){return typeof t.XC_=="function"&&t.XC_()===n})).xw_():null;a!=null?a.xY_(0,l):this.hzi_.xY_(0,l)}fqi_(t,i){const s=qi(t,{curveId:typeof t=="string"?t:null,filldirection:i});if(s["curveId"]==null)return;if(s["filldirection"]==null){this.fqi_(s["curveId"],C1.Top);this.fqi_(s["curveId"],C1.JQ_);return}const e=this.iqi_(s["curveId"]);if(e==null)return;const A=e._Hi_();if(A!=null&&A.eOi_!=null&&A.eOi_[i]!=null){A.eOi_[i].dispose();this.hzi_.removeChild(A.eOi_[i]);e._Vi_(s["filldirection"],null,null)}}dXi_(t){const i=qi(t,{curveId:typeof t=="string"?t:null}),s=this.iqi_(i["curveId"]);return s!=null?s._Hi_().Pbt_:null}BXi_(t,i){const s=qi(t,{curveId:typeof t=="string"?t:null,filldirection:i});if(s["curveId"]==null)return null;const e=this.iqi_(s["curveId"]);return e!=null&&e._Hi_().Pbt_[s["filldirection"]]!=null?e._Hi_().Pbt_[s["filldirection"]]["fillstyle"]:null}fXi_(t,i,s,e,A){const n=qi(t,{id1:typeof t=="string"?t:null,id2:typeof i=="string"?i:null,fillstyle:s!=null?s:null,positivefillstyle:e!=null?e:null,negativefillstyle:A!=null?A:null},!0);if(n["id1"]==null||n["id2"]==null)return null;const h=this.iqi_(n["id1"])._Hi_(),r=this.iqi_(n["id2"])._Hi_();return h==null||r==null?null:new u2(h.curve,r.curve,n["fillstyle"],n["positivefillstyle"],n["negativefillstyle"])}CXi_(t,i,s,e,A,n){const h=qi(t,{id1:typeof t=="string"?t:null,value:typeof i=="number"?i:null,fillstyle:s!=null?s:null,filldirection:n!=null?n:null,positivefillstyle:e!=null?e:null,negativefillstyle:A!=null?A:null},!0);if(h["id1"]==null||h["value"]==null)return null;const r=this.iqi_(h["id1"])._Hi_();if(r==null)return null;const o=new A2(h["value"],r.curve,h["filldirection"]);return new u2(r.curve,o,h["fillstyle"],h["positivefillstyle"],h["negativefillstyle"])}wXi_(t){let i=null,s;const e=this.iqi_(t);if(e==null)return this;for(s=0;s<this.Ezi_.length&&i==null;++s)if(this.Ezi_[s]===t||Array.isArray(this.Ezi_[s])&&this.Ezi_[s].indexOf(t)>=0){i=ha.sG_;this.Ezi_.splice(s,1)}for(s=0;s<this.pzi_.length&&i==null;++s)if(this.pzi_[s]===t||Array.isArray(this.pzi_[s])&&this.pzi_[s].indexOf(t)>=0){i=ha.AG_;this.pzi_.splice(s,1)}if(!i)return this;if(e._Hi_!=null){const t=e._Hi_();t.cJi_!=null&&this.fzi_.removeItem(t.cJi_,i);t.IJi_!=null&&this.fzi_.removeItem(t.IJi_,i)}this.qzi_();return this}qzi_(){const t=this.yWi_["alignaxis"],i=[ha.sG_,ha.AG_];let s,e,A;for(let n=0;n<i.length;++n){s=this.fzi_.v4_(i[n]);const h=undefined,r=undefined;this.zHi_().IN_().filter((t=>{const i=t.GYi_()["labelorientation"];return typeof i=="number"&&i!==0})).length>0?s.kY_(!1):s.kY_(!0);e=0;for(let i=0;i<s.qY_();++i){A=s.HY_(i);A.$C_()&&(t?e=Math.max(e,+A.gG_()):e+=+A.gG_())}s.Cq_(e)}let n=0,h=0;this.fzi_.v4_(ha.sG_).$C_()&&(n=this.fzi_.v4_(ha.sG_).gG_());this.fzi_.v4_(ha.AG_).$C_()&&(h=this.fzi_.v4_(ha.AG_).gG_());n=n==null?0:n;h=h==null?0:h;this.Qzi_.ft_({left:n,right:h});this.yWi_["legends"]["position"]===m2.Hz_&&(this.yWi_["legends"]["alignwithcentermodel"]===!0?this.Szi_.ft_({left:n,right:h}):this.Szi_.ft_({left:0,right:0}));return this}QXi_(t){if(t!=null){const i=this.qWi_["enabled"]===!0,s=this.JWi_["enabled"]===!0;i&&this.Jzi_({enabled:!1,fillstyles:this.qWi_["fillstyles"]});s&&this.Pzi_({enabled:!1,fillstyles:this.JWi_["fillstyles"]});let e=t,A;t instanceof Array||(e=[t]);let n=null,h=!1;for(A=0;A<e.length;++A){n=this.iqi_(e[A]);if(e[A]===this.vWi_){this.aXi_(null);h=!0}const t=n?.jVi_();t!=null&&t.cWi_(n)}const r=t=>{if(t!=null){this.MWi_.IN_().forEach((i=>{t===i.Uw_()&&this.MWi_.remove(i)}));this.jWi_.getData().IN_().forEach((i=>{t._Hi_().nOi_===i&&this.jWi_.getData().remove(i)}))}},o=t=>{const i=this.Cqi_();let s;const e=[C1.Top,C1.JQ_];i.forEach((i=>{s=this.dXi_(i);e.forEach((i=>{s==null||s[i]==null||s[i]["id2"]!==t&&s[i]["id1"]!==t||this.fqi_(s[i]["id1"],s[i]["filldirection"])}))}))};let l=!1,u,a;for(A=0;A<e.length;++A){u=this.iqi_(e[A]);if(u!=null){a=u._Hi_();this.fzi_.disconnect(a.sOi_.HY_(0));this.fzi_.disconnect(a.axis);o(e[A]);this.wXi_(e[A]);u.getData().off(UD.pct_,this.IXi_());u.off(K1.Bqi_,this.hXi_());u.off(K1.hJi_,this.rXi_());u.off(m1.wqi_,this.oXi_());u.off(m1.Qqi_,this.lXi_());u.off(m1.Eqi_,this.uXi_());this.hzi_.removeChild(a.curve.getParent());this.hzi_.zT_();this.rzi_.removeChild(a.Dn_);this.azi_.bG_().remove(a.sOi_);this.azi_.removeChild(a.sOi_);this.azi_.ft_({width:this.Kzi_()});if(this.pWi_===e[A]){this.pWi_=null;this.mWi_=null}l=!0;r(u);u.dispose();this.WHi_.remove(u)}}if(h){const t=this.Cqi_();t.length>0&&this.aXi_(t[0])}if(l){this.gzi_.wq_();this.fzi_.wq_();this.Ozi_()}i&&this.Jzi_({enabled:!0,fillstyles:this.qWi_["fillstyles"]});s&&this.Pzi_({enabled:!0,fillstyles:this.JWi_["fillstyles"]});this.Xzi_()}return this}aqi_(t){return t==null||this.iqi_(t)==null?null:this.iqi_(t).eqi_()}wq_(t){super.wq_(t);this.WHi_.IN_().forEach((t=>{t.wq_()}));this.Ozi_();return this}EXi_(t,i){if(t==null||i==null)return this;this.yWi_["legends"]["autocolorlabel"]===!0?i["labelcolor"]=null:this.yWi_["legends"]["legendoptions"]["labelcolor"]==null&&(i["labelcolor"]=Y2);t.setOptions(i);return this}pXi_(t){if(typeof this.yWi_["visiblerange"]["formatter"]=="function")return this.yWi_["visiblerange"]["formatter"](t);this.wWi_==null&&(this.wWi_=R2(this.dWi_,this.yWi_["visiblerange"]["formatter"],this.hx_));return this.wWi_.format(new Date(t))}Dzi_(t){if(typeof this.yWi_["lastupdatedate"]["formatter"]=="function")return this.yWi_["lastupdatedate"]["formatter"](t);this.QWi_==null&&(this.QWi_=R2(this.dWi_,this.yWi_["lastupdatedate"]["formatter"],this.hx_));return this.QWi_.format(new Date(t))}Tzi_(t){this.zWi_=_l.jD_(this,this.zWi_,t,!0,this.XWi_);if(this.mXi_!=null){const t=this.T4_.rt_().clone().setX(this.mXi_.we_()).de_(this.mXi_.Ie_());this.T4_.Lq_(t);this.mXi_=null}this.vn_();this.Pei_();this.td_();return this}yXi_(){return this.zWi_==null?null:{left:this.zWi_.we_(),right:this.zWi_.Qe_()}}Ad_(){super.Ad_();this.DXi_();return this}DXi_(){let t;if(this.zWi_==null){if(this.mXi_!=null){t=this.T4_.rt_().clone().setX(this.mXi_.we_()).de_(this.mXi_.Ie_());this.T4_.Lq_(t);this.mXi_=null}return this}const i=this.T4_.if_(),s=this.zWi_.wn_(),e=bn.$c_(s["left"],0,i),A=bn.$c_(s["width"],0,i),n=bn.$c_(0,s["top"],i),h=bn.$c_(0,s["height"],i);t=this.T4_.rt_().clone();this.mXi_!=null&&t.setX(this.mXi_.we_()).de_(this.mXi_.Ie_());this.mXi_=t;t=t.clone().setX(t.we_()-e).de_(t.Ie_()+A).setY(t.Ee_()-n).Be_(t.Ts_()+h);this.T4_.Lq_(t);return this}Pei_(){this.DXi_();const t=this.T4_.rt_(),i=this.T4_.ot_(),s=this.Czi_.ZZ_();if(s instanceof Zg){s.$L_(this.hx_);const t=i.Qe_()-i.we_();if(t<=L2){s.SU_("major","H:i:s");s.SU_("edge","H:i:s")}else if(t<=U2){s.SU_("major","H:i");s.SU_("edge","H:i")}else{s.SU_("major","M j, Y");s.SU_("edge","M j, Y")}}this.Bzi_.a_(this.pXi_(i.we_()));this.wzi_.a_(this.pXi_(i.Qe_()));this.yWi_["lastupdatedate"]["followcursor"]&&this.TWi_.isEnabled()||this.Izi_.a_(this.Dzi_(t.Qe_()));this.Fzi_!=null&&this.Fzi_.Lq_(t,i);const e=this.Azi_.getParent(),A=e instanceof sI&&e.rt_();e.Lq_(new mA(t.we_(),A.Ee_(),t.Qe_(),A.pe_()));this.KWi_.Lq_(t);this.HWi_.Lq_(t);this.Ozi_()}Ozi_(){if(!this.T4_.lt_()||!this.T4_.ot_())return;let t=!1;const i=this.uzi_,s=Gn.xI_(this.T4_.lt_(),this.T4_.ot_()),e=this.T4_.lt_().clone();s.rn_(e,e);if(!e.Ce_(i.getBounds())){i.ht_(e);t=!0}const A=new mA(0,0,this.T4_.lt_().Ie_(),this.T4_.lt_().Ts_());if(!A.Ce_(i.rt_())){i.Lq_(A);t=!0}t===!0&&this.fzi_.y4_()}MXi_(){this.ezi_.zT_();this.KWi_.zT_();this.HWi_.zT_();this.hzi_.zT_();this.Jgt_.zT_();this.ozi_.zT_();this.lzi_.zT_();this.uzi_.zT_();return this}Wft_(){const t=this.T4_.rt_();return new fA(t.we_(),t.Qe_())}_s_(t){const i=new mA(this.T4_.rt_());if(i.we_()!==t.Xs_()||i.Qe_()!==t.zs_()){i.setX(t.Xs_());i.de_(t.zs_()-t.Xs_());this.T4_.Lq_(i);this.mXi_=null;this.Pei_();this.hzi_.zT_()}return this}CWi_(){const t=this.T4_.ot_();return new fA(t.we_(),t.Qe_())}mzi_(t){if(t==null)return this;t.getSize()<k2&&(t.Xs_()+k2<this.T4_.rt_().Qe_()?t._s_(t.Xs_(),t.Xs_()+k2):t.zs_()-k2>this.T4_.rt_().we_()?t._s_(t.zs_()-k2,t.zs_()):t._s_(this.T4_.rt_().we_(),this.T4_.rt_().Qe_()));const i=new mA(this.T4_.rt_());i.setX(t.Xs_());i.de_(t.zs_()-t.Xs_());this.fzi_._Y_(i);if(this._Wi_!=null&&Math.abs(this._Wi_-(t.zs_()-t.Xs_()))>1){this.tzi_.Yki_(e$.Off);this._Wi_=null}this.Pei_();return this}P4_(t){this.fzi_.P4_(t,0);this.Pei_();return this}O4_(t){this.fzi_.O4_(t,1);this.Pei_();this.hzi_.zT_();return this}BAi_(){this.O4_(5/4);return this}wAi_(){this.O4_(4/5);return this}QAi_(){const t=this.T4_.rt_();this.mzi_(new fA(t.we_(),t.Qe_()));return this}vXi_(){return Y1.Zqi_(this.LWi_,"annotation_")}bXi_(){const t=Y1.Zqi_(this.UWi_,"annotation_line_collection_");this.UWi_.push(t);return t}NXi_(t){t==null&&(t={});t["id"]=this.vXi_();this.ozi_.GY_([new R1(t)]);this.LWi_.push(t["id"]);return t["id"]}SXi_(t){if(!Array.isArray(t))return null;const i=this.bXi_(),s=new sI({id:i});for(let e=0;e<t.length;e++){const A=t[e]||{};A["id"]=i+"_"+e;s.GY_([new R1(A)])}this.lzi_.GY_(s);return i}GXi_(t){return this.SHi_(t)}RXi_(t){if(t==null)return this;const i=this.kXi_(t);if(i!=null){this.lzi_.removeChild(i);i.dispose();this.UWi_.indexOf(t)!==-1&&this.UWi_.splice(this.UWi_.indexOf(t),1)}return this}FXi_(t){return t&&t.replace(/_\d+$/,"")}xXi_(t,i){return this.AHi_(t,i)}hHi_(t){const i={};if(t==null||t["curveid"]==null||t["time"]==null)return null;const s=this.iqi_(t["curveid"]);if(s==null||!(s instanceof d2))return null;let e=t["time"];if(isNaN(e))return null;const A=s._Hi_();if(A.curve==null||A.curve.getData()==null)return null;const n=A.curve,h=undefined,r=n.tPi_()["samples"],o=Y1.sJi_(e,r);let l=r[o].getValue();e=r[o].getPosition();const u=n.getParent();l=(u.rt_().pe_()-l)/u.rt_().Ts_()*this.ozi_.rt_().Ts_();const a=this.vXi_();i["id"]=a;i["point"]=new lA(e,l);i["label"]=t["label"];i["textstyle"]=t["textstyle"];i["symbol"]=Y1._qi_(t["symbol"]);i["linestyle"]=t["linestyle"];i["textbackground"]=t["textbackground"];i["fillstyle"]=t["fillstyle"];i["symbolsize"]=t["symbolsize"];i["timeseriesobject"]=s;const g=new b1({id:a});this.ozi_.GY_(g);this.LWi_.push(i["id"]);g.setOptions(i);return i["id"]}AHi_(t,i){if(t==null)return"";const s=this.bzi_(t);if(s!=null){i["symbol"]!=null&&(i["symbol"]=Y1._qi_(i["symbol"]));s.setOptions(i)}return t}SHi_(t){if(t==null)return this;const i=this.bzi_(t);if(i!=null){this.ozi_.removeChild(i);i.dispose();this.LWi_.indexOf(t)!==-1&&this.LWi_.splice(this.LWi_.indexOf(t),1)}return this}bzi_(t){if(t==null)return null;let i=this.LWi_.indexOf(t),s=0;if(i>-1&&this.ozi_.HY_(i)!=null&&this.ozi_.HY_(i).JV_()["id"]===t)return this.ozi_.HY_(i);for(i=0,s=this.ozi_.qY_();i<s;i++){const s=this.ozi_.HY_(i);if(s instanceof R1&&s.JV_()["id"]===t)return s}return null}kXi_(t){if(t==null)return null;let i=this.UWi_.indexOf(t),s=0;if(i>-1&&this.lzi_.HY_(i)!=null&&this.lzi_.HY_(i).N_()["id"]===t){const t=this.lzi_.HY_(i);return t instanceof sI?t:null}for(i=0,s=this.lzi_.qY_();i<s;i++){const s=this.lzi_.HY_(i);if(s instanceof sI&&s.N_()["id"]===t)return s}return null}LXi_(t){return this.UXi_(t)}UXi_(t){let i,s=this.bzi_(t);s==null&&(s=this.YXi_(t));s!=null&&(i=s.N_());i["id"]=t;return i}YXi_(t){let i=null;const s=this.FXi_(t),e=this.kXi_(s);if(e){const s=e.qY_();for(let A=0;A<s;++A){const s=e.HY_(A);s instanceof R1&&t===s.JV_()["id"]&&(i=s)}}return i}vW_(){const t=3;if(this.tzi_!=null){const i=Math.max(this.Bzi_.Ie_(),150);this.tzi_.ht_(new mA(i,t,i+ +this.tzi_.gG_(),t+this.tzi_.cG_()))}if(this.szi_!=null){const i=this.dzi_.rt_().Ie_()-Math.max(this.wzi_.Ie_()-+this.szi_.gG_(),150);this.szi_.ht_(new mA(i,t,i+ +this.szi_.gG_(),t+this.szi_.cG_()))}}zHi_(){return this.WHi_}TXi_(t){if(!this.yWi_["title"]["visible"])return;const i=this.Izi_.getBoundingBox(t);if(i==null)return;const s=this.Izi_.$C_()?i.Ie_():0,e=s>0?J2:0,A=t.Ji_().transform(this.czi_.getBounds()).Ie_(),n=undefined;let h;if(this.yWi_["title"]["centered"]){const t=undefined,i=A-s-e;let n=A-$o.measureText(this.pZ_.SG_(),this.pZ_.FE_()).Ie_();n=n>0?n/2:0;let r=n/A;r=r<0?0:r;this.pZ_.$I_(r);h=i-n}else{this.pZ_.$I_(0);h=A-s-e}this.pZ_.nf_(h>0);this.pZ_.de_(h)}render(t){this.TXi_(t);this.vW_();super.render(t)}ad_(t,i){this.TXi_(t);this.vW_();super.ad_(t,i)}KXi_(t,i,s){const e=this.qWi_["enabled"]===!0,A=this.JWi_["enabled"]===!0;e&&this.Jzi_({enabled:!1,fillstyles:this.qWi_["fillstyles"]});A&&this.Pzi_({enabled:!1,fillstyles:this.JWi_["fillstyles"]});const n=ur(this.hzi_).Gw_((function(i){return typeof i.XC_=="function"&&i.XC_()===t})).xw_(),h=ur(this.hzi_).Gw_((function(t){return typeof t.XC_=="function"&&t.XC_()===s})).xw_();this.hzi_.VY_(n,i,h);e&&this.Jzi_({enabled:!0,fillstyles:this.qWi_["fillstyles"]});A&&this.Pzi_({enabled:!0,fillstyles:this.JWi_["fillstyles"]});return this}$Wi_(t,i){i||(i=this.T4_.ot_());const s=i.Qe_(),e=s-t,A=new S2(E2.iWi_,new fA(e,s));this.yzi_(E2.tWi_,this,A);return this}izi_(){const t=this.Wft_(),i=this.CWi_(),s=t.zs_(),e=t.zs_()-(i.zs_()-i.Xs_());this.mzi_(new fA(e,s));return this}Ehi_(t,i,s){if(this.qWi_["enabled"]===!0)return this.PWi_.mCt_()[t].y[s];if(this.JWi_["enabled"]===!0){let i=0;Object.keys(this.PWi_.mCt_()).forEach((t=>{i+=this.PWi_.mCt_()[t].y[s]}));return this.PWi_.mCt_()[t].y[s]/i*100}return i[s].Ehi_()}Nzi_(t,i,s){const e=s||{format:t=>t};return this.JWi_["tooltip"]!=null&&this.JWi_["tooltip"]["showoriginalvalue"]===!0?"% ("+e.format(this.PWi_.mCt_()[t].y[i]):""}Xzi_(){const t=this.WHi_.IN_().toArray();if(t.length===0){this.WWi_.UOi_(null);return this}this.WWi_.UOi_(t);return this}RYi_(t,i,s,e,A){const n=qi(t,{id:t!=null?t:"",curveids:i!=null?i:[],curveaxis:A!=null?A:{},min:s!=null?s:null,max:e!=null?e:null},!0);t=n["id"];let h=null;const r=[];n["curveids"].forEach((t=>{const i=this.iqi_(t);i!=null&&r.push(i)}));if(n["min"]==null){let t=Number.MAX_VALUE;r.forEach((i=>{i!=null&&i.eqi_!=null&&i.eqi_()["min"]!=null&&i.eqi_()["min"]<t&&(t=i.eqi_()["min"])}));n["min"]=t!==Number.MAX_VALUE?t:0}if(n["max"]==null){let t=Number.MIN_VALUE;r.forEach((function(i){i!=null&&i.eqi_!=null&&i.eqi_()["max"]!=null&&i.eqi_()["max"]>t&&(t=i.eqi_()["max"])}));n["max"]=t!==Number.MIN_VALUE?t:1}const o=[];this.DWi_.IN_().forEach((t=>{o.push(t.XC_())}));if(!(o.indexOf(t)<0))return null;h=new N2(n);h.zE_(r);this.DWi_.add(h);h.on(K1.Bqi_,this.hXi_());h.on(K1.hJi_,this.rXi_());const l=h._Hi_().cJi_,u=h._Hi_().IJi_,a=h.GYi_();let g;a["position"]==="left"?g=ha.sG_:a["position"]==="right"&&(g=ha.AG_);if(a["position"]==="left"){this.fzi_.H4_(0,l,g);this.fzi_.H4_(0,u,g)}else{this.fzi_.K4_(l,g);this.fzi_.K4_(u,g)}this.qzi_();this.gzi_.wq_();this.fzi_.wq_();this.azi_.wq_();this.hzi_.zT_();this.Ozi_();return t}STi_(t){const i=this.HXi_(t);if(i==null)return this;const s=i.GYi_(),e=i._Hi_().cJi_,A=i._Hi_().IJi_;let n;s["position"]==="left"?n=ha.sG_:s["position"]==="right"&&(n=ha.AG_);this.fzi_.removeItem(e,n);this.fzi_.removeItem(A,n);i.IWi_();this.DWi_.remove(i);i.off(K1.Bqi_,this.hXi_());i.off(K1.hJi_,this.rXi_());this.qzi_();this.fzi_.wq_();this.Ozi_();return this}HXi_(t){if(t==null)return null;const i=undefined,s=this.DWi_.IN_().filter((i=>i.XC_()===t));return s==null||s.length===0?null:s[0]}qXi_(){return this.KWi_}JXi_(){return this.HWi_}PXi_(t){t==null&&(t={});const i=this.getRoot(),s=i.getBounds(),e=OA.Ai_().gn_("px"),A=undefined,n={paperformat:sf.Ai_().BV_("A4",e,VI.gV_),top:.5,bottom:.5,left:.5,right:.5,units:"in",scaling:qI.$P_,keepaspectratio:!0,continuous:!1},h=undefined,r=qi(t,{footer:null,header:null,output:"PDF Output",save:!1,printsettings:n,limits:null,scale:1},!0),o=new TI(i,s);o.ht_(s);const l=undefined,u=new KI([o],new dQ(s.Ie_(),s.Ts_())),a=new cQ(u,r["header"],r["footer"],!0),g=new TH;if(Array.isArray(r["embededfonts"])){const t=undefined;r["embededfonts"].forEach((t=>{t=qi(t,{},!0);g.ysi_(t["subtype"],t["fontname"],t["fontweight"],t["fontstyle"],t["fontbase64encodedfile"],t["encoding"])}))}r["imagecompression"]&&g.Ssi_(r["imagecompression"]["mode"],r["imagecompression"]["quality"],r["imagecompression"]["speed"]||fK.k4t_);r["streamcompression"]!=null&&g.Nsi_(r["streamcompression"]);let c;c=ys(r["pdfstream"],Qy)?r["pdfstream"]:new by;const I=this.C5_("cursor"),f=this.JV_()["scrollbar"]["visible"];if(I){this.setOptions({scrollbar:{visible:!1}});I.setPosition(new lA(NaN,NaN))}return g.hei_(a,r["printsettings"],c).then((t=>{t.save(r["output"],r["save"]);f&&this.setOptions({scrollbar:{visible:!0}});return t}),(function(t){throw t}))}$X_(t){if(this.WHi_.jv_()===0)return[];const i=undefined,s=this.WHi_.get(0)._Hi_().curve.if_().aI_(t),e=[];this.WHi_.IN_().forEach((t=>{const i=t.XC_(),A=t._Hi_().curve,n=t._Hi_().Dn_,h=A.tPi_()["samples"],r=Y1.sJi_(s.getX(),h,!0);let o;if(r!=null&&A.$C_()===!0&&A.getData()!=null){if(t.eqi_()!=null&&t.eqi_()["unit"]!=null){const i=t.eqi_()["unit"];o=i instanceof JA?i.fn_():i}if(h.length===0)e.push({id:i,curve:A,color:A.gt_().getColor(),symbol:n,name:A.dn_(),index:r,position:null,value:null,originalvalue:null,unit:" ("+o+")"});else{let t=h[r].Ehi_();(this.JWi_["enabled"]===!0||this.qWi_["enabled"])&&(t=this.PWi_.mCt_()[A.XC_()].y[r]);e.push({id:i,curve:A,color:A.gt_().getColor(),symbol:n,name:A.dn_(),index:r,position:h[r].getPosition(),value:h[r].getValue(),originalvalue:t,unit:" ("+o+")"})}}}));return e}dispose(){if(!this.Df_()){this.aXi_(null);this.QXi_(this.Cqi_());this.WWi_.dispose();super.dispose()}}VXi_(){return this.szi_}OXi_(){return this.tzi_}};i=t([_s("geotoolkit.widgets.TimeSeriesWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRMb2NhbGUiOiIkTF8iLCJnZXRMb2NhbGUiOiJseF8iLCJpbml0aWFsaXplTGF5b3V0IjoiQzR0XyIsImluaXRpYWxpemVUb29scyI6IkE0dF8iLCJzZWxlY3RDdXJ2ZUJ5SWQiOiJHemlfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0T3B0aW9ucyI6IkpWXyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJzZXRTdGFja01vZGUiOiJKemlfIiwiZ2V0U3RhY2tNb2RlIjoiV3ppXyIsInNldFBlcmNlbnRNb2RlIjoiUHppXyIsImdldFBlcmNlbnRNb2RlIjoienppXyIsInNldEJhck1vZGUiOiJWemlfIiwiZ2V0QmFyTW9kZSI6Imp6aV8iLCJoaWdobGlnaHRCYXJzIjoiZGZ0XyIsImdldEN1cnZlcyI6IkNxaV8iLCJnZXRUaW1lU2VyaWVzT2JqZWN0QnlJZCI6ImlxaV8iLCJnZXREYXRhQnlJZCI6IiR6aV8iLCJhZGRDdXJ2ZSI6InRYaV8iLCJpbnNlcnRDdXJ2ZSI6ImlYaV8iLCJhZGRDdXJ2ZXMiOiJlWGlfIiwiaW5zZXJ0Q3VydmVzIjoiQVhpXyIsImNyZWF0ZVRpbWVTZXJpZXNPYmplY3QiOiJuWGlfIiwic2V0SG9yaXpvbnRhbEdyaWRDdXJ2ZVJlZmVyZW5jZSI6ImFYaV8iLCJhZGRGaWxsIjoiY3FpXyIsInJlbW92ZUN1cnZlRmlsbCI6ImZxaV8iLCJnZXRDdXJ2ZUZpbGxzIjoiZFhpXyIsImdldEN1cnZlRmlsbFN0eWxlIjoiQlhpXyIsInJlbW92ZUN1cnZlIjoiUVhpXyIsImdldEN1cnZlUHJvcGVydGllcyI6ImFxaV8iLCJ1cGRhdGVMYXlvdXQiOiJ3cV8iLCJzZXRNb2RlbE9mZnNldHMiOiJUemlfIiwiZ2V0TW9kZWxPZmZzZXRzIjoieVhpXyIsInVwZGF0ZVNjZW5lVHJhbnNmb3JtYXRpb24iOiJBZF8iLCJyZWJ1aWxkTGF5ZXJzIjoiTVhpXyIsImdldFJhbmdlIjoiV2Z0XyIsInNldFJhbmdlIjoiX3NfIiwiZ2V0VmlzaWJsZVJhbmdlIjoiQ1dpXyIsInNldFZpc2libGVSYW5nZSI6Im16aV8iLCJ0cmFuc2xhdGVNb2RlbCI6IlA0XyIsInNjYWxlTW9kZWwiOiJPNF8iLCJ6b29tSW4iOiJCQWlfIiwiem9vbU91dCI6IndBaV8iLCJmaXRUb0JvdW5kcyI6IlFBaV8iLCJhZGRBbm5vdGF0aW9uTGluZSI6Ik5YaV8iLCJhZGRBbm5vdGF0aW9uTGluZUNvbGxlY3Rpb24iOiJTWGlfIiwicmVtb3ZlQW5ub3RhdGlvbkxpbmUiOiJHWGlfIiwicmVtb3ZlQW5ub3RhdGlvbkxpbmVDb2xsZWN0aW9uIjoiUlhpXyIsImVkaXRBbm5vdGF0aW9uTGluZSI6InhYaV8iLCJhZGRBbm5vdGF0aW9uIjoiaEhpXyIsImVkaXRBbm5vdGF0aW9uIjoiQUhpXyIsInJlbW92ZUFubm90YXRpb24iOiJTSGlfIiwiZ2V0QW5ub3RhdGlvbkxpbmVQcm9wZXJ0aWVzIjoiTFhpXyIsImdldEFubm90YXRpb25Qcm9wZXJ0aWVzIjoiVVhpXyIsInJlbmRlckFzeW5jIjoiYWRfIiwiY2hhbmdlVmlzdWFsT3JkZXIiOiJLWGlfIiwiY3JlYXRlR3JvdXAiOiJSWWlfIiwicmVtb3ZlR3JvdXAiOiJTVGlfIiwiZ2V0R3JvdXBCeUlkIjoiSFhpXyIsImdldFZpc3VhbEZyb250TGF5ZXIiOiJxWGlfIiwiZ2V0VmlzdWFsQmFja0xheWVyIjoiSlhpXyIsImV4cG9ydFRvUERGIjoiUFhpXyIsImhpdFRlc3QiOiIkWF8iLCJnZXROb3dCdXR0b25XaWRnZXQiOiJWWGlfIiwiZ2V0U2NhbGVzQnV0dG9uV2lkZ2V0IjoiT1hpXyJ9fX0g"),X2=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.vi_=jn.Ai_()}bi_(t,i){return t["attributename"]==="data"&&i instanceof z2}Yi_(t){const i=t.Cqi_(),s=[];for(let e=0;e<i.length;e++)t.$zi_(i[e]).uDt_().syt_()>e+1?s[e]=t.$zi_(i[e]).uDt_().Ayt_(e+1)["data"]["data"]:s[e]=s[e-1].slice();return s}apply(t){const i=t.Cqi_(),s=[],e=[];for(let A=0;A<this.Ti_().length;A++){s[A]=new qb({cols:[{type:"number",data:t.$zi_(i[A]).uDt_().Ayt_(0)["data"]["data"]},{type:"number",data:this.Ti_()[A]}]});e[A]=new Pb(s[A]);const n=t.iqi_(i[A]);n!=null&&n.setData(e[A])}}};i=t([_s(null)],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(X2);export {sK,eK,AK,cK,KH,HH,qH,JH,PH,OH,WH,_H,W_,X_,i$,e$,A$,n$,h$,w$,p$,m$,y$,N$,S$,G$,R$,k$,F$,x$,U$,Y$,T$,V$,W$,z$,X$,h0,c0,I0,w0,E0,p0,M0,v0,b0,N0,R0,k0,F0,x0,U0,Y0,q0,O0,W0,z0,Z0,_0,$0,t1,i1,s1,n1,h1,r1,o1,l1,c1,I1,f1,C1,p1,m1,b1,R1,k1,F1,x1,Y1,T1,K1,J1,O1,W1,_1,$1,t2,i2,s2,e2,A2,n2,u2,d2,Q2,E2,p2,m2,y2,D2,M2,v2,N2,S2,z2};