/* eslint-disable */
import {__decorate as t} from 'tslib';import {_s,$n,Zn,ys,mA,If,Is,ma,dA,cE,wr,fe,xo,Fo,ws,Pi,Es,sI,fm,Bh,iu,Ic,iB,$g,JA,Rl,bC,fA,jf,tg,Zg,Za,qi,ch,xl,qa,nA,Zs,RA,GA,Gn,LA,hl,il,ka,pE,qh,lA,In,tn,MC,tp,QA,vd,nd,sB,ha,fg,Dr,yr,Qg,WC,bn,NA,$o,Rd,_l,dp,Zf,ur,rQ,sQ,zn,ke,Hn,be,rh,TQ,Cm,ki,Ca,As,Mi,Kr,El,JC,IE,fE,$E,sp,da,bo,Rc,Ig,Ur,No,po,Hs,Ew,aw,OC,sa,gc,ea,wE,fd,pw,xA,Au,Ci} from '@int/impl/geotoolkit.base.js';import {zD,YD,PD,Lb,VD,Jb,KD,HD,vM,qb,HT} from '@int/impl/geotoolkit.data.js';import {Mb,yb,WN,BM,XD,_D,jD,oD,FM,GM,QM,OM,DS,gv,iN,oN,Qv,av,Vv,Xv,zv,db,Ov,Pv,Jv,sN,eN,rD,ZR,_b,qv,QS,fN,NG,bG,uv,iY,YG,lG,FS,_k,tF,Db,OS,xS} from '@int/impl/geotoolkit.controls.js';import {_H,OH,HH} from '@int/impl/geotoolkit.widgets.js';var wY=Ci({U0t_:"SeriesAdded",Y0t_:"SeriesRemoved",pct_:"Updated",Dct_:"ValuesAdding",Mct_:"ValuesAdded",Nct_:"ValuesRemoving",Sct_:"ValuesRemoved",T0t_:"SeriesStatesChanged"},2,"eyJTZXJpZXNBZGRlZCI6IlUwdF8iLCJTZXJpZXNSZW1vdmVkIjoiWTB0XyIsIlVwZGF0ZWQiOiJwY3RfIiwiVmFsdWVzQWRkaW5nIjoiRGN0XyIsIlZhbHVlc0FkZGVkIjoiTWN0XyIsIlZhbHVlc1JlbW92aW5nIjoiTmN0XyIsIlZhbHVlc1JlbW92ZWQiOiJTY3RfIiwiU2VyaWVzU3RhdGVzQ2hhbmdlZCI6IlQwdF8ifSAg");var QY=Ci({K0t_:"AppearFromLeft",H0t_:"AppearFromBelow",W_:"None"},2,"eyJBcHBlYXJGcm9tTGVmdCI6IkswdF8iLCJBcHBlYXJGcm9tQmVsb3ciOiJIMHRfIiwiTm9uZSI6IldfIn0g");var EY=Ci({JQ_:"Bottom",z_:"Left",Top:"Top",X_:"Right"},2,"eyJCb3R0b20iOiJKUV8iLCJMZWZ0Ijoiel8iLCJSaWdodCI6IlhfIn0g");var pY=Ci({q0t_:"StateAdded",J0t_:"StateRemoved"},2,"eyJTdGF0ZUFkZGVkIjoicTB0XyIsIlN0YXRlUmVtb3ZlZCI6IkowdF8ifSAg");const mY=function(t){const i=[];for(let s=0;s<t.length;s++){const e=Math.round(t[s]);i[i.length-1]!==e&&i.push(e)}return i};var yY=Ci(function(){var i;let s=i=class t extends $n{constructor(t){super();this.tb_={};this.ov_="";t!=null&&t["name"]!=null&&(this.ov_=t["name"])}HC_(t){this.ov_=t;return this}dn_(){return this.ov_}select(t,s,e){if(typeof t!="number"&&!Array.isArray(t)){e=s||i.P0t_;for(const i in t)this.select(t[i],i,e);return this}let A=!1;e=e||i.P0t_;this.tb_[e]=this.tb_[e]||{};if(this.tb_[e][s]==null){A=!0;this.tb_[e][s]=[]}const n=Array.isArray(t)?t.slice().sort(((t,i)=>t-i)):[t],h=this.tb_[e][s],r=[];let o=0;for(let t=0;o<n.length&&t<h.length;t++)if(!(n[o]>h[t])){if(n[o]<h[t]){r.push(n[o]);h.splice(t,0,n[o])}o++}while(o<n.length){r.push(n[o]);h.push(n[o++])}if(r.length===0&&!A)return this;this.notify(pY.q0t_,this,{selection:this.dn_(),series:s,index:mY(r),state:e});return this}vO_(t,s,e){if(t==null){this.clear(s,e);return this}if(typeof t!="number"&&!Array.isArray(t)){e=s||i.P0t_;this.tb_[e]=this.tb_[e]||{};for(const i in this.tb_[e])this.tb_[e]!=null&&t[e]==null&&this.clear(i,e);for(const i in t)this.vO_(t[i],i,e);return this}e=e||i.P0t_;this.tb_[e]=this.tb_[e]||{};const A=Array.isArray(t)?t.slice().sort(((t,i)=>t-i)):[t],n=this.tb_[e][s]||[],h=[],r=[];let o=0,l=0;for(o=0;o<A.length||l<n.length;)if(l>=n.length||A[o]<n[l])r.push(A[o++]);else if(o>=A.length||A[o]>n[l])h.push(n[l++]);else{o++;l++}this.V0t_(h,s,e);this.select(r,s,e);return this}toggle(t,s,e){if(typeof t!="number"&&!Array.isArray(t)){e=s||i.P0t_;for(const i in t)this.toggle(t[i],i,e);return this}e=e||i.P0t_;this.tb_[e]=this.tb_[e]||{};const A=Array.isArray(t)?t.slice().sort(((t,i)=>t-i)):[t],n=this.tb_[e][s];if(n==null)return this.select(A,s,e);const h=[],r=[];let o=0,l=0;while(o<A.length&&l<n.length)if(A[o]<n[l])r.push(A[o++]);else if(A[o]===n[l]){h.push(A[o++]);l++}else l++;while(o<A.length)r.push(A[o++]);if(r.length===0&&h.length===n.length)this.clear(s,e);else{h.length>0&&this.V0t_(h,s,e);this.select(r,s,e)}return this}V0t_(t,s,e){if(typeof t!="number"&&!Array.isArray(t)){e=s||i.P0t_;for(const i in t)this.V0t_(t[i],i,e);return this}e=e||i.P0t_;if(this.tb_[e]==null||this.tb_[e][s]==null)return this;const A=this.tb_[e][s],n=Array.isArray(t)?t:[t],h=[];for(let t=0;t<n.length;t++){const i=A.indexOf(n[t]);if(i>=0){h.push(n[t]);A.splice(i,1)}}if(A.length===0||n.length===0)delete this.tb_[e][s];else if(h.length===0)return this;this.notify(pY.J0t_,this,{selection:this.dn_(),series:s,index:mY(h),state:e});return this}clear(t,s){s=s||i.P0t_;if(this.tb_[s]==null)return this;if(t==null){for(const t in this.tb_[s])if(this.tb_[s][t]!=null){const i=this.tb_[s][t];delete this.tb_[s][t];this.notify(pY.J0t_,this,{selection:this.dn_(),series:t,index:mY(i),state:s})}delete this.tb_[s];return this}if(this.tb_[s][t]!=null){const i=this.tb_[s][t];delete this.tb_[s][t];this.notify(pY.J0t_,this,{selection:this.dn_(),series:t,index:mY(i),state:s})}return this}getSelection(t){t=t||i.P0t_;if(this.tb_[t]==null)return null;const s={};for(const i in this.tb_[t])s[i]=mY(this.tb_[t][i]);return s}k9_(t,s){s=s||i.P0t_;return this.tb_[s]==null||this.tb_[s][t]==null?null:mY(this.tb_[s][t])}O0t_(t,s){s=s||i.P0t_;return this.tb_[s]==null||this.tb_[s][t]==null?null:this.tb_[s][t]}W0t_(t,s,e){if(typeof t!="number"&&!Array.isArray(t)){e=s||i.P0t_;for(const i in t)if(!this.W0t_(t[i],i,e))return!1;return!0}e=e||i.P0t_;if(this.tb_[e]==null||this.tb_[e][s]==null)return!1;const A=Array.isArray(t)?t.map(Math.round).sort(((t,i)=>t-i)):[Math.round(t)],n=mY(this.tb_[e][s]);for(let t=0,i=0;t<A.length;){if(i===n.length||n[i]>A[t])return!1;if(n[i]<A[t])i++;else{t++;i++}}return!0}z0t_(){return Object.keys(this.tb_)}};s.P0t_="default";s=i=t([_s("geotoolkit.charts.SelectionSeries")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXROYW1lIjoiSENfIiwiZ2V0TmFtZSI6ImRuXyIsInNldFNlbGVjdGlvbiI6InZPXyIsImRlc2VsZWN0IjoiVjB0XyIsImdldEluZGljZXMiOiJrOV8iLCJpc1NlbGVjdGVkIjoiVzB0XyIsImdldFN0YXRlcyI6InowdF8ifX19");var DY=Ci({X0t_:"numerical",Ay_:"logarithmic"},2,"eyJOdW1lcmljYWwiOiJYMHRfIiwiTG9nYXJpdGhtaWMiOiJBeV8ifSAg");function MY(t,i){let s;const e=t.toArray(!1).map(i),A=new zD({data:e});t.on(YD.Rct_,((t,s)=>{A.setValues(s.toArray(!1).map(i))}));t.on(YD.bct_,(function(t,e,n){for(s=0;s<n["count"];s++){const t=n["from"]+s;A.setValue(t,i(e.getValue(t),t))}}));t.on(YD.Mct_,(function(t,e,n){for(s=0;s<n["count"];s++){const t=n["from"]+s;A.Oi_(i(e.getValue(t),t))}}));t.on(Zn.cf_,(function(){A.dispose()}));return A}function vY(t){const i=48,s=90;if(i+t<=s)return[i+t];const e=t%(s-i+1),A=vY((t-e)/(s-i+1));A.push(i+e);return A}const bY="unknown",NY=":";var SY=Ci(function(){var i;let s=i=class t extends $n{constructor(t){super();this.Us_={};this.j0t_={};this.Z0t_={};this._0t_=new Map;this.$0t_();t!=null&&this.add(t)}t1t_(t,s,e){e=e||i.i1t_;this.Z0t_[e]=this.Z0t_[e]||{};s=s||i.s1t_;if(this.Z0t_[e][s]!=null)throw new Error('"'+s+'" selection already exists in "'+e+'" data table');this.Z0t_[e][s]=t;return this}vO_(t,s,e){e=e||i.i1t_;this.Z0t_[e]=this.Z0t_[e]||{};s=s||i.s1t_;this.Z0t_[e][s]&&this.Z0t_[e][s].clear();this.Z0t_[e][s]=t;return this}e1t_(t,s){s=s||i.i1t_;t=t||i.s1t_;if(!this.Z0t_[s]||!this.Z0t_[s][t])return this;const e=this.Z0t_[s][t];e.z0t_().forEach((t=>{Object.keys(e.getSelection(t)).forEach((i=>{e.notify(pY.J0t_,this,{selection:e.dn_(),series:e,index:e.k9_(i,t),state:t})}))}));this.Z0t_[s][t]=null;return this}getSelection(t,s){s=s||i.i1t_;this.Z0t_[s]=this.Z0t_[s]||{};t=t||i.s1t_;this.Z0t_[s][t]==null&&(this.Z0t_[s][t]=new yY({name:t}));return this.Z0t_[s][t]}add(t){const s=t.dn_()||i.i1t_;if(this.Us_[s]!=null)throw new Error('"'+s+'" DataTable already exists');t.on(Lb.Iyt_,this.A1t_);t.on(Lb.fyt_,this.A1t_);t.on(Lb.Cyt_,this.A1t_);t.on(Lb.dyt_,this.A1t_);t.on(Lb.uyt_,this.n1t_);t.on(Lb.gyt_,this.h1t_);t.on(Lb.Fct_,this.r1t_);t.on(Lb.Rct_,this.o1t_);t.on(Jb.wC_,this.o1t_);this.Us_[s]=t;return this}remove(t){let s,e;if(typeof t=="string"){e=t;s=this.Us_[t];if(s==null)return this}else{s=t;for(const t in this.Us_)if(this.Us_[t]===s){e=t;break}if(e==null)return this}delete this.Us_[e];s.off(Lb.Iyt_,this.A1t_);s.off(Lb.fyt_,this.A1t_);s.off(Lb.Cyt_,this.A1t_);s.off(Lb.dyt_,this.A1t_);s.off(Lb.uyt_,this.n1t_);s.off(Lb.gyt_,this.h1t_);s.off(Lb.Fct_,this.r1t_);s.off(Lb.Rct_,this.o1t_);s.off(Jb.wC_,this.o1t_);this.notify(wY.Y0t_,this,{tableid:e,series:i.vyt_(s).map((t=>t.XC_()))});return this}l1t_(t,s){s=s||i.i1t_;const e=this._0t_.get(t)||{};if(e[s]!=null)return e[s];const A=this.u1t_(s);let n;if(typeof t[0]=="string")n={[bY]:new PD({data:t})};else if(t[0]instanceof Date){t=t.map((t=>t.getTime()));n={[bY]:new PD({data:t,unit:"ms"})}}else n={[DY.X0t_]:new zD({data:t})};e[s]=A;this.j0t_[A]=n;this._0t_.set(t,e);this._0t_.set(s+NY+A,{});return A}u1t_(t){const i=t+NY+"cg-";for(let t=0;t<1e5;t++){const s=i+String.fromCharCode(...vY(t));if(this.j0t_[s]==null)return s}return""}a1t_(t,s){s=s||i.i1t_;return this._0t_.has(s+NY+t)}$0t_(){this.n1t_=(t,s,e)=>{const A=[];for(let t=e["from"];t<e["from"]+e["count"];t++)A.push(s.Ayt_(t).XC_());this.notify(wY.U0t_,this,{tableid:s.dn_()||i.i1t_,series:A})};this.h1t_=(t,s,e)=>{this.notify(wY.Y0t_,this,{tableid:s.dn_()||i.i1t_,series:e["values"].map((t=>t.XC_()))})};this.A1t_=(t,s,e)=>{let A;A=t===Lb.Iyt_?wY.Dct_:t===Lb.fyt_?wY.Mct_:t===Lb.Cyt_?wY.Nct_:wY.Sct_;this.notify(A,this,{tableid:s.dn_()||i.i1t_,series:i.vyt_(s).map((t=>t.XC_())),from:e["from"],count:e["count"]})};this.r1t_=(t,i)=>{this.remove(i)};this.o1t_=this.onUpdate.bind(this)}g1t_(t,s){if(t==null)return null;let e,A;const n=t.indexOf(NY);if(n<0){A=i.i1t_;e=t}else{A=t.substring(0,n);e=t.substring(n+1)}const h=A+NY+e,r=this.Us_[A]?this.Us_[A].hyt_(e):null;this.j0t_[h]==null&&r!=null&&(this.j0t_[h]={[ys(r,VD)?DY.X0t_:bY]:r});const o=this.j0t_[h]||{};switch(s){case DY.X0t_:if(o[DY.X0t_]!=null)return o[DY.X0t_];if(o[bY]!=null){o[DY.X0t_]=MY(o[bY],((t,i)=>t==null?NaN:typeof t=="number"?t:i));return o[DY.X0t_]}return null;case DY.Ay_:if(o[DY.Ay_]!=null)return o[DY.Ay_];const i=this.g1t_(t,DY.X0t_);if(i!=null){o[DY.Ay_]=MY(i,(t=>t===0?NaN:Math.log10(t)));return o[DY.Ay_]}return null}return o[bY]||o[DY.X0t_]||null}uDt_(t){t=t||i.i1t_;return this.Us_[t]}clear(t){for(const i in this.Us_)t!=null&&t!==i||this.remove(i);return this}static vyt_(t){const i=[];for(let s=0;s<t.syt_();s++)i.push(t.Ayt_(s));return i}c1t_(t){t=t||i.i1t_;return this.Us_[t]!=null?i.vyt_(this.Us_[t]).map((t=>t.XC_().toString())):[]}dispose(){this.clear();super.dispose()}onUpdate(){this.notify(wY.pct_,this)}};s.i1t_="default";s.s1t_="default";s=i=t([_s("geotoolkit.charts.DataSource")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRTZWxlY3Rpb24iOiJ0MXRfIiwic2V0U2VsZWN0aW9uIjoidk9fIiwicmVtb3ZlU2VsZWN0aW9uIjoiZTF0XyIsImFkZEFycmF5IjoibDF0XyIsImlzR2VuZXJhdGVkTmFtZSI6ImExdF8iLCJnZXREYXRhU2VyaWVzIjoiZzF0XyIsImdldERhdGFUYWJsZSI6InVEdF8iLCJnZXREYXRhU2VyaWVzSWRzIjoiYzF0XyJ9fX0g");var GY=function(){var i;let s=i=class t{constructor(){this.DIt_=null}I1t_(t){const i=1,s=t!=null&&t["width"]?t["width"]:8,e=t!=null&&t["height"]?t["height"]:8,A=t!=null&&t["painter"]?t["painter"]:cE,n=this.f1t_(A),h=t["fillstyle"],r=s+2*i,o=e+2*i;if(n!=null){let t="red";h instanceof xo?t=`radial-gradient(${h._p_()}, ${h.tm_()})`:h instanceof Fo?t=`linear-gradient(${h._p_()}, ${h.tm_()})`:h instanceof wr?t=h.getColor():h!=null&&h["color"]!=null&&(t=h["color"]);return'<span class="cg-tooltip-symbol '+n+'" width="'+r+'" height="'+o+'"'+' style="background: '+t+';"></span>'}const l=this.fn_(t),u=undefined;return'<span class="cg-tooltip-symbol"><img src=\''+If.MV_(l,(s+2*i)*Is(),(e+2*i)*Is(),!1,!1,new mA(-i,-i,s+i,e+i))+"' width='"+r+"' height='"+o+"'/>"+"</span>"}fn_(t){const i=t!=null&&t["width"]?t["width"]:8,s=t!=null&&t["height"]?t["height"]:8,e=t!=null&&t["painter"]?t["painter"]:cE,A=t!=null&&t["linestyle"]?t["linestyle"]:"red",n=t!=null&&t["fillstyle"]?t["fillstyle"]:"red",h={ax:i/2,ay:s/2,alignment:dA.ne_,linestyle:A,fillstyle:n,painter:e,sizeisindevicespace:!0,width:i,height:s};this.DIt_==null?this.DIt_=new ma(h):this.DIt_.dt_(h);return this.DIt_}f1t_(t){if(fe(t)){const i=undefined;switch(t.D_()){case"geotoolkit.scene.shapes.painters.DiamondPainter":return"diamond";case"geotoolkit.scene.shapes.painters.CirclePainter":return"circle";case"geotoolkit.scene.shapes.painters.SquarePainter":return"square"}}return null}static Ai_(){i.Gf_==null&&(i.Gf_=new i);return i.Gf_}};s=i=t([_s("geotoolkit.charts.TooltipHelpers")],s);return s}();var RY={X:"x",Y:"y",Z:"z",S:"s"};const kY="${series.symbol} ${series.name}: ${value} ${series.unit}",FY=new $g({maximumfractiondigits:2}),xY=new tg({format:"M j, Y"}),LY="unknown";var UY=Ci(function(){let i=class t extends iu{constructor(t){super(t);this.C1t_=new Map;this.pbt_=null;this.d1t_=null;this.B1t_=null;this.w1t_={};this.Q1t_=EY.JQ_;this.E1t_={};t["axes"]=t["axes"]||{};this.p1t_=t["tooltipformat"]??null;this.m1t_=Pi(t["tooltip"],{format:kY,valueformat:null},!0);this.y1t_=Pi(t["legend"],{format:"",valueformat:null},!0);this.y1t_["valueformat"]==null&&(this.y1t_["valueformat"]=new $g({maximumfractiondigits:2}));this.d1t_=t["series"]&&t["series"]["table"];this.B1t_=t["series"]&&t["series"]["selection"];this.D1t_=t["axes"]||{};this.M1t_=[];this.v1t_=this.b1t_.bind(this);this.N1t_=!1;this.Us_=null;this.S1t_=null}render(t){if(this.pbt_!=null){const i=this.sd_()?t.uS_(this.sd_()):t;this.pbt_.render(i)}}vn_(t,i){super.vn_(t,i);const s=this.getParent();if(this.pbt_!=null&&s instanceof Ic){this.pbt_.ht_(s.rt_());this.pbt_.vn_(t,i)}return this}Lq_(t){if(this.pbt_!=null){this.pbt_.Lq_(t);const i=this.pbt_.It_();this.pbt_.at_(i?i.rI_():null)}return this}rt_(){return this.pbt_!=null?this.pbt_.rt_():null}Eq_(t){this.G1t_().Eq_(t);return this}jY_(){return this.pbt_!=null&&this.pbt_.jY_()}pq_(t){this.pbt_!=null&&this.pbt_.pq_(t);return this}ZY_(){return this.pbt_!=null&&this.pbt_.ZY_()}x8_(){if(this.pbt_==null)return null;if(this.S1t_==null){this.S1t_=new sI;this.pbt_.Gq_(this.S1t_)}return this.S1t_}sd_(){return this.pbt_!=null?this.pbt_.It_():null}G1t_(){if(this.pbt_==null){this.pbt_=new sI;this.pbt_.jC_(this)}return this.pbt_}rvt_(t){this.Us_!=null&&this.Us_.getSelection(this.B1t_,this.R1t_()).off(pY.q0t_,this.v1t_).off(pY.J0t_,this.v1t_);this.Us_=t;this.k1t_();this.N1t_=this.F1t_();t!=null&&t.getSelection(this.B1t_,this.R1t_()).on(pY.q0t_,this.v1t_).on(pY.J0t_,this.v1t_);this.x1t_();this.L1t_();if(t!=null){const i=t.getSelection(this.B1t_,this.R1t_());i.z0t_().forEach((t=>{Object.keys(i.getSelection(t)).forEach((s=>{this.b1t_(pY.q0t_,i,{selection:i.dn_(),series:s,index:i.k9_(s,t),state:t})}))}))}return this}k1t_(){}U1t_(t,i,s){}Y1t_(t,i,s){}x1t_(){}T1t_(){return this.N1t_}K1t_(t){return null}Cvt_(){return this.Us_}H1t_(t){const i=this.q1t_(this.K1t_(RY.X));this.J1t_().forEach((s=>{const e=""+s.XC_(),A=this.g1t_(e),n=this.K1t_(e);s.dt_({text:this.P1t_({"${x-series}":i,"${y-series}":this.q1t_(n),"${series.unit}":A?.gn_()?.fn_()||"","${value}":t!=null&&t[e]!=null&&t[e].length===1?this.V1t_(this.O1t_(n["data"],t[e][0])):""})})}))}J1t_(){return this.M1t_}W1t_(t,i,s){this.w1t_[t]=new fA(i,s);return this}z1t_(t){return this.w1t_[t]||new fA(0,1)}X1t_(){return 0}j1t_(){return 0}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}else e=bC.select(this.getRoot(),t.x,t.y,i||0).filter(s);return e.length>0?e[0].getData():null}static Z1t_(t,i,s){if(s!=null)if(t[i]!=null){for(let e=0;e<t[i].length;e++){if(t[i][e]===s)return;if(t[i][e]>s){t[i].splice(e,0,s);return}}t[i].push(s)}else t[i]=[s];else t[i]=t[i]||[]}O1t_(t,i){const s=this.g1t_(t);return s==null||s.getLength()<=i||i%1!=0?NaN:s.getValue(i)}setOrientation(t){this.Q1t_=t;return this}KH_(){return this.Q1t_}F1t_(){return this.Cvt_()!=null}_1t_(t){return this.D1t_[t]!=null?this.D1t_[t]:null}$1t_(t,i){if(this.E1t_[t]===i)return this;this.E1t_[t]=i;this.x1t_();return this}t2t_(t){return this.E1t_[t]||DY.X0t_}g1t_(t,i){if(this.Us_==null)return null;const s=this.d1t_!=null?this.d1t_+NY+t:t;let e=null;i===DY.X0t_||i===DY.Ay_?e=i:i!=null&&(e=this.t2t_(i));return this.Us_.g1t_(s,e)}i2t_(t){if(t===this.d1t_)return this;this.d1t_=t;this.rvt_(this.Cvt_());this.notify(wY.pct_,this);return this}R1t_(){return this.d1t_||SY.i1t_}s2t_(t){if(this.B1t_===t||!this.Cvt_())return this;this.Cvt_().getSelection(this.B1t_,this.R1t_()).off(pY.q0t_,this.v1t_).off(pY.J0t_,this.v1t_);this.B1t_=t;this.Cvt_().getSelection(this.B1t_,this.R1t_()).on(pY.q0t_,this.v1t_).on(pY.J0t_,this.v1t_);return this}e2t_(){return this.B1t_||SY.s1t_}A2t_(t){const i=this.K1t_(t);if(!i||!i["data"])return null;let s=null;const e=this.g1t_(i["data"]);if(e&&e.gn_()&&e.gn_().En_("time")){const t=Za.zF_();s=new Zg({edge:{tickvisible:!1,labelvisible:!1},labelautohide:0,formatlabelhandler:(i,s,e,A,n,h)=>{const r=new Date(h);return t[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear()}})}else if(e&&!ys(e,VD)){const A=this.g1t_(i["data"],this.t2t_(t));s=new iB({labels:e.toArray(!1),positions:A.toArray(!1)})}else s=null;return s}dispose(){if(this.Df_())return;this.Us_!=null&&this.rvt_(null);const t=this.J1t_();for(let i=0;i<t.length;i++)t[i].dispose();this.pbt_!=null&&this.pbt_.dispose();super.dispose()}initialize(t){this.Tmt_();if(this.n2t_()!=null){this.n2t_().IB_(this.h2t_(t&&t["animation"]));this.n2t_().HC_(this.dn_())}return this}r2t_(t,i){return null}o2t_(){return[]}Tmt_(){this.M1t_.forEach((t=>{this.notify(fm.mt_,this,t);t.dispose()}));this.M1t_=[];this.o2t_().forEach((t=>{const i=this.r2t_(t).JC_(t["data"]);this.M1t_.push(i);this.notify(fm.Add,this,i)}));return this}L1t_(){const t=this.M1t_.length,i=this.o2t_().length;if(t>i)for(let s=i;s<t;s++){this.notify(fm.mt_,this,this.M1t_[s]);this.M1t_[s].dispose()}const s=this.o2t_();this.M1t_.forEach(((t,i)=>{this.r2t_(s[i],t).JC_(s[i]["data"])}));t<i&&this.o2t_().forEach(((i,s)=>{if(s<t)return;const e=this.r2t_(i).JC_(i["data"]);this.M1t_.push(e);this.notify(fm.Add,this,e)}));this.H1t_();return this}V1t_(t){if(t==null)return"";let i=t.toString();typeof t=="number"&&(i=this.y1t_["valueformat"].format(t));return i}P1t_(t){let i=this.y1t_["format"];for(const s in t)t.hasOwnProperty(s)&&(i=i.replaceAll(s,t[s]));return i}n2t_(){return null}h2t_(t){return t===!1||t===QY.W_?null:typeof t=="object"?Bh.Wi_(t):null}Hf_(t){super.Hf_(t);this.pbt_!=null&&this.pbt_.Hf_(t)}Jf_(t){super.Jf_(t);this.pbt_!=null&&this.pbt_.Jf_(t)}l2t_(){return[]}q1t_(t){return t==null?LY:typeof t=="string"?t:Array.isArray(t)?typeof t[0]!="object"?LY:this.q1t_(t[0]):t["name"]?t["name"]:typeof t["data"]!="string"||this.Cvt_()&&this.Cvt_().a1t_(t["data"])?LY:this.Cvt_()&&this.Cvt_().g1t_(t["data"])?.dn_()||t["data"]}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e),h=[this.l2t_(),this.J1t_()];for(let t=0;t<h.length;t++)for(let i=0;i<h[t].length;i++){const s=h[t][i],A=undefined;n[""+s.XC_()]!=null?s.Bd_(e):s.Qd_(e)}e===Rl.__&&this.H1t_(n)}u2t_(t){}a2t_(t){}g2t_(){return this.p1t_}c2t_(t,i,s){if(t==null)return"";let e=t.toString();if(i!=null){const A=i["valueformat"]!=null?i["valueformat"]:s!=null&&s.En_("time")?xY:FY;typeof t=="number"&&(e=A.format(t))}return e}I2t_(t,i){return{format:t["format"]!==void 0?t["format"]:i["format"],valueformat:t["valueformat"]!==void 0?t["valueformat"]:i["valueformat"]}}f2t_(t,i){const s=this.C1t_.get(t);if(s!=null&&ws(s.options,i))return s.Dn_;const e=GY.Ai_().I1t_(i)+" ";this.C1t_.set(t,{options:i,Dn_:e});return e}C2t_(t,i){const s={};let e=t["value"];const A=(i=i!=null?this.I2t_(i,this.m1t_):this.m1t_)&&i["format"]!==void 0?i["format"]:kY;e==null||typeof e=="number"&&isNaN(e)||i==null||(e=this.c2t_(e,i,t["series"]["unit"]));s["${series.name}"]='<span class="cg-tooltip-item-name">'+(t["series"]["name"]||t["series"]["id"])+"</span>";s["${series.symbol}"]='<div class="cg-tooltip-symbol-cell">'+(t["series"]["symbol"]!=null?this.f2t_(t["series"]["id"],t["series"]["symbol"]):'<span class="cg-tooltip-symbol"></span>')+"</div>";s["${series.id}"]='<span class="cg-tooltip-item-name">'+(t["series"]["id"]||"")+"</span>";s["${series.unit}"]='<span class="cg-tooltip-item-unit">'+(t["series"]["unit"]instanceof JA?t["series"]["unit"].fn_():t["series"]["unit"]||"")+"</span>";s["${value}"]='<span class="cg-tooltip-item-unit">'+(e!=null?e.toString():"")+"</span>";return this.d2t_(A,s)}d2t_(t,i){let s=t.slice();for(const t in i)i.hasOwnProperty(t)&&(s=s.replaceAll(t,i[t]));return s}B2t_(t){const i=[];for(const s in t)i.push(this.w2t_(s,t[s][0]));return i}w2t_(t,i){const s=this.O1t_(t,i),e=this.g1t_(t),A=this.K1t_(t),n=A?this.Q2t_(A,i):null,h=undefined;return{series:{name:(A||!e?this.q1t_(A):e.dn_())||"",id:t,symbol:n,unit:e?e.gn_():null},value:s,index:i}}E2t_(t){const i=this.g2t_();if(i!=null)return i(t,this);let s="";const e=this.B2t_(t);for(let t=0;t<e.length;++t){const i=e[t],A=i["series"]["id"],n=this.K1t_(A);if(i["index"]==null)s+=this.q1t_(n);else{const A=n!=null&&n["tooltip"]?n["tooltip"]:null;if(t===Math.floor(e.length/2)&&i["index"]!=null&&!i["series"]["symbol"]){const t=this.gwt_(i["index"]);t&&(i["series"]["symbol"]={painter:t.ak_(),fillstyle:t.ct_(),linestyle:t.gt_()})}const h=this.C2t_(i,A);s+=h.includes("cg-tooltip-symbol-cell")?'<div class="cg-tooltip-row">'+h+"</div>":h}}return s}Q2t_(t,i){return null}p2t_(t){return{}}m2t_(t,i){return i}gwt_(t){return null}y2t_(t,i){return null}static D2t_(t,i){i=i||{data:"",values:""};if(t==null)return i;if(typeof t=="string"){i["values"]=t;i["data"]=t}else if(Array.isArray(t)){i["values"]=t;i["data"]=""}else if(typeof(i=Pi(t,i,!0))["data"]!="string"){i["values"]=i["data"];i["data"]=""}else t["data"]!=null&&(i["values"]=t["data"]);return i}static M2t_(t){const i=Pi(t,{});delete i["values"];return i}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["axes"]&&(this.D1t_=t["axes"]);t["tooltipformat"]&&(this.p1t_=t["tooltipformat"]);if(t["tooltip"]){t["tooltip"]["valueformat"]!=null&&(this.m1t_["valueformat"]=t["tooltip"]["valueformat"]);t["tooltip"]["format"]!=null&&(this.m1t_["format"]=t["tooltip"]["format"])}if(t["legend"]){t["legend"]["valueformat"]!=null&&(this.y1t_["valueformat"]=t["legend"]["valueformat"]);t["legend"]["format"]!=null&&(this.y1t_["format"]=t["legend"]["format"])}this.d1t_=t["series"]&&t["series"]["table"]||this.d1t_;return this}N_(){const t=super.N_();t["axes"]=this.D1t_;t["tooltipformat"]=this.p1t_;t["tooltip"]={format:this.m1t_["format"],valueformat:this.m1t_["valueformat"]};t["legend"]={format:this.y1t_["format"],valueformat:this.y1t_["valueformat"]};t["series"]={};this.d1t_!=null&&(t["series"]["table"]=this.d1t_);return t}};i=t([_s("geotoolkit.charts.AbstractChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVTdGF0ZSI6InZuXyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwiZ2V0TW9kZWxMaW1pdHMiOiJydF8iLCJzZXRWZXJ0aWNhbEZsaXAiOiJFcV8iLCJpc1ZlcnRpY2FsRmxpcCI6ImpZXyIsInNldEhvcml6b250YWxGbGlwIjoicHFfIiwiaXNIb3Jpem9udGFsRmxpcCI6IlpZXyIsImdldE92ZXJsYXkiOiJ4OF8iLCJnZXRXb3JsZFRyYW5zZm9ybSI6InNkXyIsInNldERhdGFTb3VyY2UiOiJydnRfIiwib25EYXRhU2VyaWVzQ2hhbmdlZCI6IlUxdF8iLCJvbkRhdGFWYWx1ZXNDaGFuZ2VkIjoiWTF0XyIsIm9uRGF0YVVwZGF0ZWQiOiJ4MXRfIiwiZ2V0U2VyaWVzSW5mbyI6IksxdF8iLCJnZXREYXRhU291cmNlIjoiQ3Z0XyIsImdldExlZ2VuZEl0ZW1zIjoiSjF0XyIsImdldERlc2lyZWRNb2RlbFJhbmdlIjoiejF0XyIsImdldERlc2lyZWRPZmZzZXQiOiJYMXRfIiwiZ2V0QW5ub3RhdGlvbk9mZnNldCI6ImoxdF8iLCJoaXRUZXN0IjoiJFhfIiwiZ2V0U2VyaWVzVmFsdWUiOiJPMXRfIiwiZ2V0T3JpZW50YXRpb24iOiJLSF8iLCJnZXRBeGlzIjoiXzF0XyIsInNldEF4aXNEYXRhVHlwZSI6IiQxdF8iLCJnZXRBeGlzRGF0YVR5cGUiOiJ0MnRfIiwiZ2V0RGF0YVNlcmllcyI6ImcxdF8iLCJzZXRUYWJsZUlkIjoiaTJ0XyIsImdldFRhYmxlSWQiOiJSMXRfIiwic2V0U2VsZWN0aW9uSWQiOiJzMnRfIiwiZ2V0U2VsZWN0aW9uSWQiOiJlMnRfIiwiZ2V0RGVzaXJlZFRpY2tHZW5lcmF0b3IiOiJBMnRfIiwiY3JlYXRlTGVnZW5kSXRlbSI6InIydF8iLCJnZXRTZXJpZXNGb3JMZWdlbmQiOiJvMnRfIiwiZ2V0TGVnZW5kVGl0bGUiOiJQMXRfIiwicmVnaXN0ZXJBbmltYXRpb25TdHlsZSI6IkhmXyIsInVucmVnaXN0ZXJBbmltYXRpb25TdHlsZSI6IkpmXyIsImdldENzc1NlcmllcyI6ImwydF8iLCJvblNlbGVjdGlvblN0YXRlQ2hhbmdlZCI6ImIxdF8iLCJnZXRUb29sdGlwRm9ybWF0IjoiZzJ0XyIsImZvcm1hdFRvb2x0aXBJdGVtIjoiQzJ0XyIsImdldFRvb2x0aXBJdGVtcyI6IkIydF8iLCJ0b29sdGlwRm9ybWF0IjoiRTJ0XyIsImNyZWF0ZVRvb2x0aXBTeW1ib2wiOiJRMnRfIiwiZ2V0U3ltYm9sU2hhcGUiOiJnd3RfIiwiZ2V0Q29sb3JWYWx1ZSI6InkydF8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIn19fSAg");var YY=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"linechart-series"}));this.Q0t_=t["chart"];this.eat_=t["index"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;if(t["linestyle"]!=null){const i=this.Q0t_.JV_()["linestyles"];if(i[this.eat_]!==t["linestyle"]){i[this.eat_]=t["linestyle"];this.Q0t_.setOptions({linestyles:i})}}t["symbols"]!=null&&this.Q0t_.setOptions({symbols:t["symbols"]});return super.dt_(t)}N_(){const t=super.N_(),i=this.Q0t_.JV_()["linestyles"];t["linestyle"]=i[this.eat_];t["symbols"]=this.Q0t_.N_()["symbols"];return t}};i=t([_s("geotoolkit.charts.LineChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var TY=Ci(function(){let i=class t extends Mb{constructor(t,i){super(t,i=i?Es(i):{});this.v2t_=1;this.Us_=null;this.Yb_(new xl({css:".ToggleableSymbolItem:hover { textstyle-underline-color: #000000; textstyle-underline-pixelsnapmode: true; }"+".ToggleableSymbolItem:selection { textstyle-shadow-enable: true; textstyle-shadow-offsetx: 0.1; }"+".ToggleableSymbolItem:disabled { opacity: 0.5; }"}));this.Jmt_(this.getState())}setData(t){this.Us_=t;return this}getData(){return this.Us_}dt_(t){if((t=Es(t))==null)return this;if(t["textstyle"]!=null){const i=this.N_()["textstyle"];t["textstyle"]=i==null||t["textstyle"]instanceof qa||t["textstyle"]instanceof nA||typeof t["textstyle"]=="string"?t["textstyle"]:i.clone().dt_(t["textstyle"])}t["opacity"]!=null&&(this.v2t_=t["opacity"]);return super.dt_(t)}N_(){const t=super.N_();t["opacity"]=this.v2t_;return t}zY_(t){const i=t.OR_();t.tN_(this.v2t_);super.zY_(t);t.tN_(i);t.tk_()&&t.mO_(new jf(this,this.Us_))}OY_(t,i){const s=t.OR_();t.tN_(this.v2t_);super.OY_(t,(function(){t.tN_(s);i&&i()}))}Jmt_(t){const i=(t&yb.Kmt_)!=0;i!==this.Cd_(Rl.__)&&(i?this.Bd_(Rl.__):this.Qd_(Rl.__));const s=(t&yb.Hmt_)!=0;s!==this.Cd_(Rl.Selection)&&(s?this.Bd_(Rl.Selection):this.Qd_(Rl.Selection));const e=(t&yb.kv_)!=0;if(e!==this.Cd_(Rl.kv_))if(e){this.Qd_(Rl.Rv_);this.Bd_(Rl.kv_)}else{this.Qd_(Rl.kv_);this.Bd_(Rl.Rv_)}}$X_(t,i){const s=t=>t instanceof jf&&t.GO_()===this;let e;if(t instanceof mA){const i=[t.we_(),t.Qe_(),t.Qe_(),t.we_()],A=[t.Ee_(),t.Ee_(),t.pe_(),t.pe_()];e=bC.select(this.getRoot(),i,A,!0).filter(s)}else e=bC.select(this.getRoot(),t.x,t.y,i||10).filter(s);return e.length>0?e[0].getData():null}};i=t([_s("geotoolkit.charts.legend.ToggleableSymbolItem")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwicmVuZGVyQ29udGVudCI6InpZXyIsInJlbmRlckNvbnRlbnRBc3luYyI6Ik9ZXyIsInVwZGF0ZUl0ZW1TdGF0ZSI6IkptdF8iLCJoaXRUZXN0IjoiJFhfIn19fSAg");var KY=Ci(function(){var i;let s=i=class t extends KD{constructor(t){super(null);this.Us_=t;this.oCt_=(t,i,s)=>{this.Df_()||this.dispose()};this.lCt_=this.uCt_.bind(this);this.aCt_=this.gCt_.bind(this);this.cCt_=this.ICt_.bind(this);this.Us_.on(YD.Fct_,this.oCt_);this.Us_.on(YD.Mct_,this.lCt_);this.Us_.on(YD.bct_,this.aCt_);this.Us_.on(YD.Sct_,this.cCt_)}ae_(){return!0}gn_(){return null}getLength(){return this.Us_.getLength()}nA_(t){return 0}hA_(t){return this.getLength()-1}getValue(t){return t}toArray(t,i){return Array.from({length:this.Us_.getLength()},((t,i)=>i))}dispose(){if(!this.Df_()){this.Us_.off(YD.Fct_,this.oCt_);this.Us_.off(YD.Mct_,this.lCt_);this.Us_.off(YD.bct_,this.aCt_);this.Us_.off(YD.Sct_,this.cCt_);super.dispose()}}clone(){return new i(this.Us_)}Lct_(t,i,s){throw new Error("Method not implemented.")}uCt_(t,i,s){this.notify(YD.Mct_,this,{from:s["from"],count:s["count"]});this.update({index:s["from"],count:s["count"],type:HD.Uct_})}gCt_(t,i,s){this.notify(YD.bct_,this,{from:s["from"],count:s["count"]});this.update()}ICt_(t,i,s){this.notify(YD.Sct_,this,{from:s["from"],count:s["count"]});this.update({index:s["from"],count:s["count"],type:HD.Yct_})}};s=i=t([Zs(VD),_s("geotoolkit.charts.NumericSeriesIndexView")],s);return s}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1JlYWRPbmx5IjoiYWVfIiwiZ2V0VW5pdCI6ImduXyIsImdldE1pbiI6Im5BXyIsImdldE1heCI6ImhBXyJ9fX0g");const HY=function(t,i,s,e,A,n){if(n-s<=i||t<s||t>n)return.5;const h=(s+3*(e+A)+n)/8;return h<t?.5+HY(t,i,h,(A+(n+e)/2)/2,(n+A)/2,n)/2:HY(t,i,s,(s+e)/2,(e+(s+A)/2)/2,h)/2},qY=function(t){return Array.isArray(t)?t.length===0||typeof t[0]=="object"?t:[{data:t}]:typeof t=="string"?[{data:t}]:[t]},JY=function(t,i){if(i.getLength()===0)return t.contains(i.hc_())?i.hc_():null;const s=new tn,e=t.Bt_(),A=t.wt_(),n=t.getSize(),h=[],r=i.hc_().x===i.nc_().x?"y":"x";for(let t=0;t<n;t++){s.setStart(e[t],A[t]);s.setEnd(e[(t+1)%n],A[(t+1)%n]);const o=i.gc_(s);if(o!=null){const t=(o[r]-i.hc_()[r])/(i.nc_()[r]-i.hc_()[r]);h.indexOf(t)<0&&h.push(t)}}if(h.length===0)return null;h.sort(((t,i)=>t-i));const o=h.length>1?(h[0]+h[1])/2:h[0];return new lA(i.hc_().x+o*(i.nc_().x-i.hc_().x),i.hc_().y+o*(i.nc_().y-i.hc_().y))},PY={legend:{format:"${y-series}"}},VY="x-series";var OY=Ci(function(){let i=class t extends UY{constructor(t){if(t){(t=Es(t))["legend"]==null&&(t["legend"]=PY["legend"]);t["series"]==null&&(t["series"]={});if(t["series"]["x"]!=null){const i=typeof t["series"]["x"]=="string"||Array.isArray(t["series"]["x"])?{data:t["series"]["x"]}:t["series"]["x"];t["series"]["x"]=Pi(i,{data:"",tooltip:{format:"${series.name}: ${value}"}},!0)}}super(t!=null?t:PY);this.b2t_=[];this.N2t_=!0;this.S2t_=null;let i=!1,s=0;if(t){t["spline"]!=null&&(i=t["spline"]===!0);t["baseline"]!=null&&(s=t["baseline"]);t["gapvalue"]!=null&&(this.oNt_=t["gapvalue"]);t["gapfillcutoffvalue"]!=null&&(this.rNt_=t["gapfillcutoffvalue"]);t["showinterpolatedvalue"]!=null&&(this.N2t_=t["showinterpolatedvalue"])}this.G2t_=[];this.R2t_=[];this.Q0t_=new WN({linestyles:[],fillstyles:[],gridvisible:!1,spline:i,baseline:s,cache:!1});this.k2t_=qi(t&&t["symbol"],{width:7,height:7,sizeisindevicespace:!0},!0);this.F2t_=qi(t&&t["selectionsymbol"],{width:10,height:10,sizeisindevicespace:!0},!0);this.x2t_={};this.L2t_=[];this.U2t_(t&&t["series"]);this.G1t_().GY_(this.Q0t_);this.Eq_(!0);this.initialize(t)}render(t){if(!t.tk_()){super.render(t);return}const i=this.sd_()?t.uS_(this.sd_()):t;if(!this.T1t_()||!i.tk_())return;this.Zmt_();const s=i.LR_(),e=i.rS_(),A=s instanceof In,n=i instanceof MC||e.isEmpty(),h=this.Y2t_().toArray(!1),r={};let o=!1;for(let t=1;t<h.length;t++){const i=h[t-1]<h[t]?t-1:t,l=h[t-1]<h[t]?t:t-1;if(h[i]>=e.Qe_()||h[l]<e.getX()||h[i]==null||h[l]==null)continue;const u=this.G2t_.map((t=>this.T2t_(t["data"],i))),a=this.G2t_.map((t=>this.T2t_(t["data"],l)));if(t===i||t===1)for(let t=0;t<u.length;t++)if(s.contains(h[i],u[t])){o=o||this.K2t_(s,h[i],i,r,n);break}if(t===l||t===1)for(let t=0;t<a.length;t++)if(s.contains(h[l],a[t])){o=o||this.K2t_(s,h[l],l,r,n);break}if(!o)if(this.Q0t_.getData()["spline"]){const t=10;for(let A=0;A<t&&!o;A++){const u=e.getX()+A*e.Ie_()/t;o=this.K2t_(s,u,i+(u-h[i])/(h[l]-h[i]),r,n)}}else if(A){const t=new tn;for(let e=0;e<u.length;e++){t.setStart(h[i],u[e]);t.setEnd(h[l],a[e]);const A=JY(s,t);if(A){if(n){this.K2t_(s,A.x,i+(A.x-h[i])/(h[l]-h[i]),r,n);break}UY.Z1t_(r,this.G2t_[e]["data"])}}}else{const t=new lA,A=new lA,o=new lA,g=new lA;for(let c=0;c<u.length;c++){t.vs_(h[i],u[c]);A.vs_(h[l],a[c]);const I=e.xe_(t,A,o,g);if(I>0){const t=I===2?o.getX()/2+g.getX()/2:o.getX();this.K2t_(s,t,i+(t-h[i])/(h[l]-h[i]),r,n);break}}}}if(Object.keys(r).length>0){t.mO_(this);t.mO_(new jf(this,r))}}x1t_(){if(!this.T1t_()){this.H2t_({x:[],y:[]});return}let t=1/0,i=-1/0,s=null,e=0,A=1;if(this.q2t_["data"]){s=this.g1t_(this.q2t_["data"],RY.X);e=s.nA_();A=s.hA_()}const n=this.G2t_.reduce(((n,h)=>{const r=this.g1t_(h["data"],RY.Y);if(r!=null){t=Math.min(t,r.nA_());i=Math.max(i,r.hA_());n.push(r);if(s==null){e=0;A=Math.max(r.getLength(),A);this.S2t_=new KY(r);s=this.S2t_}}else n.push(new zD({data:[]}));return n}),[]);this.H2t_({x:s,y:n,gapfillcutoffvalue:this.rNt_,gapvalue:this.oNt_});const h=new mA(e,t,A,i);this.Lq_(h)}z1t_(t){const i=this.Q0t_.cft_();switch(t){case RY.X:return new fA(i.getX(),i.Qe_());case RY.Y:return new fA(i.getY(),i.pe_())}return super.z1t_(t)}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;for(let t=0;t<this.G2t_.length;t++){const i=this.G2t_[t]["values"];this.G2t_[t]["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i;this.b2t_[t]!=null&&this.b2t_[t].JC_(this.G2t_[t]["data"])}}J2t_(){return this.N2t_}U1t_(t,i,s){s.indexOf(this.q2t_["data"])<0&&this.G2t_.every((t=>s.indexOf(t["data"])<0))||this.rvt_(this.Cvt_())}Y1t_(t,i,s){t!==wY.Mct_&&t!==wY.Sct_||this.notify(wY.pct_,this)}b1t_(t,i,s){super.b1t_(t,i,s);if(s["state"]!==Rl.__)return;const e=this.G2t_.findIndex((t=>t["data"]===s["series"]));if(e<0||this.G2t_[e]["visible"]===!1)return;this.G1t_().removeChild(this.L2t_[e]);this.L2t_[e]=[];const A=(this.N2t_?i.O0t_(s["series"],s["state"]):i.k9_(s["series"],s["state"]))||[];for(let t=0;t<A.length;t++)this.P2t_(t,e,A[t],s["series"])}B2t_(t){const i=super.B2t_(t);if(i.length>0&&this.q2t_["data"]&&t[this.q2t_["data"]]!=null){const t=i[0],s=this.q2t_["data"],e=this.g1t_(s),A=this.N2t_===!0?this.O1t_(s,t["index"]):e.getValue(t["index"]),n={series:{name:this.q2t_?this.q1t_(this.q2t_):"",id:s,unit:t["series"]["unit"]},value:A,index:t["index"]};i.splice(0,1,n)}return i}Q2t_(t,i){return t["symbol"]?{width:16,height:16,linestyle:t["symbol"]["linestyle"],fillstyle:t["symbol"]["fillstyle"],painter:new pE({painter:t["symbol"]["visible"]?t["symbol"]["painter"]:null,linestyle:hl.Wi_(t["linestyle"])})}:null}P2t_(t,i,s,e){t===this.L2t_[i].length&&this.L2t_[i].push(this.R2t_[i].clone().VC_(1));const A=this.L2t_[i][t],n=this.q2t_["data"]?this.T2t_(this.q2t_["data"],s):s,h=this.T2t_(e,s);A.gR_(n,h).tR_(!0);this.G1t_().GY_(A);return A}Lq_(t){super.Lq_(t);if(this.KH_()!==EY.X_&&this.KH_()!==EY.z_||t==null){this.Q0t_.ht_(t);this.Q0t_.Lq_(t)}else{const i=Gn.FI_(-Math.PI/2,t.ye_(),t.De_());this.Q0t_.pq_(!0);this.Q0t_.at_(i);this.Q0t_.ht_(i.gI_(t));this.Q0t_.Lq_(new mA(t.getY(),t.getX(),t.pe_(),t.Qe_()))}return this}dispose(){if(!this.Df_()){if(this.S2t_){this.S2t_.dispose();this.S2t_=null}super.dispose()}}j1t_(){const t=this.Q0t_.JV_()["symbols"];if(!t["visible"]||!this.T1t_())return 0;const i=t["linestyles"][0].Ie_()/2;return Math.ceil(t["width"]/2)+Math.ceil(i)}K2t_(t,i,s,e,A){let n=!1;const h=this.q2t_["data"]||VY;for(let r=0;r<this.G2t_.length;r++){if(this.G2t_[r]["visible"]===!1)continue;const o=this.T2t_(this.G2t_[r]["data"],s);if(t.contains(i,o)){if(!A||!this.N2t_&&s%1!=0)UY.Z1t_(e,this.G2t_[r]["data"]);else{UY.Z1t_(e,h,s);UY.Z1t_(e,this.G2t_[r]["data"],s)}n=!0}}return n}Zmt_(){this.x2t_={};return this}i2t_(t){if(t!==this.R1t_()){super.i2t_(t);this.Zmt_()}return this}gwt_(t){const i=this.Cvt_().getSelection(this.e2t_(),this.R1t_());for(let s=0;s<this.G2t_.length;s++){if(this.G2t_[s]["visible"]===!1||!this.R2t_[s].$C_())continue;const e=undefined;if(((this.N2t_?i.O0t_(this.G2t_[s]["data"],Rl.__):i.k9_(this.G2t_[s]["data"],Rl.__))||[]).indexOf(t)>=0){const i=this.T2t_(this.q2t_["data"]||VY,t),e=this.T2t_(this.G2t_[s]["data"],t);if(isNaN(i)||isNaN(e))continue;return this.R2t_[s].gR_(i,e)}}return null}T2t_(t,i){if(this.g1t_(t,DY.X0t_)==null||i<0)return NaN;this.x2t_[t]=this.x2t_[t]||{};if(this.x2t_[t][i]!=null)return this.x2t_[t][i];const s=this.q2t_["data"]||VY,e=undefined,A=this.Y2t_().toArray(!1),n=i<<0,h=n+1<A.length?n+1:n;let r=A[n]*(n+1-i)+A[h]*(i-n);if(t!==s){const s=this.G2t_.reduce((function(i,s,e){s["data"]===t&&(i=e);return i}),-1);if(s<0)return NaN;const e=this.Q0t_.JV_();let o,l,u;if(e["spline"]&&n!==i){const t=this.Q0t_.KNt_(s);if(!t)return NaN;const i=t.nt_();let e;for(e=n+1;e>0;e--){u=i.nn_(e);if(u["type"]===LA._A_&&u["x"]===A[n+1]){const t=i.nn_(e-1);if(t["x"]===A[n]){l=t["y"];o=u["y"];break}}}if(e<=0)return NaN}else{const t=this.Q0t_.HNt_(s);if(n>=t.length)return NaN;if(n===i)return t[i];l=t[n];o=t[h]}if(r<=A[n])r=l;else if(r>=A[n+1])r=o;else if(e["spline"]){const t=undefined,i=1/(this.Q0t_.if_()||Gn.JI_).BI_(),s=HY(r,i,A[n],u["cp1x"],u["cp2x"],A[n+1]),e=1-s;r=e*e*(e*l+3*s*u["cp1y"])+s*s*(3*e*u["cp2y"]+s*o)}else r=l+(i-n)*(o-l)}this.x2t_[t][i]=r;return r}O1t_(t,i){if(!this.T1t_())return NaN;const s=this.T2t_(t,i),e=this.q2t_["data"]||VY,A=undefined;return this.t2t_(t!==e?RY.Y:RY.X)===DY.Ay_?Math.pow(10,s):s}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);t["series"]!==void 0&&this.U2t_(t["series"]);t["spline"]!==void 0&&this.Q0t_.setOptions({spline:t["spline"]});t["baseline"]!==void 0&&this.Q0t_.setOptions({baseline:t["baseline"]});t["gapfillcutoffvalue"]!==void 0&&this.Q0t_.ENt_(t["gapfillcutoffvalue"]);t["gapvalue"]!==void 0&&this.Q0t_.pNt_(t["gapvalue"]);if(t["symbol"]!==void 0){this.k2t_=qi(t["symbol"],this.k2t_,!0);this.V2t_()}if(t["selectionsymbol"]!==void 0){this.F2t_=qi(t["selectionsymbol"],this.F2t_,!0);this.V2t_()}t["showinterpolatedvalue"]!==void 0&&(this.N2t_=t["showinterpolatedvalue"]);return this}bB_(t,i){if(this.b2t_!=null)for(let s=0;s<this.b2t_.length;s++)t(this.b2t_[s],i)}l2t_(){return this.b2t_}N_(){const t=super.N_(),i=this.Q0t_.getData();t["series"]={x:UY.M2t_(this.q2t_),y:this.G2t_.map((t=>UY.M2t_(t)))};t["spline"]=i["spline"];t["baseline"]=i["baseline"];t["symbol"]={width:this.k2t_["width"],height:this.k2t_["height"]};t["selectionsymbol"]={width:this.F2t_["width"],height:this.F2t_["height"]};t["showinterpolatedvalue"]=this.N2t_;return t}U2t_(t){if(t==null)return this;this.q2t_=UY.D2t_(t["x"],this.q2t_);if(t["y"]==null)return this;const i=qY(t["y"]);for(let t=0;t<i.length;++t){const s=i[t];if(!s["data"])continue;const e=this.G2t_.findIndex((t=>typeof t["data"]=="string"?t["data"]===s["data"]:t["name"]===s["name"]));if(e>=0)Pi(s,this.G2t_[e],!0);else{let i=Pi(s,{data:"",values:"",symbol:{visible:!1,painter:cE},linestyle:GA.fA_,fillstyle:RA.setAlpha(GA.dA_,.5)},!0);i=Pi(s,{data:"",values:"",symbol:{visible:!1,painter:cE},selectionsymbol:{visible:!0},linestyle:GA.fA_,fillstyle:RA.setAlpha(GA.dA_,.5)},!0);i["values"]=i["data"];Array.isArray(i["data"])&&(i["data"]=this.Cvt_()?this.Cvt_().l1t_(i["data"]):"");this.G2t_.push(i);this.b2t_.push(this.O2t_({name:i["data"],index:t,chart:this.Q0t_}).JC_(i["data"]))}}this.V2t_();this.notify(wY.pct_,this);return this}V2t_(){this.R2t_=[];const t=[],i=[],s=[],e=[],A=[],n=[],h=[];for(let r=0;r<this.G2t_.length;r++){const o=this.G2t_[r],l=hl.Wi_(o["linestyle"]),u=this.W2t_(o["fillstyle"],r);o["linestyle"]=l;o["fillstyle"]=u;o["symbol"]["linestyle"]=hl.Wi_(o["symbol"]["linestyle"]||l.getColor());o["symbol"]["fillstyle"]=il.BD_(o["symbol"]["fillstyle"]||l.getColor());const a=qi(this.F2t_,{linestyle:hl.Wi_(o["selectionsymbol"]["linestyle"])||o["symbol"]["linestyle"].clone(),fillstyle:il.BD_(o["selectionsymbol"]["fillstyle"])||o["symbol"]["fillstyle"].clone(),painter:o["selectionsymbol"]["painter"]||o["symbol"]["painter"],visible:o["selectionsymbol"]["visible"]});this.R2t_.push(new ma(a));this.L2t_[r]=this.L2t_[r]||[];o["visible"]===!1&&this.G1t_().removeChild(this.L2t_[r]);this.L2t_[r].forEach((t=>t.dt_(a)));t.push(l);i.push(u);s.push(o["symbol"]["linestyle"]);e.push(o["symbol"]["fillstyle"]);A.push(o["symbol"]["painter"]);h.push(o["symbol"]["visible"]);n.push({visible:o["visible"]})}this.Q0t_.setOptions({linestyles:t,fillstyles:i,symbols:{width:this.k2t_["width"],height:this.k2t_["height"],linestyles:s,fillstyles:e,painters:A,sizeisindevicespace:this.k2t_["sizeisindevicespace"],visible:h,step:this.k2t_["step"]},series:n});this.L1t_();return this}h2t_(t){switch(t){case!0:case QY.K0t_:return new Bh([{attributename:"data",type:"horizontal",begin:"auto",duration:1500}]);case QY.H0t_:return new Bh([{attributename:"data",type:"vertical",begin:"auto",duration:1500}])}return super.h2t_(t)}fB_(){return this.Q0t_.fB_()}n2t_(){return this.Q0t_}O2t_(t){return new YY(t)}W2t_(t,i){return null}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(t),"${value}":""}),symbol:{alignment:dA.ne_,linestyle:t["symbol"]["linestyle"],fillstyle:t["symbol"]["fillstyle"],painter:new pE({painter:t["symbol"]["visible"]?t["symbol"]["painter"]:null,linestyle:hl.Wi_(t["linestyle"])}),sizeisindevicespace:!0,width:16,height:16}});return i}o2t_(){return this.G2t_}H2t_(t){this.Q0t_.setData(t)}Y2t_(){const t=undefined;return this.Cvt_()&&this.q2t_["data"]?this.g1t_(this.q2t_["data"],RY.X):this.S2t_}K1t_(t){if(this.q2t_["data"]===t||t===RY.X)return this.q2t_;if(t===RY.Y)return this.G2t_;const i=this.G2t_.find((i=>i["data"]===t));return i||null}};i=t([Zs(qh),_s("geotoolkit.charts.LineChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkRhdGFVcGRhdGVkIjoieDF0XyIsImdldERlc2lyZWRNb2RlbFJhbmdlIjoiejF0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwib25EYXRhVmFsdWVzQ2hhbmdlZCI6IlkxdF8iLCJvblNlbGVjdGlvblN0YXRlQ2hhbmdlZCI6ImIxdF8iLCJnZXRUb29sdGlwSXRlbXMiOiJCMnRfIiwiY3JlYXRlVG9vbHRpcFN5bWJvbCI6IlEydF8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldEFubm90YXRpb25PZmZzZXQiOiJqMXRfIiwic2V0VGFibGVJZCI6ImkydF8iLCJnZXRTeW1ib2xTaGFwZSI6Imd3dF8iLCJnZXRTZXJpZXNNb2RlbFZhbHVlIjoiVDJ0XyIsImdldFNlcmllc1ZhbHVlIjoiTzF0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJlbnVtZXJhdGVOb2RlcyI6ImJCXyIsImdldENzc1NlcmllcyI6ImwydF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJnZXRBbmltYXRpb25TdHlsZSI6ImZCXyIsImNyZWF0ZUxlZ2VuZEl0ZW0iOiJyMnRfIiwiZ2V0U2VyaWVzRm9yTGVnZW5kIjoibzJ0XyIsImdldFNlcmllc0luZm8iOiJLMXRfIn19fSAg");var WY=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"areachart-series"}));this.Q0t_=t["chart"];this.eat_=t["index"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;if(t["linestyle"]!=null||t["fillstyle"]!=null){const i=this.Q0t_.JV_(),s=i["linestyles"],e=i["fillstyles"];t["linestyle"]!=null&&s[this.eat_]!==t["linestyle"]&&(s[this.eat_]=t["linestyle"]);e[this.eat_]!=null&&t["fillstyle"]!=null&&e[this.eat_]!==t["fillstyle"]&&(e[this.eat_]=t["fillstyle"]);this.Q0t_.setOptions({linestyles:s,fillstyles:e})}return super.dt_(t)}N_(){const t=super.N_(),i=this.Q0t_.JV_();t["linestyle"]=i["linestyles"][this.eat_];t["fillstyle"]=i["fillstyles"][this.eat_];return t}};i=t([_s("geotoolkit.charts.AreaChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var zY=Ci(function(){let i=class t extends OY{constructor(t){super(t);t!=null&&(t["stacked"]||t["percentarea"])&&this.n2t_().setData({stackedarea:t["stacked"],percentarea:t["percentarea"]})}O2t_(t){return new WY(t)}W2t_(t,i){return il.BD_(t)}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(t)}),symbol:{alignment:dA.ne_,linestyle:t["linestyle"],fillstyle:t["fillstyle"],painter:(t,i,s)=>{s.aS_({kT_:{x:!0,y:!0}});tp.call(this,t,i,s);s.cS_()},sizeisindevicespace:!0,width:16,height:16}});return i}Q2t_(t,i){return t["symbol"]?{width:16,height:16,linestyle:t["symbol"]["linestyle"],fillstyle:t["symbol"]["fillstyle"],painter:(t,i,s)=>{s.aS_({kT_:{x:!0,y:!0}});tp.call(this,t,i,s);s.cS_()}}:null}render(t){if(!t.tk_()){super.render(t);return}const i=this.sd_()?t.uS_(this.sd_()):t;if(!this.T1t_())return;this.Zmt_();const s=i.rS_(),e=i instanceof MC||s.isEmpty(),A=this.Y2t_().toArray(!1),n={};for(let t=1;t<A.length;t++){const i=A[t-1]<A[t]?t-1:t,h=A[t-1]<A[t]?t:t-1;if(A[i]>=s.Qe_()||A[h]<s.getX())continue;const r=[];(t===i||t===1)&&A[i]>=s.we_()&&A[i]<=s.Qe_()&&r.push(A[i]);(t===h||t===1)&&A[h]>=s.we_()&&A[h]<=s.Qe_()&&r.push(A[h]);r.length===0&&r.push(s.ye_());for(let t=0;t<r.length;t++){const o=i+(r[t]-A[i])/(A[h]-A[i]);this.K2t_(s,r[t],o,n,e)}}if(Object.keys(n).length>0){t.mO_(this);t.mO_(new jf(this,n))}}K2t_(t,i,s,e,A){const n=[];for(let i=0;i<this.G2t_.length;i++){if(this.G2t_[i]["visible"]===!1)continue;const h=this.T2t_(this.G2t_[i]["data"],s);if(t.pe_()>=h&&h>=t.getY()){this.J2t_()||(s=Math.round(s));UY.Z1t_(e,this.G2t_[i]["data"],A?s:null);return!0}n.push(h)}let h=-1,r=1/0;const o=this.n2t_().getData()["baseline"];for(let i=0,s=0;i<n.length;i++){if(this.G2t_[i]["visible"]===!1)continue;const e=n[s++];if(t.pe_()>=Math.min(o,e)&&Math.max(o,e)>=t.getY()&&e<r){h=i;r=e}}if(h>=0){this.J2t_()||(s=Math.round(s));UY.Z1t_(e,this.G2t_[h]["data"],A?s:null);return!0}return!1}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);(t["stacked"]||t["percentarea"])&&this.n2t_().setData({stackedarea:t["stacked"],percentarea:t["percentarea"]});return this}N_(){const t=super.N_(),i=this.n2t_().getData();t["stacked"]=i["stackedarea"];t["percentarea"]=i["percentarea"];return t}};i=t([_s("geotoolkit.charts.AreaChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVMZWdlbmRJdGVtIjoicjJ0XyIsImNyZWF0ZVRvb2x0aXBTeW1ib2wiOiJRMnRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyJ9fX0g");var XY=Ci(function(){let i=class t extends zY{constructor(t){let i="rgba(128,128,128,.4)";t&&(t=Es(t))["fillstyle"]!=null&&(i=t["fillstyle"]);super(t);this.iQ_(i)}iQ_(t){this.z2t_=il.BD_(t);return this}K2t_(t,i,s,e,A){const n=this.T2t_(this.G2t_[0]["data"],s),h=this.T2t_(this.G2t_[1]["data"],s),r=Math.min(n,h),o=Math.max(n,h);if(t.pe_()>=r&&o>=t.getY()){this.J2t_()||(s=Math.round(s));UY.Z1t_(e,this.G2t_[0]["data"],A?s:null);UY.Z1t_(e,this.G2t_[1]["data"],A?s:null);return!0}return!1}O2t_(t){t=qi(t,{cssclass:"arearangechart-series"});return super.O2t_(t)}H2t_(t){this.n2t_().setData({arearange:[{range:t["y"],linestyles:this.n2t_().getData()["linestyles"],fillstyle:this.z2t_}],y:[],x:t["x"]})}W2t_(t,i){return i!==1?null:this.z2t_}z1t_(t){switch(t){case RY.X:const i=this.g1t_(this.q2t_["data"],RY.X);return i?new fA(i.nA_(),i.hA_()):super.z1t_(t);case RY.Y:const s=this.g1t_(this.G2t_[0]["data"],RY.Y),e=this.g1t_(this.G2t_[1]["data"],RY.Y);if(s!=null&&e!=null){const t=Math.min(s.nA_(),e.nA_()),i=Math.max(s.hA_(),e.hA_());return new fA(t,i)}}return super.z1t_(t)}o2t_(){const t=super.o2t_();return t.length>0?[t[0]]:[]}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData(this.G2t_.length===2?{[this.G2t_[0]["data"]]:[],[this.G2t_[1]["data"]]:[]}:{});i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(t)}),symbol:{alignment:dA.ne_,linestyle:null,painter:(t,i,s)=>{if(this.ZY_()||this.jY_()){const t=Gn.xI_(i,i,this.ZY_(),this.jY_());s=s.uS_(t)}s.save();s.iQ_(this.z2t_,i);s._b_(i,QA.Et_,!0);s.pR_(i);const e=this.n2t_().getData()["linestyles"];s.aS_({kT_:{x:!0,y:!0}});if(e[0]!=null){s.rB_(hl.Wi_(e[0]),i);s.oB_(i.getX(),i.getY(),i.Qe_(),i.getY())}if(e[1]!=null){s.rB_(hl.Wi_(e[1]),i);s.oB_(i.getX(),i.pe_(),i.Qe_(),i.pe_())}s.cS_();s.restore()},sizeisindevicespace:!0,width:16,height:16}});return i}};i=t([_s("geotoolkit.charts.AreaRangeChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRGaWxsU3R5bGUiOiJpUV8iLCJnZXREZXNpcmVkTW9kZWxSYW5nZSI6InoxdF8iLCJnZXRTZXJpZXNGb3JMZWdlbmQiOiJvMnRfIiwiY3JlYXRlTGVnZW5kSXRlbSI6InIydF8ifX19");var jY=Ci({L$_:"Default",X2t_:"ColorBar"},2,"eyJEZWZhdWx0IjoiTCRfIiwiQ29sb3JCYXIiOiJYMnRfIn0g");var ZY=Ci({pct_:"Updated",j2t_:"DataTypeUpdated"},2,"eyJVcGRhdGVkIjoicGN0XyIsIkRhdGFUeXBlVXBkYXRlZCI6ImoydF8ifSAg");const _Y=vd.Ai_().E$_({minspan:75,minorticksamount:4,ticks:{edge:{visible:!0},major:{visible:!0}},labels:{edge:{visible:!0},major:{visible:!0}}});var $Y=Ci(function(){let i=class t extends nd{constructor(t){super(t=Pi(t,{dimension:null,location:ha.sG_,grid:{linestyle:"#ededed",minor:{tickstyle:{color:"#f5f5f5",pixelsnapmode:!0},tickvisible:!0},major:{tickstyle:{color:"#e0e0e0",pixelsnapmode:!0},tickvisible:!0},edge:{tickstyle:{color:"transparent",pixelsnapmode:!0},tickvisible:!0},visible:!0},title:{text:"",visible:!0,textstyle:new qa},labels:null,datatype:DY.X0t_,datalimits:!0},!0));this.bft_=null;this.Nft_=null;this.Z2t_=!1;this.Qi_=jY.L$_;this._2t_=DY.X0t_;this.fNt_=new sB;this.$2t_={major:{},minor:{},edge:{}};this.t5t_(_Y.clone());this.i5t_(t);this.Lq_(new mA(0,0,100,100))}i5t_(t){let i=!0,s,e,A,n,h,r;switch(t["location"]){case ha.sG_:s=fg.ax_;e=yr.X_;A=Dr.X_;n=dA.he_;h=!0;r=-Math.PI/2;break;case ha.AG_:s=fg.ax_;e=yr.z_;A=Dr.z_;n=dA.oe_;h=!0;r=Math.PI/2;break;case ha.eG_:s=fg.ux_;e=yr.JQ_;A=Dr.JQ_;n=dA.le_;h=!1;r=0;break;case ha.nG_:s=fg.ux_;e=yr.Top;A=Dr.Top;n=dA.re_;h=!1;r=0;break;default:i=!1}if(i){this.Owt_=t["location"];t["autolabelrotation"]==null&&this.Y__(h);t["autolabelrotationangle"]==null&&this.U__(r);t["orientation"]==null&&this.setOrientation(s);t["labelposition"]==null&&this.KZ_(A);t["tickposition"]==null&&this.LE_(e);this.y__({top:t["location"]===ha.nG_?5:0,left:t["location"]===ha.AG_?5:0,bottom:t["location"]===ha.eG_?5:0,right:t["location"]===ha.sG_?5:0})}t["datatype"]!=null&&this.s5t_(t["datatype"]);t["title"]=qi(t["title"],{text:typeof t["title"]=="string"?t["title"]:this.mV_(),alignment:n||this.f__()});this.E__(t["title"]);t["min"]!==null&&typeof t["min"]!="number"||(this.bft_=t["min"]);t["max"]!==null&&typeof t["max"]!="number"||(this.Nft_=t["max"]);t["tickstyle"]!==void 0&&this.e5t_(t["tickstyle"]);t["labelstyle"]!==void 0&&this.A5t_(t["labelstyle"]);t["flip"]!==void 0&&(this.Z2t_=t["flip"]);if(t["dimension"]!==void 0){this.KE_(t["dimension"]instanceof WC?t["dimension"]:new WC(qi(t["dimension"],{neatlimits:!1},!0)));this.TE_().setOptions({orientation:this.KH_()})}this.TE_().setOptions({logarithmic:this._2t_===DY.Ay_});if(t["grid"]!==void 0){t["grid"]["visible"]!==void 0&&this.fNt_.nf_(t["grid"]["visible"]);this.$2t_=Pi(t["grid"],this.$2t_);this.n5t_()}t["location"]!=null&&(this.Owt_=t["location"]);t["type"]!=null&&(this.Qi_=t["type"]);t["labels"]!=null&&(this._$_=t["labels"]);t["datalimits"]!=null&&(this.aNt_=t["datalimits"])}Nwt_(){return this.Owt_}n5t_(){if(this.fNt_==null)return this;const t=this.ZZ_().clone();t.nL_(this.$2t_,"minor");t.nL_(this.$2t_,"major");t.nL_(this.$2t_,"edge");if(this.KH_()===fg.ax_){this.fNt_.KE_(fg.ax_,this.TE_());this.fNt_.KE_(fg.ux_,null);this.fNt_.dt_({vtg:null,htg:t})}else{this.fNt_.KE_(fg.ax_,null);this.fNt_.KE_(fg.ux_,this.TE_());this.fNt_.dt_({vtg:t,htg:null})}return this}t5t_(t){if(this.h5t_!=null)return this;this.jZ_(t);this.h5t_=null;return this}r5t_(){return this.h5t_!=null}o5t_(t){this.l5t_=Pi(t);return this}u5t_(){return this.l5t_}jZ_(t){if(this.ZZ_()===t)return this;super.jZ_(t);t instanceof Qg&&(this.h5t_=t);this.ZZ_().dt_(this.l5t_);this.n5t_();return this}s5t_(t){if(this._2t_===t)return this;this._2t_=t;this.notify(ZY.j2t_,this,t);return this}setOrientation(t){if(this.KH_()===t)return this;super.setOrientation(t);this.n5t_();return this}nA_(){return this.bft_}a5t_(){return this.bft_>0&&this._2t_===DY.Ay_?Math.log10(this.bft_):this.bft_}getType(){return this.Qi_}g5t_(){return this._2t_}UNt_(){return this.fNt_}c5t_(){return this.Z2t_}e5t_(t){const i=this.ZZ_(),s=i.Mx_();for(let e=0;e<s.length;e++)i.Px_(s[e],t);return this}A5t_(t){const i=this.ZZ_(),s=i.Mx_();for(let e=0;e<s.length;e++)i.Ox_(s[e],t);return this}hA_(){return this.Nft_}I5t_(){return this.Nft_>0&&this._2t_===DY.Ay_?Math.log10(this.Nft_):this.Nft_}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.i5t_(t);this.notify(ZY.pct_,this);return this}N_(){const t=super.N_();t["min"]=this.bft_;t["max"]=this.Nft_;t["flip"]=this.Z2t_;t["type"]=this.Qi_;t["grid"]={visible:this.fNt_.$C_()};t["labelstyle"]=this.ZZ_().Rx_("major");t["tickstyle"]=this.ZZ_().Vx_("major");t["location"]=this.Owt_;t["labels"]=this._$_;t["datalimits"]=this.aNt_;t["datatype"]=this._2t_;return t}};i=t([_s("geotoolkit.charts.Axis")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRUaWNrR2VuZXJhdG9yIjoialpfIiwic2V0RGF0YVR5cGUiOiJzNXRfIiwiZ2V0TWluIjoibkFfIiwiZ2V0RGF0YVR5cGUiOiJnNXRfIiwiZ2V0R3JpZCI6IlVOdF8iLCJpc0ZsaXAiOiJjNXRfIiwic2V0QWxsVGlja1N0eWxlIjoiZTV0XyIsInNldEFsbExhYmVsU3R5bGUiOiJBNXRfIiwiZ2V0TWF4IjoiaEFfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyJ9fX0g");var tT=Ci(function(){let i=class t extends BM{constructor(t){super(t=Pi(t,{barvalues:{alignment:dA.ne_,position:dA.ne_,offset:{x:0,y:0}}},!0));this.f5t_=t["barvalues"]["position"];this.C5t_=t["barvalues"]["alignment"];this.d5t_=t["barvalues"]["offset"];this._q_.SE_(this.C5t_)}setOptions(t){if((t=Es(t))==null)return this;const i=t["barvalues"];if(i!=null){i["position"]!=null&&(this.f5t_=i["position"]);if(i["alignment"]!=null){this.C5t_=i["alignment"];this._q_.SE_(this.C5t_)}this.d5t_=qi(i["offset"],this.d5t_)}return super.setOptions(t)}N_(){const t=super.N_();t["barvalues"]=Pi({alignment:this.C5t_,position:this.f5t_,offset:this.d5t_},t["barvalues"]);return t}Ift_(){return this}X1t_(){return this.d5t_["y"]+$o.measureText("0",this._q_.FE_()).Ts_()}Eft_(t,i,s,e){const A=i[0],n=i[1],h=i[2],r=i[3];let o=i[4],l,u,a;switch(this.f5t_){case dA.ne_:l=A+h/2;u=n+r/2;break;case dA.re_:l=A+h/2;u=n;break;case dA.le_:l=A+h/2;u=n+r;break;case dA.ee_:l=A+h;u=n+r;break;case dA.oe_:l=A+h;u=n+r/2;break;case dA.Ae_:l=A+h;u=n;break;case dA.ie_:l=A;u=n+r;break;case dA.he_:l=A;u=n+r/2;break;case dA.se_:l=A;u=n;break}const g=t.Ji_(),c=g.rI_();if(NA.equals(g.HI_(),Math.PI)||NA.equals(g.HI_(),0)){l+=Math.sign(this.d5t_["x"])*bn.jc_(this.d5t_["x"],0,c);u+=Math.sign(this.d5t_["y"])*bn.jc_(0,this.d5t_["y"],c)}else{l+=Math.sign(this.d5t_["x"])*bn.jc_(0,this.d5t_["x"],c);u+=Math.sign(this.d5t_["y"])*bn.jc_(this.d5t_["y"],0,c)}this._q_.gR_(l,u);o=this.pft_()?o:r;a=parseFloat(o.toFixed(this.jIt_)).toString();this.Bft_!=null&&(a=String(this.Bft_(a,s,e,o)));this._q_.a_(a);this.DIt_.$C_()===!0&&this.DIt_.gR_(A+h/2,n+r).render(t);this.ZIt_&&this._q_.rotate(this.ZIt_,l,u);this._q_.render(t);this.ZIt_&&this._q_.rotate(-this.ZIt_,l,u)}Qft_(t,i,s,e,A,n){const h=i.getBounds();t.iQ_(e,h);const r=t.VR_(),o=t.Ji_()||Gn.JI_,l=undefined,u=(r!==1?Gn.TI_(r,r).vI_(o):o).rn_(h),a=this.JV_()["barmode"]===XD.aIt_,g=a?1:this.hft_.data.reduce(((t,i)=>Math.max(t,i.LK_.length)),0);if(NA.equals(o.HI_(),Math.PI)||NA.equals(o.HI_(),0)){const i=a?u.ye_():u.Qe_()-(n+1-g/2)*u.Ie_();t.aS_({hP_:!0,kT_:{x:(t,s)=>{const e=Math.round((t-i)/u.Ie_()*2)*Math.round(u.Ie_())/2;return Math.round(i)+Math.round(e)+(s?1/2:0)},y:!0}})}else{const i=a?u.De_():u.pe_()-(n+1-g/2)*u.Ts_();t.aS_({hP_:!0,kT_:{x:!0,y:(t,s)=>{const e=Math.round((t-i)/u.Ts_()*2)*Math.round(u.Ts_())/2;return Math.round(i)+Math.round(e)+(s?1/2:0)}}})}if(A){t.rB_(s,h);t.pR_(h);t.cS_();return}t.rB_(null);t.pR_(h);const c=h.we_(),I=h.Qe_(),f=h.Ee_(),C=h.pe_();t.rB_(s,h);switch(this.JV_()["orientation"]){case _D.z_:t.mR_([c,I,I,c],[f,f,C,C]);break;case _D.Top:t.mR_([c,c,I,I],[C,f,f,C]);break;case _D.X_:t.mR_([I,c,c,I],[f,f,C,C]);break;default:t.mR_([c,c,I,I],[f,C,C,f])}t.cS_()}HIt_(t,i){if(t)if(this.VIt_&&i)for(let i=0;i<t.length;++i){const s=this.VIt_[i]["values"];this.VIt_[i]["values"]=s.concat(t[i]["values"])}else this.VIt_=t;else{if(!this.VIt_){typeof this.iIt_=="number"&&typeof this.sIt_=="number"&&(this.R__()?this.Lq_(new mA(this.iIt_,0,this.sIt_,this.U$_!=null?this.RIt_:1)):this.Lq_(new mA(0,this.iIt_,this.U$_!=null?this.RIt_:1,this.sIt_)));return}t=this.VIt_;i=!1}const s=this.rft_(t),e=this.nft_(s),A=s.data.length===0?0:s.data[0].oft_.length,n=this.ift_(A);let h=s.data.length,r=0;if(this.hft_&&i){const t=this.nft_(this.hft_);e[0]=Math.min(e[0],t[0]);e[1]=Math.max(e[1],t[1]);const i=this.hft_.data.length;r=i+this.UU_["barpad"]/(n+this.UU_["barpad"]);h+=i}const o=h+this.UU_["barpad"]/(n+this.UU_["barpad"]),l=this.FIt_;this.uft_=l/(this.UU_["barpad"]+n);this.lft_=this.uft_*this.UU_["barpad"];this.U$_!=null&&this.UU_["barpad"]===0&&(this.uft_=Math.min(l*this.UU_["barwidth"],this.FIt_/this.bIt_));this.rd_(!1);const u=-this.uft_*n/2,a=u-this.lft_;this.R__()?this.U$_!=null?this.Lq_(new mA(e[0],this.kIt_,e[1],this.RIt_)):this.Lq_(new mA(e[0],a,e[1],o+a)):this.U$_!=null?this.Lq_(new mA(this.kIt_,e[0],this.RIt_,e[1])):this.Lq_(new mA(a,e[0],o+a,e[1]));const g=r===0?u:a+r;this.aft_(s,A,g,i);this.rd_(!0)}};i=t([_s("geotoolkit.charts.shapes.BarChart")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8ifX19");var iT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"barchart-series"}));this.Q0t_=t["chart"];this.eat_=t["index"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;if(t["linestyle"]!=null){const i=this.Q0t_.rt_(),s=this.Q0t_.JV_()["barstyles"];this.Q0t_.setOptions({barstyles:s.map(((i,s)=>{if(s!==this.eat_||!i)return i;const e=undefined;return{linestyles:t["linestyle"]instanceof hl?t["linestyle"]:i["linestyles"].dt_(t["linestyle"]),fillstyles:i["fillstyles"]}}))});this.Q0t_.Lq_(i)}return super.dt_(t)}N_(){const t=super.N_(),i=this.Q0t_.JV_()["barstyles"];t["linestyle"]=i[this.eat_]?i[this.eat_]["linestyles"]:null;return t}};i=t([_s("geotoolkit.charts.BarChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const sT=new lA,eT=new lA;var AT=Ci(function(){var i;let s=i=class t extends UY{constructor(t){super(t=Pi(t,{legend:{format:"${y-series}"},datamode:jD.cIt_,barvalues:{position:dA.ne_,textstyle:{baseline:ka.mk_},rotationangle:Math.PI/2,visible:!0},barpad:1},!0));const i=this.p2t_(t);i["barwidth"]=1;this.Q0t_=new tT(i);this.G1t_().GY_(this.Q0t_);this.b2t_=[];this.B5t_=t["stacked"]===!0;this.xIt_=t["datamode"];this.w5t_=null;this.Eq_(!0);this.U2t_(t["series"]);this.Q5t_(t["referenceline"]);this.initialize(t)}E5t_(){if(this.w5t_==null)return;const t=this.Q0t_.rt_();if(t!=null){if(this.Q0t_.k__()){sT.vs_(t.we_(),this.w5t_);eT.vs_(t.Qe_(),this.w5t_)}else{sT.vs_(this.w5t_,t.Ee_());eT.vs_(this.w5t_,t.pe_())}this.p5t_.zA_({from:sT,to:eT})}}Q5t_(t){if(t==null)return this;if(this.p5t_==null){this.p5t_=new Rd;this.G1t_().xY_(0,this.p5t_)}this.p5t_.dt_(t);if(this.w5t_===t["value"])return this;this.w5t_=t["value"];this.E5t_();return this}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(t),"${value}":""}),symbol:{alignment:dA.ne_,linestyle:Array.isArray(t["linestyle"])?t["linestyle"][0]:t["linestyle"],fillstyle:Array.isArray(t["fillstyle"])?t["fillstyle"][0]:t["fillstyle"],painter:tp,sizeisindevicespace:!0,width:16,height:16}});return i}Q2t_(t,i){return{painter:cE,linestyle:Array.isArray(t["linestyle"])?t["linestyle"][i]:t["linestyle"],fillstyle:Array.isArray(t["fillstyle"])?t["fillstyle"][i]:t["fillstyle"]}}U2t_(t){if(t==null)return this;this.q2t_=UY.D2t_(t["x"],this.q2t_);if(t["y"]==null)return this;this.G2t_=[];const i=[],s=Array.isArray(t["y"])?t["y"]:[t["y"]];for(let t=0;t<s.length;++t){const e=s[t],A=qi(e,{data:typeof e=="string"?e:"",linestyle:{pixelsnapmode:{x:!0,y:!0}},fillstyle:GA.dA_,visible:!0},!0);A["fillstyle"]=Array.isArray(A["fillstyle"])?A["fillstyle"].map((t=>il.BD_(t))):il.BD_(A["fillstyle"]);A["linestyle"]=Array.isArray(A["linestyle"])?A["linestyle"].map((t=>hl.Wi_(t))):hl.Wi_(A["linestyle"]);A["values"]=A["data"];Array.isArray(A["data"])&&(A["data"]=this.Cvt_()?this.Cvt_().l1t_(A["data"]):"");this.G2t_.push(A);A["visible"]&&i.push(A["data"])}this.V2t_();return this}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;for(let t=0;t<this.G2t_.length;t++){const i=this.G2t_[t]["values"];this.G2t_[t]["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i;this.b2t_[t]!=null&&this.b2t_[t].JC_(this.G2t_[t]["data"])}}U1t_(t,i,s){s.indexOf(this.q2t_["data"])<0&&this.G2t_.every((t=>s.indexOf(t["data"])<0))||this.rvt_(this.Cvt_())}l2t_(){return this.b2t_}x1t_(){if(!this.T1t_()){this.Q0t_.setData({mode:this.xIt_,datasets:[]});return}const t=[];let i=0,s=-1/0,e,A=0,n=1;if(this.q2t_["data"]){e=this.g1t_(this.q2t_["data"],RY.X);A=e.nA_();n=e.hA_()}for(let h=0;h<this.G2t_.length;h++){const r=this.g1t_(this.G2t_[h]["data"],RY.Y);let o=[];if(r!=null){i=Math.min(i,r.nA_());s=Math.max(s,r.hA_());o=r.toArray(!1);e&&o.length>e.getLength()&&(o=o.slice(0,e.getLength()));if(!e){A=0;n=Math.max(o.length-1,n)}}t.push({values:o})}this.Q0t_.setData({mode:this.xIt_,datasets:t,positions:e?e.toArray(!1):void 0});this.m5t_(A,n,i,s);this.V2t_();this.E5t_()}m5t_(t,i,s,e){const A=this.Q0t_.rt_();t=Math.min(t,A.getX());i=Math.max(i,A.Qe_());s=Math.min(s,A.getY());e=Math.max(e,A.pe_());if(this.KH_()===EY.X_||this.KH_()===EY.z_){this.W1t_(RY.X,s,e);this.W1t_(RY.Y,t,i)}else{this.W1t_(RY.X,t,i);this.W1t_(RY.Y,s,e)}}Lq_(t){super.Lq_(t);this.KH_()!==EY.X_&&this.KH_()!==EY.z_||(t=new mA(t.getY(),t.getX(),t.pe_(),t.Qe_()));this.Q0t_.ht_(t);this.Q0t_.Lq_(t);this.y5t_();return this}X1t_(){return this.KH_()===EY.X_||this.KH_()===EY.z_?new _l({right:this.Q0t_.X1t_()}):new _l({top:this.Q0t_.X1t_()})}dt_(t){if((t=Es(t))==null)return this;const i=this.Q0t_.rt_();super.dt_(t);this.U2t_(t["series"]);t["datamode"]!==void 0&&this.D5t_(t["datamode"]);delete t["series"];this.Q0t_.dt_(this.p2t_(t));t["stacked"]!==void 0&&this.M5t_(t["stacked"]);t["referenceline"]!==void 0&&this.Q5t_(t["referenceline"]);this.Q0t_.Lq_(i);return this}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=[];t.QO_((t=>{if(!(t instanceof dp))return;const s=t.zC_();s&&s instanceof oD&&s.OT_()===this.Q0t_&&i.push(s)}));super.render(t);t.EO_();const s={};this.v5t_(s,i);t.mO_(new jf(this,s))}v5t_(t,i){for(let s=0;s<i.length;s++){const e=i[s].nat_(),A=i[s].rat_();UY.Z1t_(t,this.G2t_[e]["data"],A)}}bB_(t,i){if(this.b2t_!=null)for(let s=0;s<this.b2t_.length;s++)t(this.b2t_[s],i)}N_(){const t=super.N_();t["series"]={x:i.M2t_(this.q2t_),y:this.G2t_.map((t=>i.M2t_(t)))};t["stacked"]=this.B5t_;if(this.p5t_){t["referenceline"]=this.p5t_.N_();t["referenceline"]["value"]=this.w5t_}t["datamode"]=this.xIt_;return this.m2t_(this.Q0t_.N_(),t)}y5t_(){let t=0;const i=this.n2t_();let s=i.rt_();if(s==null)return this;this.KH_()!==EY.X_&&this.KH_()!==EY.z_||(s=new mA(s.getY(),s.getX(),s.pe_(),s.Qe_()));i.at_(null);if(this.KH_()===EY.z_||this.KH_()===EY.X_){t=-Math.PI/2;i.pq_(!0)}if(NA.equals(Math.abs(t),Math.PI/2)){const t=s.getX()+(s.Ie_()-s.Ts_())/2,e=s.getY()-(s.Ie_()-s.Ts_())/2;i.ht_(new mA(t,e,t+s.Ts_(),e+s.Ie_()))}i.rotate(t,s.ye_(),s.De_());return this}setOrientation(t){super.setOrientation(t);return this.y5t_()}$1t_(t,i){super.$1t_(t,i);if(t!==RY.Y)return this;i===DY.Ay_?this.Q0t_.Yx_((function(t,i,s,e){return NA.round(Math.pow(10,e))})):this.Q0t_.Yx_((function(t){return t}));return this}M5t_(t){if(this.B5t_===t)return this;this.B5t_=t;this.Q0t_.setOptions({barmode:t?XD.aIt_:XD.L$_});this.x1t_();this.notify(wY.pct_,this);return this}D5t_(t){if(this.xIt_===t)return this;this.xIt_=t;this.x1t_();return this}b1t_(t,i,s){super.b1t_(t,i,s);s["state"]===Rl.kv_&&this.b5t_(s["series"],t!==pY.q0t_)}b5t_(t,i){const s=this.G2t_.findIndex((i=>i["data"]===t)),e=this.Q0t_.PIt_();if(s<0||e[s]["visible"]===i)return;e[s]["visible"]=i;const A=this.Q0t_.rt_();this.Q0t_.JIt_(e);this.Q0t_.Lq_(A)}V2t_(){this.b2t_=[];const t=[];if(this.xIt_===jD.IIt_){const i=this.G2t_[0],s=Array.isArray(i["linestyle"])?i["linestyle"]:[i["linestyle"]],e=Array.isArray(i["fillstyle"])?i["fillstyle"]:[i["fillstyle"]],A=Math.max(s.length,e.length);let n,h;for(let r=0;r<A;++r){n=s[r]||n;h=e[r]||h;t.push({linestyles:hl.Wi_(n),fillstyles:il.BD_(h)});this.b2t_.push(new iT({name:i["data"],index:r,chart:this.Q0t_}).JC_(i["data"]))}}else this.G2t_.forEach(((i,s)=>{t.push({linestyles:Array.isArray(i["linestyle"])?hl.Wi_(i["linestyle"][0]):hl.Wi_(i["linestyle"]),fillstyles:Array.isArray(i["fillstyle"])?il.BD_(i["fillstyle"][0]):il.BD_(i["fillstyle"])});this.b2t_.push(new iT({name:i["data"],index:s,chart:this.Q0t_}).JC_(i["data"]))}));this.Q0t_.setOptions({barstyles:t})}n2t_(){return this.Q0t_}p2t_(t){const i=super.p2t_(t);t["barpad"]!=null&&(i["barpad"]=t["barpad"]);t["stacked"]!=null&&(i["barmode"]=t["stacked"]===!0?XD.aIt_:XD.L$_);t["barvalues"]!=null&&(i["barvalues"]=t["barvalues"]);t["barmaxwidth"]!=null&&(i["barmaxwidth"]=t["barmaxwidth"]);t["barstyles"]!=null&&(i["barstyles"]=t["barstyles"]);t["symbol"]!=null&&(i["symbol"]=t["symbol"]);t["valuelimits"]!=null&&(i["valuelimits"]=t["valuelimits"]);return i}m2t_(t,i){const s={};s["barpad"]=t["barpad"];s["stacked"]=t["barmode"]===XD.aIt_;s["barvalues"]=t["barvalues"];s["barmaxwidth"]=t["barmaxwidth"];s["barstyles"]=t["barstyles"];s["valuelimits"]=t["valuelimits"];return Pi(s,super.m2t_(s,i))}h2t_(t){switch(t){case QY.K0t_:return new Bh([{attributename:"data",type:"horizontal",begin:"auto",duration:1500}]);case!0:case QY.H0t_:return new Bh([{attributename:"data",type:"vertical",begin:"auto",duration:1500}])}return super.h2t_(t)}K1t_(t){if(this.q2t_["data"]===t||t===RY.X)return this.q2t_;if(t===RY.Y)return this.G2t_;const i=undefined;return this.G2t_.find((i=>i["data"]===t))||null}o2t_(){return this.G2t_||[]}};s=i=t([Zs(qh),_s("geotoolkit.charts.BarChart")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVMZWdlbmRJdGVtIjoicjJ0XyIsImNyZWF0ZVRvb2x0aXBTeW1ib2wiOiJRMnRfIiwib25EYXRhU2VyaWVzQ2hhbmdlZCI6IlUxdF8iLCJnZXRDc3NTZXJpZXMiOiJsMnRfIiwib25EYXRhVXBkYXRlZCI6IngxdF8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldERlc2lyZWRPZmZzZXQiOiJYMXRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImVudW1lcmF0ZU5vZGVzIjoiYkJfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0QXhpc0RhdGFUeXBlIjoiJDF0XyIsInNldFN0YWNrZWRNb2RlRW5hYmxlZCI6Ik01dF8iLCJzZXREYXRhTW9kZSI6IkQ1dF8iLCJvblNlbGVjdGlvblN0YXRlQ2hhbmdlZCI6ImIxdF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImdldFNlcmllc0ZvckxlZ2VuZCI6Im8ydF8ifX19");var nT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"boxplotchart-series"}));this.Q0t_=t["chart"];this.eat_=t["index"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;if(t["linestyle"]!=null){const i=this.Q0t_.N_()["linestyles"];if(Array.isArray(i[0])){const s=i,e=s.flat(2).filter((t=>t!=null))[this.eat_];for(let i=0;i<s.length;i++)for(let A=0;A<s[i].length;A++)s[i][A]===e&&s[i][A]!==t["linestyle"]&&(s[i][A]=t["linestyle"])}else i[this.eat_]!==t["linestyle"]&&(i[this.eat_]=t["linestyle"]);this.Q0t_.setOptions({linestyles:i})}return super.dt_(t)}N_(){const t=super.N_(),i=this.Q0t_.N_()["linestyles"];t["linestyle"]=i.flat(2).filter((t=>t!=null))[this.eat_];return t}};i=t([_s("geotoolkit.charts.BoxPlotChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const hT=function(t){return t&&(t["primaryfillstyle"]!=null||t["secondaryfillstyle"]!=null)};var rT=Ci(function(){let i=class t extends UY{constructor(t){super(t=qi(t,{legend:{format:"${y-series}"},datamode:GM.cIt_},!0));this.Q0t_=new FM(this.p2t_(t),{datasets:[]});this.xIt_=t["datamode"];this.U2t_(t["series"]);this.G1t_().GY_(this.Q0t_);this.initialize(t)}o2t_(){return this.G2t_}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});let s=null,e=null;if(hT(t["fillstyle"])){s=t["fillstyle"]["primaryfillstyle"];e=t["fillstyle"]["secondaryfillstyle"]}else if(t["fillstyle"]!=null){s=t["fillstyle"];e=t["fillstyle"]}else{s=this.Q0t_.N_()["primaryfillstyle"];e=this.Q0t_.N_()["secondaryfillstyle"]}i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(t)}),symbol:{alignment:dA.ne_,linestyle:null,painter:(t,i,A)=>{A.iQ_(s);A.pR_(i.getX(),i.getY(),i.Ie_(),i.Ts_()/2);A.iQ_(e);A.pR_(i.getX(),i.getY()+i.Ts_()/2,i.Ie_(),i.Ts_()/2)},sizeisindevicespace:!0,width:16,height:16}});return i}z1t_(t){const i=this.Q0t_.rt_();switch(t){case RY.X:return new fA(i.getX(),i.Qe_());case RY.Y:return new fA(i.getY(),i.pe_())}return super.z1t_(t)}U2t_(t){if(t==null)return this;this.q2t_=UY.D2t_(t["x"],this.q2t_);if(t["y"]==null)return this;this.N5t_=t["group"]||this.N5t_;this.G2t_=[];this.b2t_=[];const i=Array.isArray(t["y"])?t["y"]:[t["y"]],s=[];for(let t=0;t<i.length;++t){const e=i[t],A=qi(e,{data:typeof e=="string"?e:"",visible:!0},!0);if(A["fillstyle"]!=null)if(hT(A["fillstyle"])){A["fillstyle"]["primaryfillstyle"]=il.BD_(A["fillstyle"]["primaryfillstyle"]);A["fillstyle"]["secondaryfillstyle"]=il.BD_(A["fillstyle"]["secondaryfillstyle"])}else A["fillstyle"]=il.BD_(A["fillstyle"]);A["linestyle"]!=null&&(A["linestyle"]=hl.Wi_(A["linestyle"]));A["values"]=A["data"];Array.isArray(A["data"])&&(A["data"]=this.Cvt_()?this.Cvt_().l1t_(A["data"],this.R1t_()):"");this.G2t_.push(A);this.b2t_.push(new nT({name:A["data"],index:t,chart:this.Q0t_}).JC_(A["data"]));s.push(A["fillstyle"])}return this}D5t_(t){if(this.xIt_===t)return this;this.xIt_=t;this.x1t_();return this}K1t_(t){if(this.q2t_["data"]===t||t===RY.X)return this.q2t_;if(t===RY.Y)return this.G2t_;const i=this.G2t_.find((i=>i["data"]===t));return i||null}S5t_(t){for(let i=0;i<this.G2t_.length;i++)if(t===this.G2t_[i]["name"])return this.G2t_[i];return null}F1t_(){const t=undefined;if(this.Cvt_()==null)return!1;const i=this.G2t_.length;if(i===0)return!1;for(let t=0;t<i;t++)if(this.g1t_(this.G2t_[t]["data"])!=null)return!0;return!1}bB_(t,i){if(this.b2t_!=null)for(let s=0;s<this.b2t_.length;s++)t(this.b2t_[s],i)}l2t_(){return this.b2t_}E2t_(t){if(!t)return"";if(this.g2t_()!=null)return this.g2t_()(t,this);const i=[],s=["Minimum","Lower quartile","Median","Upper quartile","Maximum"];for(let e=0;e<this.G2t_.length;e++){const A=this.G2t_[e]["data"],n=t[A];if(!n)continue;const h=this.q1t_(this.G2t_[e]);if(n.length===0)i.push(h);else{i.push('<span class="tooltip-symbol" style="background-color: grey"></span><b>'+h+"</b>");for(let t=0;t<n.length;t++){const e=this.O1t_(A,n[t]);i.push(s[n[t]]+": "+e)}}}return i.join("<br />")}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=[];t.QO_((t=>{if(!(t instanceof QM))return;const s=t.zC_();s&&s instanceof oD&&s.OT_()===this.Q0t_&&i.push(s)}));super.render(t);t.EO_();if(i.length===0)return;const s={};for(let t=0;t<i.length;t++){const e=i[t].nat_(),A=i[t].rat_();let n;n=this.N5t_!=null?this.S5t_(this.N5t_[A][e])["data"]:this.G2t_[e]["data"];for(let t=0;t<5;t++)UY.Z1t_(s,n,t)}t.mO_(new jf(this,s))}Y1t_(t,i,s){t!==wY.Mct_&&t!==wY.Sct_||this.x1t_()}O1t_(t,i){const s=this.g1t_(t);if(s==null||s.getLength()<=i||i%1!=0)return NaN;const e=s.getLength();return s.getValue(i!==4?Math.floor(e*i/4):e-1)}n2t_(){return this.Q0t_}x1t_(){if(!this.T1t_()){this.Q0t_.setData({mode:this.xIt_,datasets:[]});return}let t=[],i=[],s=[];const e=[],A=[];let n=[];if(this.N5t_!=null)for(let h=0;h<this.N5t_.length;h++){const r=this.N5t_[h];i=[];s=[];t=[];for(let e=0;e<r.length;e++){let A=[];const n=this.S5t_(r[e]);if(n!=null){A=this.g1t_(n["data"],RY.Y).toArray(!1);i.push(n["fillstyle"]);s.push(n["linestyle"]||this.Q0t_.N_()["linestyle"].clone())}else if(r[e]==null){A=null;i.push(null);s.push(null)}t.push(A)}n.push({values:t,fillstyle:i});e.push(i);A.push(s)}else{for(let i=0;i<this.G2t_.length;i++){const s=this.G2t_[i]["data"];let n=[];const h=this.g1t_(s,RY.Y);if(h!=null){n=h.toArray(!1);e.push(this.G2t_[i]["fillstyle"]);A.push(this.G2t_[i]["linestyle"]||this.Q0t_.N_()["linestyle"].clone())}t.push(n)}n=[{values:t,fillstyle:e}]}this.Q0t_.setData({mode:this.xIt_,datasets:n});this.Q0t_.setOptions({fillstyles:e,linestyles:A})}rvt_(t){super.rvt_(t);this.Q0t_.setOptions({orientation:this.KH_()===EY.X_||this.KH_()===EY.z_?fg.ux_:fg.ax_});return this}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;for(let t=0;t<this.G2t_.length;t++){const i=this.G2t_[t]["values"];this.G2t_[t]["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i;this.b2t_[t]!=null&&this.b2t_[t].HC_(this.G2t_[t]["data"]).JC_(this.G2t_[t]["data"])}}U1t_(t,i,s){s.indexOf(this.q2t_["data"])<0&&this.G2t_.every((t=>s.indexOf(t["data"])<0))||this.rvt_(this.Cvt_())}p2t_(t){const i=super.p2t_(t);i["boxvalues"]=t["boxvalues"];i["boxwidth"]=t["boxwidth"];i["boxpad"]=t["boxpad"];i["whiskerswidth"]=t["whiskerswidth"];i["boxwidthunit"]=t["boxwidthunit"];i["fixedboxwidth"]=t["fixedboxwidth"];i["isoutliersvisible"]=t["isoutliersvisible"];i["linestyle"]=t["linestyle"];i["linestyles"]=t["linestyles"];i["fillstyles"]=t["fillstyles"];i["connectedlinestyle"]=t["connectedlinestyle"];return i}m2t_(t,i){const s={};s["boxvalues"]=t["boxvalues"];s["boxwidth"]=t["boxwidth"];s["boxpad"]=t["boxpad"];s["whiskerswidth"]=t["whiskerswidth"];s["boxwidthunit"]=t["boxwidthunit"];s["fixedboxwidth"]=t["fixedboxwidth"];s["isoutliersvisible"]=t["isoutliersvisible"];s["linestyle"]=t["linestyle"];s["linestyles"]=t["linestyles"];s["fillstyles"]=t["fillstyles"];s["connectedlinestyle"]=t["connectedlinestyle"];return Pi(s,super.m2t_(s,i))}N_(){const t=super.N_();t["series"]={x:UY.M2t_(this.q2t_),y:this.G2t_.map((t=>UY.M2t_(t))),group:this.N5t_};t["datamode"]=this.xIt_;return this.m2t_(this.Q0t_.N_(),t)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.U2t_(t["series"]);t["datamode"]!==void 0&&this.D5t_(t["datamode"]);this.Q0t_.dt_(this.p2t_(t));return this}};i=t([_s("geotoolkit.charts.BoxPlotChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTZXJpZXNGb3JMZWdlbmQiOiJvMnRfIiwiY3JlYXRlTGVnZW5kSXRlbSI6InIydF8iLCJnZXREZXNpcmVkTW9kZWxSYW5nZSI6InoxdF8iLCJzZXREYXRhTW9kZSI6IkQ1dF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImVudW1lcmF0ZU5vZGVzIjoiYkJfIiwiZ2V0Q3NzU2VyaWVzIjoibDJ0XyIsInRvb2x0aXBGb3JtYXQiOiJFMnRfIiwib25EYXRhVmFsdWVzQ2hhbmdlZCI6IlkxdF8iLCJnZXRTZXJpZXNWYWx1ZSI6Ik8xdF8iLCJvbkRhdGFVcGRhdGVkIjoieDF0XyIsInNldERhdGFTb3VyY2UiOiJydnRfIiwib25EYXRhU2VyaWVzQ2hhbmdlZCI6IlUxdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var oT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"bubblechart-series"}));this.Q0t_=t["chart"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;this.Q0t_.n2t_().awt_({[this.XC_()]:{fillstyle:t["fillstyle"]&&il.BD_(t["fillstyle"]),linestyle:t["linestyle"]&&hl.Wi_(t["linestyle"])}});if(this.XC_()===Rl.__){const i=this.Q0t_.n2t_().getData();this.Q0t_.J1t_().forEach((s=>{s.dt_({symbol:{fillstyle:t["fillstyle"]?il.BD_(t["fillstyle"]):i["defaultfillstyle"],linestyle:t["linestyle"]?hl.Wi_(t["linestyle"]):i["defaultlinestyle"]}})}))}return this}N_(){const t=super.N_(),i=this.Q0t_.n2t_().getData();t["linestyle"]=i["defaultlinestyle"]&&i["defaultlinestyle"].clone();t["fillstyle"]=i["defaultfillstyle"]&&i["defaultfillstyle"].clone();return t}};i=t([_s("geotoolkit.charts.BubbleChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const lT="#000000",uT="#80c0ff",aT={legend:{format:"bubble chart"}};var gT=Ci(function(){let i=class t extends UY{constructor(t){let i=null,s=null;if(t){i=(t=Es(t))["linestyle"];s=t["fillstyle"];t["linestyle"]=null;t["fillstyle"]=null;t["legend"]==null&&(t["legend"]=aT["legend"])}super(t!=null?t:aT);this.b2t_=[];this.Q0t_=new OM({defaultlinestyle:i||lT,defaultfillstyle:s||uT});if(t!=null){const i={};t["colorprovider"]!=null&&(i["colorprovider"]=t["colorprovider"]);if(t["label"]!=null){t["label"]["location"]&&(i["labellocation"]=t["label"]["location"]);t["label"]["secondarylocation"]&&(i["secondarylocation"]=t["label"]["secondarylocation"]);t["label"]["textstyle"]!=null&&(i["labeltextstyle"]=t["label"]["textstyle"]);t["label"]["visible"]!=null&&(i["labelvisible"]=t["label"]["visible"]);t["label"]["padding"]!=null&&(i["labelpadding"]=t["label"]["padding"])}t["labels"]!=null&&(i["labels"]=t["labels"]instanceof PD||t["labels"]instanceof vM?t["labels"].toArray():t["labels"]);t["mins"]!==void 0&&(i["mins"]=t["mins"]);t["maxs"]!==void 0&&(i["maxs"]=t["maxs"]);t["minsize"]!==void 0&&(i["minsize"]=t["minsize"]);t["maxsize"]!==void 0&&(i["maxsize"]=t["maxsize"]);this.Q0t_.dt_(i);if(t["series"]!=null){this.q2t_=UY.D2t_(t["series"]["x"],this.q2t_);this.G2t_=UY.D2t_(t["series"]["y"],this.G2t_);this.G5t_=UY.D2t_(t["series"]["z"],this.G5t_);this.R5t_=UY.D2t_(t["series"]["s"],this.R5t_)}this.k5t_=t["trendline"]||null}this.F5t_=null;this.aNt_=new mA;this.Eq_(!0);this.G1t_().GY_(this.Q0t_);this.initialize(t)}K1t_(t){switch(t){case RY.X:case this.q2t_["data"]:return this.q2t_;case RY.Y:case this.G2t_["data"]:return this.G2t_;case this.R5t_["data"]:return this.R5t_;case RY.Z:case this.G5t_["data"]:return this.G5t_}return null}o2t_(){return this.G2t_?[{data:this.G2t_["data"]}]:[]}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[this.q2t_["data"]]:[],[this.G2t_["data"]]:[]});const s=this.Q0t_.getData(!1,!1);i.dt_({text:this.P1t_({"${x-series}":this.q2t_["data"],"${y-series}":this.G2t_["data"],"${z-series}":this.G5t_["data"],"${size-series}":this.R5t_["data"]}),symbol:{alignment:dA.ne_,linestyle:s["defaultlinestyle"],fillstyle:s["defaultfillstyle"],painter:function(t,i,s){const e=i.Ie_(),A=i.Ts_(),n=.5,h=.3,r=.4;s.yR_(i.Qe_()-n*e,i.getY(),n*e,n*A);const o=i.Qe_()-n*e/2;s.yR_(o-h*e/2,i.pe_()-h*A,h*e,h*A);const l=i.pe_()-h*A/2;s.yR_(i.getX(),l-r*A,r*e,r*A)},sizeisindevicespace:!0,width:16,height:16}});return i}X1t_(){return this.Q0t_.getData()["maxsize"]/2}gwt_(t){return this.Q0t_.gwt_(t)}Y1t_(t,i,s){switch(t){case wY.Mct_:this.Q0t_.PBt_(s["count"]);break;case wY.Nct_:this.Q0t_.VBt_(s["from"],s["count"]);this.Q0t_.td_();break;default:return}this.yNt_()}yNt_(){const t=[RY.X,RY.Y,RY.Z],i=this.KH_()===EY.Top||this.KH_()===EY.JQ_?[this.q2t_["data"],this.G2t_["data"],this.G5t_["data"]]:[this.G2t_["data"],this.q2t_["data"],this.G5t_["data"]];let s=!1;for(let e=0;e<t.length;e++){const A=this.g1t_(i[e],t[e]);if(A==null)continue;const n=this.z1t_(t[e]);if(!NA.equals(n.Xs_(),A.nA_())||!NA.equals(n.zs_(),A.hA_())){this.W1t_(t[e],A.nA_(),A.hA_());s=!0}}s&&this.notify(wY.pct_,this)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);const i=t["series"];if(i!==void 0){i["x"]!==void 0&&(this.q2t_=UY.D2t_(t["series"]["x"],this.q2t_));i["y"]!==void 0&&(this.G2t_=UY.D2t_(t["series"]["y"],this.G2t_));i["z"]!==void 0&&(this.G5t_=UY.D2t_(t["series"]["z"],this.G5t_));i["s"]!==void 0&&(this.R5t_=UY.D2t_(t["series"]["s"],this.R5t_));this.k1t_();this.Tmt_()}const s={};t["colorprovider"]!=null&&(s["colorprovider"]=t["colorprovider"]);if(t["linestyle"]!=null){s["defaultlinestyle"]=t["linestyle"];this.J1t_()[0].dt_({symbol:{linestyle:t["linestyle"]}})}if(t["fillstyle"]!=null){s["defaultfillstyle"]=t["fillstyle"];this.J1t_()[0].dt_({symbol:{fillstyle:t["fillstyle"]}})}t["minsize"]!==void 0&&(s["minsize"]=t["minsize"]);t["maxsize"]!==void 0&&(s["maxsize"]=t["maxsize"]);Object.keys(s).length>0&&this.Q0t_.dt_(s);return this}x5t_(t){const i={};this.k5t_=qi(t,this.k5t_,!0);t=this.k5t_;if(!this.F5t_){this.F5t_=(new DS).nf_(!1);this.G1t_().GY_(this.F5t_)}if(t!=null){t["enable"]!=null&&this.F5t_.nf_(t["enable"]);if(this.F5t_.$C_()){!t["regressionmodel"]&&t["model"]&&(t["regressionmodel"]={type:t["model"]});if(!t["regressionline"]&&(t["visible"]||t["linestyle"])){t["regressionline"]={};t["regressionline"]["visible"]=t["visible"];t["regressionline"]["linestyle"]=t["linestyle"];t["visible"]=null}this.F5t_.Lq_(this.rt_());this.F5t_.setOptions(t);i["datax"]=t["datax"]||this.g1t_(this.q2t_["data"],RY.X);i["datay"]=t["datay"]||this.g1t_(this.G2t_["data"],RY.Y);this.F5t_.setData(i)}}else if(this.F5t_.$C_()){i["datax"]=this.g1t_(this.q2t_["data"],RY.X);i["datay"]=this.g1t_(this.G2t_["data"],RY.Y);this.F5t_.setData(i)}return this}y2t_(t,i){return t===this.G5t_["data"]?this.O1t_(this.G5t_["data"],i):null}Lq_(t){super.Lq_(t);const i=this.G1t_().lt_(),s=this.Q0t_.getData();if(t.getX()===s["minx"]&&t.Qe_()===s["maxx"]&&t.getY()===s["miny"]&&t.pe_()===s["maxy"]&&i!=null&&i.Ce_(this.Q0t_.XBt_()))return this;this.Q0t_.zBt_(i);this.Q0t_.dt_({minx:t.getX(),maxx:t.Qe_(),miny:t.getY(),maxy:t.pe_()});return this}render(t){if(!t.tk_()){super.render(t);return}const i=this.sd_()!=null?t.uS_(this.sd_()):t;if(!this.T1t_()||!i.tk_())return;this.Q0t_.render(i);const s=(i.getSelection()||[]).filter(Zf)[0],e=s!=null&&s.GO_()===this.Q0t_?s.getData():[];if(e.length===0)return;const A={};for(let t=0;t<e.length;t++){const i=e[t].index;UY.Z1t_(A,this.q2t_["data"],i);UY.Z1t_(A,this.G2t_["data"],i);this.G5t_["data"]&&UY.Z1t_(A,this.G5t_["data"],i);this.R5t_["data"]&&UY.Z1t_(A,this.R5t_["data"],i)}if(Object.keys(A).length>0){t.mO_(this);t.mO_(new jf(this,A))}}N_(){const t=super.N_(),i=this.Q0t_.getData();t["series"]={x:UY.M2t_(this.q2t_),y:UY.M2t_(this.G2t_),z:UY.M2t_(this.G5t_),s:UY.M2t_(this.R5t_)};t["colorprovider"]=i["colorprovider"];t["linestyle"]=i["defaultlinestyle"];t["fillstyle"]=i["defaultfillstyle"];t["mins"]=i["mins"];t["maxs"]=i["maxs"];t["minsize"]=i["minsize"];t["maxsize"]=i["maxsize"];return t}setOrientation(t){super.setOrientation(t);if(t===EY.JQ_||t===EY.Top)return this;const i=this.q2t_;this.q2t_=this.G2t_;this.G2t_=i;const s=this.t2t_(RY.X);this.$1t_(RY.X,this.t2t_(RY.Y));this.$1t_(RY.Y,s);return this}n2t_(){return this.Q0t_}F1t_(){return this.g1t_(this.q2t_["data"])!=null&&this.g1t_(this.G2t_["data"])!=null}x1t_(){if(!this.T1t_()){this.Q0t_.dt_({datax:[],datay:[],dataz:[],datas:[]});return this}const t=this.g1t_(this.q2t_["data"],RY.X),i=this.g1t_(this.G2t_["data"],RY.Y),s=this.g1t_(this.G5t_["data"],RY.Z),e=this.g1t_(this.R5t_["data"],RY.S),A=s&&s.toArray(!1)||[],n=10,h=e&&e.toArray(!1)||[n];this.Q0t_.dt_({datax:t.toArray(!1),datay:i.toArray(!1),dataz:A,datas:h,validlength:Math.min(t.getLength(),i.getLength())});const r=1e6;this.Q0t_.cwt_(t.hA_()>r||i.hA_()>r?0:5);if(this.KH_()===EY.Top||this.KH_()===EY.JQ_){this.W1t_(RY.X,t.nA_(),t.hA_());this.W1t_(RY.Y,i.nA_(),i.hA_())}else{this.W1t_(RY.X,i.nA_(),i.hA_());this.W1t_(RY.Y,t.nA_(),t.hA_())}s!=null&&this.W1t_(RY.Z,s.nA_(),s.hA_());this.x5t_();this.notify(wY.pct_,this);return this}U1t_(t,i,s){s.every((t=>t!==this.q2t_["data"]&&t!==this.G2t_["data"]&&t!==this.G5t_["data"]&&t!==this.R5t_["data"]))||this.rvt_(this.Cvt_())}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e)||{},h=n[this.q2t_["data"]]||n[this.G2t_["data"]];let r=this.b2t_.filter((t=>t.XC_()===e))[0];if(!r){r=new oT({chart:this}).JC_(e);this.b2t_.push(r)}if(h){r.Bd_(e);this.J1t_().forEach((t=>t.Bd_(e)))}else{r.Qd_(e);this.J1t_().forEach((t=>t.Qd_(e)))}this.Q0t_.uwt_({state:e,samples:e===Rl.__&&h&&h.length>0?[h[h.length-1]]:h})}l2t_(){return this.b2t_}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;const i=this.G2t_["values"];this.G2t_["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i;const s=this.G5t_["values"];this.G5t_["data"]=Array.isArray(s)?this.Cvt_().l1t_(s,this.R1t_()):s;const e=this.R5t_["values"];this.R5t_["data"]=Array.isArray(e)?this.Cvt_().l1t_(e,this.R1t_()):e}};i=t([_s("geotoolkit.charts.BubbleChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImdldFNlcmllc0ZvckxlZ2VuZCI6Im8ydF8iLCJjcmVhdGVMZWdlbmRJdGVtIjoicjJ0XyIsImdldERlc2lyZWRPZmZzZXQiOiJYMXRfIiwiZ2V0U3ltYm9sU2hhcGUiOiJnd3RfIiwib25EYXRhVmFsdWVzQ2hhbmdlZCI6IlkxdF8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0Q29sb3JWYWx1ZSI6InkydF8iLCJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldFByb3BlcnRpZXMiOiJOXyIsIm9uRGF0YVVwZGF0ZWQiOiJ4MXRfIiwib25EYXRhU2VyaWVzQ2hhbmdlZCI6IlUxdF8iLCJvblNlbGVjdGlvblN0YXRlQ2hhbmdlZCI6ImIxdF8iLCJnZXRDc3NTZXJpZXMiOiJsMnRfIn19fSAg");var cT=Ci({L5t_:"DesireModelLimitsChanged"},2,"eyJEZXNpcmVkTW9kZWxMaW1pdHNDaGFuZ2VkIjoiTDV0XyJ9");var IT=Ci({U5t_:"LineChart",Y5t_:"AreaChart",T5t_:"AreaRangeChart",K5t_:"BarChart",H5t_:"FloatingBarChart",q5t_:"BubbleChart",J5t_:"CrossPlotChart",P5t_:"DonutChart",V5t_:"PieChart",O5t_:"HistogramChart",W5t_:"BoxPlotChart",z5t_:"HeatMapChart",X5t_:"DensityContourChart",j5t_:"RegressionLine",Z5t_:"TornadoChart"},2,"eyJMaW5lQ2hhcnQiOiJVNXRfIiwiQXJlYUNoYXJ0IjoiWTV0XyIsIkFyZWFSYW5nZUNoYXJ0IjoiVDV0XyIsIkJhckNoYXJ0IjoiSzV0XyIsIkZsb2F0aW5nQmFyQ2hhcnQiOiJINXRfIiwiQnViYmxlQ2hhcnQiOiJxNXRfIiwiQ3Jvc3NQbG90Q2hhcnQiOiJKNXRfIiwiRG9udXRDaGFydCI6IlA1dF8iLCJQaWVDaGFydCI6IlY1dF8iLCJIaXN0b2dyYW1DaGFydCI6Ik81dF8iLCJCb3hQbG90Q2hhcnQiOiJXNXRfIiwiSGVhdE1hcENoYXJ0IjoiejV0XyIsIkRlbnNpdHlDb250b3VyQ2hhcnQiOiJYNXRfIiwiUmVncmVzc2lvbkxpbmUiOiJqNXRfIiwiVG9ybmFkb0NoYXJ0IjoiWjV0XyJ9");const fT=(t,i)=>t+"-"+i;var CT=Ci(function(){let i=class t extends AT{constructor(t){super(t=Pi(t,{barmode:XD.gIt_},!0))}o2t_(){const t=super.o2t_(),i=[];for(let s=0;s<t.length;s+=2){const e=t[s],A=t[s+1];i.push({...e,data:fT(e["data"],A["data"])})}return i}U2t_(t){t!=null&&t["y"]!=null&&(this._5t_=[]);return super.U2t_(t)}k1t_(){if(this.Cvt_()!=null&&this.q2t_!=null){super.k1t_();for(let t=0;t<this.G2t_.length;t+=2){const i=t/2;this._5t_[i]!=null&&this._5t_[i].JC_(fT(this.G2t_[t]["data"],this.G2t_[t+1]["data"]))}}}x1t_(){if(!this.T1t_()){this.Q0t_.setData({mode:this.xIt_,datasets:[],positions:[]});return}const t=[];let i=null,s=0,e=-1/0,A,n=0,h=1;if(this.q2t_["data"]){A=this.g1t_(this.q2t_["data"],RY.X);n=A.nA_();h=A.hA_()}for(let r=0;r<this.G2t_.length;r++){if(i&&i.length===0){i=null;continue}const o=this.g1t_(this.G2t_[r]["data"],RY.Y);let l=[];if(o!=null){s=Math.min(s,o.nA_());e=Math.max(e,o.hA_());l=o.toArray(!1);A&&l.length>A.getLength()&&(l=l.slice(0,A.getLength()));if(!A){n=0;h=Math.max(l.length-1,h)}}if(i===null){i=l;continue}const u=Math.min(i.length,l.length),a=[];for(let t=0;t<u;++t)a.push([i[t],l[t]]);i=null;t.push({values:a||[]})}this.Q0t_.setData({mode:this.xIt_,datasets:t,positions:A?A.toArray(!1):void 0});this.m5t_(n,h,s,e);this.V2t_();this.E5t_()}V2t_(){this._5t_=[];const t=[];for(let i=0;i<this.G2t_.length;i+=2){const s=this.G2t_[i];t.push({linestyles:Array.isArray(s["linestyle"])?hl.Wi_(s["linestyle"][0]):hl.Wi_(s["linestyle"]),fillstyles:Array.isArray(s["fillstyle"])?il.BD_(s["fillstyle"][0]):il.BD_(s["fillstyle"])});i%2==0&&this._5t_.push(new iT({name:fT(s["data"],this.G2t_[i+1]["data"]),index:i/2,chart:this.Q0t_}).JC_(fT(s["data"],this.G2t_[i+1]["data"])))}this.Q0t_.setOptions({barstyles:t})}p2t_(t){const i=super.p2t_(t);i["barmode"]=XD.gIt_;return i}M5t_(t){return this}l2t_(){return this._5t_}v5t_(t,i){for(let s=0;s<i.length;s++){const e=i[s].nat_(),A=i[s].rat_();UY.Z1t_(t,this.G2t_[e*2]["data"],A);UY.Z1t_(t,this.G2t_[e*2+1]["data"],A)}}c2t_(t,i){return Array.isArray(t)&&t.length===2?super.c2t_(t[0],i)+"-"+super.c2t_(t[1],i):super.c2t_(t,i)}r2t_(t,i){const s=super.r2t_(t,i);for(let i=0;i<this.G2t_.length;i+=2)if(t["data"]===fT(this.G2t_[i]["data"],this.G2t_[i+1]["data"])){s.setData({[this.G2t_[i]["data"]]:[],[this.G2t_[i+1]["data"]]:[]});return s}return s}L1t_(){super.L1t_();this.b1t_(pY.q0t_,null,{state:Rl.__,selection:"",series:"",index:null});return this}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e)||{},h=this.J1t_();for(let t=0;t<this.G2t_.length;t+=2){const i=this.G2t_[t],s=this.G2t_[t+1],A=fT(i["data"],s["data"]),r=h.find((t=>t.XC_()===A));if(r==null)continue;const o=this._5t_.find((t=>t.XC_()===A));if(n[i["data"]]!=null||n[s["data"]]!=null){r.Bd_(e);o.Bd_(e)}else{r.Qd_(e);o.Qd_(e)}if(e===Rl.__){let t=this.q1t_(i);t+=s["name"]!=null&&s["name"]!==""?"-"+s["name"]:"";r.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":t,"${value}":""})})}}}E2t_(t){const i=this.g2t_();if(i!=null)return i(t,this);let s="";const e=this.B2t_(t);for(let t=0;t<e.length;t+=2){const i=e[t],A=e[t+1],n=i["series"]["name"]==null?i["series"]["id"]:i["series"]["name"],h=this.K1t_(A["series"]["id"]);let r=n;if(h["name"]!=null&&h["name"]!==""){const t=undefined;r+="-"+(A["series"]["name"]==null?A["series"]["id"]:A["series"]["name"])}const o=Pi({series:{name:r,symbol:i["series"]["symbol"]},value:[i["value"],A["value"]]},{...i,...A}),l=this.C2t_(o);s+=l.includes("cg-tooltip-symbol-cell")?'<div class="cg-tooltip-row">'+l+"</div>":l}return s}};i=t([_s("geotoolkit.charts.FloatingBarChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTZXJpZXNGb3JMZWdlbmQiOiJvMnRfIiwib25EYXRhVXBkYXRlZCI6IngxdF8iLCJzZXRTdGFja2VkTW9kZUVuYWJsZWQiOiJNNXRfIiwiZ2V0Q3NzU2VyaWVzIjoibDJ0XyIsImNyZWF0ZUxlZ2VuZEl0ZW0iOiJyMnRfIiwib25TZWxlY3Rpb25TdGF0ZUNoYW5nZWQiOiJiMXRfIiwidG9vbHRpcEZvcm1hdCI6IkUydF8ifX19");var dT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"crossplotchart-series"}));this.Q0t_=t["chart"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;t["fillstyle"]!==void 0&&this.Q0t_.awt_({[this.XC_()]:t["fillstyle"]&&il.BD_(t["fillstyle"]).hB_()||null});return this}N_(){const t=super.N_();t["symbol"]={linestyle:hl.Wi_({color:this.Q0t_.getData()["defaultlinecolor"]}),fillstyle:il.BD_({color:this.Q0t_.getData()["defaultcolor"]})};return t}};i=t([_s("geotoolkit.charts.CrossPlotChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const BT=function(t,i){if(!t||!i)return t||i||null;const s=t.slice();for(let t=0,e=0;e<i.length;)if(t===s.length)s.push(i[e++]);else if(s[t]<i[e])t++;else if(s[t]>i[e])s.splice(t++,0,i[e++]);else{t++;e++}return s};var wT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{legend:{format:"crossplot"},symbol:{painter:gv},colorprovider:null,histogram:{x:{visible:!1,selectable:!1,bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")},y:{visible:!1,selectable:!1,bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")},z:{visible:!1,selectable:!1,bins:25,frequencytype:iN.CMt_,fillstyle:new wr("rgba(192,192,192,0.3)"),linestyle:new hl("rgba(192,192,192,0.3)")}}},!0));this.b2t_=[];this.$5t_=null;this.t3t_={};this.i3t_={};this.s3t_=null;this.e3t_=null;this.Q0t_=new Qv(this.p2t_(t));this.U2t_(t["series"]);this.A3t_=Pi(t["histogram"],{});this.n3t_=this.h3t_(t["histogram"]);this.Eq_(!0);this.G1t_().GY_(this.Q0t_);this.initialize(t)}yNt_(){let t=0,i=1,s=0,e=1;const A=this.KH_()===EY.z_||this.KH_()===EY.X_,n=this.g1t_(this.q2t_["data"],RY.X);if(n!=null)if(A){s=n.nA_();e=n.hA_()}else{t=n.nA_();i=n.hA_()}const h=this.g1t_(this.G2t_["data"],RY.Y);if(h!=null)if(A){t=h.nA_();i=h.hA_()}else{s=h.nA_();e=h.hA_()}this.W1t_(RY.X,t,i);this.W1t_(RY.Y,s,e);const r=this.g1t_(this.G5t_["data"],RY.Z);r!=null&&this.W1t_(RY.Z,r.nA_(),r.hA_());return this}k1t_(){if(this.Cvt_()!=null&&this.q2t_!=null){this.q2t_["data"]=this.r3t_(this.q2t_);this.G2t_["data"]=this.r3t_(this.G2t_);this.G5t_["data"]=this.r3t_(this.G5t_);this.o3t_["data"]=this.r3t_(this.o3t_);this.l3t_["data"]=this.r3t_(this.l3t_)}}r3t_(t){if(t==null)return"";const i=typeof t=="string"||Array.isArray(t)?t:t["values"]||t["data"];return Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i}U1t_(t,i,s){s.every((t=>t!==this.q2t_["data"]&&t!==this.G2t_["data"]&&t!==this.G5t_["data"]&&t!==this.o3t_["data"]&&t!==this.l3t_["data"]))||this.rvt_(this.Cvt_())}X1t_(){const t=this.Q0t_.getData();return(this.o3t_==null?t["symbolsize"]:t["size"]["maxsymbolsize"])/2}gwt_(t){return this.Q0t_.gwt_(t)}U2t_(t){if(t==null)return this;this.q2t_=UY.D2t_(t["x"],null);this.G2t_=UY.D2t_(t["y"],null);this.G5t_=UY.D2t_(t["z"],null);this.o3t_=UY.D2t_(t["size"],null);this.l3t_=UY.D2t_(t["symbol"],null);this.k1t_();return this}u3t_(t){if(t==null)return this;Pi(t,this.A3t_);t["verticalflip"]!=null&&this.n3t_.Eq_(t["verticalflip"]);t["horizontalflip"]!=null&&this.n3t_.pq_(t["horizontalflip"]);if(t["x"]){const i={};Pi(t["x"],i);this.a3t_["x"].dt_(i)}if(t["y"]){const i={};Pi(t["y"],i);this.a3t_["y"].dt_(i)}if(t["z"]){const i={};Pi(t["z"],i);this.a3t_["z"].dt_(i)}this.g3t_();return this}c3t_(){return Pi(this.A3t_,{})}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.U2t_(t["series"]);this.u3t_(t["histogram"]);this.Q0t_.dt_(this.p2t_(t));return this}p2t_(t){const i=super.p2t_(t);if(t["symbol"]!=null){t["symbol"]["linestyle"]!=null&&(i["defaultlinecolor"]=hl.Wi_(t["symbol"]["linestyle"]).getColor());t["symbol"]["fillstyle"]!=null&&(i["defaultcolor"]=il.BD_(t["symbol"]["fillstyle"]).getColor());t["symbol"]["painter"]!=null&&(i["painter"]=t["symbol"]["painter"]);t["symbol"]["size"]==null&&t["symbolsize"]==null||(i["symbolsize"]=t["symbol"]["size"]||t["symbolsize"]);if(t["symbol"]["painters"]!=null){i["symbol"]=i["symbol"]||{};i["symbol"]["painters"]=t["symbol"]["painters"]}if(t["symbol"]["ranges"]!=null){i["symbol"]=i["symbol"]||{};i["symbol"]["ranges"]=t["symbol"]["ranges"]}}if(t["size"]!=null){i["size"]=i["size"]||{};t["size"]["min"]!=null&&(i["size"]["min"]=t["size"]["min"]);t["size"]["max"]!=null&&(i["size"]["max"]=t["size"]["max"]);t["size"]["minsymbolsize"]!=null&&(i["size"]["minsymbolsize"]=t["size"]["minsymbolsize"]);t["size"]["maxsymbolsize"]!=null&&(i["size"]["maxsymbolsize"]=t["size"]["maxsymbolsize"])}t["colorprovider"]!=null&&(i["colorprovider"]=t["colorprovider"]);return i}bB_(t,i){this.I3t_!=null&&t(this.I3t_,i)}Lq_(t){if(t.Ce_(this.rt_()))return this;super.Lq_(t);this.Q0t_.ht_(t);this.Q0t_.Wj_();if(this.$5t_!=null){const t=this.f3t_().L4_().rt_();this.n3t_.ht_(t)}return this}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=undefined,s=(this.sd_()?t.uS_(this.sd_()):t).LR_(),e=this.Q0t_.nwt_(s,!0);if(e.length===0)return;const A={[this.q2t_["data"]]:e,[this.G2t_["data"]]:e,[this.G5t_["data"]]:e};this.o3t_["data"]&&(A[this.o3t_["data"]]=e);this.l3t_["data"]&&(A[this.l3t_["data"]]=e);t.mO_(this);t.mO_(new jf(this,A))}N_(){const t=super.N_();t["series"]={x:UY.M2t_(this.q2t_),y:UY.M2t_(this.G2t_),z:UY.M2t_(this.G5t_),size:UY.M2t_(this.o3t_),symbol:UY.M2t_(this.l3t_)};t["symbol"]==null&&(t["symbol"]={});t["symbol"]["linestyle"]=hl.Wi_({color:this.Q0t_.getData()["defaultlinecolor"]});t["symbol"]["fillstyle"]=il.BD_({color:this.Q0t_.getData()["defaultcolor"]});t["histogram"]=this.c3t_();t["symbolsize"]=this.Q0t_.getData()["symbolsize"];t["colorprovider"]=this.Q0t_.Swt_();return t}setOrientation(t){super.setOrientation(t);if(t===EY.JQ_||t===EY.Top)return this;const i=this.q2t_;this.q2t_=this.G2t_;this.G2t_=i;const s=this.t2t_(RY.X);this.$1t_(RY.X,this.t2t_(RY.Y));this.$1t_(RY.Y,s);return this}o2t_(){return this.G2t_?[this.G2t_]:[]}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[this.q2t_["data"]]:[],[this.G2t_["data"]]:[]});const s=this.Q0t_.getData(),e=this.Q0t_.Swt_();i.dt_({text:this.P1t_({"${x-series}":this.q2t_["data"],"${y-series}":this.G2t_["data"],"${z-series}":this.G5t_["data"],"${size-series}":this.o3t_["data"],"${symbol-series}":this.l3t_["data"]}),symbol:{alignment:dA.ne_,linestyle:s["defaultlinecolor"],fillstyle:e!=null?e.getColor((e.Em_()+e.pm_())/2):s["defaultcolor"],painter:s["painter"],sizeisindevicespace:!0,width:s["symbolsize"],height:s["symbolsize"]}});return i}n2t_(){return this.Q0t_}x1t_(){if(!this.T1t_()){this.Q0t_.setData({datax:[],datay:[],dataz:[]});return}const t=this.g1t_(this.q2t_["data"],RY.X),i=this.g1t_(this.G2t_["data"],RY.Y),s=this.g1t_(this.G5t_["data"],RY.Z),e=this.g1t_(this.o3t_["data"],RY.S),A=this.g1t_(this.l3t_["data"],DY.X0t_);this.Q0t_.setData({x:{data:t?t.toArray(!1):[]},y:{data:i?i.toArray(!1):[]},z:{data:s?s.toArray(!1):[]},size:{data:e?e.toArray(!1):[]},symbol:{data:A?A.toArray(!1):[]}});this.yNt_()}Y1t_(t,i,s){t===wY.Mct_?this.Q0t_.eEt_(s["from"],s["count"]):t===wY.Nct_&&this.Q0t_.zQt_(s["from"],s["count"])}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e),h=n[this.q2t_["data"]]||n[this.G2t_["data"]]||n[this.G5t_["data"]]||n[this.o3t_["data"]]||n[this.l3t_["data"]];let r=[this.q2t_,this.G2t_,this.G5t_,this.o3t_,this.l3t_].reduce(((t,i)=>BT(t,n[i["data"]])),[]);r.length===0&&(r=null);this.Q0t_.uwt_({state:e,samples:r!=null&&r.length===0?this.Q0t_.getData()["datax"].map(((t,i)=>i)):r});let o=this.b2t_.find((t=>t.XC_()===e));if(!o){o=new dT({chart:this.Q0t_}).JC_(e);this.b2t_.push(o)}if(h){o.Bd_(e);this.J1t_().forEach((t=>t.Bd_(e)))}else{o.Qd_(e);this.J1t_().forEach((t=>t.Qd_(e)))}}l2t_(){return this.b2t_}C3t_(){const t=this.getParent();if(t==null||!(t instanceof Ic))return this.G1t_().rt_();const i=t.lt_();return this.G1t_().if_().gI_(i)}K1t_(t){switch(t){case RY.X:case this.q2t_["data"]:return this.q2t_;case RY.Y:case this.G2t_["data"]:return this.G2t_;case RY.Z:case this.G5t_["data"]:return this.G5t_;case this.o3t_["data"]:return this.o3t_;case this.l3t_["data"]:return this.l3t_}return null}y2t_(t,i){return t===this.G5t_["data"]?this.O1t_(this.G5t_["data"],i):null}F1t_(){return this.g1t_(this.q2t_["data"])!=null&&this.g1t_(this.G2t_["data"])!=null}d3t_(t,i,s){const e=this.C3t_(),A=this.Q0t_.NEt_(e).map((function(i){return i[t]}));t!=="z"&&(s=(i=t==="x"?e.getX():e.getY())+(t==="x"?e.Ie_():e.Ts_()));this.a3t_[t].setData({data:A,minvalue:i,maxvalue:s})}f3t_(){if(!this.$5t_)return null;this.s3t_||(this.s3t_=ur(this.$5t_).Gw_((function(t){return t instanceof rQ})).xw_());return this.s3t_}B3t_(t){if(!this.$5t_)return null;if(this.i3t_[t]!=null)return this.i3t_[t];const i=this.f3t_();let s;for(s in ha)if(ha.hasOwnProperty(s)){const e=ha[s],A=i.v4_(e),n=ur(A).Gw_((function(i){return i instanceof av&&i.XC_()===t})).xw_();if(n){this.i3t_[t]=n;break}}return this.i3t_[t]}w3t_(t){if(!this.$5t_)return null;if(this.t3t_[t]!=null)return this.t3t_[t];this.t3t_[t]=ur(this.$5t_).Gw_((function(i){return i instanceof $Y&&i.XC_()===t})).xw_();return this.t3t_[t]}g3t_(){if(!this.$5t_)return;const t=this.N_()["histogram"];if(!t)return;const i=this.a3t_["x"].getParent();if(t["x"]&&t["x"]["visible"]&&i&&this._1t_(RY.X)){const t=this.w3t_(this._1t_(RY.X)),s=t instanceof $Y?t.N_()["location"]:t["location"];i.Eq_(s!==ha.nG_);this.d3t_("x")}const s=this.a3t_["y"].getParent();if(t["y"]&&t["y"]["visible"]&&s&&this._1t_(RY.Y)){const t=this.w3t_(this._1t_(RY.Y)),i=t instanceof $Y?t.N_()["location"]:t["location"],e=s.ut_();e&&e.MI_()||s.rotate(i===ha.AG_?Math.PI/2:-Math.PI/2,.5,.5);s.pq_(i!==ha.AG_);this.d3t_("y")}const e=this.a3t_["z"].getParent();if(t["z"]&&t["z"]["visible"]&&e&&this._1t_(RY.Z)){const t=this.w3t_(this._1t_(RY.Z)),i=t instanceof $Y?t.N_()["location"]:t["location"],s=e.ut_();s&&s.MI_()||e.rotate(i===ha.AG_?Math.PI/2:-Math.PI/2,.5,.5);e.pq_(i!==ha.AG_);const A=this.B3t_(this._1t_(RY.Z));if(A){const t=A.JV_()["range"]["min"],i=A.JV_()["range"]["max"];this.d3t_("z",t,i)}}}Q3t_(){this.e3t_||(this.e3t_=()=>{this.g3t_();return this});return this.e3t_}h3t_(t){t=qi(t,{});const i=new mA(0,0,1,1);this.a3t_={};this.a3t_["x"]=new oN(qi({bounds:new mA(i),orientation:fg.ax_},t["x"]));const s=(new sI).GY_(this.a3t_["x"]);this.a3t_["y"]=new oN(qi({bounds:new mA(i),orientation:fg.ax_},t["y"]));const e=(new sI).GY_(this.a3t_["y"]);this.a3t_["z"]=new oN(qi({bounds:new mA(i),orientation:fg.ax_},t["z"]));const A=(new sI).GY_(this.a3t_["z"]),n=t["id"]!=null?t["id"]:"histogram_overlay";return new sI({verticalflip:t["verticalflip"],horizontalflip:t["horizontalflip"]}).JC_(n).GY_([s,e,A]).Lq_(new mA(i))}u2t_(t){this.$5t_=t;const i=this.f3t_();this.g3t_();i.L4_().GY_(this.n3t_);const s=i.L4_().rt_();this.n3t_.ht_(s);i.on(sQ.w4_,this.Q3t_())}a2t_(t){if(this.$5t_===t){if(this.n3t_){const t=this.f3t_();t.off(sQ.w4_,this.Q3t_());t.L4_().removeChild(this.n3t_)}this.$5t_=null;this.t3t_={};this.i3t_={};this.s3t_=null}}};i=t([Zs(qh),_s("geotoolkit.charts.CrossPlotChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvbkRhdGFTZXJpZXNDaGFuZ2VkIjoiVTF0XyIsImdldERlc2lyZWRPZmZzZXQiOiJYMXRfIiwiZ2V0U3ltYm9sU2hhcGUiOiJnd3RfIiwic2V0SGlzdG9ncmFtT3B0aW9ucyI6InUzdF8iLCJnZXRIaXN0b2dyYW1PcHRpb25zIjoiYzN0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJlbnVtZXJhdGVOb2RlcyI6ImJCXyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0U2VyaWVzRm9yTGVnZW5kIjoibzJ0XyIsImNyZWF0ZUxlZ2VuZEl0ZW0iOiJyMnRfIiwib25EYXRhVXBkYXRlZCI6IngxdF8iLCJvbkRhdGFWYWx1ZXNDaGFuZ2VkIjoiWTF0XyIsIm9uU2VsZWN0aW9uU3RhdGVDaGFuZ2VkIjoiYjF0XyIsImdldENzc1NlcmllcyI6ImwydF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImdldENvbG9yVmFsdWUiOiJ5MnRfIn19fSAg");const QT=new nA(0,0,0,.2),ET=function(t){return typeof t=="number"?{value:t,E3t_:!0}:{value:parseFloat(t),E3t_:!t.endsWith("%")}};var pT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{legend:{format:"${label}"},order:Xv.Hpt_,direction:zv.Tpt_,label:{location:Ov.Kz_,format:function(t,i){return i.toFixed(0)},textstyle:{font:"10pt Roboto",color:"#2A2727"},visible:!0},outsideline:{linestyle:new hl("lightgrey"),length:10,pad:5},mode:Jv.kpt_,depth3d:30,inclination3d:60,createselectedstyle:function(t){const i=t.hB_(),s=QT.ds_()/255,e=(1-s)*i.ds_()/255;return t.clone().setColor("rgba("+(s*QT.Is_()+e*i.Is_()>>0)+","+(s*QT.Cs_()+e*i.Cs_()>>0)+","+(s*QT.fs_()+e*i.fs_()>>0)+","+NA.round(s+e)+")")},startangle:0,sliceshift:{},series:{x:""},labels:null,colors:null,x:"50%",y:"50%",innerradius:25,outerradius:"50%"},!0));this.q2t_=UY.D2t_(t["series"]["x"],null);this._cx=ET(t["x"]);this._cy=ET(t["y"]);this.p3t_=t["colors"];this.Xq_=ET(t["innerradius"]);this.jq_=ET(t["outerradius"]);if(t["labels"]!=null){const i=t["labels"];t["label"]["format"]=t=>i(t,this.Q0t_.Smt_(t))}this.Q0t_=new db({label:t["label"],outsideline:t["outsideline"],direction:t["direction"],depth3d:t["depth3d"],piemode:t["mode"],inclination3d:t["inclination3d"],sliceshift:t["sliceshift"],startangle:t["startangle"],modellimitsmode:Pv.xpt_,createselectedstyle:t["createselectedstyle"],innerradius:25,outerradius:150,fillstyles:[]},{mode:Vv.cIt_,order:t["order"],values:[]});this.G1t_().GY_(this.Q0t_);this.initialize(t)}rvt_(t){super.rvt_(t);if(!this.T1t_()){this.Q0t_.setData({values:[]});this.vn_();return this}const i=this.g1t_(this.q2t_["data"],RY.X);this.Q0t_.setData({values:i.toArray(!1)});this.Q0t_.setOptions({fillstyles:i.toArray(!1).map(((t,i)=>il.BD_(this.p3t_!=null?this.p3t_(i):GA.dA_))),"selected-fillstyles":[]});this.L1t_();this.vn_();return this}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t}U1t_(t,i,s){s.indexOf(this.q2t_["data"])<0||this.rvt_(this.Cvt_())}Eq_(t){return this}o2t_(){const t=[],i=this.Q0t_.JV_()["label"]["format"];for(let s=0;s<this.Q0t_.Nmt_();s++){const e=this.Q0t_.Smt_(s);t.push({data:s.toString(),label:i!=null?i(e["label"],e["value"]):e["label"],value:e["value"],fillstyle:e["color"]})}return t}x1t_(){if(!this.T1t_())return;const t=this.g1t_(this.q2t_["data"],RY.X);t.getLength()!==this.Q0t_.Nmt_()&&this.Q0t_.setData({values:t.toArray(!1)})}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[this.q2t_["data"]]:[+t["data"]]});i.dt_({text:this.P1t_({"${x-series}":this.q2t_["data"],"${label}":t["label"],"${value}":t["value"]}),symbol:{alignment:dA.ne_,linestyle:null,fillstyle:t["fillstyle"],painter:cE,sizeisindevicespace:!0,width:16,height:16}});return i}H1t_(t){}vn_(t,i){super.vn_(t,i);const s=this.G1t_(),e=s.if_();if(e==null)return this;const A=s.$Y_(),n=s.lt_(),h=this._cx.E3t_?n.getX()+this._cx.value:A.getX()+A.Ie_()*this._cx.value/100,r=this._cy.E3t_?n.getY()+this._cy.value:A.getY()+A.Ts_()*this._cy.value/100,o=Math.min(A.Ie_(),A.Ts_()),l=this.jq_.E3t_?this.jq_.value:o*this.jq_.value/100,u=new mA(h-l,r-l,h+l,r+l);e.gI_(u,u);this.Q0t_.ht_(u);const a=this.Xq_.E3t_?this.Xq_.value:o*this.Xq_.value/100;this.Q0t_.setOptions({innerradius:Math.min(a,l),outerradius:l});return this}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=this.sd_()?t.uS_(this.sd_()):t,s=i.LR_();let e;if(s instanceof In){const t=s.Bt_().slice(),A=s.wt_().slice();i.Ji_().NI_(t,A,s.getSize());e=this.Q0t_.Gmt_(t,A)}else e=this.Q0t_.Gmt_(i.cR_());if(e.length>0){t.mO_(this);t.mO_(new jf(this,{[this.q2t_["data"]]:e}))}}F1t_(){return this.g1t_(this.q2t_["data"])!=null}_1t_(t){return null}n2t_(){return this.Q0t_}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).k9_(this.q2t_["data"],e)||[],h=this.J1t_(),r=this.Q0t_.JV_();for(let t=0,i=0;t<h.length;t++){let s;if(n[i]===t){h[t].Bd_(e);s=r["selected-fillstyles"][t];i++}else{h[t].Qd_(e);s=r["fillstyles"][t]}h[t].dt_({symbol:{fillstyle:s}})}e===Rl.__&&this.Q0t_.Rmt_(n)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(t["series"]!=null&&t["series"]["x"]!=null){this.q2t_=UY.D2t_(t["series"]["x"],this.q2t_);this.rvt_(this.Cvt_())}t["x"]!=null&&(this._cx=ET(t["x"]));t["y"]!=null&&(this._cy=ET(t["y"]));t["innerradius"]!=null&&(this.Xq_=ET(t["innerradius"]));t["outerradius"]!=null&&(this.jq_=ET(t["outerradius"]));const i={};t["label"]!=null&&(i["label"]=t["label"]);if(t["labels"]!=null){const s=t["labels"];i["label"]=i["label"]||{};i["label"]["format"]=t=>s(t,this.Q0t_.Smt_(t))}if(t["colors"]!=null){this.p3t_=t["colors"];const s=this.g1t_(this.q2t_["data"],RY.X);if(s!=null){i["selected-fillstyles"]=[];i["fillstyles"]=s.toArray(!1).map(((t,i)=>il.BD_(this.p3t_!=null?this.p3t_(i):GA.dA_)))}}t["order"]!=null&&this.Q0t_.setData({order:t["order"]});t["direction"]!=null&&(i["direction"]=t["direction"]);t["outsideline"]!=null&&(i["outsideline"]=t["outsideline"]);t["mode"]!=null&&(i["piemode"]=t["mode"]);t["depth3d"]!=null&&(i["depth3d"]=t["depth3d"]);t["inclination3d"]!=null&&(i["inclination3d"]=t["inclination3d"]);t["createselectedstyle"]!=null&&(i["createselectedstyle"]=t["createselectedstyle"]);t["startangle"]!=null&&(i["startangle"]=t["startangle"]);t["totalangle"]!=null&&(i["totalangle"]=t["totalangle"]);t["sliceshift"]!=null&&(i["sliceshift"]=t["sliceshift"]);Object.keys(i).length>0&&this.Q0t_.setOptions(i);this.notify(wY.pct_,this);this.vn_();return this}N_(){const t=super.N_(),i=this.Q0t_.JV_();t["x"]=this._cx.E3t_?this._cx.value:this._cx.value+"%";t["y"]=this._cy.E3t_?this._cy.value:this._cy.value+"%";t["innerradius"]=this.Xq_.E3t_?this.Xq_.value:this.Xq_.value+"%";t["outerradius"]=this.jq_.E3t_?this.jq_.value:this.jq_.value+"%";t["outsideline"]=i["outsideline"];t["totalangle"]=i["totalangle"];t["label"]=i["label"];t["sliceshift"]=i["sliceshift"];return t}initialize(t){this.Tmt_();this.IB_(this.h2t_(t["animation"]));return this}K1t_(t){return this.q2t_["data"]===t||RY.X===t?this.q2t_:null}B2t_(t){const i=this.Q0t_.JV_()["label"]["format"],s=super.B2t_(t);for(let t=0;t<s.length;++t){const e=s[t];if(e["index"]!=null){const t=this.K1t_(e["series"]["id"]),s=this.Q0t_.Smt_(e["index"]);e["series"]["name"]=(i!=null?i(s["label"],s["value"]):null)||e["series"]["name"]||s["label"];t&&s!=null&&s["color"]!=null&&(e["series"]["symbol"]={painter:cE,fillstyle:s["color"]})}}return s}};i=t([_s("geotoolkit.charts.DonutChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXREYXRhU291cmNlIjoicnZ0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwic2V0VmVydGljYWxGbGlwIjoiRXFfIiwiZ2V0U2VyaWVzRm9yTGVnZW5kIjoibzJ0XyIsIm9uRGF0YVVwZGF0ZWQiOiJ4MXRfIiwiY3JlYXRlTGVnZW5kSXRlbSI6InIydF8iLCJ1cGRhdGVTdGF0ZSI6InZuXyIsImdldEF4aXMiOiJfMXRfIiwib25TZWxlY3Rpb25TdGF0ZUNoYW5nZWQiOiJiMXRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldFByb3BlcnRpZXMiOiJOXyIsImdldFNlcmllc0luZm8iOiJLMXRfIiwiZ2V0VG9vbHRpcEl0ZW1zIjoiQjJ0XyJ9fX0g"),mT=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(new Hn)}bi_(t,i){return t["attributename"]==="offset"&&i instanceof pT}Yi_(t){const i=t.N_()["sliceshift"]["offsets"];for(let s=i.length;s<t.n2t_().Nmt_();s++)i.push(0);return i}apply(t){t.dt_({sliceshift:{offsets:this.Ti_()}})}};i=t([_s("geotoolkit.charts.animation.DonutChartOffsetEffect")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");const yT=/(\d+)(.+)/;var DT=function(){let i=class t extends be{process(t,i,s,e){let A,n=null,h=null;if(typeof t!="number"){A=yT.exec(t);if(A!=null){t=+A[1];n=A[2]}else t=+t}if(typeof i!="number"){A=yT.exec(i);if(A!=null){i=+A[1];h=A[2]}else i=+i}return n===null&&h===null?e(t,i):n!==null&&h!==null?e(t,i)+h:e(t,i)+(n||h)}clone(t){return t}};i=t([_s("geotoolkit.charts.animation.RadiusProcessor")],i);return i}(),MT=Ci(function(){let i=class t extends ke{constructor(t){super(t);this.Ki_(new DT)}bi_(t,i){return t["attributename"]==="radius"&&i instanceof pT}Yi_(t){return t.N_()["outerradius"]}apply(t){t.dt_({outerradius:this.Ti_()})}};i=t([_s("geotoolkit.charts.animation.DonutChartRadiusEffect")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg"),vT=Ci(function(){let i=class t extends ke{bi_(t,i){return t["attributename"]==="totalangle"&&i instanceof pT}Yi_(t){return t.N_()["totalangle"]}apply(t){t.dt_({totalangle:this.Ti_()})}};i=t([_s("geotoolkit.charts.animation.DonutChartTotalAngleEffect")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc0FwcGxpY2FibGUiOiJiaV8iLCJnZXRBbmltYXRlZFZhbHVlIjoiWWlfIn19fSAg");zn.Ai_().uf_(MT);zn.Ai_().uf_(mT);zn.Ai_().uf_(vT);var bT=function(){let i=class t extends pT{constructor(t){const i=t||{};i["innerradius"]=0;super(i)}};i=t([_s("geotoolkit.charts.PieChart")],i);return i}();var NT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"histogramchart-series"}));this.Q0t_=t["chart"];this.jC_(this.Q0t_)}render(t){}dt_(t){if((t=Es(t))==null)return this;t["linestyle"]===void 0&&t["fillstyle"]===void 0||this.Q0t_.qvt_({[this.XC_()]:{linestyle:t["linestyle"],fillstyle:t["fillstyle"]}});return this}N_(){const t=super.N_();t["fillstyle"]=this.Q0t_.fvt_();return t}m3t_(){return this.Q0t_}};i=t([_s("geotoolkit.charts.HistogramChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");const ST=t=>t.map((t=>t["data"])),GT=t=>Array.isArray(t)?t[0]:t,RT=t=>Array.isArray(t)?t[0]:t,kT=t=>new Map(t["series"]["y"].map((i=>{const s=il.BD_(i["fillstyle"]||GA.dA_);return[i["data"],new oN({name:i["name"],frequencytype:t["frequencytype"],accumulatedmode:t["accumulation"]?sN.Rv_:sN.kv_,bins:t["bins"],binspacing:t["binspacing"],linestyle:i["linestyle"]||{color:GA.fA_,pixelsnapmode:!0},fillstyle:s,highlightstyle:i["highlightstyle"]!=null?il.BD_(i["highlightstyle"]):s.clone(),visible:i["visible"]})]})));var FT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{series:{x:"",y:[]},frequencytype:iN.IMt_,legend:{format:"${x-series}"},tooltip:{format:"${series.symbol} ${series.name}: ${value}"},bins:null,accumulation:!1,binspacing:100,stacked:!1},!0));this.b2t_=[];this.B5t_=t["stacked"];this.y3t_=t["frequencytype"];this.G2t_=[];this.D3t_=ST(t["series"]["y"]);this.M3t_=kT(t);this.v3t_=new rD({bins:t["bins"]});this.G1t_().GY_(Array.from(this.M3t_,(([t,i])=>i))).on(rh.nC_,(()=>{if(this.G2t_.length===0||this.B5t_===!1){for(let t=1;t<this.G2t_.length;t++)this.M3t_.get(this.G2t_[t]).ebt_(null).Lvt_(null);return}let t=Number.MIN_VALUE;this.y3t_===iN.fMt_?t=1:this.M3t_.get(this.G2t_[0])._vt_()===sN.Rv_?this.G2t_.forEach((i=>{const s=this.M3t_.get(i);t=Math.max(t,s.Dvt_(s.cvt_()-1))})):this.G2t_.forEach((i=>{t=Math.max(t,this.M3t_.get(i).yvt_())}));t=this.t2t_(RY.Y)===DY.Ay_?Math.log10(t):t;this.M3t_.get(this.G2t_[0]).Lvt_(t);for(let i=1;i<this.G2t_.length;i++)this.M3t_.get(this.G2t_[i]).ebt_(this.M3t_.get(this.G2t_[i-1]).Abt_()).Lvt_(t)}));this.Eq_(!0);this.initialize(t)}rvt_(t){super.rvt_(t);if(!this.T1t_()||this.G2t_.length===0){this.M3t_.forEach((t=>t.setData([])));return this}const i=this.G2t_.map((t=>this.g1t_(t,RY.X)));this.G2t_.forEach(((t,s)=>{this.M3t_.get(t).setData(i[s].toArray(!1)).setOptions({orientation:this.KH_()===EY.X_||this.KH_()===EY.z_?fg.ux_:fg.ax_})}));this.b3t_(!0);this.v3t_.Wut_(this.M3t_.get(this.G2t_[0]).cvt_());return this}k1t_(){if(this.Cvt_()!=null)for(let t=0;t<this.D3t_.length;t++){const i=this.D3t_[t];if(Array.isArray(i)){const s=this.M3t_.get(i);this.G2t_[t]=this.Cvt_().l1t_(i,this.R1t_());if(s!=null){this.M3t_.delete(i);this.M3t_.set(this.G2t_[t],s)}}else this.G2t_[t]=i;this.b2t_[t]!=null&&this.b2t_[t].JC_(this.G2t_[t])}}U1t_(t,i,s){this.G2t_.every((t=>s.indexOf(t)<0))||this.rvt_(this.Cvt_())}Y1t_(t,i,s){t!==wY.Mct_&&t!==wY.Sct_||this.notify(wY.pct_,this)}bB_(t,i){this.b2t_.forEach((s=>t(s,i)))}$1t_(t,i){super.$1t_(t,i);switch(t){case RY.X:this.v3t_.Yx_(i===DY.Ay_?(t,i,s,e,A,n)=>NA.round(Math.pow(10,n))+"":null);return this;case RY.Y:this.M3t_.forEach((t=>t.setOptions({histogrammode:i===DY.Ay_?eN.Ay_:eN.Dt_})));this.b3t_()}return this}K1t_(t){if(t===RY.Y)return this.G2t_.map((t=>t!==RY.Y?this.K1t_(t):null)).filter((t=>t!=null));const i=this.G2t_.find((i=>i===t)),s=i?this.M3t_.get(i):null;return i?{data:i,name:s?s.dn_():"",linestyle:s?s.gt_():null,fillstyle:s?s.ct_():null}:null}Q2t_(t,i){return{painter:tp,fillstyle:Array.isArray(t["fillstyle"])?t["fillstyle"][0]:t["fillstyle"],linestyle:Array.isArray(t["linestyle"])?t["linestyle"][0]:t["linestyle"]}}w2t_(t,i){const s=super.w2t_(t,i);if(i==null)return s;const e=this.M3t_.get(t),A=e.Rvt_([i])[0],n=e.vvt_()[A];s["index"]=n["binnumber"];s["value"]=n["frequency"];return s}A2t_(t){return t===RY.X?this.v3t_:null}F1t_(){const t=undefined;if(this.Cvt_()==null)return!1;for(let t=0;t<this.G2t_.length;t++)if(this.g1t_(this.G2t_[t])!=null)return!0;return!1}Lq_(t){let i=Number.MAX_VALUE,s=Number.MIN_VALUE;this.G2t_.forEach((t=>{const e=this.M3t_.get(t);i=Math.min(i,e.Em_());s=Math.max(s,e.pm_())}));super.Lq_(t);const e=undefined;this.KH_()===EY.X_||this.KH_()===EY.z_?this.M3t_.forEach((i=>i.Qvt_(t.getY(),t.pe_()))):this.M3t_.forEach((i=>i.Qvt_(t.getX(),t.Qe_())));this.b3t_(!0);return this}b3t_(t=!1){if(!this.T1t_()||this.G2t_.length===0){this.W1t_(RY.X,0,1);this.W1t_(RY.Y,0,1);return}let i=0,s=Number.MIN_VALUE;const e=this.t2t_(RY.Y)===DY.Ay_?Math.log10:t=>t,A=this.G2t_.reduce(((t,i)=>this.M3t_.get(i).rt_().union(t)),this.M3t_.get(this.G2t_[0]).rt_());switch(this.y3t_){case iN.fMt_:i=e(1);s=i;break;case iN.CMt_:if(this.M3t_.get(this.G2t_[0])._vt_()===sN.Rv_){this.G2t_.forEach((t=>{i+=this.M3t_.get(t).bvt_()}));i=e(i);s=i}else{this.G2t_.forEach((t=>{const e=this.M3t_.get(t);i+=e.bvt_();s=Math.max(s,e.yvt_())}));i=e(i);s=e(s)}break;default:this.M3t_.get(this.G2t_[0])._vt_()===sN.Rv_?this.G2t_.forEach((t=>{const e=this.M3t_.get(t);i+=e.Dvt_(this.M3t_.get(t).cvt_()-1);s=Math.max(s,e.Dvt_(this.M3t_.get(t).cvt_()-1))})):this.G2t_.forEach((t=>{const e=this.M3t_.get(t);i+=e.yvt_();s=Math.max(s,e.yvt_())}));i=e(i+1);s=e(s)}if(this.KH_()===EY.X_||this.KH_()===EY.z_){this.W1t_(RY.X,0,i);this.W1t_(RY.Y,A.getY(),A.pe_());this.M3t_.forEach((t=>{t.ht_(new mA(0,A.getY(),s,A.pe_()))}))}else{this.W1t_(RY.X,A.getX(),A.Qe_());this.W1t_(RY.Y,0,i);this.M3t_.forEach((t=>{t.ht_(new mA(A.getX(),0,A.Qe_(),s))}))}t===!1&&this.notify(cT.L5t_,this)}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(Array.isArray(t["series"])&&t["series"]["y"]!=null){this.D3t_=ST(t["series"]["y"]);this.k1t_();this.M3t_.forEach((t=>t.dispose()));this.M3t_=kT(t);this.rvt_(this.Cvt_());this.G2t_.forEach(((i,s)=>this.M3t_.get(i).nf_(t["series"]["y"][s]["visible"]).rB_(GT(t["series"]["y"][s]["linestyle"])||{color:GA.fA_,pixelsnapmode:!0}).iQ_(RT(t["series"]["y"][s]["fillstyle"])||GA.dA_)))}if(t["frequencytype"]!=null){this.y3t_=t["frequencytype"];this.M3t_.forEach((t=>t.Xvt_(this.y3t_)));this.b3t_()}if(t["bins"]!=null){this.M3t_.forEach((i=>i.Wut_(t["bins"])));this.G2t_.length>0&&this.M3t_.get(this.G2t_[0])!=null&&this.v3t_.Wut_(this.M3t_.get(this.G2t_[0]).cvt_())}if(t["accumulation"]!=null){this.M3t_.forEach((i=>i.Zvt_(t["accumulation"]?sN.Rv_:sN.kv_)));this.b3t_()}t["binspacing"]!=null&&this.M3t_.forEach((i=>i.Ovt_(t["binspacing"])));return this}N_(){const t=super.N_();t["frequencytype"]=this.y3t_;t["series"]={y:[]};if(this.G2t_.length===0)return t;let i=this.M3t_.get(this.G2t_[0]);t["bins"]=i.cvt_();t["binspacing"]=i.Vvt_();t["accumulation"]=i._vt_()===sN.Rv_;t["series"]["y"]=this.G2t_.map((t=>{i=this.M3t_.get(t);return{data:t,linestyle:i.gt_(),fillstyle:i.ct_(),visible:i.$C_()}}));return t}o2t_(){const t=undefined;return(this.G2t_.length>0?this.G2t_:this.D3t_).map((t=>{const i=this.M3t_.get(t);return{data:typeof t=="string"?t:"",name:i?i.dn_():"",linestyle:i?i.gt_():null,fillstyle:i&&i.ct_()?i.ct_().clone():null}}))}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});i.dt_({text:this.P1t_({"${x-series}":this.q1t_(t),"${value}":""}),textstyle:{font:"bold 10px Arial",baseline:ka.mk_},symbol:{alignment:dA.ne_,linestyle:Array.isArray(t["linestyle"])?null:t["linestyle"],fillstyle:Array.isArray(t["fillstyle"])?null:t["fillstyle"],painter:tp,sizeisindevicespace:!0,width:16,height:16}});return i}H1t_(t){}b1t_(t,i,s){if(this.Cvt_()==null)return;const e=s["state"],A=undefined,n=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e);for(let t=0;t<this.G2t_.length;t++){let i=n[this.G2t_[t]];const s=this.M3t_.get(this.G2t_[t]);if(s==null)continue;i!=null&&(i=i.length>0?s.Rvt_(i):s.vvt_().map((t=>t["binnumber"])));s.uwt_({state:e,samples:i});let A=this.b2t_.find((t=>t.XC_()===e&&t.m3t_()===s));if(!A){A=new NT({chart:s}).JC_(e);this.b2t_.push(A)}if(i){A.Bd_(e);this.J1t_().forEach((t=>t.Bd_(e)))}else{A.Qd_(e);this.J1t_().forEach((t=>t.Qd_(e)))}}}l2t_(){return this.b2t_}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=this.sd_()!=null?t.uS_(this.sd_()):t,s=i.LR_(),e=s instanceof In?s:i.rS_(),A={};for(let t=0;t<this.G2t_.length;t++){const i=this.G2t_[t],s=this.M3t_.get(i),n=s.$X_(e)["bins"];for(let t=0;t<n.length;t++){const e=s.Gvt_(n[t]["binnumber"]);for(let t=0;t<e.length;t++)UY.Z1t_(A,i,e[t])}}if(Object.keys(A).length>0){t.mO_(this);t.mO_(new jf(this,A))}}x1t_(){if(this.T1t_()){this.M3t_.forEach(((t,i)=>{if(typeof i!="string")return;const s=this.g1t_(i,RY.X);t.setData(s?s.toArray(!1):null)}));this.b3t_(!0)}}};i=t([Zs(qh),_s("geotoolkit.charts.HistogramChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXREYXRhU291cmNlIjoicnZ0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwib25EYXRhVmFsdWVzQ2hhbmdlZCI6IlkxdF8iLCJlbnVtZXJhdGVOb2RlcyI6ImJCXyIsInNldEF4aXNEYXRhVHlwZSI6IiQxdF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImNyZWF0ZVRvb2x0aXBTeW1ib2wiOiJRMnRfIiwiZ2V0RGVzaXJlZFRpY2tHZW5lcmF0b3IiOiJBMnRfIiwic2V0TW9kZWxMaW1pdHMiOiJMcV8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwiZ2V0U2VyaWVzRm9yTGVnZW5kIjoibzJ0XyIsImNyZWF0ZUxlZ2VuZEl0ZW0iOiJyMnRfIiwib25TZWxlY3Rpb25TdGF0ZUNoYW5nZWQiOiJiMXRfIiwiZ2V0Q3NzU2VyaWVzIjoibDJ0XyIsIm9uRGF0YVVwZGF0ZWQiOiJ4MXRfIn19fSAg");var xT=Ci(function(){let i=class t extends ch{constructor(t){super(t=qi(t,{cssclass:"tornadochart-series"}));this.Q0t_=t["chart"];this.eat_=t["name"];this.jC_(this.Q0t_)}render(t){}N3t_(t){this.eat_=t;return this}dt_(t){if((t=Es(t))==null)return this;t["linestyle"]==null&&t["fillstyle"]==null||this.Q0t_.S3t_(this.eat_,t["linestyle"],t["fillstyle"]);return this}N_(){const t=super.N_(),i=this.Q0t_.N_();if(i["series"]!=null){const s=i["series"];if(s["left"]!=null){const i=s["left"];if(i["data"]===this.eat_){t["linestyle"]=i["linestyle"];t["fillstyle"]=i["fillstyle"];return t}}if(s["right"]!=null){const i=s["right"];if(i["data"]===this.eat_){t["linestyle"]=i["linestyle"];t["fillstyle"]=i["fillstyle"];return t}}}return t}};i=t([_s("geotoolkit.charts.TornadoChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var LT=Ci({wHt_:"maxtomin",QHt_:"mintomax",W_:"none"},2,"eyJNYXhUb01pbiI6IndIdF8iLCJNaW5Ub01heCI6IlFIdF8iLCJOb25lIjoiV18ifSAg"),UT=Ci({Kz_:"Inside",Hz_:"Outside",ne_:"Center"},2,"eyJJbnNpZGUiOiJLel8iLCJPdXRzaWRlIjoiSHpfIiwiQ2VudGVyIjoibmVfIn0g"),YT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{legend:{format:"${label}"},leftfillstyle:GA.pA_,rightfillstyle:GA.bA_},!0));this.b2t_=[];this.G3t_="";this.R3t_="";this._$_=null;this.k3t_=1;this.F3t_="";this.x3t_="";this.L3t_=null;this.U3t_=null;this.Q0t_=new ZR(this.p2t_(t));const i=this.Q0t_.rt_();this.Q0t_.ht_(new mA(i.we_(),-.5,i.Qe_(),this.k3t_-.5));this.Y3t_();this.G1t_().GY_(this.Q0t_);this.initialize(t)}z1t_(t){switch(t){case RY.X:const t=this.Q0t_.rt_(),i=this.L3t_!==null?-this.L3t_:t.we_(),s=this.U3t_!==null?this.U3t_:t.Qe_();return new fA(i,s);case RY.Y:return new fA(-.5,this.k3t_-.5)}return super.z1t_(t)}o2t_(){return[{visible:!0,name:this.T3t_!=null?this.T3t_:this.F3t_,data:this.F3t_,linestyle:this.Q0t_.VHt_(),fillstyle:this.Q0t_.WHt_()},{visible:!0,name:this.K3t_!=null?this.K3t_:this.x3t_,data:this.x3t_,linestyle:this.Q0t_.PHt_(),fillstyle:this.Q0t_.OHt_()}]}r2t_(t,i){i==null&&(i=new TY(this,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.setData({[t["data"]]:[]});i.dt_({text:this.P1t_({"${label}":this.q1t_(t)}),symbol:{alignment:dA.ne_,linestyle:t["linestyle"],fillstyle:t["fillstyle"],painter:tp,sizeisindevicespace:!0,width:16,height:16}});return i}Q2t_(t,i){return t["data"]===this.F3t_?{painter:cE,linestyle:this.Q0t_.VHt_(),fillstyle:this.Q0t_.WHt_()}:t["data"]===this.x3t_?{painter:cE,linestyle:this.Q0t_.PHt_(),fillstyle:this.Q0t_.OHt_()}:null}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;const i=[];t.QO_((t=>{const s=t.zC_();s!=null&&i.indexOf(s)<0&&i.push(s)}));super.render(t);t.EO_();const s={};for(const t of i)t.left!=null?UY.Z1t_(s,this.F3t_,t.left):t.right!=null&&UY.Z1t_(s,this.x3t_,t.right);Object.keys(s).length>0&&t.mO_(new jf(this,s))}x1t_(){this.T1t_()}K1t_(t){return t===this.F3t_?{data:this.F3t_,name:this.T3t_}:t===this.x3t_?{data:this.x3t_,name:this.K3t_}:null}F1t_(){return this.g1t_(this.F3t_)!=null||this.g1t_(this.x3t_)!=null}rvt_(t){super.rvt_(t);if(!this.T1t_()){this.Q0t_.setData({});return this}const i={};if(t!=null){const t=this.g1t_(this.F3t_,DY.X0t_),s=this.g1t_(this.x3t_,DY.X0t_),e=this.g1t_(this.x3t_);t!=null&&(i["left"]=t.toArray());s!=null&&(i["right"]=s.toArray());this._$_!==null&&(this.k3t_=e.getLength())}this.Q0t_.setData(i);const s=this.Q0t_.rt_();this.Q0t_.ht_(new mA(s.we_(),-.5,s.Qe_(),this.k3t_-.5));return this}k1t_(){if(this.Cvt_()!=null&&this.F3t_!=null){this.F3t_=Array.isArray(this.G3t_)?this.Cvt_().l1t_(this.G3t_,this.R1t_()):this.G3t_;this.x3t_=Array.isArray(this.R3t_)?this.Cvt_().l1t_(this.R3t_,this.R1t_()):this.R3t_;this.b2t_[0].N3t_(this.F3t_).JC_(this.F3t_);this.b2t_[1].N3t_(this.x3t_).JC_(this.x3t_)}}U1t_(t,i,s){s.every((t=>t!==this.F3t_&&t!==this.x3t_))||this.rvt_(this.Cvt_())}b1t_(t,i,s){super.b1t_(t,i,s);if(s["state"]!==Rl.__)return;const e=i.getSelection(Rl.__)||{},A=this.Q0t_.getData();let n=e[this.F3t_];n!=null&&n.length===0&&(n=A.map((t=>t.index)));let h=e[this.x3t_];h!=null&&h.length===0&&(h=A.map((t=>t.index)));this.Q0t_.vEt_(n||[],h||[])}H1t_(t){const i=this.o2t_();this.J1t_().forEach(((s,e)=>{const A=""+s.XC_(),n=i[e];s.dt_({text:this.P1t_({"${label}":this.q1t_(n),"${value}":t!=null&&t[A]!=null&&t[A].length===1?this.V1t_(this.O1t_(n["data"],t[A][0])):""})})}))}N_(){const t=super.N_(),i={},s={};this.L3t_!=null&&(i["limit"]=this.L3t_);this.U3t_!=null&&(s["limit"]=this.U3t_);this.F3t_!==""&&(i["data"]=this.F3t_);this.x3t_!==""&&(s["data"]=this.x3t_);const e=this.Q0t_.N_();e["linestyle"]!=null&&(t["linestyle"]=e["linestyle"]);e["leftlinestyle"]!=null&&(i["linestyle"]=e["leftlinestyle"]);e["rightlinestyle"]!=null&&(s["linestyle"]=e["rightlinestyle"]);e["leftfillstyle"]!=null&&(i["fillstyle"]=e["leftfillstyle"]);e["rightfillstyle"]!=null&&(s["fillstyle"]=e["rightfillstyle"]);e["lefttextstyle"]!=null&&(i["textstyle"]=e["lefttextstyle"]);e["righttextstyle"]!=null&&(s["textstyle"]=e["righttextstyle"]);e["labelposition"]!=null&&(t["labelposition"]=e["labelposition"]);e["autogradient"]!=null&&(t["autogradient"]=e["autogradient"]);e["drawlabels"]!=null&&(t["drawlabels"]=e["drawlabels"]);e["spacing"]!=null&&(t["spacing"]=e["spacing"]);e["spacing"]!=null&&(t["spacing"]=e["spacing"]);e["sort"]!=null&&(t["sort"]=e["sort"]);t["series"]={left:i,right:s};this._$_!=null&&(t["series"]["labels"]=this._$_);return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.Q0t_.dt_(this.p2t_(t));const i=this.Q0t_.rt_();this.Q0t_.ht_(new mA(i.we_(),-.5,i.Qe_(),this.k3t_-.5));return this}p2t_(t){const i={data:{}},s=t["series"],e=s!=null?s["left"]:{},A=s!=null?s["right"]:{};this.G3t_=e["data"]!=null?e["data"]:this.G3t_;typeof this.G3t_=="string"?this.F3t_=this.G3t_:this.F3t_=this.Cvt_()?this.Cvt_().l1t_(this.G3t_,this.R1t_()):"";this.R3t_=A["data"]!=null?A["data"]:this.R3t_;typeof this.R3t_=="string"?this.x3t_=this.R3t_:this.x3t_=this.Cvt_()?this.Cvt_().l1t_(this.R3t_,this.R1t_()):"";this._$_=s["labels"]!=null?s["labels"]:"";this.T3t_=e["name"];this.K3t_=A["name"];const n=undefined;if(this.Cvt_()!=null){const t=this.g1t_(this.F3t_,DY.X0t_),s=this.g1t_(this.x3t_,DY.X0t_),e=this.g1t_(this.x3t_),A={};if(t!=null){this.T3t_!=null&&(this.T3t_=t.dn_());A["left"]=t.toArray()}if(s!=null){this.K3t_!=null&&(this.K3t_=s.dn_());A["right"]=s.toArray()}e!=null&&(this.k3t_=e.getLength());i["data"]=A}this.L3t_=e["limit"]!=null?e["limit"]:null;this.U3t_=A["limit"]!=null?A["limit"]:null;e["linestyle"]!=null&&(i["leftlinestyle"]=e["linestyle"]);A["linestyle"]!=null&&(i["rightlinestyle"]=A["linestyle"]);e["fillstyle"]!=null&&(i["leftfillstyle"]=e["fillstyle"]);A["fillstyle"]!=null&&(i["rightfillstyle"]=A["fillstyle"]);e["textstyle"]!=null&&(i["lefttextstyle"]=e["textstyle"]);A["textstyle"]!=null&&(i["righttextstyle"]=A["textstyle"]);t["linestyle"]!=null&&(i["linestyle"]=t["linestyle"]);t["createselectedstyle"]!=null&&(i["createselectedstyle"]=t["createselectedstyle"]);t["labelposition"]!=null&&(i["labelposition"]=t["labelposition"]);t["autogradient"]!=null&&(i["autogradient"]=t["autogradient"]);t["drawlabels"]!=null&&(i["drawlabels"]=t["drawlabels"]);t["spacing"]!=null&&(i["spacing"]=t["spacing"]);t["sort"]!=null&&(i["sort"]=t["sort"]);return i}Y3t_(){this.b2t_=[];this.b2t_.push(new xT({name:this.F3t_,chart:this}).N3t_(this.F3t_).JC_(this.F3t_));this.b2t_.push(new xT({name:this.x3t_,chart:this}).N3t_(this.x3t_).JC_(this.x3t_))}l2t_(){return this.b2t_}S3t_(t,i,s){t!==this.F3t_?t!==this.x3t_||this.Q0t_.dt_({rightlinestyle:i,rightfillstyle:s}):this.Q0t_.dt_({leftlinestyle:i,leftfillstyle:s})}};i=t([_s("geotoolkit.charts.TornadoChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREZXNpcmVkTW9kZWxSYW5nZSI6InoxdF8iLCJnZXRTZXJpZXNGb3JMZWdlbmQiOiJvMnRfIiwiY3JlYXRlTGVnZW5kSXRlbSI6InIydF8iLCJjcmVhdGVUb29sdGlwU3ltYm9sIjoiUTJ0XyIsIm9uRGF0YVVwZGF0ZWQiOiJ4MXRfIiwiZ2V0U2VyaWVzSW5mbyI6IksxdF8iLCJzZXREYXRhU291cmNlIjoicnZ0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwib25TZWxlY3Rpb25TdGF0ZUNoYW5nZWQiOiJiMXRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyIsImdldENzc1NlcmllcyI6ImwydF8ifX19");var TT=Ci(function(){let i=class t extends ch{constructor(){super({cssclass:"heatmapchart-series"})}render(t){}dt_(t){if((t=Es(t))==null)return this;t["linestyle"]!==void 0&&(this.CS_=hl.Wi_(t["linestyle"]));t["fillstyle"]!==void 0&&(this.hq_=il.BD_(t["fillstyle"]));return this}N_(){const t=super.N_();t["linestyle"]=this.CS_;t["fillstyle"]=this.hq_;return t}};i=t([_s("geotoolkit.charts.HeatMapChartSeries")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");var KT=function(){let i=class t extends TQ{constructor(){super();this.yIt_=new dp;this.H3t_=[]}setData(t,i,s,e,A){let n=this.H3t_.filter((i=>i.sNt_.XC_()===t.XC_()))[0];if(!n){n={sNt_:t,D9_:new Cm};this.H3t_.push(n)}const h=Math.min(i.length,s.length);n.D9_.clear();for(let t=0;t<h;++t)n.D9_.add({ix:i[t],iy:s[t]});this._dx=e;this._dy=A;this.td_(void 0,!0);return this}render(t){this.H3t_.forEach((i=>{const s=i.sNt_.N_();s["linestyle"]!==void 0&&this.yIt_.rB_(s["linestyle"]);s["fillstyle"]!==void 0&&this.yIt_.iQ_(s["fillstyle"]);for(let s=0;s<i.D9_.jv_();++s){const e=i.D9_.get(s),A=e["ix"]+this._dx,n=e["iy"]+this._dy;this.yIt_.ce_(A,n,A+1,n+1);this.yIt_.render(t)}}))}};i=t([_s("geotoolkit.charts.HeatMapHighlightLayer")],i);return i}();var qT=Ci(function(){let i=class t extends UY{constructor(t){super(t);this.b2t_=[];this.q3t_=0;this.Q0t_=new _b(this.J3t_(t));this.q2t_=UY.D2t_(t["series"]["x"],null);this.G2t_=UY.D2t_(t["series"]["y"],null);this.G5t_=UY.D2t_(t["series"]["z"],null);this.q3t_=t["rowsize"]||0;this.aNt_=new mA;this.G1t_().GY_(this.Q0t_);this.P3t_=new KT;this.x8_().GY_(this.P3t_);this.initialize(t)}yNt_(){let t=0,i=1,s=0,e=1;const A=this.g1t_(this.q2t_["data"],RY.X);if(A!=null){t=A.nA_();i=A.hA_()}const n=this.g1t_(this.G2t_["data"],RY.Y);if(n!=null){s=n.nA_();e=n.hA_()}this.W1t_(RY.X,t,i);this.W1t_(RY.Y,s,e);const h=this.g1t_(this.G5t_["data"],RY.Z);h!=null&&this.W1t_(RY.Z,h.nA_(),h.hA_());return this}rvt_(t){super.rvt_(t);if(!this.T1t_()){this.Q0t_.setData(new qb);return this}const i=this.g1t_(this.q2t_["data"]),s=this.g1t_(this.G5t_["data"],DY.X0t_).toArray(!1),e=this.q3t_>0?this.q3t_:i.getLength(),A=new HT(s,e);this.Q0t_.setData(A);this.yNt_();return this}U1t_(t,i,s){s.every((t=>t!==this.q2t_["data"]&&t!==this.G2t_["data"]&&t!==this.G5t_["data"]))||this.rvt_(this.Cvt_())}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);if(t["series"]!=null){t["series"]["x"]!==void 0&&(this.q2t_=UY.D2t_(t["series"]["x"],null));t["series"]["y"]!==void 0&&(this.G2t_=UY.D2t_(t["series"]["y"],null));t["series"]["z"]!==void 0&&(this.G5t_=UY.D2t_(t["series"]["z"],null))}typeof t["rowsize"]=="number"&&(this.q3t_=t["rowsize"]);this.Q0t_.dt_(this.J3t_(t));return this}J3t_(t){const i={};t["labels"]!=null&&(i["labels"]=t["labels"]);typeof t["colplottype"]=="string"&&(i["colplottype"]=t["colplottype"]);typeof t["rowplottype"]=="string"&&(i["rowplottype"]=t["rowplottype"]);typeof t["min"]=="number"&&(i["min"]=t["min"]);typeof t["max"]=="number"&&(i["max"]=t["max"]);(typeof t["offsetx"]=="number"||Array.isArray(t["offsetx"]))&&(i["offsetx"]=t["offsetx"]);(typeof t["offsety"]=="number"||Array.isArray(t["offsety"]))&&(i["offsety"]=t["offsety"]);t["colorprovider"]!==void 0&&(i["colorprovider"]=t["colorprovider"]);return i}Lq_(t){super.Lq_(t);this.Q0t_.ht_(t);return this}V3t_(t){const i=Number(t);return Number.isFinite(i)?i.toFixed(2):t}E2t_(t){const i=this.g2t_();if(i!=null)return i(t,this);const s=t[this.q2t_["data"]],e=t[this.G2t_["data"]];if(s==null||e==null)return null;const A=[],n=this.g1t_(this.q2t_["data"]),h=this.q3t_>0?this.q3t_:n.getLength();if(s.length>0){const t=this.O1t_(this.q2t_["data"],s[0]);A.push(this.q1t_(this.q2t_)+": "+this.V3t_(t));const i=this.O1t_(this.G2t_["data"],e[0]);A.push(this.q1t_(this.G2t_)+": "+this.V3t_(i));const n=this.O1t_(this.G5t_["data"],s[0]+h*e[0]);A.push(this.G5t_+": "+this.V3t_(n))}return A.join("<br />")}render(t){if(!t.tk_()){super.render(t);return}if(!this.T1t_())return;super.render(t);const i=this.Q0t_.getSelection();if(!i||i.length===0)return;const s=this.g1t_(this.q2t_["data"]),e=this.q3t_>0?this.q3t_:s.getLength(),A={};i.forEach((t=>{UY.Z1t_(A,this.q2t_["data"],t.getX());UY.Z1t_(A,this.G2t_["data"],t.getY());UY.Z1t_(A,this.G5t_["data"],t.getX()+e*t.getY())}));t.mO_(new jf(this,A))}N_(){const t=super.N_(),i=this.Q0t_.N_();t["series"]={x:this.q2t_,y:this.G2t_,z:this.G5t_};t["labels"]=i["labels"];t["min"]=i["min"];t["max"]=i["max"];t["rowsize"]=this.q3t_;t["colplottype"]=i["colplottype"];t["rowplottype"]=i["rowplottype"];t["offsetx"]=i["offsetx"];t["offsety"]=i["offsety"];return t}setOrientation(t){super.setOrientation(t);if(t===EY.JQ_||t===EY.Top)return this;const i=this.q2t_;this.q2t_=this.G2t_;this.G2t_=i;const s=this.t2t_(RY.X);this.$1t_(RY.X,this.t2t_(RY.Y));this.$1t_(RY.Y,s);return this}n2t_(){return this.Q0t_}x1t_(){this.T1t_()&&this.yNt_()}O3t_(){return this.P3t_}b1t_(t,i,s){if(!this.T1t_())return;const e=s["state"],A=this.O3t_();if(A==null)return;const n=undefined,h=this.Cvt_().getSelection(this.e2t_(),this.R1t_()).getSelection(e),r=this.g1t_(this.q2t_["data"]),o=this.q3t_>0?this.q3t_:r.getLength(),l=[],u=[],a=h[this.G5t_["data"]]||[];for(let t=0;t<a.length;t++){l.push(a[t]%o);u.push(a[t]/o<<0)}let g=this.b2t_.find((t=>t.XC_()===e));if(!g){g=(new TT).JC_(e);this.b2t_.push(g);this.G1t_().GY_(g)}const c=undefined;Math.min(l.length,u.length)>0?g.Bd_(e):g.Qd_(e);const I=this.Q0t_.rt_().we_(),f=this.Q0t_.rt_().Ee_(),C=this.Q0t_.sMt_()["offsetx"],d=this.Q0t_.sMt_()["offsety"];A.setData(g,l,u,I-C,f-d)}l2t_(){return this.b2t_}K1t_(t){switch(t){case RY.X:case this.q2t_["data"]:return this.q2t_;case RY.Y:case this.G2t_["data"]:return this.G2t_;case RY.Z:case this.G5t_["data"]:return this.G5t_}return null}y2t_(t,i){return t===this.G5t_["data"]?this.O1t_(this.G5t_["data"],i):null}F1t_(){return this.g1t_(this.q2t_["data"])!=null&&this.g1t_(this.G2t_["data"])!=null&&this.g1t_(this.G5t_["data"])!=null}};i=t([_s("geotoolkit.charts.HeatMapChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXREYXRhU291cmNlIjoicnZ0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwic2V0UHJvcGVydGllcyI6ImR0XyIsInNldE1vZGVsTGltaXRzIjoiTHFfIiwidG9vbHRpcEZvcm1hdCI6IkUydF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJvbkRhdGFVcGRhdGVkIjoieDF0XyIsIm9uU2VsZWN0aW9uU3RhdGVDaGFuZ2VkIjoiYjF0XyIsImdldENzc1NlcmllcyI6ImwydF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsImdldENvbG9yVmFsdWUiOiJ5MnRfIn19fSAg");var JT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{fillstyle:"rgba(255, 0, 0, 0.1)",linestyle:"rgba(255, 0, 0, 0.5)"},!0));this.Q0t_=new qv(this.W3t_(t));this.G1t_().GY_(this.Q0t_);this.initialize(t)}yNt_(){const t=this.g1t_(this.q2t_["data"],RY.X),i=this.g1t_(this.G2t_["data"],RY.Y);if(t!=null&&i!=null){this.W1t_(RY.X,t.nA_(),t.hA_());this.W1t_(RY.Y,i.nA_(),i.hA_())}else{this.W1t_(RY.X,0,1);this.W1t_(RY.Y,0,1)}return this}Lq_(t){super.Lq_(t);this.Q0t_.vpt_().Lq_(t);return this}setOrientation(t){super.setOrientation(t);if(t===EY.JQ_||t===EY.Top)return this;const i=this.q2t_;this.q2t_=this.G2t_;this.G2t_=i;const s=this.t2t_(RY.X);this.$1t_(RY.X,this.t2t_(RY.Y));this.$1t_(RY.Y,s);return this}K1t_(t){switch(t){case RY.X:case this.q2t_["data"]:return this.q2t_;case RY.Y:case this.G2t_["data"]:return this.G2t_}return null}n2t_(){return this.Q0t_}x1t_(){this.T1t_()&&this.yNt_()}F1t_(){return this.g1t_(this.q2t_["data"])!=null&&this.g1t_(this.G2t_["data"])!=null}rvt_(t){super.rvt_(t);if(!this.T1t_()){this.Q0t_.dt_({grid:{x:[],y:[]}});return this}const i=this.g1t_(this.q2t_["data"],RY.X),s=this.g1t_(this.G2t_["data"],RY.Y);this.Q0t_.dt_({grid:{x:i.toArray(!1),y:s.toArray(!1)}});this.yNt_();return this}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;const i=this.G2t_["values"];this.G2t_["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i}U1t_(t,i,s){s.every((t=>t!==this.q2t_["data"]&&t!==this.G2t_["data"]))||this.rvt_(this.Cvt_())}N_(){const t=super.N_(),i=this.Q0t_.N_(),s=i["grid"],e={};e["dimension"]=s.npt_();e["cellsize"]=s.opt_();e["bandwidth"]=s.upt_();e["thresholds"]=s.KEt_();e["modellimits"]=s.rt_();t["series"]={x:UY.M2t_(this.q2t_),y:UY.M2t_(this.G2t_)};t["grid"]=e;i["bandspacing"]!=null&&(t["bandspacing"]=i["bandspacing"]);i["bandopacity"]!=null&&(t["bandopacity"]=i["bandopacity"]);i["colorprovider"]!=null&&(t["colorprovider"]=i["colorprovider"]);i["geometry"]!=null&&(t["geometry"]=i["geometry"]);i["linestyle"]!=null&&(t["linestyle"]=i["linestyle"]);i["fillstyle"]!=null&&(t["fillstyle"]=i["fillstyle"]);return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.Q0t_.dt_(this.W3t_(t));return this}W3t_(t){if(t["series"]!=null){const i=t["series"];i["x"]!=null&&(this.q2t_=UY.D2t_(i["x"],this.q2t_));i["y"]!=null&&(this.G2t_=UY.D2t_(i["y"],this.G2t_));super.rvt_(this.Cvt_())}const i={};if(this.T1t_()){i["x"]=this.g1t_(this.q2t_["data"],RY.X).toArray(!1);i["y"]=this.g1t_(this.G2t_["data"],RY.Y).toArray(!1);this.yNt_()}else{i["x"]=[];i["y"]=[]}if(t["grid"]!=null){const s=t["grid"];s["dimension"]!=null&&(i["dimension"]=s["dimension"]);s["cellsize"]!=null&&(i["cellsize"]=s["cellsize"]);s["bandwidth"]!=null&&(i["bandwidth"]=s["bandwidth"]);s["thresholds"]!=null&&(i["thresholds"]=s["thresholds"]);s["modellimits"]!=null&&(i["modellimits"]=s["modellimits"])}const s={};s["grid"]=i;t["bandspacing"]!=null&&(s["bandspacing"]=t["bandspacing"]);t["bandopacity"]!=null&&(s["bandopacity"]=t["bandopacity"]);t["colorprovider"]!=null&&(s["colorprovider"]=t["colorprovider"]);t["geometry"]!=null&&(s["geometry"]=t["geometry"]);t["linestyle"]!=null&&(s["linestyle"]=t["linestyle"]);t["fillstyle"]!=null&&(s["fillstyle"]=t["fillstyle"]);return s}};i=t([_s("geotoolkit.charts.DensityContourChart")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImdldFNlcmllc0luZm8iOiJLMXRfIiwib25EYXRhVXBkYXRlZCI6IngxdF8iLCJzZXREYXRhU291cmNlIjoicnZ0XyIsIm9uRGF0YVNlcmllc0NoYW5nZWQiOiJVMXRfIiwiZ2V0UHJvcGVydGllcyI6Ik5fIiwic2V0UHJvcGVydGllcyI6ImR0XyJ9fX0g");var PT=Ci(function(){let i=class t extends UY{constructor(t){super(t=Pi(t,{series:{},regressionmodel:{type:QS},regressionline:{visible:!0,linestyle:GA.Red}},!0));this.Q0t_=new DS(this.W3t_(t));this.aNt_=new mA;this.G1t_().GY_(this.Q0t_);this.initialize(t)}yNt_(){if(this.Cvt_()==null)this.aNt_=new mA;else{const t=this.g1t_(this.q2t_["data"],RY.X),i=this.g1t_(this.G2t_["data"],RY.Y);this.aNt_=t!=null&&i!=null?new mA(t.nA_(),i.nA_(),t.hA_(),i.hA_()):new mA}return this}Lq_(t){super.Lq_(t);this.Q0t_.Lq_(t);return this}setOrientation(t){super.setOrientation(t);if(t===EY.JQ_||t===EY.Top)return this;const i=this.q2t_;this.q2t_=this.G2t_;this.G2t_=i;const s=this.t2t_(RY.X);this.$1t_(RY.X,this.t2t_(RY.Y));this.$1t_(RY.Y,s);return this}r2t_(t,i){i==null&&(i=new TY(null,{textstyle:{font:"bold 10px Arial",baseline:ka.mk_}}));i.dt_({text:this.P1t_({"${x-series}":this.q1t_(this.q2t_),"${y-series}":this.q1t_(this.G2t_)})});return i}x1t_(){this.T1t_()&&this.yNt_()}F1t_(){return this.g1t_(this.q2t_["data"])!=null&&this.g1t_(this.G2t_["data"])!=null}K1t_(t){switch(t){case RY.X:case this.q2t_["data"]:return this.q2t_;case RY.Y:case this.G2t_["data"]:return this.G2t_}return null}rvt_(t){super.rvt_(t);if(!this.T1t_()){this.Q0t_.setData({});return this}const i=this.g1t_(this.q2t_["data"],RY.X),s=this.g1t_(this.G2t_["data"],RY.Y),e=this.g1t_(this.OEt_,DY.X0t_);this.Q0t_.setData({datax:i,datay:s,weights:e});this.yNt_();return this}k1t_(){if(this.Cvt_()==null||this.q2t_==null)return;const t=this.q2t_["values"];this.q2t_["data"]=Array.isArray(t)?this.Cvt_().l1t_(t,this.R1t_()):t;const i=this.G2t_["values"];this.G2t_["data"]=Array.isArray(i)?this.Cvt_().l1t_(i,this.R1t_()):i;this.OEt_=Array.isArray(this.z3t_)?this.Cvt_().l1t_(this.z3t_,this.R1t_()):this.z3t_}U1t_(t,i,s){s.every((t=>t!==this.q2t_["data"]&&t!==this.G2t_["data"]&&t!==this.OEt_))||this.rvt_(this.Cvt_())}N_(){const t=super.N_();t["series"]={x:UY.M2t_(this.q2t_),y:UY.M2t_(this.G2t_),weight:this.OEt_};const i=this.Q0t_.N_();i["extended"]!=null&&(t["extended"]=i["extended"]);i["plotinterval"]!=null&&(t["plotinterval"]=i["plotinterval"]);i["regressionmodel"]!=null&&(t["regressionmodel"]=i["regressionmodel"]);i["regressionline"]!=null&&(t["regressionline"]=i["regressionline"]);i["confidenceline"]!=null&&(t["confidenceline"]=i["confidenceline"]);i["predictionline"]!=null&&(t["predictionline"]=i["predictionline"]);i["horizontallogmode"]!=null&&(t["horizontallogmode"]=i["horizontallogmode"]);i["verticallogmode"]!=null&&(t["verticallogmode"]=i["verticallogmode"]);t["statistics"]=this.Q0t_.pvt_();return t}dt_(t){if((t=Es(t))==null)return this;super.dt_(t);this.Q0t_.dt_(this.W3t_(t));return this}W3t_(t){const i={};if(t["series"]!=null){const i=t["series"];this.q2t_=UY.D2t_(i["x"],this.q2t_);this.G2t_=UY.D2t_(i["y"],this.G2t_);i["weight"]!=null&&(this.z3t_=i["weight"]);this.k1t_();const s=undefined;if(this.Cvt_()!=null){const t=this.g1t_(this.q2t_["data"],RY.X),i=this.g1t_(this.G2t_["data"],RY.Y),s=this.g1t_(this.OEt_,DY.X0t_);this.Q0t_.setData({datax:t||[],datay:i||[],weights:s||[]})}}t["extended"]!=null&&(i["extended"]=t["extended"]);t["plotinterval"]!=null&&(i["plotinterval"]=t["plotinterval"]);t["regressionmodel"]!=null&&(i["regressionmodel"]=t["regressionmodel"]);t["regressionline"]!=null&&(i["regressionline"]=t["regressionline"]);t["confidenceline"]!=null&&(i["confidenceline"]=t["confidenceline"]);t["predictionline"]!=null&&(i["predictionline"]=t["predictionline"]);t["horizontallogmode"]!=null&&(i["horizontallogmode"]=t["horizontallogmode"]);t["verticallogmode"]!=null&&(i["verticallogmode"]=t["verticallogmode"]);return i}};i=t([_s("geotoolkit.charts.RegressionLine")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRNb2RlbExpbWl0cyI6IkxxXyIsImNyZWF0ZUxlZ2VuZEl0ZW0iOiJyMnRfIiwib25EYXRhVXBkYXRlZCI6IngxdF8iLCJnZXRTZXJpZXNJbmZvIjoiSzF0XyIsInNldERhdGFTb3VyY2UiOiJydnRfIiwib25EYXRhU2VyaWVzQ2hhbmdlZCI6IlUxdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJzZXRQcm9wZXJ0aWVzIjoiZHRfIn19fSAg");let VT=null;var OT=Ci(function(){var i;let s=i=class t{constructor(){this.M3t_={}}register(t,i){this.M3t_[t]=i;return this}X3t_(t){if(t instanceof UY)return t;const i=t["type"],s=this.M3t_[i];if(s==null){ki('geotoolkit.charts.ChartRegistry: "'+i+'" chart type is not supported');return null}return new s(t)}static Ai_(){VT==null&&(VT=new i);return VT}};s=i=t([_s("geotoolkit.charts.ChartRegistry")],s);return s}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVDaGFydCI6IlgzdF8ifX0sImdldEluc3RhbmNlIjoiQWlfIiwiZ2V0Q2xhc3NOYW1lIjoiRF8ifSAg");OT.Ai_().register(IT.U5t_,OY);OT.Ai_().register(IT.Y5t_,zY);OT.Ai_().register(IT.T5t_,XY);OT.Ai_().register(IT.K5t_,AT);OT.Ai_().register(IT.H5t_,CT);OT.Ai_().register(IT.q5t_,gT);OT.Ai_().register(IT.J5t_,wT);OT.Ai_().register(IT.P5t_,pT);OT.Ai_().register(IT.V5t_,bT);OT.Ai_().register(IT.O5t_,FT);OT.Ai_().register(IT.W5t_,rT);OT.Ai_().register(IT.z5t_,qT);OT.Ai_().register(IT.X5t_,JT);OT.Ai_().register(IT.j5t_,PT);OT.Ai_().register(IT.Z5t_,YT);var WT=function(){let i=class t extends qh{};i=t([Zs(qh),_s(null)],i);return i}();var zT=Ci(function(){let i=class t extends fN{constructor(t){const i=t["alignment"];t["alignment"]=dA.ie_;super(t);this.j3t_=i||dA.ee_}SE_(t){this.j3t_=t;return this}GE_(){return this.j3t_}ht_(t){if(t&&t.Ie_()>0&&t.Ts_()>0){const i=Ca.VG_(t,dA.ie_);this.gR_(i);if(!this.WG_()){this.N_()["autosize"]||this.setSize(t.Ie_(),t.Ts_());this.N_()["autobounds"]||this.wq_()}}return this}};i=t([_s("geotoolkit.charts.legend.Legend")],i);return i}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbmNob3JUeXBlIjoiR0VfIiwic2V0QW5jaG9yVHlwZSI6IlNFXyIsInNldEJvdW5kcyI6Imh0XyJ9fX0g");var XT=Ci({Z3t_:"Point",ux_:"Horizontal",ax_:"Vertical"},2,"eyJQb2ludCI6IlozdF8iLCJIb3Jpem9udGFsIjoidXhfIiwiVmVydGljYWwiOiJheF8ifSAg");const $H="cg_type";let tq=null;var iq=function(){var t=class{constructor(){this.map={};this.TAi_={};this.$3t_("linestyle",hl.D_());this.$3t_("fillstyle",wr.D_());this.$3t_("textstyle",qa.D_());this.$3t_("imagepattern",El.D_());this.$3t_("adaptivetickgenerator",JC.D_());this.$3t_("symbol",ma.D_());this.$3t_("circle",cE.D_());this.$3t_("cross",IE.D_());this.$3t_("diamond",fE.D_());this.$3t_("plus",$E.D_());this.$3t_("square",tp.D_());this.$3t_("star",sp.D_());this.$3t_("triangle",da.D_());this.$3t_("defaultcolorprovider",bo.D_());this.$3t_("rect",mA.D_());this.$3t_("point",lA.D_());this.$3t_("cssstyle",xl.D_());this.$3t_("automodellimitsstrategy",Rc.D_());this.$3t_("verticalscroll",NG.D_());this.$3t_("horizontalscroll",bG.D_());this.$3t_("transformation",Gn.D_());this.$3t_("numberformat",$g.D_());this.$3t_("locale",Ig.D_());this.$3t_("axismappingdimension",WC.D_())}static Ai_(){tq==null&&(tq=new t);return tq}$3t_(t,i){this.map[t]=i;this.TAi_[i]=t}t4t_(){return this.map}getType(t){const i=t!=null&&typeof t.D_=="function"?t.D_():null;return i!=null?this.TAi_[i]!=null?this.TAi_[i]:i:null}i4t_(t){const i=this.map[t]!=null?this.map[t]:t;return i!=null?As(i):null}};return t}();const sq={save:function(t,i){const s=iq.Ai_().getType(t);s!=null&&s!=="chart"&&i.Oi_($H,s);let e=typeof t.N_=="function"?t.N_():t;t.D_&&(e=Ur.Ai_().JE_(e,t.D_()));for(const t in e)if(e.hasOwnProperty(t)&&e[t]!==void 0){const s=e[t];if(s instanceof Mi.HTMLImageElement)continue;if(typeof s=="object"&&s!==null){const e=iq.Ai_().getType(s);i.zE_(t,s,e)}else typeof s!="function"&&i.Oi_(t,s)}i.commit()},load:function(t,i){const s=t.Lw_&&t.Lw_(),e=t.getValue($H);let A=i!=null?i:null;if(A==null){const i=t.Vw_();e!=null&&(A=i!=null&&iq.Ai_().getType(i)===e?i:iq.Ai_().i4t_(e));A==null&&(A={})}let n=typeof A.dt_=="function"?{}:A;t.Tw_((function(t,i){n[t]=i.getValue(null,i.getValue($H))}));if(typeof A.dt_=="function"){n=Ur.Ai_().JE_(n,A.D_&&A.D_(),s);A.dt_(n)}return A}},eq=function(t,i){for(const s in t)t.hasOwnProperty(s)&&t[s]!=null&&typeof t[s]=="object"&&(t[s]=eq(t[s],i));if(t[$H]!=null){const s=iq.Ai_().i4t_(t[$H]);if(s!=null){const e=i.Lw_&&i.Lw_();t=Ur.Ai_().JE_(t,s.D_&&s.D_(),e);s.dt_(t);return s}}return t};let Aq=null;var nq=Ci(function(){var i;let s=i=class t extends Kr{constructor(){super();this.s4t_()}s4t_(){const t=iq.Ai_().t4t_();for(const i in t)t.hasOwnProperty(i)&&this.OE_(i,sq);this.OE_("default",sq);this.OE_("geotoolkit.widgets.ChartWidget",{save:function(t,i){i.Oi_("type","chartwidget");const s=t.N_();delete s["cssstyle"];Object.keys(s["axes"]).forEach((t=>{if(s["axes"].hasOwnProperty(t)){const i=s["axes"][t],e=i.N_();i.r5t_()?e["userprops"]=i.u5t_():delete e["tickgenerator"];s["axes"][t]=e}}));i.zE_("widgetproperties",s,"widgetproperties");const e=t.KAi_();if(Object.keys(e).length!==0){const t=i.up_("colorproviders","array");for(const i in e)t.zE_(i,e[i],"defaultcolorprovider");t.commit()}const A=t.HAi_();if(A>0){const s=i.up_("charts","array");for(let i=0;i<A;i++){const e=t.m3t_(i);s.zE_(i,e,"chart")}s.commit()}i.commit()},load:function(t){const i=t.getValue("type");if(i==null||i!=="chartwidget")throw new Error("not supported");const s=t.Kw_("#widget");if(s){s.clear();t.Tw_((function(t,i){if(t==="colorproviders"){const t={};i.Tw_((function(i,e){const A=e.hp_();for(const i in A)A.hasOwnProperty(i)&&A[i]!=null&&typeof A[i]=="object"&&(t[i]=eq(A[i],e));s.qAi_(t)}))}else t==="charts"&&i.Tw_((function(t,i){i.Uw_("chart")}))}));const i=t.getValue("widgetproperties"),e=i["axes"];if(e!=null){delete i["axes"];s.JAi_(e);Object.keys(e).forEach((t=>{e.hasOwnProperty(t)&&e[t]["userprops"]!=null&&s._1t_(t).PAi_(e[t]["userprops"])}))}i!=null&&s.dt_(i)}return s}});this.OE_("chart",{save:function(t,i){i.lp_(t,"default");i.commit()},load:function(t){const i=t.Kw_("#widget");let s=t.hp_();s=eq(s,t);i.VAi_(s);return null}})}static Ai_(){Aq==null&&(Aq=new i);return Aq}};s=i=t([_s("geotoolkit.widgets.ChartWidgetRegistry")],s);return s}(),2,"eyJnZXRJbnN0YW5jZSI6IkFpXyJ9");const hq=12,rq=new No({bins:255}).setScale(po.pA_,2e4,1e5),oq=[ha.eG_,ha.sG_,ha.nG_,ha.AG_],lq=function(t){return t&&!(t instanceof SY)},uq=(t,i,s,e)=>{if(i instanceof qT)return s;const A=i.K1t_(RY.X);if(A==null||s[A["data"]]==null)return s;const n=i.K1t_(RY.Y),h=i.if_()||Gn.JI_,r=i.g1t_(A["data"],i.t2t_(RY.X));if(r==null)return s;const o={},l=[];Au.IN_(n).forEach((t=>{const A=s[t["data"]];if(A==null)return;const n=i.g1t_(t["data"],i.t2t_(RY.Y));if(n==null)return;let u=1/0;const a=A.reduce(((t,i)=>{const s=r.getValue(i),A=n.getValue(i),o=h.nI_(s,A),l=lA.Gs_(o,e);if(u>l){u=l;return i}return t}),0);if(u!==1/0){o[t["data"]]=[a];l.indexOf(a)<0&&l.push(a)}}));if(l.length===0)return s;l.sort(((t,i)=>t-i));const u={};for(const t in s)u[t]=o[t]||l.slice();return u};function aq(t,i){let s,e;if(i instanceof mA){s=i.getCenter();e=bC.select(this.getRoot(),i,!0).filter(Zf)}else{s=i instanceof lA?i:i.Fkt_();const t=this.LM_().lt_(),A=bC.select(this.getRoot(),s,this.OAi_());e=A.filter(Zf);for(let t=e.length-1;t>=0;t--){const i=e[t].GO_();if(i instanceof TY){const t=i.Uw_();for(let s=0;s<this.HAi_();s++)if(t===this.m3t_(s)){const s=undefined;return[new jf(t,i.getData())]}}}if(!t.contains(s)||A.indexOf(this.WAi_())>=0)return[];switch(this.EOt_()){case XT.ax_:e=bC.select(this.getRoot(),new mA(s.getX(),t.getY(),s.getX(),t.pe_()),!0).filter(Zf);break;case XT.ux_:e=bC.select(this.getRoot(),new mA(t.getX(),s.getY(),t.Qe_(),s.getY()),!0).filter(Zf)}}const A=[];for(let t=e.length-1;t>=0;t--){const n=e[t].GO_();if(n instanceof UY&&Object.keys(e[t].getData()).length>0){const h=i instanceof mA?e[t].getData():uq(this,e[t].GO_(),e[t].getData(),s);A.push(new jf(n,h))}}return A}function gq(t,i,s){const e=this.Cvt_();if(e==null)return;const A=[];switch(i){case Hs.Z_:case Hs.__:for(let i=this.HAi_()-1;i>=0;i--){const s=this.m3t_(i),n=e.getSelection(s.e2t_(),s.R1t_());if(A.indexOf(n)<0){n.clear(null,Rl.__);A.push(n)}const h=t.find((t=>t.GO_()===s));h!=null&&n.select(h.getData(),Rl.__)}return;case Hs.st_:if(t.length===0)for(let t=this.HAi_()-1;t>=0;t--){const i=this.m3t_(t),s=undefined;e.getSelection(i.e2t_(),i.R1t_()).clear(null,Rl.Selection)}else{const i=t[t.length-1],A=i.GO_(),n=e.getSelection(A.e2t_(),A.R1t_());n.W0t_(i.getData(),Rl.Selection)?n.V0t_(i.getData(),Rl.Selection):s instanceof FS&&s.Lkt_()!=null&&s.Lkt_()["ctrlKey"]?n.select(i.getData(),Rl.Selection):n.vO_(i.getData(),Rl.Selection)}}}function cq(t,i,s){const e=[];for(let i=0;i<t.length;i++){const s=t[i].GO_(),A=t[i].getData(),n=s.E2t_(A);n&&e.push(n)}const A=this.zAi_();A!=null&&A.length>0&&e.length>0&&e.unshift(A+"<br/>");return e.join("")}const Iq=t=>{if(t["divelement"]==null&&t["cssclasses"]==null){t["cssclasses"]="cg-tooltip-container cg-tooltip-arrow-bottom";t["alignment"]=t["alignment"]||dA.re_;t["offsetx"]=t["offsetx"]||0;t["offsety"]=t["offsety"]||15}};var fq=Ci(function(){let i=class t extends _H{constructor(t){super(t=Pi(t,{data:new SY,axes:{},tools:{horizontalscroll:{visible:!1},verticalscroll:{visible:!1}},border:{color:"#e0e0e0",pixelsnapmode:!0},selection:{radius:2,callback:aq},highlight:{callback:gq,enabled:!0},usedesiredoffset:!1,tooltip:{callback:cq},legend:{alignment:dA.ee_,size:!0,orientation:fg.ax_,offset:10,linestyle:{color:"#e0e0e0",pixelsnapmode:!0},fillstyle:"#ffffff"}}));this.QOt_=XT.Z3t_;this.XAi_={};this.jAi_={};this.ZAi_=ha.eG_;Iq(t["tooltip"]);this.Us_=null;this.M3t_=[];this._Ai_={};this.i3t_={};this.$Ai_={};this.D1t_={};this.tni_=new ma({sizeisindevicespace:!0,alignment:dA.ne_,painter:new wE({geometry:(new sI).ht_(new mA(0,0,1,1))})});this.ini_=this.sni_.bind(this);this.eni_=()=>this.Ani_(null,!0);this.nni_=this.hni_.bind(this);this.rni_=t["selection"]["radius"];this.oni_=t["selection"]["callback"].bind(this);this.lni_=t["highlight"]["callback"].bind(this);this.uni_=t["highlight"]["enabled"];this.ani_=t["tooltip"]["callback"].bind(this);this.gni_=t["annotationssizes"]||{};this.JAi_(t["axes"]);this.cni_=t["usedesiredoffset"];this.Ini_=this.fni_.bind(this);t["axes"]=null;this.Yb_({css:'*[cssclass="linechart-series"]:hover { linestyle-width: 2; }'+'*[cssclass="linechart-series"]:selection { linestyle-width: 3; }'+'*[cssclass="tornadochart-series"]:hover { linestyle-width: 3; }'+'*[cssclass="barchart-series"]:hover { linestyle-width: 2; }'+'*[cssclass="barchart-series"]:selection { linestyle-width: 3; }'+'*[cssclass="bubblechart-series"]:selection { linestyle-width: 3; }'+'*[cssclass="histogramchart-series"]:hover { fillstyle-color: #545454; }'+'*[cssclass="histogramchart-series"]:selection { linestyle-width: 3; linestyle-pixelsnapmode: true; }'+'*[cssclass="crossplotchart-series"]:selection { fillstyle-color: blue; }'+'*[cssclass="boxplotchart-series"]:hover { linestyle-width: 2; }'+'*[cssclass="boxplotchart-series"]:selection { linestyle-width: 3; }'});this.dt_(t);if(t["chart"]!=null){const i=Array.isArray(t["chart"])?t["chart"]:[t["chart"]];for(let t=0;t<i.length;++t)this.VAi_(i[t])}}VAi_(t){const i=OT.Ai_().X3t_(t),s=undefined;if(!this.u2t_(i))return this;this.M3t_.push(i);this.LM_().GY_(i);this.Ani_(i,!0);this.Cni_(i);i.u2t_(this);i.on(cT.L5t_,this.Ini_);this.td_();return this}dni_(t,i){const s=OT.Ai_().X3t_(i),e=undefined;if(!this.u2t_(s))return this;this.M3t_.splice(t,0,s);const A=this.LM_().FY_(this.M3t_[0]);this.LM_().xY_(A+t,s);this.Ani_(s,!0);this.Cni_(s);s.u2t_(this);this.td_();return this}Bni_(t,i,s){if(t==null)return this;const e=this.M3t_.indexOf(t);if(e===-1)return this;const A=gc(this.M3t_,t,i,s);if(A!==-1){this.M3t_.splice(e,1);this.M3t_.splice(A,0,t)}this.LM_().VY_(t,i,s!=null?s:null);return this}wni_(t){t=typeof t=="number"?t:this.M3t_.indexOf(t);const i=this.M3t_.splice(t,1)[0];if(i==null)return this;this.LM_().removeChild(i);i.rvt_(null);this.Ani_(null,!0);this.Cni_(i);i.off(cT.L5t_,this.Ini_);i.a2t_(this);i.J1t_().forEach((t=>{this.Qni_.getData().remove(t)}));this.td_();return this}Eni_(){if(this.M3t_.length===0)return this;for(let t=this.M3t_.length;t>0;t--){const t=this.M3t_.pop();this.LM_().removeChild(t);t.rvt_(null);this.Ani_(null,!0);t.a2t_(this)}this.Qni_.getData().clear();this.pni_();this.td_();return this}rvt_(t){if(this.Us_===t)return this;if(this.Us_!=null){this.Us_.off(wY.Dct_,this.ini_);this.Us_.off(wY.Mct_,this.ini_);this.Us_.off(wY.Nct_,this.ini_);this.Us_.off(wY.Sct_,this.ini_);this.Us_.off(wY.U0t_,this.ini_);this.Us_.off(wY.Y0t_,this.ini_);this.Us_.off(wY.pct_,this.ini_)}this.Us_=lq(t)?new SY(t):t;if(this.Us_!=null){this.Us_.on(wY.Dct_,this.ini_);this.Us_.on(wY.Mct_,this.ini_);this.Us_.on(wY.Nct_,this.ini_);this.Us_.on(wY.Sct_,this.ini_);this.Us_.on(wY.U0t_,this.ini_);this.Us_.on(wY.Y0t_,this.ini_);this.Us_.on(wY.pct_,this.ini_)}for(let t=0;t<this.M3t_.length;t++)this.M3t_[t].rvt_(this.Us_);this.sni_();return this}clear(){this.Eni_();this.mni_();return this}mni_(){for(const t in this.D1t_)this.D1t_.hasOwnProperty(t)&&this.dAi_(this.D1t_[t]);return this}JAi_(t){this.mni_();const i={};for(const s in t){const e=t[s];e instanceof $Y?e.JC_(s):e["id"]=s;const A=undefined;let n;switch(this.CAi_(e,ys(e,$Y)?e.Nwt_():e["location"])["axis"].Nwt_()){case ha.AG_:n="right";break;case ha.eG_:n="top";break;case ha.sG_:n="left";break;default:n="bottom";break}i[n]=!1}this.USt_.GT_(i);return this}E__(t){t["location"]!=null&&(this.ZAi_=t["location"]);let i=this.gAi_(this.ZAi_);i==null?this.aAi_(this.ZAi_,t):this.IAi_(this.ZAi_,t);if(t["visible"]!=null){i=this.gAi_(this.ZAi_);i.nf_(t["visible"])}return this}mV_(){const t=this.gAi_(this.ZAi_);let i=null;t!=null&&(i={text:t.SG_(),textstyle:t.FE_(),location:this.ZAi_,visible:t.$C_()});return i}zAi_(){return this.yni_}Dni_(t){for(const i in t){const s=this.D1t_[i],e=t[i];if(!(s==null||e==null||e instanceof $Y)){e["id"]!=null&&e["id"]!==i&&(e["id"]=s.XC_());e["datatype"]!=null&&e["datatype"]!==s.g5t_()&&s.dt_(e);if(e["location"]==null||e["location"]===s.Nwt_())if(e["type"]==null||e["type"]===s.getType()||e["type"]!==jY.X2t_&&s.getType()!==jY.X2t_)s.dt_(e);else{this.dAi_(s);s.dt_(e);this.CAi_(s,s.Nwt_())}else{this.dAi_(s);s.dt_(e);this.CAi_(s,e["location"])}}}this.Ani_();return this}Cvt_(){return this.Us_}HAi_(){return this.M3t_.length}m3t_(t){let i=null;if(typeof t=="number")return this.M3t_[t];for(let s=0;s<this.M3t_.length;s++){if(typeof t=="string"&&this.M3t_[s].dn_()===t)return this.M3t_[s];if(t instanceof Db){let e=null;this.M3t_[s].J1t_().forEach((i=>{i.XC_()===t.XC_()&&(e=this.M3t_[s])}));i=e;if(i!=null)return i}}return i}dt_(t){if(t==null)return this;const i=t["axes"];(t=Es(t))["axes"]=i;delete t["modellimits"];super.dt_(t);t["data"]==null&&t["data"]!==null||this.rvt_(t["data"]);const s=t["legend"];if(s!==void 0){s["offset"]!==void 0&&(this.Mni_=s["offset"]);s["alignment"]!==void 0&&this.Qni_.SE_(s["alignment"]);if(s["size"]!==void 0)if(typeof s["size"]=="boolean")this.Qni_.dt_({autosize:s["size"]});else{this.Qni_.setSize(s["size"]);this.Qni_.dt_({autosize:!1})}s["orientation"]!==void 0&&this.Qni_.cq_(s["orientation"]===fg.ax_?new Ew:new aw);s["linestyle"]!==void 0&&this.vni_.rB_(s["linestyle"]);s["fillstyle"]!==void 0&&this.vni_.iQ_(s["fillstyle"]);s["visible"]!==void 0&&this.vni_.nf_(s["visible"])}if(t["tooltip"]){if(t["tooltip"]["callback"]!=null){this.ani_=t["tooltip"]["callback"].bind(this);delete t["tooltip"]["callback"]}this.yni_=t["tooltip"]["titleformat"];const i=t["tooltip"];this.bni_.dt_(i)}t["selectionmode"]!=null&&this.$qt_(t["selectionmode"]);if(t["selection"]){t["selection"]["radius"]!==void 0&&(this.rni_=t["selection"]["radius"]);t["selection"]["callback"]!==void 0&&(this.oni_=t["selection"]["callback"].bind(this))}if(t["highlight"]){t["highlight"]["callback"]!=null&&(this.lni_=t["highlight"]["callback"].bind(this));t["highlight"]["enabled"]!=null&&(this.uni_=t["highlight"]["enabled"])}t["axes"]!=null&&this.Dni_(t["axes"]);t["title"]!=null&&this.E__(t["title"]);if(t["usedesiredoffset"]!=null){this.cni_=t["usedesiredoffset"];this.Ani_(null,!0)}return this}N_(){const t=super.N_();t["axes"]=this.D1t_;t["selection"]={radius:this.rni_,callback:this.oni_};t["selectionmode"]=this.QOt_;t["tooltip"]={callback:this.ani_,titleformat:this.yni_};t["legend"]={alignment:this.Qni_.GE_(),size:!!this.vni_.JF_()||this.Qni_.getSize(),orientation:this.Qni_.bG_()instanceof Ew?fg.ax_:fg.ux_,offset:this.Mni_,linestyle:this.vni_.gt_(),fillstyle:this.vni_.ct_(),visible:this.vni_.$C_()};t["annotationssizes"]=this.gni_;const i=this.mV_();i!=null&&(t["title"]=i);t["usedesiredoffset"]=this.cni_;return t}sni_(t,i,s){switch(t){case wY.U0t_:case wY.Y0t_:const e=s;this.M3t_.forEach((s=>{e["tableid"]===s.R1t_()&&s.U1t_(t,i,e["series"])}));break;case wY.Dct_:case wY.Mct_:case wY.Nct_:case wY.Sct_:if(s==null)return;const A=s;this.M3t_.forEach((s=>{A["tableid"]===s.R1t_()&&s.Y1t_(t,i,{from:A["from"],count:A["count"]})}));break;case wY.pct_:this.M3t_.forEach((t=>{t.x1t_()}));this.Ani_(null,!0);break}this.pni_()}A4t_(t){super.A4t_(t);this.on(Hs.__,((t,i,s)=>{if(this.uni_){const i=this.oni_(t,s);this.lni_(i,t,s)}}));this.on(Hs.st_,((t,i,s)=>{if(this.uni_){const i=this.oni_(t,s);this.lni_(i,t,s)}}));this.on(Hs.et_,((t,i,s)=>{if(this.uni_){const i=this.oni_(t,s);this.lni_(i,t,s)}}));this.on(Hs.Z_,((t,i,s)=>{this.uni_&&this.lni_.call(this,[],t,s)}));this.bni_=new iY({cssclasses:t&&t["tooltip"]&&t["tooltip"]["cssclasses"]?t["tooltip"]["cssclasses"]:void 0,callback:(t,i,s)=>{if(this.Cvt_()==null)return"";const e=s.ZOt_(),A=this.oni_(e,i||t);return this.ani_(A,e,i||t)}});this.h4t_(this.bni_);t=t||{};this.yni_=t["tooltip"]["titleformat"];t["legend"]=t["legend"]||{};this.Mni_=t["legend"]["offset"];const i=t["legend"]["size"];let s,e=null;typeof i=="boolean"?s=i:i!=null&&(e=i);this.Qni_=new zT({alignment:t["legend"]["alignment"],autosize:s,width:e instanceof xA?e.Ie_():e!=null?e["width"]:null,height:e instanceof xA?e.Ts_():e!=null?e["height"]:null,sizeisindevicespace:!0,autobounds:e!=null}).cq_(t["legend"]["orientation"]===fg.ax_?new Ew:new aw);const A=new YG({visible:t["legend"]["visible"],content:this.Qni_,autosize:!1,fillstyle:t["legend"]["fillstyle"],padding:{top:0,bottom:0,right:0,left:0}}).rB_(t["legend"]["linestyle"]),n=(new sI).JC_("legendLayer").HC_("legendLayer").VC_(1).aq_(!0).GY_(A);this.GY_(n);this.vni_=A;A.Wj_();const h=this.C5_("crosshair");switch(this.QOt_){case XT.ax_:h.FVt_(null);break;case XT.ux_:h.kVt_(null)}let r=!0,o=!1;h.on(tF.EVt_,((t,i,s)=>{if(this.Cvt_()==null||!s.Fkt_())return;const e=this.vni_.$C_()&&this.vni_.$Y_().contains(s.Fkt_());if(e!==o){if(o)i.nf_(r);else{r=i.isVisible();i.nf_(!1)}o=e}let A=null,n;for(let t=0;t<this.M3t_.length;t++){const i=this.M3t_[t],s=i.K1t_(RY.X);if(s==null||s["data"]==null)continue;const e=this.Cvt_().getSelection(i.e2t_(),i.R1t_()).getSelection(Rl.__),h=e!=null?e[s["data"]]:null;if(h!=null&&h.length>0){A=i.gwt_(h[0]);if(A){const t=A.uR_(),s=A.aR_();n=i.if_().nI_(t,s);break}}}if(n&&A){const t=A.Ie_(),s=A.Ts_(),e=10,h=A.gt_()?Math.ceil(A.gt_().Ie_()/2):0;this.tni_.dt_({ax:A.uR_(),ay:A.aR_(),width:t+h+e,height:s+h+e});this.tni_.ak_().nt_().KY_().GY_([A.clone().gR_(.5,.5).iQ_("rgba(128,128,128,0.5)").setSize(t+h+e,s+h+e).rB_(null),A.clone().gR_(.5,.5),A.clone().gR_(.5,.5).iQ_(null).setSize(t+h+1,s+h+1).rB_(new hl("white",2))]);A=this.tni_;i.mgt_().if_().aI_(n,n);i.setPosition(n,!0)}i.k6_(A)}));const l=new OH({widget:this,group:A,layer:n,handlestyle:{activelinestyle:{pixelsnapmode:!0},inactivelinestyle:{pixelsnapmode:!0}}}).on(HH.e4_,(()=>{A.Wj_();const t=this.Qni_.bG_(),{width:i,height:s}=A.getBounds(),e=undefined;if(s<Math.max(...this.Qni_.YY_().toArray().map((t=>t.getBounds().Ts_())))&&!(t instanceof aw)){this.Qni_.cq_(new aw);return}const n=undefined;!(i<Math.max(...this.Qni_.YY_().toArray().map((t=>t.getBounds().Ie_()))))||t instanceof Ew||this.Qni_.cq_(new Ew)}));this.K3_().g1_(0,l);l.Rxt_().forEach((t=>{t.on(xS.Jkt_,(()=>{t.isActive()?OS.lock(this.K3_().getPlot(),t):OS.unlock(t);if(t.isActive()){h.setPosition(null);this.bni_.d0t_()}})).on(HH.gei_,((t,i)=>{this.Qni_.SE_(dA.W_);A.Wj_()}))}));l.g1_(1,new lG({name:"legend-scrolls"}).add(A.cUt_()));A.cUt_().forEach((function(t){t.uFt_(0)}));this.Nni_=(new lG).HC_("colorbar-tools");this.K3_().add(this.Nni_);return this}Xei_(){super.Xei_();const t=this.Qni_.GE_();if(t===dA.W_)return this;const i=this.Qni_.getBounds().clone(),s=this.lt_(),e=typeof this.Mni_=="number"?this.Mni_:this.Mni_.getX(),A=typeof this.Mni_=="number"?this.Mni_:this.Mni_.getY();OC.jj_(t)?i.setX(s.getX()+e):OC.Zj_(t)?i.setX(s.Qe_()-e-i.Ie_()):i.setX(s.ye_()+e-i.Ie_()/2);OC.zj_(t)?i.setY(s.getY()+A):OC.Xj_(t)?i.setY(s.pe_()-A-i.Ts_()):i.setY(s.De_()+A-i.Ts_()/2);this.vni_.ht_(i);return this}ht_(t){super.ht_(t);this.Pei_();this.Ani_(null,!0);return this}Sni_(){return this.Qni_}WAi_(){return this.vni_}_1t_(t){return t?this.D1t_[t]||null:this.D1t_}B3t_(t){return this.i3t_!=null&&this.i3t_[t]||null}Cni_(t){const i=t._1t_(RY.X);i!=null&&this.pni_(i);const s=t._1t_(RY.Y);s!=null&&this.pni_(s)}Gni_(t,i,s,e){if(t._1t_(s)===i){e.Rni_=!0;const A=t.A2t_(s);if(e.kni_===null)e.kni_=A;else if(ys(e.kni_,Zg)!==ys(A,Zg)){ki("Data types for charts connected to the "+i.toUpperCase()+" are different.");e.kni_=ys(e.kni_,Zg)?A:e.kni_}}return e}pni_(t){for(const i in this.D1t_){if(t!=null&&t!==i)continue;const s=this.D1t_[i],e=s.N_();if(s.r5t_())continue;const A={kni_:null,Rni_:!1};for(let t=0;t<this.M3t_.length;t++){const s=this.M3t_[t];this.Gni_(s,i,RY.X,A);this.Gni_(s,i,RY.Y,A)}if(e["type"]!==jY.X2t_&&e["labels"]!=null){const t=Array.isArray(e["labels"])?e["labels"]:null,i=t||this.Us_==null?null:this.Us_.g1t_(e["labels"]);if(t==null&&i==null)continue;if(A.kni_!=null&&A.kni_ instanceof iB)A.kni_.X$_(qi({labels:i?i.toArray(!1):t},A.kni_.Z$_()));else{const n=this.Us_?this.Us_.g1t_(e["labels"],s.g5t_()):null;A.kni_=new iB({labels:i?i.toArray(!1):t,positions:n?n.toArray(!1):t.map(((t,i)=>typeof t=="number"?t:i))})}s.t5t_(A.kni_)}else if(e["type"]===jY.X2t_){const t=Pi(s.u5t_(),{visibleticks:{minor:!1,major:!0,edge:!0},visiblelabels:{minor:!1,major:!0,edge:!0}});s.ZZ_().dt_(t)}else if(A.kni_!==null)s.t5t_(A.kni_);else if(s.g5t_()===DY.Ay_){const t=Pi(s.u5t_(),{orientation:s.KH_(),minor:{tickvisible:!1,labelvisible:!1}});s.t5t_(new fd(t))}else{const t=Pi(s.u5t_(),{visibleticks:{major:!0,edge:!0},visiblelabels:{major:!0,edge:!0}});s.t5t_(new JC(t))}}}Fni_(t,i){const s=this.D1t_[t];if(s==null){if(!i)return;this.M3t_.forEach((i=>{const s=i.rt_()?i.rt_().clone():new mA;if(i._1t_(RY.X)===t){const t=i.z1t_(RY.X);s.setX(t.Xs_()).de_(t.getSize())}if(i._1t_(RY.Y)===t){const t=i.z1t_(RY.Y);s.setY(t.Xs_()).Be_(t.getSize())}i.Lq_(s)}));return}const e=s.TE_(),A=this.LM_().$Y_(),n=s.Nwt_()===ha.eG_||s.Nwt_()===ha.nG_;if(!i){const t=s.rt_();n?s.V__(t.getX(),t.Qe_(),A.Ie_()):s.V__(t.getY(),t.pe_(),A.Ts_());return}let h,r,o=1/0,l=-1/0;const u=this.M3t_.filter((i=>{if(t!==i._1t_(RY.X)&&t!==i._1t_(RY.Y))return!1;h=i.z1t_(n?RY.X:RY.Y);const s=this.cni_?_l.fb_(i.X1t_(),A):A,e=n?(A.getX()-s.getX())/s.Ie_()*h.getSize():(s.pe_()-A.pe_())/s.Ts_()*h.getSize(),r=n?(A.Qe_()-s.Qe_())/s.Ie_()*h.getSize():(s.getY()-A.getY())/s.Ts_()*h.getSize();o=Math.min(o,h.Xs_()+e);l=Math.max(l,h.zs_()+r);return!0}));s.a5t_()!=null&&(o=s.a5t_());s.I5t_()!=null&&(l=s.I5t_());let a=0,g=s.g5t_()===DY.Ay_?2:100;const c=s.ZZ_();if(c instanceof iB){const t=c.Z$_()["labels"]||[];if(t.length>1)g=t.length-1;else{a=-.5;g=.5}}o===1/0&&(o=l===-1/0||l>a?a:l-(g-a));l===-1/0&&(l=o<g?g:o+(g-a));if(o>l){const t=o;o=l;l=t}e.Wj_(o,l,{size:s.KH_()===fg.ax_?A.Ts_():A.Ie_()});o=e.nA_();l=e.hA_();const I=this._Ai_[t];for(let t=0;t<u.length;t++){const i=u[t];r=i.rt_().clone();if(n){r.setX(o).de_(l-o);i.pq_(I!=null&&I.ZY_())}else{r.setY(o).Be_(l-o);i.Eq_(I==null||I.jY_())}i.Lq_(r)}if(I!=null){r=I.rt_().clone();n?r.setX(o).de_(l-o):r.setY(o).Be_(l-o);I.Lq_(r)}}xni_(t){const i=this.D1t_[t];if(i==null)return;const s=i.N_();if(s==null||s["type"]!==jY.X2t_)return;const e=this.$Ai_[t];let A=1/0,n=-1/0;if(s["datalimits"]===!1){A=e.Em_();n=e.pm_()}else this.M3t_.forEach((i=>{if(i._1t_(RY.Z)===t){const t=i.z1t_(RY.Z);A=Math.min(A,t.Xs_());n=Math.max(n,t.zs_())}}));if(n<=A)return;i.a5t_()!=null&&(A=i.a5t_());i.I5t_()!=null&&(n=i.I5t_());const h=i.TE_(),r=this.LM_().lt_();h.Wj_(A,n,{size:i.KH_()===fg.ax_?r.Ts_():r.Ie_()});A=h.nA_();n=h.hA_();const o=this.i3t_[t];o!=null&&o.setOptions({min:A,max:n});s["datalimits"]!==!1&&e.setScale(e.qm_(),A,n)}hni_(t,i,s){this.M3t_.forEach((t=>{t._1t_(RY.X)===i.XC_()?t.$1t_(RY.X,s):t._1t_(RY.Y)===i.XC_()&&t.$1t_(RY.Y,s)}));this.pni_(i.XC_());this.Ani_(null,!0)}Ani_(t,i){if(t!=null){this.Fni_(t._1t_(RY.X),i);this.Fni_(t._1t_(RY.Y),i);i&&this.xni_(t._1t_(RY.Z))}else if(this.D1t_!=null)for(const t in this.D1t_)this.D1t_[t].getType()===jY.X2t_?this.xni_(t):this.Fni_(t,i);this.vei_({});this.f3t_().y4_();return this}Pei_(){super.Pei_();this.Ani_();return this}$X_(t,i){i==null&&(i=this.rni_);return this.M3t_.filter((s=>{const e=s.$X_(t,i);return e!=null&&Object.keys(e).length>0}))}u2t_(t){const i=this.D1t_[t._1t_(RY.X)],s=this.D1t_[t._1t_(RY.Y)];if(i!=null&&s!=null&&i.KH_()===s.KH_())return!1;i!=null&&t.$1t_(RY.X,i.g5t_());s!=null&&t.$1t_(RY.Y,s.g5t_());const e=this._Ai_[t._1t_(RY.Y)];let A;A=i!=null&&i.KH_()===fg.ax_?e!=null&&e.ZY_()===!0?EY.X_:EY.z_:e!=null&&e.jY_()===!1?EY.Top:EY.JQ_;t.setOrientation(A);t.rvt_(this.Cvt_());this.$Ai_[t._1t_(RY.Z)]!=null&&t.dt_({colorprovider:this.$Ai_[t._1t_(RY.Z)]});t.J1t_().forEach((t=>{this.Qni_.getData().add(t)}));t.on(wY.pct_,(()=>{this.Ani_(t,!0)}));const n=(t,i,s)=>{if(this.Qni_==null)return;const e=this.Qni_.getData();switch(t){case fm.Add:e.add(s);break;case fm.mt_:e.remove(s);break}};t.on(fm.Add,n).on(fm.mt_,n);return!0}fni_(t,i){this.Fni_(i._1t_(RY.X),!0);this.Fni_(i._1t_(RY.Y),!0);return this}Lni_(t){const i=this.LM_().lt_();if(t instanceof mA)return t.$s_(i);const s=t instanceof FS?t.Fkt_():t;return i.contains(s)}OAi_(){return this.rni_}EOt_(){return this.QOt_}$qt_(t){if(t===this.QOt_)return this;this.QOt_=t;const i=this.C5_("crosshair");switch(this.QOt_){case XT.ax_:i.FVt_(null);break;case XT.ux_:i.kVt_(null)}return this}fAi_(t,i,s,e){let A,n,h,r;if(i instanceof $Y){n=i.getType();A=i.XC_();if(this.D1t_[A]!=null)return null;this.D1t_[A]=i;i.dt_({location:s});i.t5t_(i.ZZ_())}else{const t=Es(i);A=t["id"];n=t["type"];if(t["type"]===jY.X2t_){h=t["colorprovider"];r=t["size"]}if(this.D1t_[A]!=null)return null;this.D1t_[A]=new $Y({location:s});const e=t["tickgenerator"];ys(e,Qg)||this.D1t_[A].o5t_(e);this.D1t_[A].dt_(t);this.pni_(A)}const o=this.D1t_[A];if(n!==jY.X2t_){if(e==null){e=new sI({verticalflip:o.KH_()===fg.ax_&&!o.c5t_(),horizontalflip:o.KH_()===fg.ux_&&o.c5t_()});if(this.M3t_.length>0){const t=this.LM_().FY_(this.M3t_[0]);this.LM_().xY_(t,e)}else this.LM_().GY_(e)}this._Ai_[A]=e;e.GY_(o.UNt_());o.on(ZY.pct_,this.eni_);o.on(ZY.j2t_,this.nni_);super.fAi_(t,o,s,e);return{axis:o,group:e}}o.KC_(!1);this.$Ai_[A]==null&&(this.$Ai_[A]=h||rq);this.i3t_[A]=new av({id:A,colorprovider:this.$Ai_[A],componentsizes:{title:0,namedcolors:0,colorbox:hq},colorbox:{size:r},axis:{autolabelrotation:!0,item:o},location:s,flip:o.c5t_(),min:this.$Ai_[A].Em_(),max:this.$Ai_[A].pm_(),layoutstyle:{constraint:this.D1t_[A].KH_()===fg.ax_?ea.LS_:ea.US_}});const l=this.v4_(s);l.xY_(0,this.i3t_[A]);l.bG_().add(this.i3t_[A]);l.wq_();const u=this.i3t_[A];u.on(uv.Rwt_,(()=>{s=u.tQt_();this.D1t_[A].dt_({location:s});this.xni_(A);u.ft_({constraint:this.D1t_[A].KH_()===fg.ax_?ea.LS_:ea.US_},!1,!0)}));const a=this.AAi_().setOptions({enabled:!0,name:"floatingColorBarTool_"+A,colorbar:u,textstyle:"#757575",colorprovider:this.$Ai_[A]}),g=a.D4t_().VC_(1);this.jAi_[A]=a;this.Nni_.add(a);const c=new _k({name:"cursorColorBarTool_"+A,group:this,colorbar:u,callback:()=>{const t=this.Cvt_();if(t==null)return null;for(let i=0;i<this.M3t_.length;i++){const s=this.M3t_[i];if(s._1t_(RY.Z)!==o.XC_())continue;const e=t.getSelection(s.e2t_(),s.R1t_()).getSelection(Rl.__)||{};for(const t in e)if(e[t]!=null&&e[t].length>0){const i=s.y2t_(t,e[t][0]);if(i!=null)return i}}return null}});g.on(rh.cC_,(()=>{g.$C_()?c.fVt_(a.M4t_(),g):c.fVt_(u,this)}));this.XAi_[A]=c;this.Nni_.add(c);return{axis:o,group:this.i3t_[A]}}CAi_(t,i,s){const e=this.v4_(i);return this.fAi_(e.qY_(),t,i,s)}dAi_(t){const i=t.XC_();if(t.getType()!==jY.X2t_){super.dAi_(t);t.off(ZY.pct_,this.eni_);t.off(ZY.j2t_,this.nni_);const s=t.UNt_().getParent();this.LM_().removeChild(s);delete this._Ai_[i]}else{const s=t.Nwt_(),e=this.v4_(s);e.removeChild(this.i3t_[i]);e.bG_().remove(this.i3t_[i]);e.wq_();this.Nni_.remove(this.jAi_[i]);this.Nni_.remove(this.XAi_[i]);delete this.i3t_[i];delete this.$Ai_[i];delete this.jAi_[i];delete this.XAi_[i]}delete this.D1t_[i];this.vei_({})}wq_(t){super.wq_(t);return this.vei_({})}vei_(t){this.gni_=qi(t,this.gni_,!0);const i=this.uAi_(),s=["top","left","bottom","right"],e={};let A=!1;this.s3t_.y4_();for(let t=0;t<oq.length;t++){const n=t%2==1,h=this.gni_[oq[t]];if(h==null||h==="auto"){let i=0;const A=this.gAi_(oq[t]);if(A!=null){const t=A.IR_(A.getParent().if_()).rn_(sa.RS_());i+=Math.ceil(n?t.Ie_():t.Ts_());i+=2*A.XX_()}for(const s in this.D1t_){const e=this.D1t_[s];if(e.Nwt_()!==oq[t])continue;const A=e.sT_()||new xA,h=e.getParent(),r=undefined;(h&&h.if_()||Gn.JI_).oI_(A,A);let o=Math.ceil(n?A.Ie_():A.Ts_());if(this.i3t_[s]!=null){if(!this.i3t_[s].$C_())continue;this.i3t_[s].setOptions({componentsizes:{axis:o,colorbox:hq}});o+=hq;const t=this.i3t_[s].qb_();if(t){const i=t.wn_();o+=n?i["width"]:i["height"]}}else h instanceof sI&&h.ft_(n?{width:o}:{height:o});i+=o}const h=this.M3t_||[];for(let e=0;e<h.length;e++){const A=h[e].j1t_();i=Math.max(i,typeof A=="number"?A:A.wn_()[s[t]]||0)}e[oq[t]]=i}else e[oq[t]]=h;A=A||e[oq[t]]!==i[oq[t]]}return A?super.vei_(e):this}l4t_(t,i){const s=this._C_();this.rd_(!1);i=i||nq.Ai_();const e=undefined,A=new pw(i).l5_(t);A.Hw_("#widget",this);A.Uw_("geotoolkit.widgets.ChartWidget","template");this.rd_(s);this.wq_();this.td_();return this}u4t_(t,i){t=t||nq.Ai_();const s=undefined,e=undefined;return new pw(t,i).o5_("template",this)}KAi_(){return this.$Ai_}qAi_(t){this.$Ai_=t;for(const t in this.$Ai_)this.i3t_[t]!=null&&this.i3t_[t].dt_({colorprovider:this.$Ai_[t]});return this}Uni_(t,i){const s=t.XC_()+"",e=i.XC_()+"";if(s==null||e==null||this._1t_(s)==null||this._1t_(e)==null)return!1;if(Object.keys(this.D1t_).length===2)return!0;const A=t.Nwt_(),n=i.Nwt_();if(A===n||A===ha.sG_&&n===ha.AG_||A===ha.AG_&&n===ha.sG_||A===ha.eG_&&n===ha.nG_||A===ha.nG_&&n===ha.eG_)return!0;for(let t=0;t<this.M3t_.length;t++){const i=this.M3t_[t],A=i._1t_(RY.X),n=i._1t_(RY.Y);if(A!=null&&n!=null&&(A===s&&n!==e||A===e&&n!==s))return!1}return!0}Yni_(t,i){if(!this.Uni_(t,i))throw new Error("The axes can not be swapped");const s=t.XC_(),e=i.XC_(),A=t.Nwt_(),n=i.Nwt_(),h=t.getParent(),r=i.getParent(),o=h.getParent(),l=r.getParent(),u=o.FY_(h),a=l.FY_(r);if(A===n||A===ha.sG_&&n===ha.AG_||A===ha.AG_&&n===ha.sG_||A===ha.eG_&&n===ha.nG_||A===ha.nG_&&n===ha.eG_){this.dAi_(t);this.fAi_(a,t,n);this.dAi_(i);this.fAi_(u,i,A);this.Ani_(null,!0);this.wq_()}else{this.dAi_(t);this.dAi_(i);if(this.M3t_!=null)for(let t=0;t<this.M3t_.length;t++){const i=this.M3t_[t]._1t_(RY.X),A=this.M3t_[t]._1t_(RY.Y);if(i===s&&A===e||i===e&&A===s){const s=this.M3t_[t].K1t_(RY.X),e=this.M3t_[t].K1t_(RY.Y);if(s!=null&&e!=null&&s["data"]!=null&&!Array.isArray(e)&&e["data"]!=null){this.M3t_[t].dt_({axes:{x:A,y:i},series:{x:e["data"],y:s["data"]}});this.M3t_[t].x1t_()}}}this.fAi_(a,t,n);this.fAi_(u,i,A);this.Ani_(null,!0);this.wq_()}return this}Tni_(){return this.i3t_}dispose(){if(!this.Df_()){for(let t=0;t<this.M3t_.length;t++){const i=this.M3t_[t];i.off(cT.L5t_,this.Ini_);i.dispose()}this.M3t_=[];super.dispose()}}};i=t([_s("geotoolkit.widgets.ChartWidget")],i);return i}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRDaGFydCI6IlZBaV8iLCJpbnNlcnRDaGFydCI6ImRuaV8iLCJjaGFuZ2VDaGFydE9yZGVyIjoiQm5pXyIsInJlbW92ZUNoYXJ0Ijoid25pXyIsImNsZWFyQ2hhcnRzIjoiRW5pXyIsInNldERhdGFTb3VyY2UiOiJydnRfIiwic2V0VGl0bGUiOiJFX18iLCJnZXRUaXRsZSI6Im1WXyIsInRvb2x0aXBUaXRsZUZvcm1hdCI6InpBaV8iLCJnZXREYXRhU291cmNlIjoiQ3Z0XyIsImdldENoYXJ0c0NvdW50IjoiSEFpXyIsImdldENoYXJ0IjoibTN0XyIsInNldFByb3BlcnRpZXMiOiJkdF8iLCJnZXRQcm9wZXJ0aWVzIjoiTl8iLCJpbml0aWFsaXplVG9vbHMiOiJBNHRfIiwicmVmcmVzaExheW91dCI6IlhlaV8iLCJzZXRCb3VuZHMiOiJodF8iLCJnZXRMZWdlbmQiOiJTbmlfIiwiZ2V0TGVnZW5kUGFuZWwiOiJXQWlfIiwiZ2V0QXhpcyI6Il8xdF8iLCJnZXRDb2xvckJhciI6IkIzdF8iLCJzeW5jaHJvbml6ZVZpZXdMaW1pdHMiOiJQZWlfIiwiaGl0VGVzdCI6IiRYXyIsImdldFNlbGVjdGlvblJhZGl1cyI6Ik9BaV8iLCJnZXRTZWxlY3Rpb25Nb2RlIjoiRU90XyIsInNldFNlbGVjdGlvbk1vZGUiOiIkcXRfIiwiaW5zZXJ0QXhpcyI6ImZBaV8iLCJhZGRBeGlzIjoiQ0FpXyIsInJlbW92ZUF4aXMiOiJkQWlfIiwidXBkYXRlTGF5b3V0Ijoid3FfIiwic2V0QW5ub3RhdGlvblNpemUiOiJ2ZWlfIiwibG9hZFRlbXBsYXRlIjoibDR0XyIsInNhdmVUZW1wbGF0ZSI6InU0dF8iLCJnZXRDb2xvcmJhcnMiOiJUbmlfIn19fSAg");export {wY,QY,EY,pY,yY,DY,NY,SY,GY,RY,UY,YY,TY,KY,VY,OY,WY,zY,XY,jY,ZY,$Y,tT,iT,AT,nT,rT,oT,gT,cT,IT,CT,dT,wT,pT,bT,NT,FT,xT,LT,UT,YT,TT,KT,qT,JT,PT,OT,WT,zT,XT,nq,aq,gq,cq,fq};